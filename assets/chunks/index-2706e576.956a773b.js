import"./index-fb59d3e2.129620ef.js";import{U as v}from"./index-8fa1e870.fe5e36ce.js";import{M as x}from"./index.bacdd4cb.js";import{U as B}from"./index.99cf1d74.js";import{d as g,o as y,A as z,B as A,G as S,E as V,m as i}from"./framework.b419ffca.js";import"./index.111d6006.js";import"./render-function.17f57477.js";const h=g({name:"PicUpload",__name:"index",props:{modelValue:{default:()=>""},maxSize:{default:0}},emits:["update:modelValue"],setup(s,{emit:n}){const u=s,m=n,a=i({get:()=>u.modelValue,set:e=>{m("update:modelValue",e)}}),o=i(()=>a.value?Array.isArray(a.value)?a.value.map(e=>({uid:e,name:e,status:"done",url:e})):[{uid:a.value,name:a.value,status:"done",url:a.value}]:[]);function d(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB"}function p(e){return new Promise((l,r)=>{if(u.maxSize&&e.size>u.maxSize*1024){const t=d(u.maxSize*1024);x.error(`文件大小不能超过${t}`),r(!1)}l(!0)})}function c(e){return new Promise(l=>{const r=o.value.findIndex(t=>t.url===e.url);r>-1&&(o.value.splice(r,1),a.value=o.value.map(t=>t.url)),l(!0)})}function f(e){e.url&&(Array.isArray(a.value)?a.value.push(e.url):a.value=e.url)}return(e,l)=>{const r=B;return y(),z(v,null,{default:A(()=>[S(r,V({"list-type":"picture-card","image-preview":!0,"default-file-list":o.value,accept:"image/*","on-before-upload":p,"on-before-remove":c},e.$attrs,{onSuccess:f}),null,16,["default-file-list"])]),_:1})}}});export{h as default};
