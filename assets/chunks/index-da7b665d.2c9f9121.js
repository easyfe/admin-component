import{Q as P,ah as S,_ as Re,ao as Fe,a6 as Te,L as He,al as Ee,ad as _e,ae as ze,a2 as Ae}from"./index-26f37704.e07d1ef6.js";import{t as Ne}from"./index-62e77c68.773a85e7.js";import{g as le,P as Z,k,D as Me,j as Le,I as Ue,u as Ge,l as Qe,e as K,c as te,f as re,d as W,a as qe,h as Je}from"./input-range.7c431213.js";import{u as z,a as Ke}from"./use-merge-state.b7ff3acf.js";import{a7 as ee,m as g,w as B,d as ae,j as me,G as ne,a3 as _,D as se,o as A,A as N,B as O,z as We,n as Xe,I as ue,E as x,a8 as ie,r as X,i as Ye}from"./framework.f5b7da40.js";function Ze(e){const{modelValue:n,defaultValue:o,format:i,isRange:r}=ee(e);function c(){return r.value?[]:void 0}function f(d){if(!P(d))return r.value?S(d)?d:[d,void 0]:d}const u=g(()=>{const d=f(n.value);return le(d,i.value)}),p=g(()=>{const d=f(o.value);return le(d,i.value)}),[I,D]=z(P(u.value)?P(p.value)?c():p.value:u.value);B(u,()=>{P(u.value)&&D(c())});const b=g(()=>u.value||I.value),[R,F]=z(b.value);B([b],()=>{F(b.value)});const[M,w]=z();return B([R],()=>{w(void 0)}),{computedValue:b,panelValue:R,inputValue:M,setValue:D,setPanelValue:F,setInputValue:w}}var xe=Object.defineProperty,ea=Object.defineProperties,aa=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,na=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,de=(e,n,o)=>n in e?xe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,la=(e,n)=>{for(var o in n||(n={}))na.call(n,o)&&de(e,o,n[o]);if(pe)for(var o of pe(n))oa.call(n,o)&&de(e,o,n[o]);return e},ta=(e,n)=>ea(e,aa(n)),ra=ae({name:"TimePickerRangePanel",components:{Panel:Z},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:n}){const{value:o,displayIndex:i}=ee(e),r=me(i.value);B(i,()=>{r.value=i.value});const c=g(()=>o!=null&&o.value?o.value[r.value]:void 0);function f(p){const I=P(o)||P(o==null?void 0:o.value)?[]:[...o.value];I[r.value]=p,n("select",I)}function u(){if(k(o==null?void 0:o.value))n("confirm",o==null?void 0:o.value);else{const p=(r.value+1)%2;r.value=p,n("display-index-change",p),n("update:displayIndex",p)}}return{displayValue:c,onSelect:f,onConfirm:u}},render(){const e=ta(la({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return ne(Z,e,this.$slots)}}),sa=Object.defineProperty,ce=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,fe=(e,n,o)=>n in e?sa(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ve=(e,n)=>{for(var o in n||(n={}))ua.call(n,o)&&fe(e,o,n[o]);if(ce)for(var o of ce(n))ia.call(n,o)&&fe(e,o,n[o]);return e};const pa=ae({name:"TimePicker",components:{Trigger:Fe,DateInput:Me,DateRangeInput:Le,Panel:Z,RangePanel:ra,IconClockCircle:Ue},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:String},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,n)=>!0,"update:modelValue":e=>!0,select:(e,n)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:n}){const{type:o,format:i,use12Hours:r,modelValue:c,defaultValue:f,popupVisible:u,defaultPopupVisible:p,disabled:I,placeholder:D,disableConfirm:b,disabledHours:R,disabledMinutes:F,disabledSeconds:M}=ee(e),{mergedDisabled:w,eventHandlers:d}=Te({disabled:I}),C=g(()=>o.value==="time-range"),ge=He("timepicker"),T=me(),{format:v,use12Hours:be}=Ge(_({format:i,use12Hours:r})),{computedValue:L,panelValue:V,inputValue:U,setValue:Ve,setPanelValue:G,setInputValue:H}=Ze(_({modelValue:c,defaultValue:f,isRange:C,format:v})),[$,ye]=Ke(p.value,_({value:u})),j=a=>{a!==$.value&&(ye(a),n("popup-visible-change",a),n("update:popupVisible",a))},{t:oe}=Ee(),[y,Q]=z(0),Pe=g(()=>{const a=D==null?void 0:D.value;return C.value?P(a)?oe("datePicker.rangePlaceholder.time"):S(a)?a:[a,a]:P(a)?oe("datePicker.placeholder.time"):a}),q=Qe(_({disabledHours:R,disabledMinutes:F,disabledSeconds:M}));function Ce(a){var l,t;if(Je(a,L.value)){const m=K(a,v.value),s=te(a);n("update:modelValue",m),n("change",m,s),(t=(l=d.value)==null?void 0:l.onChange)==null||t.call(l)}}function h(a,l){if(q(a))return;let t=a;if(S(a)){const m=W();t=a.map(s=>(s&&(s=s.year(m.year()),s=s.month(m.month()),s=s.date(m.date())),s)),k(t)&&(t=qe(t)),(t==null?void 0:t.length)===0&&(t=void 0)}Ce(t),Ve(t),l!==$.value&&j(l)}function J(a,l){G(a),l!==$.value&&j(l)}function E(a){T.value&&T.value.focus&&T.value.focus(a)}function he(a){w.value||(j(a),a&&Ye(()=>{E(y.value)}))}function Ie(a){const l=K(a,v.value),t=te(a);n("select",l,t),b.value&&(!C.value||k(a))?h(a,!0):(J(a,!0),H(void 0))}function Se(a){h(a,!1)}function Oe(){h(V.value||L.value,!1)}function De(){if(k(V.value))h(V.value,!1);else{const a=(y.value+1)%2;Q(a),E(a)}}function we(a){j(!0);const l=a.target.value;if(H(l),!re(l,v.value))return;const t=W(l,v.value);q(t)||(b.value?h(t,!0):J(t,!0))}function $e(a){j(!0);const l=a.target.value,t=S(U.value)?[...U.value]:S(V.value)&&K(V.value,v.value)||[];if(t[y.value]=l,H(t),!re(l,v.value))return;const m=W(l,v.value);if(q(m))return;const s=S(V.value)?[...V.value]:[];s[y.value]=m,b.value&&k(s)?h(s,!0):J(s,!0)}function je(a){a.stopPropagation(),G(void 0),h(void 0,C.value)}B($,(a,l)=>{a!==l&&G(L.value),a||H(void 0)});const ke=g(()=>C.value?{focusedIndex:y.value,onFocusedIndexChange:a=>{Q(a)},onChange:$e,onPressEnter:De}:{onChange:we,onPressEnter:Oe}),Be=g(()=>C.value?{displayIndex:y.value,onDisplayIndexChange:a=>{Q(a),E(a)}}:{});return{refInput:T,isRange:C,prefixCls:ge,panelVisible:$,focusedInputIndex:y,computedPlaceholder:Pe,panelValue:V,inputValue:U,computedFormat:v,computedUse12Hours:be,inputProps:ke,panelProps:Be,mergedDisabled:w,onPanelVisibleChange:he,onInputClear:je,onPanelSelect:Ie,onPanelConfirm:Se,onPanelClick:()=>{E(y.value)}}}});function da(e,n,o,i,r,c){const f=se("IconClockCircle"),u=se("Trigger");return A(),N(u,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer,onPopupVisibleChange:e.onPanelVisibleChange},{content:O(()=>[We("div",{class:Xe(`${e.prefixCls}-container`),onClick:n[0]||(n[0]=(...p)=>e.onPanelClick&&e.onPanelClick(...p))},[(A(),N(ue(e.isRange?"RangePanel":"Panel"),x(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),ie({_:2},[e.$slots.extra?{name:"extra-footer",fn:O(()=>[X(e.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:O(()=>[(A(),N(ue(e.isRange?"DateRangeInput":"DateInput"),x(ve(ve({},e.$attrs),e.inputProps),{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),ie({"suffix-icon":O(()=>[X(e.$slots,"suffix-icon",{},()=>[ne(f)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:O(()=>[X(e.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","editable","allow-clear","placeholder","onClear"]))]),_:3},8,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var Y=Re(pa,[["render",da]]);const ca=Object.assign(Y,{install:(e,n)=>{_e(e,n);const o=ze(n);e.component(o+Y.name,Y)}});const fa=ae({name:"Time",__name:"index",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,i=g({get:()=>o.modelValue,set:r=>{n("update:modelValue",r)}});return(r,c)=>{const f=ca;return A(),N(Ne,null,{default:O(()=>[ne(f,x({modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=u=>i.value=u)},r.$attrs),null,16,["modelValue"])]),_:1})}}}),ya=Ae(fa,[["__scopeId","data-v-004b5108"]]);export{ya as default};
