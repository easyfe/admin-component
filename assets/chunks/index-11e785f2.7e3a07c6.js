import{aa as de,a0 as be,X as Le,$ as Se,ab as tl,L as pe,at as nl,av as ol,a1 as ve,ar as il,ad as ul,ak as Ce,aS as ke,aT as rl,aU as _e,aV as Ie,_ as Ee,ai as cl,aW as sl,O as dl,aX as vl,aY as Fe,aM as E,a5 as pl,a6 as fl}from"./index-32b7d196.8819ad8e.js";import{U as yl}from"./index-7aca8840.b3d0c079.js";import{d as ee,R as fe,j as A,m as K,G as b,E as ie,ac as hl,ad as Te,a5 as ze,w as le,a2 as D,S as We,D as te,o as ne,A as oe,B as I,a6 as se,r as J,ag as ml,ax as gl}from"./framework.6f649eb3.js";const qe=(e,{optionMap:a,leafOptionMap:l,leafOptionSet:y,leafOptionValueMap:d,totalLevel:i,checkStrictly:v,enabledLazyLoad:c,lazyLoadOptions:p,valueKey:L,fieldNames:o})=>{let f=0;const C=(O,s,m)=>{var N;const W=(N=s==null?void 0:s.path)!=null?N:[];return f=Math.max(f,m??1),O.map((V,q)=>{var w;const S=V[o.value],u={raw:V,value:S,label:(w=V[o.label])!=null?w:String(S),disabled:!!V[o.disabled],selectionDisabled:!1,render:V[o.render],tagProps:V[o.tagProps],isLeaf:V[o.isLeaf],level:W.length,index:q,key:"",valueKey:String(be(S)?S[L.value]:S),parent:s,path:[],pathValue:[]},F=W.concat(u),G=[],H=F.map(T=>(G.push(T.value),T.valueKey)).join("-");return u.path=F,u.pathValue=G,u.key=H,V[o.children]?(u.isLeaf=!1,u.children=C(V[o.children],u,(m??1)+1)):c&&!u.isLeaf?(u.isLeaf=!1,p[H]&&(u.children=C(p[H],u,(m??1)+1))):u.isLeaf=!0,u.children&&!u.disabled&&(u.totalLeafOptions=u.children.reduce((T,_)=>tl(_.totalLeafOptions)?T+_.totalLeafOptions:_.disabled||_.selectionDisabled?T:T+(_.isLeaf?1:0),0),u.totalLeafOptions===0&&!v.value&&(u.selectionDisabled=!0)),a.set(u.key,u),(u.isLeaf||v.value)&&(y.add(u),l.set(u.key,u),d.has(u.valueKey)||d.set(u.valueKey,u.key)),u})},P=C(e);return i.value=f,P},Pe=(e,a)=>{var l,y;let d=!1,i=!1;if(e.isLeaf)a!=null&&a.has(e.key)&&(d=!0);else{const v=new RegExp(`^${e.key}(-|$)`),c=Array.from((l=a==null?void 0:a.keys())!=null?l:[]).reduce((p,L)=>v.test(L)?p+1:p,0);c>0&&c>=((y=e.totalLeafOptions)!=null?y:1)?d=!0:c>0&&(i=!0)}return{checked:d,indeterminate:i}},Ve=e=>{const a=[];if(e.isLeaf)a.push(e.key);else if(e.children)for(const l of e.children)a.push(...Ve(l));return a},we=e=>{const a=[];if(e.disabled||e.selectionDisabled)return a;if(e.isLeaf)a.push(e);else if(e.children)for(const l of e.children)a.push(...we(l));return a},Ue=(e,{valueKey:a,leafOptionValueMap:l})=>{var y;if(de(e))return e.map(i=>be(i)?i[a]:i).join("-");const d=be(e)?e[a]:e;return(y=l.get(String(d)))!=null?y:String(d)},Ge=(e,{multiple:a,pathMode:l})=>de(e)?l&&!a&&e.length>0&&!de(e[0])?[e]:e:Le(e)||Se(e)||e===""?[]:[e],He=e=>e.path.map(a=>a.label).join(" / "),$e=Symbol("ArcoCascader");var Oe=ee({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(e){const a=pe("cascader-option"),l=fe($e,{}),y=A(!1),d={},i=o=>{var f;if(ve(l.loadMore)&&!e.option.isLeaf){const{isLeaf:C,children:P,key:O}=e.option;!C&&!P&&(y.value=!0,new Promise(s=>{var m;(m=l.loadMore)==null||m.call(l,e.option.raw,s)}).then(s=>{var m;y.value=!1,s&&((m=l.addLazyLoadOptions)==null||m.call(l,s,O))}))}(f=l.setSelectedPath)==null||f.call(l,e.option.key)};e.option.disabled||(d.onMouseenter=[()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l,e.option.key)}],d.onMouseleave=()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l)},d.onClick=[],l.expandTrigger==="hover"?d.onMouseenter.push(o=>i()):d.onClick.push(o=>i()),e.option.isLeaf&&!e.multiple&&d.onClick.push(o=>{var f;i(),(f=l.onClickOption)==null||f.call(l,e.option)}));const v=K(()=>[a,{[`${a}-active`]:e.active,[`${a}-disabled`]:e.option.disabled}]),c=K(()=>{var o;return e.checkStrictly?{checked:(o=l.valueMap)==null?void 0:o.has(e.option.key),indeterminate:!1}:Pe(e.option,l.valueMap)}),p=()=>{var o,f,C;return e.pathLabel?(f=(o=l==null?void 0:l.formatLabel)==null?void 0:o.call(l,e.option.path.map(P=>P.raw)))!=null?f:He(e.option):(C=l.slots)!=null&&C.option?l.slots.option({data:e.option}):ve(e.option.render)?e.option.render():e.option.label},L=()=>y.value?b(il,null,null):!e.searchOption&&!e.option.isLeaf?b(ul,null,null):null;return()=>{var o;return b("li",ie({tabindex:"0",role:"menuitem","aria-disabled":e.option.disabled,"aria-haspopup":!e.option.isLeaf,"aria-expanded":!e.option.isLeaf&&e.active,title:e.option.label,class:v.value},d),[e.multiple&&b(nl,{modelValue:c.value.checked,indeterminate:c.value.indeterminate,disabled:e.option.disabled||e.option.selectionDisabled,uninjectGroupContext:!0,onChange:(f,C)=>{var P;C.stopPropagation(),i(),(P=l.onClickOption)==null||P.call(l,e.option,!c.value.checked)},onClick:f=>f.stopPropagation()},null),e.checkStrictly&&!e.multiple&&b(ol,{modelValue:(o=l.valueMap)==null?void 0:o.has(e.option.key),disabled:e.option.disabled,uninjectGroupContext:!0,onChange:(f,C)=>{var P;C.stopPropagation(),i(),(P=l.onClickOption)==null||P.call(l,e.option,!0)},onClick:f=>f.stopPropagation()},null),b("div",{class:`${a}-label`},[p(),L()])])}}}),bl=ee({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Ce,void 0),d=A(),i=A(!!e.virtualListProps),v=()=>{var c,p,L,o,f;return(f=(o=(c=a.empty)==null?void 0:c.call(a))!=null?o:(L=y==null?void 0:(p=y.slots).empty)==null?void 0:L.call(p,{component:"cascader"}))!=null?f:b(_e,null,null)};return()=>{var c;return b("div",{class:`${l}-panel-column`,style:{zIndex:e.totalLevel-e.level}},[e.column.length===0?b(ke,{class:`${l}-column-content`},{default:()=>[b("div",{class:`${l}-list-empty`},[v()])]}):i.value?b(rl,ie({key:(c=e.column)==null?void 0:c.length},e.virtualListProps,{ref:d,data:e.column}),{item:({item:p})=>b(Oe,{key:p.key,option:p,active:e.selectedPath.includes(p.key)||p.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null)}):b(ke,{class:`${l}-column-content`},{default:()=>[b("ul",{role:"menu",class:[`${l}-list`,{[`${l}-list-multiple`]:!!(e!=null&&e.multiple),[`${l}-list-strictly`]:!!(e!=null&&e.checkStrictly)}]},[e.column.map(p=>b(Oe,{key:p.key,option:p,active:e.selectedPath.includes(p.key)||p.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null))])]})])}}});function kl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}var Ye=ee({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Ce,void 0),d=()=>{var v,c,p,L,o;return(o=(L=(v=a.empty)==null?void 0:v.call(a))!=null?L:(p=y==null?void 0:(c=y.slots).empty)==null?void 0:p.call(c,{component:"cascader"}))!=null?o:b(_e,null,null)},i=()=>e.loading?b("div",{key:"panel-column-loading",class:[`${l}-panel-column`,`${l}-panel-column-loading`]},[b(Ie,null,null)]):e.displayColumns.length===0?b("div",{key:"panel-column-empty",class:`${l}-panel-column`},[b("div",{class:`${l}-list-empty`},[d()])]):e.displayColumns.map((v,c)=>b(bl,{key:`column-${c}`,column:v,level:c,selectedPath:e.selectedPath,activeKey:e.activeKey,totalLevel:e.totalLevel,multiple:e.multiple,checkStrictly:e.checkStrictly,virtualListProps:e.virtualListProps},null));return()=>{let v;return b(hl,{tag:"div",name:"cascader-slide",class:[`${l}-panel`,{[`${l}-dropdown-panel`]:e.dropdown}]},kl(v=i())?v:{default:()=>[v]})}}});function Ol(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}var Ll=ee({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Ce,void 0),d=()=>{var i,v,c,p,L;return e.loading?b(Ie,null,null):e.options.length===0?b("div",{class:`${l}-list-empty`},[(L=(p=(i=a.empty)==null?void 0:i.call(a))!=null?p:(c=y==null?void 0:(v=y.slots).empty)==null?void 0:c.call(v,{component:"cascader"}))!=null?L:b(_e,null,null)]):b("ul",{role:"menu",class:[`${l}-list`,`${l}-search-list`,{[`${l}-list-multiple`]:e.multiple}]},[e.options.map(o=>b(Oe,{key:o.key,class:`${l}-search-option`,option:o,active:o.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly,pathLabel:e.pathLabel,searchOption:!0},null))])};return()=>{let i;return b(ke,{class:[`${l}-panel`,`${l}-search-panel`]},Ol(i=d())?i:{default:()=>[i]})}}});const Xe=(e,{optionMap:a,filteredLeafOptions:l,showSearchPanel:y,expandChild:d})=>{const i=A(),v=K(()=>{if(i.value)return a.get(i.value)}),c=A([]),p=K(()=>{const O=[e.value];for(const s of c.value){const m=a.get(s);m!=null&&m.children&&O.push(m.children)}return O}),L=O=>{var s;const m=C(O);c.value=(s=m==null?void 0:m.path.map(N=>N.key))!=null?s:[]},o=O=>{i.value=O},f=K(()=>{var O;return y!=null&&y.value?l.value.filter(s=>!s.disabled):v.value&&v.value.parent?(O=v.value.parent.children)==null?void 0:O.filter(s=>!s.disabled):e.value.filter(s=>!s.disabled)}),C=O=>{let s=O?a.get(O):void 0;if(d.value)for(;s&&s.children&&s.children.length>0;)s=s.children[0];return s};return{activeKey:i,activeOption:v,selectedPath:c,displayColumns:p,setActiveKey:o,setSelectedPath:L,getNextActiveNode:O=>{var s,m,N,W,V,q,w;const S=(m=(s=f.value)==null?void 0:s.length)!=null?m:0;if(i.value){const u=(W=(N=f.value)==null?void 0:N.findIndex(F=>F.key===i.value))!=null?W:0;return O==="next"?(V=f.value)==null?void 0:V[(S+u+1)%S]:(q=f.value)==null?void 0:q[(S+u-1)%S]}return(w=f.value)==null?void 0:w[0]}}};var Sl=Object.defineProperty,Me=Object.getOwnPropertySymbols,Cl=Object.prototype.hasOwnProperty,_l=Object.prototype.propertyIsEnumerable,Ae=(e,a,l)=>a in e?Sl(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Ne=(e,a)=>{for(var l in a||(a={}))Cl.call(a,l)&&Ae(e,l,a[l]);if(Me)for(var l of Me(a))_l.call(a,l)&&Ae(e,l,a[l]);return e};const Pl=ee({name:"Cascader",components:{Trigger:cl,SelectView:sl,BaseCascaderPanel:Ye,CascaderSearchPanel:Ll},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:e=>!!e.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object}},emits:{"update:modelValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,clear:()=>!0,search:e=>!0,popupVisibleChange:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:d,loadMore:i,formatLabel:v,modelValue:c,disabled:p,valueKey:L,expandTrigger:o,expandChild:f,pathMode:C,multiple:P}=ze(e),O=A(e.defaultValue),s=A(e.defaultInputValue),m=A(e.defaultPopupVisible),{mergedDisabled:N,eventHandlers:W}=dl({disabled:p});le(c,t=>{(Le(t)||Se(t))&&(O.value=e.multiple?[]:void 0)});const V=A([]),q=A(1),w=D(new Map),S=D(new Map),u=D(new Map),F=D(new Set),G=D({}),H=(t,n)=>{G[n]=t},T={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},_=K(()=>Ne(Ne({},T),e.fieldNames));le([y,G,_],([t,n,g])=>{w.clear(),S.clear(),u.clear(),F.clear(),V.value=qe(t??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:G,optionMap:w,leafOptionSet:F,leafOptionMap:S,leafOptionValueMap:u,totalLevel:q,checkStrictly:d,valueKey:L,fieldNames:g})},{immediate:!0,deep:!0});const B=K(()=>{var t;const n=Ge((t=e.modelValue)!=null?t:O.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(n.map(g=>[Ue(g,{valueKey:e.valueKey,leafOptionValueMap:u}),g]))}),Q=K(()=>{var t;return(t=e.inputValue)!=null?t:s.value}),j=K(()=>{var t;return(t=e.popupVisible)!=null?t:m.value}),Y=t=>{var n;return t==null?void 0:t.toLocaleLowerCase().includes((n=Q.value)==null?void 0:n.toLocaleLowerCase())},ae=K(()=>(e.checkStrictly?Array.from(w.values()):Array.from(F)).filter(n=>{var g;return ve(e.filterOption)?e.filterOption(Q.value,n.raw):e.checkStrictly?Y(n.label):(g=n.path)==null?void 0:g.find(k=>Y(k.label))})),U=t=>{var n,g,k;const M=e.multiple?t:(n=t[0])!=null?n:"";t.length===0&&(Z(),X()),O.value=M,a("update:modelValue",M),a("change",M),(k=(g=W.value)==null?void 0:g.onChange)==null||k.call(g)};le([P,C],()=>{const t=[];B.value.forEach((n,g)=>{const k=S.get(g);k&&t.push(C.value?k.pathValue:k.value)}),U(t)});const r=t=>{j.value!==t&&(m.value=t,a("popupVisibleChange",t))},h=t=>{if(e.multiple){const n=S.get(t);if(n)z(n,!1);else{const g=[];B.value.forEach((k,M)=>{M!==t&&g.push(k)}),U(g)}}},$=t=>{U([e.pathMode?t.pathValue:t.value]),r(!1)},z=(t,n)=>{if(n){const g=e.checkStrictly?[t]:we(t);U([...B.value.values(),...g.filter(k=>!B.value.has(k.key)).map(k=>e.pathMode?k.pathValue:k.value)])}else{const g=e.checkStrictly?[t.key]:Ve(t),k=[];B.value.forEach((M,x)=>{g.includes(x)||k.push(M)}),U(k)}re("","optionChecked")},ue=(t,n)=>{e.multiple?z(t,n??!0):$(t)},ye=vl(t=>{a("search",t)},e.searchDelay),re=(t,n)=>{t!==Q.value&&(n==="manual"&&!j.value&&(m.value=!0,a("popupVisibleChange",!0)),s.value=t,a("inputValueChange",t),e.allowSearch&&ye(t))};le(j,t=>{if(t){if(B.value.size>0){const n=Array.from(B.value.keys()),g=n[n.length-1],k=S.get(g);k&&k.key!==Ke.value&&(Z(k.key),X(k.key))}}else B.value.size===0&&(Z(),X()),re("","optionListHide")});const Je=t=>{if(t.stopPropagation(),e.multiple){const n=[];B.value.forEach((g,k)=>{const M=S.get(k);M!=null&&M.disabled&&n.push(e.pathMode?M.pathValue:M.value)}),U(n)}else U([]);re("","manual"),a("clear")},ce=K(()=>e.allowSearch&&Q.value.length>0),Qe=t=>{a("focus",t)},Ze=t=>{a("blur",t)},{activeKey:Ke,activeOption:R,selectedPath:xe,displayColumns:el,setActiveKey:X,setSelectedPath:Z,getNextActiveNode:Be}=Xe(V,{optionMap:w,filteredLeafOptions:ae,showSearchPanel:ce,expandChild:f});We($e,D({onClickOption:ue,setActiveKey:X,setSelectedPath:Z,loadMore:i,expandTrigger:o,addLazyLoadOptions:H,formatLabel:v,slots:l,valueMap:B}));const ll=Fe(new Map([[E.ENTER,t=>{if(j.value){if(R.value){let n;e.checkStrictly||R.value.isLeaf?n=!B.value.has(R.value.key):n=!Pe(R.value,B.value).checked,Z(R.value.key),ue(R.value,n)}}else r(!0)}],[E.ESC,t=>{r(!1)}],[E.ARROW_DOWN,t=>{t.preventDefault();const n=Be("next");X(n==null?void 0:n.key)}],[E.ARROW_UP,t=>{t.preventDefault();const n=Be("preview");X(n==null?void 0:n.key)}],[E.ARROW_RIGHT,t=>{var n,g;ce.value||(t.preventDefault(),(n=R.value)!=null&&n.children&&(Z(R.value.key),X((g=R.value.children[0])==null?void 0:g.key)))}],[E.ARROW_LEFT,t=>{var n;ce.value||(t.preventDefault(),(n=R.value)!=null&&n.parent&&(Z(R.value.parent.key),X(R.value.parent.key)))}]])),al=K(()=>{const t=[];return B.value.forEach((n,g)=>{var k,M;const x=S.get(g);if(x)t.push({value:g,label:(M=(k=e.formatLabel)==null?void 0:k.call(e,x.path.map(he=>he.raw)))!=null?M:He(x),closable:!x.disabled,tagProps:x.tagProps});else if(e.fallback){const he=ve(e.fallback)?e.fallback(n):de(n)?n.join(" / "):String(n);t.push({value:g,label:he,closable:!0})}}),t});return{optionInfos:V,filteredLeafOptions:ae,selectedPath:xe,activeKey:Ke,displayColumns:el,computedInputValue:Q,computedPopupVisible:j,handleClear:Je,selectViewValue:al,handleInputValueChange:re,showSearchPanel:ce,handlePopupVisibleChange:r,handleFocus:Qe,handleBlur:Ze,handleRemove:h,mergedDisabled:N,handleKeyDown:ll,totalLevel:q}}});function Vl(e,a,l,y,d,i){const v=te("select-view"),c=te("cascader-search-panel"),p=te("base-cascader-panel"),L=te("trigger");return ne(),oe(L,ie(e.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":e.computedPopupVisible,position:"bl",disabled:e.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":e.showSearchPanel,"popup-container":e.popupContainer,"prevent-focus":!0,"click-to-close":!e.allowSearch,onPopupVisibleChange:e.handlePopupVisibleChange}),{content:I(()=>[e.showSearchPanel?(ne(),oe(c,{key:0,options:e.filteredLeafOptions,"active-key":e.activeKey,multiple:e.multiple,"check-strictly":e.checkStrictly,loading:e.loading,"path-label":!e.searchOptionOnlyLabel},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[J(e.$slots,"empty")])}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(ne(),oe(p,{key:1,"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,loading:e.loading,"virtual-list-props":e.virtualListProps,dropdown:""},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[J(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:I(()=>[b(v,ie({"model-value":e.selectViewValue,"input-value":e.computedInputValue,disabled:e.mergedDisabled,error:e.error,multiple:e.multiple,"allow-clear":e.allowClear,"allow-search":e.allowSearch,size:e.size,opened:e.computedPopupVisible,placeholder:e.placeholder,loading:e.loading,"max-tag-count":e.maxTagCount},e.$attrs,{onInputValueChange:e.handleInputValueChange,onClear:e.handleClear,onFocus:e.handleFocus,onBlur:e.handleBlur,onRemove:e.handleRemove,onKeydown:e.handleKeyDown}),se({_:2},[e.$slots.label?{name:"label",fn:I(o=>[J(e.$slots,"label",ml(gl(o)))])}:void 0,e.$slots.prefix?{name:"prefix",fn:I(()=>[J(e.$slots,"prefix")])}:void 0,e.$slots["arrow-icon"]?{name:"arrow-icon",fn:I(()=>[J(e.$slots,"arrow-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:I(()=>[J(e.$slots,"loading-icon")])}:void 0,e.$slots["search-icon"]?{name:"search-icon",fn:I(()=>[J(e.$slots,"search-icon")])}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var me=Ee(Pl,[["render",Vl]]),wl=Object.defineProperty,je=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,Re=(e,a,l)=>a in e?wl(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,De=(e,a)=>{for(var l in a||(a={}))$l.call(a,l)&&Re(e,l,a[l]);if(je)for(var l of je(a))Kl.call(a,l)&&Re(e,l,a[l]);return e};const Bl=ee({name:"CascaderPanel",components:{BaseCascaderPanel:Ye},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:d,loadMore:i,modelValue:v,valueKey:c,expandChild:p,expandTrigger:L}=ze(e),o=A(e.defaultValue);le(v,r=>{(Le(r)||Se(r))&&(o.value=e.multiple?[]:void 0)});const f=A([]),C=A(1),P=D(new Map),O=D(new Map),s=D(new Map),m=D(new Set),N=D({}),W=(r,h)=>{N[h]=r},V={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},q=K(()=>De(De({},V),e.fieldNames));le([y,N,q],([r,h,$])=>{P.clear(),O.clear(),s.clear(),m.clear(),f.value=qe(r??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:h,optionMap:P,leafOptionSet:m,leafOptionMap:O,leafOptionValueMap:s,totalLevel:C,checkStrictly:d,fieldNames:$,valueKey:c})},{immediate:!0});const w=K(()=>{var r;const h=Ge((r=e.modelValue)!=null?r:o.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(h.map($=>[Ue($,{valueKey:e.valueKey,leafOptionValueMap:s}),$]))}),S=K(()=>e.checkStrictly?Array.from(P.values()):Array.from(m)),u=r=>{var h;const $=e.multiple?r:(h=r[0])!=null?h:"";r.length===0&&(Y(),j()),o.value=$,a("update:modelValue",$),a("change",$)},F=r=>{u([e.pathMode?r.pathValue:r.value])},G=(r,h)=>{if(h){const $=e.checkStrictly?[r]:we(r);u([...w.value.values(),...$.filter(z=>!w.value.has(z.key)).map(z=>e.pathMode?z.pathValue:z.value)])}else{const $=e.checkStrictly?[r.key]:Ve(r),z=[];w.value.forEach((ue,ye)=>{$.includes(ye)||z.push(ue)}),u(z)}},H=(r,h)=>{e.multiple?G(r,h??!0):F(r)},{activeKey:T,activeOption:_,selectedPath:B,displayColumns:Q,setActiveKey:j,setSelectedPath:Y,getNextActiveNode:ae}=Xe(f,{optionMap:P,filteredLeafOptions:S,expandChild:p});We($e,D({onClickOption:H,setActiveKey:j,setSelectedPath:Y,loadMore:i,addLazyLoadOptions:W,slots:l,valueMap:w,expandTrigger:L}));const U=Fe(new Map([[E.ENTER,r=>{if(_.value){let h;e.checkStrictly||_.value.isLeaf?h=!w.value.has(_.value.key):h=!Pe(_.value,w.value).checked,Y(_.value.key),H(_.value,h)}}],[E.ARROW_DOWN,r=>{r.preventDefault();const h=ae("next");j(h==null?void 0:h.key)}],[E.ARROW_UP,r=>{r.preventDefault();const h=ae("preview");j(h==null?void 0:h.key)}],[E.ARROW_RIGHT,r=>{var h,$;r.preventDefault(),(h=_.value)!=null&&h.children&&(Y(_.value.key),j(($=_.value.children[0])==null?void 0:$.key))}],[E.ARROW_LEFT,r=>{var h;r.preventDefault(),(h=_.value)!=null&&h.parent&&(Y(_.value.parent.key),j(_.value.parent.key))}]]));return{optionInfos:f,filteredLeafOptions:S,selectedPath:B,activeKey:T,displayColumns:Q,handleKeyDown:U,totalLevel:C}}});function Ml(e,a,l,y,d,i){const v=te("base-cascader-panel");return ne(),oe(v,{"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,onKeydown:e.handleKeyDown},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[J(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var ge=Ee(Bl,[["render",Ml]]);const Al=Object.assign(me,{CascaderPanel:ge,install:(e,a)=>{pl(e,a);const l=fl(a);e.component(l+me.name,me),e.component(l+ge.name,ge)}}),Dl=ee({name:"Cascader",__name:"index",props:{labelKey:{default:"label"},valueKey:{default:"value"},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const l=e,y=K({get:()=>l.modelValue,set:d=>{a("update:modelValue",d)}});return(d,i)=>{const v=Al;return ne(),oe(yl,null,{default:I(()=>[b(v,ie({modelValue:y.value,"onUpdate:modelValue":i[0]||(i[0]=c=>y.value=c)},d.$attrs),null,16,["modelValue"])]),_:1})}}});export{Dl as default};
