import{aa as de,Y as be,W as Le,X as Ce,ab as tl,O as pe,at as nl,av as ol,Z as ve,ar as il,ad as ul,ak as Se,aT as ke,aU as rl,aV as Pe,aW as Re,J as Ee,ai as cl,aX as sl,P as dl,aY as vl,aZ as Fe,aN as E,a3 as pl,a4 as fl}from"./index-e5bb41c5.c7ba2fae.js";import{U as yl}from"./index-a973a4fc.f1d6f10a.js";import{d as ee,O as fe,i as A,l as K,G as b,E as ie,aa as hl,ab as Te,a3 as ze,w as le,a0 as I,Q as We,D as te,o as ne,A as oe,B as R,a4 as se,r as Z,au as ml,av as gl}from"./framework.83c44ddb.js";const qe=(e,{optionMap:a,leafOptionMap:l,leafOptionSet:y,leafOptionValueMap:p,totalLevel:i,checkStrictly:c,enabledLazyLoad:s,lazyLoadOptions:d,valueKey:L,fieldNames:o})=>{let f=0;const S=(O,v,m)=>{var N;const W=(N=v==null?void 0:v.path)!=null?N:[];return f=Math.max(f,m??1),O.map((_,q)=>{var w;const C=_[o.value],u={raw:_,value:C,label:(w=_[o.label])!=null?w:String(C),disabled:!!_[o.disabled],selectionDisabled:!1,render:_[o.render],tagProps:_[o.tagProps],isLeaf:_[o.isLeaf],level:W.length,index:q,key:"",valueKey:String(be(C)?C[L.value]:C),parent:v,path:[],pathValue:[]},F=W.concat(u),G=[],H=F.map(T=>(G.push(T.value),T.valueKey)).join("-");return u.path=F,u.pathValue=G,u.key=H,_[o.children]?(u.isLeaf=!1,u.children=S(_[o.children],u,(m??1)+1)):s&&!u.isLeaf?(u.isLeaf=!1,d[H]&&(u.children=S(d[H],u,(m??1)+1))):u.isLeaf=!0,u.children&&!u.disabled&&(u.totalLeafOptions=u.children.reduce((T,P)=>tl(P.totalLeafOptions)?T+P.totalLeafOptions:P.disabled||P.selectionDisabled?T:T+(P.isLeaf?1:0),0),u.totalLeafOptions===0&&!c.value&&(u.selectionDisabled=!0)),a.set(u.key,u),(u.isLeaf||c.value)&&(y.add(u),l.set(u.key,u),p.has(u.valueKey)||p.set(u.valueKey,u.key)),u})},V=S(e);return i.value=f,V},Ve=(e,a)=>{var l,y;let p=!1,i=!1;if(e.isLeaf)a!=null&&a.has(e.key)&&(p=!0);else{const c=new RegExp(`^${e.key}(-|$)`),s=Array.from((l=a==null?void 0:a.keys())!=null?l:[]).reduce((d,L)=>c.test(L)?d+1:d,0);s>0&&s>=((y=e.totalLeafOptions)!=null?y:1)?p=!0:s>0&&(i=!0)}return{checked:p,indeterminate:i}},_e=e=>{const a=[];if(e.isLeaf)a.push(e.key);else if(e.children)for(const l of e.children)a.push(..._e(l));return a},we=e=>{const a=[];if(e.disabled||e.selectionDisabled)return a;if(e.isLeaf)a.push(e);else if(e.children)for(const l of e.children)a.push(...we(l));return a},Ue=(e,{valueKey:a,leafOptionValueMap:l})=>{var y;if(de(e))return e.map(i=>be(i)?i[a]:i).join("-");const p=be(e)?e[a]:e;return(y=l.get(String(p)))!=null?y:String(p)},Ge=(e,{multiple:a,pathMode:l})=>de(e)?l&&!a&&e.length>0&&!de(e[0])?[e]:e:Le(e)||Ce(e)||e===""?[]:[e],He=e=>e.path.map(a=>a.label).join(" / "),$e=Symbol("ArcoCascader");var Oe=ee({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(e){const a=pe("cascader-option"),l=fe($e,{}),y=A(!1),p={},i=o=>{var f;if(ve(l.loadMore)&&!e.option.isLeaf){const{isLeaf:S,children:V,key:O}=e.option;!S&&!V&&(y.value=!0,new Promise(v=>{var m;(m=l.loadMore)==null||m.call(l,e.option.raw,v)}).then(v=>{var m;y.value=!1,v&&((m=l.addLazyLoadOptions)==null||m.call(l,v,O))}))}(f=l.setSelectedPath)==null||f.call(l,e.option.key)};e.option.disabled||(p.onMouseenter=[()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l,e.option.key)}],p.onMouseleave=()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l)},p.onClick=[],l.expandTrigger==="hover"?p.onMouseenter.push(o=>i()):p.onClick.push(o=>i()),e.option.isLeaf&&!e.multiple&&p.onClick.push(o=>{var f;i(),(f=l.onClickOption)==null||f.call(l,e.option)}));const c=K(()=>[a,{[`${a}-active`]:e.active,[`${a}-disabled`]:e.option.disabled}]),s=K(()=>{var o;return e.checkStrictly?{checked:(o=l.valueMap)==null?void 0:o.has(e.option.key),indeterminate:!1}:Ve(e.option,l.valueMap)}),d=()=>{var o,f,S;return e.pathLabel?(f=(o=l==null?void 0:l.formatLabel)==null?void 0:o.call(l,e.option.path.map(V=>V.raw)))!=null?f:He(e.option):(S=l.slots)!=null&&S.option?l.slots.option({data:e.option}):ve(e.option.render)?e.option.render():e.option.label},L=()=>y.value?b(il,null,null):!e.searchOption&&!e.option.isLeaf?b(ul,null,null):null;return()=>{var o;return b("li",ie({tabindex:"0",role:"menuitem","aria-disabled":e.option.disabled,"aria-haspopup":!e.option.isLeaf,"aria-expanded":!e.option.isLeaf&&e.active,title:e.option.label,class:c.value},p),[e.multiple&&b(nl,{modelValue:s.value.checked,indeterminate:s.value.indeterminate,disabled:e.option.disabled||e.option.selectionDisabled,uninjectGroupContext:!0,onChange:(f,S)=>{var V;S.stopPropagation(),i(),(V=l.onClickOption)==null||V.call(l,e.option,!s.value.checked)},onClick:f=>f.stopPropagation()},null),e.checkStrictly&&!e.multiple&&b(ol,{modelValue:(o=l.valueMap)==null?void 0:o.has(e.option.key),disabled:e.option.disabled,uninjectGroupContext:!0,onChange:(f,S)=>{var V;S.stopPropagation(),i(),(V=l.onClickOption)==null||V.call(l,e.option,!0)},onClick:f=>f.stopPropagation()},null),b("div",{class:`${a}-label`},[d(),L()])])}}}),bl=ee({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Se,void 0),p=A(),i=A(!!e.virtualListProps),c=()=>{var s,d,L,o,f;return(f=(o=(s=a.empty)==null?void 0:s.call(a))!=null?o:(L=y==null?void 0:(d=y.slots).empty)==null?void 0:L.call(d,{component:"cascader"}))!=null?f:b(Pe,null,null)};return()=>{var s;return b("div",{class:`${l}-panel-column`,style:{zIndex:e.totalLevel-e.level}},[e.column.length===0?b(ke,{class:`${l}-column-content`},{default:()=>[b("div",{class:`${l}-list-empty`},[c()])]}):i.value?b(rl,ie({key:(s=e.column)==null?void 0:s.length},e.virtualListProps,{ref:p,data:e.column}),{item:({item:d})=>b(Oe,{key:d.key,option:d,active:e.selectedPath.includes(d.key)||d.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null)}):b(ke,{class:`${l}-column-content`},{default:()=>[b("ul",{role:"menu",class:[`${l}-list`,{[`${l}-list-multiple`]:!!(e!=null&&e.multiple),[`${l}-list-strictly`]:!!(e!=null&&e.checkStrictly)}]},[e.column.map(d=>b(Oe,{key:d.key,option:d,active:e.selectedPath.includes(d.key)||d.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null))])]})])}}});function kl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}var Ye=ee({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Se,void 0),p=()=>{var c,s,d,L,o;return(o=(L=(c=a.empty)==null?void 0:c.call(a))!=null?L:(d=y==null?void 0:(s=y.slots).empty)==null?void 0:d.call(s,{component:"cascader"}))!=null?o:b(Pe,null,null)},i=()=>e.loading?b("div",{key:"panel-column-loading",class:[`${l}-panel-column`,`${l}-panel-column-loading`]},[b(Re,null,null)]):e.displayColumns.length===0?b("div",{key:"panel-column-empty",class:`${l}-panel-column`},[b("div",{class:`${l}-list-empty`},[p()])]):e.displayColumns.map((c,s)=>b(bl,{key:`column-${s}`,column:c,level:s,selectedPath:e.selectedPath,activeKey:e.activeKey,totalLevel:e.totalLevel,multiple:e.multiple,checkStrictly:e.checkStrictly,virtualListProps:e.virtualListProps},{empty:a.empty}));return()=>{let c;return b(hl,{tag:"div",name:"cascader-slide",class:[`${l}-panel`,{[`${l}-dropdown-panel`]:e.dropdown}]},kl(c=i())?c:{default:()=>[c]})}}});function Ol(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}var Ll=ee({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(e,{slots:a}){const l=pe("cascader"),y=fe(Se,void 0),p=()=>{var i,c,s,d,L;return e.loading?b(Re,null,null):e.options.length===0?b("div",{class:`${l}-list-empty`},[(L=(d=(i=a.empty)==null?void 0:i.call(a))!=null?d:(s=y==null?void 0:(c=y.slots).empty)==null?void 0:s.call(c,{component:"cascader"}))!=null?L:b(Pe,null,null)]):b("ul",{role:"menu",class:[`${l}-list`,`${l}-search-list`,{[`${l}-list-multiple`]:e.multiple}]},[e.options.map(o=>b(Oe,{key:o.key,class:`${l}-search-option`,option:o,active:o.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly,pathLabel:e.pathLabel,searchOption:!0},null))])};return()=>{let i;return b(ke,{class:[`${l}-panel`,`${l}-search-panel`]},Ol(i=p())?i:{default:()=>[i]})}}});const Xe=(e,{optionMap:a,filteredLeafOptions:l,showSearchPanel:y,expandChild:p})=>{const i=A(),c=K(()=>{if(i.value)return a.get(i.value)}),s=A([]),d=K(()=>{const O=[e.value];for(const v of s.value){const m=a.get(v);m!=null&&m.children&&O.push(m.children)}return O}),L=O=>{var v;const m=S(O);s.value=(v=m==null?void 0:m.path.map(N=>N.key))!=null?v:[]},o=O=>{i.value=O},f=K(()=>{var O;return y!=null&&y.value?l.value.filter(v=>!v.disabled):c.value&&c.value.parent?(O=c.value.parent.children)==null?void 0:O.filter(v=>!v.disabled):e.value.filter(v=>!v.disabled)}),S=O=>{let v=O?a.get(O):void 0;if(p.value)for(;v&&v.children&&v.children.length>0;)v=v.children[0];return v};return{activeKey:i,activeOption:c,selectedPath:s,displayColumns:d,setActiveKey:o,setSelectedPath:L,getNextActiveNode:O=>{var v,m,N,W,_,q,w;const C=(m=(v=f.value)==null?void 0:v.length)!=null?m:0;if(i.value){const u=(W=(N=f.value)==null?void 0:N.findIndex(F=>F.key===i.value))!=null?W:0;return O==="next"?(_=f.value)==null?void 0:_[(C+u+1)%C]:(q=f.value)==null?void 0:q[(C+u-1)%C]}return(w=f.value)==null?void 0:w[0]}}};var Cl=Object.defineProperty,Me=Object.getOwnPropertySymbols,Sl=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable,Ae=(e,a,l)=>a in e?Cl(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Ne=(e,a)=>{for(var l in a||(a={}))Sl.call(a,l)&&Ae(e,l,a[l]);if(Me)for(var l of Me(a))Pl.call(a,l)&&Ae(e,l,a[l]);return e};const Vl=ee({name:"Cascader",components:{Trigger:cl,SelectView:sl,BaseCascaderPanel:Ye,CascaderSearchPanel:Ll},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:e=>!!e.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,clear:()=>!0,search:e=>!0,popupVisibleChange:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:p,loadMore:i,formatLabel:c,modelValue:s,disabled:d,valueKey:L,expandTrigger:o,expandChild:f,pathMode:S,multiple:V}=ze(e),O=A(e.defaultValue),v=A(e.defaultInputValue),m=A(e.defaultPopupVisible),{mergedDisabled:N,eventHandlers:W}=dl({disabled:d});le(s,t=>{(Le(t)||Ce(t))&&(O.value=e.multiple?[]:void 0)});const _=A([]),q=A(1),w=I(new Map),C=I(new Map),u=I(new Map),F=I(new Set),G=I({}),H=(t,n)=>{G[n]=t},T={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},P=K(()=>Ne(Ne({},T),e.fieldNames));le([y,G,P],([t,n,g])=>{w.clear(),C.clear(),u.clear(),F.clear(),_.value=qe(t??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:G,optionMap:w,leafOptionSet:F,leafOptionMap:C,leafOptionValueMap:u,totalLevel:q,checkStrictly:p,valueKey:L,fieldNames:g})},{immediate:!0,deep:!0});const B=K(()=>{var t;const n=Ge((t=e.modelValue)!=null?t:O.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(n.map(g=>[Ue(g,{valueKey:e.valueKey,leafOptionValueMap:u}),g]))}),J=K(()=>{var t;return(t=e.inputValue)!=null?t:v.value}),j=K(()=>{var t;return(t=e.popupVisible)!=null?t:m.value}),Y=t=>{var n;return t==null?void 0:t.toLocaleLowerCase().includes((n=J.value)==null?void 0:n.toLocaleLowerCase())},ae=K(()=>(e.checkStrictly?Array.from(w.values()):Array.from(F)).filter(n=>{var g;return ve(e.filterOption)?e.filterOption(J.value,n.raw):e.checkStrictly?Y(n.label):(g=n.path)==null?void 0:g.find(k=>Y(k.label))})),U=t=>{var n,g,k;const M=e.multiple?t:(n=t[0])!=null?n:"";t.length===0&&(Q(),X()),O.value=M,a("update:modelValue",M),a("change",M),(k=(g=W.value)==null?void 0:g.onChange)==null||k.call(g)};le([V,S],()=>{const t=[];B.value.forEach((n,g)=>{const k=C.get(g);k&&t.push(S.value?k.pathValue:k.value)}),U(t)});const r=t=>{j.value!==t&&(m.value=t,a("popupVisibleChange",t))},h=t=>{if(e.multiple){const n=C.get(t);if(n)z(n,!1);else{const g=[];B.value.forEach((k,M)=>{M!==t&&g.push(k)}),U(g)}}},$=t=>{U([e.pathMode?t.pathValue:t.value]),r(!1)},z=(t,n)=>{if(n){const g=e.checkStrictly?[t]:we(t);U([...B.value.values(),...g.filter(k=>!B.value.has(k.key)).map(k=>e.pathMode?k.pathValue:k.value)])}else{const g=e.checkStrictly?[t.key]:_e(t),k=[];B.value.forEach((M,x)=>{g.includes(x)||k.push(M)}),U(k)}re("","optionChecked")},ue=(t,n)=>{e.multiple?z(t,n??!0):$(t)},ye=vl(t=>{a("search",t)},e.searchDelay),re=(t,n)=>{t!==J.value&&(n==="manual"&&!j.value&&(m.value=!0,a("popupVisibleChange",!0)),v.value=t,a("inputValueChange",t),e.allowSearch&&ye(t))};le(j,t=>{if(t){if(B.value.size>0){const n=Array.from(B.value.keys()),g=n[n.length-1],k=C.get(g);k&&k.key!==Ke.value&&(Q(k.key),X(k.key))}}else B.value.size===0&&(Q(),X()),re("","optionListHide")});const Ze=t=>{if(t.stopPropagation(),e.multiple){const n=[];B.value.forEach((g,k)=>{const M=C.get(k);M!=null&&M.disabled&&n.push(e.pathMode?M.pathValue:M.value)}),U(n)}else U([]);re("","manual"),a("clear")},ce=K(()=>e.allowSearch&&J.value.length>0),Je=t=>{a("focus",t)},Qe=t=>{a("blur",t)},{activeKey:Ke,activeOption:D,selectedPath:xe,displayColumns:el,setActiveKey:X,setSelectedPath:Q,getNextActiveNode:Be}=Xe(_,{optionMap:w,filteredLeafOptions:ae,showSearchPanel:ce,expandChild:f});We($e,I({onClickOption:ue,setActiveKey:X,setSelectedPath:Q,loadMore:i,expandTrigger:o,addLazyLoadOptions:H,formatLabel:c,slots:l,valueMap:B}));const ll=Fe(new Map([[E.ENTER,t=>{if(j.value){if(D.value){let n;e.checkStrictly||D.value.isLeaf?n=!B.value.has(D.value.key):n=!Ve(D.value,B.value).checked,Q(D.value.key),ue(D.value,n)}}else r(!0)}],[E.ESC,t=>{r(!1)}],[E.ARROW_DOWN,t=>{t.preventDefault();const n=Be("next");X(n==null?void 0:n.key)}],[E.ARROW_UP,t=>{t.preventDefault();const n=Be("preview");X(n==null?void 0:n.key)}],[E.ARROW_RIGHT,t=>{var n,g;ce.value||(t.preventDefault(),(n=D.value)!=null&&n.children&&(Q(D.value.key),X((g=D.value.children[0])==null?void 0:g.key)))}],[E.ARROW_LEFT,t=>{var n;ce.value||(t.preventDefault(),(n=D.value)!=null&&n.parent&&(Q(D.value.parent.key),X(D.value.parent.key)))}]])),al=K(()=>{const t=[];return B.value.forEach((n,g)=>{var k,M;const x=C.get(g);if(x)t.push({value:g,label:(M=(k=e.formatLabel)==null?void 0:k.call(e,x.path.map(he=>he.raw)))!=null?M:He(x),closable:!x.disabled,tagProps:x.tagProps});else if(e.fallback){const he=ve(e.fallback)?e.fallback(n):de(n)?n.join(" / "):String(n);t.push({value:g,label:he,closable:!0})}}),t});return{optionInfos:_,filteredLeafOptions:ae,selectedPath:xe,activeKey:Ke,displayColumns:el,computedInputValue:J,computedPopupVisible:j,handleClear:Ze,selectViewValue:al,handleInputValueChange:re,showSearchPanel:ce,handlePopupVisibleChange:r,handleFocus:Je,handleBlur:Qe,handleRemove:h,mergedDisabled:N,handleKeyDown:ll,totalLevel:q}}});function _l(e,a,l,y,p,i){const c=te("select-view"),s=te("cascader-search-panel"),d=te("base-cascader-panel"),L=te("trigger");return ne(),oe(L,ie(e.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":e.computedPopupVisible,position:"bl",disabled:e.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":e.showSearchPanel,"popup-container":e.popupContainer,"prevent-focus":!0,"click-to-close":!e.allowSearch,onPopupVisibleChange:e.handlePopupVisibleChange}),{content:R(()=>[e.showSearchPanel?(ne(),oe(s,{key:0,options:e.filteredLeafOptions,"active-key":e.activeKey,multiple:e.multiple,"check-strictly":e.checkStrictly,loading:e.loading,"path-label":!e.searchOptionOnlyLabel},se({_:2},[e.$slots.empty?{name:"empty",fn:R(()=>[Z(e.$slots,"empty")])}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(ne(),oe(d,{key:1,"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,loading:e.loading,"virtual-list-props":e.virtualListProps,dropdown:""},se({_:2},[e.$slots.empty?{name:"empty",fn:R(()=>[Z(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:R(()=>[b(c,ie({"model-value":e.selectViewValue,"input-value":e.computedInputValue,disabled:e.mergedDisabled,error:e.error,multiple:e.multiple,"allow-clear":e.allowClear,"allow-search":e.allowSearch,size:e.size,opened:e.computedPopupVisible,placeholder:e.placeholder,loading:e.loading,"max-tag-count":e.maxTagCount,"tag-nowrap":e.tagNowrap},e.$attrs,{onInputValueChange:e.handleInputValueChange,onClear:e.handleClear,onFocus:e.handleFocus,onBlur:e.handleBlur,onRemove:e.handleRemove,onKeydown:e.handleKeyDown}),se({_:2},[e.$slots.label?{name:"label",fn:R(o=>[Z(e.$slots,"label",ml(gl(o)))])}:void 0,e.$slots.prefix?{name:"prefix",fn:R(()=>[Z(e.$slots,"prefix")])}:void 0,e.$slots["arrow-icon"]?{name:"arrow-icon",fn:R(()=>[Z(e.$slots,"arrow-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:R(()=>[Z(e.$slots,"loading-icon")])}:void 0,e.$slots["search-icon"]?{name:"search-icon",fn:R(()=>[Z(e.$slots,"search-icon")])}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","tag-nowrap","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var me=Ee(Vl,[["render",_l]]),wl=Object.defineProperty,je=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,De=(e,a,l)=>a in e?wl(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Ie=(e,a)=>{for(var l in a||(a={}))$l.call(a,l)&&De(e,l,a[l]);if(je)for(var l of je(a))Kl.call(a,l)&&De(e,l,a[l]);return e};const Bl=ee({name:"CascaderPanel",components:{BaseCascaderPanel:Ye},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:p,loadMore:i,modelValue:c,valueKey:s,expandChild:d,expandTrigger:L}=ze(e),o=A(e.defaultValue);le(c,r=>{(Le(r)||Ce(r))&&(o.value=e.multiple?[]:void 0)});const f=A([]),S=A(1),V=I(new Map),O=I(new Map),v=I(new Map),m=I(new Set),N=I({}),W=(r,h)=>{N[h]=r},_={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},q=K(()=>Ie(Ie({},_),e.fieldNames));le([y,N,q],([r,h,$])=>{V.clear(),O.clear(),v.clear(),m.clear(),f.value=qe(r??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:h,optionMap:V,leafOptionSet:m,leafOptionMap:O,leafOptionValueMap:v,totalLevel:S,checkStrictly:p,fieldNames:$,valueKey:s})},{immediate:!0});const w=K(()=>{var r;const h=Ge((r=e.modelValue)!=null?r:o.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(h.map($=>[Ue($,{valueKey:e.valueKey,leafOptionValueMap:v}),$]))}),C=K(()=>e.checkStrictly?Array.from(V.values()):Array.from(m)),u=r=>{var h;const $=e.multiple?r:(h=r[0])!=null?h:"";r.length===0&&(Y(),j()),o.value=$,a("update:modelValue",$),a("change",$)},F=r=>{u([e.pathMode?r.pathValue:r.value])},G=(r,h)=>{if(h){const $=e.checkStrictly?[r]:we(r);u([...w.value.values(),...$.filter(z=>!w.value.has(z.key)).map(z=>e.pathMode?z.pathValue:z.value)])}else{const $=e.checkStrictly?[r.key]:_e(r),z=[];w.value.forEach((ue,ye)=>{$.includes(ye)||z.push(ue)}),u(z)}},H=(r,h)=>{e.multiple?G(r,h??!0):F(r)},{activeKey:T,activeOption:P,selectedPath:B,displayColumns:J,setActiveKey:j,setSelectedPath:Y,getNextActiveNode:ae}=Xe(f,{optionMap:V,filteredLeafOptions:C,expandChild:d});We($e,I({onClickOption:H,setActiveKey:j,setSelectedPath:Y,loadMore:i,addLazyLoadOptions:W,slots:l,valueMap:w,expandTrigger:L}));const U=Fe(new Map([[E.ENTER,r=>{if(P.value){let h;e.checkStrictly||P.value.isLeaf?h=!w.value.has(P.value.key):h=!Ve(P.value,w.value).checked,Y(P.value.key),H(P.value,h)}}],[E.ARROW_DOWN,r=>{r.preventDefault();const h=ae("next");j(h==null?void 0:h.key)}],[E.ARROW_UP,r=>{r.preventDefault();const h=ae("preview");j(h==null?void 0:h.key)}],[E.ARROW_RIGHT,r=>{var h,$;r.preventDefault(),(h=P.value)!=null&&h.children&&(Y(P.value.key),j(($=P.value.children[0])==null?void 0:$.key))}],[E.ARROW_LEFT,r=>{var h;r.preventDefault(),(h=P.value)!=null&&h.parent&&(Y(P.value.parent.key),j(P.value.parent.key))}]]));return{optionInfos:f,filteredLeafOptions:C,selectedPath:B,activeKey:T,displayColumns:J,handleKeyDown:U,totalLevel:S}}});function Ml(e,a,l,y,p,i){const c=te("base-cascader-panel");return ne(),oe(c,{"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,onKeydown:e.handleKeyDown},se({_:2},[e.$slots.empty?{name:"empty",fn:R(()=>[Z(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var ge=Ee(Bl,[["render",Ml]]);const Al=Object.assign(me,{CascaderPanel:ge,install:(e,a)=>{pl(e,a);const l=fl(a);e.component(l+me.name,me),e.component(l+ge.name,ge)}}),Il=ee({name:"Cascader",__name:"index",props:{labelKey:{default:"label"},valueKey:{default:"value"},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const l=e,y=a,p=K({get:()=>l.modelValue,set:i=>{y("update:modelValue",i)}});return(i,c)=>{const s=Al;return ne(),oe(yl,null,{default:R(()=>[b(s,ie({modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=d=>p.value=d)},i.$attrs),null,16,["modelValue"])]),_:1})}}});export{Il as default};
