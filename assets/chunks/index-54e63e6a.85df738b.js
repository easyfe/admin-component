import{C as Oj,B as Tj}from"./index-af7a4902.0c500fb7.js";import{w as AL,d as gj,a4 as Aj,j as KW,i as rj,h as hj,a6 as pj,ay as Dj,a7 as Mj,af as sj,m as WW,o as jW,A as $W,B as aj,b as ij,G as lj,E as Nj}from"./framework.f10db147.js";import{e as Rj}from"./index-b9c14449.bcd46106.js";import{U as Lj}from"./index.cdbfe858.js";import"./index.363ab847.js";import"./use-merge-state.6249bcd1.js";import"./render-function.9edc4e68.js";var Hj=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Pj=function(yt){return Hj.map(function(Oo){return Oo.toLowerCase()}).indexOf(yt.toLowerCase())!==-1},Bj=function(yt,Oo,ho){Object.keys(Oo).filter(Pj).forEach(function(Ro){var Po=Oo[Ro];typeof Po=="function"&&(Ro==="onInit"?Po(yt,ho):ho.on(Ro.substring(2),function(Bo){return Po(Bo,ho)}))})},Ij=function(yt,Oo,ho,Ro){var Po=yt.modelEvents?yt.modelEvents:null,Bo=Array.isArray(Po)?Po.join(" "):Po;AL(Ro,function(wn,Kt){ho&&typeof wn=="string"&&wn!==Kt&&wn!==ho.getContent({format:yt.outputFormat})&&ho.setContent(wn)}),ho.on(Bo||"change input undo redo",function(){Oo.emit("update:modelValue",ho.getContent({format:yt.outputFormat}))})},Fj=function(yt,Oo,ho,Ro,Po,Bo){Ro.setContent(Bo()),ho.attrs["onUpdate:modelValue"]&&Ij(Oo,ho,Ro,Po),Bj(yt,ho.attrs,Ro)},cj=0,fj=function(yt){var Oo=Date.now(),ho=Math.floor(Math.random()*1e9);return cj++,yt+"_"+ho+cj+String(Oo)},Vj=function(yt){return yt!==null&&yt.tagName.toLowerCase()==="textarea"},dj=function(yt){return typeof yt>"u"||yt===""?[]:Array.isArray(yt)?yt:yt.split(" ")},zj=function(yt,Oo){return dj(yt).concat(dj(Oo))},Zj=function(yt){return yt==null},uj=function(){return{listeners:[],scriptId:fj("tiny-script"),scriptLoaded:!1}},Uj=function(){var yt=uj(),Oo=function(Po,Bo,wn,Kt){var to=Bo.createElement("script");to.referrerPolicy="origin",to.type="application/javascript",to.id=Po,to.src=wn;var sn=function(){to.removeEventListener("load",sn),Kt()};to.addEventListener("load",sn),Bo.head&&Bo.head.appendChild(to)},ho=function(Po,Bo,wn){yt.scriptLoaded?wn():(yt.listeners.push(wn),Po.getElementById(yt.scriptId)||Oo(yt.scriptId,Po,Bo,function(){yt.listeners.forEach(function(Kt){return Kt()}),yt.scriptLoaded=!0}))},Ro=function(){yt=uj()};return{load:ho,reinitialize:Ro}},Wj=Uj(),jj=function(){return typeof window<"u"?window:global},E2=function(){var yt=jj();return yt&&yt.tinymce?yt.tinymce:null},$j={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(yt){return yt==="html"||yt==="text"}}},O2=globalThis&&globalThis.__assign||function(){return O2=Object.assign||function(yt){for(var Oo,ho=1,Ro=arguments.length;ho<Ro;ho++){Oo=arguments[ho];for(var Po in Oo)Object.prototype.hasOwnProperty.call(Oo,Po)&&(yt[Po]=Oo[Po])}return yt},O2.apply(this,arguments)},Gj=function(yt,Oo,ho,Ro){return yt(Ro||"div",{id:Oo,ref:ho})},Kj=function(yt,Oo,ho){return yt("textarea",{id:Oo,visibility:"hidden",ref:ho})},mj=gj({props:$j,setup:function(yt,Oo){var ho=yt.init?O2({},yt.init):{},Ro=Aj(yt),Po=Ro.disabled,Bo=Ro.modelValue,wn=Ro.tagName,Kt=KW(null),to=null,sn=yt.id||fj("tiny-vue"),Xt=yt.init&&yt.init.inline||yt.inline,$n=!!Oo.attrs["onUpdate:modelValue"],is=!0,Hn=yt.initialValue?yt.initialValue:"",Kr="",hn=function(Cn){return $n?function(){return Bo!=null&&Bo.value?Bo.value:""}:function(){return Cn?Hn:Kr}},vt=function(){var Cn=hn(is),G=O2(O2({},ho),{readonly:yt.disabled,target:Kt.value,plugins:zj(ho.plugins,yt.plugins),toolbar:yt.toolbar||ho.toolbar,inline:Xt,setup:function(Nt){to=Nt,Nt.on("init",function(Ji){return Fj(Ji,yt,Oo,Nt,Bo,Cn)}),typeof ho.setup=="function"&&ho.setup(Nt)}});Vj(Kt.value)&&(Kt.value.style.visibility=""),E2().init(G),is=!1};AL(Po,function(Cn){var G;to!==null&&(typeof((G=to.mode)===null||G===void 0?void 0:G.set)=="function"?to.mode.set(Cn?"readonly":"design"):to.setMode(Cn?"readonly":"design"))}),AL(wn,function(Cn){var G;$n||(Kr=to.getContent()),(G=E2())===null||G===void 0||G.remove(to),rj(function(){return vt()})}),hj(function(){if(E2()!==null)vt();else if(Kt.value&&Kt.value.ownerDocument){var Cn=yt.cloudChannel?yt.cloudChannel:"6",G=yt.apiKey?yt.apiKey:"no-api-key",Nt=Zj(yt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(G,"/tinymce/").concat(Cn,"/tinymce.min.js"):yt.tinymceScriptSrc;Wj.load(Kt.value.ownerDocument,Nt,vt)}}),pj(function(){E2()!==null&&E2().remove(to)}),Xt||(Dj(function(){is||vt()}),Mj(function(){var Cn;$n||(Kr=to.getContent()),(Cn=E2())===null||Cn===void 0||Cn.remove(to)}));var Ns=function(Cn){var G;Kr=to.getContent(),(G=E2())===null||G===void 0||G.remove(to),ho=O2(O2({},ho),Cn),rj(function(){return vt()})};return Oo.expose({rerender:Ns,getEditor:function(){return to}}),function(){return Xt?Gj(sj,sn,Kt,yt.tagName):Kj(sj,sn,Kt)}}});function qj(yt){return yt&&yt.__esModule&&Object.prototype.hasOwnProperty.call(yt,"default")?yt.default:yt}var vj={exports:{}};(function(yt){(function(){var Oo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var o=typeof e;return o==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":o==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":o},ho=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Ro=function(e,o){var n=Array.prototype.slice.call(e);return n.sort(o)},Po=function(e,o){return Bo(function(n,s){return e.eq(o(n),o(s))})},Bo=function(e){return{eq:e}},wn=Bo(function(e,o){return e===o}),Kt=wn,to=function(e){return Bo(function(o,n){if(o.length!==n.length)return!1;for(var s=o.length,i=0;i<s;i++)if(!e.eq(o[i],n[i]))return!1;return!0})},sn=function(e,o){return Po(to(e),function(n){return Ro(n,o)})},Xt=function(e){return Bo(function(o,n){var s=Object.keys(o),i=Object.keys(n);if(!sn(Kt).eq(s,i))return!1;for(var d=s.length,h=0;h<d;h++){var v=s[h];if(!e.eq(o[v],n[v]))return!1}return!0})},$n=Bo(function(e,o){if(e===o)return!0;var n=Oo(e),s=Oo(o);return n!==s?!1:ho(n)?e===o:n==="array"?to($n).eq(e,o):n==="object"?Xt($n).eq(e,o):!1});const is=Object.getPrototypeOf,Hn=(e,o,n)=>{var s;return n(e,o.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===o.name},Kr=e=>{const o=typeof e;return e===null?"null":o==="object"&&Array.isArray(e)?"array":o==="object"&&Hn(e,String,(n,s)=>s.isPrototypeOf(n))?"string":o},hn=e=>o=>Kr(o)===e,vt=e=>o=>typeof o===e,Ns=e=>o=>e===o,Cn=(e,o)=>Nt(e)&&Hn(e,o,(n,s)=>is(n)===s),G=hn("string"),Nt=hn("object"),Ji=e=>Cn(e,Object),ko=hn("array"),re=Ns(null),ao=vt("boolean"),Gn=Ns(void 0),oo=e=>e==null,xe=e=>!oo(e),J=vt("function"),bs=vt("number"),Ue=(e,o)=>{if(ko(e)){for(let n=0,s=e.length;n<s;++n)if(!o(e[n]))return!1;return!0}return!1},De=()=>{},E=(e,o)=>(...n)=>e(o.apply(null,n)),lo=(e,o)=>n=>e(o(n)),Be=e=>()=>e,go=e=>e,Ot=(e,o)=>e===o;function Me(e,...o){return(...n)=>{const s=o.concat(n);return e.apply(null,s)}}const zo=e=>o=>!e(o),ls=e=>()=>{throw new Error(e)},Ko=e=>e(),xr=e=>{e()},Ne=Be(!1),ct=Be(!0);class B{constructor(o,n){this.tag=o,this.value=n}static some(o){return new B(!0,o)}static none(){return B.singletonNone}fold(o,n){return this.tag?n(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?B.some(o(this.value)):B.none()}bind(o){return this.tag?o(this.value):B.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:B.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return xe(o)?B.some(o):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const ys=Array.prototype.slice,qo=Array.prototype.indexOf,Pn=Array.prototype.push,Io=(e,o)=>qo.call(e,o),pn=(e,o)=>{const n=Io(e,o);return n===-1?B.none():B.some(n)},Ut=(e,o)=>Io(e,o)>-1,Wo=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];if(o(i,n))return!0}return!1},$t=(e,o)=>{const n=e.length,s=new Array(n);for(let i=0;i<n;i++){const d=e[i];s[i]=o(d,i)}return s},Ce=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];o(i,n)}},el=(e,o)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];o(s,n)}},hr=(e,o)=>{const n=[],s=[];for(let i=0,d=e.length;i<d;i++){const h=e[i];(o(h,i)?n:s).push(h)}return{pass:n,fail:s}},kt=(e,o)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const d=e[s];o(d,s)&&n.push(d)}return n},El=(e,o,n)=>(el(e,(s,i)=>{n=o(n,s,i)}),n),_n=(e,o,n)=>(Ce(e,(s,i)=>{n=o(n,s,i)}),n),od=(e,o,n)=>{for(let s=0,i=e.length;s<i;s++){const d=e[s];if(o(d,s))return B.some(d);if(n(d,s))break}return B.none()},xn=(e,o)=>od(e,o,Ne),qr=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];if(o(i,n))return B.some(n)}return B.none()},Ol=e=>{const o=[];for(let n=0,s=e.length;n<s;++n){if(!ko(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Pn.apply(o,e[n])}return o},Rs=(e,o)=>Ol($t(e,o)),Kn=(e,o)=>{for(let n=0,s=e.length;n<s;++n){const i=e[n];if(o(i,n)!==!0)return!1}return!0},dn=e=>{const o=ys.call(e,0);return o.reverse(),o},Tl=(e,o)=>kt(e,n=>!Ut(o,n)),Bn=(e,o)=>{const n={};for(let s=0,i=e.length;s<i;s++){const d=e[s];n[String(d)]=o(d,s)}return n},an=(e,o)=>{const n=ys.call(e,0);return n.sort(o),n},Al=(e,o)=>o>=0&&o<e.length?B.some(e[o]):B.none(),un=e=>Al(e,0),xi=e=>Al(e,e.length-1),ws=J(Array.from)?Array.from:e=>ys.call(e),Ls=(e,o)=>{for(let n=0;n<e.length;n++){const s=o(e[n],n);if(s.isSome())return s}return B.none()},Si=(e,o)=>{const n=[],s=J(o)?i=>Wo(n,d=>o(d,i)):i=>Ut(n,i);for(let i=0,d=e.length;i<d;i++){const h=e[i];s(h)||n.push(h)}return n},pr=Object.keys,ki=Object.hasOwnProperty,nt=(e,o)=>{const n=pr(e);for(let s=0,i=n.length;s<i;s++){const d=n[s],h=e[d];o(h,d)}},wo=(e,o)=>Gs(e,(n,s)=>({k:s,v:o(n,s)})),Gs=(e,o)=>{const n={};return nt(e,(s,i)=>{const d=o(s,i);n[d.k]=d.v}),n},Xr=e=>(o,n)=>{e[n]=o},pc=(e,o,n,s)=>{nt(e,(i,d)=>{(o(i,d)?n:s)(i,d)})},tl=(e,o)=>{const n={},s={};return pc(e,o,Xr(n),Xr(s)),{t:n,f:s}},jo=(e,o)=>{const n={};return pc(e,o,Xr(n),De),n},ol=(e,o)=>{const n=[];return nt(e,(s,i)=>{n.push(o(s,i))}),n},Dl=e=>ol(e,go),Xo=(e,o)=>It(e,o)?B.from(e[o]):B.none(),It=(e,o)=>ki.call(e,o),tr=(e,o)=>It(e,o)&&e[o]!==void 0&&e[o]!==null,_i=(e,o,n=$n)=>Xt(n).eq(e,o),nd=e=>{const o={};return Ce(e,n=>{o[n]={}}),pr(o)},dm=e=>e.length!==void 0,Cs=Array.isArray,Sr=e=>{if(Cs(e))return e;{const o=[];for(let n=0,s=e.length;n<s;n++)o[n]=e[n];return o}},Mn=(e,o,n)=>{if(!e)return!1;if(n=n||e,dm(e)){for(let s=0,i=e.length;s<i;s++)if(o.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(It(e,s)&&o.call(n,e[s],s,e)===!1)return!1;return!0},fr=(e,o)=>{const n=[];return Mn(e,(s,i)=>{n.push(o(s,i,e))}),n},Yr=(e,o)=>{const n=[];return Mn(e,(s,i)=>{(!o||o(s,i,e))&&n.push(s)}),n},Hs=(e,o)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===o)return n}return-1},kr=(e,o,n,s)=>{let i=Gn(n)?e[0]:n;for(let d=0;d<e.length;d++)i=o.call(s,i,e[d],d);return i},Ao=(e,o,n)=>{for(let s=0,i=e.length;s<i;s++)if(o.call(n,e[s],s,e))return s;return-1},or=e=>e[e.length-1],Ia=e=>{let o=!1,n;return(...s)=>(o||(o=!0,n=e.apply(null,s)),n)},rd=(e,o,n,s)=>{const i=e.isiOS()&&/ipad/i.test(n)===!0,d=e.isiOS()&&!i,h=e.isiOS()||e.isAndroid(),v=h||s("(pointer:coarse)"),w=i||!d&&h&&s("(min-device-width:768px)"),k=d||h&&!w,M=o.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,H=!k&&!w&&!M;return{isiPad:Be(i),isiPhone:Be(d),isTablet:Be(w),isPhone:Be(k),isTouch:Be(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Be(M),isDesktop:Be(H)}},Ei=(e,o)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(o))return s}},Xe=(e,o)=>{const n=Ei(e,o);if(!n)return{major:0,minor:0};const s=i=>Number(o.replace(n,"$"+i));return sd(s(1),s(2))},tt=(e,o)=>{const n=String(o).toLowerCase();return e.length===0?_r():Xe(e,n)},_r=()=>sd(0,0),sd=(e,o)=>({major:e,minor:o}),Ml={nu:sd,detect:tt,unknown:_r},Xd=(e,o)=>Ls(o.brands,n=>{const s=n.brand.toLowerCase();return xn(e,i=>{var d;return s===((d=i.brand)===null||d===void 0?void 0:d.toLowerCase())}).map(i=>({current:i.name,version:Ml.nu(parseInt(n.version,10),0)}))}),Yo=(e,o)=>{const n=String(o).toLowerCase();return xn(e,s=>s.search(n))},ad=(e,o)=>Yo(e,o).map(n=>{const s=Ml.detect(n.versionRegexes,o);return{current:n.name,version:s}}),Nl=(e,o)=>Yo(e,o).map(n=>{const s=Ml.detect(n.versionRegexes,o);return{current:n.name,version:s}}),Rl=(e,o)=>e.substring(o),Oi=(e,o,n)=>o===""||e.length>=o.length&&e.substr(n,n+o.length)===o,Yd=(e,o)=>$o(e,o)?Rl(e,o.length):e,Pr=(e,o,n=0,s)=>{const i=e.indexOf(o,n);return i!==-1?Gn(s)?!0:i+o.length<=s:!1},$o=(e,o)=>Oi(e,o,0),Qd=(e,o)=>Oi(e,o,e.length-o.length),nl=e=>o=>o.replace(e,""),xs=nl(/^\s+|\s+$/g),nr=nl(/^\s+/g),Er=nl(/\s+$/g),Ks=e=>e.length>0,fc=e=>!Ks(e),vc=(e,o)=>o<=0?"":new Array(o+1).join(e),ti=(e,o=10)=>{const n=parseInt(e,o);return isNaN(n)?B.none():B.some(n)},Ll=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Do=e=>o=>Pr(o,e),um=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Pr(e,"edge/")&&Pr(e,"chrome")&&Pr(e,"safari")&&Pr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ll],search:e=>Pr(e,"chrome")&&!Pr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Pr(e,"msie")||Pr(e,"trident")},{name:"Opera",versionRegexes:[Ll,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Do("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Do("firefox")},{name:"Safari",versionRegexes:[Ll,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Pr(e,"safari")||Pr(e,"mobile/"))&&Pr(e,"applewebkit")}],Fo=[{name:"Windows",search:Do("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Pr(e,"iphone")||Pr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Do("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Do("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Do("linux"),versionRegexes:[]},{name:"Solaris",search:Do("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Do("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Do("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xa={browsers:Be(um),oses:Be(Fo)},Or="Edge",Hl="Chromium",Qr="IE",bc="Opera",cs="Firefox",mm="Safari",Ss=()=>gm({current:void 0,version:Ml.unknown()}),gm=e=>{const o=e.current,n=e.version,s=i=>()=>o===i;return{current:o,version:n,isEdge:s(Or),isChromium:s(Hl),isIE:s(Qr),isOpera:s(bc),isFirefox:s(cs),isSafari:s(mm)}},Pl={unknown:Ss,nu:gm,edge:Be(Or),chromium:Be(Hl),ie:Be(Qr),opera:Be(bc),firefox:Be(cs),safari:Be(mm)},Cg="Windows",Sa="iOS",rl="Android",Jd="Linux",hm="macOS",eu="Solaris",sl="FreeBSD",tu="ChromeOS",ou=()=>Jr({current:void 0,version:Ml.unknown()}),Jr=e=>{const o=e.current,n=e.version,s=i=>()=>o===i;return{current:o,version:n,isWindows:s(Cg),isiOS:s(Sa),isAndroid:s(rl),isMacOS:s(hm),isLinux:s(Jd),isSolaris:s(eu),isFreeBSD:s(sl),isChromeOS:s(tu)}},fn={unknown:ou,nu:Jr,windows:Be(Cg),ios:Be(Sa),android:Be(rl),linux:Be(Jd),macos:Be(hm),solaris:Be(eu),freebsd:Be(sl),chromeos:Be(tu)},al={detect:(e,o,n)=>{const s=xa.browsers(),i=xa.oses(),d=o.bind(w=>Xd(s,w)).orThunk(()=>ad(s,e)).fold(Pl.unknown,Pl.nu),h=Nl(i,e).fold(fn.unknown,fn.nu),v=rd(h,d,e,n);return{browser:d,os:h,deviceType:v}}},nu=e=>window.matchMedia(e).matches;let Ti=Ia(()=>al.detect(navigator.userAgent,B.from(navigator.userAgentData),nu));const oi=()=>Ti(),xg=navigator.userAgent,Ps=oi(),Br=Ps.browser,L=Ps.os,z=Ps.deviceType,Z=xg.indexOf("Windows Phone")!==-1,ae={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Br.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Br.isIE(),windowsPhone:Z,browser:{current:Br.current,version:Br.version,isChromium:Br.isChromium,isEdge:Br.isEdge,isFirefox:Br.isFirefox,isIE:Br.isIE,isOpera:Br.isOpera,isSafari:Br.isSafari},os:{current:L.current,version:L.version,isAndroid:L.isAndroid,isChromeOS:L.isChromeOS,isFreeBSD:L.isFreeBSD,isiOS:L.isiOS,isLinux:L.isLinux,isMacOS:L.isMacOS,isSolaris:L.isSolaris,isWindows:L.isWindows},deviceType:{isDesktop:z.isDesktop,isiPad:z.isiPad,isiPhone:z.isiPhone,isPhone:z.isPhone,isTablet:z.isTablet,isTouch:z.isTouch,isWebView:z.isWebView}},lt=/^\s*|\s*$/g,_t=e=>oo(e)?"":(""+e).replace(lt,""),In=(e,o)=>o?o==="array"&&Cs(e)?!0:typeof e===o:e!==void 0,Co=(e,o,n={})=>{const s=G(e)?e.split(o||","):e||[];let i=s.length;for(;i--;)n[s[i]]={};return n},Bl=It,Ai=(e,...o)=>{for(let n=0;n<o.length;n++){const s=o[n];for(const i in s)if(It(s,i)){const d=s[i];d!==void 0&&(e[i]=d)}}return e},qs=function(e,o,n,s){s=s||this,e&&(n&&(e=e[n]),Mn(e,(i,d)=>o.call(s,i,d,n)===!1?!1:(qs(i,o,n,s),!0)))},fe={trim:_t,isArray:Cs,is:In,toArray:Sr,makeMap:Co,each:Mn,map:fr,grep:Yr,inArray:Hs,hasOwn:Bl,extend:Ai,walk:qs,resolve:(e,o=window)=>{const n=e.split(".");for(let s=0,i=n.length;s<i&&(o=o[n[s]],!!o);s++);return o},explode:(e,o)=>ko(e)?e:e===""?[]:fr(e.split(o||","),_t),_addCacheSuffix:e=>{const o=ae.cacheSuffix;return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e}},Bs=(e,o,n=Ot)=>e.exists(s=>n(s,o)),Xs=(e,o,n=Ot)=>rr(e,o,n).getOr(e.isNone()&&o.isNone()),Ir=e=>{const o=[],n=s=>{o.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return o},rr=(e,o,n)=>e.isSome()&&o.isSome()?B.some(n(e.getOrDie(),o.getOrDie())):B.none(),ln=(e,o,n,s)=>e.isSome()&&o.isSome()&&n.isSome()?B.some(s(e.getOrDie(),o.getOrDie(),n.getOrDie())):B.none(),Il=(e,o)=>e?B.some(o):B.none(),Sg=typeof window<"u"?window:Function("return this;")(),So=(e,o)=>{let n=o??Sg;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},yc=(e,o)=>{const n=e.split(".");return So(n,o)},ru=(e,o)=>yc(e,o),Tr=(e,o)=>{const n=ru(e,o);if(n==null)throw new Error(e+" not available on this browser");return n},sr=Object.getPrototypeOf,Fl=e=>Tr("HTMLElement",e),Mv=e=>{const o=yc("ownerDocument.defaultView",e);return Nt(e)&&(Fl(o).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(sr(e).constructor.name))},pm=8,mn=9,ca=11,il=1,Ys=3,tn=e=>e.dom.nodeName.toLowerCase(),su=e=>e.dom.nodeType,kg=e=>o=>su(o)===e,ar=e=>su(e)===pm||tn(e)==="#comment",ll=e=>da(e)&&Mv(e.dom),da=kg(il),Lo=kg(Ys),fm=kg(mn),id=kg(ca),_g=e=>o=>da(o)&&tn(o)===e,Eg=(e,o,n)=>{if(G(n)||ao(n)||bs(n))e.setAttribute(o,n+"");else throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},En=(e,o,n)=>{Eg(e.dom,o,n)},ni=(e,o)=>{const n=e.dom;nt(o,(s,i)=>{Eg(n,i,s)})},Nn=(e,o)=>{const n=e.dom.getAttribute(o);return n===null?void 0:n},Fa=(e,o)=>B.from(Nn(e,o)),Di=(e,o)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(o):!1},Fr=(e,o)=>{e.dom.removeAttribute(o)},au=e=>{const o=e.dom.attributes;return o==null||o.length===0},wc=e=>_n(e.dom.attributes,(o,n)=>(o[n.name]=n.value,o),{}),Va=(e,o)=>{const n=Nn(e,o);return n===void 0||n===""?[]:n.split(" ")},Og=(e,o,n)=>{const s=Va(e,o).concat([n]);return En(e,o,s.join(" ")),!0},Cc=(e,o,n)=>{const s=kt(Va(e,o),i=>i!==n);return s.length>0?En(e,o,s.join(" ")):Fr(e,o),!1},cl=e=>e.dom.classList!==void 0,xc=e=>Va(e,"class"),za=(e,o)=>Og(e,"class",o),vm=(e,o)=>Cc(e,"class",o),Qs=(e,o)=>Ut(xc(e),o)?vm(e,o):za(e,o),Sc=(e,o)=>{cl(e)?e.dom.classList.add(o):za(e,o)},Vl=e=>{(cl(e)?e.dom.classList:xc(e)).length===0&&Fr(e,"class")},iu=(e,o)=>{cl(e)?e.dom.classList.remove(o):vm(e,o),Vl(e)},bm=(e,o)=>{const n=cl(e)?e.dom.classList.toggle(o):Qs(e,o);return Vl(e),n},ld=(e,o)=>cl(e)&&e.dom.classList.contains(o),t1=(e,o)=>{const n=(o||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return kc(n.childNodes[0])},lu=(e,o)=>{const n=(o||document).createElement(e);return kc(n)},o1=(e,o)=>{const n=(o||document).createTextNode(e);return kc(n)},kc=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},K={fromHtml:t1,fromTag:lu,fromText:o1,fromDom:kc,fromPoint:(e,o,n)=>B.from(e.dom.elementFromPoint(o,n)).map(kc)},tp=(e,o)=>{const n=[],s=d=>(n.push(d),o(d));let i=o(e);do i=i.bind(s);while(i.isSome());return n},Za=(e,o)=>{const n=e.dom;if(n.nodeType!==il)return!1;{const s=n;if(s.matches!==void 0)return s.matches(o);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(o);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(o);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},cu=e=>e.nodeType!==il&&e.nodeType!==mn&&e.nodeType!==ca||e.childElementCount===0,cd=(e,o)=>{const n=o===void 0?document:o.dom;return cu(n)?[]:$t(n.querySelectorAll(e),K.fromDom)},n1=(e,o)=>{const n=o===void 0?document:o.dom;return cu(n)?B.none():B.from(n.querySelector(e)).map(K.fromDom)},To=(e,o)=>e.dom===o.dom,zl=(e,o)=>{const n=e.dom,s=o.dom;return n===s?!1:n.contains(s)},op=e=>K.fromDom(e.dom.ownerDocument),Mi=e=>fm(e)?e:op(e),ds=e=>K.fromDom(Mi(e).dom.documentElement),du=e=>K.fromDom(Mi(e).dom.defaultView),Ua=e=>B.from(e.dom.parentNode).map(K.fromDom),uu=e=>B.from(e.dom.parentElement).map(K.fromDom),ym=(e,o)=>{const n=J(o)?o:Ne;let s=e.dom;const i=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const d=s.parentNode,h=K.fromDom(d);if(i.push(h),n(h)===!0)break;s=d}return i},np=e=>{const o=n=>kt(n,s=>!To(e,s));return Ua(e).map(us).map(o).getOr([])},_c=e=>B.from(e.dom.previousSibling).map(K.fromDom),mu=e=>B.from(e.dom.nextSibling).map(K.fromDom),Zl=e=>dn(tp(e,_c)),rp=e=>tp(e,mu),us=e=>$t(e.dom.childNodes,K.fromDom),ks=(e,o)=>{const n=e.dom.childNodes;return B.from(n[o]).map(K.fromDom)},Tg=e=>ks(e,0),wm=e=>ks(e,e.dom.childNodes.length-1),gu=e=>e.dom.childNodes.length,dl=e=>e.dom.hasChildNodes(),ka=e=>{const o=e.dom.head;if(o==null)throw new Error("Head is not available yet");return K.fromDom(o)},Cm=e=>id(e)&&xe(e.dom.host),xm=J(Element.prototype.attachShadow)&&J(Node.prototype.getRootNode),sp=Be(xm),ul=xm?e=>K.fromDom(e.dom.getRootNode()):Mi,Sm=e=>Cm(e)?e:ka(Mi(e)),Ag=e=>Cm(e)?e:K.fromDom(Mi(e).dom.body),Dg=e=>{const o=ul(e);return Cm(o)?B.some(o):B.none()},Nv=e=>K.fromDom(e.dom.host),Mg=e=>{if(sp()&&xe(e.target)){const o=K.fromDom(e.target);if(da(o)&&Rv(o)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return un(n)}}return B.from(e.target)},Rv=e=>xe(e.dom.shadowRoot),dd=e=>{const o=Lo(e)?e.dom.parentNode:e.dom;if(o==null||o.ownerDocument===null)return!1;const n=o.ownerDocument;return Dg(K.fromDom(o)).fold(()=>n.body.contains(o),lo(dd,Nv))};var ir=(e,o,n,s,i)=>e(n,s)?B.some(n):J(i)&&i(n)?B.none():o(n,s,i);const Rn=(e,o,n)=>{let s=e.dom;const i=J(n)?n:Ne;for(;s.parentNode;){s=s.parentNode;const d=K.fromDom(s);if(o(d))return B.some(d);if(i(d))break}return B.none()},_s=(e,o,n)=>ir((s,i)=>i(s),Rn,e,o,n),km=(e,o)=>{const n=e.dom;return n.parentNode?r1(K.fromDom(n.parentNode),s=>!To(e,s)&&o(s)):B.none()},r1=(e,o)=>{const n=s=>o(K.fromDom(s));return xn(e.dom.childNodes,n).map(K.fromDom)},Is=(e,o)=>{const n=s=>{for(let i=0;i<s.childNodes.length;i++){const d=K.fromDom(s.childNodes[i]);if(o(d))return B.some(d);const h=n(s.childNodes[i]);if(h.isSome())return h}return B.none()};return n(e.dom)},_m=(e,o,n)=>Rn(e,s=>Za(s,o),n),ud=(e,o)=>n1(o,e),ml=(e,o,n)=>ir((s,i)=>Za(s,i),_m,e,o,n),Gt=e=>ml(e,"[contenteditable]"),Vr=(e,o=!1)=>dd(e)?e.dom.isContentEditable:Gt(e).fold(Be(o),n=>Em(n)==="true"),Em=e=>e.dom.contentEditable,Om=e=>e.style!==void 0&&J(e.style.getPropertyValue),Tm=(e,o,n)=>{if(!G(n))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Om(e)&&e.style.setProperty(o,n)},s1=(e,o)=>{Om(e)&&e.style.removeProperty(o)},hu=(e,o,n)=>{const s=e.dom;Tm(s,o,n)},Am=(e,o)=>{const n=e.dom;nt(o,(s,i)=>{Tm(n,i,s)})},Ni=(e,o)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(o);return s===""&&!dd(e)?S(n,o):s},S=(e,o)=>Om(e)?e.style.getPropertyValue(o):"",A=(e,o)=>{const n=e.dom,s=S(n,o);return B.from(s).filter(i=>i.length>0)},P=e=>{const o={},n=e.dom;if(Om(n))for(let s=0;s<n.style.length;s++){const i=n.style.item(s);o[i]=n.style[i]}return o},q=(e,o)=>{const n=e.dom;s1(n,o),Bs(Fa(e,"style").map(xs),"")&&Fr(e,"style")},ee=e=>e.dom.offsetWidth,He=(e,o)=>{Ua(e).each(n=>{n.dom.insertBefore(o.dom,e.dom)})},xt=(e,o)=>{mu(e).fold(()=>{Ua(e).each(n=>{ot(n,o)})},n=>{He(n,o)})},Rt=(e,o)=>{Tg(e).fold(()=>{ot(e,o)},n=>{e.dom.insertBefore(o.dom,n.dom)})},ot=(e,o)=>{e.dom.appendChild(o.dom)},Ft=(e,o)=>{He(e,o),ot(o,e)},Zo=(e,o)=>{Ce(o,(n,s)=>{const i=s===0?e:o[s-1];xt(i,n)})},Fn=(e,o)=>{Ce(o,n=>{ot(e,n)})},Es=e=>{e.dom.textContent="",Ce(us(e),o=>{Ho(o)})},Ho=e=>{const o=e.dom;o.parentNode!==null&&o.parentNode.removeChild(o)},no=e=>{const o=us(e);o.length>0&&Zo(e,o),Ho(e)},Lv=(e,o)=>{const n=(o||document).createElement("div");return n.innerHTML=e,us(K.fromDom(n))},a1=e=>$t(e,K.fromDom),i1=e=>e.dom.innerHTML,ap=(e,o)=>{const n=op(e).dom,s=K.fromDom(n.createDocumentFragment()),i=Lv(o,n);Fn(s,i),Es(e),ot(e,s)},l1=e=>{const o=K.fromTag("div"),n=K.fromDom(e.dom.cloneNode(!0));return ot(o,n),i1(o)},W4=(e,o,n,s,i,d,h)=>({target:e,x:o,y:n,stop:s,prevent:i,kill:d,raw:h}),Ng=e=>{const o=K.fromDom(Mg(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),i=E(s,n);return W4(o,e.clientX,e.clientY,n,s,i,e)},Hv=(e,o)=>n=>{e(n)&&o(Ng(n))},T2=(e,o,n,s,i)=>{const d=Hv(n,s);return e.dom.addEventListener(o,d,i),{unbind:Me(A2,e,o,d,i)}},j4=(e,o,n,s)=>T2(e,o,n,s,!1),A2=(e,o,n,s)=>{e.dom.removeEventListener(o,n,s)},Ec=(e,o)=>({left:e,top:o,translate:(n,s)=>Ec(e+n,o+s)}),Ul=Ec,ip=e=>{const o=e.getBoundingClientRect();return Ul(o.left,o.top)},pu=(e,o)=>e!==void 0?e:o!==void 0?o:0,D2=e=>{const o=e.dom.ownerDocument,n=o.body,s=o.defaultView,i=o.documentElement;if(n===e.dom)return Ul(n.offsetLeft,n.offsetTop);const d=pu(s==null?void 0:s.pageYOffset,i.scrollTop),h=pu(s==null?void 0:s.pageXOffset,i.scrollLeft),v=pu(i.clientTop,n.clientTop),w=pu(i.clientLeft,n.clientLeft);return c1(e).translate(h-w,d-v)},c1=e=>{const o=e.dom,n=o.ownerDocument.body;return n===o?Ul(n.offsetLeft,n.offsetTop):dd(e)?ip(o):Ul(0,0)},d1=e=>{const o=e!==void 0?e.dom:document,n=o.body.scrollLeft||o.documentElement.scrollLeft,s=o.body.scrollTop||o.documentElement.scrollTop;return Ul(n,s)},Pv=(e,o,n)=>{const s=(n!==void 0?n.dom:document).defaultView;s&&s.scrollTo(e,o)},Bv=(e,o)=>{oi().browser.isSafari()&&J(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(o)},Iv=e=>{const o=e===void 0?window:e;return oi().browser.isFirefox()?B.none():B.from(o.visualViewport)},Fv=(e,o,n,s)=>({x:e,y:o,width:n,height:s,right:e+n,bottom:o+s}),ua=e=>{const o=e===void 0?window:e,n=o.document,s=d1(K.fromDom(n));return Iv(o).fold(()=>{const i=o.document.documentElement,d=i.clientWidth,h=i.clientHeight;return Fv(s.left,s.top,d,h)},i=>Fv(Math.max(i.pageLeft,s.left),Math.max(i.pageTop,s.top),i.width,i.height))},At=(e,o)=>kt(us(e),o),md=(e,o)=>{let n=[];return Ce(us(e),s=>{o(s)&&(n=n.concat([s])),n=n.concat(md(s,o))}),n},zr=(e,o)=>cd(o,e),M2=(e,o,n)=>_m(e,o,n).isSome();class Ar{constructor(o,n){this.node=o,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,n,s,i){if(o){if(!i&&o[n])return o[n];if(o!==this.rootNode){let d=o[s];if(d)return d;for(let h=o.parentNode;h&&h!==this.rootNode;h=h.parentNode)if(d=h[s],d)return d}}}findPreviousNode(o,n){if(o){const s=o.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let d=s.lastChild;d;d=d.lastChild)if(!d.lastChild)return d}return s}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const Wl=e=>o=>!!o&&o.nodeType===e,ma=e=>!!e&&!Object.getPrototypeOf(e),gt=Wl(1),fu=e=>{const o=e.toLowerCase();return n=>xe(n)&&n.nodeName.toLowerCase()===o},Sn=e=>{const o=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return Ut(o,s)}return!1}},vu=(e,o)=>{const n=o.toLowerCase().split(" ");return s=>{if(gt(s)){const i=s.ownerDocument.defaultView;if(i)for(let d=0;d<n.length;d++){const h=i.getComputedStyle(s,null);if((h?h.getPropertyValue(e):null)===n[d])return!0}}return!1}},lp=e=>o=>gt(o)&&o.hasAttribute(e),N2=(e,o)=>n=>gt(n)&&n.getAttribute(e)===o,Dm=e=>gt(e)&&e.hasAttribute("data-mce-bogus"),R2=e=>gt(e)&&e.getAttribute("data-mce-bogus")==="all",Wa=e=>gt(e)&&e.tagName==="TABLE",Vv=e=>o=>!!(gt(o)&&(o.contentEditable===e||o.getAttribute("data-mce-contenteditable")===e)),Oc=Sn(["textarea","input"]),Ve=Wl(3),$4=Wl(4),Vn=Wl(7),Js=Wl(8),Os=Wl(9),gd=Wl(11),fo=fu("br"),zv=fu("img"),On=Vv("true"),po=Vv("false"),Mm=Sn(["td","th"]),Re=Sn(["td","th","caption"]),Dr=Sn(["video","audio","object","embed"]),G4=fu("li"),lr=fu("details"),hd=fu("summary"),Rg="\uFEFF",vn=" ",Zv=e=>e===Rg,bu=e=>e.replace(/\uFEFF/g,""),u1=((e,o)=>{const n=i=>{if(!e(i))throw new Error("Can only get "+o+" value of a "+o+" node");return s(i).getOr("")},s=i=>e(i)?B.from(i.dom.nodeValue):B.none();return{get:n,getOption:s,set:(i,d)=>{if(!e(i))throw new Error("Can only set raw "+o+" value of a "+o+" node");i.dom.nodeValue=d}}})(Lo,"text"),ga=e=>u1.get(e),_o=e=>u1.getOption(e),Tc=(e,o)=>u1.set(e,o),Nm=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Fs=["td","th"],Uv=["thead","tbody","tfoot"],Rm=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],L2=["h1","h2","h3","h4","h5","h6"],_a=["li","dd","dt"],H2=["ul","ol","dl"],ge=["pre","script","textarea","style"],Ri=["pre"].concat(L2),Li=e=>{let o;return n=>(o=o||Bn(e,ct),It(o,tn(n)))},es=Li(Nm),jl=e=>tn(e)==="table",Zr=e=>da(e)&&!es(e),zn=e=>da(e)&&tn(e)==="br",Lm=Li(Rm),pd=Li(H2),Hm=Li(_a),Lt=Li(Uv),Ea=Li(Fs),m1=Li(ge),K4=Li(Ri),q4=e=>K4(e)||Zr(e),X4=e=>{const o=[];let n=e.dom;for(;n;)o.push(K.fromDom(n)),n=n.lastChild;return o},Wv=e=>{const o=zr(e,"br"),n=kt(X4(e).slice(-1),zn);o.length===n.length&&Ce(n,Ho)},Hi=()=>{const e=K.fromTag("br");return En(e,"data-mce-bogus","1"),e},ri=e=>{Es(e),ot(e,Hi())},Y4=e=>{wm(e).each(o=>{_c(o).each(n=>{es(e)&&zn(o)&&es(n)&&Ho(o)})})},qn=Rg,g1=Zv,gl=bu,P2=gt,Ac=Ve,yu=e=>(Ac(e)&&(e=e.parentNode),P2(e)&&e.hasAttribute("data-mce-caret")),fd=e=>Ac(e)&&g1(e.data),ea=e=>yu(e)||fd(e),B2=e=>e.firstChild!==e.lastChild||!fo(e.firstChild),jv=(e,o)=>{var n;const s=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(qn),i=e.parentNode;if(o){const d=e.previousSibling;if(Ac(d)){if(ea(d))return d;if(wu(d))return d.splitText(d.data.length-1)}i==null||i.insertBefore(s,e)}else{const d=e.nextSibling;if(Ac(d)){if(ea(d))return d;if(hl(d))return d.splitText(1),d}e.nextSibling?i==null||i.insertBefore(s,e.nextSibling):i==null||i.appendChild(s)}return s},cp=e=>{const o=e.container();return Ve(o)?o.data.charAt(e.offset())===qn||e.isAtStart()&&fd(o.previousSibling):!1},h1=e=>{const o=e.container();return Ve(o)?o.data.charAt(e.offset()-1)===qn||e.isAtEnd()&&fd(o.nextSibling):!1},ms=(e,o,n)=>{var s;const i=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(Hi().dom);const d=o.parentNode;return n?d==null||d.insertBefore(i,o):o.nextSibling?d==null||d.insertBefore(i,o.nextSibling):d==null||d.appendChild(i),i},hl=e=>Ac(e)&&e.data[0]===qn,wu=e=>Ac(e)&&e.data[e.data.length-1]===qn,Pm=e=>{var o;const n=e.getElementsByTagName("br"),s=n[n.length-1];Dm(s)&&((o=s.parentNode)===null||o===void 0||o.removeChild(s))},p1=e=>e&&e.hasAttribute("data-mce-caret")?(Pm(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Oa=e=>yu(e.startContainer),Lg=On,$v=po,Gv=fo,ja=Ve,Dc=Sn(["script","style","textarea"]),f1=Sn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$l=Sn(["table"]),Q4=ea,ta=e=>Q4(e)?!1:ja(e)?!Dc(e.parentNode):f1(e)||Gv(e)||$l(e)||vd(e),Bm=e=>gt(e)&&e.getAttribute("unselectable")==="true",vd=e=>!Bm(e)&&$v(e),I2=(e,o)=>{for(let n=e.parentNode;n&&n!==o;n=n.parentNode){if(vd(n))return!1;if(Lg(n))return!0}return!0},Im=e=>vd(e)?!_n(ws(e.getElementsByTagName("*")),(o,n)=>o||Lg(n),!1):!1,F2=e=>f1(e)||Im(e),Kv=(e,o)=>ta(e)&&I2(e,o),Zn=/^[ \t\r\n]*$/,Gl=e=>Zn.test(e),Pi=e=>{for(const o of e)if(!Zv(o))return!1;return!0},Fm=e=>" \f	\v".indexOf(e)!==-1,v1=e=>e===`
`||e==="\r",Cu=(e,o)=>o<e.length&&o>=0?v1(e[o]):!1,$a=(e,o=4,n=!0,s=!0)=>{const i=vc(" ",o),d=e.replace(/\t/g,i);return _n(d,(h,v)=>Fm(v)||v===vn?h.pcIsSpace||h.str===""&&n||h.str.length===d.length-1&&s||Cu(d,h.str.length+1)?{pcIsSpace:!1,str:h.str+vn}:{pcIsSpace:!0,str:h.str+" "}:{pcIsSpace:v1(v),str:h.str+v},{pcIsSpace:!1,str:""}).str},dp=(e,o)=>{const n=K.fromDom(o),s=K.fromDom(e);return M2(s,"pre,code",Me(To,n))},up=(e,o)=>Ve(e)&&Gl(e.data)&&!dp(e,o),J4=e=>gt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),xu=(e,o)=>ta(e)&&!up(e,o)||J4(e)||Vm(e),Vm=lp("data-mce-bookmark"),mp=lp("data-mce-bogus"),b1=N2("data-mce-bogus","all"),Hg=(e,o)=>{let n=0;if(xu(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const i=new Ar(s,e);do{if(o){if(b1(s)){s=i.next(!0);continue}if(mp(s)){s=i.next();continue}}if(fo(s)){n++,s=i.next();continue}if(xu(s,e))return!1;s=i.next()}while(s);return n<=1}},bn=(e,o=!0)=>Hg(e.dom,o),Mc="data-mce-block",Kl=e=>kt(pr(e),o=>!/[A-Z]/.test(o)),bd=e=>Kl(e).join(","),Su=(e,o)=>xe(o.querySelector(e))?(o.setAttribute(Mc,"true"),o.getAttribute("data-mce-selected")==="inline-boundary"&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(Mc),!1),qv=(e,o)=>{const n=bd(e.getTransparentElements()),s=bd(e.getBlockElements());return kt(o.querySelectorAll(n),i=>Su(s,i))},gp=(e,o)=>{var n;const s=o?"lastChild":"firstChild";for(let i=e[s];i;i=i[s])if(bn(K.fromDom(i))){(n=i.parentNode)===null||n===void 0||n.removeChild(i);return}},hp=(e,o)=>{const n=document.createRange(),s=e.parentNode;if(s){n.setStartBefore(e),n.setEndBefore(o);const i=n.extractContents();gp(i,!0),n.setStartAfter(o),n.setEndAfter(e);const d=n.extractContents();gp(d,!1),bn(K.fromDom(i))||s.insertBefore(i,e),bn(K.fromDom(o))||s.insertBefore(o,e),bn(K.fromDom(d))||s.insertBefore(d,e),s.removeChild(e)}},V2=(e,o,n)=>{const s=e.getBlockElements(),i=K.fromDom(o),d=v=>tn(v)in s,h=v=>To(v,i);Ce(a1(n),v=>{Rn(v,d,h).each(w=>{const k=At(v,M=>d(M)&&!e.isValidChild(tn(w),tn(M)));if(k.length>0){const M=uu(w);Ce(k,H=>{Rn(H,d,h).each(I=>{hp(I.dom,H.dom)})}),M.each(H=>qv(e,H.dom))}})})},z2=(e,o,n)=>{Ce([...n,...Rc(e,o)?[o]:[]],s=>Ce(zr(K.fromDom(s),s.nodeName.toLowerCase()),i=>{Xv(e,i.dom)&&no(i)}))},y1=(e,o)=>{const n=qv(e,o);V2(e,o,n),z2(e,o,n)},Z2=(e,o)=>{if(Nc(e,o)){const n=bd(e.getBlockElements());Su(n,o)}},w1=(e,o,n)=>{const s=d=>To(d,K.fromDom(o)),i=ym(K.fromDom(n),s);Al(i,i.length-2).filter(da).fold(()=>y1(e,o),d=>y1(e,d.dom))},vo=e=>e.hasAttribute(Mc),wt=(e,o)=>It(e.getTransparentElements(),o),Nc=(e,o)=>gt(o)&&wt(e,o.nodeName),Rc=(e,o)=>Nc(e,o)&&vo(o),Xv=(e,o)=>Nc(e,o)&&!vo(o),Yv=(e,o)=>o.type===1&&wt(e,o.name)&&G(o.attr(Mc)),C1=oi().browser,on=e=>xn(e,da),pp=e=>C1.isFirefox()&&tn(e)==="table"?on(us(e)).filter(o=>tn(o)==="caption").bind(o=>on(rp(o)).map(n=>{const s=n.dom.offsetTop,i=o.dom.offsetTop,d=o.dom.offsetHeight;return s<=i?-d:0})).getOr(0):0,U2=(e,o)=>e.children&&Ut(e.children,o),fp=(e,o,n)=>{let s=0,i=0;const d=e.ownerDocument;if(n=n||e,o){if(n===e&&o.getBoundingClientRect&&Ni(K.fromDom(e),"position")==="static"){const v=o.getBoundingClientRect();return s=v.left+(d.documentElement.scrollLeft||e.scrollLeft)-d.documentElement.clientLeft,i=v.top+(d.documentElement.scrollTop||e.scrollTop)-d.documentElement.clientTop,{x:s,y:i}}let h=o;for(;h&&h!==n&&h.nodeType&&!U2(h,n);){const v=h;s+=v.offsetLeft||0,i+=v.offsetTop||0,h=v.offsetParent}for(h=o.parentNode;h&&h!==n&&h.nodeType&&!U2(h,n);)s-=h.scrollLeft||0,i-=h.scrollTop||0,h=h.parentNode;i+=pp(K.fromDom(o))}return{x:s,y:i}},Te=(e,o={})=>{let n=0;const s={},i=K.fromDom(e),d=Mi(i),h=U=>{o.referrerPolicy=U},v=U=>{o.contentCssCors=U},w=U=>{ot(Sm(i),U)},k=U=>{const W=Sm(i);ud(W,"#"+U).each(Ho)},M=U=>Xo(s,U).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),H=U=>new Promise((W,j)=>{let te;const de=fe._addCacheSuffix(U),ue=M(de);s[de]=ue,ue.count++;const Ae=(Ee,ye)=>{Ce(Ee,xr),ue.status=ye,ue.passed=[],ue.failed=[],te&&(te.onload=null,te.onerror=null,te=null)},$e=()=>Ae(ue.passed,2),Ye=()=>Ae(ue.failed,3);if(W&&ue.passed.push(W),j&&ue.failed.push(j),ue.status===1)return;if(ue.status===2){$e();return}if(ue.status===3){Ye();return}ue.status=1;const Ie=K.fromTag("link",d.dom);ni(Ie,{rel:"stylesheet",type:"text/css",id:ue.id}),o.contentCssCors&&En(Ie,"crossOrigin","anonymous"),o.referrerPolicy&&En(Ie,"referrerpolicy",o.referrerPolicy),te=Ie.dom,te.onload=$e,te.onerror=Ye,w(Ie),En(Ie,"href",de)}),I=U=>Promise.allSettled($t(U,W=>H(W).then(Be(W)))).then(W=>{const j=hr(W,te=>te.status==="fulfilled");return j.fail.length>0?Promise.reject($t(j.fail,te=>te.reason)):$t(j.pass,te=>te.value)}),$=U=>{const W=fe._addCacheSuffix(U);Xo(s,W).each(j=>{--j.count===0&&(delete s[W],k(j.id))})};return{load:H,loadAll:I,unload:$,unloadAll:U=>{Ce(U,W=>{$(W)})},_setReferrerPolicy:h,_setContentCssCors:v}},x1=(()=>{const e=new WeakMap;return{forElement:(o,n)=>{const s=ul(o).dom;return B.from(e.get(s)).getOrThunk(()=>{const i=Te(s,n);return e.set(s,i),i})}}})(),ek=e=>e.nodeName.toLowerCase()==="span",vp=(e,o)=>xe(e)&&(xu(e,o)||Zr(K.fromDom(e))),tk=(e,o)=>{const n=new Ar(e,o).prev(!1),s=new Ar(e,o).next(!1),i=Gn(n)||vp(n,o),d=Gn(s)||vp(s,o);return i&&d},zm=e=>ek(e)&&e.getAttribute("data-mce-type")==="bookmark",Qv=(e,o)=>Ve(e)&&e.data.length>0&&tk(e,o),Zm=e=>gt(e)?e.childNodes.length>0:!1,W2=e=>gd(e)||Os(e),Lc=(e,o,n)=>{var s;const i=n||o;if(gt(o)&&zm(o))return o;const d=o.childNodes;for(let h=d.length-1;h>=0;h--)Lc(e,d[h],i);if(gt(o)){const h=o.childNodes;h.length===1&&zm(h[0])&&((s=o.parentNode)===null||s===void 0||s.insertBefore(h[0],o))}return!W2(o)&&!xu(o,i)&&!Zm(o)&&!Qv(o,i)&&e.remove(o),o},yn=fe.makeMap,Ga=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Um=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ql=/[<>&\"\']/g,ok=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,S1={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},pl={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},nk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},j2=e=>{const o=K.fromTag("div").dom;return o.innerHTML=e,o.textContent||o.innerText||e},$2=(e,o)=>{const n={};if(e){const s=e.split(",");o=o||10;for(let i=0;i<s.length;i+=2){const d=String.fromCharCode(parseInt(s[i],o));if(!pl[d]){const h="&"+s[i+1]+";";n[d]=h,n[h]=d}}return n}else return},k1=$2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),yd=(e,o)=>e.replace(o?Ga:Um,n=>pl[n]||n),rk=e=>(""+e).replace(ql,o=>pl[o]||o),bp=(e,o)=>e.replace(o?Ga:Um,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":pl[n]||"&#"+n.charCodeAt(0)+";"),Jv=(e,o,n)=>{const s=n||k1;return e.replace(o?Ga:Um,i=>pl[i]||s[i]||i)},wd={encodeRaw:yd,encodeAllRaw:rk,encodeNumeric:bp,encodeNamed:Jv,getEncodeFunc:(e,o)=>{const n=$2(o)||k1,s=(h,v)=>h.replace(v?Ga:Um,w=>pl[w]!==void 0?pl[w]:n[w]!==void 0?n[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),i=(h,v)=>Jv(h,v,n),d=yn(e.replace(/\+/g,","));return d.named&&d.numeric?s:d.named?o?i:Jv:d.numeric?bp:yd},decode:e=>e.replace(ok,(o,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):S1[n]||String.fromCharCode(n)):nk[o]||k1[o]||j2(o))},Qe=(e,o)=>(e=fe.trim(e),e?e.split(o||" "):[]),G2=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),eb=e=>{const o=/^(~)?(.+)$/;return Rs(Qe(e,","),n=>{const s=o.exec(n);if(s){const i=s[1]==="~",d=i?"span":"div",h=s[2];return[{inline:i,cloneName:d,name:h}]}else return[]})},sk=e=>{let o,n,s,i;if(o="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const d="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav "+d,s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}return e!=="html5-strict"&&(o+=" xml:lang",s=[s,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "),i=[n,s].join(" ")),i=i||[n,s].join(" "),{globalAttributes:o,blockContent:n,phrasingContent:s,flowContent:i}},K2=e=>{const{globalAttributes:o,phrasingContent:n,flowContent:s}=sk(e),i={},d=(v,w="",k="")=>{const M=Qe(k),H=Qe(v);let I=H.length;for(;I--;){const $=Qe([o,w].join(" "));i[H[I]]={attributes:Bn($,Be({})),attributesOrder:$,children:Bn(M,Be({}))}}},h=(v,w)=>{const k=Qe(v),M=Qe(w);let H=k.length;for(;H--;){const I=i[k[H]];for(let $=0,U=M.length;$<U;$++)I.attributes[M[$]]={},I.attributesOrder.push(M[$])}};return e!=="html5-strict"&&(Ce(Qe("acronym applet basefont big font strike tt"),v=>{d(v,"",n)}),Ce(Qe("center dir isindex noframes"),v=>{d(v,"",s)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),d("dd div","",s),d("address dt caption","",e==="html4"?n:s),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),d("blockquote","cite",s),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",s),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?n:s),d("q","cite",n),d("ins del","cite datetime",s),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",s),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),d("param","name value"),d("map","name",[s,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",s),d("th","colspan rowspan headers scope abbr",s),d("form","accept-charset action autocomplete enctype method name novalidate target",s),d("fieldset","disabled form name",[s,"legend"].join(" ")),d("label","form for",n),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[s,"li"].join(" ")),d("noscript","",s),e!=="html4"&&(d("wbr"),d("ruby","",[n,"rt rp"].join(" ")),d("figcaption","",s),d("mark rt rp summary bdi","",n),d("canvas","width height",s),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[n,"option"].join(" ")),d("article section nav aside main header footer","",s),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[s,"figcaption"].join(" ")),d("time","datetime",n),d("dialog","open",s),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",n),d("progress","value max",n),d("meter","value min max low high optimum",n),d("details","open",[s,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(h("script","language xml:space"),h("style","xml:space"),h("object","declare classid code codebase codetype archive standby align border hspace vspace"),h("embed","align name hspace vspace"),h("param","valuetype type"),h("a","charset name rev shape coords"),h("br","clear"),h("applet","codebase archive code object alt name width height align hspace vspace"),h("img","name longdesc align border hspace vspace"),h("iframe","longdesc frameborder marginwidth marginheight scrolling align"),h("font basefont","size color face"),h("input","usemap align"),h("select"),h("textarea"),h("h1 h2 h3 h4 h5 h6 div p legend caption","align"),h("ul","type compact"),h("li","type"),h("ol dl menu dir","compact"),h("pre","width xml:space"),h("hr","align noshade size width"),h("isindex","prompt"),h("table","summary width frame rules cellspacing cellpadding align bgcolor"),h("col","width align char charoff valign"),h("colgroup","width align char charoff valign"),h("thead","align char charoff valign"),h("tr","align char charoff valign bgcolor"),h("th","axis align char charoff valign nowrap bgcolor width height"),h("form","accept"),h("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),h("tfoot","align char charoff valign"),h("tbody","align char charoff valign"),h("area","nohref"),h("body","background bgcolor text link vlink alink")),e!=="html4"&&(h("input button select textarea","autofocus"),h("input textarea","placeholder"),h("a","download"),h("link script img","crossorigin"),h("img","loading"),h("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ce([i.video,i.audio],v=>{delete v.children.audio,delete v.children.video}),Ce(Qe("a form meter progress dfn"),v=>{i[v]&&delete i[v].children[v]}),delete i.caption.children.table,delete i.script,i},Wm=e=>e==="-"?"remove":"add",Pg=e=>{const o=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Rs(Qe(e,","),n=>{const s=o.exec(n);if(s){const i=s[1],d=i?Wm(i):"replace",h=s[2],v=Qe(s[3],"|");return[{operation:d,name:h,validChildren:v}]}else return[]})},yp=(e,o)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:i,attributesOrder:d}=o;return Ce(Qe(e,"|"),h=>{const v=n.exec(h);if(v){const w={},k=v[1],M=v[2].replace(/[\\:]:/g,":"),H=v[3],I=v[4];if(k==="!"&&(o.attributesRequired=o.attributesRequired||[],o.attributesRequired.push(M),w.required=!0),k==="-"){delete i[M],d.splice(fe.inArray(d,M),1);return}if(H&&(H==="="?(o.attributesDefault=o.attributesDefault||[],o.attributesDefault.push({name:M,value:I}),w.defaultValue=I):H==="~"?(o.attributesForced=o.attributesForced||[],o.attributesForced.push({name:M,value:I}),w.forcedValue=I):H==="<"&&(w.validValues=fe.makeMap(I,"?"))),s.test(M)){const $=w;o.attributePatterns=o.attributePatterns||[],$.pattern=G2(M),o.attributePatterns.push($)}else i[M]||d.push(M),i[M]=w}})},Bg=(e,o)=>{nt(e.attributes,(n,s)=>{o.attributes[s]=n}),o.attributesOrder.push(...e.attributesOrder)},ak=(e,o)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Rs(Qe(o,","),s=>{const i=n.exec(s);if(i){const d=i[1],h=i[2],v=i[3],w=i[4],k=i[5],M={attributes:{},attributesOrder:[]};if(e.each(H=>Bg(H,M)),d==="#"?M.paddEmpty=!0:d==="-"&&(M.removeEmpty=!0),w==="!"&&(M.removeEmptyAttrs=!0),k&&yp(k,M),v&&(M.outputName=h),h==="@")if(e.isNone())e=B.some(M);else return[];return[v?{name:h,element:M,aliasName:v}:{name:h,element:M}]}else return[]})},ku={},wp=fe.makeMap,Bi=fe.each,si=fe.extend,_1=fe.explode,q2=(e,o={})=>{const n=wp(e," ",wp(e.toUpperCase()," "));return si(n,o)},Cp=e=>q2("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),E1=(e,o)=>{if(e){const n={};return G(e)&&(e={"*":e}),Bi(e,(s,i)=>{n[i]=n[i.toUpperCase()]=o==="map"?wp(s,/[, ]/):_1(s,/[, ]/)}),n}else return},_u=(e={})=>{var o;const n={},s={};let i=[];const d={},h={},v=(u,g,f)=>{const y=e[u];if(y)return wp(y,/[, ]/,wp(y.toUpperCase(),/[, ]/));{let C=ku[u];return C||(C=q2(g,f),ku[u]=C),C}},w=(o=e.schema)!==null&&o!==void 0?o:"html5",k=K2(w);e.verify_html===!1&&(e.valid_elements="*[*]");const M=E1(e.valid_styles),H=E1(e.invalid_styles,"map"),I=E1(e.valid_classes,"map"),$=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),U=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),j=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),te="td th iframe video audio object script code",de=v("non_empty_elements",te+" pre",W),ue=v("move_caret_before_on_enter_elements",te+" table",W),Ae=v("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),$e=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",Ae),Ye=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ie=v("transparent_elements","a ins del canvas map");Bi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),u=>{h[u]=new RegExp("</"+u+"[^>]*>","gi")});const Ee=u=>{const g=B.from(n["@"]),f=/[*?+]/;Ce(ak(g,u??""),({name:y,element:C,aliasName:_})=>{if(_&&(n[_]=C),f.test(y)){const T=C;T.pattern=G2(y),i.push(T)}else n[y]=C})},ye=u=>{i=[],Ce(pr(n),g=>{delete n[g]}),Ee(u)},Fe=u=>{delete ku.text_block_elements,delete ku.block_elements,Ce(eb(u??""),({inline:g,name:f,cloneName:y})=>{if(s[f]=s[y],d[f]=y,de[f.toUpperCase()]={},de[f]={},g||($e[f.toUpperCase()]={},$e[f]={}),!n[f]){let C=n[y];C=si({},C),delete C.removeEmptyAttrs,delete C.removeEmpty,n[f]=C}nt(s,(C,_)=>{C[y]&&(s[_]=C=si({},s[_]),C[f]=C[y])})})},ft=u=>{Ce(Pg(u??""),({operation:g,name:f,validChildren:y})=>{const C=g==="replace"?{"#comment":{}}:s[f];Ce(y,_=>{g==="remove"?delete C[_]:C[_]={}}),s[f]=C})},ve=u=>{const g=n[u];if(g)return g;let f=i.length;for(;f--;){const y=i[f];if(y.pattern.test(u))return y}};e.valid_elements?(ye(e.valid_elements),Bi(k,(u,g)=>{s[g]=u.children})):(Bi(k,(u,g)=>{n[g]={attributes:u.attributes,attributesOrder:u.attributesOrder},s[g]=u.children}),Bi(Qe("strong/b em/i"),u=>{const g=Qe(u,"/");n[g[1]].outputName=g[0]}),Bi(Ye,(u,g)=>{n[g]&&(e.padd_empty_block_inline_children&&(n[g].paddInEmptyBlock=!0),n[g].removeEmpty=!0)}),Bi(Qe("ol ul blockquote a table tbody"),u=>{n[u]&&(n[u].removeEmpty=!0)}),Bi(Qe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),u=>{n[u]&&(n[u].paddEmpty=!0)}),Bi(Qe("span"),u=>{n[u].removeEmptyAttrs=!0})),Fe(e.custom_elements),ft(e.valid_children),Ee(e.extended_valid_elements),ft("+ol[ul|ol],+ul[ul|ol]"),Bi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(u,g)=>{n[g]&&(n[g].parentsRequired=Qe(u))}),e.invalid_elements&&Bi(_1(e.invalid_elements),u=>{n[u]&&delete n[u]}),ve("span")||Ee("span[!data-mce-type|*]");const et=Be(M),bt=Be(H),Jt=Be(I),bo=Be(j),ia=Be($e),yi=Be(Ae),wa=Be(Ye),wi=Be(Object.seal(W)),No=Be(U),gc=Be(de),gr=Be(ue),Ht=Be($),Le=Be(Ie),t=Be(Object.seal(h)),r=(u,g)=>{const f=s[u.toLowerCase()];return!!(f&&f[g.toLowerCase()])},a=(u,g)=>{const f=ve(u);if(f)if(g){if(f.attributes[g])return!0;const y=f.attributePatterns;if(y){let C=y.length;for(;C--;)if(y[C].pattern.test(g))return!0}}else return!0;return!1},l=Be(d);return{type:w,children:s,elements:n,getValidStyles:et,getValidClasses:Jt,getBlockElements:ia,getInvalidStyles:bt,getVoidElements:wi,getTextBlockElements:yi,getTextInlineElements:wa,getBoolAttrs:bo,getElementRule:ve,getSelfClosingElements:No,getNonEmptyElements:gc,getMoveCaretBeforeOnEnterElements:gr,getWhitespaceElements:Ht,getTransparentElements:Le,getSpecialElements:t,isValidChild:r,isValid:a,getCustomElements:l,addValidElements:Ee,setValidElements:ye,addCustomElements:Fe,addValidChildren:ft}},Eu=(e={},o)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,d={};let h,v;const w=Rg;o&&(h=o.getValidStyles(),v=o.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let H=0;H<k.length;H++)d[k[H]]=w+H,d[w+H]=k[H];const M={parse:H=>{const I={};let $=!1;const U=e.url_converter,W=e.url_converter_scope||M,j=(Ee,ye,Fe)=>{const ft=I[Ee+"-top"+ye];if(!ft)return;const ve=I[Ee+"-right"+ye];if(!ve)return;const et=I[Ee+"-bottom"+ye];if(!et)return;const bt=I[Ee+"-left"+ye];if(!bt)return;const Jt=[ft,ve,et,bt];let bo=Jt.length-1;for(;bo--&&Jt[bo]===Jt[bo+1];);bo>-1&&Fe||(I[Ee+ye]=bo===-1?Jt[0]:Jt.join(" "),delete I[Ee+"-top"+ye],delete I[Ee+"-right"+ye],delete I[Ee+"-bottom"+ye],delete I[Ee+"-left"+ye])},te=Ee=>{const ye=I[Ee];if(!ye)return;const Fe=ye.indexOf(",")>-1?[ye]:ye.split(" ");let ft=Fe.length;for(;ft--;)if(Fe[ft]!==Fe[0])return!1;return I[Ee]=Fe[0],!0},de=(Ee,ye,Fe,ft)=>{te(ye)&&te(Fe)&&te(ft)&&(I[Ee]=I[ye]+" "+I[Fe]+" "+I[ft],delete I[ye],delete I[Fe],delete I[ft])},ue=Ee=>($=!0,d[Ee]),Ae=(Ee,ye)=>($&&(Ee=Ee.replace(/\uFEFF[0-9]/g,Fe=>d[Fe])),ye||(Ee=Ee.replace(/\\([\'\";:])/g,"$1")),Ee),$e=Ee=>String.fromCharCode(parseInt(Ee.slice(1),16)),Ye=Ee=>Ee.replace(/\\[0-9a-f]+/gi,$e),Ie=(Ee,ye,Fe,ft,ve,et)=>{if(ve=ve||et,ve)return ve=Ae(ve),"'"+ve.replace(/\'/g,"\\'")+"'";if(ye=Ae(ye||Fe||ft||""),!e.allow_script_urls){const bt=ye.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(bt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(bt))return""}return U&&(ye=U.call(W,ye,"style")),"url('"+ye.replace(/\'/g,"\\'")+"')"};if(H){H=H.replace(/[\u0000-\u001F]/g,""),H=H.replace(/\\[\"\';:\uFEFF]/g,ue).replace(/\"[^\"]+\"|\'[^\']+\'/g,ye=>ye.replace(/[;:]/g,ue));let Ee;for(;Ee=s.exec(H);){s.lastIndex=Ee.index+Ee[0].length;let ye=Ee[1].replace(i,"").toLowerCase(),Fe=Ee[2].replace(i,"");if(ye&&Fe){if(ye=Ye(ye),Fe=Ye(Fe),ye.indexOf(w)!==-1||ye.indexOf('"')!==-1||!e.allow_script_urls&&(ye==="behavior"||/expression\s*\(|\/\*|\*\//.test(Fe)))continue;ye==="font-weight"&&Fe==="700"?Fe="bold":(ye==="color"||ye==="background-color")&&(Fe=Fe.toLowerCase()),Fe=Fe.replace(n,Ie),I[ye]=$?Ae(Fe,!0):Fe}}j("border","",!0),j("border","-width"),j("border","-color"),j("border","-style"),j("padding",""),j("margin",""),de("border","border-width","border-style","border-color"),I.border==="medium none"&&delete I.border,I["border-image"]==="none"&&delete I["border-image"]}return I},serialize:(H,I)=>{let $="";const U=(j,te)=>{const de=te[j];if(de)for(let ue=0,Ae=de.length;ue<Ae;ue++){const $e=de[ue],Ye=H[$e];Ye&&($+=($.length>0?" ":"")+$e+": "+Ye+";")}},W=(j,te)=>{if(!v||!te)return!0;let de=v["*"];return de&&de[j]?!1:(de=v[te],!(de&&de[j]))};return I&&h?(U("*",h),U(I,h)):nt(H,(j,te)=>{j&&W(te,I)&&($+=($.length>0?" ":"")+te+": "+j+";")}),$}};return M},xp={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fl=e=>e instanceof Event||J(e.initEvent),Ka=e=>e.isDefaultPrevented===ct||e.isDefaultPrevented===Ne,ik=e=>oo(e.preventDefault)||fl(e),X2=(e,o)=>{const n=o??{};for(const s in e)It(xp,s)||(n[s]=e[s]);return xe(e.composedPath)&&(n.composedPath=()=>e.composedPath()),xe(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),n},tb=(e,o,n,s)=>{var i;const d=X2(o,s);return d.type=e,oo(d.target)&&(d.target=(i=d.srcElement)!==null&&i!==void 0?i:n),ik(o)&&(d.preventDefault=()=>{d.defaultPrevented=!0,d.isDefaultPrevented=ct,J(o.preventDefault)&&o.preventDefault()},d.stopPropagation=()=>{d.cancelBubble=!0,d.isPropagationStopped=ct,J(o.stopPropagation)&&o.stopPropagation()},d.stopImmediatePropagation=()=>{d.isImmediatePropagationStopped=ct,d.stopPropagation()},Ka(d)||(d.isDefaultPrevented=d.defaultPrevented===!0?ct:Ne,d.isPropagationStopped=d.cancelBubble===!0?ct:Ne,d.isImmediatePropagationStopped=Ne)),d},Y2="mce-data-",ai=/^(?:mouse|contextmenu)|click/,O1=(e,o,n,s)=>{e.addEventListener(o,n,s||!1)},Sp=(e,o,n,s)=>{e.removeEventListener(o,n,s||!1)},T1=e=>xe(e)&&ai.test(e.type),kp=(e,o)=>{const n=tb(e.type,e,document,o);if(T1(e)&&Gn(e.pageX)&&!Gn(e.clientX)){const s=n.target.ownerDocument||document,i=s.documentElement,d=s.body,h=n;h.pageX=e.clientX+(i&&i.scrollLeft||d&&d.scrollLeft||0)-(i&&i.clientLeft||d&&d.clientLeft||0),h.pageY=e.clientY+(i&&i.scrollTop||d&&d.scrollTop||0)-(i&&i.clientTop||d&&d.clientTop||0)}return n},Q2=(e,o,n)=>{const s=e.document,i={type:"ready"};if(n.domLoaded){o(i);return}const d=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,h=()=>{Sp(e,"DOMContentLoaded",h),Sp(e,"load",h),n.domLoaded||(n.domLoaded=!0,o(i)),e=null};d()?h():O1(e,"DOMContentLoaded",h),n.domLoaded||O1(e,"load",h)};class Cd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Y2+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,n,s,i){const d=this;let h;const v=window,w=I=>{d.executeHandlers(kp(I||v.event),k)};if(!o||Ve(o)||Js(o))return s;let k;o[d.expando]?k=o[d.expando]:(k=d.count++,o[d.expando]=k,d.events[k]={}),i=i||o;const M=n.split(" ");let H=M.length;for(;H--;){let I=M[H],$=w,U=!1,W=!1;if(I==="DOMContentLoaded"&&(I="ready"),d.domLoaded&&I==="ready"&&o.readyState==="complete"){s.call(i,kp({type:I}));continue}!d.hasFocusIn&&(I==="focusin"||I==="focusout")&&(U=!0,W=I==="focusin"?"focus":"blur",$=j=>{const te=kp(j||v.event);te.type=te.type==="focus"?"focusin":"focusout",d.executeHandlers(te,k)}),h=d.events[k][I],h?I==="ready"&&d.domLoaded?s(kp({type:I})):h.push({func:s,scope:i}):(d.events[k][I]=h=[{func:s,scope:i}],h.fakeName=W,h.capture=U,h.nativeHandler=$,I==="ready"?Q2(o,$,d):O1(o,W||I,$,U))}return o=h=null,s}unbind(o,n,s){if(!o||Ve(o)||Js(o))return this;const i=o[this.expando];if(i){let d=this.events[i];if(n){const h=n.split(" ");let v=h.length;for(;v--;){const w=h[v],k=d[w];if(k){if(s){let M=k.length;for(;M--;)if(k[M].func===s){const H=k.nativeHandler,I=k.fakeName,$=k.capture,U=k.slice(0,M).concat(k.slice(M+1));U.nativeHandler=H,U.fakeName=I,U.capture=$,d[w]=U}}(!s||k.length===0)&&(delete d[w],Sp(o,k.fakeName||w,k.nativeHandler,k.capture))}}}else nt(d,(h,v)=>{Sp(o,h.fakeName||v,h.nativeHandler,h.capture)}),d={};for(const h in d)if(It(d,h))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,n,s){return this.dispatch(o,n,s)}dispatch(o,n,s){if(!o||Ve(o)||Js(o))return this;const i=kp({type:n,target:o},s);do{const d=o[this.expando];d&&this.executeHandlers(i,d),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||Ve(o)||Js(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const n=o.getElementsByTagName("*");let s=n.length;for(;s--;)o=n[s],o[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,n){const s=this.events[n],i=s&&s[o.type];if(i)for(let d=0,h=i.length;d<h;d++){const v=i[d];if(v&&v.func.call(v.scope,o)===!1&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}Cd.Event=new Cd;const jm=fe.each,A1=fe.grep,Ig="data-mce-style",lk=fe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Fg=(e,o,n)=>{oo(n)||n===""?Fr(e,o):En(e,o,n)},D1=e=>e.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),Vg=(e,o)=>{let n=0;if(e)for(let s=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const d=i.nodeType;o&&Ve(i)&&(d===s||!i.data.length)||(n++,s=d)}return n},J2=(e,o)=>{const n=Nn(o,"style"),s=e.serialize(e.parse(n),tn(o));Fg(o,Ig,s)},ob=(e,o)=>bs(e)?It(lk,o)?e+"":e+"px":e,Hc=(e,o,n)=>{const s=D1(o);oo(n)||n===""?q(e,s):hu(e,s,ob(n,s))},ew=(e,o,n)=>{const s=o.keep_values,i={set:(h,v,w)=>{const k=K.fromDom(h);J(o.url_converter)&&xe(v)&&(v=o.url_converter.call(o.url_converter_scope||n(),String(v),w,h));const M="data-mce-"+w;Fg(k,M,v),Fg(k,w,v)},get:(h,v)=>{const w=K.fromDom(h);return Nn(w,"data-mce-"+v)||Nn(w,v)}},d={style:{set:(h,v)=>{const w=K.fromDom(h);s&&Fg(w,Ig,v),Fr(w,"style"),G(v)&&Am(w,e.parse(v))},get:h=>{const v=K.fromDom(h),w=Nn(v,Ig)||Nn(v,"style");return e.serialize(e.parse(w),tn(v))}}};return s&&(d.href=d.src=i),d},nn=(e,o={})=>{const n={},s=window,i={};let d=0;const h=!0,v=!0,w=x1.forElement(K.fromDom(e),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),k=[],M=o.schema?o.schema:_u({}),H=Eu({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),I=o.ownEvents?new Cd:Cd.Event,$=M.getBlockElements(),U=oe=>G(oe)?It($,oe):gt(oe)&&(It($,oe.nodeName)||Rc(M,oe)),W=oe=>oe&&e&&G(oe)?e.getElementById(oe):oe,j=oe=>{const se=W(oe);return xe(se)?K.fromDom(se):null},te=(oe,se,ke="")=>{let _e;const rt=j(oe);if(xe(rt)&&da(rt)){const ro=Bt[se];ro&&ro.get?_e=ro.get(rt.dom,se):_e=Nn(rt,se)}return xe(_e)?_e:ke},de=oe=>{const se=W(oe);return oo(se)?[]:se.attributes},ue=(oe,se,ke)=>{No(oe,_e=>{if(gt(_e)){const rt=K.fromDom(_e),ro=ke===""?null:ke,eo=Nn(rt,se),Cr=Bt[se];Cr&&Cr.set?Cr.set(rt.dom,ro,se):Fg(rt,se,ro),eo!==ro&&o.onSetAttrib&&o.onSetAttrib({attrElm:rt.dom,attrName:se,attrValue:ro})}})},Ae=(oe,se)=>oe.cloneNode(se),$e=()=>o.root_element||e.body,Ye=oe=>{const se=ua(oe);return{x:se.x,y:se.y,w:se.width,h:se.height}},Ie=(oe,se)=>fp(e.body,W(oe),se),Ee=(oe,se,ke)=>{No(oe,_e=>{const rt=K.fromDom(_e);Hc(rt,se,ke),o.update_styles&&J2(H,rt)})},ye=(oe,se)=>{No(oe,ke=>{const _e=K.fromDom(ke);nt(se,(rt,ro)=>{Hc(_e,ro,rt)}),o.update_styles&&J2(H,_e)})},Fe=(oe,se,ke)=>{const _e=W(oe);if(!(oo(_e)||!gt(_e)))return ke?Ni(K.fromDom(_e),D1(se)):(se=se.replace(/-(\D)/g,(rt,ro)=>ro.toUpperCase()),se==="float"&&(se="cssFloat"),_e.style?_e.style[se]:void 0)},ft=oe=>{const se=W(oe);if(!se)return{w:0,h:0};let ke=Fe(se,"width"),_e=Fe(se,"height");return(!ke||ke.indexOf("px")===-1)&&(ke="0"),(!_e||_e.indexOf("px")===-1)&&(_e="0"),{w:parseInt(ke,10)||se.offsetWidth||se.clientWidth,h:parseInt(_e,10)||se.offsetHeight||se.clientHeight}},ve=oe=>{const se=W(oe),ke=Ie(se),_e=ft(se);return{x:ke.x,y:ke.y,w:_e.w,h:_e.h}},et=(oe,se)=>{if(!oe)return!1;const ke=ko(oe)?oe:[oe];return Wo(ke,_e=>Za(K.fromDom(_e),se))},bt=(oe,se,ke,_e)=>{const rt=[];let ro=W(oe);_e=_e===void 0;const eo=ke||($e().nodeName!=="BODY"?$e().parentNode:null);if(G(se))if(se==="*")se=gt;else{const Cr=se;se=jn=>et(jn,Cr)}for(;ro&&!(ro===eo||oo(ro.nodeType)||Os(ro)||gd(ro));){if(!se||se(ro))if(_e)rt.push(ro);else return[ro];ro=ro.parentNode}return _e?rt:null},Jt=(oe,se,ke)=>{const _e=bt(oe,se,ke,!1);return _e&&_e.length>0?_e[0]:null},bo=(oe,se,ke)=>{let _e=se;if(oe){G(se)&&(_e=rt=>et(rt,se));for(let rt=oe[ke];rt;rt=rt[ke])if(J(_e)&&_e(rt))return rt}return null},ia=(oe,se)=>bo(oe,se,"nextSibling"),yi=(oe,se)=>bo(oe,se,"previousSibling"),wa=oe=>J(oe.querySelectorAll),wi=(oe,se)=>{var ke,_e;const rt=(_e=(ke=W(se))!==null&&ke!==void 0?ke:o.root_element)!==null&&_e!==void 0?_e:e;return wa(rt)?ws(rt.querySelectorAll(oe)):[]},No=function(oe,se,ke){const _e=ke??this;if(ko(oe)){const rt=[];return jm(oe,(ro,eo)=>{const Cr=W(ro);Cr&&rt.push(se.call(_e,Cr,eo))}),rt}else{const rt=W(oe);return rt?se.call(_e,rt):!1}},gc=(oe,se)=>{No(oe,ke=>{nt(se,(_e,rt)=>{ue(ke,rt,_e)})})},gr=(oe,se)=>{No(oe,ke=>{const _e=K.fromDom(ke);ap(_e,se)})},Ht=(oe,se,ke,_e,rt)=>No(oe,ro=>{const eo=G(se)?e.createElement(se):se;return xe(ke)&&gc(eo,ke),_e&&(!G(_e)&&_e.nodeType?eo.appendChild(_e):G(_e)&&gr(eo,_e)),rt?eo:ro.appendChild(eo)}),Le=(oe,se,ke)=>Ht(e.createElement(oe),oe,se,ke,!0),t=wd.decode,r=wd.encodeAllRaw,a=(oe,se,ke="")=>{let _e="<"+oe;for(const rt in se)tr(se,rt)&&(_e+=" "+rt+'="'+r(se[rt])+'"');return fc(ke)&&It(M.getVoidElements(),oe)?_e+" />":_e+">"+ke+"</"+oe+">"},l=oe=>{const se=e.createElement("div"),ke=e.createDocumentFragment();ke.appendChild(se),oe&&(se.innerHTML=oe);let _e;for(;_e=se.firstChild;)ke.appendChild(_e);return ke.removeChild(se),ke},u=(oe,se)=>No(oe,ke=>{const _e=K.fromDom(ke);return se&&Ce(us(_e),rt=>{Lo(rt)&&rt.dom.length===0?Ho(rt):He(_e,rt)}),Ho(_e),_e.dom}),g=oe=>No(oe,se=>{const ke=se.attributes;for(let _e=ke.length-1;_e>=0;_e--)se.removeAttributeNode(ke.item(_e))}),f=oe=>H.parse(oe),y=(oe,se)=>H.serialize(oe,se),C=oe=>{if(at!==nn.DOM&&e===document){if(n[oe])return;n[oe]=!0}let se=e.getElementById("mceDefaultStyles");if(!se){se=e.createElement("style"),se.id="mceDefaultStyles",se.type="text/css";const ke=e.head;ke.firstChild?ke.insertBefore(se,ke.firstChild):ke.appendChild(se)}se.styleSheet?se.styleSheet.cssText+=oe:se.appendChild(e.createTextNode(oe))},_=oe=>{oe||(oe=""),Ce(oe.split(","),se=>{i[se]=!0,w.load(se).catch(De)})},T=(oe,se,ke)=>{No(oe,_e=>{if(gt(_e)){const rt=K.fromDom(_e),ro=se.split(" ");Ce(ro,eo=>{xe(ke)?(ke?Sc:iu)(rt,eo):bm(rt,eo)})}})},D=(oe,se)=>{T(oe,se,!0)},R=(oe,se)=>{T(oe,se,!1)},V=(oe,se)=>{const ke=j(oe),_e=se.split(" ");return xe(ke)&&Kn(_e,rt=>ld(ke,rt))},Q=oe=>{No(oe,se=>q(K.fromDom(se),"display"))},le=oe=>{No(oe,se=>hu(K.fromDom(se),"display","none"))},Oe=oe=>{const se=j(oe);return xe(se)&&Bs(A(se,"display"),"none")},Y=oe=>(oe||"mce_")+d++,ne=oe=>{const se=j(oe);return xe(se)?gt(se.dom)?se.dom.outerHTML:l1(se):""},be=(oe,se)=>{No(oe,ke=>{gt(ke)&&(ke.outerHTML=se)})},pe=(oe,se)=>{const ke=W(se);return No(oe,_e=>{const rt=ke==null?void 0:ke.parentNode,ro=ke==null?void 0:ke.nextSibling;return rt&&(ro?rt.insertBefore(_e,ro):rt.appendChild(_e)),_e})},Pe=(oe,se,ke)=>No(se,_e=>{var rt;const ro=ko(se)?oe.cloneNode(!0):oe;return ke&&jm(A1(_e.childNodes),eo=>{ro.appendChild(eo)}),(rt=_e.parentNode)===null||rt===void 0||rt.replaceChild(ro,_e),_e}),Ge=(oe,se)=>{if(oe.nodeName!==se.toUpperCase()){const ke=Le(se);return jm(de(oe),_e=>{ue(ke,_e.nodeName,te(oe,_e.nodeName))}),Pe(ke,oe,!0),ke}else return oe},st=(oe,se)=>{let ke=oe;for(;ke;){let _e=se;for(;_e&&ke!==_e;)_e=_e.parentNode;if(ke===_e)break;ke=ke.parentNode}return!ke&&oe.ownerDocument?oe.ownerDocument.documentElement:ke},pt=oe=>{if(gt(oe)){const se=oe.nodeName.toLowerCase()==="a"&&!te(oe,"href")&&te(oe,"id");if(te(oe,"name")||te(oe,"data-mce-bookmark")||se)return!0}return!1},io=(oe,se,ke)=>{let _e=0;if(pt(oe))return!1;const rt=oe.firstChild;if(rt){const ro=new Ar(rt,oe),eo=M?M.getWhitespaceElements():{},Cr=se||(M?M.getNonEmptyElements():null);let jn=rt;do{if(gt(jn)){const im=jn.getAttribute("data-mce-bogus");if(im){jn=ro.next(im==="all");continue}const lm=jn.nodeName.toLowerCase();if(Cr&&Cr[lm]){if(lm==="br"){_e++,jn=ro.next();continue}return!1}if(pt(jn))return!1}if(Js(jn)||Ve(jn)&&!Gl(jn.data)&&(!(ke!=null&&ke.includeZwsp)||!Pi(jn.data))||Ve(jn)&&jn.parentNode&&eo[jn.parentNode.nodeName]&&Gl(jn.data))return!1;jn=ro.next()}while(jn)}return _e<=1},je=()=>e.createRange(),qe=(oe,se,ke)=>{let _e=je(),rt,ro;if(oe&&se&&oe.parentNode&&se.parentNode){const eo=oe.parentNode;return _e.setStart(eo,Vg(oe)),_e.setEnd(se.parentNode,Vg(se)),rt=_e.extractContents(),_e=je(),_e.setStart(se.parentNode,Vg(se)+1),_e.setEnd(eo,Vg(oe)+1),ro=_e.extractContents(),eo.insertBefore(Lc(at,rt),oe),ke?eo.insertBefore(ke,oe):eo.insertBefore(se,oe),eo.insertBefore(Lc(at,ro),oe),u(oe),ke||se}else return},Et=(oe,se,ke,_e)=>{if(ko(oe)){let rt=oe.length;const ro=[];for(;rt--;)ro[rt]=Et(oe[rt],se,ke,_e);return ro}else return o.collect&&(oe===e||oe===s)&&k.push([oe,se,ke,_e]),I.bind(oe,se,ke,_e||at)},yo=(oe,se,ke)=>{if(ko(oe)){let _e=oe.length;const rt=[];for(;_e--;)rt[_e]=yo(oe[_e],se,ke);return rt}else{if(k.length>0&&(oe===e||oe===s)){let _e=k.length;for(;_e--;){const[rt,ro,eo]=k[_e];oe===rt&&(!se||se===ro)&&(!ke||ke===eo)&&I.unbind(rt,ro,eo)}}return I.unbind(oe,se,ke)}},kn=(oe,se,ke)=>I.dispatch(oe,se,ke),Ze=(oe,se,ke)=>I.dispatch(oe,se,ke),mt=oe=>{if(oe&&gt(oe)){const se=oe.getAttribute("data-mce-contenteditable");return se&&se!=="inherit"?se:oe.contentEditable!=="inherit"?oe.contentEditable:null}else return null},at={doc:e,settings:o,win:s,files:i,stdMode:h,boxModel:v,styleSheetLoader:w,boundEvents:k,styles:H,schema:M,events:I,isBlock:U,root:null,clone:Ae,getRoot:$e,getViewPort:Ye,getRect:ve,getSize:ft,getParent:Jt,getParents:bt,get:W,getNext:ia,getPrev:yi,select:wi,is:et,add:Ht,create:Le,createHTML:a,createFragment:l,remove:u,setStyle:Ee,getStyle:Fe,setStyles:ye,removeAllAttribs:g,setAttrib:ue,setAttribs:gc,getAttrib:te,getPos:Ie,parseStyle:f,serializeStyle:y,addStyle:C,loadCSS:_,addClass:D,removeClass:R,hasClass:V,toggleClass:T,show:Q,hide:le,isHidden:Oe,uniqueId:Y,setHTML:gr,getOuterHTML:ne,setOuterHTML:be,decode:t,encode:r,insertAfter:pe,replace:Pe,rename:Ge,findCommonAncestor:st,run:No,getAttribs:de,isEmpty:io,createRng:je,nodeIndex:Vg,split:qe,bind:Et,unbind:yo,fire:Ze,dispatch:kn,getContentEditable:mt,getContentEditableParent:oe=>{const se=$e();let ke=null;for(let _e=oe;_e&&_e!==se&&(ke=mt(_e),ke===null);_e=_e.parentNode);return ke},isEditable:oe=>{if(xe(oe)){const se=gt(oe)?oe:oe.parentElement;return xe(se)&&Vr(K.fromDom(se))}else return!1},destroy:()=>{if(k.length>0){let oe=k.length;for(;oe--;){const[se,ke,_e]=k[oe];I.unbind(se,ke,_e)}}nt(i,(oe,se)=>{w.unload(se),delete i[se]})},isChildOf:(oe,se)=>oe===se||se.contains(oe),dumpRng:oe=>"startContainer: "+oe.startContainer.nodeName+", startOffset: "+oe.startOffset+", endContainer: "+oe.endContainer.nodeName+", endOffset: "+oe.endOffset},Bt=ew(H,o,Be(at));return at};nn.DOM=nn(document),nn.nodeIndex=Vg;const tw=nn.DOM,_p=0,Ep=1,$m=2,ow=3;class xd{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((n,s)=>{const i=tw;let d;const h=()=>{i.remove(k),d&&(d.onerror=d.onload=d=null)},v=()=>{h(),n()},w=()=>{h(),s("Failed to load script: "+o)},k=i.uniqueId();d=document.createElement("script"),d.id=k,d.type="text/javascript",d.src=fe._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(d,"referrerpolicy",this.settings.referrerPolicy),d.onload=v,d.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(d)})}isDone(o){return this.states[o]===$m}markDone(o){this.states[o]=$m}add(o){const n=this;return n.queue.push(o),n.states[o]===void 0&&(n.states[o]=_p),new Promise((s,i)=>{n.scriptLoadedCallbacks[o]||(n.scriptLoadedCallbacks[o]=[]),n.scriptLoadedCallbacks[o].push({resolve:s,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const n=this,s=(w,k)=>{Xo(n.scriptLoadedCallbacks,k).each(M=>{Ce(M,H=>H[w](k))}),delete n.scriptLoadedCallbacks[k]},i=w=>{const k=kt(w,M=>M.status==="rejected");return k.length>0?Promise.reject(Rs(k,({reason:M})=>ko(M)?M:[M])):Promise.resolve()},d=w=>Promise.allSettled($t(w,k=>n.states[k]===$m?(s("resolve",k),Promise.resolve()):n.states[k]===ow?(s("reject",k),Promise.reject(k)):(n.states[k]=Ep,n.loadScript(k).then(()=>{n.states[k]=$m,s("resolve",k);const M=n.queue;return M.length>0?(n.queue=[],d(M).then(i)):Promise.resolve()},()=>(n.states[k]=ow,s("reject",k),Promise.reject(k)))))),h=w=>(n.loading=!0,d(w).then(k=>{n.loading=!1;const M=n.queueLoadedCallbacks.shift();return B.from(M).each(xr),i(k)})),v=nd(o);return n.loading?new Promise((w,k)=>{n.queueLoadedCallbacks.push(()=>{h(v).then(w,k)})}):h(v)}}xd.ScriptLoader=new xd;const vr=e=>{let o=e;return{get:()=>o,set:n=>{o=n}}},nw=(e,o)=>{const n=e.indexOf(o);return n!==-1&&e.indexOf(o,n+1)>n},ck=e=>Nt(e)&&It(e,"raw"),rw=e=>ko(e)&&e.length>1,Tn={},nb=vr("en"),cn=()=>Xo(Tn,nb.get()),cr={getData:()=>wo(Tn,e=>({...e})),setCode:e=>{e&&nb.set(e)},getCode:()=>nb.get(),add:(e,o)=>{let n=Tn[e];n||(Tn[e]=n={});const s=$t(pr(o),i=>i.toLowerCase());nt(o,(i,d)=>{const h=d.toLowerCase();h!==d&&nw(s,h)?(It(o,h)||(n[h]=i),n[d]=i):n[h]=i})},translate:e=>{const o=cn().getOr({}),n=h=>J(h)?Object.prototype.toString.call(h):s(h)?"":""+h,s=h=>h===""||h===null||h===void 0,i=h=>{const v=n(h);return It(o,v)?n(o[v]):Xo(o,v.toLowerCase()).map(n).getOr(v)},d=h=>h.replace(/{context:\w+}$/,"");if(s(e))return"";if(ck(e))return n(e.raw);if(rw(e)){const h=e.slice(1),v=i(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>It(h,k)?n(h[k]):w);return d(v)}return d(i(e))},isRtl:()=>cn().bind(e=>Xo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>It(Tn,e)},Ln=()=>{const e=[],o={},n={},s=[],i=(W,j)=>{const te=kt(s,de=>de.name===W&&de.state===j);Ce(te,de=>de.resolve())},d=W=>It(o,W),h=W=>It(n,W),v=W=>{if(n[W])return n[W].instance},w=(W,j)=>{const te=cr.getCode(),de=","+(j||"")+",";!te||j&&de.indexOf(","+te+",")===-1||xd.ScriptLoader.add(o[W]+"/langs/"+te+".js")},k=(W,j)=>{Ln.languageLoad!==!1&&(d(W)?w(W,j):U(W,"loaded").then(()=>w(W,j)))},M=(W,j)=>(e.push(j),n[W]={instance:j},i(W,"added"),j),H=W=>{delete o[W],delete n[W]},I=(W,j)=>G(j)?G(W)?{prefix:"",resource:j,suffix:""}:{prefix:W.prefix,resource:j,suffix:W.suffix}:j,$=(W,j)=>{if(o[W])return Promise.resolve();let te=G(j)?j:j.prefix+j.resource+j.suffix;te.indexOf("/")!==0&&te.indexOf("://")===-1&&(te=Ln.baseURL+"/"+te),o[W]=te.substring(0,te.lastIndexOf("/"));const de=()=>(i(W,"loaded"),Promise.resolve());return n[W]?de():xd.ScriptLoader.add(te).then(de)},U=(W,j="added")=>j==="added"&&h(W)||j==="loaded"&&d(W)?Promise.resolve():new Promise(te=>{s.push({name:W,state:j,resolve:te})});return{items:e,urls:o,lookup:n,get:v,requireLangPack:k,add:M,remove:H,createUrl:I,load:$,waitFor:U}};Ln.languageLoad=!0,Ln.baseURL="",Ln.PluginManager=Ln(),Ln.ThemeManager=Ln(),Ln.ModelManager=Ln();const Ta=e=>{const o=vr(B.none()),n=()=>o.get().each(e);return{clear:()=>{n(),o.set(B.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(B.some(s))}}},M1=e=>{const o=vr(B.none()),n=()=>o.get().each(s=>clearInterval(s));return{clear:()=>{n(),o.set(B.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(B.some(setInterval(s,e)))}}},Xn=()=>{const e=Ta(De);return{...e,on:o=>e.get().each(o)}},N1=(e,o)=>{let n=null;return{cancel:()=>{re(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{re(n)&&(n=setTimeout(()=>{n=null,e.apply(null,s)},o))}}},Ii=(e,o)=>{let n=null;const s=()=>{re(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...i)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,i)},o)}}},Xl=Be("mce-annotation"),Gm=Be("data-mce-annotation"),qa=Be("data-mce-annotation-uid"),ii=Be("data-mce-annotation-active"),zg=Be("data-mce-annotation-classes"),Zg=Be("data-mce-annotation-attrs"),sw=e=>o=>To(o,e),rb=(e,o)=>{const n=e.selection.getRng(),s=K.fromDom(n.startContainer),i=K.fromDom(e.getBody()),d=o.fold(()=>"."+Xl(),v=>`[${Gm()}="${v}"]`),h=ks(s,n.startOffset).getOr(s);return ml(h,d,sw(i)).bind(v=>Fa(v,`${qa()}`).bind(w=>Fa(v,`${Gm()}`).map(k=>{const M=aw(e,w);return{uid:w,name:k,elements:M}})))},dk=e=>da(e)&&ld(e,Xl()),sb=(e,o)=>Di(e,"data-mce-bogus")||M2(e,'[data-mce-bogus="all"]',sw(o)),aw=(e,o)=>{const n=K.fromDom(e.getBody()),s=zr(n,`[${qa()}="${o}"]`);return kt(s,i=>!sb(i,n))},iw=(e,o)=>{const n=K.fromDom(e.getBody()),s=zr(n,`[${Gm()}="${o}"]`),i={};return Ce(s,d=>{if(!sb(d,n)){const h=Nn(d,qa()),v=Xo(i,h).getOr([]);i[h]=v.concat([d])}}),i},uk=(e,o)=>{const n=vr({}),s=()=>({listeners:[],previous:Xn()}),i=(M,H)=>{d(M,I=>(H(I),I))},d=(M,H)=>{const I=n.get(),$=Xo(I,M).getOrThunk(s),U=H($);I[M]=U,n.set(I)},h=(M,H,I)=>{i(M,$=>{Ce($.listeners,U=>U(!0,M,{uid:H,nodes:$t(I,W=>W.dom)}))})},v=M=>{i(M,H=>{Ce(H.listeners,I=>I(!1,M))})},w=(M,H)=>{Ce(aw(e,M),I=>{H?En(I,ii(),"true"):Fr(I,ii())})},k=Ii(()=>{const M=an(o.getNames());Ce(M,H=>{d(H,I=>{const $=I.previous.get();return rb(e,B.some(H)).fold(()=>{$.each(U=>{v(H),I.previous.clear(),w(U,!1)})},({uid:U,name:W,elements:j})=>{Bs($,U)||($.each(te=>w(te,!1)),h(W,U,j),I.previous.set(U),w(U,!0))}),{previous:I.previous,listeners:I.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(M,H)=>{d(M,I=>({previous:I.previous,listeners:I.listeners.concat([H])}))}}},lw=(e,o)=>{const n=Gm(),s=d=>B.from(d.attr(n)).bind(o.lookup),i=d=>{var h,v;d.attr(qa(),null),d.attr(Gm(),null),d.attr(ii(),null);const w=B.from(d.attr(Zg())).map(I=>I.split(",")).getOr([]),k=B.from(d.attr(zg())).map(I=>I.split(",")).getOr([]);Ce(w,I=>d.attr(I,null));const M=(v=(h=d.attr("class"))===null||h===void 0?void 0:h.split(" "))!==null&&v!==void 0?v:[],H=Tl(M,[Xl()].concat(k));d.attr("class",H.length>0?H.join(" "):null),d.attr(zg(),null),d.attr(Zg(),null)};e.serializer.addTempAttr(ii()),e.serializer.addAttributeFilter(n,d=>{for(const h of d)s(h).each(v=>{v.persistent===!1&&(h.name==="span"?h.unwrap():i(h))})})},cw=()=>{const e={};return{register:(o,n)=>{e[o]={name:o,settings:n}},lookup:o=>Xo(e,o).map(n=>n.settings),getNames:()=>pr(e)}};let Op=0;const Tp=e=>{const o=new Date().getTime(),n=Math.floor(Math.random()*1e9);return Op++,e+"_"+n+Op+String(o)},dw=(e,o)=>{Ce(o,n=>{Sc(e,n)})},uw=(e,o)=>{Ce(o,n=>{iu(e,n)})},R1=(e,o)=>K.fromDom(e.dom.cloneNode(o)),Km=e=>R1(e,!1),Un=e=>R1(e,!0),mw=(e,o)=>{const n=K.fromTag(o),s=wc(e);return ni(n,s),n},Ap=(e,o)=>{const n=mw(e,o);xt(e,n);const s=us(e);return Fn(n,s),Ho(e),n},gw=(e,o,n=Ne)=>{const s=new Ar(e,o),i=d=>{let h;do h=s[d]();while(h&&!Ve(h)&&!n(h));return B.from(h).filter(Ve)};return{current:()=>B.from(s.current()).filter(Ve),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Sd=(e,o)=>{const n=o||(i=>e.isBlock(i)||fo(i)||po(i)),s=(i,d,h,v)=>{if(Ve(i)){const w=v(i,d,i.data);if(w!==-1)return B.some({container:i,offset:w})}return h().bind(w=>s(w.container,w.offset,h,v))};return{backwards:(i,d,h,v)=>{const w=gw(i,v??e.getRoot(),n);return s(i,d,()=>w.prev().map(k=>({container:k,offset:k.length})),h).getOrNull()},forwards:(i,d,h,v)=>{const w=gw(i,v??e.getRoot(),n);return s(i,d,()=>w.next().map(k=>({container:k,offset:0})),h).getOrNull()}}},Mr=Math.round,Ts=e=>e?{left:Mr(e.left),top:Mr(e.top),bottom:Mr(e.bottom),right:Mr(e.right),width:Mr(e.width),height:Mr(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ab=(e,o)=>(e=Ts(e),o||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ib=(e,o)=>e.left===o.left&&e.top===o.top&&e.bottom===o.bottom&&e.right===o.right,L1=(e,o,n)=>e>=0&&e<=Math.min(o.height,n.height)/2,Dp=(e,o)=>{const n=Math.min(o.height/2,e.height/2);return e.bottom-n<o.top?!0:e.top>o.bottom?!1:L1(o.top-e.bottom,e,o)},Ug=(e,o)=>e.top>o.bottom?!0:e.bottom<o.top?!1:L1(o.bottom-e.top,e,o),hw=(e,o,n)=>o>=e.left&&o<=e.right&&n>=e.top&&n<=e.bottom,kd=e=>_n(e,(o,n)=>o.fold(()=>B.some(n),s=>{const i=Math.min(n.left,s.left),d=Math.min(n.top,s.top),h=Math.max(n.right,s.right),v=Math.max(n.bottom,s.bottom);return B.some({top:d,right:h,bottom:v,left:i,width:h-i,height:v-d})}),B.none()),H1=(e,o,n)=>{const s=Math.max(Math.min(o,e.left+e.width),e.left),i=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((o-s)*(o-s)+(n-i)*(n-i))},dr=(e,o)=>Math.max(0,Math.min(e.bottom,o.bottom)-Math.max(e.top,o.top)),Yl=(e,o,n)=>Math.min(Math.max(e,o),n),Ou=e=>{const o=e.startContainer,n=e.startOffset;return o===e.endContainer&&o.hasChildNodes()&&e.endOffset===n+1?o.childNodes[n]:null},_d=(e,o)=>{if(gt(e)&&e.hasChildNodes()){const n=e.childNodes,s=Yl(o,0,n.length-1);return n[s]}else return e},pw=(e,o)=>{if(!(o<0&&gt(e)&&e.hasChildNodes()))return _d(e,o)},mk=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ed=e=>G(e)&&e.charCodeAt(0)>=768&&mk.test(e),fw=(...e)=>o=>{for(let n=0;n<e.length;n++)if(e[n](o))return!0;return!1},Wg=(...e)=>o=>{for(let n=0;n<e.length;n++)if(!e[n](o))return!1;return!0},Mp=gt,lb=ta,cb=vu("display","block table"),gk=vu("float","left right"),jg=Wg(Mp,lb,zo(gk)),hk=zo(vu("white-space","pre pre-line pre-wrap")),Tu=Ve,Od=fo,Au=nn.nodeIndex,$g=pw,db=e=>e?e.createRange():nn.DOM.createRng(),P1=e=>G(e)&&/[\r\n\t ]/.test(e),vw=e=>!!e.setStart&&!!e.setEnd,Gg=e=>{const o=e.startContainer,n=e.startOffset;if(P1(e.toString())&&hk(o.parentNode)&&Ve(o)){const s=o.data;if(P1(s[n-1])||P1(s[n+1]))return!0}return!1},qm=e=>{const o=e.ownerDocument,n=db(o),s=o.createTextNode(vn),i=e.parentNode;i.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const d=Ts(n.getBoundingClientRect());return i.removeChild(s),d},B1=e=>{const o=e.startContainer,n=e.endContainer,s=e.startOffset,i=e.endOffset;if(o===n&&Ve(n)&&s===0&&i===1){const d=e.cloneRange();return d.setEndAfter(n),ts(d)}else return null},mo=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ts=e=>{var o;let n;const s=e.getClientRects();return s.length>0?n=Ts(s[0]):n=Ts(e.getBoundingClientRect()),!vw(e)&&Od(e)&&mo(n)?qm(e):mo(n)&&vw(e)&&(o=B1(e))!==null&&o!==void 0?o:n},Xa=(e,o)=>{const n=ab(e,o);return n.width=1,n.right=n.left+1,n},I1=e=>{const o=[],n=h=>{h.height!==0&&(o.length>0&&ib(h,o[o.length-1])||o.push(h))},s=(h,v)=>{const w=db(h.ownerDocument);if(v<h.data.length){if(Ed(h.data[v]))return;if(Ed(h.data[v-1])&&(w.setStart(h,v),w.setEnd(h,v+1),!Gg(w))){n(Xa(ts(w),!1));return}}v>0&&(w.setStart(h,v-1),w.setEnd(h,v),Gg(w)||n(Xa(ts(w),!1))),v<h.data.length&&(w.setStart(h,v),w.setEnd(h,v+1),Gg(w)||n(Xa(ts(w),!0)))},i=e.container(),d=e.offset();if(Tu(i))return s(i,d),o;if(Mp(i))if(e.isAtEnd()){const h=$g(i,d);Tu(h)&&s(h,h.data.length),jg(h)&&!Od(h)&&n(Xa(ts(h),!1))}else{const h=$g(i,d);if(Tu(h)&&s(h,0),jg(h)&&e.isAtEnd())return n(Xa(ts(h),!1)),o;const v=$g(e.container(),e.offset()-1);jg(v)&&!Od(v)&&(cb(v)||cb(h)||!jg(h))&&n(Xa(ts(v),!1)),jg(h)&&n(Xa(ts(h),!0))}return o},ce=(e,o,n)=>{const s=()=>(Tu(e),o===0),i=()=>Tu(e)?o>=e.data.length:o>=e.childNodes.length,d=()=>{const M=db(e.ownerDocument);return M.setStart(e,o),M.setEnd(e,o),M},h=()=>(n||(n=I1(ce(e,o))),n),v=()=>h().length>0,w=M=>M&&e===M.container()&&o===M.offset(),k=M=>$g(e,M?o-1:o);return{container:Be(e),offset:Be(o),toRange:d,getClientRects:h,isVisible:v,isAtStart:s,isAtEnd:i,isEqual:w,getNode:k}};ce.fromRangeStart=e=>ce(e.startContainer,e.startOffset),ce.fromRangeEnd=e=>ce(e.endContainer,e.endOffset),ce.after=e=>ce(e.parentNode,Au(e)+1),ce.before=e=>ce(e.parentNode,Au(e)),ce.isAbove=(e,o)=>rr(un(o.getClientRects()),xi(e.getClientRects()),Dp).getOr(!1),ce.isBelow=(e,o)=>rr(xi(o.getClientRects()),un(e.getClientRects()),Ug).getOr(!1),ce.isAtStart=e=>e?e.isAtStart():!1,ce.isAtEnd=e=>e?e.isAtEnd():!1,ce.isTextPosition=e=>e?Ve(e.container()):!1,ce.isElementPosition=e=>!ce.isTextPosition(e);const Np=(e,o)=>{Ve(o)&&o.data.length===0&&e.remove(o)},bw=(e,o,n)=>{o.insertNode(n),Np(e,n.previousSibling),Np(e,n.nextSibling)},br=(e,o,n)=>{const s=B.from(n.firstChild),i=B.from(n.lastChild);o.insertNode(n),s.each(d=>Np(e,d.previousSibling)),i.each(d=>Np(e,d.nextSibling))},Ql=(e,o,n)=>{gd(n)?br(e,o,n):bw(e,o,n)},vl=Ve,ub=Dm,yw=nn.nodeIndex,Rp=e=>{const o=e.parentNode;return ub(o)?Rp(o):o},Lp=e=>e?kr(e.childNodes,(o,n)=>(ub(n)&&n.nodeName!=="BR"?o=o.concat(Lp(n)):o.push(n),o),[]):[],F1=(e,o)=>{let n=e;for(;(n=n.previousSibling)&&vl(n);)o+=n.data.length;return o},oa=e=>o=>e===o,ww=e=>{let o,n;o=Lp(Rp(e)),n=Ao(o,oa(e),e),o=o.slice(0,n+1);const s=kr(o,(i,d,h)=>(vl(d)&&vl(o[h-1])&&i++,i),0);return o=Yr(o,Sn([e.nodeName])),n=Ao(o,oa(e),e),n-s},mb=e=>(vl(e)?"text()":e.nodeName.toLowerCase())+"["+ww(e)+"]",Cw=(e,o,n)=>{const s=[];for(let i=o.parentNode;i&&i!==e&&!(n&&n(i));i=i.parentNode)s.push(i);return s},gb=(e,o)=>{let n=[],s=o.container(),i=o.offset(),d;if(vl(s))d=F1(s,i);else{const v=s.childNodes;i>=v.length?(d="after",i=v.length-1):d="before",s=v[i]}n.push(mb(s));let h=Cw(e,s);return h=Yr(h,zo(Dm)),n=n.concat(fr(h,v=>mb(v))),n.reverse().join("/")+","+d},Du=(e,o,n)=>{let s=Lp(e);return s=Yr(s,(i,d)=>!vl(i)||!vl(s[d-1])),s=Yr(s,Sn([o])),s[n]},Aa=(e,o)=>{let n=e,s=0;for(;vl(n);){const i=n.data.length;if(o>=s&&o<=s+i){e=n,o=o-s;break}if(!vl(n.nextSibling)){e=n,o=i;break}s+=i,n=n.nextSibling}return vl(e)&&o>e.data.length&&(o=e.data.length),ce(e,o)},xw=(e,o)=>{if(!o)return null;const n=o.split(","),s=n[0].split("/"),i=n.length>1?n[1]:"before",d=kr(s,(h,v)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return w?(w[1]==="text()"&&(w[1]="#text"),Du(h,w[1],parseInt(w[2],10))):null},e);if(!d)return null;if(!vl(d)&&d.parentNode){let h;return i==="after"?h=yw(d)+1:h=yw(d),ce(d.parentNode,h)}return Aa(d,parseInt(i,10))},Ur=po,pk=(e,o,n)=>{let s=e(o.data.slice(0,n)).length;for(let i=o.previousSibling;i&&Ve(i);i=i.previousSibling)s+=e(i.data).length;return s},Pc=(e,o,n,s,i)=>{const d=i?s.startContainer:s.endContainer;let h=i?s.startOffset:s.endOffset;const v=[],w=e.getRoot();if(Ve(d))v.push(n?pk(o,d,h):h);else{let k=0;const M=d.childNodes;h>=M.length&&M.length&&(k=1,h=Math.max(0,M.length-1)),v.push(e.nodeIndex(M[h],n)+k)}for(let k=d;k&&k!==w;k=k.parentNode)v.push(e.nodeIndex(k,n));return v},hb=(e,o,n,s)=>{const i=o.dom,d=Pc(i,e,n,s,!0),h=o.isForward(),v=Oa(s)?{isFakeCaret:!0}:{};if(o.isCollapsed())return{start:d,forward:h,...v};{const w=Pc(i,e,n,s,!1);return{start:d,end:w,forward:h,...v}}},Xm=(e,o,n)=>{let s=0;return fe.each(e.select(o),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===n)return!1;s++;return}}),s},pb=(e,o)=>{let n=o?e.startContainer:e.endContainer,s=o?e.startOffset:e.endOffset;if(gt(n)&&n.nodeName==="TR"){const i=n.childNodes;n=i[Math.min(o?s:s-1,i.length-1)],n&&(s=o?0:n.childNodes.length,o?e.setStart(n,s):e.setEnd(n,s))}},V1=e=>(pb(e,!0),pb(e,!1),e),Vs=(e,o)=>{if(gt(e)&&(e=_d(e,o),Ur(e)))return e;if(ea(e)){Ve(e)&&yu(e)&&(e=e.parentNode);let n=e.previousSibling;if(Ur(n)||(n=e.nextSibling,Ur(n)))return n}},Hp=e=>Vs(e.startContainer,e.startOffset)||Vs(e.endContainer,e.endOffset),Sw=(e,o,n)=>{const s=n.getNode(),i=n.getRng();if(s.nodeName==="IMG"||Ur(s)){const h=s.nodeName;return{name:h,index:Xm(n.dom,h,s)}}const d=Hp(i);if(d){const h=d.tagName;return{name:h,index:Xm(n.dom,h,d)}}return hb(e,n,o,i)},fk=e=>{const o=e.getRng();return{start:gb(e.dom.getRoot(),ce.fromRangeStart(o)),end:gb(e.dom.getRoot(),ce.fromRangeEnd(o)),forward:e.isForward()}},As=e=>({rng:e.getRng(),forward:e.isForward()}),gs=(e,o,n)=>{const s={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},ha=(e,o)=>{const n=e.dom;let s=e.getRng();const i=n.uniqueId(),d=e.isCollapsed(),h=e.getNode(),v=h.nodeName,w=e.isForward();if(v==="IMG")return{name:v,index:Xm(n,v,h)};const k=V1(s.cloneRange());if(!d){k.collapse(!1);const H=gs(n,i+"_end",o);Ql(n,k,H)}s=V1(s),s.collapse(!0);const M=gs(n,i+"_start",o);return Ql(n,s,M),e.moveToBookmark({id:i,keep:!0,forward:w}),{id:i,forward:w}},Da=(e,o,n=!1)=>o===2?Sw(gl,n,e):o===3?fk(e):o?As(e):ha(e,!1),Ds=Me(Sw,go,!0),Wr=e=>{const o=d=>d(e),n=Be(e),s=()=>i,i={tag:!0,inner:e,fold:(d,h)=>h(e),isValue:ct,isError:Ne,map:d=>na.value(d(e)),mapError:s,bind:o,exists:o,forall:o,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:d=>{d(e)},toOptional:()=>B.some(e)};return i},Kg=e=>{const o=()=>n,n={tag:!1,inner:e,fold:(s,i)=>s(e),isValue:Ne,isError:ct,map:o,mapError:s=>na.error(s(e)),bind:o,exists:Ne,forall:ct,getOr:go,or:go,getOrThunk:Ko,orThunk:Ko,getOrDie:ls(String(e)),each:De,toOptional:B.none};return n},na={value:Wr,error:Kg,fromOption:(e,o)=>e.fold(()=>Kg(o),Wr)},Jl={generate:e=>{if(!ko(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const o=[],n={};return Ce(e,(s,i)=>{const d=pr(s);if(d.length!==1)throw new Error("one and only one name per case");const h=d[0],v=s[h];if(n[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ko(v))throw new Error("case arguments must be an array");o.push(h),n[h]=(...w)=>{const k=w.length;if(k!==v.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+v.length+" ("+v+"), got "+k);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[i].apply(null,w)},match:M=>{const H=pr(M);if(o.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+`
Actual: `+H.join(","));if(!Kn(o,I=>Ut(H,I)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+o.join(", "));return M[h].apply(null,w)},log:M=>{console.log(M,{constructors:o,constructor:h,params:w})}}}}),n}};Jl.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const kw=e=>{const o=[],n=[];return Ce(e,s=>{s.fold(i=>{o.push(i)},i=>{n.push(i)})}),{errors:o,values:n}},_w=e=>e.type==="inline-command"||e.type==="inline-format",Ew=e=>e.type==="block-command"||e.type==="block-format",fb=e=>{const o=s=>na.error({message:s,pattern:e}),n=(s,i,d)=>{if(e.format!==void 0){let h;if(ko(e.format)){if(!Kn(e.format,G))return o(s+" pattern has non-string items in the `format` array");h=e.format}else if(G(e.format))h=[e.format];else return o(s+" pattern has non-string `format` parameter");return na.value(i(h))}else return e.cmd!==void 0?G(e.cmd)?na.value(d(e.cmd,e.value)):o(s+" pattern has non-string `cmd` parameter"):o(s+" pattern is missing both `format` and `cmd` parameters")};if(!Nt(e))return o("Raw pattern is not an object");if(!G(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!G(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let s=e.start,i=e.end;return i.length===0&&(i=s,s=""),n("Inline",d=>({type:"inline-format",start:s,end:i,format:d}),(d,h)=>({type:"inline-command",start:s,end:i,cmd:d,value:h}))}else return e.replacement!==void 0?G(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):na.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?o("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,i)=>({type:"block-command",start:e.start,cmd:s,value:i}))},z1=e=>kt(e,Ew),Ow=e=>kt(e,_w),Z1=(e,o)=>({inlinePatterns:Ow(e),blockPatterns:z1(e),dynamicPatternsLookup:o}),Tw=e=>{const o=kw($t(e,fb));return Ce(o.errors,n=>console.error(n.message,n.pattern)),o.values},vk=e=>o=>{const n=e(o);return Tw(n)},Pp=oi().deviceType,bk=Pp.isTouch(),yk=nn.DOM,wk=e=>{const o=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return _n(o,(n,s)=>{const i=s.split("="),d=i[0],h=i.length>1?i[1]:d;return n[xs(d)]=xs(h),n},{})},Aw=e=>Cn(e,RegExp),ht=e=>o=>o.options.get(e),ze=e=>G(e)||Nt(e),vb=(e,o="")=>n=>{const s=G(n);if(s)if(n.indexOf("=")!==-1){const i=wk(n);return{value:Xo(i,e.id).getOr(o),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},os=e=>{const o=e.options.register;o("id",{processor:"string",default:e.id}),o("selector",{processor:"string"}),o("target",{processor:"object"}),o("suffix",{processor:"string"}),o("cache_suffix",{processor:"string"}),o("base_url",{processor:"string"}),o("referrer_policy",{processor:"string",default:""}),o("language_load",{processor:"boolean",default:!0}),o("inline",{processor:"boolean",default:!1}),o("iframe_attrs",{processor:"object",default:{}}),o("doctype",{processor:"string",default:"<!DOCTYPE html>"}),o("document_base_url",{processor:"string",default:e.documentBaseUrl}),o("body_id",{processor:vb(e,"tinymce"),default:"tinymce"}),o("body_class",{processor:vb(e),default:""}),o("content_security_policy",{processor:"string",default:""}),o("br_in_pre",{processor:"boolean",default:!0}),o("forced_root_block",{processor:n=>{const s=G(n)&&Ks(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),o("forced_root_block_attrs",{processor:"object",default:{}}),o("newline_behavior",{processor:n=>{const s=Ut(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),o("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),o("no_newline_selector",{processor:"string",default:""}),o("keep_styles",{processor:"boolean",default:!0}),o("end_container_on_empty_block",{processor:n=>ao(n)?{valid:!0,value:n}:G(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),o("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),o("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),o("font_size_classes",{processor:"string",default:""}),o("automatic_uploads",{processor:"boolean",default:!0}),o("images_reuse_filename",{processor:"boolean",default:!1}),o("images_replace_blob_uris",{processor:"boolean",default:!0}),o("icons",{processor:"string",default:""}),o("icons_url",{processor:"string",default:""}),o("images_upload_url",{processor:"string",default:""}),o("images_upload_base_path",{processor:"string",default:""}),o("images_upload_credentials",{processor:"boolean",default:!1}),o("images_upload_handler",{processor:"function"}),o("language",{processor:"string",default:"en"}),o("language_url",{processor:"string",default:""}),o("entity_encoding",{processor:"string",default:"named"}),o("indent",{processor:"boolean",default:!0}),o("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),o("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),o("indent_use_margin",{processor:"boolean",default:!1}),o("indentation",{processor:"string",default:"40px"}),o("content_css",{processor:n=>{const s=n===!1||G(n)||Ue(n,G);return s?G(n)?{value:$t(n.split(","),xs),valid:s}:ko(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Td(e)?[]:["default"]}),o("content_style",{processor:"string"}),o("content_css_cors",{processor:"boolean",default:!1}),o("font_css",{processor:n=>{const s=G(n)||Ue(n,G);return s?{value:ko(n)?n:$t(n.split(","),xs),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),o("inline_boundaries",{processor:"boolean",default:!0}),o("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),o("object_resizing",{processor:n=>{const s=ao(n)||G(n);return s?n===!1||Pp.isiPhone()||Pp.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!bk}),o("resize_img_proportional",{processor:"boolean",default:!0}),o("event_root",{processor:"object"}),o("service_message",{processor:"string"}),o("theme",{processor:n=>n===!1||G(n)||J(n),default:"silver"}),o("theme_url",{processor:"string"}),o("formats",{processor:"object"}),o("format_empty_lines",{processor:"boolean",default:!1}),o("format_noneditable_selector",{processor:"string",default:""}),o("preview_styles",{processor:n=>{const s=n===!1||G(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),o("custom_ui_selector",{processor:"string",default:""}),o("hidden_input",{processor:"boolean",default:!0}),o("submit_patch",{processor:"boolean",default:!0}),o("encoding",{processor:"string"}),o("add_form_submit_trigger",{processor:"boolean",default:!0}),o("add_unload_trigger",{processor:"boolean",default:!0}),o("custom_undo_redo_levels",{processor:"number",default:0}),o("disable_nodechange",{processor:"boolean",default:!1}),o("readonly",{processor:"boolean",default:!1}),o("editable_root",{processor:"boolean",default:!0}),o("plugins",{processor:"string[]",default:[]}),o("external_plugins",{processor:"object"}),o("forced_plugins",{processor:"string[]"}),o("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),o("model_url",{processor:"string"}),o("block_unsupported_drop",{processor:"boolean",default:!0}),o("visual",{processor:"boolean",default:!0}),o("visual_table_class",{processor:"string",default:"mce-item-table"}),o("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),o("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),o("setup",{processor:"function"}),o("init_instance_callback",{processor:"function"}),o("url_converter",{processor:"function",default:e.convertURL}),o("url_converter_scope",{processor:"object",default:e}),o("urlconverter_callback",{processor:"function"}),o("allow_conditional_comments",{processor:"boolean",default:!1}),o("allow_html_data_urls",{processor:"boolean",default:!1}),o("allow_svg_data_urls",{processor:"boolean"}),o("allow_html_in_named_anchor",{processor:"boolean",default:!1}),o("allow_script_urls",{processor:"boolean",default:!1}),o("allow_unsafe_link_target",{processor:"boolean",default:!1}),o("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),o("fix_list_elements",{processor:"boolean",default:!1}),o("preserve_cdata",{processor:"boolean",default:!1}),o("remove_trailing_brs",{processor:"boolean",default:!0}),o("pad_empty_with_br",{processor:"boolean",default:!1}),o("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),o("element_format",{processor:"string",default:"html"}),o("entities",{processor:"string"}),o("schema",{processor:"string",default:"html5"}),o("convert_urls",{processor:"boolean",default:!0}),o("relative_urls",{processor:"boolean",default:!0}),o("remove_script_host",{processor:"boolean",default:!0}),o("custom_elements",{processor:"string"}),o("extended_valid_elements",{processor:"string"}),o("invalid_elements",{processor:"string"}),o("invalid_styles",{processor:ze}),o("valid_children",{processor:"string"}),o("valid_classes",{processor:ze}),o("valid_elements",{processor:"string"}),o("valid_styles",{processor:ze}),o("verify_html",{processor:"boolean",default:!0}),o("auto_focus",{processor:n=>G(n)||n===!0}),o("browser_spellcheck",{processor:"boolean",default:!1}),o("protect",{processor:"array"}),o("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),o("deprecation_warnings",{processor:"boolean",default:!0}),o("a11y_advanced_options",{processor:"boolean",default:!1}),o("api_key",{processor:"string"}),o("paste_block_drop",{processor:"boolean",default:!1}),o("paste_data_images",{processor:"boolean",default:!0}),o("paste_preprocess",{processor:"function"}),o("paste_postprocess",{processor:"function"}),o("paste_webkit_styles",{processor:"string",default:"none"}),o("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),o("paste_merge_formats",{processor:"boolean",default:!0}),o("smart_paste",{processor:"boolean",default:!0}),o("paste_as_text",{processor:"boolean",default:!1}),o("paste_tab_spaces",{processor:"number",default:4}),o("text_patterns",{processor:n=>Ue(n,Nt)||n===!1?{value:Tw(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),o("text_patterns_lookup",{processor:n=>J(n)?{value:vk(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),o("noneditable_class",{processor:"string",default:"mceNonEditable"}),o("editable_class",{processor:"string",default:"mceEditable"}),o("noneditable_regexp",{processor:n=>Ue(n,Aw)?{value:n,valid:!0}:Aw(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),o("table_tab_navigation",{processor:"boolean",default:!0}),o("highlight_on_focus",{processor:"boolean",default:!1}),o("xss_sanitization",{processor:"boolean",default:!0}),o("details_initial_state",{processor:n=>{const s=Ut(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),o("details_serialized_state",{processor:n=>{const s=Ut(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),o("init_content_sync",{processor:"boolean",default:!1}),o("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{o("directionality",{processor:"string",default:cr.isRtl()?"rtl":void 0}),o("placeholder",{processor:"string",default:yk.getAttrib(e.getElement(),"placeholder")})})},Dw=ht("iframe_attrs"),bb=ht("doctype"),Mw=ht("document_base_url"),Ma=ht("body_id"),yb=ht("body_class"),Na=ht("content_security_policy"),wb=ht("br_in_pre"),ns=ht("forced_root_block"),li=ht("forced_root_block_attrs"),ec=ht("newline_behavior"),Cb=ht("br_newline_selector"),bl=ht("no_newline_selector"),Ck=ht("keep_styles"),Nw=ht("end_container_on_empty_block"),U1=ht("automatic_uploads"),xb=ht("images_reuse_filename"),Rw=ht("images_replace_blob_uris"),W1=ht("icons"),xk=ht("icons_url"),Lw=ht("images_upload_url"),Sk=ht("images_upload_base_path"),kk=ht("images_upload_credentials"),_k=ht("images_upload_handler"),Ek=ht("content_css_cors"),Sb=ht("referrer_policy"),j1=ht("language"),Ok=ht("language_url"),kb=ht("indent_use_margin"),Tk=ht("indentation"),Bp=ht("content_css"),Hw=ht("content_style"),Mu=ht("font_css"),Ak=ht("directionality"),Dk=ht("inline_boundaries_selector"),Pw=ht("object_resizing"),_b=ht("resize_img_proportional"),$1=ht("placeholder"),Yn=ht("event_root"),gn=ht("service_message"),Nu=ht("theme"),pa=ht("theme_url"),qg=ht("model"),Eb=ht("model_url"),Xg=ht("inline_boundaries"),G1=ht("formats"),Mk=ht("preview_styles"),Nk=ht("format_empty_lines"),Ip=ht("format_noneditable_selector"),Bw=ht("custom_ui_selector"),Td=ht("inline"),Rk=ht("hidden_input"),Lk=ht("submit_patch"),Hk=ht("add_form_submit_trigger"),Pk=ht("add_unload_trigger"),Iw=ht("custom_undo_redo_levels"),Ob=ht("disable_nodechange"),Fw=ht("readonly"),Bk=ht("editable_root"),Vw=ht("content_css_cors"),Fp=ht("plugins"),zw=ht("external_plugins"),Yg=ht("block_unsupported_drop"),Zw=ht("visual"),Uw=ht("visual_table_class"),Tb=ht("visual_anchor_class"),Ww=ht("iframe_aria_text"),Bc=ht("setup"),Vp=ht("init_instance_callback"),Ym=ht("urlconverter_callback"),Qm=ht("auto_focus"),Ab=ht("browser_spellcheck"),Ic=ht("protect"),Db=ht("paste_block_drop"),K1=ht("paste_data_images"),Ru=ht("paste_preprocess"),q1=ht("paste_postprocess"),Ik=ht("newdocument_content"),Fk=ht("paste_webkit_styles"),jw=ht("paste_remove_styles_if_webkit"),Vk=ht("paste_merge_formats"),$w=ht("smart_paste"),zk=ht("paste_as_text"),Zk=ht("paste_tab_spaces"),Gw=ht("allow_html_data_urls"),Uk=ht("text_patterns"),Kw=ht("text_patterns_lookup"),qw=ht("noneditable_class"),Wk=ht("editable_class"),X1=ht("noneditable_regexp"),Mb=ht("preserve_cdata"),zp=ht("highlight_on_focus"),Qg=ht("xss_sanitization"),Xw=ht("init_content_sync"),Nb=e=>e.options.isSet("text_patterns_lookup"),Yw=e=>fe.explode(e.options.get("font_size_style_values")),Qw=e=>fe.explode(e.options.get("font_size_classes")),Y1=e=>e.options.get("encoding")==="xml",Q1=e=>fe.explode(e.options.get("images_file_types")),Jw=ht("table_tab_navigation"),eC=ht("details_initial_state"),jk=ht("details_serialized_state"),Rb=gt,tC=Ve,oC=e=>{const o=e.parentNode;o&&o.removeChild(e)},Zp=e=>{const o=gl(e);return{count:e.length-o.length,text:o}},J1=e=>{let o;for(;(o=e.data.lastIndexOf(qn))!==-1;)e.deleteData(o,1)},nC=(e,o)=>(Ra(e),o),$k=(e,o)=>{const n=Zp(e.data.substr(0,o.offset())),s=Zp(e.data.substr(o.offset()));return(n.text+s.text).length>0?(J1(e),ce(e,o.offset()-n.count)):o},Gk=(e,o)=>{const n=o.container(),s=pn(ws(n.childNodes),e).map(i=>i<o.offset()?ce(n,o.offset()-1):o).getOr(o);return Ra(e),s},Kk=(e,o)=>tC(e)&&o.container()===e?$k(e,o):nC(e,o),qk=(e,o)=>o.container()===e.parentNode?Gk(e,o):nC(e,o),fa=(e,o)=>ce.isTextPosition(o)?Kk(e,o):qk(e,o),Ra=e=>{Rb(e)&&ea(e)&&(B2(e)?e.removeAttribute("data-mce-caret"):oC(e)),tC(e)&&(J1(e),e.data.length===0&&oC(e))},Xk=po,Yk=Dr,rC=Mm,sC="*[contentEditable=false],video,audio,embed,object",Lb=(e,o,n)=>{const s=ab(o.getBoundingClientRect(),n);let i,d;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;i=e.scrollLeft||v.scrollLeft,d=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();i=e.scrollLeft-v.left,d=e.scrollTop-v.top}s.left+=i,s.right+=i,s.top+=d,s.bottom+=d,s.width=1;let h=o.offsetWidth-o.clientWidth;return h>0&&(n&&(h*=-1),s.left+=h,s.right+=h),s},aC=e=>{var o,n;const s=zr(K.fromDom(e),sC);for(let i=0;i<s.length;i++){const d=s[i].dom;let h=d.previousSibling;if(wu(h)){const v=h.data;v.length===1?(o=h.parentNode)===null||o===void 0||o.removeChild(h):h.deleteData(v.length-1,1)}h=d.nextSibling,hl(h)&&(h.data.length===1?(n=h.parentNode)===null||n===void 0||n.removeChild(h):h.deleteData(0,1))}},Hb=(e,o,n,s)=>{const i=Xn();let d,h;const v=ns(e),w=e.dom,k=(I,$)=>{let U;if(M(),rC($))return null;if(n($)){const W=ms(v,$,I),j=Lb(o,$,I);w.setStyle(W,"top",j.top),h=W;const te=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(te,{...j}),w.add(o,te),i.set({caret:te,element:$,before:I}),I&&w.addClass(te,"mce-visual-caret-before"),H(),U=$.ownerDocument.createRange(),U.setStart(W,0),U.setEnd(W,0)}else return h=jv($,I),U=$.ownerDocument.createRange(),eh(h.nextSibling)?(U.setStart(h,0),U.setEnd(h,0)):(U.setStart(h,1),U.setEnd(h,1)),U;return U},M=()=>{aC(o),h&&(Ra(h),h=null),i.on(I=>{w.remove(I.caret),i.clear()}),d&&(clearInterval(d),d=void 0)},H=()=>{d=setInterval(()=>{i.on(I=>{s()?w.toggleClass(I.caret,"mce-visual-caret-hidden"):w.addClass(I.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(I=>{const $=Lb(o,I.element,I.before);w.setStyles(I.caret,{...$})})},destroy:()=>clearInterval(d)}},Jg=()=>ae.browser.isFirefox(),eh=e=>Xk(e)||Yk(e),Ad=e=>(eh(e)||Wa(e)&&Jg())&&uu(K.fromDom(e)).exists(Vr),iC=On,Pb=po,lC=Dr,e0=vu("display","block table table-cell table-caption list-item"),Ms=ea,th=yu,cC=gt,dC=Ve,Up=ta,oh=e=>e>0,Lu=e=>e<0,Wp=(e,o)=>{let n;for(;n=e(o);)if(!th(n))return n;return null},Jm=(e,o,n,s,i)=>{const d=new Ar(e,s),h=Pb(e)||th(e);let v;if(Lu(o)){if(h&&(v=Wp(d.prev.bind(d),!0),n(v)))return v;for(;v=Wp(d.prev.bind(d),i);)if(n(v))return v}if(oh(o)){if(h&&(v=Wp(d.next.bind(d),!0),n(v)))return v;for(;v=Wp(d.next.bind(d),i);)if(n(v))return v}return null},uC=(e,o)=>{const n=i=>iC(i.dom),s=i=>i.dom===o;return Rn(K.fromDom(e),n,s).map(i=>i.dom).getOr(o)},Fi=(e,o)=>{for(;e&&e!==o;){if(e0(e))return e;e=e.parentNode}return null},va=(e,o,n)=>Fi(e.container(),n)===Fi(o.container(),n),Bb=(e,o)=>{if(!o)return B.none();const n=o.container(),s=o.offset();return cC(n)?B.from(n.childNodes[s+e]):B.none()},t0=(e,o)=>{var n;const s=((n=o.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),s},o0=(e,o,n)=>Fi(o,e)===Fi(n,e),jp=(e,o,n)=>{const s=e?"previousSibling":"nextSibling";let i=n;for(;i&&i!==o;){let d=i[s];if(d&&Ms(d)&&(d=d[s]),Pb(d)||lC(d)){if(o0(o,d,i))return d;break}if(Up(d))break;i=i.parentNode}return null},$p=Me(t0,!0),Gp=Me(t0,!1),eg=(e,o,n)=>{let s;const i=Me(jp,!0,o),d=Me(jp,!1,o),h=n.startContainer,v=n.startOffset;if(yu(h)){const w=dC(h)?h.parentNode:h,k=w.getAttribute("data-mce-caret");if(k==="before"&&(s=w.nextSibling,Ad(s)))return $p(s);if(k==="after"&&(s=w.previousSibling,Ad(s)))return Gp(s)}if(!n.collapsed)return n;if(Ve(h)){if(Ms(h)){if(e===1){if(s=d(h),s)return $p(s);if(s=i(h),s)return Gp(s)}if(e===-1){if(s=i(h),s)return Gp(s);if(s=d(h),s)return $p(s)}return n}if(wu(h)&&v>=h.data.length-1)return e===1&&(s=d(h),s)?$p(s):n;if(hl(h)&&v<=1)return e===-1&&(s=i(h),s)?Gp(s):n;if(v===h.data.length)return s=d(h),s?$p(s):n;if(v===0)return s=i(h),s?Gp(s):n}return n},Ib=(e,o)=>Bb(e?0:-1,o).filter(Pb),nh=(e,o,n)=>{const s=eg(e,o,n);return e===-1?ce.fromRangeStart(s):ce.fromRangeEnd(s)},rh=e=>B.from(e.getNode()).map(K.fromDom),Fb=e=>B.from(e.getNode(!0)).map(K.fromDom),tg=(e,o)=>{let n=o;for(;n=e(n);)if(n.isVisible())return n;return n},sh=(e,o)=>{const n=va(e,o);return!n&&fo(e.getNode())?!0:n};var jr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(jr||(jr={}));const mC=po,tc=Ve,Vb=gt,ah=fo,ih=ta,gC=F2,Dd=Kv,Qk=(e,o)=>{const n=[];let s=e;for(;s&&s!==o;)n.push(s),s=s.parentNode;return n},hC=(e,o)=>e.hasChildNodes()&&o<e.childNodes.length?e.childNodes[o]:null,pC=(e,o)=>{if(oh(e)){if(ih(o.previousSibling)&&!tc(o.previousSibling))return ce.before(o);if(tc(o))return ce(o,0)}if(Lu(e)){if(ih(o.nextSibling)&&!tc(o.nextSibling))return ce.after(o);if(tc(o))return ce(o,o.data.length)}return Lu(e)?ah(o)?ce.before(o):ce.after(o):ce.before(o)},zb=(e,o)=>{const n=o.nextSibling;return n&&ih(n)?tc(n)?ce(n,0):ce.before(n):Kp(jr.Forwards,ce.after(o),e)},Kp=(e,o,n)=>{let s,i,d,h;if(!Vb(n)||!o)return null;if(o.isEqual(ce.after(n))&&n.lastChild){if(h=ce.after(n.lastChild),Lu(e)&&ih(n.lastChild)&&Vb(n.lastChild))return ah(n.lastChild)?ce.before(n.lastChild):h}else h=o;const v=h.container();let w=h.offset();if(tc(v)){if(Lu(e)&&w>0)return ce(v,--w);if(oh(e)&&w<v.length)return ce(v,++w);s=v}else{if(Lu(e)&&w>0&&(i=hC(v,w-1),ih(i)))return!gC(i)&&(d=Jm(i,e,Dd,i),d)?tc(d)?ce(d,d.data.length):ce.after(d):tc(i)?ce(i,i.data.length):ce.before(i);if(oh(e)&&w<v.childNodes.length&&(i=hC(v,w),ih(i)))return ah(i)?zb(n,i):!gC(i)&&(d=Jm(i,e,Dd,i),d)?tc(d)?ce(d,0):ce.before(d):tc(i)?ce(i,0):ce.after(i);s=i||h.getNode()}if(s&&(oh(e)&&h.isAtEnd()||Lu(e)&&h.isAtStart())&&(s=Jm(s,e,ct,n,!0),Dd(s,n)))return pC(e,s);i=s&&Jm(s,e,Dd,n);const k=or(kt(Qk(v,n),mC));return k&&(!i||!k.contains(i))?(oh(e)?h=ce.after(k):h=ce.before(k),h):i?pC(e,i):null},Fc=e=>({next:o=>Kp(jr.Forwards,o,e),prev:o=>Kp(jr.Backwards,o,e)}),fC=(e,o,n)=>{const s=e?ce.before(n):ce.after(n);return ci(e,o,s)},Jk=e=>fo(e)?ce.before(e):ce.after(e),vC=e=>ce.isTextPosition(e)?e.offset()===0:ta(e.getNode()),zs=e=>{if(ce.isTextPosition(e)){const o=e.container();return e.offset()===o.data.length}else return ta(e.getNode(!0))},og=(e,o)=>!ce.isTextPosition(e)&&!ce.isTextPosition(o)&&e.getNode()===o.getNode(!0),Hu=e=>!ce.isTextPosition(e)&&fo(e.getNode()),lh=(e,o,n)=>e?!og(o,n)&&!Hu(o)&&zs(o)&&vC(n):!og(n,o)&&vC(o)&&zs(n),ci=(e,o,n)=>{const s=Fc(o);return B.from(e?s.next(n):s.prev(n))},Pu=(e,o,n)=>ci(e,o,n).bind(s=>va(n,s,o)&&lh(e,n,s)?ci(e,o,s):B.some(s)),Zb=(e,o,n,s)=>Pu(e,o,n).bind(i=>s(i)?Zb(e,o,i,s):B.some(i)),Md=(e,o)=>{const n=e?o.firstChild:o.lastChild;return Ve(n)?B.some(ce(n,e?0:n.data.length)):n?ta(n)?B.some(e?ce.before(n):Jk(n)):fC(e,o,n):B.none()},ba=Me(ci,!0),La=Me(ci,!1),yr=Me(Md,!0),Zs=Me(Md,!1),n0="_mce_caret",Qn=e=>gt(e)&&e.id===n0,Bu=(e,o)=>{let n=o;for(;n&&n!==e;){if(Qn(n))return n;n=n.parentNode}return null},r0=e=>G(e.start),s0=e=>It(e,"rng"),bC=e=>It(e,"id"),yC=e=>It(e,"name"),Ub=e=>fe.isArray(e.start),qp=e=>!yC(e)&&ao(e.forward)?e.forward:!0,a0=(e,o)=>(gt(o)&&e.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),e3=(e,o)=>{const n=B.from(xw(e.getRoot(),o.start)),s=B.from(xw(e.getRoot(),o.end));return rr(n,s,(i,d)=>{const h=e.createRng();return h.setStart(i.container(),i.offset()),h.setEnd(d.container(),d.offset()),{range:h,forward:qp(o)}})},Wb=(e,o)=>{var n;const s=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(qn);e.appendChild(s),o.setStart(s,0),o.setEnd(s,0)},i0=e=>!e.hasChildNodes(),t3=(e,o)=>Zs(e).fold(Ne,n=>(o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),!0)),wC=(e,o,n)=>i0(o)&&Bu(e,o)?(Wb(o,n),!0):!1,l0=(e,o,n,s)=>{const i=n[o?"start":"end"],d=e.getRoot();if(i){let h=d,v=i[0];for(let w=i.length-1;h&&w>=1;w--){const k=h.childNodes;if(wC(d,h,s))return!0;if(i[w]>k.length-1)return wC(d,h,s)?!0:t3(h,s);h=k[i[w]]}Ve(h)&&(v=Math.min(i[0],h.data.length)),gt(h)&&(v=Math.min(i[0],h.childNodes.length)),o?s.setStart(h,v):s.setEnd(h,v)}return!0},c0=e=>Ve(e)&&e.data.length>0,d0=(e,o,n)=>{const s=e.get(n.id+"_"+o),i=s==null?void 0:s.parentNode,d=n.keep;if(s&&i){let h,v;if(o==="start"?d?s.hasChildNodes()?(h=s.firstChild,v=1):c0(s.nextSibling)?(h=s.nextSibling,v=0):c0(s.previousSibling)?(h=s.previousSibling,v=s.previousSibling.data.length):(h=i,v=e.nodeIndex(s)+1):(h=i,v=e.nodeIndex(s)):d?s.hasChildNodes()?(h=s.firstChild,v=1):c0(s.previousSibling)?(h=s.previousSibling,v=s.previousSibling.data.length):(h=i,v=e.nodeIndex(s)):(h=i,v=e.nodeIndex(s)),!d){const w=s.previousSibling,k=s.nextSibling;fe.each(fe.grep(s.childNodes),H=>{Ve(H)&&(H.data=H.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(n.id+"_"+o);)e.remove(M,!0);if(Ve(k)&&Ve(w)&&!ae.browser.isOpera()){const H=w.data.length;w.appendData(k.data),e.remove(k),h=w,v=H}}return B.some(ce(h,v))}else return B.none()},o3=(e,o)=>{const n=e.createRng();return l0(e,!0,o,n)&&l0(e,!1,o,n)?B.some({range:n,forward:qp(o)}):B.none()},CC=(e,o)=>{const n=d0(e,"start",o),s=d0(e,"end",o);return rr(n,s.or(n),(i,d)=>{const h=e.createRng();return h.setStart(a0(e,i.container()),i.offset()),h.setEnd(a0(e,d.container()),d.offset()),{range:h,forward:qp(o)}})},n3=(e,o)=>B.from(e.select(o.name)[o.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),xC=(e,o)=>{const n=e.dom;if(o){if(Ub(o))return o3(n,o);if(r0(o))return e3(n,o);if(bC(o))return CC(n,o);if(yC(o))return n3(n,o);if(s0(o))return B.some({range:o.rng,forward:qp(o)})}return B.none()},SC=(e,o,n)=>Da(e,o,n),r3=(e,o)=>{xC(e,o).each(({range:n,forward:s})=>{e.setRng(n,s)})},Yt=e=>gt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",yl=(e=>o=>e===o)(vn),Vi=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Xp=e=>!Vi(e)&&!yl(e)&&!Zv(e),u0=e=>({value:m0(e)}),m0=e=>Yd(e,"#").toUpperCase(),jb=e=>{const o=e.toString(16);return(o.length===1?"0"+o:o).toUpperCase()},$b=e=>{const o=jb(e.red)+jb(e.green)+jb(e.blue);return u0(o)},g0=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Gb=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ng=(e,o,n,s)=>({red:e,green:o,blue:n,alpha:s}),h0=(e,o,n,s)=>{const i=parseInt(e,10),d=parseInt(o,10),h=parseInt(n,10),v=parseFloat(s);return ng(i,d,h,v)},Yp=e=>{if(e==="transparent")return B.some(ng(0,0,0,0));const o=g0.exec(e);if(o!==null)return B.some(h0(o[1],o[2],o[3],"1"));const n=Gb.exec(e);return n!==null?B.some(h0(n[1],n[2],n[3],n[4])):B.none()},Nd=e=>Yp(e).map($b).map(o=>"#"+o.value).getOr(e),p0=e=>{const o=[];if(e)for(let n=0;n<e.rangeCount;n++)o.push(e.getRangeAt(n));return o},s3=e=>Rs(e,o=>{const n=Ou(o);return n?[K.fromDom(n)]:[]}),kC=e=>p0(e).length>1,a3=e=>kt(s3(e),Ea),f0=e=>zr(e,"td[data-mce-selected],th[data-mce-selected]"),_C=(e,o)=>{const n=f0(o);return n.length>0?n:a3(e)},ch=e=>_C(p0(e.selection.getSel()),K.fromDom(e.getBody())),Qp=(e,o)=>_m(e,"table",o),i3=e=>{const o=e.startContainer,n=e.startOffset;return Ve(o)?n===0?B.some(K.fromDom(o)):B.none():B.from(o.childNodes[n]).map(K.fromDom)},l3=e=>{const o=e.endContainer,n=e.endOffset;return Ve(o)?n===o.data.length?B.some(K.fromDom(o)):B.none():B.from(o.childNodes[n-1]).map(K.fromDom)},EC=e=>Tg(e).fold(Be([e]),o=>[e].concat(EC(o))),Kb=e=>wm(e).fold(Be([e]),o=>tn(o)==="br"?_c(o).map(n=>[e].concat(Kb(n))).getOr([]):[e].concat(Kb(o))),Iu=(e,o)=>rr(i3(o),l3(o),(n,s)=>{const i=xn(EC(e),Me(To,n)),d=xn(Kb(e),Me(To,s));return i.isSome()&&d.isSome()}).getOr(!1),qb=(e,o,n,s)=>{const i=n,d=new Ar(n,i),h=jo(e.schema.getMoveCaretBeforeOnEnterElements(),(w,k)=>!Ut(["td","th","table"],k.toLowerCase()));let v=n;do{if(Ve(v)&&fe.trim(v.data).length!==0){s?o.setStart(v,0):o.setEnd(v,v.data.length);return}if(h[v.nodeName]){s?o.setStartBefore(v):v.nodeName==="BR"?o.setEndBefore(v):o.setEndAfter(v);return}}while(v=s?d.next():d.prev());i.nodeName==="BODY"&&(s?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},v0=e=>{const o=e.selection.getSel();return xe(o)&&o.rangeCount>0},Xb=(e,o)=>{const n=ch(e);n.length>0?Ce(n,s=>{const i=s.dom,d=e.dom.createRng();d.setStartBefore(i),d.setEndAfter(i),o(d,!0)}):o(e.selection.getRng(),!1)},OC=(e,o,n)=>{const s=ha(e,o);n(s),e.moveToBookmark(s)},Je=e=>bs(e==null?void 0:e.nodeType),Nr=e=>gt(e)&&!Yt(e)&&!Qn(e)&&!Dm(e),b0=(e,o)=>{if(Nr(o)&&!/^(TD|TH)$/.test(o.nodeName)){const n=e.getAttrib(o,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},Jn=e=>e.isContentEditable===!0,zi=(e,o,n)=>{const{selection:s,dom:i}=e,d=s.getNode(),h=po(d);OC(s,!0,()=>{o()}),h&&po(d)&&i.isChildOf(d,e.getBody())?e.selection.select(d):n(s.getStart())&&Jp(i,s)},Jp=(e,o)=>{var n,s;const i=o.getRng(),{startContainer:d,startOffset:h}=i,v=o.getNode();if(!b0(e,v)&&gt(d)){const w=d.childNodes,k=e.getRoot();let M;if(h<w.length){const H=w[h];M=new Ar(H,(n=e.getParent(H,e.isBlock))!==null&&n!==void 0?n:k)}else{const H=w[w.length-1];M=new Ar(H,(s=e.getParent(H,e.isBlock))!==null&&s!==void 0?s:k),M.next(!0)}for(let H=M.current();H;H=M.next()){if(e.getContentEditable(H)==="false")return;if(Ve(H)&&!y0(H)){i.setStart(H,0),o.setRng(i);return}}}},dh=(e,o,n)=>{if(e){const s=o?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(gt(e)||!y0(e))return e}},rg=(e,o)=>!!e.getTextBlockElements()[o.nodeName.toLowerCase()]||Rc(e,o),uh=(e,o,n)=>e.schema.isValidChild(o,n),y0=(e,o=!1)=>{if(xe(e)&&Ve(e)){const n=o?e.data.replace(/ /g," "):e.data;return Gl(n)}else return!1},Yb=e=>xe(e)&&Ve(e)&&e.length===0,TC=(e,o)=>{const n="[data-mce-cef-wrappable]",s=Ip(e),i=fc(s)?n:`${n},${s}`;return Za(K.fromDom(o),i)},Qb=(e,o)=>{const n=e.dom;return Nr(o)&&n.getContentEditable(o)==="false"&&TC(e,o)&&n.select('[contenteditable="true"]',o).length===0},Fu=(e,o)=>J(e)?e(o):(xe(o)&&(e=e.replace(/%(\w+)/g,(n,s)=>o[s]||n)),e),ef=(e,o)=>(e=e||"",o=o||"",e=""+(e.nodeName||e),o=""+(o.nodeName||o),e.toLowerCase()===o.toLowerCase()),Jb=(e,o)=>{if(oo(e))return null;{let n=String(e);return(o==="color"||o==="backgroundColor")&&(n=Nd(n)),o==="fontWeight"&&e===700&&(n="bold"),o==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},mh=(e,o,n)=>{const s=e.getStyle(o,n);return Jb(s,n)},tf=(e,o)=>{let n;return e.getParent(o,s=>gt(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},sg=(e,o,n)=>e.getParents(o,n,e.getRoot()),of=(e,o,n)=>{const s=e.formatter.get(o);return xe(s)&&Wo(s,n)},gh=(e,o)=>of(e,o,n=>{const s=i=>J(i)||i.length>1&&i.charAt(0)==="%";return Wo(["styles","attributes"],i=>Xo(n,i).exists(d=>{const h=ko(d)?d:Dl(d);return Wo(h,s)}))}),Vu=(e,o,n)=>{const s=["inline","block","selector","attributes","styles","classes"],i=d=>jo(d,(h,v)=>Wo(s,w=>w===v));return of(e,o,d=>{const h=i(d);return of(e,n,v=>{const w=i(v);return _i(h,w)})})},Vc=e=>tr(e,"block"),nf=e=>Vc(e)&&e.wrapper===!0,hh=e=>Vc(e)&&e.wrapper!==!0,Zi=e=>tr(e,"selector"),rs=e=>tr(e,"inline"),ey=e=>Zi(e)&&rs(e)&&Bs(Xo(e,"mixed"),!0),ty=e=>Zi(e)&&e.expand!==!1&&!rs(e),ag=Yt,ph=sg,AC=y0,w0=rg,Us=e=>fo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,hs=(e,o)=>{let n=o;for(;n;){if(gt(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:o;n=n.parentNode}return o},di=(e,o,n,s)=>{const i=o.data;if(e){for(let d=n;d>0;d--)if(s(i.charAt(d-1)))return d}else for(let d=n;d<i.length;d++)if(s(i.charAt(d)))return d;return-1},C0=(e,o,n)=>di(e,o,n,s=>yl(s)||Vi(s)),rf=(e,o,n)=>di(e,o,n,Xp),DC=(e,o,n,s,i,d)=>{let h;const v=e.getParent(n,e.isBlock)||o,w=(k,M,H)=>{const I=Sd(e),$=i?I.backwards:I.forwards;return B.from($(k,M,(U,W)=>ag(U.parentNode)?-1:(h=U,H(i,U,W)),v))};return w(n,s,C0).bind(k=>d?w(k.container,k.offset+(i?-1:0),rf):B.some(k)).orThunk(()=>h?B.some({container:h,offset:i?0:h.length}):B.none())},x0=(e,o,n,s,i)=>{const d=s[i];Ve(s)&&fc(s.data)&&d&&(s=d);const h=ph(e,s);for(let v=0;v<h.length;v++)for(let w=0;w<o.length;w++){const k=o[w];if(!(xe(k.collapsed)&&k.collapsed!==n.collapsed)&&Zi(k)&&e.is(h[v],k.selector))return h[v]}return s},MC=(e,o,n,s)=>{var i;let d=n;const h=e.getRoot(),v=o[0];if(Vc(v)&&(d=v.wrapper?null:e.getParent(n,v.block,h)),!d){const w=(i=e.getParent(n,"LI,TD,TH"))!==null&&i!==void 0?i:h;d=e.getParent(Ve(n)?n.parentNode:n,k=>k!==h&&w0(e.schema,k),w)}if(d&&Vc(v)&&v.wrapper&&(d=ph(e,d,"ul,ol").reverse()[0]||d),!d)for(d=n;d&&d[s]&&!e.isBlock(d[s])&&(d=d[s],!ef(d,"br")););return d||n},S0=(e,o,n,s)=>{const i=n.parentNode;return xe(n[s])?!1:i===o||oo(i)||e.isBlock(i)?!0:S0(e,o,i,s)},k0=(e,o,n,s,i)=>{let d=n;const h=i?"previousSibling":"nextSibling",v=e.getRoot();if(Ve(n)&&!AC(n)&&(i?s>0:s<n.data.length))return n;for(;d;){if(!o[0].block_expand&&e.isBlock(d))return d;for(let w=d[h];w;w=w[h]){const k=Ve(w)&&!S0(e,v,w,h);if(!ag(w)&&!Us(w)&&!AC(w,k))return d}if(d===v||d.parentNode===v){n=d;break}d=d.parentNode}return n},_0=e=>ag(e.parentNode)||ag(e),zu=(e,o,n,s=!1)=>{let{startContainer:i,startOffset:d,endContainer:h,endOffset:v}=o;const w=n[0];return gt(i)&&i.hasChildNodes()&&(i=_d(i,d),Ve(i)&&(d=0)),gt(h)&&h.hasChildNodes()&&(h=_d(h,o.collapsed?v:v-1),Ve(h)&&(v=h.data.length)),i=hs(e,i),h=hs(e,h),_0(i)&&(i=ag(i)?i:i.parentNode,o.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,Ve(i)&&(d=o.collapsed?i.length:0)),_0(h)&&(h=ag(h)?h:h.parentNode,o.collapsed?h=h.nextSibling||h:h=h.previousSibling||h,Ve(h)&&(v=o.collapsed?0:h.length)),o.collapsed&&(DC(e,e.getRoot(),i,d,!0,s).each(({container:k,offset:M})=>{i=k,d=M}),DC(e,e.getRoot(),h,v,!1,s).each(({container:k,offset:M})=>{h=k,v=M})),(rs(w)||w.block_expand)&&((!rs(w)||!Ve(i)||d===0)&&(i=k0(e,n,i,d,!0)),(!rs(w)||!Ve(h)||v===h.data.length)&&(h=k0(e,n,h,v,!1))),ty(w)&&(i=x0(e,n,o,i,"previousSibling"),h=x0(e,n,o,h,"nextSibling")),(Vc(w)||Zi(w))&&(i=MC(e,n,i,"previousSibling"),h=MC(e,n,h,"nextSibling"),Vc(w)&&(e.isBlock(i)||(i=k0(e,n,i,d,!0)),e.isBlock(h)||(h=k0(e,n,h,v,!1)))),gt(i)&&i.parentNode&&(d=e.nodeIndex(i),i=i.parentNode),gt(h)&&h.parentNode&&(v=e.nodeIndex(h)+1,h=h.parentNode),{startContainer:i,startOffset:d,endContainer:h,endOffset:v}},fh=(e,o,n)=>{var s;const i=o.startOffset,d=_d(o.startContainer,i),h=o.endOffset,v=_d(o.endContainer,h-1),w=j=>{const te=j[0];Ve(te)&&te===d&&i>=te.data.length&&j.splice(0,1);const de=j[j.length-1];return h===0&&j.length>0&&de===v&&Ve(de)&&j.splice(j.length-1,1),j},k=(j,te,de)=>{const ue=[];for(;j&&j!==de;j=j[te])ue.push(j);return ue},M=(j,te)=>e.getParent(j,de=>de.parentNode===te,te),H=(j,te,de)=>{const ue=de?"nextSibling":"previousSibling";for(let Ae=j,$e=Ae.parentNode;Ae&&Ae!==te;Ae=$e){$e=Ae.parentNode;const Ye=k(Ae===j?Ae:Ae[ue],ue);Ye.length&&(de||Ye.reverse(),n(w(Ye)))}};if(d===v)return n(w([d]));const I=(s=e.findCommonAncestor(d,v))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(d,v))return H(d,I,!0);if(e.isChildOf(v,d))return H(v,I);const $=M(d,I)||d,U=M(v,I)||v;H(d,$,!0);const W=k($===d?$:$.nextSibling,"nextSibling",U===v?U.nextSibling:U);W.length&&n(w(W)),H(v,U)},oy=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],ny=e=>Lo(e)&&ga(e)===qn,Go=(e,o,n,s)=>Ua(o).fold(()=>"skipping",i=>s==="br"||ny(o)?"valid":dk(o)?"existing":Qn(o.dom)?"caret":Wo(oy,d=>Za(o,d))?"valid-block":!uh(e,n,s)||!uh(e,tn(i),n)?"invalid-child":"valid"),Zu=(e,o)=>{const n=zu(e.dom,o,[{inline:"span"}]);o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),e.selection.setRng(o)},ry=(e,o,n,s,i,d)=>{const{uid:h=o,...v}=n;Sc(e,Xl()),En(e,`${qa()}`,h),En(e,`${Gm()}`,s);const{attributes:w={},classes:k=[]}=i(h,v);if(ni(e,w),dw(e,k),d){k.length>0&&En(e,`${zg()}`,k.join(","));const M=pr(w);M.length>0&&En(e,`${Zg()}`,M.join(","))}},sy=e=>{iu(e,Xl()),Fr(e,`${qa()}`),Fr(e,`${Gm()}`),Fr(e,`${ii()}`);const o=Fa(e,`${Zg()}`).map(s=>s.split(",")).getOr([]),n=Fa(e,`${zg()}`).map(s=>s.split(",")).getOr([]);Ce(o,s=>Fr(e,s)),uw(e,n),Fr(e,`${zg()}`),Fr(e,`${Zg()}`)},ay=(e,o,n,s,i)=>{const d=K.fromTag("span",e);return ry(d,o,n,s,i,!1),d},iy=(e,o,n,s,i,d)=>{const h=[],v=ay(e.getDoc(),n,d,s,i),w=Xn(),k=()=>{w.clear()},M=()=>w.get().getOrThunk(()=>{const U=Km(v);return h.push(U),w.set(U),U}),H=U=>{Ce(U,I)},I=U=>{switch(Go(e,U,"span",tn(U))){case"invalid-child":{k();const W=us(U);H(W),k();break}case"valid-block":{k(),ry(U,n,d,s,i,!0);break}case"valid":{const W=M();Ft(U,W);break}}},$=U=>{const W=$t(U,K.fromDom);H(W)};return fh(e.dom,o,U=>{k(),$(U)}),h},NC=(e,o,n,s)=>{e.undoManager.transact(()=>{const i=e.selection,d=i.getRng(),h=ch(e).length>0,v=Tp("mce-annotation");if(d.collapsed&&!h&&Zu(e,d),i.getRng().collapsed&&!h){const w=ay(e.getDoc(),v,s,o,n.decorate);ap(w,vn),i.getRng().insertNode(w.dom),i.select(w.dom)}else OC(i,!1,()=>{Xb(e,w=>{iy(e,w,v,o,n.decorate,s)})})})},E0=e=>{const o=cw();lw(e,o);const n=uk(e,o),s=_g("span"),i=d=>{Ce(d,h=>{s(h)?no(h):sy(h)})};return{register:(d,h)=>{o.register(d,h)},annotate:(d,h)=>{o.lookup(d).each(v=>{NC(e,d,v,h)})},annotationChanged:(d,h)=>{n.addListener(d,h)},remove:d=>{rb(e,B.some(d)).each(({elements:h})=>{const v=e.selection.getBookmark();i(h),e.selection.moveToBookmark(v)})},removeAll:d=>{const h=e.selection.getBookmark();nt(iw(e,d),(v,w)=>{i(v)}),e.selection.moveToBookmark(h)},getAll:d=>{const h=iw(e,d);return wo(h,v=>$t(v,w=>w.dom))}}},sf=e=>({getBookmark:Me(SC,e),moveToBookmark:Me(r3,e)});sf.isBookmarkNode=Yt;const ig=(e,o,n)=>n.collapsed?!1:Wo(n.getClientRects(),s=>hw(s,e,o)),vh=(e,o)=>e.dispatch("PreProcess",o),ly=(e,o)=>e.dispatch("PostProcess",o),cy=e=>{e.dispatch("remove")},wl=e=>{e.dispatch("detach")},Uu=(e,o)=>{e.dispatch("SwitchMode",{mode:o})},c3=(e,o,n,s,i)=>{e.dispatch("ObjectResizeStart",{target:o,width:n,height:s,origin:i})},af=(e,o,n,s,i)=>{e.dispatch("ObjectResized",{target:o,width:n,height:s,origin:i})},d3=e=>{e.dispatch("PreInit")},ui=e=>{e.dispatch("PostRender")},ra=e=>{e.dispatch("Init")},bh=(e,o)=>{e.dispatch("PlaceholderToggle",{state:o})},RC=(e,o,n)=>{e.dispatch(o,n)},LC=(e,o,n,s)=>{e.dispatch("FormatApply",{format:o,node:n,vars:s})},uo=(e,o,n,s)=>{e.dispatch("FormatRemove",{format:o,node:n,vars:s})},u3=(e,o)=>e.dispatch("BeforeSetContent",o),lf=(e,o)=>e.dispatch("SetContent",o),dy=(e,o)=>e.dispatch("BeforeGetContent",o),HC=(e,o)=>e.dispatch("GetContent",o),m3=(e,o)=>{e.dispatch("AutocompleterStart",o)},g3=(e,o)=>{e.dispatch("AutocompleterUpdate",o)},h3=e=>{e.dispatch("AutocompleterEnd")},p3=(e,o,n)=>e.dispatch("PastePreProcess",{content:o,internal:n}),f3=(e,o,n)=>e.dispatch("PastePostProcess",{node:o,internal:n}),cf=(e,o)=>e.dispatch("PastePlainTextToggle",{state:o}),O0=(e,o)=>e.dispatch("EditableRootStateChange",{state:o}),dt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||dt.metaKeyPressed(e),metaKeyPressed:e=>ae.os.isMacOS()||ae.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},lg="data-mce-selected",v3="table,img,figure.image,hr,video,span.mce-preview-object,details",df=Math.abs,Tt=Math.round,T0={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},b3=e=>e.type==="longpress"||e.type.indexOf("touch")===0,PC=(e,o)=>{const n=o.dom,s=o.getDoc(),i=document,d=o.getBody();let h,v,w,k,M,H,I,$,U,W,j,te,de,ue,Ae,$e,Ye;const Ie=Le=>xe(Le)&&(zv(Le)||n.is(Le,"figure.image")),Ee=Le=>Dr(Le)||n.hasClass(Le,"mce-preview-object"),ye=(Le,t)=>{if(b3(Le)){const r=Le.touches[0];return Ie(Le.target)&&!ig(r.clientX,r.clientY,t)}else return Ie(Le.target)&&!ig(Le.clientX,Le.clientY,t)},Fe=Le=>{const t=Le.target;ye(Le,o.selection.getRng())&&!Le.isDefaultPrevented()&&o.selection.select(t)},ft=Le=>n.hasClass(Le,"mce-preview-object")&&xe(Le.firstElementChild)?[Le,Le.firstElementChild]:n.is(Le,"figure.image")?[Le.querySelector("img")]:[Le],ve=Le=>{const t=Pw(o);return!t||Le.getAttribute("data-mce-resize")==="false"||Le===o.getBody()?!1:n.hasClass(Le,"mce-preview-object")&&xe(Le.firstElementChild)?Za(K.fromDom(Le.firstElementChild),t):Za(K.fromDom(Le),t)},et=Le=>Ee(Le)?n.create("img",{src:ae.transparentSrc}):Le.cloneNode(!0),bt=(Le,t,r)=>{if(xe(r)){const a=ft(Le);Ce(a,l=>{l.style[t]||!o.schema.isValid(l.nodeName.toLowerCase(),t)?n.setStyle(l,t,r):n.setAttrib(l,t,""+r)})}},Jt=(Le,t,r)=>{bt(Le,"width",t),bt(Le,"height",r)},bo=Le=>{let t,r,a,l,u;t=Le.screenX-H,r=Le.screenY-I,ue=t*k[2]+W,Ae=r*k[3]+j,ue=ue<5?5:ue,Ae=Ae<5?5:Ae,(Ie(h)||Ee(h))&&_b(o)!==!1?a=!dt.modifierPressed(Le):a=dt.modifierPressed(Le),a&&(df(t)>df(r)?(Ae=Tt(ue*te),ue=Tt(Ae/te)):(ue=Tt(Ae/te),Ae=Tt(ue*te))),Jt(v,ue,Ae),l=k.startPos.x+t,u=k.startPos.y+r,l=l>0?l:0,u=u>0?u:0,n.setStyles(w,{left:l,top:u,display:"block"}),w.innerHTML=ue+" &times; "+Ae,k[2]<0&&v.clientWidth<=ue&&n.setStyle(v,"left",$+(W-ue)),k[3]<0&&v.clientHeight<=Ae&&n.setStyle(v,"top",U+(j-Ae)),t=d.scrollWidth-$e,r=d.scrollHeight-Ye,t+r!==0&&n.setStyles(w,{left:l-t,top:u-r}),de||(c3(o,h,W,j,"corner-"+k.name),de=!0)},ia=()=>{const Le=de;de=!1,Le&&(bt(h,"width",ue),bt(h,"height",Ae)),n.unbind(s,"mousemove",bo),n.unbind(s,"mouseup",ia),i!==s&&(n.unbind(i,"mousemove",bo),n.unbind(i,"mouseup",ia)),n.remove(v),n.remove(w),n.remove(M),yi(h),Le&&(af(o,h,ue,Ae,"corner-"+k.name),n.setAttrib(h,"style",n.getAttrib(h,"style"))),o.nodeChanged()},yi=Le=>{gr();const t=n.getPos(Le,d),r=t.x,a=t.y,l=Le.getBoundingClientRect(),u=l.width||l.right-l.left,g=l.height||l.bottom-l.top;h!==Le&&(wi(),h=Le,ue=Ae=0);const f=o.dispatch("ObjectSelected",{target:Le});ve(Le)&&!f.isDefaultPrevented()?nt(T0,(y,C)=>{const _=D=>{const R=ft(h)[0];H=D.screenX,I=D.screenY,W=R.clientWidth,j=R.clientHeight,te=j/W,k=y,k.name=C,k.startPos={x:u*y[0]+r,y:g*y[1]+a},$e=d.scrollWidth,Ye=d.scrollHeight,M=n.add(d,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=et(h),n.addClass(v,"mce-clonedresizable"),n.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",n.setStyles(v,{left:r,top:a,margin:0}),Jt(v,u,g),v.removeAttribute(lg),d.appendChild(v),n.bind(s,"mousemove",bo),n.bind(s,"mouseup",ia),i!==s&&(n.bind(i,"mousemove",bo),n.bind(i,"mouseup",ia)),w=n.add(d,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},W+" &times; "+j)};let T=n.get("mceResizeHandle"+C);T&&n.remove(T),T=n.add(d,"div",{id:"mceResizeHandle"+C,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+C+"-resize; margin:0; padding:0"}),n.bind(T,"mousedown",D=>{D.stopImmediatePropagation(),D.preventDefault(),_(D)}),y.elm=T,n.setStyles(T,{left:u*y[0]+r-T.offsetWidth/2,top:g*y[1]+a-T.offsetHeight/2})}):wi(!1)},wa=N1(yi,0),wi=(Le=!0)=>{wa.cancel(),gr(),h&&Le&&h.removeAttribute(lg),nt(T0,(t,r)=>{const a=n.get("mceResizeHandle"+r);a&&(n.unbind(a),n.remove(a))})},No=(Le,t)=>n.isChildOf(Le,t),gc=Le=>{if(de||o.removed||o.composing)return;const t=Le.type==="mousedown"?Le.target:e.getNode(),r=ml(K.fromDom(t),v3).map(l=>l.dom).filter(l=>n.isEditable(l.parentElement)).getOrUndefined(),a=xe(r)?n.getAttrib(r,lg,"1"):"1";if(Ce(n.select(`img[${lg}],hr[${lg}]`),l=>{l.removeAttribute(lg)}),xe(r)&&No(r,d)&&o.hasFocus()){Ht();const l=e.getStart(!0);if(No(l,r)&&No(e.getEnd(!0),r)){n.setAttrib(r,lg,a),wa.throttle(r);return}}wi()},gr=()=>{nt(T0,Le=>{Le.elm&&(n.unbind(Le.elm),delete Le.elm)})},Ht=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{Ht(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",gc),o.on("keyup compositionend",Le=>{h&&h.nodeName==="TABLE"&&gc(Le)}),o.on("hide blur",wi),o.on("contextmenu longpress",Fe,!0)}),o.on("remove",gr),{isResizable:ve,showResizeRect:yi,hideResizeRect:wi,updateResizeRect:gc,destroy:()=>{wa.cancel(),h=v=M=null}}},cg=(e,o)=>{o.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},BC=(e,o)=>{o.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},uy=(e,o,n)=>{const s=e.document.createRange();return cg(s,o),BC(s,n),s},A0=(e,o,n,s,i)=>{const d=e.document.createRange();return d.setStart(o.dom,n),d.setEnd(s.dom,i),d},uf=Jl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),D0=(e,o,n)=>o(K.fromDom(n.startContainer),n.startOffset,K.fromDom(n.endContainer),n.endOffset),my=(e,o)=>o.match({domRange:n=>({ltr:Be(n),rtl:B.none}),relative:(n,s)=>({ltr:Ia(()=>uy(e,n,s)),rtl:Ia(()=>B.some(uy(e,s,n)))}),exact:(n,s,i,d)=>({ltr:Ia(()=>A0(e,n,s,i,d)),rtl:Ia(()=>B.some(A0(e,i,d,n,s)))})}),IC=(e,o)=>{const n=o.ltr();return n.collapsed?o.rtl().filter(s=>s.collapsed===!1).map(s=>uf.rtl(K.fromDom(s.endContainer),s.endOffset,K.fromDom(s.startContainer),s.startOffset)).getOrThunk(()=>D0(e,uf.ltr,n)):D0(e,uf.ltr,n)},FC=(e,o)=>{const n=my(e,o);return IC(e,n)};uf.ltr,uf.rtl;const gy={create:(e,o,n,s)=>({start:e,soffset:o,finish:n,foffset:s})},VC=(e,o,n)=>{var s,i;return B.from((i=(s=e.dom).caretPositionFromPoint)===null||i===void 0?void 0:i.call(s,o,n)).bind(d=>{if(d.offsetNode===null)return B.none();const h=e.dom.createRange();return h.setStart(d.offsetNode,d.offset),h.collapse(),B.some(h)})},hy=(e,o,n)=>{var s,i;return B.from((i=(s=e.dom).caretRangeFromPoint)===null||i===void 0?void 0:i.call(s,o,n))},zC=(()=>document.caretPositionFromPoint?VC:document.caretRangeFromPoint?hy:B.none)(),ZC=(e,o,n)=>{const s=K.fromDom(e.document);return zC(s,o,n).map(i=>gy.create(K.fromDom(i.startContainer),i.startOffset,K.fromDom(i.endContainer),i.endOffset))},py=Jl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),y3=(e,o,n,s)=>e.fold(o,n,s),xo=e=>e.fold(go,go,go),w3=py.before,Rd=py.on,zc=py.after,Ui={before:w3,on:Rd,after:zc,cata:y3,getStart:xo},sa=Jl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),M0=e=>sa.exact(e.start,e.soffset,e.finish,e.foffset),mf=e=>e.match({domRange:o=>K.fromDom(o.startContainer),relative:(o,n)=>Ui.getStart(o),exact:(o,n,s,i)=>o}),gf=sa.domRange,Wu=sa.relative,C3=sa.exact,x3=e=>{const o=mf(e);return du(o)},S3=gy.create,yh={domRange:gf,relative:Wu,exact:C3,exactFromRange:M0,getWin:x3,range:S3},co=(e,o)=>{const n=tn(e);return n==="input"?Ui.after(e):Ut(["br","img"],n)?o===0?Ui.before(e):Ui.after(e):Ui.on(e,o)},oc=(e,o)=>{const n=e.fold(Ui.before,co,Ui.after),s=o.fold(Ui.before,co,Ui.after);return yh.relative(n,s)},c=(e,o,n,s)=>{const i=co(e,o),d=co(n,s);return yh.relative(i,d)},m=e=>e.match({domRange:o=>{const n=K.fromDom(o.startContainer),s=K.fromDom(o.endContainer);return c(n,o.startOffset,s,o.endOffset)},relative:oc,exact:c}),p=(e,o)=>{const n=(o||document).createDocumentFragment();return Ce(e,s=>{n.appendChild(s.dom)}),K.fromDom(n)},b=e=>{const o=yh.getWin(e).dom,n=(i,d,h,v)=>A0(o,i,d,h,v),s=m(e);return FC(o,s).match({ltr:n,rtl:n})},x=(e,o,n)=>ZC(e,o,n),O=(e,o,n)=>{const s=du(K.fromDom(n));return x(s.dom,e,o).map(i=>{const d=n.createRange();return d.setStart(i.start.dom,i.soffset),d.setEnd(i.finish.dom,i.foffset),d}).getOrUndefined()},N=(e,o)=>xe(e)&&xe(o)&&e.startContainer===o.startContainer&&e.startOffset===o.startOffset&&e.endContainer===o.endContainer&&e.endOffset===o.endOffset,F=(e,o,n)=>{let s=e;for(;s&&s!==o;){if(n(s))return s;s=s.parentNode}return null},X=(e,o,n)=>F(e,o,n)!==null,ie=(e,o,n)=>X(e,o,s=>s.nodeName===n),we=(e,o)=>ea(e)&&!X(e,o,Qn),Se=(e,o,n)=>{const s=o.parentNode;if(s){const i=new Ar(o,e.getParent(s,e.isBlock)||e.getRoot());let d;for(;d=i[n?"prev":"next"]();)if(fo(d))return!0}return!1},ut=(e,o)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===o},Ke=(e,o)=>{let n=o;for(;n&&n!==e;){if(po(n))return!0;n=n.parentNode}return!1},We=(e,o,n,s,i)=>{const d=e.getRoot(),h=e.schema.getNonEmptyElements(),v=i.parentNode;let w,k;if(!v)return B.none();const M=e.getParent(v,e.isBlock)||d;if(s&&fo(i)&&o&&e.isEmpty(M))return B.some(ce(v,e.nodeIndex(i)));const H=new Ar(i,M);for(;k=H[s?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||we(k,d))return B.none();if(Ve(k)&&k.data.length>0)return ie(k,d,"A")?B.none():B.some(ce(k,s?k.data.length:0));if(e.isBlock(k)||h[k.nodeName.toLowerCase()])return B.none();w=k}return Js(w)?B.none():n&&w?B.some(ce(w,0)):B.none()},Dt=(e,o,n,s)=>{const i=e.getRoot();let d,h=!1,v=n?s.startContainer:s.endContainer,w=n?s.startOffset:s.endOffset;const k=gt(v)&&w===v.childNodes.length,M=e.schema.getNonEmptyElements();let H=n;if(ea(v))return B.none();if(gt(v)&&w>v.childNodes.length-1&&(H=!1),Os(v)&&(v=i,w=0),v===i){if(H&&(d=v.childNodes[w>0?w-1:0],d&&(ea(d)||M[d.nodeName]||Wa(d))))return B.none();if(v.hasChildNodes()){if(w=Math.min(!H&&w>0?w-1:w,v.childNodes.length-1),v=v.childNodes[w],w=Ve(v)&&k?v.data.length:0,!o&&v===i.lastChild&&Wa(v)||Ke(i,v)||ea(v))return B.none();if(v.hasChildNodes()&&!Wa(v)){d=v;const I=new Ar(v,i);do{if(po(d)||ea(d)){h=!1;break}if(Ve(d)&&d.data.length>0){w=H?0:d.data.length,v=d,h=!0;break}if(M[d.nodeName.toLowerCase()]&&!Re(d)){w=e.nodeIndex(d),v=d.parentNode,H||w++,h=!0;break}}while(d=H?I.next():I.prev())}}}return o&&(Ve(v)&&w===0&&We(e,k,o,!0,v).each(I=>{v=I.container(),w=I.offset(),h=!0}),gt(v)&&(d=v.childNodes[w],d||(d=v.childNodes[w-1]),d&&fo(d)&&!ut(d,"A")&&!Se(e,d,!1)&&!Se(e,d,!0)&&We(e,k,o,!0,d).each(I=>{v=I.container(),w=I.offset(),h=!0}))),H&&!o&&Ve(v)&&w===v.data.length&&We(e,k,o,!1,v).each(I=>{v=I.container(),w=I.offset(),h=!0}),h&&v?B.some(ce(v,w)):B.none()},it=(e,o)=>{const n=o.collapsed,s=o.cloneRange(),i=ce.fromRangeStart(o);return Dt(e,n,!0,s).each(d=>{(!n||!ce.isAbove(i,d))&&s.setStart(d.container(),d.offset())}),n||Dt(e,n,!1,s).each(d=>{s.setEnd(d.container(),d.offset())}),n&&s.collapse(!0),N(o,s)?B.none():B.some(s)},Zt=(e,o)=>e.splitText(o),Qt=e=>{let o=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset;if(o===s&&Ve(o)){if(n>0&&n<o.data.length)if(s=Zt(o,n),o=s.previousSibling,i>n){i=i-n;const d=Zt(s,i).previousSibling;o=s=d,i=d.data.length,n=0}else i=0}else if(Ve(o)&&n>0&&n<o.data.length&&(o=Zt(o,n),n=0),Ve(s)&&i>0&&i<s.data.length){const d=Zt(s,i).previousSibling;s=d,i=d.data.length}return{startContainer:o,startOffset:n,endContainer:s,endOffset:i}},Qo=e=>({walk:(o,n)=>fh(e,o,n),split:Qt,expand:(o,n={type:"word"})=>{if(n.type==="word"){const s=zu(e,o,[{inline:"span"}]),i=e.createRng();return i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),i}return o},normalize:o=>it(e,o).fold(Ne,n=>(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),!0))});Qo.compareRanges=N,Qo.getCaretRangeFromPoint=O,Qo.getSelectedNode=Ou,Qo.getNode=_d;const ya=((e,o)=>{const n=(h,v)=>{if(!bs(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const w=h.dom;Om(w)&&(w.style[e]=v+"px")},s=h=>{const v=o(h);if(v<=0||v===null){const w=Ni(h,e);return parseFloat(w)||0}return v},i=s,d=(h,v)=>_n(v,(w,k)=>{const M=Ni(h,k),H=M===void 0?0:parseInt(M,10);return isNaN(H)?w:w+H},0);return{set:n,get:s,getOuter:i,aggregate:d,max:(h,v,w)=>{const k=d(h,w);return v>k?v-k:0}}})("height",e=>{const o=e.dom;return dd(e)?o.getBoundingClientRect().height:o.offsetHeight}),ps=e=>ya.get(e),Zc=()=>K.fromDom(document),Uc=(e,o)=>e.view(o).fold(Be([]),n=>{const s=e.owner(n),i=Uc(e,s);return[n].concat(i)}),ju=(e,o)=>{const n=o.owner(e);return Uc(o,n)};var Vo=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?B.none():B.from((o=e.dom.defaultView)===null||o===void 0?void 0:o.frameElement)).map(K.fromDom)},owner:e=>Mi(e)});const Ws=e=>{const o=Zc(),n=d1(o),s=ju(e,Vo),i=c1(e),d=El(s,(h,v)=>{const w=c1(v);return{left:h.left+w.left,top:h.top+w.top}},{left:0,top:0});return Ul(d.left+i.left+n.left,d.top+i.top+n.top)},Rr=e=>tn(e)==="textarea",Ya=(e,o)=>e.dispatch("ScrollIntoView",o).isDefaultPrevented(),Wc=(e,o)=>{e.dispatch("AfterScrollIntoView",o)},jc=(e,o)=>{const n=us(e);if(n.length===0||Rr(e))return{element:e,offset:o};if(o<n.length&&!Rr(n[o]))return{element:n[o],offset:0};{const s=n[n.length-1];return Rr(s)?{element:e,offset:o}:tn(s)==="img"?{element:s,offset:1}:Lo(s)?{element:s,offset:ga(s).length}:{element:s,offset:us(s).length}}},Ha=(e,o)=>{const n=D2(e),s=ps(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:o}},N0=(e,o)=>{const n=jc(e,o),s=K.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+qn+"</span>");return He(n.element,s),Ha(s,()=>Ho(s))},hf=e=>Ha(K.fromDom(e),De),Cl=(e,o,n,s)=>{WC(e,(i,d)=>UC(e,o,n,s),n)},fs=(e,o,n,s,i)=>{const d={elm:s.element.dom,alignToTop:i};if(Ya(e,d))return;const h=d1(o).top;n(e,o,h,s,i),Wc(e,d)},UC=(e,o,n,s)=>{const i=K.fromDom(e.getBody()),d=K.fromDom(e.getDoc());ee(i);const h=N0(K.fromDom(n.startContainer),n.startOffset);fs(e,d,o,h,s),h.cleanup()},fy=(e,o,n,s)=>{const i=K.fromDom(e.getDoc());fs(e,i,n,hf(o),s)},WC=(e,o,n)=>{const s=n.startContainer,i=n.startOffset,d=n.endContainer,h=n.endOffset;o(K.fromDom(s),K.fromDom(d));const v=e.dom.createRng();v.setStart(s,i),v.setEnd(d,h),e.selection.setRng(n)},vy=(e,o,n,s,i)=>{const d=o.pos;if(s)Pv(d.left,d.top,i);else{const h=d.top-n+o.height;Pv(-e.getBody().getBoundingClientRect().left,h,i)}},jC=(e,o,n,s,i,d)=>{const h=s+n,v=i.pos.top,w=i.bottom,k=w-v>=s;v<n?vy(e,i,s,d!==!1,o):v>h?vy(e,i,s,k?d!==!1:d===!0,o):w>h&&!k&&vy(e,i,s,d===!0,o)},R0=(e,o,n,s,i)=>{const d=du(o).dom.innerHeight;jC(e,o,n,d,s,i)},$C=(e,o,n,s,i)=>{const d=du(o).dom.innerHeight;jC(e,o,n,d,s,i);const h=Ws(s.element),v=ua(window);h.top<v.y?Bv(s.element,i!==!1):h.top>v.bottom&&Bv(s.element,i===!0)},pf=(e,o,n)=>Cl(e,R0,o,n),DL=(e,o,n)=>fy(e,o,R0,n),ML=(e,o,n)=>Cl(e,$C,o,n),NL=(e,o,n)=>fy(e,o,$C,n),GC=(e,o,n)=>{(e.inline?DL:NL)(e,o,n)},L0=(e,o,n)=>{(e.inline?pf:ML)(e,o,n)},W5=e=>e.dom.focus(),k3=e=>{const o=ul(e).dom;return e.dom===o.activeElement},KC=(e=Zc())=>B.from(e.dom.activeElement).map(K.fromDom),RL=e=>KC(ul(e)).filter(o=>e.dom.contains(o.dom)),j5=(e,o)=>{const n=Lo(o)?ga(o).length:us(o).length+1;return e>n?n:e<0?0:e},LL=e=>yh.range(e.start,j5(e.soffset,e.start),e.finish,j5(e.foffset,e.finish)),$5=(e,o)=>!ma(o.dom)&&(zl(e,o)||To(e,o)),G5=e=>o=>$5(e,o.start)&&$5(e,o.finish),K5=e=>e.inline||ae.browser.isFirefox(),q5=e=>yh.range(K.fromDom(e.startContainer),e.startOffset,K.fromDom(e.endContainer),e.endOffset),qC=e=>{const o=e.getSelection();return(!o||o.rangeCount===0?B.none():B.from(o.getRangeAt(0))).map(q5)},HL=e=>{const o=du(e);return qC(o.dom).filter(G5(e))},PL=(e,o)=>B.from(o).filter(G5(e)).map(LL),_3=e=>{const o=document.createRange();try{return o.setStart(e.start.dom,e.soffset),o.setEnd(e.finish.dom,e.foffset),B.some(o)}catch{return B.none()}},E3=e=>{const o=K5(e)?HL(K.fromDom(e.getBody())):B.none();e.bookmark=o.isSome()?o:e.bookmark},XC=e=>(e.bookmark?e.bookmark:B.none()).bind(o=>PL(K.fromDom(e.getBody()),o)).bind(_3),X5=e=>{XC(e).each(o=>e.selection.setRng(o))},O3={isEditorUIElement:e=>{const o=e.className.toString();return o.indexOf("tox-")!==-1||o.indexOf("mce-")!==-1}},BL=(e,o)=>(bs(o)||(o=0),setTimeout(e,o)),IL=(e,o)=>(bs(o)||(o=0),setInterval(e,o)),nc={setEditorTimeout:(e,o,n)=>BL(()=>{e.removed||o()},n),setEditorInterval:(e,o,n)=>{const s=IL(()=>{e.removed?clearInterval(s):o()},n);return s}},FL=e=>e.type==="nodechange"&&e.selectionChange,YC=(e,o)=>{const n=()=>{o.throttle()};nn.DOM.bind(document,"mouseup",n),e.on("remove",()=>{nn.DOM.unbind(document,"mouseup",n)})},Y5=(e,o)=>{e.on("mouseup touchend",n=>{o.throttle()})},Q5=(e,o)=>{Y5(e,o),e.on("keyup NodeChange AfterSetSelectionRange",n=>{FL(n)||E3(e)})},J5=e=>{const o=N1(()=>{E3(e)},0);e.on("init",()=>{e.inline&&YC(e,o),Q5(e,o)}),e.on("remove",()=>{o.cancel()})};let ff;const T3=nn.DOM,VL=e=>gt(e)&&O3.isEditorUIElement(e),A3=e=>{const o=e.classList;return o!==void 0?o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"):!1},QC=(e,o)=>{const n=Bw(e);return T3.getParent(o,s=>VL(s)||(n?e.dom.is(s,n):!1))!==null},D3=e=>{try{const o=ul(K.fromDom(e.getElement()));return KC(o).fold(()=>document.body,n=>n.dom)}catch{return document.body}},zL=(e,o)=>{const n=o.editor;J5(n);const s=(i,d)=>{if(zp(i)&&i.inline!==!0){const h=K.fromDom(i.getContainer());d(h,"tox-edit-focus")}};n.on("focusin",()=>{const i=e.focusedEditor;A3(D3(n))&&s(n,Sc),i!==n&&(i&&i.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:i}),n.focus(!0))}),n.on("focusout",()=>{nc.setEditorTimeout(n,()=>{const i=e.focusedEditor;(!A3(D3(n))||i!==n)&&s(n,iu),!QC(n,D3(n))&&i===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ff||(ff=i=>{const d=e.activeEditor;d&&Mg(i).each(h=>{const v=h;v.ownerDocument===document&&v!==document.body&&!QC(d,v)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},T3.bind(document,"focusin",ff))},ZL=(e,o)=>{e.focusedEditor===o.editor&&(e.focusedEditor=null),!e.activeEditor&&ff&&(T3.unbind(document,"focusin",ff),ff=null)},UL=e=>{e.on("AddEditor",Me(zL,e)),e.on("RemoveEditor",Me(ZL,e))},WL=(e,o)=>e.dom.getParent(o,n=>e.dom.getContentEditable(n)==="true"),jL=e=>e.collapsed?B.from(_d(e.startContainer,e.startOffset)).map(K.fromDom):B.none(),$L=(e,o)=>jL(o).bind(n=>Lt(n)?B.some(n):zl(e,n)?B.none():B.some(e)),eA=(e,o)=>{$L(K.fromDom(e.getBody()),o).bind(n=>yr(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},H0=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},tA=e=>k3(e)||RL(e).isSome(),oA=e=>xe(e.iframeElement)&&k3(K.fromDom(e.iframeElement)),GL=e=>{const o=e.getBody();return o&&tA(K.fromDom(o))},KL=e=>{const o=ul(K.fromDom(e.getElement()));return KC(o).filter(n=>!A3(n.dom)&&QC(e,n.dom)).isSome()},vf=e=>e.inline?GL(e):oA(e),qL=e=>vf(e)||KL(e),XL=e=>{const o=e.selection,n=e.getBody();let s=o.getRng();e.quirks.refreshContentEditable(),xe(e.bookmark)&&!vf(e)&&XC(e).each(d=>{e.selection.setRng(d),s=d});const i=WL(e,o.getNode());if(i&&e.dom.isChildOf(i,n)){H0(i),eA(e,s),M3(e);return}e.inline||(ae.browser.isOpera()||H0(n),e.getWin().focus()),(ae.browser.isFirefox()||e.inline)&&(H0(n),eA(e,s)),M3(e)},M3=e=>e.editorManager.setActive(e),nA=(e,o)=>{e.removed||(o?M3(e):XL(e))},rA=(e,o,n,s,i)=>{const d=n?o.startContainer:o.endContainer,h=n?o.startOffset:o.endOffset;return B.from(d).map(K.fromDom).map(v=>!s||!o.collapsed?ks(v,i(v,h)).getOr(v):v).bind(v=>da(v)?B.some(v):Ua(v).filter(da)).map(v=>v.dom).getOr(e)},N3=(e,o,n=!1)=>rA(e,o,!0,n,(s,i)=>Math.min(gu(s),i)),R3=(e,o,n=!1)=>rA(e,o,!1,n,(s,i)=>i>0?i-1:i),sA=(e,o)=>{const n=e;for(;e&&Ve(e)&&e.length===0;)e=o?e.nextSibling:e.previousSibling;return e||n},YL=(e,o)=>{if(!o)return e;let n=o.startContainer,s=o.endContainer;const i=o.startOffset,d=o.endOffset;let h=o.commonAncestorContainer;o.collapsed||(n===s&&d-i<2&&n.hasChildNodes()&&(h=n.childNodes[i]),Ve(n)&&Ve(s)&&(n.length===i?n=sA(n.nextSibling,!0):n=n.parentNode,d===0?s=sA(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(h=n)));const v=Ve(h)?h.parentNode:h;return gt(v)?v:e},QL=(e,o,n,s)=>{const i=[],d=e.getRoot(),h=e.getParent(n||N3(d,o,o.collapsed),e.isBlock),v=e.getParent(s||R3(d,o,o.collapsed),e.isBlock);if(h&&h!==d&&i.push(h),h&&v&&h!==v){let w;const k=new Ar(h,d);for(;(w=k.next())&&w!==v;)e.isBlock(w)&&i.push(w)}return v&&h!==v&&v!==d&&i.push(v),i},JL=(e,o,n)=>B.from(o).bind(s=>B.from(s.parentNode).map(i=>{const d=e.nodeIndex(s),h=e.createRng();return h.setStart(i,d),h.setEnd(i,d+1),n&&(qb(e,h,s,!0),qb(e,h,s,!1)),h})),L3=(e,o)=>$t(o,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),eH=e=>tn(e)==="img"?1:_o(e).fold(()=>us(e).length,o=>o.length),tH=e=>_o(e).filter(o=>o.trim().length!==0||o.indexOf(vn)>-1).isSome(),oH=e=>ll(e)&&Nn(e,"contenteditable")==="false",nH=["img","br"],aA=e=>tH(e)||Ut(nH,tn(e))||oH(e),rH=e=>Is(e,aA),sH=e=>aH(e,aA),aH=(e,o)=>{const n=s=>{const i=us(s);for(let d=i.length-1;d>=0;d--){const h=i[d];if(o(h))return B.some(h);const v=n(h);if(v.isSome())return v}return B.none()};return n(e)},iA="[data-mce-autocompleter]",iH=(e,o)=>{if(lA(K.fromDom(e.getBody())).isNone()){const n=K.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());ot(n,K.fromDom(o.extractContents())),o.insertNode(n.dom),Ua(n).each(s=>s.dom.normalize()),sH(n).map(s=>{e.selection.setCursorLocation(s.dom,eH(s))})}},lH=e=>ml(e,iA),lA=e=>ud(e,iA),cH=(e,o)=>lA(o).each(n=>{const s=e.selection.getBookmark();no(n),e.selection.moveToBookmark(s)}),dH={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ct=(e,o,n)=>{const s=n?"lastChild":"firstChild",i=n?"prev":"next";if(e[s])return e[s];if(e!==o){let d=e[i];if(d)return d;for(let h=e.parent;h&&h!==o;h=h.parent)if(d=h[i],d)return d}},cA=e=>{var o;const n=(o=e.value)!==null&&o!==void 0?o:"";if(!Gl(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},H3=e=>{const o=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||o};class mi{static create(o,n){const s=new mi(o,dH[o]||1);return n&&nt(n,(i,d)=>{s.attr(d,i)}),s}constructor(o,n){this.name=o,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(o){const n=this;return o.parent&&o.remove(),n.insert(o,n),n.remove(),n}attr(o,n){const s=this;if(!G(o))return xe(o)&&nt(o,(d,h)=>{s.attr(h,d)}),s;const i=s.attributes;if(i){if(n!==void 0){if(n===null){if(o in i.map){delete i.map[o];let d=i.length;for(;d--;)if(i[d].name===o)return i.splice(d,1),s}return s}if(o in i.map){let d=i.length;for(;d--;)if(i[d].name===o){i[d].value=n;break}}else i.push({name:o,value:n});return i.map[o]=n,s}return i.map[o]}}clone(){const o=this,n=new mi(o.name,o.type),s=o.attributes;if(s){const i=[];i.map={};for(let d=0,h=s.length;d<h;d++){const v=s[d];v.name!=="id"&&(i[i.length]={name:v.name,value:v.value},i.map[v.name]=v.value)}n.attributes=i}return n.value=o.value,n}wrap(o){const n=this;return n.parent&&(n.parent.insert(o,n),o.append(n)),n}unwrap(){const o=this;for(let n=o.firstChild;n;){const s=n.next;o.insert(n,o,!0),n=s}o.remove()}remove(){const o=this,n=o.parent,s=o.next,i=o.prev;return n&&(n.firstChild===o?(n.firstChild=s,s&&(s.prev=null)):i&&(i.next=s),n.lastChild===o?(n.lastChild=i,i&&(i.next=null)):s&&(s.prev=i),o.parent=o.next=o.prev=null),o}append(o){const n=this;o.parent&&o.remove();const s=n.lastChild;return s?(s.next=o,o.prev=s,n.lastChild=o):n.lastChild=n.firstChild=o,o.parent=n,o}insert(o,n,s){o.parent&&o.remove();const i=n.parent||this;return s?(n===i.firstChild?i.firstChild=o:n.prev&&(n.prev.next=o),o.prev=n.prev,o.next=n,n.prev=o):(n===i.lastChild?i.lastChild=o:n.next&&(n.next.prev=o),o.next=n.next,o.prev=n,n.next=o),o.parent=i,o}getAll(o){const n=this,s=[];for(let i=n.firstChild;i;i=Ct(i,n))i.name===o&&s.push(i);return s}children(){const o=this,n=[];for(let s=o.firstChild;s;s=s.next)n.push(s);return n}empty(){const o=this;if(o.firstChild){const n=[];for(let i=o.firstChild;i;i=Ct(i,o))n.push(i);let s=n.length;for(;s--;){const i=n[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,n={},s){var i;const d=this;let h=d.firstChild;if(H3(d))return!1;if(h)do{if(h.type===1){if(h.attr("data-mce-bogus"))continue;if(o[h.name]||H3(h))return!1}if(h.type===8||h.type===3&&!cA(h)||h.type===3&&h.parent&&n[h.parent.name]&&Gl((i=h.value)!==null&&i!==void 0?i:"")||s&&s(h))return!1}while(h=Ct(h,d));return!0}walk(o){return Ct(this,null,o)}}const JC=e=>`${e.length===0?"":`${$t(e,o=>`[${o}]`).join(",")},`}[data-mce-bogus="all"]`,uH=(e,o)=>e.querySelectorAll(JC(o)),dA=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,null),mH=e=>dA(e).nextNode()!==null,uA=(e,o)=>e.querySelector(JC(o))!==null,mA=(e,o)=>{Ce(uH(e,o),n=>{const s=K.fromDom(n);Nn(s,"data-mce-bogus")==="all"?Ho(s):Ce(o,i=>{Di(s,i)&&Fr(s,i)})})},ex=e=>{const o=dA(e);let n=o.nextNode();for(;n!==null;){const s=o.currentNode;n=o.nextNode(),G(s.nodeValue)&&s.nodeValue.includes(qn)&&Ho(K.fromDom(s))}},P3=e=>e.cloneNode(!0),gA=(e,o)=>{let n=e;return mH(e)?(n=P3(e),ex(n),uA(n,o)&&mA(n,o)):uA(e,o)&&(n=P3(e),mA(n,o)),n},Wt=e=>{const o=zr(e,"[data-mce-bogus]");Ce(o,n=>{Nn(n,"data-mce-bogus")==="all"?Ho(n):zn(n)?(He(n,K.fromText(Rg)),Ho(n)):no(n)})},hA=e=>{const o=zr(e,"input");Ce(o,n=>{Fr(n,"name")})},qt=(e,o)=>{const n=ns(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return o.replace(s,"")},pA=(e,o)=>{const n=e.getDoc(),s=ul(K.fromDom(e.getBody())),i=K.fromTag("div",n);En(i,"data-mce-bogus","all"),Am(i,{position:"fixed",left:"-9999999px",top:"0"}),ap(i,o.innerHTML),Wt(i),hA(i);const d=Ag(s);ot(d,i);const h=gl(i.dom.innerText);return Ho(i),h},gH=(e,o,n)=>{let s;return o.format==="raw"?s=fe.trim(gl(gA(n,e.serializer.getTempAttrs()).innerHTML)):o.format==="text"?s=pA(e,n):o.format==="tree"?s=e.serializer.serialize(n,o):s=qt(e,e.serializer.serialize(n,o)),o.format!=="text"&&!m1(K.fromDom(n))&&G(s)?fe.trim(s):s},hH=(e,o)=>B.from(e.getBody()).fold(Be(o.format==="tree"?new mi("body",11):""),n=>gH(e,o,n)),fA=fe.makeMap,Pt=e=>{const o=[];e=e||{};const n=e.indent,s=fA(e.indent_before||""),i=fA(e.indent_after||""),d=wd.getEncodeFunc(e.entity_encoding||"raw",e.entities),h=e.element_format!=="xhtml";return{start:(v,w,k)=>{if(n&&s[v]&&o.length>0){const M=o[o.length-1];M.length>0&&M!==`
`&&o.push(`
`)}if(o.push("<",v),w)for(let M=0,H=w.length;M<H;M++){const I=w[M];o.push(" ",I.name,'="',d(I.value,!0),'"')}if(!k||h?o[o.length]=">":o[o.length]=" />",k&&n&&i[v]&&o.length>0){const M=o[o.length-1];M.length>0&&M!==`
`&&o.push(`
`)}},end:v=>{let w;o.push("</",v,">"),n&&i[v]&&o.length>0&&(w=o[o.length-1],w.length>0&&w!==`
`&&o.push(`
`))},text:(v,w)=>{v.length>0&&(o[o.length]=w?v:d(v))},cdata:v=>{o.push("<![CDATA[",v,"]]>")},comment:v=>{o.push("<!--",v,"-->")},pi:(v,w)=>{w?o.push("<?",v," ",d(w),"?>"):o.push("<?",v,"?>"),n&&o.push(`
`)},doctype:v=>{o.push("<!DOCTYPE",v,">",n?`
`:"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},wh=(e={},o=_u())=>{const n=Pt(e);return e.validate="validate"in e?e.validate:!0,{serialize:s=>{const i=e.validate,d={3:v=>{var w;n.text((w=v.value)!==null&&w!==void 0?w:"",v.raw)},8:v=>{var w;n.comment((w=v.value)!==null&&w!==void 0?w:"")},7:v=>{n.pi(v.name,v.value)},10:v=>{var w;n.doctype((w=v.value)!==null&&w!==void 0?w:"")},4:v=>{var w;n.cdata((w=v.value)!==null&&w!==void 0?w:"")},11:v=>{let w=v;if(w=w.firstChild)do h(w);while(w=w.next)}};n.reset();const h=v=>{var w;const k=d[v.type];if(k)k(v);else{const M=v.name,H=M in o.getVoidElements();let I=v.attributes;if(i&&I&&I.length>1){const $=[];$.map={};const U=o.getElementRule(v.name);if(U){for(let W=0,j=U.attributesOrder.length;W<j;W++){const te=U.attributesOrder[W];if(te in I.map){const de=I.map[te];$.map[te]=de,$.push({name:te,value:de})}}for(let W=0,j=I.length;W<j;W++){const te=I[W].name;if(!(te in $.map)){const de=I.map[te];$.map[te]=de,$.push({name:te,value:de})}}I=$}}if(n.start(M,I,H),!H){let $=v.firstChild;if($){(M==="pre"||M==="textarea")&&$.type===3&&((w=$.value)===null||w===void 0?void 0:w[0])===`
`&&n.text(`
`,!0);do h($);while($=$.next)}n.end(M)}}};return s.type===1&&!e.inner?h(s):s.type===3?d[3](s):d[11](s),n.getContent()}}},vA=new Set;Ce(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{vA.add(e)});const bA=["font","text-decoration","text-emphasis"],bf=(e,o)=>pr(e.parseStyle(e.getAttrib(o,"style"))),yA=e=>vA.has(e),pH=(e,o)=>Kn(bf(e,o),n=>!yA(n)),fH=e=>kt(e,o=>Wo(bA,n=>$o(o,n))),vH=(e,o,n)=>{const s=bf(e,o),i=bf(e,n),d=h=>{var v,w;const k=(v=e.getStyle(o,h))!==null&&v!==void 0?v:"",M=(w=e.getStyle(n,h))!==null&&w!==void 0?w:"";return Ks(k)&&Ks(M)&&k!==M};return Wo(s,h=>{const v=w=>Wo(w,k=>k===h);if(!v(i)&&v(bA)){const w=fH(i);return Wo(w,d)}else return d(h)})},B3=(e,o,n)=>B.from(n.container()).filter(Ve).exists(s=>{const i=e?0:-1;return o(s.data.charAt(n.offset()+i))}),I3=Me(B3,!0,Vi),F3=Me(B3,!1,Vi),bH=e=>{const o=e.container();return Ve(o)&&(o.data.length===0||g1(o.data)&&sf.isBookmarkNode(o.parentNode))},Ch=(e,o)=>n=>Bb(e?0:-1,n).filter(o).isSome(),wA=e=>zv(e)&&Ni(K.fromDom(e),"display")==="block",V3=e=>po(e)&&!R2(e),yH=Ch(!0,wA),so=Ch(!1,wA),P0=Ch(!0,Dr),xh=Ch(!1,Dr),z3=Ch(!0,Wa),Z3=Ch(!1,Wa),dg=Ch(!0,V3),ug=Ch(!1,V3),CA=e=>e.slice(0,-1),wH=(e,o,n)=>zl(o,e)?CA(ym(e,s=>n(s)||To(s,o))):[],U3=(e,o)=>wH(e,o,Ne),mg=(e,o)=>[e].concat(U3(e,o)),W3=(e,o,n)=>Zb(e,o,n,bH),xA=(e,o)=>xn(mg(K.fromDom(o.container()),e),es),SA=(e,o,n)=>W3(e,o.dom,n).forall(s=>xA(o,n).fold(()=>!va(s,n,o.dom),i=>!va(s,n,o.dom)&&zl(i,K.fromDom(s.container())))),kA=(e,o,n)=>xA(o,n).fold(()=>W3(e,o.dom,n).forall(s=>!va(s,n,o.dom)),s=>W3(e,s.dom,n).isNone()),j3=Me(kA,!1),_A=Me(kA,!0),CH=Me(SA,!1),$3=Me(SA,!0),G3=e=>rh(e).exists(zn),tx=(e,o,n)=>{const s=kt(mg(K.fromDom(n.container()),o),es),i=un(s).getOr(o);return ci(e,i.dom,n).filter(G3)},K3=(e,o)=>rh(o).exists(zn)||tx(!0,e,o).isSome(),q3=(e,o)=>Fb(o).exists(zn)||tx(!1,e,o).isSome(),xH=Me(tx,!1),SH=Me(tx,!0),EA=e=>ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),OA=(e,o)=>{const n=kt(mg(K.fromDom(o.container()),e),es);return un(n).getOr(e)},TA=(e,o)=>EA(o)?F3(o):F3(o)||La(OA(e,o).dom,o).exists(F3),X3=(e,o)=>EA(o)?I3(o):I3(o)||ba(OA(e,o).dom,o).exists(I3),kH=e=>Ut(["pre","pre-wrap"],e),Y3=e=>rh(e).bind(o=>_s(o,da)).exists(o=>kH(Ni(o,"white-space"))),yf=(e,o)=>La(e.dom,o).isNone(),_H=(e,o)=>ba(e.dom,o).isNone(),AA=(e,o)=>yf(e,o)||_H(e,o)||j3(e,o)||_A(e,o)||q3(e,o)||K3(e,o),EH=e=>xe(e)&&po(e)&&e0(e),DA=(e,o)=>n=>EH(new Ar(n,e)[o]()),MA=(e,o)=>{const n=ba(e.dom,o).getOr(o),s=DA(e.dom,"next");return o.isAtEnd()&&(s(o.container())||s(n.container()))},NA=(e,o)=>{const n=La(e.dom,o).getOr(o),s=DA(e.dom,"prev");return o.isAtStart()&&(s(o.container())||s(n.container()))},Q3=(e,o)=>Y3(o)?!1:AA(e,o)||TA(e,o)||X3(e,o),B0=(e,o)=>Y3(o)?!1:j3(e,o)||CH(e,o)||q3(e,o)||TA(e,o)||NA(e,o),Qa=e=>{const o=e.container(),n=e.offset();return Ve(o)&&n<o.data.length?ce(o,n+1):e},by=(e,o)=>Y3(o)?!1:_A(e,o)||$3(e,o)||K3(e,o)||X3(e,o)||MA(e,o),J3=(e,o)=>B0(e,o)||by(e,Qa(o)),RA=(e,o)=>yl(e.charAt(o)),LA=(e,o)=>Vi(e.charAt(o)),OH=e=>{const o=e.container();return Ve(o)&&Pr(o.data,vn)},wf=e=>{const o=e.split("");return $t(o,(n,s)=>yl(n)&&s>0&&s<o.length-1&&Xp(o[s-1])&&Xp(o[s+1])?" ":n).join("")},HA=(e,o,n)=>{const s=o.data,i=ce(o,0);return!n&&RA(s,0)&&!J3(e,i)?(o.data=" "+s.slice(1),!0):n&&LA(s,0)&&B0(e,i)?(o.data=vn+s.slice(1),!0):!1},TH=e=>{const o=e.data,n=wf(o);return n!==o?(e.data=n,!0):!1},An=(e,o,n)=>{const s=o.data,i=ce(o,s.length-1);return!n&&RA(s,s.length-1)&&!J3(e,i)?(o.data=s.slice(0,-1)+" ",!0):n&&LA(s,s.length-1)&&by(e,i)?(o.data=s.slice(0,-1)+vn,!0):!1},ox=(e,o)=>{const n=o.container();if(!Ve(n))return B.none();if(OH(o)){const s=HA(e,n,!1)||TH(n)||An(e,n,!1);return Il(s,o)}else if(J3(e,o)){const s=HA(e,n,!0)||An(e,n,!0);return Il(s,o)}else return B.none()},js=e=>{const o=K.fromDom(e.getBody());e.selection.isCollapsed()&&ox(o,ce.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},PA=(e,o,n)=>{if(n===0)return;const s=K.fromDom(e),i=Rn(s,es).getOr(s),d=e.data.slice(o,o+n),h=o+n>=e.data.length&&by(i,ce(e,e.data.length)),v=o===0&&B0(i,ce(e,0));e.replaceData(o,n,$a(d,4,v,h))},nx=(e,o)=>{const n=e.data.slice(o),s=n.length-nr(n).length;PA(e,o,s)},Ld=(e,o)=>{const n=e.data.slice(0,o),s=n.length-Er(n).length;PA(e,o-s,s)},Eo=(e,o,n,s=!0)=>{const i=Er(e.data).length,d=s?e:o,h=s?o:e;return s?d.appendData(h.data):d.insertData(0,h.data),Ho(K.fromDom(h)),n&&nx(d,i),d},Cf=(e,o)=>{const n=e.container(),s=e.offset();return!ce.isTextPosition(e)&&n===o.parentNode&&s>ce.before(o).offset()},e_=(e,o)=>Cf(o,e)?ce(o.container(),o.offset()-1):o,AH=e=>Ve(e)?ce(e,0):ce.before(e),rx=e=>Ve(e)?ce(e,e.data.length):ce.after(e),$c=e=>ta(e.previousSibling)?B.some(rx(e.previousSibling)):e.previousSibling?Zs(e.previousSibling):B.none(),BA=e=>ta(e.nextSibling)?B.some(AH(e.nextSibling)):e.nextSibling?yr(e.nextSibling):B.none(),DH=(e,o)=>B.from(o.previousSibling?o.previousSibling:o.parentNode).bind(n=>La(e,ce.before(n))).orThunk(()=>ba(e,ce.after(o))),MH=(e,o)=>ba(e,ce.after(o)).orThunk(()=>La(e,ce.before(o))),t_=(e,o)=>$c(o).orThunk(()=>BA(o)).orThunk(()=>DH(e,o)),NH=(e,o)=>BA(o).orThunk(()=>$c(o)).orThunk(()=>MH(e,o)),RH=(e,o,n)=>e?NH(o,n):t_(o,n),IA=(e,o,n)=>RH(e,o,n).map(Me(e_,n)),FA=(e,o,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),o)})},LH=e=>o=>o.dom===e,HH=(e,o)=>o&&It(e.schema.getBlockElements(),tn(o)),Wi=e=>{if(bn(e)){const o=K.fromHtml('<br data-mce-bogus="1">');return Es(e),ot(e,o),B.some(ce.before(o.dom))}else return B.none()},$u=(e,o,n)=>{const s=_c(e).filter(Lo),i=mu(e).filter(Lo);return Ho(e),ln(s,i,o,(d,h,v)=>{const w=d.dom,k=h.dom,M=w.data.length;return Eo(w,k,n),v.container()===k?ce(w,M):v}).orThunk(()=>(n&&(s.each(d=>Ld(d.dom,d.dom.length)),i.each(d=>nx(d.dom,0))),o))},PH=(e,o)=>It(e.schema.getTextInlineElements(),tn(o)),Sh=(e,o,n,s=!0)=>{const i=IA(o,e.getBody(),n.dom),d=Rn(n,Me(HH,e),LH(e.getBody())),h=$u(n,i,PH(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(Wi).fold(()=>{s&&FA(e,o,h)},v=>{s&&FA(e,o,B.some(v))})},sx=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,o_=e=>sx.test(e),xf=(e,o)=>Za(K.fromDom(o),Dk(e))&&!Rc(e.schema,o)&&e.dom.isEditable(o),VA=e=>{var o;return nn.DOM.getStyle(e,"direction",!0)==="rtl"||o_((o=e.textContent)!==null&&o!==void 0?o:"")},yy=(e,o,n)=>kt(nn.DOM.getParents(n.container(),"*",o),e),Hd=(e,o,n)=>{const s=yy(e,o,n);return B.from(s[s.length-1])},BH=(e,o,n)=>{const s=Fi(o,e),i=Fi(n,e);return xe(s)&&s===i},kh=e=>cp(e)||h1(e),rc=(e,o)=>{const n=o.container(),s=o.offset();return e?fd(n)?Ve(n.nextSibling)?ce(n.nextSibling,0):ce.after(n):cp(o)?ce(n,s+1):o:fd(n)?Ve(n.previousSibling)?ce(n.previousSibling,n.previousSibling.data.length):ce.before(n):h1(o)?ce(n,s-1):o},zA=Me(rc,!0),gi=Me(rc,!1),ax=(e,o)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(o),e.off("beforeinput input",n)},Pd=e=>{e.execCommand("delete")},n_=e=>ax(e,"Delete"),Jo=e=>ax(e,"ForwardDelete"),Sf=e=>o=>Bs(Ua(o),e,To),ix=e=>Lm(e)||Hm(e),wy=(e,o)=>zl(e,o)?_s(o,ix,Sf(e)):B.none(),Cy=(e,o=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!o})},lx=(e,o,n)=>rr(yr(n),Zs(n),(s,i)=>{const d=rc(!0,s),h=rc(!1,i),v=rc(!1,o);return e?ba(n,v).exists(w=>w.isEqual(h)&&o.isEqual(d)):La(n,v).exists(w=>w.isEqual(d)&&o.isEqual(h))}).getOr(!0),ZA=e=>(ar(e)?_c(e):wm(e)).bind(ZA).orThunk(()=>B.some(e)),cx=(e,o,n,s=!0)=>{var i;o.deleteContents();const d=ZA(n).getOr(n),h=K.fromDom((i=e.dom.getParent(d.dom,e.dom.isBlock))!==null&&i!==void 0?i:n.dom);if(h.dom===e.getBody()?Cy(e,s):bn(h)&&(ri(h),s&&e.selection.setCursorLocation(h.dom,0)),!To(n,h)){const v=Bs(Ua(h),n)?[]:np(h);Ce(v.concat(us(n)),w=>{!To(w,h)&&!zl(w,h)&&bn(w)&&Ho(w)})}},IH=e=>o=>To(e,o),dx=e=>zr(e,"td,th"),UA=(e,o)=>{const n=w=>Qp(K.fromDom(w),o),s=n(e.startContainer),i=n(e.endContainer),d=s.isSome(),h=i.isSome(),v=rr(s,i,To).getOr(!1);return{startTable:s,endTable:i,isStartInTable:d,isEndInTable:h,isSameTable:v,isMultiTable:!v&&d&&h}},xy=(e,o)=>({start:e,end:o}),WA=(e,o,n)=>({rng:e,table:o,cells:n}),_h=Jl.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ux=(e,o)=>ml(K.fromDom(e),"td,th",o),jA=e=>!To(e.start,e.end),$A=(e,o)=>Qp(e.start,o).bind(n=>Qp(e.end,o).bind(s=>Il(To(n,s),n))),FH=(e,o)=>!jA(e)&&$A(e,o).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),VH=(e,o)=>{const n=ux(e.startContainer,o),s=ux(e.endContainer,o);return rr(n,s,xy)},zH=e=>o=>Qp(o,e).bind(n=>xi(dx(n)).map(s=>xy(o,s))),ZH=e=>o=>Qp(o,e).bind(n=>un(dx(n)).map(s=>xy(s,o))),r_=e=>o=>$A(o,e).map(n=>WA(o,n,dx(n))),GA=(e,o,n,s)=>{if(n.collapsed||!e.forall(jA))return B.none();if(o.isSameTable){const i=e.bind(r_(s));return B.some({start:i,end:i})}else{const i=ux(n.startContainer,s),d=ux(n.endContainer,s),h=i.bind(zH(s)).bind(r_(s)),v=d.bind(ZH(s)).bind(r_(s));return B.some({start:h,end:v})}},KA=(e,o)=>qr(e,n=>To(n,o)),mx=e=>rr(KA(e.cells,e.rng.start),KA(e.cells,e.rng.end),(o,n)=>e.cells.slice(o,n+1)),UH=(e,o,n)=>e.exists(s=>FH(s,n)&&Iu(s.start,o)),s_=(e,o)=>{const{startTable:n,endTable:s}=o,i=e.cloneRange();return n.each(d=>i.setStartAfter(d.dom)),s.each(d=>i.setEndBefore(d.dom)),i},xl=(e,o,n,s)=>GA(e,o,n,s).bind(({start:i,end:d})=>i.or(d)).bind(i=>{const{isSameTable:d}=o,h=mx(i).getOr([]);if(d&&i.cells.length===h.length)return B.some(_h.fullTable(i.table));if(h.length>0){if(d)return B.some(_h.partialTable(h,B.none()));{const v=s_(n,o);return B.some(_h.partialTable(h,B.some({...o,rng:v})))}}else return B.none()}),WH=(e,o,n,s)=>GA(e,o,n,s).bind(({start:i,end:d})=>{const h=i.bind(mx).getOr([]),v=d.bind(mx).getOr([]);if(h.length>0&&v.length>0){const w=s_(n,o);return B.some(_h.multiTable(h,v,w))}else return B.none()}),qA=(e,o)=>{const n=IH(e),s=VH(o,n),i=UA(o,n);return UH(s,o,n)?s.map(d=>_h.singleCellTable(o,d.start)):i.isMultiTable?WH(s,i,o,n):xl(s,i,o,n)},gx=e=>Ce(e,o=>{Fr(o,"contenteditable"),ri(o)}),a_=(e,o)=>B.from(e.dom.getParent(o,e.dom.isBlock)).map(K.fromDom),XA=(e,o,n)=>{n.each(s=>{o?Ho(s):(ri(s),e.selection.setCursorLocation(s.dom,0))})},hx=(e,o,n,s)=>{const i=n.cloneRange();s?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),px(e,i,o,!1).each(d=>d())},YA=e=>{const o=ch(e),n=K.fromDom(e.selection.getNode());Mm(n.dom)&&bn(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),o.length>1&&Wo(o,s=>To(s,n))&&En(n,"data-mce-selected","1")},QA=(e,o,n)=>B.some(()=>{const s=e.selection.getRng(),i=n.bind(({rng:d,isStartInTable:h})=>{const v=a_(e,h?d.endContainer:d.startContainer);d.deleteContents(),XA(e,h,v.filter(bn));const w=h?o[0]:o[o.length-1];return hx(e,w,s,h),bn(w)?B.none():B.some(h?o.slice(1):o.slice(0,-1))}).getOr(o);gx(i),YA(e)}),i_=(e,o,n,s)=>B.some(()=>{const i=e.selection.getRng(),d=o[0],h=n[n.length-1];hx(e,d,i,!0),hx(e,h,i,!1);const v=bn(d)?o:o.slice(1),w=bn(h)?n:n.slice(0,-1);gx(v.concat(w)),s.deleteContents(),YA(e)}),px=(e,o,n,s=!0)=>B.some(()=>{cx(e,o,n,s)}),Gc=(e,o)=>B.some(()=>Sh(e,!1,o)),jH=(e,o,n)=>qA(o,n).bind(s=>s.fold(Me(px,e),Me(Gc,e),Me(QA,e),Me(i_,e))),$H=(e,o)=>hi(e,o),l_=(e,o,n,s)=>c_(o,s).fold(()=>jH(e,o,n),i=>$H(e,i)),GH=(e,o,n)=>{const s=K.fromDom(e.getBody()),i=e.selection.getRng();return n.length!==0?QA(e,n,B.none()):l_(e,s,i,o)},I0=(e,o)=>xn(mg(o,e),Ea),c_=(e,o)=>xn(mg(o,e),_g("caption")),F0=(e,o,n,s,i)=>Pu(n,e.getBody(),i).bind(d=>I0(o,K.fromDom(d.getNode())).bind(h=>To(h,s)?B.none():B.some(De))),hi=(e,o)=>B.some(()=>{ri(o),e.selection.setCursorLocation(o.dom,0)}),Sy=(e,o,n,s)=>yr(e.dom).bind(i=>Zs(e.dom).map(d=>o?n.isEqual(i)&&s.isEqual(d):n.isEqual(d)&&s.isEqual(i))).getOr(!0),rn=(e,o)=>hi(e,o),ky=(e,o,n)=>c_(e,K.fromDom(n.getNode())).fold(()=>B.some(De),s=>Il(!To(s,o),De)),JA=(e,o,n,s,i)=>Pu(n,e.getBody(),i).fold(()=>B.some(De),d=>Sy(s,n,i,d)?rn(e,s):ky(o,s,d)),eD=(e,o,n,s)=>{const i=ce.fromRangeStart(e.selection.getRng());return I0(n,s).bind(d=>bn(d)?hi(e,d):F0(e,n,o,d,i))},d_=(e,o,n,s)=>{const i=ce.fromRangeStart(e.selection.getRng());return bn(s)?hi(e,s):JA(e,n,o,s,i)},fx=(e,o)=>e?z3(o):Z3(o),u_=(e,o)=>{const n=ce.fromRangeStart(e.selection.getRng());return fx(o,n)||ci(o,e.getBody(),n).exists(s=>fx(o,s))},m_=(e,o,n)=>{const s=K.fromDom(e.getBody());return c_(s,n).fold(()=>eD(e,o,s,n).orThunk(()=>Il(u_(e,o),De)),i=>d_(e,o,s,i))},V0=(e,o)=>{const n=K.fromDom(e.selection.getStart(!0)),s=ch(e);return e.selection.isCollapsed()&&s.length===0?m_(e,o,n):GH(e,n,s)},gg=(e,o)=>{let n=o;for(;n&&n!==e;){if(On(n)||po(n))return n;n=n.parentNode}return null},tD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],oD=fe.each,vx=e=>{const o=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(d,h)=>{if(d.nodeName!==h.nodeName||d.nodeType!==h.nodeType)return!1;const v=k=>{const M={};return oD(o.getAttribs(k),H=>{const I=H.nodeName.toLowerCase();I!=="style"&&!i(I)&&(M[I]=o.getAttrib(k,I))}),M},w=(k,M)=>{for(const H in k)if(It(k,H)){const I=M[H];if(Gn(I)||k[H]!==I)return!1;delete M[H]}for(const H in M)if(It(M,H))return!1;return!0};return gt(d)&&gt(h)&&(!w(v(d),v(h))||!w(o.parseStyle(o.getAttrib(d,"style")),o.parseStyle(o.getAttrib(h,"style"))))?!1:!Yt(d)&&!Yt(h)},i=d=>Wo(tD,h=>$o(d,h))||n.has(d);return{compare:s,isAttributeInternal:i}},nD=(e,o)=>{let n=e;for(;n=n.walk();)o(n)},g_=(e,o,n,s)=>{const i=n.name;for(let d=0,h=e.length;d<h;d++){const v=e[d];if(v.name===i){const w=s.nodes[i];w?w.nodes.push(n):s.nodes[i]={filter:v,nodes:[n]}}}if(n.attributes)for(let d=0,h=o.length;d<h;d++){const v=o[d],w=v.name;if(w in n.attributes.map){const k=s.attributes[w];k?k.nodes.push(n):s.attributes[w]={filter:v,nodes:[n]}}}},z0=(e,o,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&nD(n,i=>{g_(e,o,i,s)}),s},h_=(e,o)=>{const n=(s,i)=>{nt(s,d=>{const h=ws(d.nodes);Ce(d.filter.callbacks,v=>{for(let w=h.length-1;w>=0;w--){const k=h[w];(!(i?k.attr(d.filter.name)!==void 0:k.name===d.filter.name)||oo(k.parent))&&h.splice(w,1)}h.length>0&&v(h,d.filter.name,o)})})};n(e.nodes,!1),n(e.attributes,!0)},bx=(e,o,n,s={})=>{const i=z0(e,o,n);h_(i,s)},p_=(e,o,n,s)=>{if((e.pad_empty_with_br||o.insert)&&n(s)){const i=new mi("br",1);o.insert&&i.attr("data-mce-bogus","1"),s.empty().append(i)}else s.empty().append(new mi("#text",3)).value=vn},KH=e=>{var o;return f_(e,"#text")&&((o=e==null?void 0:e.firstChild)===null||o===void 0?void 0:o.value)===vn},f_=(e,o)=>{const n=e==null?void 0:e.firstChild;return xe(n)&&n===e.lastChild&&n.name===o},rD=(e,o)=>{const n=e.getElementRule(o.name);return(n==null?void 0:n.paddEmpty)===!0},Z0=(e,o,n,s)=>s.isEmpty(o,n,i=>rD(e,i)),yx=(e,o)=>xe(e)&&(o(e)||e.name==="br"),sD=e=>{let o;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(o=n)}return B.from(o)},wx=(e,o,n=e.parent)=>{if(o.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const i of s)n&&!o.isValidChild(n.name,i.name)&&wx(i,o,n);e.unwrap()}},Cx=(e,o,n,s=De)=>{const i=o.getTextBlockElements(),d=o.getNonEmptyElements(),h=o.getWhitespaceElements(),v=fe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),w=new Set,k=M=>M!==n&&!v[M.name];for(let M=0;M<e.length;M++){const H=e[M];let I,$,U;if(!H.parent||w.has(H))continue;if(i[H.name]&&H.parent.name==="li"){let j=H.next;for(;j&&i[j.name];)j.name="li",w.add(j),H.parent.insert(j,H.parent),j=j.next;H.unwrap();continue}const W=[H];for(I=H.parent;I&&!o.isValidChild(I.name,H.name)&&k(I);I=I.parent)W.push(I);if(I&&W.length>1)if(o.isValidChild(I.name,H.name)){W.reverse(),$=W[0].clone(),s($);let j=$;for(let te=0;te<W.length-1;te++){o.isValidChild(j.name,W[te].name)&&te>0?(U=W[te].clone(),s(U),j.append(U)):U=j;for(let de=W[te].firstChild;de&&de!==W[te+1];){const ue=de.next;U.append(de),de=ue}j=U}Z0(o,d,h,$)?I.insert(H,W[0],!0):(I.insert($,W[0],!0),I.insert(H,$)),I=W[0],(Z0(o,d,h,I)||f_(I,"br"))&&I.empty().remove()}else wx(H,o);else if(H.parent){if(H.name==="li"){let j=H.prev;if(j&&(j.name==="ul"||j.name==="ol")){j.append(H);continue}if(j=H.next,j&&(j.name==="ul"||j.name==="ol")&&j.firstChild){j.insert(H,j.firstChild,!0);continue}const te=new mi("ul",1);s(te),H.wrap(te);continue}if(o.isValidChild(H.parent.name,"div")&&o.isValidChild("div",H.name)){const j=new mi("div",1);s(j),H.wrap(j)}else wx(H,o)}}},aD=(e,o)=>{let n=e;for(;n;){if(n.name===o)return!0;n=n.parent}return!1},v_=(e,o,n=o.parent)=>n&&e.children[o.name]&&!e.isValidChild(n.name,o.name)?!0:!!(n&&o.name==="a"&&aD(n,"a")),iD=(e,o,n,s)=>{const i=document.createRange();return i.setStart(e,o),i.setEnd(n,s),i},lD=e=>{const o=ce.fromRangeStart(e),n=ce.fromRangeEnd(e),s=e.commonAncestorContainer;return ci(!1,s,n).map(i=>!va(o,n,s)&&va(o,i,s)?iD(o.container(),o.offset(),i.container(),i.offset()):e).getOr(e)},xx=e=>e.collapsed?e:lD(e),cD=e=>xe(e.firstChild)&&e.firstChild===e.lastChild,dD=e=>e.name==="br"||e.value===vn,b_=(e,o)=>e.getBlockElements()[o.name]&&cD(o)&&dD(o.firstChild),uD=(e,o)=>{const n=e.getNonEmptyElements();return xe(o)&&(o.isEmpty(n)||b_(e,o))},mD=(e,o)=>{let n=o.firstChild,s=o.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),uD(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},gD=e=>{var o,n;const s=e.firstChild,i=e.lastChild;return s&&s.nodeName==="META"&&((o=s.parentNode)===null||o===void 0||o.removeChild(s)),i&&i.id==="mce_marker"&&((n=i.parentNode)===null||n===void 0||n.removeChild(i)),e},hD=(e,o,n)=>{const s=o.serialize(n),i=e.createFragment(s);return gD(i)},pD=e=>{var o;return kt((o=e==null?void 0:e.childNodes)!==null&&o!==void 0?o:[],n=>n.nodeName==="LI")},y_=e=>e.data===vn||fo(e),Sx=e=>xe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&y_(e.firstChild),fD=e=>!e.firstChild||Sx(e),vD=e=>e.length>0&&fD(e[e.length-1])?e.slice(0,-1):e,U0=(e,o)=>{const n=e.getParent(o,e.isBlock);return n&&n.nodeName==="LI"?n:null},w_=(e,o)=>!!U0(e,o),_y=(e,o)=>{const n=o.cloneRange(),s=o.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},C_=(e,o)=>{const n=ce.before(e),s=Fc(o).next(n);return s?s.toRange():null},x_=(e,o)=>{const n=ce.after(e),s=Fc(o).prev(n);return s?s.toRange():null},W0=(e,o,n,s)=>{const i=_y(e,s),d=e.parentNode;return d&&(d.insertBefore(i[0],e),fe.each(o,h=>{d.insertBefore(h,e)}),d.insertBefore(i[1],e),d.removeChild(e)),x_(o[o.length-1],n)},S_=(e,o,n)=>{const s=e.parentNode;return s&&fe.each(o,i=>{s.insertBefore(i,e)}),C_(e,n)},k_=(e,o,n,s)=>(s.insertAfter(o.reverse(),e),x_(o[0],n)),Ey=(e,o,n,s)=>{const i=hD(o,e,s),d=U0(o,n.startContainer),h=vD(pD(i.firstChild)),v=1,w=2,k=o.getRoot(),M=H=>{const I=ce.fromRangeStart(n),$=Fc(o.getRoot()),U=H===v?$.prev(I):$.next(I),W=U==null?void 0:U.getNode();return W?U0(o,W)!==d:!0};return d?M(v)?S_(d,h,k):M(w)?k_(d,h,k,o):W0(d,h,k,n):null},Eh=["pre"],bD=(e,o,n,s)=>{var i;const d=o.firstChild,h=o.lastChild,v=h.attr("data-mce-type")==="bookmark"?h.prev:h,w=d===v,k=Ut(Eh,d.name);if(w&&k){const M=d.attr("contenteditable")!=="false",H=((i=e.getParent(n,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===d.name,I=B.from(gg(s,n)).forall(On);return M&&H&&I}else return!1},__=Mm,yD=(e,o,n)=>{if(xe(n)){const s=e.getParent(o.endContainer,__);return n===s&&Iu(K.fromDom(n),o)}else return!1},wD=(e,o,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(o),n);else{const i=n.firstChild,d=n.lastChild;!i||i===d&&i.nodeName==="BR"?e.dom.setHTML(n,o):e.selection.setContent(o,{no_events:!0})}},qH=(e,o)=>{B.from(e.getParent(o,"td,th")).map(K.fromDom).each(Y4)},XH=(e,o)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(o){const i=e.getBody(),d=vx(e);fe.each(s.select("*[data-mce-fragment]"),h=>{if(xe(n[h.nodeName.toLowerCase()])&&pH(s,h)){for(let v=h.parentElement;xe(v)&&v!==i&&!vH(s,h,v);v=v.parentElement)if(d.compare(v,h)){s.remove(h,!0);break}}})}},E_=e=>{let o=e;for(;o=o.walk();)o.type===1&&o.attr("data-mce-fragment","1")},Bd=e=>{fe.each(e.getElementsByTagName("*"),o=>{o.removeAttribute("data-mce-fragment")})},O_=e=>!!e.getAttribute("data-mce-fragment"),kx=(e,o)=>xe(o)&&!e.schema.getVoidElements()[o.nodeName],T_=(e,o)=>{var n,s,i;let d;const h=e.dom,v=e.selection;if(!o)return;v.scrollIntoView(o);const w=gg(e.getBody(),o);if(w&&h.getContentEditable(w)==="false"){h.remove(o),v.select(w);return}let k=h.createRng();const M=o.previousSibling;if(Ve(M)){k.setStart(M,(s=(n=M.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const $=o.nextSibling;Ve($)&&(M.appendData($.data),(i=$.parentNode)===null||i===void 0||i.removeChild($))}else k.setStartBefore(o),k.setEndBefore(o);const H=$=>{let U=ce.fromRangeStart($);return U=Fc(e.getBody()).next(U),U==null?void 0:U.toRange()},I=h.getParent(o,h.isBlock);if(h.remove(o),I&&h.isEmpty(I)){const $=__(I);Es(K.fromDom(I)),k.setStart(I,0),k.setEnd(I,0),!$&&!O_(I)&&(d=H(k))?(k=d,h.remove(I)):h.add(I,h.create("br",$?{}:{"data-mce-bogus":"1"}))}v.setRng(k)},YH=e=>{const o=e.dom,n=xx(e.selection.getRng());e.selection.setRng(n);const s=o.getParent(n.startContainer,__);yD(o,n,s)?px(e,n,K.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&Ve(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},CD=e=>{for(let o=e;o;o=o.walk())if(o.attr("id")==="mce_marker")return B.some(o);return B.none()},QH=(e,o,n)=>{var s,i;const d=e.selection,h=e.dom,v=e.parser,w=n.merge,k=wh({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.indexOf("{$caret}")===-1&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,M);let H=d.getRng();const I=H.startContainer,$=e.getBody();I===$&&d.isCollapsed()&&h.isBlock($.firstChild)&&kx(e,$.firstChild)&&h.isEmpty($.firstChild)&&(H=h.createRng(),H.setStart($.firstChild,0),H.setEnd($.firstChild,0),d.setRng(H)),d.isCollapsed()||YH(e);const U=d.getNode(),W={context:U.nodeName.toLowerCase(),data:n.data,insert:!0},j=v.parse(o,W);if(n.paste===!0&&mD(e.schema,j)&&w_(h,U))return H=Ey(k,h,d.getRng(),j),H&&d.setRng(H),o;n.paste===!0&&bD(h,j,U,e.getBody())&&((s=j.firstChild)===null||s===void 0||s.unwrap()),E_(j);let te=j.lastChild;if(te&&te.attr("id")==="mce_marker"){const de=te;for(te=te.prev;te;te=te.walk(!0))if(te.type===3||!h.isBlock(te.name)){te.parent&&e.schema.isValidChild(te.parent.name,"span")&&te.parent.insert(de,te,te.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(U),!W.invalid)o=k.serialize(j),wD(e,o,U);else{e.selection.setContent(M);let de=d.getNode(),ue;const Ae=e.getBody();for(Os(de)?de=ue=Ae:ue=de;ue&&ue!==Ae;)de=ue,ue=ue.parentNode;o=de===Ae?Ae.innerHTML:h.getOuterHTML(de);const $e=v.parse(o),Ye=CD($e),Ie=Ye.bind(sD).getOr($e);Ye.each(ft=>ft.replace(j));const Ee=j.children(),ye=(i=j.parent)!==null&&i!==void 0?i:$e;j.unwrap();const Fe=kt(Ee,ft=>v_(e.schema,ft,ye));Cx(Fe,e.schema,Ie),bx(v.getNodeFilters(),v.getAttributeFilters(),$e),o=k.serialize($e),de===Ae?h.setHTML(Ae,o):h.setOuterHTML(de,o)}return XH(e,w),T_(e,h.get("mce_marker")),Bd(e.getBody()),qH(h,d.getStart()),w1(e.schema,e.getBody(),d.getStart()),o},Oy=e=>e instanceof mi,A_=e=>{vf(e)&&yr(e.getBody()).each(o=>{const n=o.getNode(),s=Wa(n)?yr(n).getOr(o):o;e.selection.setRng(s.toRange())})},D_=(e,o,n)=>{e.dom.setHTML(e.getBody(),o),n!==!0&&A_(e)},xD=(e,o,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const i='<br data-mce-bogus="1">';o.nodeName==="TABLE"?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(o.nodeName)&&(n="<li>"+i+"</li>");const d=ns(e);return e.schema.isValidChild(o.nodeName.toLowerCase(),d.toLowerCase())?(n=i,n=e.dom.createHTML(d,li(e),n)):n||(n=i),D_(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=wh({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const i=m1(K.fromDom(o))?n:fe.trim(n);return D_(e,i,s.no_selection),{content:i,html:i}}},JH=(e,o,n,s)=>{bx(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const i=wh({validate:!1},e.schema).serialize(n),d=m1(K.fromDom(o))?i:fe.trim(i);return D_(e,d,s.no_selection),{content:n,html:d}},Ty=(e,o,n)=>B.from(e.getBody()).map(s=>Oy(o)?JH(e,s,o,n):xD(e,s,o,n)).getOr({content:o,html:Oy(n.content)?"":n.content}),SD=(e,o,n)=>Rn(e,o,n).isSome(),eP=(e,o)=>km(e,o).isSome(),M_=e=>J(e)?e:Ne,tP=(e,o,n)=>{let s=e.dom;const i=M_(n);for(;s.parentNode;){s=s.parentNode;const d=K.fromDom(s),h=o(d);if(h.isSome())return h;if(i(d))break}return B.none()},N_=(e,o,n)=>{const s=o(e),i=M_(n);return s.orThunk(()=>i(e)?B.none():tP(e,o,i))},R_=ef,kD=(e,o,n)=>{const s=e.formatter.get(n);if(s)for(let i=0;i<s.length;i++){const d=s[i];if(Zi(d)&&d.inherit===!1&&e.dom.is(o,d.selector))return!0}return!1},L_=(e,o,n,s,i)=>{const d=e.dom.getRoot();if(o===d)return!1;const h=e.dom.getParent(o,v=>kD(e,v,n)?!0:v.parentNode===d||!!Kc(e,v,n,s,!0));return!!Kc(e,h,n,s,i)},Ay=(e,o,n)=>rs(n)&&R_(o,n.inline)||Vc(n)&&R_(o,n.block)?!0:Zi(n)?gt(o)&&e.is(o,n.selector):!1,_D=(e,o,n,s,i,d)=>{const h=n[s],v=s==="attributes";if(J(n.onmatch))return n.onmatch(o,n,s);if(h){if(dm(h)){for(let w=0;w<h.length;w++)if(v?e.getAttrib(o,h[w]):mh(e,o,h[w]))return!0}else for(const w in h)if(It(h,w)){const k=v?e.getAttrib(o,w):mh(e,o,w),M=Fu(h[w],d),H=oo(k)||fc(k);if(H&&oo(M))continue;if(i&&H&&!n.exact||(!i||n.exact)&&!R_(k,Jb(M,w)))return!1}}return!0},Kc=(e,o,n,s,i)=>{const d=e.formatter.get(n),h=e.dom;if(d&&gt(o))for(let v=0;v<d.length;v++){const w=d[v];if(Ay(e.dom,o,w)&&_D(h,o,w,"attributes",i,s)&&_D(h,o,w,"styles",i,s)){const k=w.classes;if(k){for(let M=0;M<k.length;M++)if(!e.dom.hasClass(o,Fu(k[M],s)))return}return w}}},hg=(e,o,n,s,i)=>{if(s)return L_(e,s,o,n,i);if(s=e.selection.getNode(),L_(e,s,o,n,i))return!0;const d=e.selection.getStart();return!!(d!==s&&L_(e,d,o,n,i))},oP=(e,o,n)=>{const s=[],i={},d=e.selection.getStart();return e.dom.getParent(d,h=>{for(let v=0;v<o.length;v++){const w=o[v];!i[w]&&Kc(e,h,w,n)&&(i[w]=!0,s.push(w))}},e.dom.getRoot()),s},nP=(e,o)=>{const n=i=>To(i,K.fromDom(e.getBody())),s=(i,d)=>Kc(e,i.dom,d)?B.some(d):B.none();return B.from(e.selection.getStart(!0)).bind(i=>N_(K.fromDom(i),d=>Ls(o,h=>s(d,h)),n)).getOrNull()},_x=(e,o)=>{const n=e.formatter.get(o),s=e.dom;if(n&&e.selection.isEditable()){const i=e.selection.getStart(),d=sg(s,i);for(let h=n.length-1;h>=0;h--){const v=n[h];if(!Zi(v))return!0;for(let w=d.length-1;w>=0;w--)if(s.is(d[w],v.selector))return!0}}return!1},ED=(e,o,n)=>_n(n,(s,i)=>{const d=gh(e,i);return e.formatter.matchNode(o,i,{},d)?s.concat([i]):s},[]),kf=qn,rP=(e,o)=>e.importNode(o,!0),OD=e=>{const o=[];let n=e;for(;n;){if(Ve(n)&&n.data!==kf||n.childNodes.length>1)return[];gt(n)&&o.push(n),n=n.firstChild}return o},TD=e=>OD(e).length>0,Oh=e=>{if(e){const o=new Ar(e,e);for(let n=o.current();n;n=o.next())if(Ve(n))return n}return null},Ex=e=>{const o=K.fromTag("span");return ni(o,{id:n0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ot(o,K.fromText(kf)),o},AD=e=>{const o=Oh(e);return o&&o.data.charAt(0)===kf&&o.deleteData(0,1),o},Ox=(e,o,n=!0)=>{const s=e.dom,i=e.selection;if(TD(o))Sh(e,!1,K.fromDom(o),n);else{const d=i.getRng(),h=s.getParent(o,s.isBlock),v=d.startContainer,w=d.startOffset,k=d.endContainer,M=d.endOffset,H=AD(o);s.remove(o,!0),v===H&&w>0&&d.setStart(H,w-1),k===H&&M>0&&d.setEnd(H,M-1),h&&s.isEmpty(h)&&ri(K.fromDom(h)),i.setRng(d)}},j0=(e,o,n=!0)=>{const s=e.dom,i=e.selection;if(o)Ox(e,o,n);else if(o=Bu(e.getBody(),i.getStart()),!o)for(;o=s.get(n0);)Ox(e,o,n)},DD=(e,o,n)=>{var s,i;const d=e.dom,h=d.getParent(n,Me(rg,e.schema));h&&d.isEmpty(h)?(s=n.parentNode)===null||s===void 0||s.replaceChild(o,n):(Wv(K.fromDom(n)),d.isEmpty(n)?(i=n.parentNode)===null||i===void 0||i.replaceChild(o,n):d.insertAfter(o,n))},MD=(e,o)=>(e.appendChild(o),o),H_=(e,o)=>{var n;const s=El(e,(d,h)=>MD(d,h.cloneNode(!1)),o),i=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return MD(s,i.createTextNode(kf))},sP=(e,o,n,s,i,d)=>{const h=e.formatter,v=e.dom,w=kt(pr(h.get()),M=>M!==s&&!Pr(M,"removeformat")),k=ED(e,n,w);if(kt(k,M=>!Vu(e,M,s)).length>0){const M=n.cloneNode(!1);return v.add(o,M),h.remove(s,i,M,d),v.remove(M),B.some(M)}else return B.none()},aP=(e,o,n)=>{let s;const i=e.selection,d=e.formatter.get(o);if(!d)return;const h=i.getRng();let v=h.startOffset;const w=h.startContainer.nodeValue;s=Bu(e.getBody(),i.getStart());const k=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&v>0&&v<w.length&&k.test(w.charAt(v))&&k.test(w.charAt(v-1))){const M=i.getBookmark();h.collapse(!0);let H=zu(e.dom,h,d);H=Qt(H),e.formatter.apply(o,n,H),i.moveToBookmark(M)}else{let M=s?Oh(s):null;(!s||(M==null?void 0:M.data)!==kf)&&(s=rP(e.getDoc(),Ex(!0).dom),M=s.firstChild,h.insertNode(s),v=1),e.formatter.apply(o,n,s),i.setCursorLocation(M,v)}},Tx=(e,o,n,s)=>{const i=e.dom,d=e.selection;let h=!1;const v=e.formatter.get(o);if(!v)return;const w=d.getRng(),k=w.startContainer,M=w.startOffset;let H=k;Ve(k)&&(M!==k.data.length&&(h=!0),H=H.parentNode);const I=[];let $;for(;H;){if(Kc(e,H,o,n,s)){$=H;break}H.nextSibling&&(h=!0),I.push(H),H=H.parentNode}if($)if(h){const U=d.getBookmark();w.collapse(!0);let W=zu(i,w,v,!0);W=Qt(W),e.formatter.remove(o,n,W,s),d.moveToBookmark(U)}else{const U=Bu(e.getBody(),$),W=Ex(!1).dom;DD(e,W,U??$);const j=sP(e,W,$,o,n,s),te=H_(I.concat(j.toArray()),W);U&&Ox(e,U,!1),d.setCursorLocation(te,1),i.isEmpty($)&&i.remove($)}},ND=(e,o,n)=>{const s=e.selection,i=e.getBody();j0(e,null,n),(o===8||o===46)&&s.isCollapsed()&&s.getStart().innerHTML===kf&&j0(e,Bu(i,s.getStart())),(o===37||o===39)&&j0(e,Bu(i,s.getStart()))},P_=e=>Ve(e)&&Qd(e.data,vn),iP=e=>{e.on("mouseup keydown",o=>{ND(e,o.keyCode,P_(e.selection.getRng().endContainer))})},RD=e=>{const o=Ex(!1),n=H_(e,o.dom);return{caretContainer:o,caretPosition:ce(n,0)}},B_=(e,o)=>{const{caretContainer:n,caretPosition:s}=RD(o);return He(K.fromDom(e),n),Ho(K.fromDom(e)),s},I_=(e,o)=>{const{caretContainer:n,caretPosition:s}=RD(o);return e.insertNode(n.dom),s},F_=(e,o)=>{const n=e.schema.getTextInlineElements();return It(n,tn(o))&&!Qn(o.dom)&&!Dm(o.dom)},LD=e=>Qn(e.dom)&&TD(e.dom),Dy={},HD=Sn(["pre"]),Ax=(e,o)=>{Dy[e]||(Dy[e]=[]),Dy[e].push(o)},pg=(e,o)=>{It(Dy,e)&&Ce(Dy[e],n=>{n(o)})};Ax("pre",e=>{const o=e.selection.getRng(),n=i=>d=>{const h=d.previousSibling;return HD(h)&&Ut(i,h)},s=(i,d)=>{const h=K.fromDom(d),v=Mi(h).dom;Ho(h),Fn(K.fromDom(i),[K.fromTag("br",v),K.fromTag("br",v),...us(h)])};if(!o.collapsed){const i=e.selection.getSelectedBlocks(),d=kt(kt(i,HD),n(i));Ce(d,h=>{s(h.previousSibling,h)})}});const PD=["fontWeight","fontStyle","color","fontSize","fontFamily"],V_=e=>Nt(e.styles)&&Wo(pr(e.styles),o=>Ut(PD,o)),wr=e=>xn(e,o=>rs(o)&&o.inline==="span"&&V_(o)),Dx=(e,o)=>{const n=e.get(o);return ko(n)?wr(n):B.none()},Mx=(e,o)=>La(o,ce.fromRangeStart(e)).isNone(),Gu=(e,o)=>ba(o,ce.fromRangeEnd(e)).exists(n=>!fo(n.getNode())||ba(o,n).isSome())===!1,z_=e=>o=>G4(o)&&e.isEditable(o),BD=e=>{const o=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(o.length===1)return Mx(n,o[0])&&Gu(n,o[0])?o:[];{const s=un(o).filter(h=>Mx(n,h)).toArray(),i=xi(o).filter(h=>Gu(n,h)).toArray(),d=o.slice(1,-1);return s.concat(d).concat(i)}},My=e=>kt(BD(e),z_(e.dom)),ID=e=>kt(e.getSelectedBlocks(),z_(e.dom)),Z_=fe.each,Th=e=>gt(e)&&!Yt(e)&&!Qn(e)&&!Dm(e),FD=(e,o)=>{for(let n=e;n;n=n[o]){if(Ve(n)&&Ks(n.data))return e;if(gt(n)&&!Yt(n))return n}return e},Ah=(e,o,n)=>{const s=vx(e),i=gt(o)&&Jn(o),d=gt(n)&&Jn(n);if(i&&d){const h=FD(o,"previousSibling"),v=FD(n,"nextSibling");if(s.compare(h,v)){for(let w=h.nextSibling;w&&w!==v;){const k=w;w=w.nextSibling,h.appendChild(k)}return e.dom.remove(v),fe.each(fe.grep(v.childNodes),w=>{h.appendChild(w)}),h}}return n},VD=(e,o,n,s)=>{var i;if(s&&o.merge_siblings!==!1){const d=(i=Ah(e,dh(s),s))!==null&&i!==void 0?i:s;Ah(e,d,dh(d,!0))}},Dh=(e,o,n)=>{if(o.clear_child_styles){const s=o.links?"*:not(a)":"*";Z_(e.select(s,n),i=>{Th(i)&&Jn(i)&&Z_(o.styles,(d,h)=>{e.setStyle(i,h,"")})})}},ji=(e,o,n)=>{Z_(e.childNodes,s=>{Th(s)&&(o(s)&&n(s),s.hasChildNodes()&&ji(s,o,n))})},Nx=(e,o)=>{o.nodeName==="SPAN"&&e.getAttribs(o).length===0&&e.remove(o,!0)},Rx=(e,o)=>n=>!!(n&&mh(e,n,o)),zD=(e,o,n)=>s=>{e.setStyle(s,o,n),s.getAttribute("style")===""&&s.removeAttribute("style"),Nx(e,s)},$0=Jl.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Lx=/^(src|href|style)$/,U_=fe.each,$i=ef,Hx=e=>/^(TR|TH|TD)$/.test(e.nodeName),W_=(e,o,n)=>e.isChildOf(o,n)&&o!==n&&!e.isBlock(n),Px=(e,o,n)=>{let s=o[n?"startContainer":"endContainer"],i=o[n?"startOffset":"endOffset"];if(gt(s)){const d=s.childNodes.length-1;!n&&i&&i--,s=s.childNodes[i>d?d:i]}return Ve(s)&&n&&i>=s.data.length&&(s=new Ar(s,e.getBody()).next()||s),Ve(s)&&!n&&i===0&&(s=new Ar(s,e.getBody()).prev()||s),s},Bx=(e,o)=>{const n=o?"firstChild":"lastChild",s=e[n];return Hx(e)&&s?e.nodeName==="TR"&&s[n]||s:e},fg=(e,o,n,s)=>{var i;const d=e.create(n,s);return(i=o.parentNode)===null||i===void 0||i.insertBefore(d,o),d.appendChild(o),d},Ix=(e,o,n,s,i)=>{const d=K.fromDom(o),h=K.fromDom(e.create(s,i)),v=n?rp(d):Zl(d);return Fn(h,v),n?(He(d,h),Rt(h,d)):(xt(d,h),ot(h,d)),h.dom},lP=(e,o)=>o.links&&e.nodeName==="A",j_=(e,o,n)=>{const s=o.parentNode;let i;const d=e.dom,h=ns(e);Vc(n)&&s===d.getRoot()&&(!n.list_block||!$i(o,n.list_block))&&Ce(ws(o.childNodes),v=>{uh(e,h,v.nodeName.toLowerCase())?i?i.appendChild(v):(i=fg(d,v,h),d.setAttribs(i,li(e))):i=null}),!(ey(n)&&!$i(n.inline,o))&&d.remove(o,!0)},ZD=(e,o,n)=>bs(e)?{name:o,value:null}:{name:e,value:Fu(o,n)},UD=(e,o)=>{e.getAttrib(o,"style")===""&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},WD=(e,o,n,s,i)=>{let d=!1;U_(n.styles,(h,v)=>{const{name:w,value:k}=ZD(v,h,s),M=Jb(k,w);(n.remove_similar||re(k)||!gt(i)||$i(mh(e,i,w),M))&&e.setStyle(o,w,""),d=!0}),d&&UD(e,o)},cP=(e,o,n)=>{o==="removeformat"?Ce(ID(e.selection),s=>{Ce(PD,i=>e.dom.setStyle(s,i,"")),UD(e.dom,s)}):Dx(e.formatter,o).each(s=>{Ce(ID(e.selection),i=>WD(e.dom,i,s,n,null))})},G0=(e,o,n,s,i)=>{const d=e.dom,h=vx(e),v=e.schema;if(rs(o)&&wt(v,o.inline)&&Rc(v,s)&&s.parentElement===e.getBody())return j_(e,s,o),$0.removed();if(!o.ceFalseOverride&&s&&d.getContentEditableParent(s)==="false"||s&&!Ay(d,s,o)&&!lP(s,o))return $0.keep();const w=s,k=o.preserve_attributes;if(rs(o)&&o.remove==="all"&&ko(k)){const M=kt(d.getAttribs(w),H=>Ut(k,H.name.toLowerCase()));if(d.removeAllAttribs(w),Ce(M,H=>d.setAttrib(w,H.name,H.value)),M.length>0)return $0.rename("span")}if(o.remove!=="all"){WD(d,w,o,n,i),U_(o.attributes,(H,I)=>{const{name:$,value:U}=ZD(I,H,n);if(o.remove_similar||re(U)||!gt(i)||$i(d.getAttrib(i,$),U)){if($==="class"){const W=d.getAttrib(w,$);if(W){let j="";if(Ce(W.split(/\s+/),te=>{/mce\-\w+/.test(te)&&(j+=(j?" ":"")+te)}),j){d.setAttrib(w,$,j);return}}}if(Lx.test($)&&w.removeAttribute("data-mce-"+$),$==="style"&&Sn(["li"])(w)&&d.getStyle(w,"list-style-type")==="none"){w.removeAttribute($),d.setStyle(w,"list-style-type","none");return}$==="class"&&w.removeAttribute("className"),w.removeAttribute($)}}),U_(o.classes,H=>{H=Fu(H,n),(!gt(i)||d.hasClass(i,H))&&d.removeClass(w,H)});const M=d.getAttribs(w);for(let H=0;H<M.length;H++){const I=M[H].nodeName;if(!h.isAttributeInternal(I))return $0.keep()}}return o.remove!=="none"?(j_(e,w,o),$0.removed()):$0.keep()},dP=(e,o,n,s,i)=>{let d;return o.parentNode&&Ce(sg(e.dom,o.parentNode).reverse(),h=>{if(!d&&gt(h)&&h.id!=="_start"&&h.id!=="_end"){const v=Kc(e,h,n,s,i);v&&v.split!==!1&&(d=h)}}),d},jD=(e,o,n,s)=>G0(e,o,n,s,s).fold(Be(s),i=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,i)),Be(null)),$_=(e,o,n,s,i,d,h,v)=>{var w,k;let M,H;const I=e.dom;if(n){const $=n.parentNode;for(let U=s.parentNode;U&&U!==$;U=U.parentNode){let W=I.clone(U,!1);for(let j=0;j<o.length&&(W=jD(e,o[j],v,W),W!==null);j++);W&&(M&&W.appendChild(M),H||(H=W),M=W)}d&&(!h.mixed||!I.isBlock(n))&&(s=(w=I.split(n,s))!==null&&w!==void 0?w:s),M&&H&&((k=i.parentNode)===null||k===void 0||k.insertBefore(M,i),H.appendChild(i),rs(h)&&VD(e,h,v,M))}return s},uP=(e,o,n,s,i)=>{const d=e.formatter.get(o),h=d[0],v=e.dom,w=e.selection,k=W=>{const j=dP(e,W,o,n,i);return $_(e,d,j,W,W,!0,h,n)},M=W=>Yt(W)&&gt(W)&&(W.id==="_start"||W.id==="_end"),H=W=>Wo(d,j=>K0(e,j,n,W,W)),I=W=>{const j=ws(W.childNodes),te=H(W)||Wo(d,ue=>Ay(v,W,ue)),de=W.parentNode;if(!te&&xe(de)&&ty(h)&&H(de),h.deep&&j.length)for(let ue=0;ue<j.length;ue++)I(j[ue]);Ce(["underline","line-through","overline"],ue=>{gt(W)&&e.dom.getStyle(W,"text-decoration")===ue&&W.parentNode&&tf(v,W.parentNode)===ue&&K0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ue}},void 0,W)})},$=W=>{const j=v.get(W?"_start":"_end");if(j){let te=j[W?"firstChild":"lastChild"];return M(te)&&(te=te[W?"firstChild":"lastChild"]),Ve(te)&&te.data.length===0&&(te=W?j.previousSibling||j.nextSibling:j.nextSibling||j.previousSibling),v.remove(j,!0),te}else return null},U=W=>{let j,te,de=zu(v,W,d,W.collapsed);if(h.split){if(de=Qt(de),j=Px(e,de,!0),te=Px(e,de),j!==te){if(j=Bx(j,!0),te=Bx(te,!1),W_(v,j,te)){const Ae=B.from(j.firstChild).getOr(j);k(Ix(v,Ae,!0,"span",{id:"_start","data-mce-type":"bookmark"})),$(!0);return}if(W_(v,te,j)){const Ae=B.from(te.lastChild).getOr(te);k(Ix(v,Ae,!1,"span",{id:"_end","data-mce-type":"bookmark"})),$(!1);return}j=fg(v,j,"span",{id:"_start","data-mce-type":"bookmark"}),te=fg(v,te,"span",{id:"_end","data-mce-type":"bookmark"});const ue=v.createRng();ue.setStartAfter(j),ue.setEndBefore(te),fh(v,ue,Ae=>{Ce(Ae,$e=>{!Yt($e)&&!Yt($e.parentNode)&&k($e)})}),k(j),k(te),j=$(!0),te=$()}else j=te=k(j);de.startContainer=j.parentNode?j.parentNode:j,de.startOffset=v.nodeIndex(j),de.endContainer=te.parentNode?te.parentNode:te,de.endOffset=v.nodeIndex(te)+1}fh(v,de,ue=>{Ce(ue,I)})};if(s){if(Je(s)){const W=v.createRng();W.setStartBefore(s),W.setEndAfter(s),U(W)}else U(s);uo(e,o,s,n);return}!w.isCollapsed()||!rs(h)||ch(e).length?(zi(e,()=>Xb(e,U),W=>rs(h)&&hg(e,o,n,W)),e.nodeChanged()):Tx(e,o,n,i),cP(e,o,n),uo(e,o,s,n)},G_=(e,o,n,s,i)=>{(s||e.selection.isEditable())&&uP(e,o,n,s,i)},K0=(e,o,n,s,i)=>G0(e,o,n,s,i).fold(Ne,d=>(e.dom.rename(s,d),!0),ct),$D=fe.each,mP=(e,o,n,s)=>{const i=d=>{if(gt(d)&&gt(d.parentNode)&&Jn(d)){const h=tf(e,d.parentNode);e.getStyle(d,"color")&&h?e.setStyle(d,"text-decoration",h):e.getStyle(d,"text-decoration")===h&&e.setStyle(d,"text-decoration",null)}};o.styles&&(o.styles.color||o.styles.textDecoration)&&(fe.walk(s,i,"childNodes"),i(s))},gP=(e,o,n,s)=>{if(o.styles&&o.styles.backgroundColor){const i=Rx(e,"fontSize");ji(s,d=>i(d)&&Jn(d),zD(e,"backgroundColor",Fu(o.styles.backgroundColor,n)))}},hP=(e,o,n,s)=>{if(rs(o)&&(o.inline==="sub"||o.inline==="sup")){const i=Rx(e,"fontSize");ji(s,h=>i(h)&&Jn(h),zD(e,"fontSize",""));const d=kt(e.select(o.inline==="sup"?"sub":"sup",s),Jn);e.remove(d,!0)}},pP=(e,o,n,s)=>{$D(o,i=>{rs(i)&&$D(e.dom.select(i.inline,s),d=>{Th(d)&&K0(e,i,n,d,i.exact?d:null)}),Dh(e.dom,i,s)})},fP=(e,o,n,s,i)=>{const d=i.parentNode;Kc(e,d,n,s)&&K0(e,o,s,i)||o.merge_with_parents&&d&&e.dom.getParent(d,h=>Kc(e,h,n,s)?(K0(e,o,s,i),!0):!1)},Fx=fe.each,vP=(e,o,n,s)=>{if(Nk(e)&&rs(o)&&n.parentNode){const i=Cp(e.schema),d=eP(K.fromDom(n),h=>Qn(h.dom));return tr(i,s)&&bn(K.fromDom(n.parentNode),!1)&&!d}else return!1},GD=(e,o,n,s)=>{if(Fx(n.styles,(i,d)=>{e.setStyle(o,d,Fu(i,s))}),n.styles){const i=e.getAttrib(o,"style");i&&e.setAttrib(o,"data-mce-style",i)}},bP=(e,o,n,s)=>{const i=e.formatter.get(o),d=i[0],h=!s&&e.selection.isCollapsed(),v=e.dom,w=e.selection,k=(U,W=d)=>{J(W.onformat)&&W.onformat(U,W,n,s),GD(v,U,W,n),Fx(W.attributes,(j,te)=>{v.setAttrib(U,te,Fu(j,n))}),Fx(W.classes,j=>{const te=Fu(j,n);v.hasClass(U,te)||v.addClass(U,te)})},M=(U,W)=>{let j=!1;return Fx(U,te=>Zi(te)?v.getContentEditable(W)==="false"&&!te.ceFalseOverride||xe(te.collapsed)&&te.collapsed!==h?!0:v.is(W,te.selector)&&!Qn(W)?(k(W,te),j=!0,!1):!0:!1),j},H=U=>{if(G(U)){const W=v.create(U);return k(W),W}else return null},I=(U,W,j)=>{const te=[];let de=!0;const ue=d.inline||d.block,Ae=H(ue),$e=Ee=>nf(d)&&Kc(e,Ee,o,n),Ye=(Ee,ye,Fe)=>{const ft=hh(d)&&rg(e.schema,Ee)&&uh(e,ye,ue);return Fe&&ft},Ie=(Ee,ye,Fe,ft)=>{const ve=Ee.nodeName.toLowerCase(),et=uh(e,ue,ve)&&uh(e,ye,ue),bt=!j&&Ve(Ee)&&g1(Ee.data),Jt=Qn(Ee),bo=!rs(d)||!U.isBlock(Ee);return(Fe||ft)&&et&&!bt&&!Jt&&bo};fh(U,W,Ee=>{let ye;const Fe=ft=>{let ve=!1,et=de,bt=!1;const Jt=ft.parentNode,bo=Jt.nodeName.toLowerCase(),ia=U.getContentEditable(ft);xe(ia)&&(et=de,de=ia==="true",ve=!0,bt=Qb(e,ft));const yi=de&&!ve;if(fo(ft)&&!vP(e,d,ft,bo)){ye=null,Vc(d)&&U.remove(ft);return}if($e(ft)){ye=null;return}if(Ye(ft,bo,yi)){const wa=U.rename(ft,ue);k(wa),te.push(wa),ye=null;return}if(Zi(d)){let wa=M(i,ft);if(!wa&&xe(Jt)&&ty(d)&&(wa=M(i,Jt)),!rs(d)||wa){ye=null;return}}xe(Ae)&&Ie(ft,bo,yi,bt)?(ye||(ye=U.clone(Ae,!1),Jt.insertBefore(ye,ft),te.push(ye)),bt&&ve&&(de=et),ye.appendChild(ft)):(ye=null,Ce(ws(ft.childNodes),Fe),ve&&(de=et),ye=null)};Ce(Ee,Fe)}),d.links===!0&&Ce(te,Ee=>{const ye=Fe=>{Fe.nodeName==="A"&&k(Fe,d),Ce(ws(Fe.childNodes),ye)};ye(Ee)}),Ce(te,Ee=>{const ye=ve=>{let et=0;return Ce(ve.childNodes,bt=>{!Yb(bt)&&!Yt(bt)&&et++}),et},Fe=ve=>xn(ve.childNodes,Nr).filter(et=>U.getContentEditable(et)!=="false"&&Ay(U,et,d)).map(et=>{const bt=U.clone(et,!1);return k(bt),U.replace(bt,ve,!0),U.remove(et,!0),bt}).getOr(ve),ft=ye(Ee);if((te.length>1||!U.isBlock(Ee))&&ft===0){U.remove(Ee,!0);return}(rs(d)||Vc(d)&&d.wrapper)&&(!d.exact&&ft===1&&(Ee=Fe(Ee)),pP(e,i,n,Ee),fP(e,d,o,n,Ee),gP(U,d,n,Ee),mP(U,d,n,Ee),hP(U,d,n,Ee),VD(e,d,n,Ee))})},$=Je(s)?s:w.getNode();if(v.getContentEditable($)==="false"&&!Qb(e,$)){s=$,M(i,s),LC(e,o,s,n);return}if(d){if(s)if(Je(s)){if(!M(i,s)){const U=v.createRng();U.setStartBefore(s),U.setEndAfter(s),I(v,zu(v,U,i),!0)}}else I(v,s,!0);else!h||!rs(d)||ch(e).length?(w.setRng(xx(w.getRng())),zi(e,()=>{Xb(e,(U,W)=>{const j=W?U:zu(v,U,i);I(v,j,!1)})},ct),e.nodeChanged()):aP(e,o,n),Dx(e.formatter,o).each(U=>{Ce(My(e.selection),W=>GD(v,W,U,n))});pg(o,e)}LC(e,o,s,n)},KD=(e,o,n,s)=>{(s||e.selection.isEditable())&&bP(e,o,n,s)},qD=e=>It(e,"vars"),yP=(e,o)=>{e.set({}),o.on("NodeChange",n=>{YD(o,n.element,e.get())}),o.on("FormatApply FormatRemove",n=>{const s=B.from(n.node).map(i=>Je(i)?i:i.startContainer).bind(i=>gt(i)?B.some(i):B.from(i.parentElement)).getOrThunk(()=>K_(o));YD(o,s,e.get())})},K_=e=>e.selection.getStart(),XD=(e,o,n,s,i)=>od(o,d=>{const h=e.formatter.matchNode(d,n,i??{},s);return!Gn(h)},d=>kD(e,d,n)?!0:s?!1:xe(e.formatter.matchNode(d,n,i,!0))),_f=(e,o)=>{const n=o??K_(e);return kt(sg(e.dom,n),s=>gt(s)&&!Dm(s))},YD=(e,o,n)=>{const s=_f(e,o);nt(n,(i,d)=>{const h=v=>{const w=XD(e,s,d,v.similar,qD(v)?v.vars:void 0),k=w.isSome();if(v.state.get()!==k){v.state.set(k);const M=w.getOr(o);qD(v)?v.callback(k,{node:M,format:d,parents:s}):Ce(v.callbacks,H=>H(k,{node:M,format:d,parents:s}))}};Ce([i.withSimilar,i.withoutSimilar],h),Ce(i.withVars,h)})},wP=(e,o,n,s,i,d)=>{const h=o.get();Ce(n.split(","),v=>{const w=Xo(h,v).getOrThunk(()=>{const M={withSimilar:{state:vr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:vr(!1),similar:!1,callbacks:[]},withVars:[]};return h[v]=M,M}),k=()=>{const M=_f(e);return XD(e,M,v,i,d).isSome()};if(Gn(d)){const M=i?w.withSimilar:w.withoutSimilar;M.callbacks.push(s),M.callbacks.length===1&&M.state.set(k())}else w.withVars.push({state:vr(k()),similar:i,vars:d,callback:s})}),o.set(h)},CP=(e,o,n)=>{const s=e.get();Ce(o.split(","),i=>Xo(s,i).each(d=>{s[i]={withSimilar:{...d.withSimilar,callbacks:kt(d.withSimilar.callbacks,h=>h!==n)},withoutSimilar:{...d.withoutSimilar,callbacks:kt(d.withoutSimilar.callbacks,h=>h!==n)},withVars:kt(d.withVars,h=>h.callback!==n)}})),e.set(s)},xP=(e,o,n,s,i,d)=>(wP(e,o,n,s,i,d),{unbind:()=>CP(o,n,s)}),QD=(e,o,n,s)=>{const i=e.formatter.get(o);i&&(hg(e,o,n,s)&&(!("toggle"in i[0])||i[0].toggle)?G_(e,o,n,s):KD(e,o,n,s))},JD=fe.explode,eM=()=>{const e={};return{addFilter:(o,n)=>{Ce(JD(o),s=>{It(e,s)||(e[s]={name:s,callbacks:[]}),e[s].callbacks.push(n)})},getFilters:()=>Dl(e),removeFilter:(o,n)=>{Ce(JD(o),s=>{if(It(e,s))if(xe(n)){const i=e[s],d=kt(i.callbacks,h=>h!==n);d.length>0?i.callbacks=d:delete e[s]}else delete e[s]})}}},SP=(e,o)=>{Ce(o,n=>{e.attr(n,null)})},kP=(e,o,n)=>{e.addNodeFilter("font",s=>{Ce(s,i=>{const d=o.parse(i.attr("style")),h=i.attr("color"),v=i.attr("face"),w=i.attr("size");h&&(d.color=h),v&&(d["font-family"]=v),w&&ti(w).each(k=>{d["font-size"]=n[k-1]}),i.name="span",i.attr("style",o.serialize(d)),SP(i,["color","face","size"])})})},_P=(e,o,n)=>{e.addNodeFilter("strike",s=>{const i=o.type!=="html4";Ce(s,d=>{if(i)d.name="s";else{const h=n.parse(d.attr("style"));h["text-decoration"]="line-through",d.name="span",d.attr("style",n.serialize(h))}})})},EP=(e,o,n)=>{var s;const i=Eu();o.convert_fonts_to_spans&&kP(e,i,fe.explode((s=o.font_size_legacy_values)!==null&&s!==void 0?s:"")),_P(e,n,i)},OP=(e,o,n)=>{o.inline_styles&&EP(e,o,n)},tM=(e,o,n)=>{o.addNodeFilter("br",(s,i,d)=>{const h=fe.extend({},n.getBlockElements()),v=n.getNonEmptyElements(),w=n.getWhitespaceElements();h.body=1;const k=M=>M.name in h||Yv(n,M);for(let M=0,H=s.length;M<H;M++){let I=s[M],$=I.parent;if($&&k($)&&I===$.lastChild){let U=I.prev;for(;U;){const W=U.name;if(W!=="span"||U.attr("data-mce-type")!=="bookmark"){W==="br"&&(I=null);break}U=U.prev}if(I&&(I.remove(),Z0(n,v,w,$))){const W=n.getElementRule($.name);W&&(W.removeEmpty?$.remove():W.paddEmpty&&p_(e,d,k,$))}}else{let U=I;for(;$&&$.firstChild===U&&$.lastChild===U&&(U=$,!h[$.name]);)$=$.parent;if(U===$){const W=new mi("#text",3);W.value=vn,I.replace(W)}}}})},TP=e=>fetch(e).then(o=>o.ok?o.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),AP=e=>{const o=/([a-z0-9+\/=\s]+)/i.exec(e);return o?o[1]:""},Ny=e=>{const[o,...n]=e.split(","),s=n.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const d=i[2]===";base64",h=d?AP(s):decodeURIComponent(s);return B.some({type:i[1],data:h,base64Encoded:d})}else return B.none()},q_=(e,o,n=!0)=>{let s=o;if(n)try{s=atob(o)}catch{return B.none()}const i=new Uint8Array(s.length);for(let d=0;d<i.length;d++)i[d]=s.charCodeAt(d);return B.some(new Blob([i],{type:e}))},Ry=e=>new Promise((o,n)=>{Ny(e).bind(({type:s,data:i,base64Encoded:d})=>q_(s,i,d)).fold(()=>n("Invalid data URI"),o)}),oM=e=>$o(e,"blob:")?TP(e):$o(e,"data:")?Ry(e):Promise.reject("Unknown URI format"),q0=e=>new Promise((o,n)=>{const s=new FileReader;s.onloadend=()=>{o(s.result)},s.onerror=()=>{var i;n((i=s.error)===null||i===void 0?void 0:i.message)},s.readAsDataURL(e)});let Ly=0;const nM=e=>(e||"blobid")+Ly++,rM=(e,o,n)=>Ny(e).bind(({data:s,type:i,base64Encoded:d})=>{if(o&&!d)return B.none();{const h=d?s:btoa(s);return n(h,i)}}),sM=(e,o,n)=>{const s=e.create(nM(),o,n);return e.add(s),s},aM=(e,o,n=!1)=>rM(o,n,(s,i)=>B.from(e.getByData(s,i)).orThunk(()=>q_(i,s).map(d=>sM(e,d,s)))),DP=(e,o)=>{const n=()=>Promise.reject("Invalid data URI");if($o(o,"blob:")){const s=e.getByUri(o);return xe(s)?Promise.resolve(s):oM(o).then(i=>q0(i).then(d=>rM(d,!1,h=>B.some(sM(e,i,h))).getOrThunk(n)))}else return $o(o,"data:")?aM(e,o).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},iM=e=>xe(e.attr("data-mce-bogus")),MP=e=>e.attr("src")===ae.transparentSrc||xe(e.attr("data-mce-placeholder")),lM=(e,o)=>{const{blob_cache:n}=o;if(n){const s=i=>{const d=i.attr("src");MP(i)||iM(i)||oo(d)||aM(n,d,!0).each(h=>{i.attr("src",h.blobUri())})};e.addAttributeFilter("src",i=>Ce(i,s))}},NP=(e,o)=>{const n=e.schema;o.remove_trailing_brs&&tM(o,e,n),e.addAttributeFilter("href",i=>{let d=i.length;const h=w=>w.split(" ").filter(k=>k.length>0).concat(["noopener"]).sort().join(" "),v=w=>{const k=w?fe.trim(w):"";return/\b(noopener)\b/g.test(k)?k:h(k)};if(!o.allow_unsafe_link_target)for(;d--;){const w=i[d];w.name==="a"&&w.attr("target")==="_blank"&&w.attr("rel",v(w.attr("rel")))}}),o.allow_html_in_named_anchor||e.addAttributeFilter("id,name",i=>{let d=i.length,h,v,w,k;for(;d--;)if(k=i[d],k.name==="a"&&k.firstChild&&!k.attr("href"))for(w=k.parent,h=k.lastChild;h&&w;)v=h.prev,w.insert(h,k),h=v}),o.fix_list_elements&&e.addNodeFilter("ul,ol",i=>{let d=i.length,h,v;for(;d--;)if(h=i[d],v=h.parent,v&&(v.name==="ul"||v.name==="ol"))if(h.prev&&h.prev.name==="li")h.prev.append(h);else{const w=new mi("li",1);w.attr("style","list-style-type: none"),h.wrap(w)}});const s=n.getValidClasses();o.validate&&s&&e.addAttributeFilter("class",i=>{var d;let h=i.length;for(;h--;){const v=i[h],w=(d=v.attr("class"))!==null&&d!==void 0?d:"",k=fe.explode(w," ");let M="";for(let H=0;H<k.length;H++){const I=k[H];let $=!1,U=s["*"];U&&U[I]&&($=!0),U=s[v.name],!$&&U&&U[I]&&($=!0),$&&(M&&(M+=" "),M+=I)}M.length||(M=null),v.attr("class",M)}}),lM(e,o)};function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ku(e)}function Vx(e,o){return Vx=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},Vx(e,o)}function ss(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gi(e,o,n){return ss()?Gi=Reflect.construct:Gi=function(s,i,d){var h=[null];h.push.apply(h,i);var v=Function.bind.apply(s,h),w=new v;return d&&Vx(w,d.prototype),w},Gi.apply(null,arguments)}function Sl(e){return Mh(e)||Nh(e)||RP(e)||X0()}function Mh(e){if(Array.isArray(e))return X_(e)}function Nh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RP(e,o){if(e){if(typeof e=="string")return X_(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X_(e,o)}}function X_(e,o){(o==null||o>e.length)&&(o=e.length);for(var n=0,s=new Array(o);n<o;n++)s[n]=e[n];return s}function X0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y0=Object.hasOwnProperty,Ef=Object.setPrototypeOf,cM=Object.isFrozen,Y_=Object.getPrototypeOf,dM=Object.getOwnPropertyDescriptor,pi=Object.freeze,qu=Object.seal,LP=Object.create,Q_=typeof Reflect<"u"&&Reflect,zx=Q_.apply,J_=Q_.construct;zx||(zx=function(e,o,n){return e.apply(o,n)}),pi||(pi=function(e){return e}),qu||(qu=function(e){return e}),J_||(J_=function(e,o){return Gi(e,Sl(o))});var HP=Xc(Array.prototype.forEach),PP=Xc(Array.prototype.pop),Hy=Xc(Array.prototype.push),Py=Xc(String.prototype.toLowerCase),BP=Xc(String.prototype.match),qc=Xc(String.prototype.replace),uM=Xc(String.prototype.indexOf),IP=Xc(String.prototype.trim),fi=Xc(RegExp.prototype.test),eE=FP(TypeError);function Xc(e){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return zx(e,o,s)}}function FP(e){return function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return J_(e,n)}}function en(e,o){Ef&&Ef(e,null);for(var n=o.length;n--;){var s=o[n];if(typeof s=="string"){var i=Py(s);i!==s&&(cM(o)||(o[n]=i),s=i)}e[s]=!0}return e}function Rh(e){var o=LP(null),n;for(n in e)zx(Y0,e,[n])&&(o[n]=e[n]);return o}function By(e,o){for(;e!==null;){var n=dM(e,o);if(n){if(n.get)return Xc(n.get);if(typeof n.value=="function")return Xc(n.value)}e=Y_(e)}function s(i){return console.warn("fallback value for",i),null}return s}var tE=pi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zx=pi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ux=pi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mM=pi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),oE=pi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),VP=pi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gM=pi(["#text"]),Wx=pi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Of=pi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nE=pi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Iy=pi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jx=qu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zP=qu(/<%[\w\W]*|[\w\W]*%>/gm),ZP=qu(/^data-[\-\w.\u00B7-\uFFFF]/),Lh=qu(/^aria-[\-\w]+$/),rE=qu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hM=qu(/^(?:\w+script|data):/i),Fy=qu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pM=qu(/^html$/i),sE=function(){return typeof window>"u"?null:window},fM=function(e,o){if(Ku(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,s="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(s)&&(n=o.currentScript.getAttribute(s));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(d){return d}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function aE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sE(),o=function(me){return aE(me)};if(o.version="2.3.8",o.removed=[],!e||!e.document||e.document.nodeType!==9)return o.isSupported=!1,o;var n=e.document,s=e.document,i=e.DocumentFragment,d=e.HTMLTemplateElement,h=e.Node,v=e.Element,w=e.NodeFilter,k=e.NamedNodeMap,M=k===void 0?e.NamedNodeMap||e.MozNamedAttrMap:k,H=e.HTMLFormElement,I=e.DOMParser,$=e.trustedTypes,U=v.prototype,W=By(U,"cloneNode"),j=By(U,"nextSibling"),te=By(U,"childNodes"),de=By(U,"parentNode");if(typeof d=="function"){var ue=s.createElement("template");ue.content&&ue.content.ownerDocument&&(s=ue.content.ownerDocument)}var Ae=fM($,n),$e=Ae?Ae.createHTML(""):"",Ye=s,Ie=Ye.implementation,Ee=Ye.createNodeIterator,ye=Ye.createDocumentFragment,Fe=Ye.getElementsByTagName,ft=n.importNode,ve={};try{ve=Rh(s).documentMode?s.documentMode:{}}catch{}var et={};o.isSupported=typeof de=="function"&&Ie&&typeof Ie.createHTMLDocument<"u"&&ve!==9;var bt=jx,Jt=zP,bo=ZP,ia=Lh,yi=hM,wa=Fy,wi=rE,No=null,gc=en({},[].concat(Sl(tE),Sl(Zx),Sl(Ux),Sl(oE),Sl(gM))),gr=null,Ht=en({},[].concat(Sl(Wx),Sl(Of),Sl(nE),Sl(Iy))),Le=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),t=null,r=null,a=!0,l=!0,u=!1,g=!1,f=!1,y=!1,C=!1,_=!1,T=!1,D=!1,R=!0,V=!0,Q=!1,le={},Oe=null,Y=en({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ne=null,be=en({},["audio","video","img","source","image","track"]),pe=null,Pe=en({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",st="http://www.w3.org/2000/svg",pt="http://www.w3.org/1999/xhtml",io=pt,je=!1,qe,Et=["application/xhtml+xml","text/html"],yo="text/html",kn,Ze=null,mt=s.createElement("form"),at=function(me){return me instanceof RegExp||me instanceof Function},Bt=function(me){Ze&&Ze===me||((!me||Ku(me)!=="object")&&(me={}),me=Rh(me),No="ALLOWED_TAGS"in me?en({},me.ALLOWED_TAGS):gc,gr="ALLOWED_ATTR"in me?en({},me.ALLOWED_ATTR):Ht,pe="ADD_URI_SAFE_ATTR"in me?en(Rh(Pe),me.ADD_URI_SAFE_ATTR):Pe,ne="ADD_DATA_URI_TAGS"in me?en(Rh(be),me.ADD_DATA_URI_TAGS):be,Oe="FORBID_CONTENTS"in me?en({},me.FORBID_CONTENTS):Y,t="FORBID_TAGS"in me?en({},me.FORBID_TAGS):{},r="FORBID_ATTR"in me?en({},me.FORBID_ATTR):{},le="USE_PROFILES"in me?me.USE_PROFILES:!1,a=me.ALLOW_ARIA_ATTR!==!1,l=me.ALLOW_DATA_ATTR!==!1,u=me.ALLOW_UNKNOWN_PROTOCOLS||!1,g=me.SAFE_FOR_TEMPLATES||!1,f=me.WHOLE_DOCUMENT||!1,_=me.RETURN_DOM||!1,T=me.RETURN_DOM_FRAGMENT||!1,D=me.RETURN_TRUSTED_TYPE||!1,C=me.FORCE_BODY||!1,R=me.SANITIZE_DOM!==!1,V=me.KEEP_CONTENT!==!1,Q=me.IN_PLACE||!1,wi=me.ALLOWED_URI_REGEXP||wi,io=me.NAMESPACE||pt,me.CUSTOM_ELEMENT_HANDLING&&at(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Le.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&at(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Le.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Le.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe=Et.indexOf(me.PARSER_MEDIA_TYPE)===-1?qe=yo:qe=me.PARSER_MEDIA_TYPE,kn=qe==="application/xhtml+xml"?function(zt){return zt}:Py,g&&(l=!1),T&&(_=!0),le&&(No=en({},Sl(gM)),gr=[],le.html===!0&&(en(No,tE),en(gr,Wx)),le.svg===!0&&(en(No,Zx),en(gr,Of),en(gr,Iy)),le.svgFilters===!0&&(en(No,Ux),en(gr,Of),en(gr,Iy)),le.mathMl===!0&&(en(No,oE),en(gr,nE),en(gr,Iy))),me.ADD_TAGS&&(No===gc&&(No=Rh(No)),en(No,me.ADD_TAGS)),me.ADD_ATTR&&(gr===Ht&&(gr=Rh(gr)),en(gr,me.ADD_ATTR)),me.ADD_URI_SAFE_ATTR&&en(pe,me.ADD_URI_SAFE_ATTR),me.FORBID_CONTENTS&&(Oe===Y&&(Oe=Rh(Oe)),en(Oe,me.FORBID_CONTENTS)),V&&(No["#text"]=!0),f&&en(No,["html","head","body"]),No.table&&(en(No,["tbody"]),delete t.tbody),pi&&pi(me),Ze=me)},oe=en({},["mi","mo","mn","ms","mtext"]),se=en({},["foreignobject","desc","title","annotation-xml"]),ke=en({},["title","style","font","a","script"]),_e=en({},Zx);en(_e,Ux),en(_e,mM);var rt=en({},oE);en(rt,VP);var ro=function(me){var zt=de(me);(!zt||!zt.tagName)&&(zt={namespaceURI:pt,tagName:"template"});var St=Py(me.tagName),Dn=Py(zt.tagName);return me.namespaceURI===st?zt.namespaceURI===pt?St==="svg":zt.namespaceURI===Ge?St==="svg"&&(Dn==="annotation-xml"||oe[Dn]):!!_e[St]:me.namespaceURI===Ge?zt.namespaceURI===pt?St==="math":zt.namespaceURI===st?St==="math"&&se[Dn]:!!rt[St]:me.namespaceURI===pt?zt.namespaceURI===st&&!se[Dn]||zt.namespaceURI===Ge&&!oe[Dn]?!1:!rt[St]&&(ke[St]||!_e[St]):!1},eo=function(me){Hy(o.removed,{element:me});try{me.parentNode.removeChild(me)}catch{try{me.outerHTML=$e}catch{me.remove()}}},Cr=function(me,zt){try{Hy(o.removed,{attribute:zt.getAttributeNode(me),from:zt})}catch{Hy(o.removed,{attribute:null,from:zt})}if(zt.removeAttribute(me),me==="is"&&!gr[me])if(_||T)try{eo(zt)}catch{}else try{zt.setAttribute(me,"")}catch{}},jn=function(me){var zt,St;if(C)me="<remove></remove>"+me;else{var Dn=BP(me,/^[\r\n\t ]+/);St=Dn&&Dn[0]}qe==="application/xhtml+xml"&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");var Lr=Ae?Ae.createHTML(me):me;if(io===pt)try{zt=new I().parseFromString(Lr,qe)}catch{}if(!zt||!zt.documentElement){zt=Ie.createDocument(io,"template",null);try{zt.documentElement.innerHTML=je?"":Lr}catch{}}var Ba=zt.body||zt.documentElement;return me&&St&&Ba.insertBefore(s.createTextNode(St),Ba.childNodes[0]||null),io===pt?Fe.call(zt,f?"html":"body")[0]:f?zt.documentElement:Ba},im=function(me){return Ee.call(me.ownerDocument||me,me,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,!1)},lm=function(me){return me instanceof H&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof M)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function")},Jh=function(me){return Ku(h)==="object"?me instanceof h:me&&Ku(me)==="object"&&typeof me.nodeType=="number"&&typeof me.nodeName=="string"},Ci=function(me,zt,St){et[me]&&HP(et[me],function(Dn){Dn.call(o,zt,St,Ze)})},cm=function(me){var zt;if(Ci("beforeSanitizeElements",me,null),lm(me)||fi(/[\u0080-\uFFFF]/,me.nodeName))return eo(me),!0;var St=kn(me.nodeName);if(Ci("uponSanitizeElement",me,{tagName:St,allowedTags:No}),me.hasChildNodes()&&!Jh(me.firstElementChild)&&(!Jh(me.content)||!Jh(me.content.firstElementChild))&&fi(/<[/\w]/g,me.innerHTML)&&fi(/<[/\w]/g,me.textContent)||St==="select"&&fi(/<template/i,me.innerHTML))return eo(me),!0;if(!No[St]||t[St]){if(!t[St]&&F4(St)&&(Le.tagNameCheck instanceof RegExp&&fi(Le.tagNameCheck,St)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(St)))return!1;if(V&&!Oe[St]){var Dn=de(me)||me.parentNode,Lr=te(me)||me.childNodes;if(Lr&&Dn)for(var Ba=Lr.length,la=Ba-1;la>=0;--la)Dn.insertBefore(W(Lr[la],!0),j(me))}return eo(me),!0}return me instanceof v&&!ro(me)||(St==="noscript"||St==="noembed")&&fi(/<\/no(script|embed)/i,me.innerHTML)?(eo(me),!0):(g&&me.nodeType===3&&(zt=me.textContent,zt=qc(zt,bt," "),zt=qc(zt,Jt," "),me.textContent!==zt&&(Hy(o.removed,{element:me.cloneNode()}),me.textContent=zt)),Ci("afterSanitizeElements",me,null),!1)},I4=function(me,zt,St){if(R&&(zt==="id"||zt==="name")&&(St in s||St in mt))return!1;if(!(l&&!r[zt]&&fi(bo,zt))&&!(a&&fi(ia,zt))){if(!gr[zt]||r[zt]){if(!(F4(me)&&(Le.tagNameCheck instanceof RegExp&&fi(Le.tagNameCheck,me)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(me))&&(Le.attributeNameCheck instanceof RegExp&&fi(Le.attributeNameCheck,zt)||Le.attributeNameCheck instanceof Function&&Le.attributeNameCheck(zt))||zt==="is"&&Le.allowCustomizedBuiltInElements&&(Le.tagNameCheck instanceof RegExp&&fi(Le.tagNameCheck,St)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(St))))return!1}else if(!pe[zt]&&!fi(wi,qc(St,wa,""))&&!((zt==="src"||zt==="xlink:href"||zt==="href")&&me!=="script"&&uM(St,"data:")===0&&ne[me])&&!(u&&!fi(yi,qc(St,wa,"")))&&St)return!1}return!0},F4=function(me){return me.indexOf("-")>0},Jf=function(me){var zt,St,Dn,Lr;Ci("beforeSanitizeAttributes",me,null);var Ba=me.attributes;if(Ba){var la={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gr};for(Lr=Ba.length;Lr--;){zt=Ba[Lr];var Av=zt,Kd=Av.name,hc=Av.namespaceURI;St=Kd==="value"?zt.value:IP(zt.value),Dn=kn(Kd);var _L=St;if(la.attrName=Dn,la.attrValue=St,la.keepAttr=!0,la.forceKeepAttr=void 0,Ci("uponSanitizeAttribute",me,la),St=la.attrValue,!la.forceKeepAttr){if(!la.keepAttr){Cr(Kd,me);continue}if(fi(/\/>/i,St)){Cr(Kd,me);continue}g&&(St=qc(St,bt," "),St=qc(St,Jt," "));var z5=kn(me.nodeName);if(!I4(z5,Dn,St)){Cr(Kd,me);continue}if(St!==_L)try{hc?me.setAttributeNS(hc,Kd,St):me.setAttribute(Kd,St)}catch{Cr(Kd,me)}}}Ci("afterSanitizeAttributes",me,null)}},V4=function me(zt){var St,Dn=im(zt);for(Ci("beforeSanitizeShadowDOM",zt,null);St=Dn.nextNode();)Ci("uponSanitizeShadowNode",St,null),!cm(St)&&(St.content instanceof i&&me(St.content),Jf(St));Ci("afterSanitizeShadowDOM",zt,null)};return o.sanitize=function(me,zt){var St,Dn,Lr,Ba,la;if(je=!me,je&&(me="<!-->"),typeof me!="string"&&!Jh(me)){if(typeof me.toString!="function")throw eE("toString is not a function");if(me=me.toString(),typeof me!="string")throw eE("dirty is not a string, aborting")}if(!o.isSupported){if(Ku(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof me=="string")return e.toStaticHTML(me);if(Jh(me))return e.toStaticHTML(me.outerHTML)}return me}if(y||Bt(zt),o.removed=[],typeof me=="string"&&(Q=!1),Q){if(me.nodeName){var Av=kn(me.nodeName);if(!No[Av]||t[Av])throw eE("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof h)St=jn("<!---->"),Dn=St.ownerDocument.importNode(me,!0),Dn.nodeType===1&&Dn.nodeName==="BODY"||Dn.nodeName==="HTML"?St=Dn:St.appendChild(Dn);else{if(!_&&!g&&!f&&me.indexOf("<")===-1)return Ae&&D?Ae.createHTML(me):me;if(St=jn(me),!St)return _?null:D?$e:""}St&&C&&eo(St.firstChild);for(var Kd=im(Q?me:St);Lr=Kd.nextNode();)Lr.nodeType===3&&Lr===Ba||cm(Lr)||(Lr.content instanceof i&&V4(Lr.content),Jf(Lr),Ba=Lr);if(Ba=null,Q)return me;if(_){if(T)for(la=ye.call(St.ownerDocument);St.firstChild;)la.appendChild(St.firstChild);else la=St;return gr.shadowroot&&(la=ft.call(n,la,!0)),la}var hc=f?St.outerHTML:St.innerHTML;return f&&No["!doctype"]&&St.ownerDocument&&St.ownerDocument.doctype&&St.ownerDocument.doctype.name&&fi(pM,St.ownerDocument.doctype.name)&&(hc="<!DOCTYPE "+St.ownerDocument.doctype.name+`>
`+hc),g&&(hc=qc(hc,bt," "),hc=qc(hc,Jt," ")),Ae&&D?Ae.createHTML(hc):hc},o.setConfig=function(me){Bt(me),y=!0},o.clearConfig=function(){Ze=null,y=!1},o.isValidAttribute=function(me,zt,St){Ze||Bt({});var Dn=kn(me),Lr=kn(zt);return I4(Dn,Lr,St)},o.addHook=function(me,zt){typeof zt=="function"&&(et[me]=et[me]||[],Hy(et[me],zt))},o.removeHook=function(me){if(et[me])return PP(et[me])},o.removeHooks=function(me){et[me]&&(et[me]=[])},o.removeAllHooks=function(){et={}},o}var UP=aE();const vM=fe.each,WP=fe.trim,iE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],jP={ftp:21,http:80,https:443,mailto:25},bM=["img","video"],$P=(e,o)=>xe(e)?!e:xe(o)?!Ut(bM,o):!0,GP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},yM=(e,o,n)=>{const s=GP(o).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?$P(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class sc{static parseDataUri(o){let n;const s=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(s[0]);return i&&(n=i[1]),{type:n,data:s[1]}}static isDomSafe(o,n,s={}){if(s.allow_script_urls)return!0;{const i=wd.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!yM(s,i,n)}}static getDocumentBaseUrl(o){var n;let s;return o.protocol.indexOf("http")!==0&&o.protocol!=="file:"?s=(n=o.href)!==null&&n!==void 0?n:"":s=o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(o,n={}){this.path="",this.directory="",o=WP(o),this.settings=n;const s=n.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o)){i.source=o;return}const d=o.indexOf("//")===0;if(o.indexOf("/")===0&&!d&&(o=(s&&s.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const v=s?s.path:new sc(document.location.href).directory;if((s==null?void 0:s.protocol)==="")o="//mce_host"+i.toAbsPath(v,o);else{const w=/([^#?]*)([#?]?.*)/.exec(o);w&&(o=(s&&s.protocol||"http")+"://mce_host"+i.toAbsPath(v,w[1])+w[2])}}o=o.replace(/@@/g,"(mce_at)");const h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);h&&vM(iE,(v,w)=>{let k=h[w];k&&(k=k.replace(/\(mce_at\)/g,"@@")),i[v]=k}),s&&(i.protocol||(i.protocol=s.protocol),i.userInfo||(i.userInfo=s.userInfo),!i.port&&i.host==="mce_host"&&(i.port=s.port),(!i.host||i.host==="mce_host")&&(i.host=s.host),i.source=""),d&&(i.protocol="")}setPath(o){const n=/^(.*?)\/?(\w+)?$/.exec(o);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(o){if(o==="./")return o;const n=new sc(o,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),i=n.getURI();if(s===i||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===i)return s;let d=this.toRelPath(this.path,n.path);return n.query&&(d+="?"+n.query),n.anchor&&(d+="#"+n.anchor),d}toAbsolute(o,n){const s=new sc(o,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const n=this.protocol?jP[this.protocol]:null;if(n&&(this.port||n)==(o.port||n))return!0}return!1}toRelPath(o,n){let s=0,i="",d,h;const v=o.substring(0,o.lastIndexOf("/")).split("/"),w=n.split("/");if(v.length>=w.length){for(d=0,h=v.length;d<h;d++)if(d>=w.length||v[d]!==w[d]){s=d+1;break}}if(v.length<w.length){for(d=0,h=w.length;d<h;d++)if(d>=v.length||v[d]!==w[d]){s=d+1;break}}if(s===1)return n;for(d=0,h=v.length-(s-1);d<h;d++)i+="../";for(d=s-1,h=w.length;d<h;d++)d!==s-1?i+="/"+w[d]:i+=w[d];return i}toAbsPath(o,n){let s=0;const i=/\/$/.test(n)?"/":"",d=o.split("/"),h=n.split("/"),v=[];vM(d,H=>{H&&v.push(H)});const w=[];for(let H=h.length-1;H>=0;H--)if(!(h[H].length===0||h[H]===".")){if(h[H]===".."){s++;continue}if(s>0){s--;continue}w.push(h[H])}const k=v.length-s;let M;return k<=0?M=dn(w).join("/"):M=v.slice(0,k).join("/")+"/"+dn(w).join("/"),M.indexOf("/")!==0&&(M="/"+M),i&&M.lastIndexOf("/")!==M.length-1&&(M+=i),M}getURI(o=!1){let n;return(!this.source||o)&&(n="",o||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const Pa=fe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),lE="data-mce-type";let Vy=0;const Hh=(e,o,n,s)=>{var i,d,h,v;const w=o.validate,k=n.getSpecialElements();e.nodeType===pm&&!o.allow_conditional_comments&&/^\[if/i.test((i=e.nodeValue)!==null&&i!==void 0?i:"")&&(e.nodeValue=" "+e.nodeValue);const M=(d=s==null?void 0:s.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(e.nodeType!==il||M==="body")return;const H=K.fromDom(e),I=Di(H,lE),$=Nn(H,"data-mce-bogus");if(!I&&G($)){$==="all"?Ho(H):no(H);return}const U=n.getElementRule(M);if(w&&!U){It(k,M)?Ho(H):no(H);return}else xe(s)&&(s.allowedTags[M]=!0);if(w&&U&&!I){if(Ce((h=U.attributesForced)!==null&&h!==void 0?h:[],W=>{En(H,W.name,W.value==="{$uid}"?`mce_${Vy++}`:W.value)}),Ce((v=U.attributesDefault)!==null&&v!==void 0?v:[],W=>{Di(H,W.name)||En(H,W.name,W.value==="{$uid}"?`mce_${Vy++}`:W.value)}),U.attributesRequired&&!Wo(U.attributesRequired,W=>Di(H,W))){no(H);return}if(U.removeEmptyAttrs&&au(H)){no(H);return}U.outputName&&U.outputName!==M&&Ap(H,U.outputName)}},cE=(e,o,n,s,i)=>!(s in Pa&&yM(e,i,n))&&(!e.validate||o.isValid(n,s)||$o(s,"data-")||$o(s,"aria-")),vi=(e,o)=>e.hasAttribute(lE)&&(o==="id"||o==="class"||o==="style"),Ph=(e,o)=>e in o.getBoolAttrs(),wM=(e,o,n)=>{const{attributes:s}=e;for(let i=s.length-1;i>=0;i--){const d=s[i],h=d.name,v=d.value;!cE(o,n,e.tagName.toLowerCase(),h,v)&&!vi(e,h)?e.removeAttribute(h):Ph(h,n)&&e.setAttribute(h,h)}},KP=(e,o)=>{const n=UP();return n.addHook("uponSanitizeElement",(s,i)=>{Hh(s,e,o,i)}),n.addHook("uponSanitizeAttribute",(s,i)=>{const d=s.tagName.toLowerCase(),{attrName:h,attrValue:v}=i;i.keepAttr=cE(e,o,d,h,v),i.keepAttr?(i.allowedAttributes[h]=!0,Ph(h,o)&&(i.attrValue=h),e.allow_svg_data_urls&&$o(v,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):vi(s,h)&&(i.forceKeepAttr=!0)}),n},CM=(e,o)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=o,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},qP=(e,o)=>{if(e.sanitize){const n=KP(e,o);return(s,i)=>{n.sanitize(s,CM(e,i)),n.removed=[]}}else return(n,s)=>{const i=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let d;for(;d=i.nextNode();)Hh(d,e,o),gt(d)&&wM(d,e,o)}},dE=fe.makeMap,Q0=fe.extend,$x=(e,o,n)=>{const s=e.name,i=s in n&&s!=="title"&&s!=="textarea",d=o.childNodes;for(let h=0,v=d.length;h<v;h++){const w=d[h],k=new mi(w.nodeName.toLowerCase(),w.nodeType);if(gt(w)){const M=w.attributes;for(let H=0,I=M.length;H<I;H++){const $=M[H];k.attr($.name,$.value)}}else Ve(w)?(k.value=w.data,i&&(k.raw=!0)):(Js(w)||$4(w)||Vn(w))&&(k.value=w.data);$x(k,w,n),e.append(k)}},XP=(e,o,n)=>{const s=[];for(let i=e,d=i;i;d=i,i=i.walk()){const h=i;Ce(o,v=>v(h)),oo(h.parent)&&h!==e?i=d:s.push(h)}for(let i=s.length-1;i>=0;i--){const d=s[i];Ce(n,h=>h(d))}},xM=(e,o,n,s)=>{const i=n.validate,d=o.getNonEmptyElements(),h=o.getWhitespaceElements(),v=Q0(dE("script,style,head,html,body,title,meta,param"),o.getBlockElements()),w=Cp(o),k=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,H=/[ \t\r\n]+$/,I=j=>{let te=j.parent;for(;xe(te);){if(te.name in h)return!0;te=te.parent}return!1},$=j=>{let te=j;for(;xe(te);){if(te.name in w)return Z0(o,d,h,te);te=te.parent}return!1},U=j=>j.name in v||Yv(o,j),W=(j,te)=>{const de=te?j.prev:j.next;return xe(de)||oo(j.parent)?!1:U(j.parent)&&(j.parent!==e||s.isRootContent===!0)};return[j=>{var te;if(j.type===3&&!I(j)){let de=(te=j.value)!==null&&te!==void 0?te:"";de=de.replace(k," "),(yx(j.prev,U)||W(j,!0))&&(de=de.replace(M,"")),de.length===0?j.remove():j.value=de}},j=>{var te;if(j.type===1){const de=o.getElementRule(j.name);if(i&&de){const ue=Z0(o,d,h,j);de.paddInEmptyBlock&&ue&&$(j)?p_(n,s,U,j):de.removeEmpty&&ue?U(j)?j.remove():j.unwrap():de.paddEmpty&&(ue||KH(j))&&p_(n,s,U,j)}}else if(j.type===3&&!I(j)){let de=(te=j.value)!==null&&te!==void 0?te:"";(j.next&&U(j.next)||W(j,!1))&&(de=de.replace(H,"")),de.length===0?j.remove():j.value=de}}]},YP=(e,o)=>{var n;const s=(n=o.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Bh=(e={},o=_u())=>{const n=eM(),s=eM(),i={validate:!0,root_name:"body",sanitize:!0,...e},d=new DOMParser,h=qP(i,o),v=(de,ue,Ae="html")=>{const $e=Ae==="xhtml"?"application/xhtml+xml":"text/html",Ye=It(o.getSpecialElements(),ue.toLowerCase()),Ie=Ye?`<${ue}>${de}</${ue}>`:de,Ee=Ae==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ie}</body></html>`:`<body>${Ie}</body>`,ye=d.parseFromString(Ee,$e).body;return h(ye,$e),Ye?ye.firstChild:ye},w=n.addFilter,k=n.getFilters,M=n.removeFilter,H=s.addFilter,I=s.getFilters,$=s.removeFilter,U=(de,ue)=>{v_(o,de)&&ue.push(de)},W=(de,ue)=>{const Ae=G(ue.attr(lE)),$e=ue.type===1&&!It(de,ue.name)&&!Yv(o,ue);return ue.type===3||$e&&!Ae},j=(de,ue)=>{const Ae=Q0(dE("script,style,head,html,body,title,meta,param"),o.getBlockElements()),$e=/^[ \t\r\n]+/,Ye=/[ \t\r\n]+$/;let Ie=de.firstChild,Ee=null;const ye=Fe=>{var ft,ve;Fe&&(Ie=Fe.firstChild,Ie&&Ie.type===3&&(Ie.value=(ft=Ie.value)===null||ft===void 0?void 0:ft.replace($e,"")),Ie=Fe.lastChild,Ie&&Ie.type===3&&(Ie.value=(ve=Ie.value)===null||ve===void 0?void 0:ve.replace(Ye,"")))};if(o.isValidChild(de.name,ue.toLowerCase())){for(;Ie;){const Fe=Ie.next;W(Ae,Ie)?(Ee||(Ee=new mi(ue,1),Ee.attr(i.forced_root_block_attrs),de.insert(Ee,Ie)),Ee.append(Ie)):(ye(Ee),Ee=null),Ie=Fe}ye(Ee)}},te={schema:o,addAttributeFilter:H,getAttributeFilters:I,removeAttributeFilter:$,addNodeFilter:w,getNodeFilters:k,removeNodeFilter:M,parse:(de,ue={})=>{var Ae;const $e=i.validate,Ye=(Ae=ue.context)!==null&&Ae!==void 0?Ae:i.root_name,Ie=v(de,Ye,ue.format);y1(o,Ie);const Ee=new mi(Ye,11);$x(Ee,Ie,o.getSpecialElements()),Ie.innerHTML="";const[ye,Fe]=xM(Ee,o,i,ue),ft=[],ve=$e?bo=>U(bo,ft):De,et={nodes:{},attributes:{}},bt=bo=>g_(k(),I(),bo,et);if(XP(Ee,[ye,bt],[Fe,ve]),ft.reverse(),$e&&ft.length>0)if(ue.context){const{pass:bo,fail:ia}=hr(ft,yi=>yi.parent===Ee);Cx(ia,o,Ee,bt),ue.invalid=bo.length>0}else Cx(ft,o,Ee,bt);const Jt=YP(i,ue);return Jt&&(Ee.name==="body"||ue.isRootContent)&&j(Ee,Jt),ue.invalid||h_(et,ue),Ee}};return NP(te,i),OP(te,i,o),te},uE=e=>Oy(e)?wh({validate:!1}).serialize(e):e,SM=(e,o,n)=>{const s=uE(e),i=o(s);if(i.isDefaultPrevented())return i;if(Oy(e))if(i.content!==s){const d=Bh({validate:!1,forced_root_block:!1,sanitize:n}).parse(i.content,{context:e.name});return{...i,content:d}}else return{...i,content:e};else return i},kM=(e,o)=>{if(o.no_events)return na.value(o);{const n=dy(e,o);return n.isDefaultPrevented()?na.error(HC(e,{content:"",...n}).content):na.value(n)}},Id=(e,o,n)=>n.no_events?o:SM(o,s=>HC(e,{...n,content:s}),Qg(e)).content,zy=(e,o)=>{if(o.no_events)return na.value(o);{const n=SM(o.content,s=>u3(e,{...o,content:s}),Qg(e));return n.isDefaultPrevented()?(lf(e,n),na.error(void 0)):na.value(n)}},mE=(e,o,n)=>{n.no_events||lf(e,{...n,content:o})},Zy=(e,o,n)=>({element:e,width:o,rows:n}),Gx=(e,o)=>({element:e,cells:o}),_M=(e,o)=>({x:e,y:o}),gE=(e,o)=>Fa(e,o).bind(ti).getOr(1),EM=(e,o,n,s,i)=>{const d=gE(i,"rowspan"),h=gE(i,"colspan"),v=e.rows;for(let w=n;w<n+d;w++){v[w]||(v[w]=Gx(Un(s),[]));for(let k=o;k<o+h;k++){const M=v[w].cells;M[k]=w===n&&k===o?i:Km(i)}}},QP=(e,o,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[o]},JP=(e,o,n)=>{for(;QP(e,o,n);)o++;return o},OM=e=>_n(e,(o,n)=>n.cells.length>o?n.cells.length:o,0),TM=(e,o)=>{const n=e.rows;for(let s=0;s<n.length;s++){const i=n[s].cells;for(let d=0;d<i.length;d++)if(To(i[d],o))return B.some(_M(d,s))}return B.none()},AM=(e,o,n,s,i)=>{const d=[],h=e.rows;for(let v=n;v<=i;v++){const w=h[v].cells,k=o<s?w.slice(o,s+1):w.slice(s,o+1);d.push(Gx(h[v].element,k))}return d},DM=(e,o,n)=>{const s=o.x,i=o.y,d=n.x,h=n.y,v=i<h?AM(e,s,i,d,h):AM(e,s,h,d,i);return Zy(e.element,OM(v),v)},eB=(e,o)=>{const n=Km(e.element),s=K.fromTag("tbody");return Fn(s,o),ot(n,s),n},tB=e=>$t(e.rows,o=>{const n=$t(o.cells,i=>{const d=Un(i);return Fr(d,"colspan"),Fr(d,"rowspan"),d}),s=Km(o.element);return Fn(s,n),s}),oB=e=>{const o=Zy(Km(e),0,[]);return Ce(zr(e,"tr"),(n,s)=>{Ce(zr(n,"td,th"),(i,d)=>{EM(o,JP(o,d,s),s,n,i)})}),Zy(o.element,OM(o.rows),o.rows)},MM=e=>eB(e,tB(e)),hE=(e,o,n)=>TM(e,o).bind(s=>TM(e,n).map(i=>DM(e,s,i))),NM=e=>xn(e,o=>tn(o)==="ul"||tn(o)==="ol"),RM=(e,o)=>xn(e,n=>tn(n)==="li"&&Iu(n,o)).fold(Be([]),n=>NM(e).map(s=>{const i=K.fromTag(tn(s)),d=jo(P(s),(h,v)=>$o(v,"list-style"));return Am(i,d),[K.fromTag("li"),i]}).getOr([])),pE=(e,o)=>{const n=_n(o,(s,i)=>(ot(i,s),i),e);return o.length>0?p([n]):n},LM=e=>Hm(e)?Ua(e).filter(pd).fold(Be([]),o=>[e,o]):pd(e)?[e]:[],HM=(e,o)=>{const n=K.fromDom(o.commonAncestorContainer),s=mg(n,e),i=kt(s,q4),d=RM(s,o),h=i.concat(d.length?d:LM(n));return $t(h,Km)},fE=()=>p([]),PM=(e,o)=>pE(K.fromDom(o.cloneContents()),HM(e,o)),nB=(e,o)=>_m(o,"table",Me(To,e)),vE=(e,o)=>nB(e,o[0]).bind(n=>{const s=o[0],i=o[o.length-1],d=oB(n);return hE(d,s,i).map(h=>p([MM(h)]))}).getOrThunk(fE),rB=(e,o)=>o.length>0&&o[0].collapsed?fE():PM(e,o[0]),Kx=(e,o)=>{const n=_C(o,e);return n.length>0?vE(e,n):rB(e,o)},qx=(e,o)=>o>=0&&o<e.length&&Vi(e.charAt(o)),BM=e=>gl(e.innerText),sB=e=>e.map(o=>o.nodeName).getOr("div").toLowerCase(),IM=e=>B.from(e.selection.getRng()).map(o=>{var n;const s=B.from(e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),d=sB(s),h=K.fromDom(o.cloneContents());Wt(h),hA(h);const v=e.dom.add(i,d,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},h.dom),w=BM(v),k=gl((n=v.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(v),qx(k,0)||qx(k,k.length-1)){const M=s.getOr(i),H=BM(M),I=H.indexOf(w);if(I===-1)return w;{const $=qx(H,I-1),U=qx(H,I+w.length);return($?" ":"")+w+(U?" ":"")}}else return w}).getOr(""),FM=(e,o)=>{const n=e.selection.getRng(),s=e.dom.create("body"),i=e.selection.getSel(),d=L3(e,p0(i)),h=o.contextual?Kx(K.fromDom(e.getBody()),d).dom:n.cloneContents();return h&&s.appendChild(h),e.selection.serializer.serialize(s,o)},aB=(e,o)=>{if(o.format==="text")return IM(e);{const n=FM(e,o);return o.format==="tree"?n:e.selection.isCollapsed()?"":n}},iB=(e,o)=>({...e,format:o,get:!0,selection:!0,getInner:!0}),lB=(e,o,n={})=>{const s=iB(n,o);return kM(e,s).fold(go,i=>{const d=aB(e,i);return Id(e,d,i)})},bE=0,VM=1,yE=2,cB=(e,o)=>{const n=e.length+o.length+2,s=new Array(n),i=new Array(n),d=(M,H,I)=>({start:M,end:H,diag:I}),h=(M,H,I,$,U)=>{const W=w(M,H,I,$);if(W===null||W.start===H&&W.diag===H-$||W.end===M&&W.diag===M-I){let j=M,te=I;for(;j<H||te<$;)j<H&&te<$&&e[j]===o[te]?(U.push([bE,e[j]]),++j,++te):H-M>$-I?(U.push([yE,e[j]]),++j):(U.push([VM,o[te]]),++te)}else{h(M,W.start,I,W.start-W.diag,U);for(let j=W.start;j<W.end;++j)U.push([bE,e[j]]);h(W.end,H,W.end-W.diag,$,U)}},v=(M,H,I,$)=>{let U=M;for(;U-H<$&&U<I&&e[U]===o[U-H];)++U;return d(M,U,H)},w=(M,H,I,$)=>{const U=H-M,W=$-I;if(U===0||W===0)return null;const j=U-W,te=W+U,de=(te%2===0?te:te+1)/2;s[1+de]=M,i[1+de]=H+1;let ue,Ae,$e,Ye,Ie;for(ue=0;ue<=de;++ue){for(Ae=-ue;Ae<=ue;Ae+=2){for($e=Ae+de,Ae===-ue||Ae!==ue&&s[$e-1]<s[$e+1]?s[$e]=s[$e+1]:s[$e]=s[$e-1]+1,Ye=s[$e],Ie=Ye-M+I-Ae;Ye<H&&Ie<$&&e[Ye]===o[Ie];)s[$e]=++Ye,++Ie;if(j%2!==0&&j-ue<=Ae&&Ae<=j+ue&&i[$e-j]<=s[$e])return v(i[$e-j],Ae+M-I,H,$)}for(Ae=j-ue;Ae<=j+ue;Ae+=2){for($e=Ae+de-j,Ae===j-ue||Ae!==j+ue&&i[$e+1]<=i[$e-1]?i[$e]=i[$e+1]-1:i[$e]=i[$e-1],Ye=i[$e]-1,Ie=Ye-M+I-Ae;Ye>=M&&Ie>=I&&e[Ye]===o[Ie];)i[$e]=Ye--,Ie--;if(j%2===0&&-ue<=Ae&&Ae<=ue&&i[$e]<=s[$e+j])return v(i[$e],Ae+M-I,H,$)}}return null},k=[];return h(0,e.length,0,o.length,k),k},wE=e=>gt(e)?e.outerHTML:Ve(e)?wd.encodeRaw(e.data,!1):Js(e)?"<!--"+e.data+"-->":"",dB=e=>{let o;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);o=n.firstChild;)s.appendChild(o);return s},uB=(e,o,n)=>{const s=dB(o);if(e.hasChildNodes()&&n<e.childNodes.length){const i=e.childNodes[n];e.insertBefore(s,i)}else e.appendChild(s)},mB=(e,o)=>{if(e.hasChildNodes()&&o<e.childNodes.length){const n=e.childNodes[o];e.removeChild(n)}},gB=(e,o)=>{let n=0;Ce(e,s=>{s[0]===bE?n++:s[0]===VM?(uB(o,s[1],n),n++):s[0]===yE&&mB(o,n)})},hB=(e,o)=>kt($t(ws(e.childNodes),o?E(gl,wE):wE),n=>n.length>0),zM=(e,o)=>{const n=$t(ws(o.childNodes),wE);return gB(cB(n,e),o),o},pB=Ia(()=>document.implementation.createHTMLDocument("undo")),fB=e=>e.querySelector("iframe")!==null,vB=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),bB=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Xx=e=>{const o=e.serializer.getTempAttrs(),n=gA(e.getBody(),o);return fB(n)?vB(hB(n,!0)):bB(gl(n.innerHTML))},CE=(e,o,n)=>{const s=n?o.beforeBookmark:o.bookmark;o.type==="fragmented"?zM(o.fragments,e.getBody()):e.setContent(o.content,{format:"raw",no_selection:xe(s)&&Ub(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},xE=e=>e.type==="fragmented"?e.fragments.join(""):e.content,ZM=e=>{const o=K.fromTag("body",pB());return ap(o,xE(e)),Ce(zr(o,"*[data-mce-bogus]"),no),i1(o)},er=(e,o)=>xE(e)===xE(o),SE=(e,o)=>ZM(e)===ZM(o),kE=(e,o)=>!e||!o?!1:er(e,o)?!0:SE(e,o),_E=e=>e.get()===0,vg=(e,o,n)=>{_E(n)&&(e.typing=o)},$s=(e,o)=>{e.typing&&(vg(e,!1,o),e.add())},UM=e=>{e.typing&&(e.typing=!1,e.add())},WM=(e,o,n)=>{_E(o)&&n.set(Ds(e.selection))},jM=(e,o,n,s,i,d,h)=>{const v=Xx(e),w=fe.extend(d||{},v);if(!_E(s)||e.removed)return null;const k=o.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:k,originalEvent:h}).isDefaultPrevented()||k&&kE(k,w))return null;o.data[n.get()]&&i.get().each(I=>{o.data[n.get()].beforeBookmark=I});const M=Iw(e);if(M&&o.data.length>M){for(let I=0;I<o.data.length-1;I++)o.data[I]=o.data[I+1];o.data.length--,n.set(o.data.length)}w.bookmark=Ds(e.selection),n.get()<o.data.length-1&&(o.data.length=n.get()+1),o.data.push(w),n.set(o.data.length-1);const H={level:w,lastLevel:k,originalEvent:h};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",H),e.dispatch("change",H)):e.dispatch("AddUndo",H),w},yB=(e,o,n)=>{o.data=[],n.set(0),o.typing=!1,e.dispatch("ClearUndos")},wB=(e,o,n,s,i)=>{if(o.transact(s)){const d=o.data[n.get()].bookmark,h=o.data[n.get()-1];CE(e,h,!0),o.transact(i)&&(o.data[n.get()-1].beforeBookmark=d)}},Yx=(e,o,n)=>{let s;return o.get()<n.length-1&&(o.set(o.get()+1),s=n[o.get()],CE(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},CB=(e,o,n,s)=>{let i;return o.typing&&(o.add(),o.typing=!1,vg(o,!1,n)),s.get()>0&&(s.set(s.get()-1),i=o.data[s.get()],CE(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},EE=e=>{e.clear(),e.add()},xB=(e,o,n)=>n.get()>0||o.typing&&o.data[0]&&!kE(Xx(e),o.data[0]),$M=(e,o)=>o.get()<e.data.length-1&&!e.typing,GM=(e,o,n)=>($s(e,o),e.beforeChange(),e.ignore(n),e.add()),OE=(e,o)=>{try{e.set(e.get()+1),o()}finally{e.set(e.get()-1)}},KM=(e,o)=>{const n=e.dom,s=xe(o)?o:e.getBody();Ce(n.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const d=Uw(e),h=n.getAttrib(i,"border");(!h||h==="0")&&e.hasVisual?n.addClass(i,d):n.removeClass(i,d);break;case"A":if(!n.getAttrib(i,"href")){const v=n.getAttrib(i,"name")||i.id,w=Tb(e);v&&e.hasVisual?n.addClass(i,w):n.removeClass(i,w)}break}}),e.dispatch("VisualAid",{element:o,hasVisual:e.hasVisual})},Qx=e=>({init:{bindEvents:De},undoManager:{beforeChange:(o,n)=>WM(e,o,n),add:(o,n,s,i,d,h)=>jM(e,o,n,s,i,d,h),undo:(o,n,s)=>CB(e,o,n,s),redo:(o,n)=>Yx(e,o,n),clear:(o,n)=>yB(e,o,n),reset:o=>EE(o),hasUndo:(o,n)=>xB(e,o,n),hasRedo:(o,n)=>$M(o,n),transact:(o,n,s)=>GM(o,n,s),ignore:(o,n)=>OE(o,n),extra:(o,n,s,i)=>wB(e,o,n,s,i)},formatter:{match:(o,n,s,i)=>hg(e,o,n,s,i),matchAll:(o,n)=>oP(e,o,n),matchNode:(o,n,s,i)=>Kc(e,o,n,s,i),canApply:o=>_x(e,o),closest:o=>nP(e,o),apply:(o,n,s)=>KD(e,o,n,s),remove:(o,n,s,i)=>G_(e,o,n,s,i),toggle:(o,n,s)=>QD(e,o,n,s),formatChanged:(o,n,s,i,d)=>xP(e,o,n,s,i,d)},editor:{getContent:o=>hH(e,o),setContent:(o,n)=>Ty(e,o,n),insertContent:(o,n)=>QH(e,o,n),addVisual:o=>KM(e,o)},selection:{getContent:(o,n)=>lB(e,o,n)},autocompleter:{addDecoration:o=>iH(e,o),removeDecoration:()=>cH(e,K.fromDom(e.getBody()))},raw:{getModel:()=>B.none()}}),SB=e=>{const o=k=>Nt(k)?k:{},{init:n,undoManager:s,formatter:i,editor:d,selection:h,autocompleter:v,raw:w}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(k,M,H)=>s.transact(H),ignore:(k,M)=>s.ignore(M),extra:(k,M,H,I)=>s.extra(H,I)},formatter:{match:(k,M,H,I)=>i.match(k,o(M),I),matchAll:i.matchAll,matchNode:i.matchNode,canApply:k=>i.canApply(k),closest:k=>i.closest(k),apply:(k,M,H)=>i.apply(k,o(M)),remove:(k,M,H,I)=>i.remove(k,o(M)),toggle:(k,M,H)=>i.toggle(k,o(M)),formatChanged:(k,M,H,I,$)=>i.formatChanged(M,H,I,$)},editor:{getContent:k=>d.getContent(k),setContent:(k,M)=>({content:d.setContent(k,M),html:""}),insertContent:(k,M)=>(d.insertContent(k),""),addVisual:d.addVisual},selection:{getContent:(k,M)=>h.getContent(M)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>B.some(w.getRawModel())}}},kB=()=>{const e=Be(null),o=Be("");return{init:{bindEvents:De},undoManager:{beforeChange:De,add:e,undo:e,redo:e,clear:De,reset:De,hasUndo:Ne,hasRedo:Ne,transact:e,ignore:De,extra:De},formatter:{match:Ne,matchAll:Be([]),matchNode:Be(void 0),canApply:Ne,closest:o,apply:De,remove:De,toggle:De,formatChanged:Be({unbind:De})},editor:{getContent:o,setContent:Be({content:"",html:""}),insertContent:Be(""),addVisual:De},selection:{getContent:o},autocompleter:{addDecoration:De,removeDecoration:De},raw:{getModel:Be(B.none())}}},Xu=e=>It(e.plugins,"rtc"),ac=e=>Xo(e.plugins,"rtc").bind(o=>B.from(o.setup)),_B=e=>{const o=e;return ac(e).fold(()=>(o.rtcInstance=Qx(e),B.none()),n=>(o.rtcInstance=kB(),B.some(()=>n().then(s=>(o.rtcInstance=SB(s),s.rtc.isRemote)))))},TE=e=>e.rtcInstance?e.rtcInstance:Qx(e),$r=e=>{const o=e.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},EB=(e,o,n)=>{$r(e).undoManager.beforeChange(o,n)},OB=(e,o,n,s,i,d,h)=>$r(e).undoManager.add(o,n,s,i,d,h),qM=(e,o,n,s)=>$r(e).undoManager.undo(o,n,s),TB=(e,o,n)=>$r(e).undoManager.redo(o,n),AB=(e,o,n)=>{$r(e).undoManager.clear(o,n)},DB=(e,o)=>{$r(e).undoManager.reset(o)},Jx=(e,o,n)=>$r(e).undoManager.hasUndo(o,n),MB=(e,o,n)=>$r(e).undoManager.hasRedo(o,n),NB=(e,o,n,s)=>$r(e).undoManager.transact(o,n,s),XM=(e,o,n)=>{$r(e).undoManager.ignore(o,n)},AE=(e,o,n,s,i)=>{$r(e).undoManager.extra(o,n,s,i)},RB=(e,o,n,s,i)=>$r(e).formatter.match(o,n,s,i),LB=(e,o,n)=>$r(e).formatter.matchAll(o,n),HB=(e,o,n,s,i)=>$r(e).formatter.matchNode(o,n,s,i),PB=(e,o)=>$r(e).formatter.canApply(o),YM=(e,o)=>$r(e).formatter.closest(o),QM=(e,o,n,s)=>{$r(e).formatter.apply(o,n,s)},BB=(e,o,n,s,i)=>{$r(e).formatter.remove(o,n,s,i)},Tf=(e,o,n,s)=>{$r(e).formatter.toggle(o,n,s)},J0=(e,o,n,s,i,d)=>$r(e).formatter.formatChanged(o,n,s,i,d),Uy=(e,o)=>TE(e).editor.getContent(o),JM=(e,o,n)=>TE(e).editor.setContent(o,n),eN=(e,o,n)=>TE(e).editor.insertContent(o,n),IB=(e,o,n)=>$r(e).selection.getContent(o,n),tN=(e,o)=>$r(e).editor.addVisual(o),oN=e=>$r(e).init.bindEvents(),FB=(e,o)=>$r(e).autocompleter.addDecoration(o),VB=e=>$r(e).autocompleter.removeDecoration(),zB=(e,o={})=>{const n=o.format?o.format:"html";return IB(e,n,o)},DE=e=>e.dom.length===0?(Ho(e),B.none()):B.some(e),ZB=(e,o)=>e.filter(n=>sf.isBookmarkNode(n.dom)).bind(o?mu:_c),UB=(e,o,n,s)=>{const i=e.dom,d=o.dom,h=s?i.length:d.length;s?(Eo(i,d,!1,!s),n.setStart(d,h)):(Eo(d,i,!1,!s),n.setEnd(d,h))},Wy=(e,o)=>{Ua(e).each(n=>{const s=e.dom;o&&B0(n,ce(s,0))?nx(s,0):!o&&by(n,ce(s,s.length))&&Ld(s,s.length)})},ME=(e,o,n,s)=>{e.bind(i=>((s?Ld:nx)(i.dom,s?i.dom.length:0),o.filter(Lo).map(d=>UB(i,d,n,s)))).orThunk(()=>ZB(o,s).or(o).filter(Lo).map(i=>Wy(i,s)))},nN=(e,o)=>{const n=B.from(o.firstChild).map(K.fromDom),s=B.from(o.lastChild).map(K.fromDom);e.deleteContents(),e.insertNode(o);const i=n.bind(_c).filter(Lo).bind(DE),d=s.bind(mu).filter(Lo).bind(DE);ME(i,n,e,!0),ME(d,s,e,!1),e.collapse(!1)},WB=(e,o)=>({format:"html",...e,set:!0,selection:!0,content:o}),jB=(e,o)=>{if(o.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),i=s?{context:s.nodeName.toLowerCase()}:{},d=e.parser.parse(o.content,{forced_root_block:!1,...i,...o});return wh({validate:!1},e.schema).serialize(d)}else return o.content},$B=(e,o,n={})=>{const s=WB(n,o);zy(e,s).each(i=>{const d=jB(e,i),h=e.selection.getRng();nN(h,h.createContextualFragment(d)),e.selection.setRng(h),L0(e,h),mE(e,d,i)})},NE=(e,o,n)=>{if(It(e,o)){const s=kt(e[o],i=>i!==n);s.length===0?delete e[o]:e[o]=s}};var GB=(e,o)=>{let n,s;const i=(v,w)=>xn(w,k=>e.is(k,v)),d=v=>e.getParents(v,void 0,e.getRoot()),h=()=>{n={},s={},o.on("NodeChange",v=>{const w=v.element,k=d(w),M={};nt(n,(H,I)=>{i(I,k).each($=>{s[I]||(Ce(H,U=>{U(!0,{node:$,selector:I,parents:k})}),s[I]=H),M[I]=H})}),nt(s,(H,I)=>{M[I]||(delete s[I],Ce(H,$=>{$(!1,{node:w,selector:I,parents:k})}))})})};return{selectorChangedWithUnbind:(v,w)=>(n||h(),n[v]||(n[v]=[]),n[v].push(w),i(v,d(o.selection.getStart())).each(()=>{s[v]=n[v]}),{unbind:()=>{NE(n,v,w),NE(s,v,w)}})}};const rN=e=>!!(e&&e.ownerDocument)&&zl(K.fromDom(e.ownerDocument),K.fromDom(e)),KB=e=>e?rN(e.startContainer)&&rN(e.endContainer):!1,sN=(e,o,n,s)=>{let i,d;const{selectorChangedWithUnbind:h}=GB(e,s),v=(ve,et)=>{const bt=e.createRng();xe(ve)&&xe(et)?(bt.setStart(ve,et),bt.setEnd(ve,et),Ae(bt),te(!1)):(qb(e,bt,s.getBody(),!0),Ae(bt))},w=ve=>zB(s,ve),k=(ve,et)=>$B(s,ve,et),M=ve=>N3(s.getBody(),ue(),ve),H=ve=>R3(s.getBody(),ue(),ve),I=(ve,et)=>Fe.getBookmark(ve,et),$=ve=>Fe.moveToBookmark(ve),U=(ve,et)=>(JL(e,ve,et).each(Ae),ve),W=()=>{const ve=ue(),et=de();return!ve||ve.item?!1:ve.compareEndPoints?ve.compareEndPoints("StartToEnd",ve)===0:!et||ve.collapsed},j=()=>{const ve=ue(),et=s.getBody().querySelectorAll('[data-mce-selected="1"]');return et.length>0?Kn(et,bt=>e.isEditable(bt.parentElement)):ve.startContainer===ve.endContainer?e.isEditable(ve.startContainer):e.isEditable(ve.startContainer)&&e.isEditable(ve.endContainer)},te=ve=>{const et=ue();et.collapse(!!ve),Ae(et)},de=()=>o.getSelection?o.getSelection():o.document.selection,ue=()=>{let ve;const et=(Jt,bo,ia)=>{try{return bo.compareBoundaryPoints(Jt,ia)}catch{return-1}},bt=o.document;if(xe(s.bookmark)&&!vf(s)){const Jt=XC(s);if(Jt.isSome())return Jt.map(bo=>L3(s,[bo])[0]).getOr(bt.createRange())}try{const Jt=de();Jt&&!ma(Jt.anchorNode)&&(Jt.rangeCount>0?ve=Jt.getRangeAt(0):ve=bt.createRange(),ve=L3(s,[ve])[0])}catch{}if(ve||(ve=bt.createRange()),Os(ve.startContainer)&&ve.collapsed){const Jt=e.getRoot();ve.setStart(Jt,0),ve.setEnd(Jt,0)}return i&&d&&(et(ve.START_TO_START,ve,i)===0&&et(ve.END_TO_END,ve,i)===0?ve=d:(i=null,d=null)),ve},Ae=(ve,et)=>{if(!KB(ve))return;const bt=de();if(ve=s.dispatch("SetSelectionRange",{range:ve,forward:et}).range,bt){d=ve;try{bt.removeAllRanges(),bt.addRange(ve)}catch{}et===!1&&bt.extend&&(bt.collapse(ve.endContainer,ve.endOffset),bt.extend(ve.startContainer,ve.startOffset)),i=bt.rangeCount>0?bt.getRangeAt(0):null}if(!ve.collapsed&&ve.startContainer===ve.endContainer&&bt!=null&&bt.setBaseAndExtent&&ve.endOffset-ve.startOffset<2&&ve.startContainer.hasChildNodes()){const Jt=ve.startContainer.childNodes[ve.startOffset];Jt&&Jt.nodeName==="IMG"&&(bt.setBaseAndExtent(ve.startContainer,ve.startOffset,ve.endContainer,ve.endOffset),(bt.anchorNode!==ve.startContainer||bt.focusNode!==ve.endContainer)&&bt.setBaseAndExtent(Jt,0,Jt,1))}s.dispatch("AfterSetSelectionRange",{range:ve,forward:et})},$e=ve=>(k(e.getOuterHTML(ve)),ve),Ye=()=>YL(s.getBody(),ue()),Ie=(ve,et)=>QL(e,ue(),ve,et),Ee=()=>{const ve=de(),et=ve==null?void 0:ve.anchorNode,bt=ve==null?void 0:ve.focusNode;if(!ve||!et||!bt||ma(et)||ma(bt))return!0;const Jt=e.createRng(),bo=e.createRng();try{Jt.setStart(et,ve.anchorOffset),Jt.collapse(!0),bo.setStart(bt,ve.focusOffset),bo.collapse(!0)}catch{return!0}return Jt.compareBoundaryPoints(Jt.START_TO_START,bo)<=0},ye={dom:e,win:o,serializer:n,editor:s,expand:(ve={type:"word"})=>Ae(Qo(e).expand(ue(),ve)),collapse:te,setCursorLocation:v,getContent:w,setContent:k,getBookmark:I,moveToBookmark:$,select:U,isCollapsed:W,isEditable:j,isForward:Ee,setNode:$e,getNode:Ye,getSel:de,setRng:Ae,getRng:ue,getStart:M,getEnd:H,getSelectedBlocks:Ie,normalize:()=>{const ve=ue(),et=de();if(!kC(et)&&v0(s)){const bt=it(e,ve);return bt.each(Jt=>{Ae(Jt,Ee())}),bt.getOr(ve)}return ve},selectorChanged:(ve,et)=>(h(ve,et),ye),selectorChangedWithUnbind:h,getScrollContainer:()=>{let ve,et=e.getRoot();for(;et&&et.nodeName!=="BODY";){if(et.scrollHeight>et.clientHeight){ve=et;break}et=et.parentNode}return ve},scrollIntoView:(ve,et)=>{xe(ve)?GC(s,ve,et):L0(s,ue(),et)},placeCaretAt:(ve,et)=>Ae(O(ve,et,s.getDoc())),getBoundingClientRect:()=>{const ve=ue();return ve.collapsed?ce.fromRangeStart(ve).getClientRects()[0]:ve.getBoundingClientRect()},destroy:()=>{o=i=d=null,ft.destroy()}},Fe=sf(ye),ft=PC(ye,s);return ye.bookmarkManager=Fe,ye.controlSelection=ft,ye},Fd=(e,o,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,i)=>{let d=s.length;for(;d--;){const h=s[d];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(i,null)}}),e.addAttributeFilter("src,href,style",(s,i)=>{const d="data-mce-"+i,h=o.url_converter,v=o.url_converter_scope;let w=s.length;for(;w--;){const k=s[w];let M=k.attr(d);M!==void 0?(k.attr(i,M.length>0?M:null),k.attr(d,null)):(M=k.attr(i),i==="style"?M=n.serializeStyle(n.parseStyle(M),k.name):h&&(M=h.call(v,M,i,k.name)),k.attr(i,M.length>0?M:null))}}),e.addAttributeFilter("class",s=>{let i=s.length;for(;i--;){const d=s[i];let h=d.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),d.attr("class",h.length>0?h:null))}}),e.addAttributeFilter("data-mce-type",(s,i,d)=>{let h=s.length;for(;h--;){const v=s[h];v.attr("data-mce-type")==="bookmark"&&!d.cleanup&&(B.from(v.firstChild).exists(w=>{var k;return!g1((k=w.value)!==null&&k!==void 0?k:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("noscript",s=>{var i;let d=s.length;for(;d--;){const h=s[d].firstChild;h&&(h.value=wd.decode((i=h.value)!==null&&i!==void 0?i:""))}}),e.addNodeFilter("script,style",(s,i)=>{var d;const h=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=s.length;for(;v--;){const w=s[v],k=w.firstChild,M=(d=k==null?void 0:k.value)!==null&&d!==void 0?d:"";if(i==="script"){const H=w.attr("type");H&&w.attr("type",H==="mce-no/type"?null:H.replace(/^mce\-/,"")),o.element_format==="xhtml"&&k&&M.length>0&&(k.value=`// <![CDATA[
`+h(M)+`
// ]]>`)}else o.element_format==="xhtml"&&k&&M.length>0&&(k.value=`<!--
`+h(M)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let i=s.length;for(;i--;){const d=s[i],h=d.value;o.preserve_cdata&&(h==null?void 0:h.indexOf("[CDATA["))===0?(d.name="#cdata",d.type=4,d.value=n.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):(h==null?void 0:h.indexOf("mce:protected "))===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(h).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,i)=>{let d=s.length;for(;d--;){const h=s[d];h.type===7?h.remove():h.type===1&&i==="input"&&!h.attr("type")&&h.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{Ce(s,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,i)=>{let d=s.length;for(;d--;)s[d].attr(i,null)}),o.remove_trailing_brs&&tM(o,e,e.schema)},RE=e=>{const o=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(o(n)){const s=n.prev;o(s)&&(n.remove(),s.remove())}},qB=(e,o,n)=>{let s;const i=e.dom;let d=o.cloneNode(!0);const h=document.implementation;if(h.createHTMLDocument){const v=h.createHTMLDocument("");fe.each(d.nodeName==="BODY"?d.childNodes:[d],w=>{v.body.appendChild(v.importNode(w,!0))}),d.nodeName!=="BODY"?d=v.body.firstChild:d=v.body,s=i.doc,i.doc=v}return vh(e,{...n,node:d}),s&&(i.doc=s),d},XB=(e,o)=>xe(e)&&e.hasEventListeners("PreProcess")&&!o.no_events,YB=(e,o,n)=>XB(e,n)?qB(e,o,n):o,QB=(e,o,n)=>{fe.inArray(o,n)===-1&&(e.addAttributeFilter(n,(s,i)=>{let d=s.length;for(;d--;)s[d].attr(i,null)}),o.push(n))},Mo=(e,o,n)=>!o.no_events&&e?ly(e,{...o,content:n}).content:n,JB=(e,o,n)=>{const s=gl(n.getInner?o.innerHTML:e.getOuterHTML(o));return n.selection||m1(K.fromDom(o))?s:fe.trim(s)},eI=(e,o,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,i=e.parse(o,s);return RE(i),i},Wn=(e,o,n)=>wh(e,o).serialize(n),tI=(e,o,n,s,i)=>{const d=Wn(o,n,s);return Mo(e,i,d)},jy=(e,o)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=o&&o.dom?o.dom:nn.DOM,d=o&&o.schema?o.schema:_u(s),h=Bh(s,d);Fd(h,s,i);const v=(w,k={})=>{const M={format:"html",...k},H=YB(o,w,M),I=JB(i,H,M),$=eI(h,I,M);return M.format==="tree"?$:tI(o,s,d,$,M)};return{schema:d,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:v,addRules:d.addValidElements,setRules:d.setValidElements,addTempAttr:Me(QB,h,n),getTempAttrs:Be(n),getNodeFilters:h.getNodeFilters,getAttributeFilters:h.getAttributeFilters,removeNodeFilter:h.removeNodeFilter,removeAttributeFilter:h.removeAttributeFilter}},aN=(e,o)=>{const n=jy(e,o);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},oI="html",nI=(e,o)=>({...e,format:o,get:!0,getInner:!0}),iN=(e,o={})=>{const n=o.format?o.format:oI,s=nI(o,n);return kM(e,s).fold(go,i=>{const d=Uy(e,i);return Id(e,d,i)})},Ih="html",Ki=(e,o)=>({format:Ih,...e,set:!0,content:o}),Af=(e,o,n={})=>{const s=Ki(n,o);return zy(e,s).map(i=>{const d=JM(e,i.content,i);return mE(e,d.html,i),d.content}).getOr(o)},Fh="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Yu="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),$y="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),eS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],tS=(e,o)=>{const n=kt(o,s=>It(e,s));return an(n)},lN=e=>{const o=tS(e,Fh),n=e.forced_root_block;return(n===!1||n==="")&&o.push("forced_root_block (false only)"),an(o)},cN=e=>tS(e,Yu),dN=(e,o)=>{const n=fe.makeMap(e.plugins," "),s=kt(o,i=>It(n,i));return an(s)},rI=e=>dN(e,$y),uN=e=>dN(e,eS.map(o=>o.name)),mN=(e,o)=>{const n=lN(e),s=rI(o),i=s.length>0,d=n.length>0,h=o.theme==="mobile";if(i||d||h){const v=`
- `,w=h?`

Themes:${v}mobile`:"",k=i?`

Plugins:${v}${s.join(v)}`:"",M=d?`

Options:${v}${n.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+w+k+M)}},gN=e=>xn(eS,o=>o.name===e).fold(()=>e,o=>o.replacedWith?`${e}, replaced by ${o.replacedWith}`:e),hN=(e,o)=>{const n=cN(e),s=uN(o),i=s.length>0,d=n.length>0;if(i||d){const h=`
- `,v=i?`

Plugins:${h}${s.map(gN).join(h)}`:"",w=d?`

Options:${h}${n.join(h)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+w)}},LE=(e,o)=>{mN(e,o),hN(e,o)},oS=nn.DOM,sI=e=>{oS.setStyle(e.id,"display",e.orgDisplay)},nS=e=>B.from(e).each(o=>o.destroy()),Qu=e=>{const o=e;o.contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null;const n=e.selection;if(n){const s=n.dom;o.selection=n.win=n.dom=s.doc=null}},aI=e=>{const o=e.formElement;o&&(o._mceOldSubmit&&(o.submit=o._mceOldSubmit,delete o._mceOldSubmit),oS.unbind(o,"submit reset",e.formEventDelegate))},Gy=e=>{if(!e.removed){const{_selectionOverrides:o,editorUpload:n}=e,s=e.getBody(),i=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&xe(i==null?void 0:i.nextSibling)&&oS.remove(i.nextSibling),cy(e),e.editorManager.remove(e),!e.inline&&s&&sI(e),wl(e),oS.remove(e.getContainer()),nS(o),nS(n),e.destroy()}},iI=(e,o)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!o&&!e.removed){e.remove();return}o||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),nS(n),nS(s)),aI(e),Qu(e),e.destroyed=!0}},Ky=(()=>{const e={};return{add:(o,n)=>{e[o]=n},get:o=>e[o]?e[o]:{icons:{}},has:o=>It(e,o)}})(),Df=Ln.ModelManager,HE=(e,o)=>o.dom[e],pN=(e,o)=>parseInt(Ni(o,e),10),lI=Me(HE,"clientWidth"),Vh=Me(HE,"clientHeight"),cI=Me(pN,"margin-top"),dI=Me(pN,"margin-left"),uI=e=>e.dom.getBoundingClientRect(),mI=(e,o,n)=>{const s=lI(e),i=Vh(e);return o>=0&&n>=0&&o<=s&&n<=i},gI=(e,o,n,s)=>{const i=uI(o),d=e?i.left+o.dom.clientLeft+dI(o):0,h=e?i.top+o.dom.clientTop+cI(o):0,v=n-d,w=s-h;return{x:v,y:w}},hI=(e,o,n)=>{const s=K.fromDom(e.getBody()),i=e.inline?s:ds(s),d=gI(e.inline,i,o,n);return mI(i,d.x,d.y)},pI=e=>B.from(e).map(K.fromDom),fI=e=>{const o=e.inline?e.getBody():e.getContentAreaContainer();return pI(o).map(dd).getOr(!1)};var vI=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const fN=e=>{const o=[],n=()=>{const H=e.theme;return H&&H.getNotificationManagerImpl?H.getNotificationManagerImpl():vI()},s=()=>B.from(o[0]),i=(H,I)=>H.type===I.type&&H.text===I.text&&!H.progressBar&&!H.timeout&&!I.progressBar&&!I.timeout,d=()=>{Ce(o,H=>{H.reposition()})},h=H=>{o.push(H)},v=H=>{qr(o,I=>I===H).each(I=>{o.splice(I,1)})},w=(H,I=!0)=>e.removed||!fI(e)?{}:(I&&e.dispatch("BeforeOpenNotification",{notification:H}),xn(o,$=>i(n().getArgs($),H)).getOrThunk(()=>{e.editorManager.setActive(e);const $=n().open(H,()=>{v($),d(),s().fold(()=>e.focus(),U=>W5(K.fromDom(U.getEl())))});return h($),d(),e.dispatch("OpenNotification",{notification:{...$}}),$})),k=()=>{s().each(H=>{n().close(H),v(H),d()})},M=Be(o);return(H=>{H.on("SkinLoaded",()=>{const I=gn(H);I&&w({text:I,type:"warning",timeout:0},!1),d()}),H.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(d)}),H.on("remove",()=>{Ce(o.slice(),I=>{n().close(I)})})})(e),{open:w,close:k,getNotifications:M}},ev=Ln.PluginManager,Vd=Ln.ThemeManager;var bI=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const rS=e=>{let o=[];const n=()=>{const W=e.theme;return W&&W.getWindowManagerImpl?W.getWindowManagerImpl():bI()},s=(W,j)=>(...te)=>j?j.apply(W,te):void 0,i=W=>{e.dispatch("OpenWindow",{dialog:W})},d=W=>{e.dispatch("CloseWindow",{dialog:W})},h=W=>{o.push(W),i(W)},v=W=>{d(W),o=kt(o,j=>j!==W),o.length===0&&e.focus()},w=()=>B.from(o[o.length-1]),k=W=>{e.editorManager.setActive(e),E3(e),e.ui.show();const j=W();return h(j),j},M=(W,j)=>k(()=>n().open(W,j,v)),H=W=>k(()=>n().openUrl(W,v)),I=(W,j,te)=>{const de=n();de.alert(W,s(te||de,j))},$=(W,j,te)=>{const de=n();de.confirm(W,s(te||de,j))},U=()=>{w().each(W=>{n().close(W),v(W)})};return e.on("remove",()=>{Ce(o,W=>{n().close(W)})}),{open:M,openUrl:H,alert:I,confirm:$,close:U}},vN=(e,o)=>{e.notificationManager.open({type:"error",text:o})},sS=(e,o)=>{e._skinLoaded?vN(e,o):e.on("SkinLoaded",()=>{vN(e,o)})},yI=(e,o)=>{sS(e,cr.translate(["Failed to upload image: {0}",o]))},qy=(e,o,n)=>{RC(e,o,{message:n}),console.error(n)},zd=(e,o,n)=>n?`Failed to load ${e}: ${n} from url ${o}`:`Failed to load ${e} url: ${o}`,Mf=(e,o,n)=>{qy(e,"PluginLoadError",zd("plugin",o,n))},aS=(e,o,n)=>{qy(e,"IconsLoadError",zd("icons",o,n))},iS=(e,o,n)=>{qy(e,"LanguageLoadError",zd("language",o,n))},Nf=(e,o,n)=>{qy(e,"ThemeLoadError",zd("theme",o,n))},Rf=(e,o,n)=>{qy(e,"ModelLoadError",zd("model",o,n))},lS=(e,o,n)=>{const s=cr.translate(["Failed to initialize plugin: {0}",o]);RC(e,"PluginLoadError",{message:s}),Lf(s,n),sS(e,s)},Lf=(e,...o)=>{const n=window.console;n&&(n.error?n.error(e,...o):n.log(e,...o))},bN=e=>/^[a-z0-9\-]+$/i.test(e),PE=e=>IE(e,Bp(e)),BE=e=>IE(e,Mu(e)),IE=(e,o)=>{const n=e.editorManager.baseURL+"/skins/content",s=`content${e.editorManager.suffix}.css`;return $t(o,i=>bN(i)&&!e.inline?`${n}/${i}/${s}`:e.documentBaseURI.toAbsolute(i))},yN=e=>{e.contentCSS=e.contentCSS.concat(PE(e),BE(e))},tv=e=>e?ws(e.getElementsByTagName("img")):[],wN=(e,o)=>{const n={};return{findAll:(s,i=ct)=>{const d=kt(tv(s),v=>{const w=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!w||w===ae.transparentSrc?!1:$o(w,"blob:")?!e.isUploaded(w)&&i(v):$o(w,"data:")?i(v):!1}),h=$t(d,v=>{const w=v.src;if(It(n,w))return n[w].then(k=>G(k)?k:{image:v,blobInfo:k.blobInfo});{const k=DP(o,w).then(M=>(delete n[w],{image:v,blobInfo:M})).catch(M=>(delete n[w],M));return n[w]=k,k}});return Promise.all(h)}}},FE=()=>{let e={};const o=(s,i)=>({status:s,resultUri:i}),n=s=>s in e;return{hasBlobUri:n,getResultUri:s=>{const i=e[s];return i?i.resultUri:null},isPending:s=>n(s)?e[s].status===1:!1,isUploaded:s=>n(s)?e[s].status===2:!1,markPending:s=>{e[s]=o(1,null)},markUploaded:(s,i)=>{e[s]=o(2,i)},removeFailed:s=>{delete e[s]},destroy:()=>{e={}}}};let CN=0;const cS=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},xN=e=>e+CN+++cS(),SN=()=>{let e=[];const o=v=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[v.toLowerCase()]||"dat",n=(v,w,k,M,H)=>{if(G(v))return s({id:v,name:M,filename:H,blob:w,base64:k});if(Nt(v))return s(v);throw new Error("Unknown input type")},s=v=>{if(!v.blob||!v.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=v.id||xN("blobid"),k=v.name||w,M=v.blob;return{id:Be(w),name:Be(k),filename:Be(v.filename||k+"."+o(M.type)),blob:Be(M),base64:Be(v.base64),blobUri:Be(v.blobUri||URL.createObjectURL(M)),uri:Be(v.uri)}},i=v=>{h(v.id())||e.push(v)},d=v=>xn(e,v).getOrUndefined(),h=v=>d(w=>w.id()===v);return{create:n,add:i,get:h,getByUri:v=>d(w=>w.blobUri()===v),getByData:(v,w)=>d(k=>k.base64()===v&&k.blob().type===w),findFirst:d,removeByUri:v=>{e=kt(e,w=>w.blobUri()===v?(URL.revokeObjectURL(w.blobUri()),!1):!0)},destroy:()=>{Ce(e,v=>{URL.revokeObjectURL(v.blobUri())}),e=[]}}},kN=(e,o)=>{const n={},s=(U,W)=>U?U.replace(/\/$/,"")+"/"+W.replace(/^\//,""):W,i=(U,W)=>new Promise((j,te)=>{const de=new XMLHttpRequest;de.open("POST",o.url),de.withCredentials=o.credentials,de.upload.onprogress=Ae=>{W(Ae.loaded/Ae.total*100)},de.onerror=()=>{te("Image upload failed due to a XHR Transport error. Code: "+de.status)},de.onload=()=>{if(de.status<200||de.status>=300){te("HTTP Error: "+de.status);return}const Ae=JSON.parse(de.responseText);if(!Ae||!G(Ae.location)){te("Invalid JSON: "+de.responseText);return}j(s(o.basePath,Ae.location))};const ue=new FormData;ue.append("file",U.blob(),U.filename()),de.send(ue)}),d=J(o.handler)?o.handler:i,h=()=>new Promise(U=>{U([])}),v=(U,W)=>({url:W,blobInfo:U,status:!0}),w=(U,W)=>({url:"",blobInfo:U,status:!1,error:W}),k=(U,W)=>{fe.each(n[U],j=>{j(W)}),delete n[U]},M=(U,W,j)=>(e.markPending(U.blobUri()),new Promise(te=>{let de,ue;try{const Ae=()=>{de&&(de.close(),ue=De)},$e=Ie=>{Ae(),e.markUploaded(U.blobUri(),Ie),k(U.blobUri(),v(U,Ie)),te(v(U,Ie))},Ye=Ie=>{Ae(),e.removeFailed(U.blobUri()),k(U.blobUri(),w(U,Ie)),te(w(U,Ie))};ue=Ie=>{Ie<0||Ie>100||B.from(de).orThunk(()=>B.from(j).map(Ko)).each(Ee=>{de=Ee,Ee.progressBar.value(Ie)})},W(U,ue).then($e,Ie=>{Ye(G(Ie)?{message:Ie}:Ie)})}catch(Ae){te(w(U,Ae))}})),H=U=>U===i,I=U=>{const W=U.blobUri();return new Promise(j=>{n[W]=n[W]||[],n[W].push(j)})},$=(U,W)=>(U=fe.grep(U,j=>!e.isUploaded(j.blobUri())),Promise.all(fe.map(U,j=>e.isPending(j.blobUri())?I(j):M(j,d,W))));return{upload:(U,W)=>!o.url&&H(d)?h():$(U,W)}},VE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ju=(e,o)=>kN(o,{url:Lw(e),basePath:Sk(e),credentials:kk(e),handler:_k(e)}),zh=e=>{const o=FE(),n=Ju(e,o);return{upload:(s,i=!0)=>n.upload(s,i?VE(e):void 0)}},Yc=(e,o)=>e.dom.isEmpty(o.dom)&&xe(e.schema.getTextBlockElements()[tn(o)]),wI=e=>o=>{Yc(e,o)&&ot(o,K.fromHtml('<br data-mce-bogus="1" />'))},CI=e=>{const o=SN();let n,s;const i=FE(),d=[],h=ue=>Ae=>e.selection?ue(Ae):[],v=ue=>ue+(ue.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(ue,Ae,$e)=>{let Ye=0;do Ye=ue.indexOf(Ae,Ye),Ye!==-1&&(ue=ue.substring(0,Ye)+$e+ue.substr(Ye+Ae.length),Ye+=$e.length-Ae.length+1);while(Ye!==-1);return ue},k=(ue,Ae,$e)=>{const Ye=`src="${$e}"${$e===ae.transparentSrc?' data-mce-placeholder="1"':""}`;return ue=w(ue,`src="${Ae}"`,Ye),ue=w(ue,'data-mce-src="'+Ae+'"','data-mce-src="'+$e+'"'),ue},M=(ue,Ae)=>{Ce(e.undoManager.data,$e=>{$e.type==="fragmented"?$e.fragments=$t($e.fragments,Ye=>k(Ye,ue,Ae)):$e.content=k($e.content,ue,Ae)})},H=(ue,Ae)=>{const $e=e.convertURL(Ae,"src");M(ue.src,Ae),ni(K.fromDom(ue),{src:xb(e)?v(Ae):Ae,"data-mce-src":$e})},I=()=>(n||(n=Ju(e,i)),j().then(h(ue=>{const Ae=$t(ue,$e=>$e.blobInfo);return n.upload(Ae,VE(e)).then(h($e=>{const Ye=[];let Ie=!1;const Ee=$t($e,(ye,Fe)=>{const{blobInfo:ft,image:ve}=ue[Fe];let et=!1;return ye.status&&Rw(e)?(ye.url&&!Pr(ve.src,ye.url)&&(Ie=!0),o.removeByUri(ve.src),Xu(e)||H(ve,ye.url)):ye.error&&(ye.error.remove&&(M(ve.src,ae.transparentSrc),Ye.push(ve),et=!0),yI(e,ye.error.message)),{element:ve,status:ye.status,uploadUri:ye.url,blobInfo:ft,removed:et}});return Ye.length>0&&!Xu(e)?e.undoManager.transact(()=>{Ce(a1(Ye),ye=>{const Fe=Ua(ye);Ho(ye),Fe.each(wI(e)),o.removeByUri(ye.dom.src)})}):Ie&&e.undoManager.dispatchChange(),Ee}))}))),$=()=>U1(e)?I():Promise.resolve([]),U=ue=>Kn(d,Ae=>Ae(ue)),W=ue=>{d.push(ue)},j=()=>(s||(s=wN(i,o)),s.findAll(e.getBody(),U).then(h(ue=>{const Ae=kt(ue,$e=>G($e)?(sS(e,$e),!1):$e.uriType!=="blob");return Xu(e)||Ce(Ae,$e=>{M($e.image.src,$e.blobInfo.blobUri()),$e.image.src=$e.blobInfo.blobUri(),$e.image.removeAttribute("data-mce-src")}),Ae}))),te=()=>{o.destroy(),i.destroy(),s=n=null},de=ue=>ue.replace(/src="(blob:[^"]+)"/g,(Ae,$e)=>{const Ye=i.getResultUri($e);if(Ye)return'src="'+Ye+'"';let Ie=o.getByUri($e);return Ie||(Ie=_n(e.editorManager.get(),(Ee,ye)=>Ee||ye.editorUpload&&ye.editorUpload.blobCache.getByUri($e),void 0)),Ie?'src="data:'+Ie.blob().type+";base64,"+Ie.base64()+'"':Ae});return e.on("SetContent",()=>{U1(e)?$():j()}),e.on("RawSaveContent",ue=>{ue.content=de(ue.content)}),e.on("GetContent",ue=>{ue.source_view||ue.format==="raw"||ue.format==="tree"||(ue.content=de(ue.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ue=>{Ce(ue,Ae=>{const $e=Ae.attr("src");if(!$e||o.getByUri($e))return;const Ye=i.getResultUri($e);Ye&&Ae.attr("src",Ye)})})}),{blobCache:o,addFilter:W,uploadImages:I,uploadImagesAuto:$,scanForImages:j,destroy:te}},xI=e=>{const o=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{o.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{o.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},d={inline:"strike",remove:"all",preserve_attributes:["class","style"]},h={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[h,i,d]:[i,h,d]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,d,h)=>gt(i)&&i.hasAttribute("href"),onformat:(i,d,h)=>{fe.each(h,(v,w)=>{o.setAttrib(i,w,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var d;return(d=i==null?void 0:i.customValue)!==null&&d!==void 0?d:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return fe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{s[i]={block:i,remove:"all"}}),s},_N={remove_similar:!0,inherit:!1},ov={selector:"td,th",..._N},SI={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ov},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ov},tablecellbordercolor:{styles:{borderColor:"%value"},...ov},tablecellclass:{classes:["%value"],...ov},tableclass:{selector:"table",classes:["%value"],..._N},tablecellborderstyle:{styles:{borderStyle:"%value"},...ov},tablecellborderwidth:{styles:{borderWidth:"%value"},...ov}},kI=Be(SI),_I=e=>{const o={},n=h=>xe(h)?o[h]:o,s=h=>It(o,h),i=(h,v)=>{h&&(G(h)?(ko(v)||(v=[v]),Ce(v,w=>{Gn(w.deep)&&(w.deep=!Zi(w)),Gn(w.split)&&(w.split=!Zi(w)||rs(w)),Gn(w.remove)&&Zi(w)&&!rs(w)&&(w.remove="none"),Zi(w)&&rs(w)&&(w.mixed=!0,w.block_expand=!0),G(w.classes)&&(w.classes=w.classes.split(/\s+/))}),o[h]=v):nt(h,(w,k)=>{i(k,w)}))},d=h=>(h&&o[h]&&delete o[h],o);return i(xI(e)),i(kI()),i(G1(e)),{get:n,has:s,register:i,unregister:d}},dS=fe.each,ic=nn.DOM,zE=e=>xe(e)&&Nt(e),EN=(e,o)=>{const n=o&&o.schema||_u({}),s=(w,k)=>{k.classes.length>0&&ic.addClass(w,k.classes.join(" ")),ic.setAttribs(w,k.attrs)},i=w=>{const k=G(w)?{name:w,classes:[],attrs:{}}:w,M=ic.create(k.name);return s(M,k),M},d=(w,k)=>{const M=n.getElementRule(w.nodeName.toLowerCase()),H=M==null?void 0:M.parentsRequired;return H&&H.length?k&&Ut(H,k)?k:H[0]:!1},h=(w,k,M)=>{let H;const I=k[0],$=zE(I)?I.name:void 0,U=d(w,$);if(U)$===U?(H=I,k=k.slice(1)):H=U;else if(I)H=I,k=k.slice(1);else if(!M)return w;const W=H?i(H):ic.create("div");W.appendChild(w),M&&fe.each(M,te=>{const de=i(te);W.insertBefore(de,w)});const j=zE(H)?H.siblings:void 0;return h(W,k,j)},v=ic.create("div");if(e.length>0){const w=e[0],k=i(w),M=zE(w)?w.siblings:void 0;v.appendChild(h(k,e.slice(1),M))}return v},ZE=e=>{e=fe.trim(e);let o="div";const n={name:o,classes:[],attrs:{},selector:e};return e!=="*"&&(o=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,i,d,h,v)=>{switch(i){case"#":n.attrs.id=d;break;case".":n.classes.push(d);break;case":":fe.inArray("checked disabled enabled read-only required".split(" "),d)!==-1&&(n.attrs[d]=d);break}if(h==="["){const w=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(n.attrs[w[1]]=w[2])}return""})),n.name=o||"div",n},UE=e=>G(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),fe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),o=>{const n=fe.map(o.split(/(?:~\+|~|\+)/),ZE),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],ON=(e,o)=>{let n="",s=Mk(e);if(s==="")return"";const i=I=>G(I)?I.replace(/%(\w+)/g,""):"",d=(I,$)=>ic.getStyle($??e.getBody(),I,!0);if(G(o)){const I=e.formatter.get(o);if(!I)return"";o=I[0]}if("preview"in o){const I=o.preview;if(I===!1)return"";s=I||s}let h=o.block||o.inline||"span",v;const w=UE(o.selector);w.length>0?(w[0].name||(w[0].name=h),h=o.selector,v=EN(w,e)):v=EN([h],e);const k=ic.select(h,v)[0]||v.firstChild;dS(o.styles,(I,$)=>{const U=i(I);U&&ic.setStyle(k,$,U)}),dS(o.attributes,(I,$)=>{const U=i(I);U&&ic.setAttrib(k,$,U)}),dS(o.classes,I=>{const $=i(I);ic.hasClass(k,$)||ic.addClass(k,$)}),e.dispatch("PreviewFormats"),ic.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const M=d("fontSize"),H=/px$/.test(M)?parseInt(M,10):0;return dS(s.split(" "),I=>{let $=d(I,k);if(!(I==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test($)&&($=d(I),Nd($).toLowerCase()==="#ffffff"))&&!(I==="color"&&Nd($).toLowerCase()==="#000000")){if(I==="font-size"&&/em|%$/.test($)){if(H===0)return;$=parseFloat($)/(/%$/.test($)?100:1)*H+"px"}I==="border"&&$&&(n+="padding:0 2px;"),n+=I+":"+$+";"}}),e.dispatch("AfterPreviewFormats"),ic.remove(v),n},EI=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)e.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},TN=e=>{const o=_I(e),n=vr({});return EI(e),iP(e),Xu(e)||yP(n,e),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(s,i,d)=>{QM(e,s,i,d)},remove:(s,i,d,h)=>{BB(e,s,i,d,h)},toggle:(s,i,d)=>{Tf(e,s,i,d)},match:(s,i,d,h)=>RB(e,s,i,d,h),closest:s=>YM(e,s),matchAll:(s,i)=>LB(e,s,i),matchNode:(s,i,d,h)=>HB(e,s,i,d,h),canApply:s=>PB(e,s),formatChanged:(s,i,d,h)=>J0(e,n,s,i,d,h),getCssText:Me(ON,e)}},WE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},AN=(e,o,n)=>{const s=vr(!1),i=w=>{vg(o,!1,n),o.add({},w)};e.on("init",()=>{o.add()}),e.on("BeforeExecCommand",w=>{const k=w.command;WE(k)||($s(o,n),o.beforeChange())}),e.on("ExecCommand",w=>{const k=w.command;WE(k)||i(w)}),e.on("ObjectResizeStart cut",()=>{o.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;const M=ae.os.isMacOS()&&w.key==="Meta";(k>=33&&k<=36||k>=37&&k<=40||k===45||w.ctrlKey||M)&&(i(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),s.get()&&o.typing&&!kE(Xx(e),o.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){o.typing&&i(w);return}const M=w.ctrlKey&&!w.altKey||w.metaKey;if((k<16||k>20)&&k!==224&&k!==91&&!o.typing&&!M){o.beforeChange(),vg(o,!0,n),o.add({},w),s.set(!0);return}(ae.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&o.beforeChange()}),e.on("mousedown",w=>{o.typing&&i(w)});const d=w=>w.inputType==="insertReplacementText",h=w=>w.inputType==="insertText"&&w.data===null,v=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(d(w)||h(w)||v(w))&&i(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},jE=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},$E=e=>{const o=Xn(),n=vr(0),s=vr(0),i={data:[],typing:!1,beforeChange:()=>{EB(e,n,o)},add:(d,h)=>OB(e,i,s,n,o,d,h),dispatchChange:()=>{e.setDirty(!0);const d=Xx(e);d.bookmark=Ds(e.selection),e.dispatch("change",{level:d,lastLevel:Al(i.data,s.get()).getOrUndefined()})},undo:()=>qM(e,i,n,s),redo:()=>TB(e,s,i.data),clear:()=>{AB(e,i,s)},reset:()=>{DB(e,i)},hasUndo:()=>Jx(e,i,s),hasRedo:()=>MB(e,i,s),transact:d=>NB(e,i,n,d),ignore:d=>{XM(e,n,d)},extra:(d,h)=>{AE(e,i,s,d,h)}};return Xu(e)||AN(e,i,n),jE(e),i},DN=[9,27,dt.HOME,dt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,dt.DOWN,dt.UP,dt.LEFT,dt.RIGHT].concat(ae.browser.isFirefox()?[224]:[]),uS="data-mce-placeholder",MN=e=>e.type==="keydown"||e.type==="keyup",NN=e=>{const o=e.keyCode;return o===dt.BACKSPACE||o===dt.DELETE},em=e=>{if(MN(e)){const o=e.keyCode;return!NN(e)&&(dt.metaKeyPressed(e)||e.altKey||o>=112&&o<=123||Ut(DN,o))}else return!1},Qc=e=>MN(e)&&!(NN(e)||e.type==="keyup"&&e.keyCode===229),mS=(e,o,n)=>{if(bn(K.fromDom(o),!1)){const s=o.firstElementChild;return s?e.getStyle(o.firstElementChild,"padding-left")||e.getStyle(o.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},RN=e=>{var o;const n=e.dom,s=ns(e),i=(o=$1(e))!==null&&o!==void 0?o:"",d=(h,v)=>{if(em(h))return;const w=e.getBody(),k=Qc(h)?!1:mS(n,w,s);(n.getAttrib(w,uS)!==""!==k||v)&&(n.setAttrib(w,uS,k?i:null),n.setAttrib(w,"aria-placeholder",k?i:null),bh(e,k),e.on(k?"keydown":"keyup",d),e.off(k?"keyup":"keydown",d))};Ks(i)&&e.on("init",h=>{d(h,!0),e.on("change SetContent ExecCommand",d),e.on("paste",v=>nc.setEditorTimeout(e,()=>d(v)))})},gS=(e,o)=>({block:e,position:o}),LN=(e,o)=>({from:e,to:o}),hS=(e,o)=>{const n=K.fromDom(e),s=K.fromDom(o.container());return wy(n,s).map(i=>gS(i,o))},HN=e=>!To(e.from.block,e.to.block),GE=(e,o)=>_s(o,n=>Ea(n)||On(n.dom),n=>To(n,e)).filter(da).getOr(e),PN=(e,o)=>{const n=K.fromDom(e);return To(GE(n,o.from.block),GE(n,o.to.block))},BN=e=>po(e.from.block.dom)===!1&&po(e.to.block.dom)===!1,pS=e=>{const o=n=>Lm(n)||vo(n.dom);return o(e.from.block)&&o(e.to.block)},KE=(e,o,n)=>fo(n.position.getNode())&&!bn(n.block)?Md(!1,n.block.dom).bind(s=>s.isEqual(n.position)?ci(o,e,s).bind(i=>hS(e,i)):B.some(n)).getOr(n):n,OI=(e,o,n)=>{const s=hS(e,ce.fromRangeStart(n)),i=s.bind(d=>ci(o,e,d.position).bind(h=>hS(e,h).map(v=>KE(e,o,v))));return rr(s,i,LN).filter(d=>HN(d)&&PN(e,d)&&BN(d)&&pS(d))},TI=(e,o,n)=>n.collapsed?OI(e,o,n):B.none(),AI=e=>{const o=us(e);return qr(o,es).fold(Be(o),n=>o.slice(0,n))},IN=e=>{const o=AI(e);return Ce(o,Ho),o},qE=(e,o)=>{const n=mg(o,e);return xn(n.reverse(),s=>bn(s)).each(Ho)},DI=e=>kt(Zl(e),o=>!bn(o)).length===0,MI=(e,o,n,s)=>{if(bn(n))return ri(n),yr(n.dom);DI(s)&&bn(o)&&He(s,K.fromTag("br"));const i=La(n.dom,ce.before(s.dom));return Ce(IN(o),d=>{He(s,d)}),qE(e,o),i},XE=(e,o,n)=>{if(bn(n)){if(bn(o)){const i=El((d=>{const h=(v,w)=>Tg(v).fold(()=>w,k=>Zr(k)?h(k,w.concat(Km(k))):w);return h(d,[])})(n),(d,h)=>(Ft(d,h),h),Hi());Es(o),ot(o,i)}return Ho(n),yr(o.dom)}const s=Zs(n.dom);return Ce(IN(o),i=>{ot(n,i)}),qE(e,o),s},NI=(e,o)=>{const n=mg(o,e);return B.from(n[n.length-1])},RI=(e,o)=>zl(o,e)?NI(o,e):B.none(),FN=(e,o)=>{Md(e,o.dom).bind(n=>B.from(n.getNode())).map(K.fromDom).filter(zn).each(Ho)},VN=(e,o,n)=>(FN(!0,o),FN(!1,n),RI(o,n).fold(Me(XE,e,o,n),Me(MI,e,o,n))),zN=(e,o,n,s)=>o?VN(e,s,n):VN(e,n,s),YE=(e,o)=>{const n=K.fromDom(e.getBody());return TI(n.dom,o,e.selection.getRng()).map(s=>()=>{zN(n,o,s.from.block,s.to.block).each(i=>{e.selection.setRng(i.toRange())})})},LI=(e,o)=>{const n=o.getRng();return rr(wy(e,K.fromDom(n.startContainer)),wy(e,K.fromDom(n.endContainer)),(s,i)=>To(s,i)?B.none():B.some(()=>{n.deleteContents(),zN(e,!0,s,i).each(d=>{o.setRng(d.toRange())})})).getOr(B.none())},Xy=(e,o)=>{const n=K.fromDom(o),s=Me(To,e);return Rn(n,Ea,s).isSome()},QE=(e,o)=>Xy(e,o.startContainer)||Xy(e,o.endContainer),HI=(e,o)=>{const n=La(e.dom,ce.fromRangeStart(o)).isNone(),s=ba(e.dom,ce.fromRangeEnd(o)).isNone();return!QE(e,o)&&n&&s},PI=e=>B.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),BI=e=>{const o=K.fromDom(e.getBody()),n=e.selection.getRng();return HI(o,n)?PI(e):LI(o,e.selection)},JE=(e,o)=>e.selection.isCollapsed()?B.none():BI(e),tm=(e,o,n,s,i)=>B.from(o._selectionOverrides.showCaret(e,n,s,i)),II=e=>{const o=e.ownerDocument.createRange();return o.selectNode(e),o},Yy=(e,o)=>e.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?B.none():B.some(II(o)),eO=(e,o,n)=>{const s=eg(1,e.getBody(),o),i=ce.fromRangeStart(s),d=i.getNode();if(eh(d))return tm(1,e,d,!i.isAtEnd(),!1);const h=i.getNode(!0);if(eh(h))return tm(1,e,h,!1,!1);const v=gg(e.dom.getRoot(),i.getNode());return eh(v)?tm(1,e,v,!1,n):B.none()},tO=(e,o,n)=>o.collapsed?eO(e,o,n).getOr(o):o,FI=e=>dg(e)||P0(e),VI=e=>ug(e)||xh(e),zI=(e,o)=>{Ve(o)&&o.data.length===0&&e.remove(o)},ZN=(e,o,n,s,i,d)=>{tm(s,e,d.getNode(!i),i,!0).each(h=>{if(o.collapsed){const v=o.cloneRange();i?v.setEnd(h.startContainer,h.startOffset):v.setStart(h.endContainer,h.endOffset),v.deleteContents()}else o.deleteContents();e.selection.setRng(h)}),zI(e.dom,n)},ZI=(e,o)=>{const n=e.selection.getRng();if(!Ve(n.commonAncestorContainer))return B.none();const s=o?jr.Forwards:jr.Backwards,i=Fc(e.getBody()),d=Me(tg,o?i.next:i.prev),h=o?FI:VI,v=nh(s,e.getBody(),n),w=d(v),k=w&&rc(o,w);if(!k||!sh(v,k))return B.none();if(h(k))return B.some(()=>ZN(e,n,v.getNode(),s,o,k));const M=d(k);return M&&h(M)&&sh(k,M)?B.some(()=>ZN(e,n,v.getNode(),s,o,M)):B.none()},oO=(e,o)=>ZI(e,o),nv=(e,o)=>{const n=e.getBody();return o?yr(n).filter(dg):Zs(n).filter(ug)},rv=e=>{const o=e.selection.getRng();return!o.collapsed&&(nv(e,!0).exists(n=>n.isEqual(ce.fromRangeStart(o)))||nv(e,!1).exists(n=>n.isEqual(ce.fromRangeEnd(o))))},UI=e=>xe(e)&&(Ea(K.fromDom(e))||Hm(K.fromDom(e))),lc=Jl.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),fS=(e,o)=>{const n=o.getNode(!e),s=e?"after":"before";return gt(n)&&n.getAttribute("data-mce-caret")===s},WI=(e,o,n,s)=>{const i=d=>Zr(K.fromDom(d))&&!va(n,s,e);return Ib(!o,n).fold(()=>Ib(o,s).fold(Ne,i),i)},jI=(e,o,n,s)=>{const i=s.getNode(!o);return wy(K.fromDom(e),K.fromDom(n.getNode())).map(d=>bn(d)?lc.remove(d.dom):lc.moveToElement(i)).orThunk(()=>B.some(lc.moveToElement(i)))},UN=(e,o,n)=>ci(o,e,n).bind(s=>UI(s.getNode())||WI(e,o,n,s)?B.none():o&&po(s.getNode())||!o&&po(s.getNode(!0))?jI(e,o,n,s):o&&ug(n)||!o&&dg(n)?B.some(lc.moveToPosition(s)):B.none()),$I=(e,o)=>oo(o)?B.none():e&&po(o.nextSibling)?B.some(lc.moveToElement(o.nextSibling)):!e&&po(o.previousSibling)?B.some(lc.moveToElement(o.previousSibling)):B.none(),GI=(e,o,n)=>n.fold(s=>B.some(lc.remove(s)),s=>B.some(lc.moveToElement(s)),s=>va(o,s,e)?B.none():B.some(lc.moveToPosition(s))),KI=(e,o,n)=>fS(o,n)?$I(o,n.getNode(!o)).orThunk(()=>UN(e,o,n)):UN(e,o,n).bind(s=>GI(e,n,s)),qI=(e,o,n)=>{const s=eg(o?1:-1,e,n),i=ce.fromRangeStart(s),d=K.fromDom(e);return!o&&ug(i)?B.some(lc.remove(i.getNode(!0))):o&&dg(i)?B.some(lc.remove(i.getNode())):!o&&dg(i)&&q3(d,i)?xH(d,i).map(h=>lc.remove(h.getNode())):o&&ug(i)&&K3(d,i)?SH(d,i).map(h=>lc.remove(h.getNode())):KI(e,o,i)},XI=(e,o)=>n=>(e._selectionOverrides.hideFakeCaret(),Sh(e,o,K.fromDom(n)),!0),YI=(e,o)=>n=>{const s=o?ce.before(n):ce.after(n);return e.selection.setRng(s.toRange()),!0},QI=e=>o=>(e.selection.setRng(o.toRange()),!0),WN=(e,o)=>B.from(gg(e.getBody(),o)),Jc=(e,o)=>{const n=e.selection.getNode();return WN(e,n).filter(po).fold(()=>qI(e.getBody(),o,e.selection.getRng()).map(s=>()=>s.fold(XI(e,o),YI(e,o),QI(e))),()=>B.some(De))},nO=e=>{Ce(zr(e,".mce-offscreen-selection"),Ho)},jN=(e,o)=>{const n=e.selection.getNode();return po(n)&&!Mm(n)?WN(e,n.parentNode).filter(po).fold(()=>B.some(()=>{nO(K.fromDom(e.getBody())),Sh(e,o,K.fromDom(e.selection.getNode())),Cy(e)}),()=>B.some(De)):rv(e)?B.some(()=>{cx(e,e.selection.getRng(),K.fromDom(e.getBody()))}):B.none()},rO=e=>{const o=e.dom,n=e.selection,s=gg(e.getBody(),n.getNode());if(On(s)&&o.isBlock(s)&&o.isEmpty(s)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(s,""),s.appendChild(i),n.setRng(ce.before(i).toRange())}return!0},sO=(e,o)=>e.selection.isCollapsed()?Jc(e,o):jN(e,o),$N=(e,o)=>{const n=ce.fromRangeStart(e.selection.getRng());return ci(o,e.getBody(),n).filter(s=>o?yH(s):so(s)).bind(s=>Bb(o?0:-1,s)).map(s=>()=>e.selection.select(s))},aO=(e,o)=>e.selection.isCollapsed()?$N(e,o):B.none(),Hf=Ve,GN=e=>Hf(e)&&e.data[0]===qn,KN=e=>Hf(e)&&e.data[e.data.length-1]===qn,qN=e=>{var o;return((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(qn)},sv=e=>{var o;if(Hf(e.previousSibling))return KN(e.previousSibling)||e.previousSibling.appendData(qn),e.previousSibling;if(Hf(e))return GN(e)||e.insertData(0,qn),e;{const n=qN(e);return(o=e.parentNode)===null||o===void 0||o.insertBefore(n,e),n}},XN=e=>{var o,n;if(Hf(e.nextSibling))return GN(e.nextSibling)||e.nextSibling.insertData(0,qn),e.nextSibling;if(Hf(e))return KN(e)||e.appendData(qn),e;{const s=qN(e);return e.nextSibling?(o=e.parentNode)===null||o===void 0||o.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},Qy=(e,o)=>e?sv(o):XN(o),YN=Me(Qy,!0),iO=Me(Qy,!1),QN=(e,o)=>Ve(e.container())?Qy(o,e.container()):Qy(o,e.getNode()),JN=(e,o)=>{const n=o.get();return n&&e.container()===n&&fd(n)},lO=(e,o)=>o.fold(n=>{Ra(e.get());const s=YN(n);return e.set(s),B.some(ce(s,s.length-1))},n=>yr(n).map(s=>{if(JN(s,e)){const i=e.get();return ce(i,1)}else{Ra(e.get());const i=QN(s,!0);return e.set(i),ce(i,1)}}),n=>Zs(n).map(s=>{if(JN(s,e)){const i=e.get();return ce(i,i.length-1)}else{Ra(e.get());const i=QN(s,!1);return e.set(i),ce(i,i.length-1)}}),n=>{Ra(e.get());const s=iO(n);return e.set(s),B.some(ce(s,1))}),cc=(e,o)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,o);if(s.isSome())return s}return B.none()},Ja=Jl.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),e6=(e,o)=>Fi(o,e)||e,Pf=(e,o,n)=>{const s=zA(n),i=e6(o,s.container());return Hd(e,i,s).fold(()=>ba(i,s).bind(Me(Hd,e,i)).map(d=>Ja.before(d)),B.none)},t6=(e,o)=>Bu(e,o)===null,o6=(e,o,n)=>Hd(e,o,n).filter(Me(t6,o)),vS=(e,o,n)=>{const s=gi(n);return o6(e,o,s).bind(i=>La(i,s).isNone()?B.some(Ja.start(i)):B.none())},JI=(e,o,n)=>{const s=zA(n);return o6(e,o,s).bind(i=>ba(i,s).isNone()?B.some(Ja.end(i)):B.none())},eF=(e,o,n)=>{const s=gi(n),i=e6(o,s.container());return Hd(e,i,s).fold(()=>La(i,s).bind(Me(Hd,e,i)).map(d=>Ja.after(d)),B.none)},n6=e=>!VA(cO(e)),om=(e,o,n)=>cc([Pf,vS,JI,eF],[e,o,n]).filter(n6),cO=e=>e.fold(go,go,go,go),r6=e=>e.fold(Be("before"),Be("start"),Be("end"),Be("after")),ed=e=>e.fold(Ja.before,Ja.before,Ja.after,Ja.after),dO=e=>e.fold(Ja.start,Ja.start,Ja.end,Ja.end),tF=(e,o)=>r6(e)===r6(o)&&cO(e)===cO(o),oF=(e,o,n,s,i,d)=>rr(Hd(o,n,s),Hd(o,n,i),(h,v)=>h!==v&&BH(n,h,v)?Ja.after(e?h:v):d).getOr(d),nF=(e,o)=>e.fold(ct,n=>!tF(n,o)),rF=(e,o,n,s,i)=>{const d=rc(e,i);return ci(e,n,d).map(Me(rc,e)).fold(()=>s.map(ed),h=>om(o,n,h).map(Me(oF,e,o,n,d,h)).filter(Me(nF,s))).filter(n6)},uO=(e,o)=>e?o.fold(E(B.some,Ja.start),B.none,E(B.some,Ja.after),B.none):o.fold(B.none,E(B.some,Ja.before),B.none,E(B.some,Ja.end)),mO=(e,o,n,s)=>{const i=rc(e,s),d=om(o,n,i);return om(o,n,i).bind(Me(uO,e)).orThunk(()=>rF(e,o,n,d,s))},gO=e=>J(e.selection.getSel().modify),hO=(e,o,n)=>{const s=e?1:-1;return o.setRng(ce(n.container(),n.offset()+s).toRange()),o.getSel().modify("move",e?"forward":"backward","word"),!0},s6=(e,o)=>{const n=o.selection.getRng(),s=e?ce.fromRangeEnd(n):ce.fromRangeStart(n);return gO(o)?e&&cp(s)?hO(!0,o.selection,s):!e&&h1(s)?hO(!1,o.selection,s):!1:!1};var Zd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Zd||(Zd={}));const bS=(e,o)=>e===jr.Backwards?dn(o):o,Jy=(e,o,n)=>e===jr.Forwards?o.next(n):o.prev(n),pO=(e,o,n,s)=>fo(s.getNode(o===jr.Forwards))?Zd.Br:va(n,s)===!1?Zd.Block:Zd.Wrap,fO=(e,o,n,s)=>{const i=Fc(n);let d=s;const h=[];for(;d;){const v=Jy(o,i,d);if(!v)break;if(fo(v.getNode(!1)))return o===jr.Forwards?{positions:bS(o,h).concat([v]),breakType:Zd.Br,breakAt:B.some(v)}:{positions:bS(o,h),breakType:Zd.Br,breakAt:B.some(v)};if(!v.isVisible()){d=v;continue}if(e(d,v)){const w=pO(n,o,d,v);return{positions:bS(o,h),breakType:w,breakAt:B.some(v)}}h.push(v),d=v}return{positions:bS(o,h),breakType:Zd.Eol,breakAt:B.none()}},vO=(e,o,n,s)=>o(n,s).breakAt.map(i=>{const d=o(n,i).positions;return e===jr.Backwards?d.concat(i):[i].concat(d)}).getOr([]),yS=(e,o)=>_n(e,(n,s)=>n.fold(()=>B.some(s),i=>rr(un(i.getClientRects()),un(s.getClientRects()),(d,h)=>{const v=Math.abs(o-d.left);return Math.abs(o-h.left)<=v?s:i}).or(n)),B.none()),e2=(e,o)=>un(o.getClientRects()).bind(n=>yS(e,n.left)),Zh=Me(fO,ce.isAbove,-1),Bf=Me(fO,ce.isBelow,1),av=Me(vO,-1,Zh),a6=Me(vO,1,Bf),bO=(e,o)=>Zh(e,o).breakAt.isNone(),i6=(e,o)=>Bf(e,o).breakAt.isNone(),sF=e=>yr(e).map(o=>[o].concat(Bf(e,o).positions)).getOr([]),l6=e=>Zs(e).map(o=>Zh(e,o).positions.concat(o)).getOr([]),aF=(e,o)=>e2(av(e,o),o),c6=(e,o)=>e2(a6(e,o),o),iF=po,d6=(e,o)=>Math.abs(e.left-o),u6=(e,o)=>Math.abs(e.right-o),lF=e=>tr(e,"node"),m6=(e,o)=>kr(e,(n,s)=>{const i=Math.min(d6(n,o),u6(n,o)),d=Math.min(d6(s,o),u6(s,o));return d===i&&lF(s)&&iF(s.node)||d<i?s:n}),cF=e=>{const o=n=>$t(n,s=>{const i=Ts(s);return i.node=e,i});if(gt(e))return o(e.getClientRects());if(Ve(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),o(n.getClientRects())}else return[]},g6=e=>Rs(e,cF);var t2;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(t2||(t2={}));const h6=(e,o,n,s)=>{let i=s;for(;i=Jm(i,e,Kv,o);)if(n(i))return},p6=(e,o,n,s,i,d)=>{let h=0;const v=[],w=H=>{let I=g6([H]);e===-1&&(I=I.reverse());for(let $=0;$<I.length;$++){const U=I[$];if(!n(U,k)){if(v.length>0&&o(U,or(v))&&h++,U.line=h,i(U))return!0;v.push(U)}}return!1},k=or(d.getClientRects());if(!k)return v;const M=d.getNode();return M&&(w(M),h6(e,s,w,M)),v},If=(e,o)=>o.line>e,f6=(e,o)=>o.line===e,yO=Me(p6,t2.Up,Dp,Ug),v6=Me(p6,t2.Down,Ug,Dp),wS=e=>or(e.getClientRects()),Uh=(e,o,n,s)=>{const i=Fc(o);let d,h,v,w;const k=[];let M=0;e===1?(d=i.next,h=Ug,v=Dp,w=ce.after(s)):(d=i.prev,h=Dp,v=Ug,w=ce.before(s));const H=wS(w);do{if(!w.isVisible())continue;const I=wS(w);if(v(I,H))continue;k.length>0&&h(I,or(k))&&M++;const $=Ts(I);if($.position=w,$.line=M,n($))return k;k.push($)}while(w=d(w));return k},wO=e=>o=>If(e,o),qi=e=>o=>f6(e,o),Xi=(e,o)=>{e.selection.setRng(o),L0(e,e.selection.getRng())},CS=(e,o,n)=>B.some(tO(e,o,n)),b6=(e,o,n,s,i,d)=>{const h=o===jr.Forwards,v=Fc(e.getBody()),w=Me(tg,h?v.next:v.prev),k=h?s:i;if(!n.collapsed){const U=Ou(n);if(d(U))return tm(o,e,U,o===jr.Backwards,!1);if(rv(e)){const W=n.cloneRange();return W.collapse(o===jr.Backwards),B.from(W)}}const M=nh(o,e.getBody(),n);if(k(M))return Yy(e,M.getNode(!h));let H=w(M);const I=Oa(n);if(H)H=rc(h,H);else return I?B.some(n):B.none();if(k(H))return tm(o,e,H.getNode(!h),h,!1);const $=w(H);return $&&k($)&&sh(H,$)?tm(o,e,$.getNode(!h),h,!1):I?CS(e,H.toRange(),!1):B.none()},CO=(e,o,n,s,i,d)=>{const h=nh(o,e.getBody(),n),v=or(h.getClientRects()),w=o===t2.Down,k=e.getBody();if(!v)return B.none();if(rv(e)){const W=w?ce.fromRangeEnd(n):ce.fromRangeStart(n);return(w?c6:aF)(k,W).orThunk(()=>B.from(W)).map(j=>j.toRange())}const M=(w?v6:yO)(k,wO(1),h),H=kt(M,qi(1)),I=v.left,$=m6(H,I);if($&&d($.node)){const W=Math.abs(I-$.left),j=Math.abs(I-$.right);return tm(o,e,$.node,W<j,!1)}let U;if(s(h)?U=h.getNode():i(h)?U=h.getNode(!0):U=Ou(n),U){const W=Uh(o,k,wO(1),U);let j=m6(kt(W,qi(1)),I);if(j||(j=or(kt(W,qi(0))),j))return CS(e,j.position.toRange(),!1)}return H.length===0?xO(e,w).filter(w?i:s).map(W=>tO(e,W.toRange(),!1)):B.none()},xO=(e,o)=>{const n=e.selection.getRng(),s=o?ce.fromRangeEnd(n):ce.fromRangeStart(n),i=uC(s.container(),e.getBody());if(o){const d=Bf(i,s);return xi(d.positions)}else{const d=Zh(i,s);return un(d.positions)}},y6=(e,o,n)=>xO(e,o).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),xS=(e,o)=>{const n=e.dom.createRng();n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),e.selection.setRng(n)},w6=(e,o)=>{e?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},C6=(e,o,n)=>lO(o,n).map(s=>(xS(e,s),n)),x6=(e,o,n)=>{const s=ce.fromRangeStart(e);if(e.collapsed)return s;{const i=ce.fromRangeEnd(e);return n?La(o,i).getOr(i):ba(o,s).getOr(s)}},dF=(e,o,n)=>{const s=e.getBody(),i=x6(e.selection.getRng(),s,n),d=Me(xf,e);return mO(n,d,s,i).bind(h=>C6(e,o,h))},uF=(e,o,n)=>{const s=$t(zr(K.fromDom(o.getRoot()),'*[data-mce-selected="inline-boundary"]'),h=>h.dom),i=kt(s,e),d=kt(n,e);Ce(Tl(i,d),Me(w6,!1)),Ce(Tl(d,i),Me(w6,!0))},iv=(e,o)=>{const n=o.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=ce.fromRangeStart(e.selection.getRng());ce.isTextPosition(s)&&!kh(s)&&(xS(e,fa(n,s)),o.set(null))}},SO=(e,o,n,s)=>{if(o.selection.isCollapsed()){const i=kt(s,e);Ce(i,d=>{const h=ce.fromRangeStart(o.selection.getRng());om(e,o.getBody(),h).bind(v=>C6(o,n,v))})}},kO=(e,o,n)=>Xg(e)?dF(e,o,n).isSome():!1,_O=(e,o,n)=>Xg(o)?s6(e,o):!1,EO=e=>{const o=vr(null),n=Me(xf,e);return e.on("NodeChange",s=>{Xg(e)&&(uF(n,e.dom,s.parents),iv(e,o),SO(n,e,o,s.parents))}),o},mF=Me(_O,!0),gF=Me(_O,!1),SS=(e,o,n)=>{if(Xg(e)){const s=xO(e,o).getOrThunk(()=>{const i=e.selection.getRng();return o?ce.fromRangeEnd(i):ce.fromRangeStart(i)});return om(Me(xf,e),e.getBody(),s).exists(i=>{const d=ed(i);return lO(n,d).exists(h=>(xS(e,h),!0))})}else return!1},hF=(e,o)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(o.container(),o.offset()),n},pF=e=>rr(yr(e),Zs(e),(o,n)=>{const s=rc(!0,o),i=rc(!1,n);return ba(e,s).forall(d=>d.isEqual(i))}).getOr(!0),S6=(e,o)=>n=>lO(o,n).map(s=>()=>xS(e,s)),k6=(e,o,n,s)=>{const i=e.getBody(),d=Me(xf,e);e.undoManager.ignore(()=>{e.selection.setRng(hF(n,s)),n_(e),om(d,i,ce.fromRangeStart(e.selection.getRng())).map(dO).bind(S6(e,o)).each(xr)}),e.nodeChanged()},_6=(e,o)=>Fi(o,e)||e,fF=(e,o,n,s)=>{const i=_6(e.getBody(),s.container()),d=Me(xf,e),h=om(d,i,s);return h.bind(v=>n?v.fold(Be(B.some(dO(v))),B.none,Be(B.some(ed(v))),B.none):v.fold(B.none,Be(B.some(ed(v))),B.none,Be(B.some(dO(v))))).map(S6(e,o)).getOrThunk(()=>{const v=Pu(n,i,s),w=v.bind(k=>om(d,i,k));return rr(h,w,()=>Hd(d,i,s).bind(k=>pF(k)?B.some(()=>{Sh(e,n,K.fromDom(k))}):B.none())).getOrThunk(()=>w.bind(()=>v.map(k=>()=>{n?k6(e,o,s,k):k6(e,o,k,s)})))})},OO=(e,o,n)=>{if(e.selection.isCollapsed()&&Xg(e)){const s=ce.fromRangeStart(e.selection.getRng());return fF(e,o,n,s)}return B.none()},kl=e=>gu(e)>1,E6=(e,o)=>{const n=K.fromDom(e.getBody()),s=K.fromDom(e.selection.getStart()),i=mg(s,n);return qr(i,o).fold(Be(i),d=>i.slice(0,d))},TO=e=>gu(e)===1,O6=e=>E6(e,o=>es(o)||kl(o)),AO=e=>E6(e,es),T6=(e,o)=>{const n=Me(F_,e);return Rs(o,s=>n(s)?[s.dom]:[])},A6=e=>{const o=AO(e);return T6(e,o)},vF=(e,o,n,s)=>{const i=T6(o,s);if(i.length===0)Sh(o,e,n);else{const d=B_(n.dom,i);o.selection.setRng(d.toRange())}},bF=(e,o)=>{const n=kt(O6(e),TO);return xi(n).bind(s=>{const i=ce.fromRangeStart(e.selection.getRng());return lx(o,i,s.dom)&&!LD(s)?B.some(()=>vF(o,e,s,n)):B.none()})},yF=(e,o)=>{const n=o.parentElement;return fo(o)&&!re(n)&&e.dom.isEmpty(n)},D6=e=>LD(K.fromDom(e)),M6=(e,o)=>{const n=e.selection.getStart(),s=yF(e,n)||D6(n)?B_(n,o):I_(e.selection.getRng(),o);e.selection.setRng(s.toRange())},wF=(e,o)=>{const n=Tl(o,A6(e));n.length>0&&M6(e,n)},lv=e=>Ve(e.startContainer),bg=e=>e.startOffset===0&&lv(e),Ff=(e,o)=>{const n=o.startContainer.parentElement;return!re(n)&&F_(e,K.fromDom(n))},kS=e=>{const o=e.startContainer.parentNode,n=e.endContainer.parentNode;return!re(o)&&!re(n)&&o.isEqualNode(n)},DO=e=>{const o=e.endContainer;return e.endOffset===(Ve(o)?o.length:o.childNodes.length)},MO=e=>kS(e)&&DO(e),N6=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),CF=e=>MO(e)||N6(e),R6=e=>{const o=e.selection.getRng();return bg(o)&&Ff(e,o)&&CF(o)},L6=e=>{if(R6(e)){const o=A6(e);return B.some(()=>{n_(e),wF(e,o)})}else return B.none()},NO=(e,o)=>e.selection.isCollapsed()?bF(e,o):L6(e),xF=e=>SD(e,o=>Qn(o.dom),es),SF=e=>xF(K.fromDom(e.selection.getStart())),kF=e=>{const o=e.selection.getRng();return o.collapsed&&(lv(o)||e.dom.isEmpty(o.startContainer))&&!SF(e)},o2=e=>(kF(e)&&M6(e,[]),!0),RO=(e,o,n)=>xe(n)?B.some(()=>{e._selectionOverrides.hideFakeCaret(),Sh(e,o,K.fromDom(n))}):B.none(),H6=(e,o)=>{const n=o?P0:xh,s=o?jr.Forwards:jr.Backwards,i=nh(s,e.getBody(),e.selection.getRng());return n(i)?RO(e,o,i.getNode(!o)):B.from(rc(o,i)).filter(d=>n(d)&&sh(i,d)).bind(d=>RO(e,o,d.getNode(!o)))},P6=(e,o)=>{const n=e.selection.getNode();return Dr(n)?RO(e,o,n):B.none()},LO=(e,o)=>e.selection.isCollapsed()?H6(e,o):P6(e,o),_F=e=>_s(e,o=>On(o.dom)||po(o.dom)).exists(o=>On(o.dom)),HO=e=>ti(e??"").getOr(0),B6=(e,o)=>{const n=e||jl(o)?"margin":"padding",s=Ni(o,"direction")==="rtl"?"-right":"-left";return n+s},Yi=(e,o,n,s,i,d)=>{const h=B6(n,K.fromDom(d)),v=HO(e.getStyle(d,h));if(o==="outdent"){const w=Math.max(0,v-s);e.setStyle(d,h,w?w+i:"")}else{const w=v+s+i;e.setStyle(d,h,w)}},I6=(e,o)=>Kn(o,n=>{const s=B6(kb(e),n),i=A(n,s).map(HO).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&i>0}),cv=e=>{const o=PO(e);return!e.mode.isReadOnly()&&(o.length>1||I6(e,o))},F6=e=>pd(e)||Hm(e),V6=e=>Ua(e).exists(F6),PO=e=>kt(a1(e.selection.getSelectedBlocks()),o=>!F6(o)&&!V6(o)&&_F(o)),_S=(e,o)=>{var n,s;const{dom:i}=e,d=Tk(e),h=(s=(n=/[a-z%]+$/i.exec(d))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",v=HO(d),w=kb(e);Ce(PO(e),k=>{Yi(i,o,w,v,h,k.dom)})},EF=e=>_S(e,"indent"),z6=e=>_S(e,"outdent"),BO=e=>{if(e.selection.isCollapsed()&&cv(e)){const o=e.dom,n=e.selection.getRng(),s=ce.fromRangeStart(n),i=o.getParent(n.startContainer,o.isBlock);if(i!==null&&j3(K.fromDom(i),s))return B.some(()=>z6(e))}return B.none()},Z6=(e,o,n)=>Ls([BO,sO,oO,(s,i)=>OO(s,o,i),YE,V0,aO,LO,JE,NO],s=>s(e,n)).filter(s=>e.selection.isEditable()),OF=(e,o)=>{Z6(e,o,!1).fold(()=>{n_(e),Cy(e)},xr)},TF=(e,o)=>{Z6(e,o,!0).fold(()=>Jo(e),xr)},IO=(e,o)=>{e.addCommand("delete",()=>{OF(e,o)}),e.addCommand("forwardDelete",()=>{TF(e,o)})},U6=5,AF=400,W6=e=>e.touches===void 0||e.touches.length!==1?B.none():B.some(e.touches[0]),j6=(e,o)=>{const n=Math.abs(e.clientX-o.x),s=Math.abs(e.clientY-o.y);return n>U6||s>U6},DF=e=>{const o=Xn(),n=vr(!1),s=Ii(i=>{e.dispatch("longpress",{...i,type:"longpress"}),n.set(!0)},AF);e.on("touchstart",i=>{W6(i).each(d=>{s.cancel();const h={x:d.clientX,y:d.clientY,target:i.target};s.throttle(i),n.set(!1),o.set(h)})},!0),e.on("touchmove",i=>{s.cancel(),W6(i).each(d=>{o.on(h=>{j6(d,h)&&(o.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{s.cancel(),i.type!=="touchcancel"&&o.get().filter(d=>d.target.isEqualNode(i.target)).each(()=>{n.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},FO=(e,o)=>It(e,o.nodeName),MF=(e,o)=>Ve(o)?!0:gt(o)?!FO(e.getBlockElements(),o)&&!Yt(o)&&!Rc(e,o):!1,VO=(e,o,n)=>Wo(U3(K.fromDom(n),K.fromDom(o)),s=>FO(e,s.dom)),ES=(e,o)=>!!(Ve(o)&&(o.data.length===0||/^\s+$/.test(o.data)&&(!o.nextSibling||FO(e,o.nextSibling)))),zO=e=>e.dom.create(ns(e),li(e)),$6=e=>{const o=e.dom,n=e.selection,s=e.schema,i=s.getBlockElements(),d=n.getStart(),h=e.getBody();let v,w,k=!1;const M=ns(e);if(!d||!gt(d))return;const H=h.nodeName.toLowerCase();if(!s.isValidChild(H,M.toLowerCase())||VO(i,h,d))return;const I=n.getRng(),{startContainer:$,startOffset:U,endContainer:W,endOffset:j}=I,te=vf(e);let de=h.firstChild;for(;de;)if(gt(de)&&Z2(s,de),MF(s,de)){if(ES(i,de)){w=de,de=de.nextSibling,o.remove(w);continue}v||(v=zO(e),h.insertBefore(v,de),k=!0),w=de,de=de.nextSibling,v.appendChild(w)}else v=null,de=de.nextSibling;k&&te&&(I.setStart($,U),I.setEnd(W,j),n.setRng(I),e.nodeChanged())},G6=(e,o,n)=>{const s=K.fromDom(zO(e)),i=Hi();ot(s,i),n(o,s);const d=document.createRange();return d.setStartBefore(i.dom),d.setEndBefore(i.dom),d},NF=e=>{e.on("NodeChange",Me($6,e))},OS=e=>o=>(" "+o.attr("class")+" ").indexOf(e)!==-1,RF=(e,o,n)=>function(s){const i=arguments,d=i[i.length-2],h=d>0?o.charAt(d-1):"";if(h==='"')return s;if(h===">"){const v=o.lastIndexOf("<",d);if(v!==-1&&o.substring(v,d).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},LF=(e,o,n)=>{let s=o.length,i=n.content;if(n.format!=="raw"){for(;s--;)i=i.replace(o[s],RF(e,i,qw(e)));n.content=i}},HF=e=>{const o="contenteditable",n=" "+fe.trim(Wk(e))+" ",s=" "+fe.trim(qw(e))+" ",i=OS(n),d=OS(s),h=X1(e);h.length>0&&e.on("BeforeSetContent",v=>{LF(e,h,v)}),e.parser.addAttributeFilter("class",v=>{let w=v.length;for(;w--;){const k=v[w];i(k)?k.attr(o,"true"):d(k)&&k.attr(o,"false")}}),e.serializer.addAttributeFilter(o,v=>{let w=v.length;for(;w--;){const k=v[w];!i(k)&&!d(k)||(h.length>0&&k.attr("data-mce-content")?(k.name="#text",k.type=3,k.raw=!0,k.value=k.attr("data-mce-content")):k.attr(o,null))}})},PF=e=>ud(K.fromDom(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull(),dc=(e,o)=>{o.hasAttribute("data-mce-caret")&&(p1(o),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(o))},K6=(e,o)=>{const n=PF(e);if(n){if(o.type==="compositionstart"){o.preventDefault(),o.stopPropagation(),dc(e,n);return}B2(n)&&(dc(e,n),e.undoManager.add())}},q6=e=>{e.on("keyup compositionstart",Me(K6,e))},X6=po,TS=(e,o,n)=>b6(o,e,n,dg,ug,X6),BF=(e,o,n)=>CO(o,e,n,s=>dg(s)||z3(s),s=>ug(s)||Z3(s),X6),ZO=e=>{const o=e.dom.create(ns(e));return o.innerHTML='<br data-mce-bogus="1">',o},UO=(e,o,n)=>{const s=Fc(e.getBody()),i=Me(tg,o===1?s.next:s.prev);if(n.collapsed){const d=e.dom.getParent(n.startContainer,"PRE");if(!d)return;if(!i(ce.fromRangeStart(n))){const h=K.fromDom(ZO(e));o===1?xt(K.fromDom(d),h):He(K.fromDom(d),h),e.selection.select(h.dom,!0),e.selection.collapse()}}},Y6=(e,o)=>{const n=o?jr.Forwards:jr.Backwards,s=e.selection.getRng();return TS(n,e,s).orThunk(()=>(UO(e,n,s),B.none()))},Q6=(e,o)=>{const n=o?1:-1,s=e.selection.getRng();return BF(n,e,s).orThunk(()=>(UO(e,n,s),B.none()))},IF=(e,o)=>{const n=o?e.getEnd(!0):e.getStart(!0);return VA(n)?!o:o},J6=(e,o)=>Y6(e,IF(e.selection,o)).exists(n=>(Xi(e,n),!0)),eR=(e,o)=>Q6(e,o).exists(n=>(Xi(e,n),!0)),tR=(e,o)=>y6(e,o,o?ug:dg),Vf=(e,o)=>nv(e,!o).map(n=>{const s=n.toRange(),i=e.selection.getRng();return o?s.setStart(i.startContainer,i.startOffset):s.setEnd(i.endContainer,i.endOffset),s}).exists(n=>(Xi(e,n),!0)),FF=e=>Ut(["figcaption"],tn(e)),VF=(e,o)=>{const n=Me(To,o);return _s(K.fromDom(e.container()),es,n).filter(FF)},zF=(e,o,n)=>o?i6(e.dom,n):bO(e.dom,n),WO=(e,o)=>{const n=K.fromDom(e.getBody()),s=ce.fromRangeStart(e.selection.getRng());return VF(s,n).exists(()=>{if(zF(n,o,s)){const i=G6(e,n,o?ot:Rt);return e.selection.setRng(i),!0}else return!1})},oR=(e,o)=>e.selection.isCollapsed()?WO(e,o):!1,ZF=(e,o,n)=>{const s=e.selection.getRng(),i=ce.fromRangeStart(s);return e.getBody().firstChild===o&&bO(n,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},nR=(e,o)=>{const n=e.selection.getRng(),s=ce.fromRangeStart(n);return e.getBody().lastChild===o&&i6(o,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},UF=(e,o)=>o?B.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>nR(e,n)).getOr(!1):B.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>B.from(e.dom.getParent(n,"details")).map(s=>ZF(e,s,n))).getOr(!1),rR=(e,o)=>UF(e,o),sR={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},WF=e=>$t(e,o=>({...sR,...o})),jF=e=>$t(e,o=>({...sR,...o})),aR=(e,o)=>o.keyCode===e.keyCode&&o.shiftKey===e.shiftKey&&o.altKey===e.altKey&&o.ctrlKey===e.ctrlKey&&o.metaKey===e.metaKey,jO=(e,o)=>Rs(WF(e),n=>aR(n,o)?[n]:[]),$F=(e,o)=>Rs(jF(e),n=>aR(n,o)?[n]:[]),Vt=(e,...o)=>()=>e.apply(null,o),n2=(e,o)=>xn(jO(e,o),n=>n.action()),iR=(e,o)=>Ls($F(e,o),n=>n.action()),lR=(e,o)=>{const n=o?jr.Forwards:jr.Backwards,s=e.selection.getRng();return b6(e,n,s,P0,xh,Dr).exists(i=>(Xi(e,i),!0))},cR=(e,o)=>{const n=o?1:-1,s=e.selection.getRng();return CO(e,n,s,P0,xh,Dr).exists(i=>(Xi(e,i),!0))},dR=(e,o)=>y6(e,o,o?xh:P0),uR=Jl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ur={...uR,none:e=>uR.none(e)},GF=(e,o)=>mR(e,o,ct),mR=(e,o,n)=>Rs(us(e),s=>Za(s,o)?n(s)?[s]:[]:mR(s,o,n)),KF=(e,o,n=Ne)=>{if(n(o))return B.none();if(Ut(e,tn(o)))return B.some(o);const s=i=>Za(i,"table")||n(i);return _m(o,e.join(","),s)},gR=(e,o)=>KF(["td","th"],e,o),$O=e=>GF(e,"th,td"),GO=(e,o)=>ml(e,"table",o),nm=(e,o,n,s,i=ct)=>{const d=s===1;if(!d&&n<=0)return ur.first(e[0]);if(d&&n>=e.length-1)return ur.last(e[e.length-1]);{const h=n+s,v=e[h];return i(v)?ur.middle(o,v):nm(e,o,h,s,i)}},AS=(e,o)=>GO(e,o).bind(n=>{const s=$O(n);return qr(s,i=>To(e,i)).map(i=>({index:i,all:s}))}),hR=(e,o,n)=>AS(e,n).fold(()=>ur.none(e),s=>nm(s.all,e,s.index,1,o)),KO=(e,o,n)=>AS(e,n).fold(()=>ur.none(),s=>nm(s.all,e,s.index,-1,o)),qO=(e,o)=>({left:e.left-o,top:e.top-o,right:e.right+o*2,bottom:e.bottom+o*2,width:e.width+o,height:e.height+o}),XO=(e,o)=>Rs(o,n=>{const s=qO(Ts(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),pR=(e,o,n)=>_n(e,(s,i)=>s.fold(()=>B.some(i),d=>{const h=Math.sqrt(Math.abs(d.x-o)+Math.abs(d.y-n)),v=Math.sqrt(Math.abs(i.x-o)+Math.abs(i.y-n));return B.some(v<h?i:d)}),B.none()),r2=(e,o,n,s,i)=>{const d=zr(K.fromDom(n),"td,th,caption").map(v=>v.dom),h=kt(XO(e,d),v=>o(v,i));return pR(h,s,i).map(v=>v.cell)},DS=e=>e.bottom,s2=e=>e.top,a2=(e,o)=>e.y<o,td=(e,o)=>e.y>o,i2=Me(r2,DS,a2),fR=Me(r2,s2,td),vR=(e,o)=>un(o.getClientRects()).bind(n=>i2(e,n.left,n.top)).bind(n=>e2(l6(n),o)),qF=(e,o)=>xi(o.getClientRects()).bind(n=>fR(e,n.left,n.top)).bind(n=>e2(sF(n),o)),bR=(e,o,n)=>n.breakAt.exists(s=>e(o,s).breakAt.isSome()),XF=e=>e.breakType===Zd.Wrap&&e.positions.length===0,YF=e=>e.breakType===Zd.Br&&e.positions.length===1,dv=(e,o,n)=>{const s=e(o,n);return XF(s)||!fo(n.getNode())&&YF(s)?!bR(e,o,s):s.breakAt.isNone()},QF=Me(dv,Zh),JF=Me(dv,Bf),e9=(e,o,n)=>{const s=ce.fromRangeStart(o);return Md(!e,n).exists(i=>i.isEqual(s))},t9=(e,o,n,s)=>{const i=e.selection.getRng(),d=o?1:-1;return Jg()&&e9(o,i,n)?(tm(d,e,n,!o,!1).each(h=>{Xi(e,h)}),!0):!1},o9=(e,o,n)=>vR(o,n).orThunk(()=>un(n.getClientRects()).bind(s=>yS(av(e,ce.before(o)),s.left))).getOr(ce.before(o)),n9=(e,o,n)=>qF(o,n).orThunk(()=>un(n.getClientRects()).bind(s=>yS(a6(e,ce.after(o)),s.left))).getOr(ce.after(o)),r9=(e,o)=>{const n=o.getNode(e);return Wa(n)?B.some(n):B.none()},s9=(e,o,n)=>{o.undoManager.transact(()=>{const s=e?xt:He,i=G6(o,K.fromDom(n),s);Xi(o,i)})},yR=(e,o,n)=>{const s=r9(!!o,n),i=o===!1;s.fold(()=>Xi(e,n.toRange()),d=>Md(i,e.getBody()).filter(h=>h.isEqual(n)).fold(()=>Xi(e,n.toRange()),h=>s9(o,e,d)))},a9=(e,o,n,s)=>{const i=e.selection.getRng(),d=ce.fromRangeStart(i),h=e.getBody();if(!o&&QF(s,d)){const v=o9(h,n,d);return yR(e,o,v),!0}else if(o&&JF(s,d)){const v=n9(h,n,d);return yR(e,o,v),!0}else return!1},wR=(e,o,n)=>B.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>B.from(e.dom.getParent(s,"table")).map(i=>n(e,o,i,s))).getOr(!1),CR=(e,o)=>wR(e,o,t9),YO=(e,o)=>wR(e,o,a9),i9=e=>{const o=yh.exact(e,0,e,0);return b(o)},QO=(e,o,n)=>n.fold(B.none,B.none,(s,i)=>rH(i).map(d=>i9(d)),s=>(e.execCommand("mceTableInsertRowAfter"),JO(e,o,s))),JO=(e,o,n)=>QO(e,o,hR(n,Vr)),xR=(e,o,n)=>QO(e,o,KO(n,Vr)),SR=(e,o)=>{const n=["table","li","dl"],s=K.fromDom(e.getBody()),i=v=>{const w=tn(v);return To(v,s)||Ut(n,w)},d=e.selection.getRng(),h=K.fromDom(o?d.endContainer:d.startContainer);return gR(h,i).map(v=>(GO(v,i).each(w=>{e.model.table.clearSelectedCells(w.dom)}),e.selection.collapse(!o),(o?JO:xR)(e,i,v).each(w=>{e.selection.setRng(w)}),!0)).getOr(!1)},l9=(e,o,n)=>{const s=ae.os.isMacOS()||ae.os.isiOS();n2([{keyCode:dt.RIGHT,action:Vt(J6,e,!0)},{keyCode:dt.LEFT,action:Vt(J6,e,!1)},{keyCode:dt.UP,action:Vt(eR,e,!1)},{keyCode:dt.DOWN,action:Vt(eR,e,!0)},...s?[{keyCode:dt.UP,action:Vt(Vf,e,!1),metaKey:!0,shiftKey:!0},{keyCode:dt.DOWN,action:Vt(Vf,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:dt.RIGHT,action:Vt(CR,e,!0)},{keyCode:dt.LEFT,action:Vt(CR,e,!1)},{keyCode:dt.UP,action:Vt(YO,e,!1)},{keyCode:dt.DOWN,action:Vt(YO,e,!0)},{keyCode:dt.UP,action:Vt(YO,e,!1)},{keyCode:dt.UP,action:Vt(rR,e,!1)},{keyCode:dt.DOWN,action:Vt(rR,e,!0)},{keyCode:dt.RIGHT,action:Vt(lR,e,!0)},{keyCode:dt.LEFT,action:Vt(lR,e,!1)},{keyCode:dt.UP,action:Vt(cR,e,!1)},{keyCode:dt.DOWN,action:Vt(cR,e,!0)},{keyCode:dt.RIGHT,action:Vt(kO,e,o,!0)},{keyCode:dt.LEFT,action:Vt(kO,e,o,!1)},{keyCode:dt.RIGHT,ctrlKey:!s,altKey:s,action:Vt(mF,e,o)},{keyCode:dt.LEFT,ctrlKey:!s,altKey:s,action:Vt(gF,e,o)},{keyCode:dt.UP,action:Vt(oR,e,!1)},{keyCode:dt.DOWN,action:Vt(oR,e,!0)}],n).each(i=>{n.preventDefault()})},c9=(e,o)=>{e.on("keydown",n=>{n.isDefaultPrevented()||l9(e,o,n)})},Ud=(e,o)=>({container:e,offset:o}),l2=nn.DOM,MS=e=>o=>e===o?-1:0,kR=e=>o=>e.isBlock(o)||Ut(["BR","IMG","HR","INPUT"],o.nodeName)||e.getContentEditable(o)==="false",eT=(e,o,n)=>{if(Ve(e)&&o>=0)return B.some(Ud(e,o));{const s=Sd(l2);return B.from(s.backwards(e,o,MS(e),n)).map(i=>Ud(i.container,i.container.data.length))}},_R=(e,o,n)=>{if(Ve(e)&&o>=e.length)return B.some(Ud(e,o));{const s=Sd(l2);return B.from(s.forwards(e,o,MS(e),n)).map(i=>Ud(i.container,0))}},NS=(e,o,n)=>{if(!Ve(e))return B.none();const s=e.data;if(o>=0&&o<=s.length)return B.some(Ud(e,o));{const i=Sd(l2);return B.from(i.backwards(e,o,MS(e),n)).bind(d=>{const h=d.container.data;return NS(d.container,o+h.length,n)})}},ER=(e,o,n)=>{if(!Ve(e))return B.none();const s=e.data;if(o<=s.length)return B.some(Ud(e,o));{const i=Sd(l2);return B.from(i.forwards(e,o,MS(e),n)).bind(d=>ER(d.container,o-s.length,n))}},tT=(e,o,n,s,i)=>{const d=Sd(e,kR(e));return B.from(d.backwards(o,n,s,i))},d9=e=>e.collapsed&&Ve(e.startContainer),oT=e=>gl(e.toString().replace(/\u00A0/g," ")),OR=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,nT=(e,o)=>e.substring(o.length),TR=(e,o,n)=>{let s;const i=n.charAt(0);for(s=o-1;s>=0;s--){const d=e.charAt(s);if(OR(d))return B.none();if(i===d&&Pr(e,n,s,o))break}return B.some(s)},u9=(e,o,n,s=0)=>{if(!d9(o))return B.none();const i={text:"",offset:0},d=(v,w,k)=>(i.text=k+i.text,i.offset+=w,TR(i.text,i.offset,n).getOr(w)),h=e.getParent(o.startContainer,e.isBlock)||e.getRoot();return tT(e,o.startContainer,o.startOffset,d,h).bind(v=>{const w=o.cloneRange();if(w.setStart(v.container,v.offset),w.setEnd(o.endContainer,o.endOffset),w.collapsed)return B.none();const k=oT(w);return k.lastIndexOf(n)!==0||nT(k,n).length<s?B.none():B.some({text:nT(k,n),range:w,trigger:n})})},AR=(e,o,n,s=0)=>lH(K.fromDom(o.startContainer)).fold(()=>u9(e,o,n,s),i=>{const d=e.createRng();d.selectNode(i.dom);const h=oT(d);return B.some({range:d,text:nT(h,n),trigger:n})}),DR=e=>e.nodeType===Ys,m9=e=>e.nodeType===il,MR=e=>{if(DR(e))return Ud(e,e.data.length);{const o=e.childNodes;return o.length>0?MR(o[o.length-1]):Ud(e,o.length)}},NR=(e,o)=>{const n=e.childNodes;return n.length>0&&o<n.length?NR(n[o],0):n.length>0&&m9(e)&&n.length===o?MR(n[n.length-1]):Ud(e,o)},RR=(e,o)=>{var n;const s=(n=e.getParent(o.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return tT(e,o.container,o.offset,(i,d)=>d===0?-1:d,s).filter(i=>{const d=i.container.data.charAt(i.offset-1);return!OR(d)}).isSome()},LR=e=>o=>{const n=NR(o.startContainer,o.startOffset);return!RR(e,n)},g9=(e,o,n)=>Ls(n.triggers,s=>AR(e,o,s)),h9=(e,o)=>{const n=o(),s=e.selection.getRng();return g9(e.dom,s,n).bind(i=>HR(e,o,i))},HR=(e,o,n,s={})=>{var i;const d=o(),h=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",v=kt(d.lookupByTrigger(n.trigger),k=>n.text.length>=k.minChars&&k.matches.getOrThunk(()=>LR(e.dom))(n.range,h,n.text));if(v.length===0)return B.none();const w=Promise.all($t(v,k=>k.fetch(n.text,k.maxResults,s).then(M=>({matchText:n.text,items:M,columns:k.columns,onAction:k.onAction,highlightOn:k.highlightOn}))));return B.some({lookupData:w,context:n})};var Wd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Wd||(Wd={}));const rT=(e,o,n)=>e.stype===Wd.Error?o(e.serror):n(e.svalue),p9=e=>{const o=[],n=[];return Ce(e,s=>{rT(s,i=>n.push(i),i=>o.push(i))}),{values:o,errors:n}},f9=(e,o)=>e.stype===Wd.Error?{stype:Wd.Error,serror:o(e.serror)}:e,v9=(e,o)=>e.stype===Wd.Value?{stype:Wd.Value,svalue:o(e.svalue)}:e,b9=(e,o)=>e.stype===Wd.Value?o(e.svalue):e,RS=(e,o)=>e.stype===Wd.Error?o(e.serror):e,sT=e=>({stype:Wd.Value,svalue:e}),aT=e=>({stype:Wd.Error,serror:e}),aa={fromResult:e=>e.fold(aT,sT),toResult:e=>rT(e,na.error,na.value),svalue:sT,partition:p9,serror:aT,bind:b9,bindError:RS,map:v9,mapError:f9,fold:rT},LS=e=>Nt(e)&&pr(e).length>100?" removed due to size":JSON.stringify(e,null,2),PR=e=>{const o=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Be("... (only showing first ten failures)")}]):e;return $t(o,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},HS=(e,o)=>aa.serror([{path:e,getErrorInfo:o}]),y9=(e,o,n)=>HS(e,()=>'Could not find valid *required* value for "'+o+'" in '+LS(n)),w9=(e,o)=>HS(e,()=>'Choice schema did not contain choice key: "'+o+'"'),BR=(e,o,n)=>HS(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+LS(o)),C9=(e,o)=>HS(e,Be(o)),iT=(e,o,n,s)=>Xo(n,s).fold(()=>BR(e,n,s),i=>i.extract(e.concat(["branch: "+s]),o)),x9=(e,o)=>({extract:(n,s)=>Xo(s,e).fold(()=>w9(n,e),i=>iT(n,s,o,i)),toString:()=>"chooseOn("+e+"). Possible values: "+pr(o)}),S9=(e,o)=>o,k9=(e,o)=>Ji(e)&&Ji(o)?PS(e,o):o,lT=e=>(...o)=>{if(o.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<o.length;s++){const i=o[s];for(const d in i)It(i,d)&&(n[d]=e(n[d],i[d]))}return n},PS=lT(k9),_9=lT(S9),IR=()=>({tag:"required",process:{}}),E9=e=>({tag:"defaultedThunk",process:e}),FR=e=>E9(Be(e)),vs=()=>({tag:"option",process:{}}),rm=(e,o)=>e.length>0?aa.svalue(PS(o,_9.apply(void 0,e))):aa.svalue(o),VR=e=>E(aa.serror,Ol)(e),O9={consolidateObj:(e,o)=>{const n=aa.partition(e);return n.errors.length>0?VR(n.errors):rm(n.values,o)},consolidateArr:e=>{const o=aa.partition(e);return o.errors.length>0?VR(o.errors):aa.svalue(o.values)}},T9=(e,o,n,s)=>({tag:"field",key:e,newKey:o,presence:n,prop:s}),A9=(e,o)=>({tag:"custom",newKey:e,instantiator:o}),zR=(e,o,n)=>{switch(e.tag){case"field":return o(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},BS=e=>{const o=(s,i)=>aa.bindError(e(i),d=>C9(s,d)),n=Be("val");return{extract:o,toString:n}},uv=BS(aa.svalue),D9=(e,o,n,s)=>Xo(o,n).fold(()=>y9(e,n,o),s),ZR=(e,o,n,s)=>{const i=Xo(e,o).getOrThunk(()=>n(e));return s(i)},jd=(e,o,n)=>n(Xo(e,o)),M9=(e,o,n,s)=>{const i=Xo(e,o).map(d=>d===!0?n(e):d);return s(i)},N9=(e,o,n,s,i)=>{const d=v=>i.extract(o.concat([s]),v),h=v=>v.fold(()=>aa.svalue(B.none()),w=>{const k=i.extract(o.concat([s]),w);return aa.map(k,B.some)});switch(e.tag){case"required":return D9(o,n,s,d);case"defaultedThunk":return ZR(n,s,e.process,d);case"option":return jd(n,s,h);case"defaultedOptionThunk":return M9(n,s,e.process,h);case"mergeWithThunk":return ZR(n,s,Be({}),v=>{const w=PS(e.process(n),v);return d(w)})}},UR=(e,o,n)=>{const s={},i=[];for(const d of n)zR(d,(h,v,w,k)=>{const M=N9(w,e,o,h,k);aa.fold(M,H=>{i.push(...H)},H=>{s[v]=H})},(h,v)=>{s[h]=v(o)});return i.length>0?aa.serror(i):aa.svalue(s)},cT=e=>({extract:(o,n)=>UR(o,n,e),toString:()=>`obj{
`+$t(e,o=>zR(o,(n,s,i,d)=>n+" -> "+d.toString(),(n,s)=>"state("+n+")")).join(`
`)+"}"}),IS=e=>({extract:(o,n)=>{const s=$t(n,(i,d)=>e.extract(o.concat(["["+d+"]"]),i));return O9.consolidateArr(s)},toString:()=>"array("+e.toString()+")"}),WR=e=>BS(o=>e(o).fold(aa.serror,aa.svalue)),R9=(e,o,n)=>{const s=o.extract([e],n);return aa.mapError(s,i=>({input:n,errors:i}))},L9=(e,o,n)=>aa.toResult(R9(e,o,n)),H9=e=>`Errors: 
`+PR(e.errors).join(`
`)+`

Input object: `+LS(e.input),dT=(e,o)=>x9(e,wo(o,cT)),jR=Be(uv),mv=(e,o)=>BS(n=>{const s=typeof n;return e(n)?aa.svalue(n):aa.serror(`Expected type: ${o} but got: ${s}`)}),uT=mv(bs,"number"),gv=mv(G,"string"),P9=mv(ao,"boolean"),mT=mv(J,"function"),c2=T9,$R=A9,gT=e=>WR(o=>Ut(e,o)?na.value(o):na.error(`Unsupported value: "${o}", choose one of "${e.join(", ")}".`)),hT=(e,o)=>c2(e,e,IR(),o),GR=e=>hT(e,gv),pT=e=>hT(e,mT),B9=(e,o)=>c2(e,e,IR(),IS(o)),d2=(e,o)=>c2(e,e,vs(),o),FS=e=>d2(e,gv),I9=e=>d2(e,mT),F9=(e,o)=>c2(e,e,FR(o),jR()),hv=(e,o,n)=>c2(e,e,FR(o),n),KR=(e,o)=>hv(e,o,uT),qR=(e,o)=>hv(e,o,gv),VS=(e,o,n)=>hv(e,o,gT(n)),zS=(e,o)=>hv(e,o,P9),ZS=(e,o)=>hv(e,o,mT),V9=(e,o,n)=>hv(e,o,IS(n)),z9=GR("type"),Z9=pT("fetch"),pv=pT("onAction"),XR=ZS("onSetup",()=>De),YR=FS("text"),U9=FS("icon"),W9=FS("tooltip"),j9=FS("label"),$9=zS("active",!1),G9=zS("enabled",!0),QR=zS("primary",!1),mr=e=>F9("columns",e),zf=e=>qR("type",e),sm=cT([z9,GR("trigger"),KR("minChars",1),mr(1),KR("maxResults",10),I9("matches"),Z9,pv,V9("highlightOn",[],gv)]),JR=e=>L9("Autocompleter",sm,{trigger:e.ch,...e}),US=[G9,W9,U9,YR,XR],e8=[$9].concat(US),WS=[ZS("predicate",Ne),VS("scope","node",["node","editor"]),VS("position","selection",["node","selection","line"])],fT=US.concat([zf("contextformbutton"),QR,pv,$R("original",go)]),t8=e8.concat([zf("contextformbutton"),QR,pv,$R("original",go)]),o8=US.concat([zf("contextformbutton")]),K9=e8.concat([zf("contextformtogglebutton")]),q9=dT("type",{contextformbutton:fT,contextformtogglebutton:t8});cT([zf("contextform"),ZS("initValue",Be("")),j9,B9("commands",q9),d2("launch",dT("type",{contextformbutton:o8,contextformtogglebutton:K9}))].concat(WS));const X9=e=>{const o=e.ui.registry.getAll().popups,n=wo(o,d=>JR(d).fold(h=>{throw new Error(H9(h))},go)),s=nd(ol(n,d=>d.trigger)),i=Dl(n);return{dataset:n,triggers:s,lookupByTrigger:d=>kt(i,h=>h.trigger===d)}},Y9=(e,o)=>{const n=Ii(o.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const i=s.which;i===8?n.throttle():i===27&&o.cancelIfNecessary()}),e.on("remove",n.cancel)},Q9=e=>{const o=Xn(),n=vr(!1),s=o.isSet,i=()=>{s()&&(VB(e),h3(e),n.set(!1),o.clear())},d=k=>{s()||(FB(e,k.range),o.set({trigger:k.trigger,matchLength:k.text.length}))},h=Ia(()=>X9(e)),v=k=>o.get().map(M=>AR(e.dom,e.selection.getRng(),M.trigger).bind(H=>HR(e,h,H,k))).getOrThunk(()=>h9(e,h)),w=k=>{v(k).fold(i,M=>{d(M.context),M.lookupData.then(H=>{o.get().map(I=>{const $=M.context;I.trigger===$.trigger&&($.text.length-I.matchLength>=10?i():(o.set({...I,matchLength:$.text.length}),n.get()?g3(e,{lookupData:H}):(n.set(!0),m3(e,{lookupData:H}))))})})})};e.addCommand("mceAutocompleterReload",(k,M)=>{const H=Nt(M)?M.fetchOptions:{};w(H)}),e.addCommand("mceAutocompleterClose",i),Y9(e,{cancelIfNecessary:i,load:w})},n8=oi().browser.isSafari(),r8=e=>ri(K.fromDom(e)),s8=(e,o)=>{var n;return e.startOffset===0&&e.endOffset===((n=o.textContent)===null||n===void 0?void 0:n.length)},jS=(e,o)=>B.from(e.getParent(o.container(),"details")),a8=(e,o)=>jS(e,o).isSome(),J9=(e,o)=>{const n=B.from(e.getParent(o.startContainer,"details")),s=B.from(e.getParent(o.endContainer,"details"));if(n.isSome()||s.isSome()){const i=n.bind(d=>B.from(e.select("summary",d)[0]));return B.some({startSummary:i,startDetails:n,endDetails:s})}else return B.none()},i8=(e,o)=>yr(o).exists(n=>n.isEqual(e)),l8=(e,o)=>Zs(o).exists(n=>fo(n.getNode())&&La(o,n).exists(s=>s.isEqual(e))||n.isEqual(e)),eV=(e,o)=>o.startSummary.exists(n=>i8(e,n)),tV=(e,o)=>o.startSummary.exists(n=>l8(e,n)),vT=(e,o)=>o.startDetails.exists(n=>La(n,e).forall(s=>o.startSummary.exists(i=>!i.contains(e.container())&&i.contains(s.container())))),oV=(e,o,n)=>n.startDetails.exists(s=>ba(e,o).forall(i=>!s.contains(i.container()))),c8=(e,o)=>{const n=o.getNode();Gn(n)||e.selection.setCursorLocation(n,o.offset())},d8=(e,o,n)=>{const s=e.dom.getParent(o.container(),"details");if(s&&!s.open){const i=e.dom.select("summary",s)[0];i&&(n?yr(i):Zs(i)).each(d=>c8(e,d))}else c8(e,o)},u8=(e,o)=>{const n=v=>v.contains(e.startContainer),s=v=>v.contains(e.endContainer),i=o.startSummary.exists(n),d=o.startSummary.exists(s),h=o.startDetails.forall(v=>o.endDetails.forall(w=>v!==w));return(i||d)&&!(i&&d)||h},m8=(e,o,n)=>{const{dom:s,selection:i}=e,d=e.getBody();if(n==="character"){const h=ce.fromRangeStart(i.getRng()),v=s.getParent(h.container(),s.isBlock),w=jS(s,h),k=v&&s.isEmpty(v),M=re(v==null?void 0:v.previousSibling),H=re(v==null?void 0:v.nextSibling);return k&&(o?H:M)&&Pu(!o,d,h).exists(I=>a8(s,I)&&!Xs(w,jS(s,I)))?!0:Pu(o,d,h).fold(Ne,I=>{const $=jS(s,I);if(a8(s,I)&&!Xs(w,$)){if(o||d8(e,I,!1),v&&k){if(o&&M||!o&&H)return!0;d8(e,I,o),e.dom.remove(v)}return!0}else return!1})}else return!1},g8=(e,o,n,s)=>{const i=e.selection.getRng(),d=ce.fromRangeStart(i),h=e.getBody();return s==="selection"?u8(i,o):n?tV(d,o)||oV(h,d,o):eV(d,o)||vT(d,o)},nV=(e,o,n)=>J9(e.dom,e.selection.getRng()).fold(()=>m8(e,o,n),s=>g8(e,s,o,n)||m8(e,o,n)),rV=(e,o,n)=>{const s=e.selection,i=s.getNode(),d=s.getRng(),h=ce.fromRangeStart(d);return hd(i)?(n==="selection"&&s8(d,i)||lx(o,h,i)?r8(i):e.undoManager.transact(()=>{const v=s.getSel();let{anchorNode:w,anchorOffset:k,focusNode:M,focusOffset:H}=v??{};const I=()=>{xe(w)&&xe(k)&&xe(M)&&xe(H)&&(v==null||v.setBaseAndExtent(w,k,M,H))},$=()=>{w=v==null?void 0:v.anchorNode,k=v==null?void 0:v.anchorOffset,M=v==null?void 0:v.focusNode,H=v==null?void 0:v.focusOffset},U=(j,te)=>{Ce(j.childNodes,de=>{Je(de)&&te.appendChild(de)})},W=e.dom.create("span",{"data-mce-bogus":"1"});U(i,W),i.appendChild(W),I(),(n==="word"||n==="line")&&(v==null||v.modify("extend",o?"right":"left",n)),!s.isCollapsed()&&s8(s.getRng(),W)?r8(i):(e.execCommand(o?"ForwardDelete":"Delete"),$(),U(W,i),I()),e.dom.remove(W)}),!0):!1},Gr=(e,o,n)=>nV(e,o,n)||n8&&rV(e,o,n)?B.some(De):B.none(),h8=e=>(o,n,s={})=>{const i=o.getBody(),d={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:De,inputType:n},h=X2(new InputEvent(e));return o.dispatch(e,{...h,...d,...s})},u2=h8("input"),$S=h8("beforeinput"),p8=oi(),f8=p8.os,v8=f8.isMacOS()||f8.isiOS(),sV=p8.browser.isFirefox(),GS=(e,o,n)=>{const s=n.keyCode===dt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),d=i?"character":"selection",h=v=>i?v?"word":"line":"selection";iR([{keyCode:dt.BACKSPACE,action:Vt(BO,e)},{keyCode:dt.BACKSPACE,action:Vt(sO,e,!1)},{keyCode:dt.DELETE,action:Vt(sO,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(oO,e,!1)},{keyCode:dt.DELETE,action:Vt(oO,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(OO,e,o,!1)},{keyCode:dt.DELETE,action:Vt(OO,e,o,!0)},{keyCode:dt.BACKSPACE,action:Vt(V0,e,!1)},{keyCode:dt.DELETE,action:Vt(V0,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(Gr,e,!1,d)},{keyCode:dt.DELETE,action:Vt(Gr,e,!0,d)},...v8?[{keyCode:dt.BACKSPACE,altKey:!0,action:Vt(Gr,e,!1,h(!0))},{keyCode:dt.DELETE,altKey:!0,action:Vt(Gr,e,!0,h(!0))},{keyCode:dt.BACKSPACE,metaKey:!0,action:Vt(Gr,e,!1,h(!1))}]:[{keyCode:dt.BACKSPACE,ctrlKey:!0,action:Vt(Gr,e,!1,h(!0))},{keyCode:dt.DELETE,ctrlKey:!0,action:Vt(Gr,e,!0,h(!0))}],{keyCode:dt.BACKSPACE,action:Vt(aO,e,!1)},{keyCode:dt.DELETE,action:Vt(aO,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(LO,e,!1)},{keyCode:dt.DELETE,action:Vt(LO,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(JE,e,!1)},{keyCode:dt.DELETE,action:Vt(JE,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(YE,e,!1)},{keyCode:dt.DELETE,action:Vt(YE,e,!0)},{keyCode:dt.BACKSPACE,action:Vt(NO,e,!1)},{keyCode:dt.DELETE,action:Vt(NO,e,!0)}],n).filter(v=>e.selection.isEditable()).each(v=>{n.preventDefault(),$S(e,s).isDefaultPrevented()||(v(),u2(e,s))})},aV=(e,o,n)=>n2([{keyCode:dt.BACKSPACE,action:Vt(rO,e)},{keyCode:dt.DELETE,action:Vt(rO,e)},...v8?[{keyCode:dt.BACKSPACE,altKey:!0,action:Vt(o2,e)},{keyCode:dt.DELETE,altKey:!0,action:Vt(o2,e)},...n?[{keyCode:sV?224:91,action:Vt(o2,e)}]:[]]:[{keyCode:dt.BACKSPACE,ctrlKey:!0,action:Vt(o2,e)},{keyCode:dt.DELETE,ctrlKey:!0,action:Vt(o2,e)}]],o),iV=(e,o)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===dt.BACKSPACE,s.isDefaultPrevented()||GS(e,o,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||aV(e,s,n),n=!1})},bT=e=>{for(;e;){if(gt(e)||Ve(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Wh=(e,o)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const d=bT(o.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&o.insertBefore(n.doc.createTextNode(vn),o.firstChild)}const i=n.createRng();if(o.normalize(),o.hasChildNodes()){const d=new Ar(o,o);let h=o,v;for(;v=d.current();){if(Ve(v)){i.setStart(v,0),i.setEnd(v,0);break}if(s[v.nodeName.toLowerCase()]){i.setStartBefore(v),i.setEndBefore(v);break}h=v,v=d.next()}v||(i.setStart(h,0),i.setEnd(h,0))}else fo(o)?o.nextSibling&&n.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));e.selection.setRng(i),L0(e,i)},m2=(e,o)=>{const n=e.getRoot();let s,i=o;for(;i!==n&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){s=i;break}i=i.parentNode}return i!==n?s:n},yT=e=>B.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),lV=e=>yT(e).fold(Be(""),o=>o.nodeName.toUpperCase()),cV=e=>yT(e).filter(o=>Hm(K.fromDom(o))).isSome(),uc=e=>{e.innerHTML='<br data-mce-bogus="1">'},dV=(e,o,n)=>{const s=e.dom;B.from(n.style).map(s.parseStyle).each(w=>{const k={...P(K.fromDom(o)),...w};s.setStyles(o,k)});const i=B.from(n.class).map(w=>w.split(/\s+/)),d=B.from(o.className).map(w=>kt(w.split(/\s+/),k=>k!==""));rr(i,d,(w,k)=>{const M=kt(k,I=>!Ut(w,I)),H=[...w,...M];s.setAttrib(o,"class",H.join(" "))});const h=["style","class"],v=jo(n,(w,k)=>!Ut(h,k));s.setAttribs(o,v)},fv=(e,o)=>{if(ns(e).toLowerCase()===o.tagName.toLowerCase()){const n=li(e);dV(e,o,n)}},b8=(e,o,n,s,i=!0,d)=>{const h=e.dom,v=e.schema,w=ns(e),k=n?n.nodeName.toUpperCase():"";let M=o;const H=v.getTextInlineElements();let I;d||k==="TABLE"||k==="HR"?I=h.create(d||w):I=n.cloneNode(!1);let $=I;if(!i)h.setAttrib(I,"style",null),h.setAttrib(I,"class",null);else do if(H[M.nodeName]){if(Qn(M)||Yt(M))continue;const U=M.cloneNode(!1);h.setAttrib(U,"id",""),I.hasChildNodes()?(U.appendChild(I.firstChild),I.appendChild(U)):($=U,I.appendChild(U))}while((M=M.parentNode)&&M!==s);return fv(e,I),uc($),I},uV=(e,o)=>e.dom.getParent(o,lr),mV=(e,o,n)=>{let s=o;for(;s&&s!==e&&re(s.nextSibling);){const i=s.parentElement;if(!i||!n(i))return lr(i);s=i}return!1},gV=(e,o,n)=>!o&&n.nodeName.toLowerCase()===ns(e)&&e.dom.isEmpty(n)&&mV(e.getBody(),n,s=>It(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),hV=(e,o,n)=>{var s,i,d;const h=o(ns(e)),v=uV(e,n);v&&(e.dom.insertAfter(h,v),Wh(e,h),((d=(i=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||i===void 0?void 0:i.length)!==null&&d!==void 0?d:0)>1&&e.dom.remove(n))},pV=(e,o)=>e.firstChild&&e.firstChild.nodeName===o,fV=e=>{var o;return((o=e.parentNode)===null||o===void 0?void 0:o.firstChild)===e},KS=(e,o)=>{const n=e==null?void 0:e.parentNode;return xe(n)&&n.nodeName===o},wT=e=>xe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),qS=e=>xe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),vV=e=>wT(e)&&wT(e.parentNode),XS=e=>{const o=e.parentNode;return qS(o)?o:e},YS=(e,o,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!gt(s);)s=s[n?"nextSibling":"previousSibling"];return s===o},bV=(e,o,n,s,i)=>{const d=e.dom,h=e.selection.getRng(),v=n.parentNode;if(n===e.getBody()||!v)return;vV(n)&&(i="LI");let w=o(i);if(YS(n,s,!0)&&YS(n,s,!1))if(KS(n,"LI")){const k=XS(n);d.insertAfter(w,k),fV(n)?d.remove(k):d.remove(n)}else d.replace(w,n);else if(YS(n,s,!0))KS(n,"LI")?(d.insertAfter(w,XS(n)),w.appendChild(d.doc.createTextNode(" ")),w.appendChild(n)):v.insertBefore(w,n),d.remove(s);else if(YS(n,s,!1))d.insertAfter(w,XS(n)),d.remove(s);else{n=XS(n);const k=h.cloneRange();k.setStartAfter(s),k.setEndAfter(n);const M=k.extractContents();i==="LI"&&pV(M,"LI")?(w=M.firstChild,d.insertAfter(M,n)):(d.insertAfter(M,n),d.insertAfter(w,n)),d.remove(s)}Wh(e,w)},yV=e=>{Ce(md(K.fromDom(e),Lo),o=>{const n=o.dom;n.nodeValue=gl(n.data)})},y8=(e,o)=>{const n=e.dom.getParent(o,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},wV=(e,o)=>o&&o.nodeName==="A"&&e.isEmpty(o),QS=(e,o)=>e.nodeName===o||e.previousSibling&&e.previousSibling.nodeName===o,JS=(e,o)=>xe(o)&&e.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&e.isEditable(o.parentNode)&&e.getContentEditable(o)!=="false",CV=(e,o,n)=>{var s;const i=[];if(!n)return;let d=n;for(;d=d.firstChild;){if(e.isBlock(d))return;gt(d)&&!o[d.nodeName.toLowerCase()]&&i.push(d)}let h=i.length;for(;h--;)d=i[h],(!d.hasChildNodes()||d.firstChild===d.lastChild&&((s=d.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||wV(e,d))&&e.remove(d)},CT=(e,o,n)=>Ve(o)?e?n===1&&o.data.charAt(n-1)===qn?0:n:n===o.data.length-1&&o.data.charAt(n)===qn?o.data.length:n:n,xT=e=>{const o=e.cloneRange();return o.setStart(e.startContainer,CT(!0,e.startContainer,e.startOffset)),o.setEnd(e.endContainer,CT(!1,e.endContainer,e.endOffset)),o},xV=e=>{let o=e;do Ve(o)&&(o.data=o.data.replace(/^[\r\n]+/,"")),o=o.firstChild;while(o)},SV=(e,o,n,s,i)=>{var d,h;const v=e.dom,w=(d=m2(v,s))!==null&&d!==void 0?d:v.getRoot();let k=v.getParent(s,v.isBlock);if(!k||!JS(v,k)){if(k=k||w,!k.hasChildNodes()){const $=v.create(o);return fv(e,$),k.appendChild($),n.setStart($,0),n.setEnd($,0),$}let M=s;for(;M&&M.parentNode!==k;)M=M.parentNode;let H;for(;M&&!v.isBlock(M);)H=M,M=M.previousSibling;const I=(h=H==null?void 0:H.parentElement)===null||h===void 0?void 0:h.nodeName;if(H&&I&&e.schema.isValidChild(I,o.toLowerCase())){const $=H.parentNode,U=v.create(o);for(fv(e,U),$.insertBefore(U,H),M=H;M&&!v.isBlock(M);){const W=M.nextSibling;U.appendChild(M),M=W}n.setStart(s,i),n.setEnd(s,i)}}return s},e4=(e,o)=>{o.normalize();const n=o.lastChild;(!n||gt(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(o,"br")},kV=(e,o)=>{const n=Nw(e);return oo(o)?!1:G(n)?Ut(fe.explode(n),o.nodeName.toLowerCase()):n},t4={insert:(e,o)=>{let n,s,i,d,h=!1;const v=e.dom,w=e.schema,k=w.getNonEmptyElements(),M=e.selection.getRng(),H=ns(e),I=K.fromDom(M.startContainer),$=ks(I,M.startOffset),U=$.exists(Fe=>ll(Fe)&&!Vr(Fe)),W=M.collapsed&&U,j=Fe=>b8(e,n,Ye,$e,Ck(e),Fe),te=Fe=>{const ft=CT(Fe,n,s);if(Ve(n)&&(Fe?ft>0:ft<n.data.length))return!1;if(n.parentNode===Ye&&h&&!Fe||Fe&&gt(n)&&n===Ye.firstChild)return!0;if(QS(n,"TABLE")||QS(n,"HR"))return h&&!Fe||!h&&Fe;const ve=new Ar(n,Ye);Ve(n)&&(Fe&&ft===0?ve.prev():!Fe&&ft===n.data.length&&ve.next());let et;for(;et=ve.current();){if(gt(et)){if(!et.getAttribute("data-mce-bogus")){const bt=et.nodeName.toLowerCase();if(k[bt]&&bt!=="br")return!1}}else if(Ve(et)&&!Gl(et.data))return!1;Fe?ve.prev():ve.next()}return!0},de=()=>{let Fe;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Ie!=="HGROUP"?Fe=j(H):Fe=j(),kV(e,d)&&JS(v,d)&&v.isEmpty(Ye,void 0,{includeZwsp:!0})?Fe=v.split(d,Ye):v.insertAfter(Fe,Ye),Wh(e,Fe),Fe};it(v,M).each(Fe=>{M.setStart(Fe.startContainer,Fe.startOffset),M.setEnd(Fe.endContainer,Fe.endOffset)}),n=M.startContainer,s=M.startOffset;const ue=!!(o&&o.shiftKey),Ae=!!(o&&o.ctrlKey);gt(n)&&n.hasChildNodes()&&!W&&(h=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,h&&Ve(n)?s=n.data.length:s=0);const $e=m2(v,n);if(!$e||y8(e,n))return;ue||(n=SV(e,H,M,n,s));let Ye=v.getParent(n,v.isBlock)||v.getRoot();d=xe(Ye==null?void 0:Ye.parentNode)?v.getParent(Ye.parentNode,v.isBlock):null,i=Ye?Ye.nodeName.toUpperCase():"";const Ie=d?d.nodeName.toUpperCase():"";if(Ie==="LI"&&!Ae){const Fe=d;Ye=Fe,d=Fe.parentNode,i=Ie}if(gt(d)&&gV(e,ue,Ye))return hV(e,j,Ye);if(/^(LI|DT|DD)$/.test(i)&&gt(d)&&v.isEmpty(Ye)){bV(e,j,d,Ye,H);return}if(!W&&(Ye===e.getBody()||!JS(v,Ye)))return;const Ee=Ye.parentNode;let ye;if(W)ye=j(H),$.fold(()=>{ot(I,K.fromDom(ye))},Fe=>{He(Fe,K.fromDom(ye))}),e.selection.setCursorLocation(ye,0);else if(yu(Ye))ye=p1(Ye),v.isEmpty(Ye)&&uc(Ye),fv(e,ye),Wh(e,ye);else if(te(!1))ye=de();else if(te(!0)&&Ee){ye=Ee.insertBefore(j(),Ye);const Fe=dl(K.fromDom(M.startContainer))&&M.collapsed;Wh(e,QS(Ye,"HR")||Fe?ye:Ye)}else{const Fe=xT(M).cloneRange();Fe.setEndAfter(Ye);const ft=Fe.extractContents();yV(ft),xV(ft),ye=ft.firstChild,v.insertAfter(ft,Ye),CV(v,k,ye),e4(v,Ye),v.isEmpty(Ye)&&uc(Ye),ye.normalize(),v.isEmpty(ye)?(v.remove(ye),de()):(fv(e,ye),Wh(e,ye))}v.setAttrib(ye,"id",""),e.dispatch("NewBlock",{newBlock:ye})},fakeEventName:"insertParagraph"},ST=(e,o,n)=>{const s=new Ar(o,n);let i;const d=e.getNonEmptyElements();for(;i=s.next();)if(d[i.nodeName.toLowerCase()]||Ve(i)&&i.length>0)return!0;return!1},kT=(e,o,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),e.selection.setRng(s),L0(e,s)},_V=(e,o)=>{const n=e.selection,s=e.dom,i=n.getRng();let d,h=!1;it(s,i).each($=>{i.setStart($.startContainer,$.startOffset),i.setEnd($.endContainer,$.endOffset)});let v=i.startOffset,w=i.startContainer;if(gt(w)&&w.hasChildNodes()){const $=v>w.childNodes.length-1;w=w.childNodes[Math.min(v,w.childNodes.length-1)]||w,$&&Ve(w)?v=w.data.length:v=0}let k=s.getParent(w,s.isBlock);const M=k&&k.parentNode?s.getParent(k.parentNode,s.isBlock):null,H=M?M.nodeName.toUpperCase():"",I=!!(o&&o.ctrlKey);H==="LI"&&!I&&(k=M),Ve(w)&&v>=w.data.length&&(ST(e.schema,w,k||s.getRoot())||(d=s.create("br"),i.insertNode(d),i.setStartAfter(d),i.setEndAfter(d),h=!0)),d=s.create("br"),Ql(s,i,d),kT(e,d,h),e.undoManager.add()},jh=(e,o)=>{const n=K.fromTag("br");He(K.fromDom(o),n),e.undoManager.add()},EV=(e,o)=>{TV(e.getBody(),o)||xt(K.fromDom(o),K.fromTag("br"));const n=K.fromTag("br");xt(K.fromDom(o),n),kT(e,n.dom,!1),e.undoManager.add()},OV=e=>fo(e.getNode()),TV=(e,o)=>OV(ce.after(o))?!0:ba(e,ce.after(o)).map(n=>fo(n.getNode())).getOr(!1),g2=e=>e&&e.nodeName==="A"&&"href"in e,w8=e=>e.fold(Ne,g2,g2,Ne),C8=e=>{const o=Me(xf,e),n=ce.fromRangeStart(e.selection.getRng());return om(o,e.getBody(),n).filter(w8)},AV=(e,o)=>{o.fold(De,Me(jh,e),Me(EV,e),De)},_T={insert:(e,o)=>{const n=C8(e);n.isSome()?n.each(Me(AV,e)):_V(e,o)},fakeEventName:"insertLineBreak"},x8=(e,o)=>yT(e).filter(n=>o.length>0&&Za(K.fromDom(n),o)).isSome(),DV=e=>x8(e,Cb(e)),MV=e=>x8(e,bl(e)),Qi=Jl.generate([{br:[]},{block:[]},{none:[]}]),ET=(e,o)=>MV(e),S8=e=>(o,n)=>cV(o)===e,o4=(e,o)=>(n,s)=>lV(n)===e.toUpperCase()===o,k8=e=>{const o=m2(e.dom,e.selection.getStart());return oo(o)},$h=e=>o4("pre",e),_8=()=>o4("summary",!0),h2=e=>(o,n)=>wb(o)===e,NV=(e,o)=>DV(e),n4=(e,o)=>o,r4=e=>{const o=ns(e),n=m2(e.dom,e.selection.getStart());return xe(n)&&e.schema.isValidChild(n.nodeName,o)},E8=e=>{const o=e.selection.getRng(),n=K.fromDom(o.startContainer),s=ks(n,o.startOffset).map(i=>ll(i)&&!Vr(i));return o.collapsed&&s.getOr(!0)},mc=(e,o)=>(n,s)=>_n(e,(i,d)=>i&&d(n,s),!0)?B.some(o):B.none(),RV=(e,o)=>cc([mc([ET],Qi.none()),mc([$h(!0),k8],Qi.none()),mc([_8()],Qi.br()),mc([$h(!0),h2(!1),n4],Qi.br()),mc([$h(!0),h2(!1)],Qi.block()),mc([$h(!0),h2(!0),n4],Qi.block()),mc([$h(!0),h2(!0)],Qi.br()),mc([S8(!0),n4],Qi.br()),mc([S8(!0)],Qi.block()),mc([NV],Qi.br()),mc([n4],Qi.br()),mc([r4],Qi.block()),mc([E8],Qi.block())],[e,!!(o&&o.shiftKey)]).getOr(Qi.none()),p2=(e,o,n)=>{o.selection.isCollapsed()||Pd(o),!(xe(n)&&$S(o,e.fakeEventName).isDefaultPrevented())&&(e.insert(o,n),xe(n)&&u2(o,e.fakeEventName))},O8=(e,o)=>{const n=()=>p2(_T,e,o),s=()=>p2(t4,e,o),i=RV(e,o);switch(ec(e)){case"linebreak":i.fold(n,n,De);break;case"block":i.fold(s,s,De);break;case"invert":i.fold(s,n,De);break;default:i.fold(n,s,De);break}},T8=oi(),LV=T8.os.isiOS()&&T8.browser.isSafari(),A8=(e,o)=>{o.isDefaultPrevented()||(o.preventDefault(),UM(e.undoManager),e.undoManager.transact(()=>{O8(e,o)}))},HV=e=>{if(!e.collapsed)return!1;const o=e.startContainer;if(Ve(o)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=o.data.charAt(e.startOffset-1);return n.test(s)}else return!1},D8=e=>{let o=B.none();const n=i=>{o=B.some(i.selection.getBookmark()),i.undoManager.add()},s=(i,d)=>{i.undoManager.undo(),o.fold(De,h=>i.selection.moveToBookmark(h)),A8(i,d),o=B.none()};e.on("keydown",i=>{i.keyCode===dt.ENTER&&(LV&&HV(e.selection.getRng())?n(e):A8(e,i))}),e.on("keyup",i=>{i.keyCode===dt.ENTER&&o.each(()=>s(e,i))})},PV=(e,o,n)=>{const s=ae.os.isMacOS()||ae.os.isiOS();n2([{keyCode:dt.END,action:Vt(tR,e,!0)},{keyCode:dt.HOME,action:Vt(tR,e,!1)},...s?[]:[{keyCode:dt.HOME,action:Vt(Vf,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:dt.END,action:Vt(Vf,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:dt.END,action:Vt(dR,e,!0)},{keyCode:dt.HOME,action:Vt(dR,e,!1)},{keyCode:dt.END,action:Vt(SS,e,!0,o)},{keyCode:dt.HOME,action:Vt(SS,e,!1,o)}],n).each(i=>{n.preventDefault()})},M8=(e,o)=>{e.on("keydown",n=>{n.isDefaultPrevented()||PV(e,o,n)})},BV=e=>{e.on("input",o=>{o.isComposing||js(e)})},IV=oi(),FV=(e,o,n)=>{n2([{keyCode:dt.PAGE_UP,action:Vt(SS,e,!1,o)},{keyCode:dt.PAGE_DOWN,action:Vt(SS,e,!0,o)}],n)},N8=e=>e.stopImmediatePropagation(),R8=e=>e.keyCode===dt.PAGE_UP||e.keyCode===dt.PAGE_DOWN,Zf=(e,o,n)=>{n&&!e.get()?o.on("NodeChange",N8,!0):!n&&e.get()&&o.off("NodeChange",N8),e.set(n)},VV=(e,o)=>{if(IV.os.isMacOS())return;const n=vr(!1);e.on("keydown",s=>{R8(s)&&Zf(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||FV(e,o,s),R8(s)&&n.get()&&(Zf(n,e,!1),e.nodeChanged())})},L8=(e,o)=>{const n=o.container(),s=o.offset();return Ve(n)?(n.insertData(s,e),B.some(ce(n,s+e.length))):rh(o).map(i=>{const d=K.fromText(e);return o.isAtEnd()?xt(i,d):He(i,d),ce(d.dom,e.length)})},OT=Me(L8,vn),H8=Me(L8," "),zV=(e,o)=>Q3(e,o)?OT(o):H8(o),ZV=e=>o=>o.fold(n=>La(e.dom,ce.before(n)),n=>yr(n),n=>Zs(n),n=>ba(e.dom,ce.after(n))),P8=(e,o)=>n=>Q3(e,n)?OT(o):H8(o),B8=e=>o=>{e.selection.setRng(o.toRange()),e.nodeChanged()},UV=(e,o)=>e.isEditable(e.getParent(o,"summary")),s4=e=>{const o=ce.fromRangeStart(e.selection.getRng()),n=K.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=Me(xf,e),i=ce.fromRangeStart(e.selection.getRng());return om(s,e.getBody(),i).bind(ZV(n)).map(d=>()=>P8(n,o)(d).each(B8(e)))}else return B.none()},WV=e=>{const o=()=>{const n=K.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=ce.fromRangeStart(e.selection.getRng());zV(n,s).each(B8(e))};return Il(ae.browser.isFirefox()&&e.selection.isEditable()&&UV(e.dom,e.selection.getRng().startContainer),o)},jV=(e,o)=>{iR([{keyCode:dt.SPACEBAR,action:Vt(s4,e)},{keyCode:dt.SPACEBAR,action:Vt(WV,e)}],o).each(n=>{o.preventDefault(),$S(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),u2(e,"insertText",{data:" "}))})},$V=e=>{e.on("keydown",o=>{o.isDefaultPrevented()||jV(e,o)})},GV=e=>Jw(e)?[{keyCode:dt.TAB,action:Vt(SR,e,!0)},{keyCode:dt.TAB,shiftKey:!0,action:Vt(SR,e,!1)}]:[],KV=(e,o)=>{n2([...GV(e)],o).each(n=>{o.preventDefault()})},qV=e=>{e.on("keydown",o=>{o.isDefaultPrevented()||KV(e,o)})},XV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Q9(e),Xu(e))return vr(null);{const o=EO(e);return q6(e),c9(e,o),iV(e,o),D8(e),$V(e),BV(e),qV(e),M8(e,o),VV(e,o),o}};class YV{constructor(o){this.lastPath=[],this.editor=o;let n;const s=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const d=o.selection.getRng(),h={startContainer:d.startContainer,startOffset:d.startOffset,endContainer:d.endContainer,endOffset:d.endOffset};(i.type==="nodechange"||!N(h,n))&&o.dispatch("SelectionChange"),n=h}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&v0(o)&&!s.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&v0(o)&&(o.selection.getNode().nodeName==="IMG"?nc.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!Ob(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();s=n.getStart(!0)||i,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,i))&&(s=i);const d=[];this.editor.dom.getParent(s,h=>h===i?!0:(d.push(h),!1)),this.editor.dispatch("NodeChange",{...o,element:s,parents:d})}}isSameElementPath(o){let n;const s=this.editor,i=dn(s.dom.getParents(o,ct,s.getBody()));if(i.length===this.lastPath.length){for(n=i.length;n>=0&&i[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const I8=Tp("image"),QV=e=>{const o=e;return B.from(o[I8])},JV=(e,o)=>{const n=e;n[I8]=o},TT=Tp("event"),ez=e=>{const o=e;return B.from(o[TT])},Uo=e=>o=>{const n=o;n[TT]=e},tz=(e,o)=>Uo(o)(e),AT=Uo(0),oz=Uo(2),DT=Uo(1),F8=(e=>o=>{const n=o;return B.from(n[TT]).exists(s=>s===e)})(0),V8=()=>Object.freeze({length:0,item:e=>null}),MT=Tp("mode"),z8=e=>{const o=e;return B.from(o[MT])},a4=e=>o=>{const n=o;n[MT]=e},Z8=(e,o)=>a4(o)(e),NT=a4(0),RT=a4(2),nz=a4(1),U8=e=>o=>{const n=o;return B.from(n[MT]).exists(s=>s===e)},$d=U8(0),vv=U8(1),rz=(e,o)=>({...o,get length(){return o.length},add:(n,s)=>{if($d(e))if(G(n)){if(!Gn(s))return o.add(n,s)}else return o.add(n);return null},remove:n=>{$d(e)&&o.remove(n)},clear:()=>{$d(e)&&o.clear()}}),sz=["none","copy","link","move"],bv=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],LT=()=>{const e=new window.DataTransfer;let o="move",n="all";const s={get dropEffect(){return o},set dropEffect(i){Ut(sz,i)&&(o=i)},get effectAllowed(){return n},set effectAllowed(i){F8(s)&&Ut(bv,i)&&(n=i)},get items(){return rz(s,e.items)},get files(){return vv(s)?V8():e.files},get types(){return e.types},setDragImage:(i,d,h)=>{$d(s)&&(JV(s,{image:i,x:d,y:h}),e.setDragImage(i,d,h))},getData:i=>vv(s)?"":e.getData(i),setData:(i,d)=>{$d(s)&&e.setData(i,d)},clearData:i=>{$d(s)&&e.clearData(i)}};return NT(s),s},HT=e=>{const o=LT(),n=z8(e);return RT(e),AT(o),o.dropEffect=e.dropEffect,o.effectAllowed=e.effectAllowed,QV(e).each(s=>o.setDragImage(s.image,s.x,s.y)),Ce(e.types,s=>{s!=="Files"&&o.setData(s,e.getData(s))}),Ce(e.files,s=>o.items.add(s)),ez(e).each(s=>{tz(o,s)}),n.each(s=>{Z8(e,s),Z8(o,s)}),o},PT=e=>{const o=e.getData("text/html");return o===""?B.none():B.some(o)},BT=(e,o)=>e.setData("text/html",o),W8="x-tinymce/html",i4=Be(W8),l4="<!-- "+W8+" -->",j8=e=>l4+e,az=e=>e.replace(l4,""),$8=e=>e.indexOf(l4)!==-1,iz=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),G8=(e,o)=>{let n="<"+e;const s=ol(o,(i,d)=>d+'="'+wd.encodeAllRaw(i)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},lz=(e,o,n)=>{const s=e.split(/\n\n/),i=G8(o,n),d="</"+o+">",h=$t(s,w=>w.split(/\n/).join("<br />")),v=w=>i+w+d;return h.length===1?h[0]:$t(h,v).join("")},IT="%MCEPASTEBIN%",cz=(e,o)=>{const{dom:n,selection:s}=e,i=e.getBody();o.set(s.getRng());const d=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},IT);ae.browser.isFirefox()&&n.setStyle(d,"left",n.getStyle(i,"direction",!0)==="rtl"?65535:-65535),n.bind(d,"beforedeactivate focusin focusout",h=>{h.stopPropagation()}),d.focus(),s.select(d,!0)},dz=(e,o)=>{const n=e.dom;if(FT(e)){let s;const i=o.get();for(;s=FT(e);)n.remove(s),n.unbind(s);i&&e.selection.setRng(i)}o.set(null)},FT=e=>e.dom.get("mcepastebin"),uz=e=>xe(e)&&e.id==="mcepastebin",mz=e=>{const o=e.dom,n=(h,v)=>{h.appendChild(v),o.remove(v,!0)},[s,...i]=kt(e.getBody().childNodes,uz);Ce(i,h=>{n(s,h)});const d=o.select("div[id=mcepastebin]",s);for(let h=d.length-1;h>=0;h--){const v=o.create("div");s.insertBefore(v,d[h]),n(v,d[h])}return s?s.innerHTML:""},f2=e=>e===IT,gz=e=>{const o=vr(null);return{create:()=>cz(e,o),remove:()=>dz(e,o),getEl:()=>FT(e),getHtml:()=>mz(e),getLastRng:o.get}},VT=(e,o)=>(fe.each(o,n=>{Cn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),hz=e=>{const o=_u(),n=Bh({},o);let s="";const i=o.getVoidElements(),d=fe.makeMap("script noscript style textarea video audio iframe object"," "),h=o.getBlockElements(),v=w=>{const k=w.name,M=w;if(k==="br"){s+=`
`;return}if(k!=="wbr"){if(i[k]&&(s+=" "),d[k]){s+=" ";return}if(w.type===3&&(s+=w.value),!(w.name in o.getVoidElements())){let H=w.firstChild;if(H)do v(H);while(H=H.next)}h[k]&&M.next&&(s+=`
`,k==="p"&&(s+=`
`))}};return e=VT(e,[/<!\[[^\]]+\]>/g]),v(n.parse(e)),s},K8=e=>(e=VT(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,n,s)=>!n&&!s?" ":vn],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),pz=e=>{let o=0;return()=>e+o++},fz=e=>{const o=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return fe.hasOwn(n,o)?"image/"+n[o]:"image/"+o},vz=(e,o)=>{const n=Bh({sanitize:Qg(e)},e.schema);n.addNodeFilter("meta",i=>{fe.each(i,d=>{d.remove()})});const s=n.parse(o,{forced_root_block:!1,isRootContent:!0});return wh({validate:!0},e.schema).serialize(s)},q8=(e,o)=>({content:e,cancelled:o}),X8=(e,o,n)=>{const s=e.dom.create("div",{style:"display:none"},o),i=f3(e,s,n);return q8(i.node.innerHTML,i.isDefaultPrevented())},bz=(e,o,n)=>{const s=p3(e,o,n),i=vz(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?X8(e,i,n):q8(i,s.isDefaultPrevented())},yz=(e,o,n)=>bz(e,o,n),zT=(e,o)=>(e.insertContent(o,{merge:Vk(e),paste:!0}),!0),ZT=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),wz=(e,o)=>ZT(o)&&Wo(Q1(e),n=>Qd(o.toLowerCase(),`.${n.toLowerCase()}`)),Cz=(e,o,n)=>(e.undoManager.extra(()=>{n(e,o)},()=>{e.insertContent('<img src="'+o+'">')}),!0),xz=(e,o,n)=>(e.undoManager.extra(()=>{n(e,o)},()=>{e.execCommand("mceInsertLink",!1,o)}),!0),Y8=(e,o,n)=>!e.selection.isCollapsed()&&ZT(o)?xz(e,o,n):!1,Sz=(e,o,n)=>wz(e,o)?Cz(e,o,n):!1,kz=(e,o)=>{fe.each([Y8,Sz,zT],n=>!n(e,o,zT))},_z=(e,o,n)=>{n||!$w(e)?zT(e,o):kz(e,o)},Ez=pz("mceclip"),Oz=e=>{const o=LT();return BT(o,e),RT(o),o},Q8=(e,o,n,s,i)=>{const d=yz(e,o,n);if(!d.cancelled){const h=d.content,v=()=>_z(e,h,s);i?$S(e,"insertFromPaste",{dataTransfer:Oz(h)}).isDefaultPrevented()||(v(),u2(e,"insertFromPaste")):v()}},c4=(e,o,n,s)=>{const i=n||$8(o);Q8(e,az(o),i,!1,s)},yv=(e,o,n)=>{const s=e.dom.encode(o).replace(/\r\n/g,`
`),i=$a(s,Zk(e)),d=lz(i,ns(e),li(e));Q8(e,d,!1,!0,n)},UT=e=>{const o={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{o[s]=e.getData(s)}catch{o[s]=""}}return o},Gh=(e,o)=>o in e&&e[o].length>0,WT=e=>Gh(e,"text/html")||Gh(e,"text/plain"),J8=(e,o)=>{const n=o.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return xe(n)?e.dom.encode(n[1]):void 0},jT=(e,o,n,s)=>{const i=Ez(),d=xb(e)&&xe(n.name),h=d?J8(e,n.name):i,v=d?n.name:void 0,w=o.create(i,n,s,h,v);return o.add(w),w},Tz=(e,o)=>{Ny(o.uri).each(({data:n,type:s,base64Encoded:i})=>{const d=i?n:btoa(n),h=o.file,v=e.editorUpload.blobCache,w=v.getByData(d,s),k=w??jT(e,v,h,d);c4(e,`<img src="${k.blobUri()}">`,!1,!0)})},e7=e=>e.type==="paste",Az=e=>Promise.all($t(e,o=>q0(o).then(n=>({file:o,uri:n})))),t7=e=>{const o=Q1(e);return n=>$o(n.type,"image/")&&Wo(o,s=>fz(s)===n.type)},Dz=(e,o)=>{const n=o.items?Rs(ws(o.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],s=o.files?ws(o.files):[];return kt(n.length>0?n:s,t7(e))},$T=(e,o,n)=>{const s=e7(o)?o.clipboardData:o.dataTransfer;if(K1(e)&&s){const i=Dz(e,s);if(i.length>0)return o.preventDefault(),Az(i).then(d=>{n&&e.selection.setRng(n),Ce(d,h=>{Tz(e,h)})}),!0}return!1},Mz=e=>{var o,n;return ae.os.isAndroid()&&((n=(o=e.clipboardData)===null||o===void 0?void 0:o.items)===null||n===void 0?void 0:n.length)===0},Nz=e=>dt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,GT=(e,o,n,s,i)=>{let d=K8(n);const h=Gh(o,i4())||$8(n),v=!h&&iz(d),w=ZT(d);(f2(d)||!d.length||v&&!w)&&(s=!0),(s||w)&&(Gh(o,"text/plain")&&v?d=o["text/plain"]:d=hz(d)),!f2(d)&&(s?yv(e,d,i):c4(e,d,h,i))},v2=(e,o,n)=>{let s;const i=()=>o.getLastRng()||e.selection.getRng();e.on("keydown",d=>{Nz(d)&&!d.isDefaultPrevented()&&(s=d.shiftKey&&d.keyCode===86)}),e.on("paste",d=>{if(d.isDefaultPrevented()||Mz(d))return;const h=n.get()==="text"||s;s=!1;const v=UT(d.clipboardData);!WT(v)&&$T(e,d,i())||(Gh(v,"text/html")?(d.preventDefault(),GT(e,v,v["text/html"],h,!0)):Gh(v,"text/plain")&&Gh(v,"text/uri-list")?(d.preventDefault(),GT(e,v,v["text/plain"],h,!0)):(o.create(),nc.setEditorTimeout(e,()=>{const w=o.getHtml();o.remove(),GT(e,v,w,h,!1)},0)))})},Rz=e=>{const o=i=>$o(i,"webkit-fake-url"),n=i=>$o(i,"data:"),s=i=>{var d;return((d=i.data)===null||d===void 0?void 0:d.paste)===!0};e.parser.addNodeFilter("img",(i,d,h)=>{if(!K1(e)&&s(h))for(const v of i){const w=v.attr("src");G(w)&&!v.attr("data-mce-object")&&w!==ae.transparentSrc&&(o(w)||!Gw(e)&&n(w))&&v.remove()}})},Lz=(e,o,n)=>{v2(e,o,n),Rz(e)},o7=(e,o)=>{o.get()==="text"?(o.set("html"),cf(e,!1)):(o.set("text"),cf(e,!0)),e.focus()},Hz=(e,o)=>{e.addCommand("mceTogglePlainTextPaste",()=>{o7(e,o)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&c4(e,s.html,s.internal,!1),s.text&&yv(e,s.text,!1)})},Pz=(e,o,n)=>{if(e)try{return e.clearData(),e.setData("text/html",o),e.setData("text/plain",n),e.setData(i4(),o),!0}catch{return!1}else return!1},n7=(e,o,n,s)=>{Pz(e.clipboardData,o.html,o.text)?(e.preventDefault(),s()):n(o.html,s)},r7=e=>(o,n)=>{const{dom:s,selection:i}=e,d=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),h=s.create("div",{contenteditable:"true"},o);s.setStyles(d,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),d.appendChild(h),s.add(e.getBody(),d);const v=i.getRng();h.focus();const w=s.createRng();w.selectNodeContents(h),i.setRng(w),nc.setEditorTimeout(e,()=>{i.setRng(v),s.remove(d),n()},0)},s7=e=>({html:j8(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),d4=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),u4=e=>!e.selection.isCollapsed()||d4(e),a7=e=>o=>{!o.isDefaultPrevented()&&u4(e)&&n7(o,s7(e),r7(e),()=>{if(ae.browser.isChromium()||ae.browser.isFirefox()){const n=e.selection.getRng();nc.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Bz=e=>o=>{!o.isDefaultPrevented()&&u4(e)&&n7(o,s7(e),r7(e),De)},Iz=e=>{e.on("cut",a7(e)),e.on("copy",Bz(e))},i7=(e,o)=>{var n,s;return Qo.getCaretRangeFromPoint((n=o.clientX)!==null&&n!==void 0?n:0,(s=o.clientY)!==null&&s!==void 0?s:0,e.getDoc())},Fz=e=>{const o=e["text/plain"];return o?o.indexOf("file://")===0:!1},m4=(e,o)=>{e.focus(),o&&e.selection.setRng(o)},KT=e=>Wo(e.files,o=>/^image\//.test(o.type)),g4=(e,o,n,s)=>{const i=e.getParent(n,d=>Rc(o,d));if(!re(e.getParent(n,"summary")))return!0;if(i&&It(s,"text/html")){const d=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!re(d.querySelector(i.nodeName.toLowerCase()))}else return!1},Vz=e=>{e.on("input",o=>{const n=s=>re(s.querySelector("summary"));if(o.inputType==="deleteByDrag"){const s=kt(e.dom.select("details"),n);Ce(s,i=>{fo(i.firstChild)&&i.firstChild.remove();const d=e.dom.create("summary");d.appendChild(Hi().dom),i.prepend(d)})}})},zz=(e,o)=>{Db(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),K1(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&KT(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=i7(e,n);if(oo(s))return;const i=UT(n.dataTransfer),d=Gh(i,i4());if((!WT(i)||Fz(i))&&$T(e,n,s))return;const h=i[i4()],v=h||i["text/html"]||i["text/plain"],w=g4(e.dom,e.schema,s.startContainer,i),k=o.get();k&&!w||v&&(n.preventDefault(),nc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(h||k&&w)&&e.execCommand("Delete"),m4(e,s);const M=K8(v);i["text/html"]?c4(e,M,d,!0):yv(e,M,!0)})}))}),e.on("dragstart",n=>{o.set(!0)}),e.on("dragover dragend",n=>{K1(e)&&!o.get()&&(n.preventDefault(),m4(e,i7(e,n))),n.type==="dragend"&&o.set(!1)}),Vz(e)},l7=e=>{const o=i=>d=>{i(e,d)},n=Ru(e);J(n)&&e.on("PastePreProcess",o(n));const s=q1(e);J(s)&&e.on("PastePostProcess",o(s))},Zz=(e,o)=>{e.on("PastePreProcess",n=>{n.content=o(e,n.content,n.internal)})},qT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,XT=e=>fe.trim(e).replace(qT,Nd).toLowerCase(),Uz=(e,o,n)=>{const s=Fk(e);if(n||s==="all"||!jw(e))return o;const i=s?s.split(/[, ]/):[];if(i&&s!=="none"){const d=e.dom,h=e.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,w,k,M)=>{const H=d.parseStyle(d.decode(k)),I={};for(let U=0;U<i.length;U++){const W=H[i[U]];let j=W,te=d.getStyle(h,i[U],!0);/color/.test(i[U])&&(j=XT(j),te=XT(te)),te!==j&&(I[i[U]]=W)}const $=d.serializeStyle(I,"span");return $?w+' style="'+$+'"'+M:w+M})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o=o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(d,h,v,w)=>h+' style="'+v+'"'+w),o},Wz=e=>{(ae.browser.isChromium()||ae.browser.isSafari())&&Zz(e,Uz)},c7=e=>{const o=vr(!1),n=vr(zk(e)?"text":"html"),s=gz(e);Wz(e),Hz(e,n),l7(e),e.on("PreInit",()=>{Iz(e),zz(e,o),Lz(e,s,n)})},jz=e=>{e.on("click",o=>{e.dom.getParent(o.target,"details")&&o.preventDefault()})},$z=e=>{e.parser.addNodeFilter("details",o=>{const n=eC(e);Ce(o,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",o=>{const n=jk(e);Ce(o,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},Gz=e=>{jz(e),$z(e)},Kz=fo,YT=Ve,qz=e=>po(e.dom),d7=e=>On(e.dom),u7=e=>o=>To(K.fromDom(e),o),Xz=(e,o)=>_s(K.fromDom(e),n=>d7(n)||es(n),u7(o)).getOr(K.fromDom(o)).dom,m7=(e,o)=>_s(K.fromDom(e),qz,u7(o)),g7=(e,o,n)=>{const s=new Ar(e,o),i=n?s.next.bind(s):s.prev.bind(s);let d=e;for(let h=n?e:i();h&&!Kz(h);h=i())ta(h)&&(d=h);return d},Yz=(e,o)=>{const n=ce.fromRangeStart(e).getNode(),s=Xz(n,o),i=g7(n,s,!1),d=g7(n,s,!0),h=document.createRange();return m7(i,s).fold(()=>{YT(i)?h.setStart(i,0):h.setStartBefore(i)},v=>h.setStartBefore(v.dom)),m7(d,s).fold(()=>{YT(d)?h.setEnd(d,d.data.length):h.setEndAfter(d)},v=>h.setEndAfter(v.dom)),h},h7=e=>{const o=Yz(e.selection.getRng(),e.getBody());e.selection.setRng(xx(o))},Qz=e=>{e.on("mousedown",o=>{o.detail>=3&&(o.preventDefault(),h7(e))})};var Uf;(function(e){e.Before="before",e.After="after"})(Uf||(Uf={}));const Jz=(e,o)=>Math.abs(e.left-o),QT=(e,o)=>Math.abs(e.right-o),eZ=(e,o)=>e>=o.top&&e<=o.bottom,tZ=(e,o)=>e.top<o.bottom&&e.bottom>o.top,oZ=(e,o)=>{const n=dr(e,o)/Math.min(e.height,o.height);return tZ(e,o)&&n>.5},p7=(e,o)=>{const n=kt(e,s=>eZ(o,s));return kd(n).fold(()=>[[],e],s=>{const{pass:i,fail:d}=hr(e,h=>oZ(h,s));return[i,d]})},h4=(e,o)=>({node:e.node,position:Jz(e,o)<QT(e,o)?Uf.Before:Uf.After}),f7=(e,o,n)=>o>e.left&&o<e.right?0:Math.min(Math.abs(e.left-o),Math.abs(e.right-o)),p4=(e,o,n)=>{const s=M=>ta(M.node)?B.some(M):gt(M.node)?p4(ws(M.node.childNodes),o,n):B.none(),i=(M,H)=>{if(M.length>=2){const I=s(M[0]).getOr(M[0]),$=s(M[1]).getOr(M[1]);if(Math.abs(H(I,o,n)-H($,o,n))<2){if(Ve(I.node))return B.some(I);if(Ve($.node))return B.some($)}}return B.none()},d=(M,H)=>{const I=an(M,($,U)=>H($,o,n)-H(U,o,n));return i(I,H).orThunk(()=>Ls(I,s))},[h,v]=p7(g6(e),n),{pass:w,fail:k}=hr(v,M=>M.top<n);return d(h,f7).orThunk(()=>d(k,H1)).orThunk(()=>d(w,H1))},nZ=(e,o,n,s)=>{const i=(d,h)=>{const v=k=>gt(k)&&k.classList.contains("mce-drag-container"),w=kt(d.dom.childNodes,zo(v));return h.fold(()=>p4(w,n,s),k=>{const M=kt(w,H=>H!==k.dom);return p4(M,n,s)}).orThunk(()=>(To(d,e)?B.none():uu(d)).bind(k=>i(k,B.some(d))))};return i(o,B.none())},rZ=(e,o,n)=>{const s=K.fromDom(e),i=Mi(s),d=K.fromPoint(i,o,n).filter(h=>zl(s,h)).getOr(s);return nZ(s,d,o,n)},JT=(e,o,n)=>rZ(e,o,n).filter(s=>Ad(s.node)).map(s=>h4(s,o)),v7=e=>{var o,n;const s=e.getBoundingClientRect(),i=e.ownerDocument,d=i.documentElement,h=i.defaultView;return{top:s.top+((o=h==null?void 0:h.scrollY)!==null&&o!==void 0?o:0)-d.clientTop,left:s.left+((n=h==null?void 0:h.scrollX)!==null&&n!==void 0?n:0)-d.clientLeft}},sZ=e=>e.inline?v7(e.getBody()):{left:0,top:0},aZ=e=>{const o=e.getBody();return e.inline?{left:o.scrollLeft,top:o.scrollTop}:{left:0,top:0}},e5=e=>{const o=e.getBody(),n=e.getDoc().documentElement,s={left:o.scrollLeft,top:o.scrollTop},i={left:o.scrollLeft||n.scrollLeft,top:o.scrollTop||n.scrollTop};return e.inline?s:i},iZ=(e,o)=>{if(o.target.ownerDocument!==e.getDoc()){const n=v7(e.getContentAreaContainer()),s=e5(e);return{left:o.pageX-n.left+s.left,top:o.pageY-n.top+s.top}}return{left:o.pageX,top:o.pageY}},lZ=(e,o,n)=>({pageX:n.left-e.left+o.left,pageY:n.top-e.top+o.top}),cZ=(e,o)=>lZ(sZ(e),aZ(e),iZ(e,o)),b7=e=>({target:e,srcElement:e}),dZ=(e,o,n,s)=>({...o,dataTransfer:s,type:e,...b7(n)}),uZ=(e,o,n)=>{const s=ls("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:De,stopImmediatePropagation:De,stopPropagation:De,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...b7(o)}},y7=(e,o)=>{const n=HT(e);return o==="dragstart"?(AT(n),NT(n)):o==="drop"?(oz(n),RT(n)):(DT(n),nz(n)),n},w7=(e,o,n,s)=>{const i=y7(n,e);return Gn(s)?uZ(e,o,i):dZ(e,s,o,i)},wv=32,t5=100,f4=8,Cv=16,C7=po,mZ=fw(C7,On),x7=(e,o,n)=>C7(n)&&n!==o&&e.isEditable(n.parentElement),gZ=(e,o,n)=>oo(o)||o===n||e.dom.isChildOf(o,n)?!1:e.dom.isEditable(o),hZ=(e,o,n,s)=>{const i=e.dom,d=o.cloneNode(!0);i.setStyles(d,{width:n,height:s}),i.setAttrib(d,"data-mce-selected",null);const h=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(h,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),i.setStyles(d,{margin:0,boxSizing:"border-box"}),h.appendChild(d),h},pZ=(e,o)=>{e.parentNode!==o&&o.appendChild(e)},v4=(e,o)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+o,behavior:"smooth"})},S7=v4("left",-wv),k7=v4("left",wv),_7=v4("top",-wv),o5=v4("top",wv),fZ=(e,o,n,s,i,d,h,v,w,k,M,H)=>{let I=0,$=0;e.style.left=o.pageX+"px",e.style.top=o.pageY+"px",o.pageX+n>i&&(I=o.pageX+n-i),o.pageY+s>d&&($=o.pageY+s-d),e.style.width=n-I+"px",e.style.height=s-$+"px";const U=w.clientHeight,W=w.clientWidth,j=h+w.getBoundingClientRect().top,te=v+w.getBoundingClientRect().left;M.on(de=>{de.intervalId.clear(),de.dragging&&H&&(h+f4>=U?de.intervalId.set(o5(k)):h-f4<=0?de.intervalId.set(_7(k)):v+f4>=W?de.intervalId.set(k7(k)):v-f4<=0?de.intervalId.set(S7(k)):j+Cv>=window.innerHeight?de.intervalId.set(o5(window)):j-Cv<=0?de.intervalId.set(_7(window)):te+Cv>=window.innerWidth?de.intervalId.set(k7(window)):te-Cv<=0&&de.intervalId.set(S7(window)))})},b4=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},vZ=(e,o)=>{const n=e.getParent(o.parentNode,e.isBlock);b4(o),n&&n!==e.getRoot()&&e.isEmpty(n)&&ri(K.fromDom(n))},bZ=e=>e.button===0,yZ=(e,o)=>({pageX:o.pageX-e.relX,pageY:o.pageY+5}),wZ=(e,o)=>n=>{if(bZ(n)){const s=xn(o.dom.getParents(n.target),mZ).getOr(null);if(xe(s)&&x7(o.dom,o.getBody(),s)){const i=o.dom.getPos(s),d=o.getBody(),h=o.getDoc().documentElement;e.set({element:s,dataTransfer:LT(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(o.inline?d.scrollWidth:h.offsetWidth)-2,maxY:(o.inline?d.scrollHeight:h.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:s.offsetWidth,height:s.offsetHeight,ghost:hZ(o,s,s.offsetWidth,s.offsetHeight),intervalId:M1(t5)})}}},CZ=(e,o,n)=>{e._selectionOverrides.hideFakeCaret(),JT(e.getBody(),o,n).fold(()=>e.selection.placeCaretAt(o,n),s=>{const i=e._selectionOverrides.showCaret(1,s.node,s.position===Uf.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(o,n)})},b2=(e,o,n,s,i)=>{o==="dragstart"&&BT(s,e.dom.getOuterHTML(n));const d=w7(o,n,s,i);return e.dispatch(o,d)},y4=(e,o)=>{const n=N1((i,d)=>CZ(o,i,d),0);o.on("remove",n.cancel);const s=e;return i=>e.on(d=>{const h=Math.max(Math.abs(i.screenX-d.screenX),Math.abs(i.screenY-d.screenY));if(!d.dragging&&h>10){const v=b2(o,"dragstart",d.element,d.dataTransfer,i);if(xe(v.dataTransfer)&&(d.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;d.dragging=!0,o.focus()}if(d.dragging){const v=i.currentTarget===o.getDoc().documentElement,w=yZ(d,cZ(o,i));pZ(d.ghost,o.getBody()),fZ(d.ghost,w,d.width,d.height,d.maxX,d.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),s,v),n.throttle(i.clientX,i.clientY)}})},xZ=e=>{const o=e.getSel();if(xe(o)){const n=o.getRangeAt(0).startContainer;return Ve(n)?n.parentNode:n}else return null},SZ=(e,o)=>n=>{e.on(s=>{var i;if(s.intervalId.clear(),s.dragging){if(gZ(o,xZ(o.selection),s.element)){const d=(i=o.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&i!==void 0?i:o.getBody();b2(o,"drop",d,s.dataTransfer,n).isDefaultPrevented()||o.undoManager.transact(()=>{vZ(o.dom,s.element),PT(s.dataTransfer).each(h=>o.insertContent(h)),o._selectionOverrides.hideFakeCaret()})}b2(o,"dragend",o.getBody(),s.dataTransfer,n)}}),O7(e)},E7=(e,o,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>b2(o,"dragend",s.element,s.dataTransfer),i=>b2(o,"dragend",s.element,s.dataTransfer,i))}),O7(e)},kZ=(e,o)=>n=>E7(e,o,B.some(n)),O7=e=>{e.on(o=>{o.intervalId.clear(),b4(o.ghost)}),e.clear()},_Z=e=>{const o=Xn(),n=nn.DOM,s=document,i=wZ(o,e),d=y4(o,e),h=SZ(o,e),v=kZ(o,e);e.on("mousedown",i),e.on("mousemove",d),e.on("mouseup",h),n.bind(s,"mousemove",d),n.bind(s,"mouseup",v),e.on("remove",()=>{n.unbind(s,"mousemove",d),n.unbind(s,"mouseup",v)}),e.on("keydown",w=>{w.keyCode===dt.ESC&&E7(o,e,B.none())})},EZ=e=>{const o=i=>{if(!i.isDefaultPrevented()){const d=i.dataTransfer;d&&(Ut(d.types,"Files")||d.files.length>0)&&(i.preventDefault(),i.type==="drop"&&sS(e,"Dropped file type is not supported"))}},n=i=>{QC(e,i.target)&&o(i)},s=()=>{const i=nn.DOM,d=e.dom,h=document,v=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];Ce(w,k=>{i.bind(h,k,n),d.bind(v,k,o)}),e.on("remove",()=>{Ce(w,k=>{i.unbind(h,k,n),d.unbind(v,k,o)})})};e.on("init",()=>{nc.setEditorTimeout(e,s,0)})},OZ=e=>{_Z(e),Yg(e)&&EZ(e)},TZ=e=>{const o=N1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=tO(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{o.throttle()}),e.on("blur",()=>{o.cancel()})},T7=e=>{e.on("init",()=>{e.on("focusin",o=>{const n=o.target;if(Dr(n)){const s=gg(e.getBody(),n),i=po(s)?s:n;e.selection.getNode()!==i&&Yy(e,i).each(d=>e.selection.setRng(d))}})})},y2=po,n5=(e,o)=>gg(e.getBody(),o),AZ=e=>{const o=e.selection,n=e.dom,s=e.getBody(),i=Hb(e,s,n.isBlock,()=>vf(e)),d="sel-"+n.uniqueId(),h="data-mce-selected";let v;const w=Ie=>xe(Ie)&&n.hasClass(Ie,"mce-offscreen-selection"),k=Ie=>Ie!==s&&(y2(Ie)||Dr(Ie))&&n.isChildOf(Ie,s)&&n.isEditable(Ie.parentNode),M=Ie=>{Ie&&o.setRng(Ie)},H=(Ie,Ee,ye,Fe=!0)=>e.dispatch("ShowCaret",{target:Ee,direction:Ie,before:ye}).isDefaultPrevented()?null:(Fe&&o.scrollIntoView(Ee,Ie===-1),i.show(ye,Ee)),I=Ie=>{Ie.hasAttribute("data-mce-caret")&&(p1(Ie),o.scrollIntoView(Ie))},$=()=>{e.on("click",Ee=>{n.isEditable(Ee.target)||(Ee.preventDefault(),e.focus())}),e.on("blur NewBlock",Ae),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Ee=>{const ye=Ee.target,Fe=n5(e,ye);y2(Fe)?(Ee.preventDefault(),Yy(e,Fe).each(ue)):k(ye)&&Yy(e,ye).each(ue)},!0),e.on("mousedown",Ee=>{const ye=Ee.target;if(ye!==s&&ye.nodeName!=="HTML"&&!n.isChildOf(ye,s)||!hI(e,Ee.clientX,Ee.clientY))return;Ae(),Ye();const Fe=n5(e,ye);y2(Fe)?(Ee.preventDefault(),Yy(e,Fe).each(ue)):JT(s,Ee.clientX,Ee.clientY).each(ft=>{Ee.preventDefault();const ve=H(1,ft.node,ft.position===Uf.Before,!1);M(ve),gt(Fe)?Fe.focus():e.getBody().focus()})}),e.on("keypress",Ee=>{dt.modifierPressed(Ee)||y2(o.getNode())&&Ee.preventDefault()}),e.on("GetSelectionRange",Ee=>{let ye=Ee.range;if(v){if(!v.parentNode){v=null;return}ye=ye.cloneRange(),ye.selectNode(v),Ee.range=ye}}),e.on("SetSelectionRange",Ee=>{Ee.range=j(Ee.range);const ye=ue(Ee.range,Ee.forward);ye&&(Ee.range=ye)});const Ie=Ee=>gt(Ee)&&Ee.id==="mcepastebin";e.on("AfterSetSelectionRange",Ee=>{const ye=Ee.range,Fe=ye.startContainer.parentElement;!W(ye)&&!Ie(Fe)&&Ye(),w(Fe)||Ae()}),OZ(e),TZ(e),T7(e)},U=Ie=>ea(Ie)||hl(Ie)||wu(Ie),W=Ie=>U(Ie.startContainer)||U(Ie.endContainer),j=Ie=>{const Ee=e.schema.getVoidElements(),ye=n.createRng(),Fe=Ie.startContainer,ft=Ie.startOffset,ve=Ie.endContainer,et=Ie.endOffset;return It(Ee,Fe.nodeName.toLowerCase())?ft===0?ye.setStartBefore(Fe):ye.setStartAfter(Fe):ye.setStart(Fe,ft),It(Ee,ve.nodeName.toLowerCase())?et===0?ye.setEndBefore(ve):ye.setEndAfter(ve):ye.setEnd(ve,et),ye},te=(Ie,Ee)=>{const ye=K.fromDom(e.getBody()),Fe=e.getDoc(),ft=ud(ye,"#"+d).getOrThunk(()=>{const bt=K.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Fe);return En(bt,"id",d),ot(ye,bt),bt}),ve=n.createRng();Es(ft),Fn(ft,[K.fromText(vn,Fe),K.fromDom(Ee),K.fromText(vn,Fe)]),ve.setStart(ft.dom.firstChild,1),ve.setEnd(ft.dom.lastChild,0),Am(ft,{top:n.getPos(Ie,e.getBody()).y+"px"}),W5(ft);const et=o.getSel();return et&&(et.removeAllRanges(),et.addRange(ve)),ve},de=Ie=>{const Ee=Ie.cloneNode(!0),ye=e.dispatch("ObjectSelected",{target:Ie,targetClone:Ee});if(ye.isDefaultPrevented())return null;const Fe=te(Ie,ye.targetClone),ft=K.fromDom(Ie);return Ce(zr(K.fromDom(e.getBody()),`*[${h}]`),ve=>{To(ft,ve)||Fr(ve,h)}),n.getAttrib(Ie,h)||Ie.setAttribute(h,"1"),v=Ie,Ye(),Fe},ue=(Ie,Ee)=>{if(!Ie)return null;if(Ie.collapsed){if(!W(Ie)){const ve=Ee?1:-1,et=nh(ve,s,Ie),bt=et.getNode(!Ee);if(xe(bt)){if(Ad(bt))return H(ve,bt,Ee?!et.isAtEnd():!1,!1);if(fd(bt)&&po(bt.nextSibling)){const bo=n.createRng();return bo.setStart(bt,0),bo.setEnd(bt,0),bo}}const Jt=et.getNode(Ee);if(xe(Jt)){if(Ad(Jt))return H(ve,Jt,Ee?!1:!et.isAtEnd(),!1);if(fd(Jt)&&po(Jt.previousSibling)){const bo=n.createRng();return bo.setStart(Jt,1),bo.setEnd(Jt,1),bo}}}return null}let ye=Ie.startContainer,Fe=Ie.startOffset;const ft=Ie.endOffset;if(Ve(ye)&&Fe===0&&y2(ye.parentNode)&&(ye=ye.parentNode,Fe=n.nodeIndex(ye),ye=ye.parentNode),!gt(ye))return null;if(ft===Fe+1&&ye===Ie.endContainer){const ve=ye.childNodes[Fe];if(k(ve))return de(ve)}return null},Ae=()=>{v&&v.removeAttribute(h),ud(K.fromDom(e.getBody()),"#"+d).each(Ho),v=null},$e=()=>{i.destroy(),v=null},Ye=()=>{i.hide()};return Xu(e)||$(),{showCaret:H,showBlockCaretContainer:I,hideFakeCaret:Ye,destroy:$e}},DZ=(e,o)=>{let n=o;for(let s=e.previousSibling;Ve(s);s=s.previousSibling)n+=s.data.length;return n},r5=(e,o,n,s,i)=>{if(Ve(n)&&(s<0||s>n.data.length))return[];const d=i&&Ve(n)?[DZ(n,s)]:[s];let h=n;for(;h!==o&&h.parentNode;)d.push(e.nodeIndex(h,i)),h=h.parentNode;return h===o?d.reverse():[]},Wf=(e,o,n,s,i,d,h=!1)=>{const v=r5(e,o,n,s,h),w=r5(e,o,i,d,h);return{start:v,end:w}},A7=(e,o)=>{const n=o.slice(),s=n.pop();return bs(s)?_n(n,(i,d)=>i.bind(h=>B.from(h.childNodes[d])),B.some(e)).bind(i=>Ve(i)&&(s<0||s>i.data.length)?B.none():B.some({node:i,offset:s})):B.none()},s5=(e,o)=>A7(e,o.start).bind(({node:n,offset:s})=>A7(e,o.end).map(({node:i,offset:d})=>{const h=document.createRange();return h.setStart(n,s),h.setEnd(i,d),h})),MZ=(e,o,n,s=!1)=>Wf(e,o,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),xv=(e,o,n)=>{if(o&&e.isEmpty(o)&&!n(o)){const s=o.parentNode;e.remove(o,Ve(o.firstChild)&&Gl(o.firstChild.data)),xv(e,s,n)}},w4=(e,o,n,s=!0)=>{const i=o.startContainer.parentNode,d=o.endContainer.parentNode;o.deleteContents(),s&&!n(o.startContainer)&&(Ve(o.startContainer)&&o.startContainer.data.length===0&&e.remove(o.startContainer),Ve(o.endContainer)&&o.endContainer.data.length===0&&e.remove(o.endContainer),xv(e,i,n),i!==d&&xv(e,d,n))},a5=(e,o)=>B.from(e.dom.getParent(o.startContainer,e.dom.isBlock)),i5=(e,o,n)=>{const s=e.dynamicPatternsLookup({text:n,block:o});return{...e,blockPatterns:z1(s).concat(e.blockPatterns),inlinePatterns:Ow(s).concat(e.inlinePatterns)}},D7=(e,o,n,s)=>{const i=e.createRng();return i.setStart(o,0),i.setEnd(n,s),i.toString()},M7=e=>/^\s[^\s]/.test(e),N7=(e,o,n)=>{_R(o,0,o).each(s=>{const i=s.container;ER(i,n.start.length,o).each(v=>{const w=e.createRng();w.setStart(i,0),w.setEnd(v.container,v.offset),w4(e,w,k=>k===o)});const d=K.fromDom(i),h=ga(d);M7(h)&&Tc(d,h.slice(1))})},NZ=(e,o)=>{const n=e.dom,s=o.pattern,i=s5(n.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(h,v)=>{const w=v.get(h);return ko(w)&&un(w).exists(k=>It(k,"block"))};return a5(e,i).each(h=>{s.type==="block-format"?d(s.format,e.formatter)&&e.undoManager.transact(()=>{N7(e.dom,h,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{N7(e.dom,h,s),e.execCommand(s.cmd,!1,s.value)})}),!0},RZ=e=>an(e,(o,n)=>n.start.length-o.start.length),LZ=(e,o)=>{const n=RZ(e),s=o.replace(vn," ");return xn(n,i=>o.indexOf(i.start)===0||s.indexOf(i.start)===0)},HZ=(e,o,n,s)=>{var i;const d=e.dom,h=ns(e);if(!d.is(o,h))return[];const v=(i=o.textContent)!==null&&i!==void 0?i:"";return LZ(n.blockPatterns,v).map(w=>fe.trim(v).length===w.start.length?[]:[{pattern:w,range:Wf(d,d.getRoot(),o,0,o,0,s)}]).getOr([])},PZ=(e,o)=>{if(o.length===0)return;const n=e.selection.getBookmark();Ce(o,s=>NZ(e,s)),e.selection.moveToBookmark(n)},R7=(e,o)=>e.create("span",{"data-mce-type":"bookmark",id:o}),C4=(e,o)=>{const n=e.createRng();return n.setStartAfter(o.start),n.setEndBefore(o.end),n},L7=(e,o,n)=>{const s=s5(e.getRoot(),n).getOrDie("Unable to resolve path range"),i=s.startContainer,d=s.endContainer,h=s.endOffset===0?d:d.splitText(s.endOffset),v=s.startOffset===0?i:i.splitText(s.startOffset),w=v.parentNode,k=h.parentNode;return{prefix:o,end:k.insertBefore(R7(e,o+"-end"),h),start:w.insertBefore(R7(e,o+"-start"),v)}},l5=(e,o,n)=>{xv(e,e.get(o.prefix+"-end"),n),xv(e,e.get(o.prefix+"-start"),n)},w2=e=>e.start.length===0,H7=e=>(o,n)=>{const s=o.data.substring(0,n),i=s.lastIndexOf(e.charAt(e.length-1)),d=s.lastIndexOf(e);return d!==-1?d+e.length:i!==-1?i+1:-1},c5=(e,o,n,s)=>{const i=o.start;return tT(e,s.container,s.offset,H7(i),n).bind(d=>{var h,v;const w=(v=(h=n.textContent)===null||h===void 0?void 0:h.indexOf(i))!==null&&v!==void 0?v:-1;if(w!==-1&&d.offset>=w+i.length){const k=e.createRng();return k.setStart(d.container,d.offset-i.length),k.setEnd(d.container,d.offset),B.some(k)}else{const k=d.offset-i.length;return NS(d.container,k,n).map(M=>{const H=e.createRng();return H.setStart(M.container,M.offset),H.setEnd(d.container,d.offset),H}).filter(M=>M.toString()===i).orThunk(()=>c5(e,o,n,Ud(d.container,0)))}})},BZ=(e,o,n,s,i,d=!1)=>{if(o.start.length===0&&!d){const h=e.createRng();return h.setStart(n,s),h.setEnd(n,s),B.some(h)}return eT(n,s,i).bind(h=>c5(e,o,i,h).bind(v=>{var w;return d&&(v.endContainer===h.container&&v.endOffset===h.offset||h.offset===0&&((w=v.endContainer.textContent)===null||w===void 0?void 0:w.length)===v.endOffset)?B.none():B.some(v)}))},IZ=(e,o,n,s)=>{const i=e.dom,d=i.getRoot(),h=n.pattern,v=n.position.container,w=n.position.offset;return NS(v,w-n.pattern.end.length,o).bind(k=>{const M=Wf(i,d,k.container,k.offset,v,w,s);if(w2(h))return B.some({matches:[{pattern:h,startRng:M,endRng:M}],position:k});{const H=x4(e,n.remainingPatterns,k.container,k.offset,o,s),I=H.getOr({matches:[],position:k}),$=I.position;return BZ(i,h,$.container,$.offset,o,H.isNone()).map(U=>{const W=MZ(i,d,U,s);return{matches:I.matches.concat([{pattern:h,startRng:W,endRng:M}]),position:Ud(U.startContainer,U.startOffset)}})}})},x4=(e,o,n,s,i,d)=>{const h=e.dom;return eT(n,s,h.getRoot()).bind(v=>{const w=D7(h,i,n,s);for(let k=0;k<o.length;k++){const M=o[k];if(!Qd(w,M.end))continue;const H=o.slice();H.splice(k,1);const I=IZ(e,i,{pattern:M,remainingPatterns:H,position:v},d);if(I.isNone()&&s>0)return x4(e,o,n,s-1,i,d);if(I.isSome())return I}return B.none()})},d5=(e,o,n)=>{e.selection.setRng(n),o.type==="inline-format"?Ce(o.format,s=>{e.formatter.apply(s)}):e.execCommand(o.cmd,!1,o.value)},P7=(e,o,n,s)=>{const i=C4(e.dom,n);w4(e.dom,i,s),d5(e,o,i)},FZ=(e,o,n,s,i)=>{const d=e.dom,h=C4(d,s),v=C4(d,n);w4(d,v,i),w4(d,h,i);const w={prefix:n.prefix,start:n.end,end:s.start},k=C4(d,w);d5(e,o,k)},VZ=(e,o)=>{const n=Tp("mce_textpattern"),s=El(o,(i,d)=>{const h=L7(e,n+`_end${i.length}`,d.endRng);return i.concat([{...d,endMarker:h}])},[]);return El(s,(i,d)=>{const h=s.length-i.length-1,v=w2(d.pattern)?d.endMarker:L7(e,n+`_start${h}`,d.startRng);return i.concat([{...d,startMarker:v}])},[])},u5=e=>an(e,(o,n)=>n.end.length-o.end.length),S4=(e,o)=>{const n=Kn(e,s=>Wo(o,i=>s.pattern.start===i.pattern.start&&s.pattern.end===i.pattern.end));return e.length===o.length?n?e:o:e.length>o.length?e:o},C2=(e,o,n,s,i,d)=>{const h=x4(e,i.inlinePatterns,n,s,o,d).fold(()=>[],w=>w.matches),v=x4(e,u5(i.inlinePatterns),n,s,o,d).fold(()=>[],w=>w.matches);return S4(h,v)},am=(e,o)=>{if(o.length===0)return;const n=e.dom,s=e.selection.getBookmark(),i=VZ(n,o);Ce(i,d=>{const h=n.getParent(d.startMarker.start,n.isBlock),v=w=>w===h;w2(d.pattern)?P7(e,d.pattern,d.endMarker,v):FZ(e,d.pattern,d.startMarker,d.endMarker,v),l5(n,d.endMarker,v),l5(n,d.startMarker,v)}),e.selection.moveToBookmark(s)},k4=(e,o)=>{const n=e.selection.getRng();return a5(e,n).map(s=>{var i;const d=Math.max(0,n.startOffset),h=i5(o,s,(i=s.textContent)!==null&&i!==void 0?i:""),v=C2(e,s,n.startContainer,d,h,!0),w=HZ(e,s,h,!0);return w.length>0||v.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Rg),am(e,v),PZ(e,w);const k=e.selection.getRng(),M=eT(k.startContainer,k.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),M.each(H=>{const I=H.container;I.data.charAt(H.offset-1)===Rg&&(I.deleteData(H.offset-1,1),xv(e.dom,I.parentNode,$=>$===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},Sv=(e,o)=>{const n=e.selection.getRng();a5(e,n).map(s=>{const i=Math.max(0,n.startOffset-1),d=D7(e.dom,s,n.startContainer,i),h=i5(o,s,d),v=C2(e,s,n.startContainer,i,h,!1);v.length>0&&e.undoManager.transact(()=>{am(e,v)})})},m5=(e,o,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],o))return!0;return!1},zZ=(e,o)=>m5(e,o,(n,s)=>n===s.keyCode&&!dt.modifierPressed(s)),ZZ=(e,o)=>m5(e,o,(n,s)=>n.charCodeAt(0)===s.charCode),B7=e=>{const o=[",",".",";",":","!","?"],n=[32],s=()=>Z1(Uk(e),Kw(e)),i=()=>Nb(e);e.on("keydown",h=>{if(h.keyCode===13&&!dt.modifierPressed(h)&&e.selection.isCollapsed()){const v=s();(v.inlinePatterns.length>0||v.blockPatterns.length>0||i())&&k4(e,v)&&h.preventDefault()}},!0);const d=()=>{if(e.selection.isCollapsed()){const h=s();(h.inlinePatterns.length>0||i())&&Sv(e,h)}};e.on("keyup",h=>{zZ(n,h)&&d()}),e.on("keypress",h=>{ZZ(o,h)&&nc.setEditorTimeout(e,d)})},UZ=e=>{B7(e)},g5=e=>{const o=fe.each,n=dt.BACKSPACE,s=dt.DELETE,i=e.dom,d=e.selection,h=e.parser,v=ae.browser,w=v.isFirefox(),k=v.isChromium()||v.isSafari(),M=ae.deviceType.isiPhone()||ae.deviceType.isiPad(),H=ae.os.isMacOS()||ae.os.isiOS(),I=(Ht,Le)=>{try{e.getDoc().execCommand(Ht,!1,String(Le))}catch{}},$=Ht=>Ht.isDefaultPrevented(),U=()=>{const Ht=r=>{const a=i.create("body"),l=r.cloneContents();return a.appendChild(l),d.serializer.serialize(a,{format:"html"})},Le=r=>{const a=Ht(r),l=i.createRng();l.selectNode(e.getBody());const u=Ht(l);return a===u},t=r=>{const a=K.fromDom(r),l=u=>uu(u).exists(g=>!Vr(g));return Wo(zr(a,'[contenteditable="true"]'),l)};e.on("keydown",r=>{const a=r.keyCode;if(!$(r)&&(a===s||a===n)&&e.selection.isEditable()){const l=e.selection.isCollapsed(),u=e.getBody();if(l&&(!i.isEmpty(u)||t(u))||!l&&!Le(e.selection.getRng()))return;r.preventDefault(),e.setContent(""),u.firstChild&&i.isBlock(u.firstChild)?e.selection.setCursorLocation(u.firstChild,0):e.selection.setCursorLocation(u,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},j=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Ht=>{let Le;if(Ht.target===e.getDoc().documentElement)if(Le=d.getRng(),e.getBody().focus(),Ht.type==="mousedown"){if(ea(Le.startContainer))return;d.placeCaretAt(Ht.clientX,Ht.clientY)}else d.setRng(Le)})},te=()=>{e.on("keydown",Ht=>{if(!$(Ht)&&Ht.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(d.isCollapsed()&&d.getRng().startOffset===0){const Le=d.getNode(),t=Le.previousSibling;if(Le.nodeName==="HR"){i.remove(Le),Ht.preventDefault();return}t&&t.nodeName&&t.nodeName.toLowerCase()==="hr"&&(i.remove(t),Ht.preventDefault())}}})},de=()=>{Range.prototype.getClientRects||e.on("mousedown",Ht=>{if(!$(Ht)&&Ht.target.nodeName==="HTML"){const Le=e.getBody();Le.blur(),nc.setEditorTimeout(e,()=>{Le.focus()})}})},ue=()=>{const Ht=Tb(e);e.on("click",Le=>{const t=Le.target;/^(IMG|HR)$/.test(t.nodeName)&&i.isEditable(t.parentNode)&&(Le.preventDefault(),e.selection.select(t),e.nodeChanged()),t.nodeName==="A"&&i.hasClass(t,Ht)&&t.childNodes.length===0&&i.isEditable(t.parentNode)&&(Le.preventDefault(),d.select(t))})},Ae=()=>{const Ht=()=>{const t=i.getAttribs(d.getStart().cloneNode(!1));return()=>{const r=d.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),o(t,a=>{r.setAttributeNode(a.cloneNode(!0))}))}},Le=()=>!d.isCollapsed()&&i.getParent(d.getStart(),i.isBlock)!==i.getParent(d.getEnd(),i.isBlock);e.on("keypress",t=>{let r;return!$(t)&&(t.keyCode===8||t.keyCode===46)&&Le()?(r=Ht(),e.getDoc().execCommand("delete",!1),r(),t.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",t=>{if(!$(t)&&Le()){const r=Ht();nc.setEditorTimeout(e,()=>{r()})}})},$e=()=>{e.on("keydown",Ht=>{if(!$(Ht)&&Ht.keyCode===n&&d.isCollapsed()&&d.getRng().startOffset===0){const Le=d.getNode().previousSibling;if(Le&&Le.nodeName&&Le.nodeName.toLowerCase()==="table")return Ht.preventDefault(),!1}return!0})},Ye=()=>{e.on("keydown",Ht=>{if($(Ht)||Ht.keyCode!==dt.BACKSPACE)return;let Le=d.getRng();const t=Le.startContainer,r=Le.startOffset,a=i.getRoot();let l=t;if(!(!Le.collapsed||r!==0)){for(;l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==a;)l=l.parentNode;l.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,l),Le=i.createRng(),Le.setStart(t,0),Le.setEnd(t,0),d.setRng(Le))}})},Ie=()=>{const Ht=()=>{I("StyleWithCSS",!1),I("enableInlineTableEditing",!1),Pw(e)||I("enableObjectResizing",!1)};Fw(e)||e.on("BeforeExecCommand mousedown",Ht)},Ee=()=>{const Ht=()=>{o(i.select("a:not([data-mce-block])"),Le=>{var t;let r=Le.parentNode;const a=i.getRoot();if((r==null?void 0:r.lastChild)===Le){for(;r&&!i.isBlock(r);){if(((t=r.parentNode)===null||t===void 0?void 0:t.lastChild)!==r||r===a)return;r=r.parentNode}i.add(r,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Le=>{(Le.type==="setcontent"||Le.command==="mceInsertLink")&&Ht()})},ye=()=>{e.on("init",()=>{I("DefaultParagraphSeparator",ns(e))})},Fe=Ht=>{const Le=Ht.getBody(),t=Ht.selection.getRng();return t.startContainer===t.endContainer&&t.startContainer===Le&&t.startOffset===0&&t.endOffset===Le.childNodes.length},ft=()=>{e.on("keyup focusin mouseup",Ht=>{!dt.modifierPressed(Ht)&&!Fe(e)&&d.normalize()},!0)},ve=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},et=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},bt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ht=>{let Le;Ht.target.nodeName==="HTML"&&(Le=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Le),e.selection.normalize(),e.nodeChanged())}))},Jt=()=>{H&&e.on("keydown",Ht=>{dt.metaKeyPressed(Ht)&&!Ht.shiftKey&&(Ht.keyCode===37||Ht.keyCode===39)&&(Ht.preventDefault(),e.selection.getSel().modify("move",Ht.keyCode===37?"backward":"forward","lineboundary"))})},bo=()=>{e.on("click",Ht=>{let Le=Ht.target;do if(Le.tagName==="A"){Ht.preventDefault();return}while(Le=Le.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ia=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ht=>{Ht.preventDefault()})})},yi=()=>{h.addNodeFilter("br",Ht=>{let Le=Ht.length;for(;Le--;)Ht[Le].attr("class")==="Apple-interchange-newline"&&Ht[Le].remove()})},wa=De,wi=()=>{if(!w||e.removed)return!1;const Ht=e.selection.getSel();return!Ht||!Ht.rangeCount||Ht.rangeCount===0},No=()=>{k&&(j(),ue(),ia(),W(),M&&(et(),bt(),bo())),w&&(de(),Ie(),ve(),Jt())},gc=()=>{e.on("drop",Ht=>{var Le;const t=(Le=Ht.dataTransfer)===null||Le===void 0?void 0:Le.getData("text/html");G(t)&&/^<img[^>]*>$/.test(t)&&e.dispatch("dragend",new window.DragEvent("dragend",Ht))})},gr=()=>{Ye(),U(),ae.windowsPhone||ft(),k&&(j(),ue(),ye(),ia(),$e(),yi(),M?(et(),bt(),bo()):W()),w&&(te(),de(),Ae(),Ie(),Ee(),ve(),Jt(),$e(),gc())};return Xu(e)?No():gr(),{refreshContentEditable:wa,isHidden:wi}},kv=nn.DOM,Kh=(e,o)=>{const n=K.fromDom(e.getBody()),s=Sm(ul(n)),i=K.fromTag("style");En(i,"type","text/css"),ot(i,K.fromText(o)),ot(s,i),e.on("remove",()=>{Ho(i)})},jf=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,_4=e=>jo(e,o=>Gn(o)===!1),I7=e=>{const o=e.options.get,n=e.editorUpload.blobCache;return _4({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:jf(e),sanitize:o("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},F7=e=>{const o=e.options.get;return _4({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},WZ=e=>{const o=e.options.get;return{...I7(e),...F7(e),..._4({remove_trailing_brs:o("remove_trailing_brs"),pad_empty_with_br:o("pad_empty_with_br"),url_converter:o("url_converter"),url_converter_scope:o("url_converter_scope"),element_format:o("element_format"),entities:o("entities"),entity_encoding:o("entity_encoding"),indent:o("indent"),indent_after:o("indent_after"),indent_before:o("indent_before")})}},jZ=e=>{const o=Bh(I7(e),e.schema);return o.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const i=e.dom,d="data-mce-"+s;let h=n.length;for(;h--;){const v=n[h];let w=v.attr(s);if(w&&!v.attr(d)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;s==="style"?(w=i.serializeStyle(i.parseStyle(w),v.name),w.length||(w=null),v.attr(d,w),v.attr(s,w)):s==="tabindex"?(v.attr(d,w),v.attr(s,null)):v.attr(d,e.convertURL(w,s,v.name))}}}),o.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const i=n[s],d=i.attr("type")||"no/type";d.indexOf("mce-")!==0&&i.attr("type","mce-"+d)}}),Mb(e)&&o.addNodeFilter("#cdata",n=>{var s;let i=n.length;for(;i--;){const d=n[i];d.type=8,d.name="#comment",d.value="[CDATA["+e.dom.encode((s=d.value)!==null&&s!==void 0?s:"")+"]]"}}),o.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const i=e.schema.getNonEmptyElements();for(;s--;){const d=n[s];d.isEmpty(i)&&d.getAll("br").length===0&&d.append(new mi("br",1))}}),o},$Z=e=>{const o=Qm(e);o&&nc.setEditorTimeout(e,()=>{let n;o===!0?n=e:n=e.editorManager.get(o),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},GZ=e=>{const o=e.dom.getRoot();!e.inline&&(!v0(e)||e.selection.getStart(!0)===o)&&yr(o).each(n=>{const s=n.getNode(),i=Wa(s)?yr(s).getOr(n):n;e.selection.setRng(i.toRange())})},V7=e=>{e.bindPendingEventDelegates(),e.initialized=!0,ra(e),e.focus(!0),GZ(e),e.nodeChanged({initial:!0});const o=Vp(e);J(o)&&o.call(e,e),$Z(e)},z7=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,KZ=(e,o,n)=>{const s=[z7(e).loadAll(o)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},Z7=e=>{const o=z7(e),n=Mu(e),s=e.contentCSS,i=()=>{o.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},d=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let w="";fe.each(e.contentStyles,k=>{w+=k+`\r
`}),e.dom.addStyle(w)}const h=Promise.all(KZ(e,s,n)).then(d).catch(d),v=Hw(e);return v&&Kh(e,v),h},qZ=e=>{const o=e.getDoc(),n=e.getBody();d3(e),Ab(e)||(o.body.spellcheck=!1,kv.setAttrib(n,"spellcheck","false")),e.quirks=g5(e),ui(e);const s=Ak(e);s!==void 0&&(n.dir=s);const i=Ic(e);i&&e.on("BeforeSetContent",d=>{fe.each(i,h=>{d.content=d.content.replace(h,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",d=>{e.composing=d.type==="compositionstart"})},h5=e=>{Xu(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},p5=e=>{e.removed!==!0&&(h5(e),V7(e))},XZ=e=>{let o=!1;const n=setTimeout(()=>{o||e.setProgressState(!0)},500);return()=>{clearTimeout(n),o=!0,e.setProgressState(!1)}},f5=e=>{const o=e.getElement();let n=e.getDoc();e.inline&&(kv.addClass(o,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=o,e.contentAreaContainer=o);const s=e.getBody();s.disabled=!0,e.readonly=Fw(e),e._editableRoot=Bk(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&kv.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=CI(e),e.schema=_u(F7(e)),e.dom=nn(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Ek(e),referrerPolicy:Sb(e),onSetAttrib:h=>{e.dispatch("SetAttrib",h)}}),e.parser=jZ(e),e.serializer=aN(WZ(e),e),e.selection=sN(e.dom,e.getWin(),e.serializer,e),e.annotator=E0(e),e.formatter=TN(e),e.undoManager=$E(e),e._nodeChangeDispatcher=new YV(e),e._selectionOverrides=AZ(e),DF(e),Gz(e),HF(e),Xu(e)||(Qz(e),UZ(e));const i=XV(e);IO(e,i),NF(e),RN(e),c7(e);const d=_B(e);qZ(e),d.fold(()=>{const h=XZ(e);Z7(e).then(()=>{p5(e),h()})},h=>{e.setProgressState(!0),Z7(e).then(()=>{h().then(v=>{e.setProgressState(!1),p5(e),oN(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),p5(e),oN(e)})})})},YZ=ct,U7=(e,o,n)=>j4(e,o,YZ,n),v5=nn.DOM,b5=(e,o,n,s)=>{const i=K.fromTag("iframe");return s.each(d=>En(i,"tabindex",d)),ni(i,n),ni(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),Sc(i,"tox-edit-area__iframe"),i},QZ=e=>{let o=bb(e)+"<html><head>";Mw(e)!==e.documentBaseUrl&&(o+='<base href="'+e.documentBaseURI.getURI()+'" />'),o+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Ma(e),s=yb(e),i=e.translate(Ww(e));return Na(e)&&(o+='<meta http-equiv="Content-Security-Policy" content="'+Na(e)+'" />'),o+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,o},JZ=(e,o)=>{const n=e.translate("Rich Text Area"),s=Fa(K.fromDom(e.getElement()),"tabindex").bind(ti),i=b5(e.id,n,Dw(e),s).dom;i.onload=()=>{i.onload=null,e.dispatch("load")},e.contentAreaContainer=o.iframeContainer,e.iframeElement=i,e.iframeHTML=QZ(e),v5.add(o.iframeContainer,i)},eU=e=>{const o=e.iframeElement,n=()=>{e.contentDocument=o.contentDocument,f5(e)};if(Xw(e)||ae.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=U7(K.fromDom(o),"load",()=>{s.unbind(),n()});o.srcdoc=e.iframeHTML}},tU=(e,o)=>{JZ(e,o),o.editorContainer&&(o.editorContainer.style.display=e.orgDisplay,e.hidden=v5.isHidden(o.editorContainer)),e.getElement().style.display="none",v5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,eU(e)},y5=nn.DOM,w5=(e,o,n)=>{const s=ev.get(n),i=ev.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=fe.trim(n),s&&fe.inArray(o,n)===-1){if(e.plugins[n])return;try{const d=s(e,i)||{};e.plugins[n]=d,J(d.init)&&(d.init(e,i),o.push(n))}catch(d){lS(e,n,d)}}},W7=e=>e.replace(/^\-/,""),C5=e=>{const o=[];Ce(Fp(e),n=>{w5(e,o,W7(n))})},oU=e=>{const o=fe.trim(W1(e)),n=e.ui.registry.getAll().icons,s={...Ky.get("default").icons,...Ky.get(o).icons};nt(s,(i,d)=>{It(n,d)||e.ui.registry.addIcon(d,i)})},nU=e=>{const o=Nu(e);if(G(o)){const n=Vd.get(o);e.theme=n(e,Vd.urls[o])||{},J(e.theme.init)&&e.theme.init(e,Vd.urls[o]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},j7=e=>{const o=qg(e),n=Df.get(o);e.model=n(e,Df.urls[o])},rU=e=>{const o=e.theme.renderUI;return o?o():x5(e)},sU=e=>{const o=e.getElement(),n=Nu(e)(e,o);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:o.offsetHeight,n},$7=(e,o)=>({editorContainer:e,iframeContainer:o,api:{}}),G7=e=>{const o=y5.create("div");return y5.insertAfter(o,e),$7(o,o)},x5=e=>{const o=e.getElement();return e.inline?$7(null):G7(o)},aU=e=>{const o=e.getElement();return e.orgDisplay=o.style.display,G(Nu(e))?rU(e):J(Nu(e))?sU(e):x5(e)},iU=(e,o)=>{const n={show:B.from(o.show).getOr(De),hide:B.from(o.hide).getOr(De),isEnabled:B.from(o.isEnabled).getOr(ct),setEnabled:s=>{e.mode.isReadOnly()||B.from(o.setEnabled).each(i=>i(s))}};e.ui={...e.ui,...n}},lU=async e=>{e.dispatch("ScriptsLoaded"),oU(e),nU(e),j7(e),C5(e);const o=await aU(e);iU(e,B.from(o.api).getOr({})),e.editorContainer=o.editorContainer,yN(e),e.inline?f5(e):tU(e,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},$f=nn.DOM,K7=e=>e.charAt(0)==="-",Gf=(e,o)=>{const n=j1(o),s=Ok(o);if(!cr.hasCode(n)&&n!=="en"){const i=Ks(s)?s:`${o.editorManager.baseURL}/langs/${n}.js`;e.add(i).catch(()=>{iS(o,i,n)})}},S5=(e,o)=>{const n=Nu(e);if(G(n)&&!K7(n)&&!It(Vd.urls,n)){const s=pa(e),i=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${o}.js`;Vd.load(n,i).catch(()=>{Nf(e,i,n)})}},E4=(e,o)=>{const n=qg(e);if(n!=="plugin"&&!It(Df.urls,n)){const s=Eb(e),i=G(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${o}.js`;Df.load(n,i).catch(()=>{Rf(e,i,n)})}},q7=e=>B.from(xk(e)).filter(Ks).map(o=>({url:o,name:B.none()})),k5=(e,o,n)=>B.from(o).filter(s=>Ks(s)&&!Ky.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:B.some(s)})),X7=(e,o,n)=>{const s=k5(o,"default",n),i=q7(o).orThunk(()=>k5(o,W1(o),""));Ce(Ir([s,i]),d=>{e.add(d.url).catch(()=>{aS(o,d.url,d.name.getOrUndefined())})})},cU=(e,o)=>{const n=(s,i)=>{ev.load(s,i).catch(()=>{Mf(e,i,s)})};nt(zw(e),(s,i)=>{n(i,s),e.options.set("plugins",Fp(e).concat(i))}),Ce(Fp(e),s=>{s=fe.trim(s),s&&!ev.urls[s]&&!K7(s)&&n(s,`plugins/${s}/plugin${o}.js`)})},dU=e=>{const o=Nu(e);return!G(o)||xe(Vd.get(o))},uU=e=>{const o=qg(e);return xe(Df.get(o))},mU=(e,o)=>{const n=xd.ScriptLoader,s=()=>{!e.removed&&dU(e)&&uU(e)&&lU(e)};S5(e,o),E4(e,o),Gf(n,e),X7(n,e,o),cU(e,o),n.loadQueue().then(s,s)},qh=(e,o)=>x1.forElement(e,{contentCssCors:Vw(o),referrerPolicy:Sb(o)}),gU=e=>{const o=e.id;cr.setCode(j1(e));const n=()=>{$f.unbind(window,"ready",n),e.render()};if(!Cd.Event.domLoaded){$f.bind(window,"ready",n);return}if(!e.getElement())return;const s=K.fromDom(e.getElement()),i=wc(s);e.on("remove",()=>{el(s.dom.attributes,h=>Fr(s,h.name)),ni(s,i)}),e.ui.styleSheetLoader=qh(s,e),Td(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const d=e.getElement().form||$f.getParent(o,"form");d&&(e.formElement=d,Rk(e)&&!Oc(e.getElement())&&($f.insertAfter($f.create("input",{type:"hidden",name:o}),o),e.hasHiddenInput=!0),e.formEventDelegate=h=>{e.dispatch(h.type,h)},$f.bind(d,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Lk(e)&&!d.submit.nodeType&&!d.submit.length&&!d._mceOldSubmit&&(d._mceOldSubmit=d.submit,d.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),d._mceOldSubmit(d)))),e.windowManager=rS(e),e.notificationManager=fN(e),Y1(e)&&e.on("GetContent",h=>{h.save&&(h.content=$f.encode(h.content))}),Hk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Pk(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),mU(e,e.suffix)},Y7=(e,o)=>{e._editableRoot!==o&&(e._editableRoot=o,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),O0(e,o))},hU=e=>e._editableRoot,O4=(e,o)=>({sections:Be(e),options:Be(o)}),Q7=oi().deviceType,J7=Q7.isPhone(),pU=Q7.isTablet(),_v=e=>{if(oo(e))return[];{const o=ko(e)?e:e.split(/[ ,]/),n=$t(o,xs);return kt(n,Ks)}},fU=(e,o)=>{const n=tl(o,(s,i)=>Ut(e,i));return O4(n.t,n.f)},vU=(e,o,n={})=>{const s=e.sections(),i=Xo(s,o).getOr({});return fe.extend({},n,i)},_5=(e,o)=>It(e.sections(),o),E5=(e,o)=>_5(e,o)?e.sections()[o]:{},bU=(e,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Xo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),yU=(e,o)=>{var n;const s=(n=o.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?fe.extend({},e.external_plugins,s):s},as=(e,o)=>[..._v(e),..._v(o)],wU=(e,o,n,s)=>e&&_5(o,"mobile")?s:n,CU=(e,o,n,s)=>{const i=_v(n.forced_plugins),d=_v(s.plugins),h=E5(o,"mobile"),v=h.plugins?_v(h.plugins):d,w=wU(e,o,d,v),k=as(i,w);return fe.extend(s,{forced_plugins:i,plugins:k})},O5=(e,o)=>e&&_5(o,"mobile"),eL=(e,o,n,s,i)=>{var d;const h=e?{mobile:bU((d=i.mobile)!==null&&d!==void 0?d:{},o)}:{},v=fU(["mobile"],PS(h,i)),w=fe.extend(n,s,v.options(),O5(e,v)?vU(v,"mobile"):{},{external_plugins:yU(s,v.options())});return CU(e,v,s,w)},T5=(e,o)=>eL(J7||pU,J7,o,e,o),xU=(e,o)=>tN(e,o),SU=e=>{const o=(s,i)=>{e.formatter.toggle(s,i),e.nodeChanged()},n=s=>()=>{Ce("left,center,right,justify".split(","),i=>{s!==i&&e.formatter.remove("align"+i)}),s!=="none"&&o("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},kU=e=>{const o=n=>()=>{const s=e.selection,i=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return Wo(i,d=>xe(e.formatter.matchNode(d,n)))};e.editorCommands.addCommands({JustifyLeft:o("alignleft"),JustifyCenter:o("aligncenter"),JustifyRight:o("alignright"),JustifyFull:o("alignjustify")},"state")},_U=e=>{SU(e),kU(e)},EU=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":o=>{const n=e.getDoc();let s;try{n.execCommand(o)}catch{s=!0}if(o==="paste"&&!n.queryCommandEnabled(o)&&(s=!0),s||!n.queryCommandSupported(o)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ae.os.isMacOS()||ae.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},OU=(e,o,n)=>{const s=K.fromDom(e.getRoot());return B0(s,ce.fromRangeStart(o))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),by(s,ce.fromRangeEnd(o))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},TU=e=>{if(typeof e!="string"){const o=fe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:o}}return{content:e,details:{}}},AU=(e,o)=>{const n=e.selection,s=e.dom;return/^ | $/.test(o)?OU(s,n.getRng(),o):o},yg=(e,o)=>{if(e.selection.isEditable()){const{content:n,details:s}=TU(o);zy(e,{...s,content:AU(e,n),format:"html",set:!1,selection:!0}).each(i=>{const d=eN(e,i.content,s);mE(e,d,i),e.addVisual()})}},Gd=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const o=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(o)},insertImage:(o,n,s)=>{yg(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(o,n,s)=>{yg(e,e.dom.encode(s))},insertHTML:(o,n,s)=>{yg(e,s)},mceInsertContent:(o,n,s)=>{yg(e,s)},mceSetContent:(o,n,s)=>{e.setContent(s)},mceReplaceContent:(o,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Ik(e))}})},DU={"font-size":"size","font-family":"face"},MU=_g("font"),NU=(e,o,n)=>{const s=d=>A(d,e).orThunk(()=>MU(d)?Xo(DU,e).bind(h=>Fa(d,h)):B.none()),i=d=>To(K.fromDom(o),d);return N_(K.fromDom(n),d=>s(d),i)},RU=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),LU=(e,o)=>B.from(nn.DOM.getStyle(o,e,!0)),tL=e=>(o,n)=>B.from(n).map(K.fromDom).filter(da).bind(s=>NU(e,o,s.dom).or(LU(e,s.dom))).getOr(""),HU=tL("font-size"),PU=E(RU,tL("font-family")),BU=e=>yr(e.getBody()).bind(o=>{const n=o.container();return B.from(Ve(n)?n.parentNode:n)}),IU=e=>B.from(e.selection.getRng()).bind(o=>{const n=e.getBody();return o.startContainer===n&&o.startOffset===0?B.none():B.from(e.selection.getStart(!0))}),FU=(e,o)=>IU(e).orThunk(Me(BU,e)).map(K.fromDom).filter(da).bind(o),A5=(e,o)=>FU(e,lo(B.some,o)),oL=(e,o)=>{if(/^[0-9.]+$/.test(o)){const n=parseInt(o,10);if(n>=1&&n<=7){const s=Yw(e),i=Qw(e);return i.length>0?i[n-1]||o:s[n-1]||o}else return o}else return o},VU=e=>{const o=e.split(/\s*,\s*/);return $t(o,n=>n.indexOf(" ")!==-1&&!($o(n,'"')||$o(n,"'"))?`'${n}'`:n).join(",")},zU=(e,o)=>{const n=oL(e,o);e.formatter.toggle("fontname",{value:VU(n)}),e.nodeChanged()},ZU=e=>A5(e,o=>PU(e.getBody(),o.dom)).getOr(""),UU=(e,o)=>{e.formatter.toggle("fontsize",{value:oL(e,o)}),e.nodeChanged()},WU=e=>A5(e,o=>HU(e.getBody(),o.dom)).getOr(""),jU=e=>A5(e,o=>{const n=K.fromDom(e.getBody()),s=N_(o,d=>A(d,"line-height"),Me(To,n)),i=()=>{const d=parseFloat(Ni(o,"line-height")),h=parseFloat(Ni(o,"font-size"));return String(d/h)};return s.getOrThunk(i)}).getOr(""),$U=(e,o)=>{e.formatter.toggle("lineheight",{value:String(o)}),e.nodeChanged()},GU=e=>{const o=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{o(n)},"ForeColor,HiliteColor":(n,s,i)=>{o(n,{value:i})},BackColor:(n,s,i)=>{o("hilitecolor",{value:i})},FontName:(n,s,i)=>{zU(e,i)},FontSize:(n,s,i)=>{UU(e,i)},LineHeight:(n,s,i)=>{$U(e,i)},Lang:(n,s,i)=>{var d;o(n,{value:i.code,customValue:(d=i.customCode)!==null&&d!==void 0?d:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(n,s,i)=>{o(G(i)?i:"p")},mceToggleFormat:(n,s,i)=>{o(i)}})},KU=e=>{const o=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>o(n),mceBlockQuote:()=>o("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>ZU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>WU(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>jU(e))},qU=e=>{GU(e),KU(e)},XU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},YU=e=>{e.editorCommands.addCommands({Indent:()=>{EF(e)},Outdent:()=>{z6(e)}}),e.editorCommands.addCommands({Outdent:()=>cv(e)},"state")},QU=e=>{const o=(n,s,i)=>{const d=G(i)?{href:i}:i,h=e.dom.getParent(e.selection.getNode(),"a");Nt(d)&&G(d.href)&&(d.href=d.href.replace(/ /g,"%20"),(!h||!d.href)&&e.formatter.remove("link"),d.href&&e.formatter.apply("link",d,h))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:o,createLink:o})},JU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{e.getDoc().execCommand(o);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(i)}}}})},eW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(o==="insertunorderedlist"&&n.tagName==="UL"||o==="insertorderedlist"&&n.tagName==="OL")}},"state")},tW=e=>{JU(e),eW(e)},oW=(e,o,n,s)=>{const i=e.dom,d=v=>i.isBlock(v)&&v.parentElement===n,h=d(o)?o:i.getParent(s,d,n);return B.from(h).map(K.fromDom)},nL=(e,o)=>{const n=e.dom,s=e.selection.getRng(),i=o?e.selection.getStart():e.selection.getEnd(),d=o?s.startContainer:s.endContainer,h=m2(n,d);if(!h||!h.isContentEditable)return;const v=o?He:xt,w=ns(e);oW(e,i,h,d).each(k=>{const M=b8(e,d,k.dom,h,!1,w);v(k,K.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),u2(e,"insertParagraph")})},rL=e=>nL(e,!0),nW=e=>nL(e,!1),rW=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{rL(e)},InsertNewBlockAfter:()=>{nW(e)}})},sW=e=>{e.editorCommands.addCommands({insertParagraph:()=>{p2(t4,e)},mceInsertNewLine:(o,n,s)=>{O8(e,s)},InsertLineBreak:(o,n,s)=>{p2(_T,e)}})},aW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(o,n,s)=>{let i=0;e.dom.getParent(e.selection.getNode(),d=>gt(d)&&i++===s?(e.selection.select(d),!1):!0,e.getBody())},mceSelectNode:(o,n,s)=>{e.selection.select(s)},selectAll:()=>{const o=e.dom.getParent(e.selection.getStart(),On);if(o){const n=e.dom.createRng();n.selectNodeContents(o),e.selection.setRng(n)}}})},iW=e=>{e.editorCommands.addCommands({mceRemoveNode:(o,n,s)=>{const i=s??e.selection.getNode();if(i!==e.getBody()){const d=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(d)}},mcePrint:()=>{e.getWin().print()},mceFocus:(o,n,s)=>{nA(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},lW=e=>{_U(e),EU(e),XU(e),aW(e),Gd(e),QU(e),YU(e),rW(e),sW(e),tW(e),qU(e),iW(e)},cW=["toggleview"],sL=e=>Ut(cW,e.toLowerCase());class D5{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,n=!1,s,i){const d=this.editor,h=o.toLowerCase(),v=i==null?void 0:i.skip_focus;if(d.removed||(h!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(h)&&!v?d.focus():X5(d)),d.dispatch("BeforeExecCommand",{command:o,ui:n,value:s}).isDefaultPrevented()))return!1;const w=this.commands.exec[h];return J(w)?(w(h,n,s),d.dispatch("ExecCommand",{command:o,ui:n,value:s}),!0):!1}queryCommandState(o){if(!sL(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=o.toLowerCase(),s=this.commands.state[n];return J(s)?s(n):!1}queryCommandValue(o){if(!sL(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=o.toLowerCase(),s=this.commands.value[n];return J(s)?s(n):""}addCommands(o,n="exec"){const s=this.commands;nt(o,(i,d)=>{Ce(d.toLowerCase().split(","),h=>{s[n][h]=i})})}addCommand(o,n,s){const i=o.toLowerCase();this.commands.exec[i]=(d,h,v)=>n.call(s??this.editor,h,v)}queryCommandSupported(o){const n=o.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(o,n,s){this.commands.state[o.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(o,n,s){this.commands.value[o.toLowerCase()]=()=>n.call(s??this.editor)}}const Kf="data-mce-contenteditable",dW=(e,o,n)=>{ld(e,o)&&!n?iu(e,o):n&&Sc(e,o)},M5=(e,o,n)=>{try{e.getDoc().execCommand(o,!1,String(n))}catch{}},T4=(e,o)=>{e.dom.contentEditable=o?"true":"false"},uW=e=>{Ce(zr(e,'*[contenteditable="true"]'),o=>{En(o,Kf,"true"),T4(o,!1)})},mW=e=>{Ce(zr(e,`*[${Kf}="true"]`),o=>{Fr(o,Kf),T4(o,!0)})},gW=e=>{B.from(e.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})},hW=e=>{e.selection.setRng(e.selection.getRng())},aL=(e,o)=>{const n=K.fromDom(e.getBody());dW(n,"mce-content-readonly",o),o?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),gW(e),e.readonly=!0,T4(n,!1),uW(n)):(e.readonly=!1,e.hasEditableRoot()&&T4(n,!0),mW(n),M5(e,"StyleWithCSS",!1),M5(e,"enableInlineTableEditing",!1),M5(e,"enableObjectResizing",!1),qL(e)&&e.focus(),hW(e),e.nodeChanged())},Xh=e=>e.readonly,iL=e=>{e.parser.addAttributeFilter("contenteditable",o=>{Xh(e)&&Ce(o,n=>{n.attr(Kf,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Kf,o=>{Xh(e)&&Ce(o,n=>{n.attr("contenteditable",n.attr(Kf))})}),e.serializer.addTempAttr(Kf)},lL=e=>{e.serializer?iL(e):e.on("PreInit",()=>{iL(e)})},pW=e=>e.type==="click",fW=["copy"],vW=e=>Ut(fW,e.type),bW=(e,o)=>ml(o,"a",n=>To(n,K.fromDom(e.getBody()))).bind(n=>Fa(n,"href")),yW=(e,o)=>{if(pW(o)&&!dt.metaKeyPressed(o)){const n=K.fromDom(o.target);bW(e,n).each(s=>{if(o.preventDefault(),/^#/.test(s)){const i=e.dom.select(`${s},[name="${Yd(s,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else vW(o)&&e.dispatch(o.type,o)},wW=e=>{e.on("ShowCaret",o=>{Xh(e)&&o.preventDefault()}),e.on("ObjectSelected",o=>{Xh(e)&&o.preventDefault()})},N5=fe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class x2{static isNative(o){return!!N5[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ne}fire(o,n){return this.dispatch(o,n)}dispatch(o,n){const s=o.toLowerCase(),i=tb(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const d=this.bindings[s];if(d)for(let h=0,v=d.length;h<v;h++){const w=d[h];if(!w.removed){if(w.once&&this.off(s,w.func),i.isImmediatePropagationStopped())return i;if(w.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(o,n,s,i){if(n===!1&&(n=Ne),n){const d={func:n,removed:!1};i&&fe.extend(d,i);const h=o.toLowerCase().split(" ");let v=h.length;for(;v--;){const w=h[v];let k=this.bindings[w];k||(k=[],this.toggleEvent(w,!0)),s?k=[d,...k]:k=[...k,d],this.bindings[w]=k}}return this}off(o,n){if(o){const s=o.toLowerCase().split(" ");let i=s.length;for(;i--;){const d=s[i];let h=this.bindings[d];if(!d)return nt(this.bindings,(v,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(h){if(!n)h.length=0;else{const v=hr(h,w=>w.func===n);h=v.fail,this.bindings[d]=h,Ce(v.pass,w=>{w.removed=!0})}h.length||(this.toggleEvent(o,!1),delete this.bindings[d])}}}else nt(this.bindings,(s,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,n,s){return this.on(o,n,s,{once:!0})}has(o){o=o.toLowerCase();const n=this.bindings[o];return!(!n||n.length===0)}}const S2=e=>(e._eventDispatcher||(e._eventDispatcher=new x2({scope:e,toggleEvent:(o,n)=>{x2.isNative(o)&&e.toggleNativeEvent&&e.toggleNativeEvent(o,n)}})),e._eventDispatcher),A4={fire(e,o,n){return this.dispatch(e,o,n)},dispatch(e,o,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return tb(e.toLowerCase(),o??{},s);const i=S2(s).dispatch(e,o);if(n!==!1&&s.parent){let d=s.parent();for(;d&&!i.isPropagationStopped();)d.dispatch(e,i,!1),d=d.parent?d.parent():void 0}return i},on(e,o,n){return S2(this).on(e,o,n)},off(e,o){return S2(this).off(e,o)},once(e,o){return S2(this).once(e,o)},hasEventListeners(e){return S2(this).has(e)}},D4=nn.DOM;let qf;const M4=(e,o)=>{if(o==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return e.getDoc().documentElement;const n=Yn(e);return n?(e.eventRoot||(e.eventRoot=D4.select(n)[0]),e.eventRoot):e.getBody()},CW=e=>!e.hidden&&!Xh(e),cL=(e,o,n)=>{CW(e)?e.dispatch(o,n):Xh(e)&&yW(e,n)},dL=(e,o)=>{if(e.delegates||(e.delegates={}),e.delegates[o]||e.removed)return;const n=M4(e,o);if(Yn(e)){if(qf||(qf={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||qf&&(nt(qf,(i,d)=>{e.dom.unbind(M4(e,d))}),qf=null)})),qf[o])return;const s=i=>{const d=i.target,h=e.editorManager.get();let v=h.length;for(;v--;){const w=h[v].getBody();(w===d||D4.isChildOf(d,w))&&cL(h[v],o,i)}};qf[o]=s,D4.bind(n,o,s)}else{const s=i=>{cL(e,o,i)};D4.bind(n,o,s),e.delegates[o]=s}},uL={...A4,bindPendingEventDelegates(){const e=this;fe.each(e._pendingNativeEvents,o=>{dL(e,o)})},toggleNativeEvent(e,o){const n=this;e==="focus"||e==="blur"||n.removed||(o?n.initialized?dL(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(M4(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,o=e.getBody(),n=e.dom;e.delegates&&(nt(e.delegates,(s,i)=>{e.dom.unbind(M4(e,i),i,s)}),delete e.delegates),!e.inline&&o&&n&&(o.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(o),n.unbind(e.getContainer()))}},xW=e=>G(e)?{value:e.split(/[ ,]/),valid:!0}:Ue(e,G)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},SW=e=>{const o=(()=>{switch(e){case"array":return ko;case"boolean":return ao;case"function":return J;case"number":return bs;case"object":return Nt;case"string":return G;case"string[]":return xW;case"object[]":return n=>Ue(n,Nt);case"regexp":return n=>Cn(n,RegExp);default:return ct}})();return n=>R5(n,o,`The value must be a ${e}.`)},kW=e=>G(e.processor),N4=(e,o)=>{const n=fc(o.message)?"":`. ${o.message}`;return e+n},mL=e=>e.valid,R5=(e,o,n="")=>{const s=o(e);return ao(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},_W=(e,o,n)=>{if(!Gn(o)){const s=R5(o,n);if(mL(s))return s.value;console.error(N4(`Invalid default value passed for the "${e}" option`,s))}},EW=(e,o)=>{const n={},s={},i=(v,w,k)=>{const M=R5(w,k);return mL(M)?(s[v]=M.value,!0):(console.warn(N4(`Invalid value passed for the ${v} option`,M)),!1)},d=(v,w)=>{const k=kW(w)?SW(w.processor):w.processor,M=_W(v,w.default,k);n[v]={...w,default:M,processor:k},Xo(s,v).orThunk(()=>Xo(o,v)).each(H=>i(v,H,k))},h=v=>It(n,v);return{register:d,isRegistered:h,get:v=>Xo(s,v).orThunk(()=>Xo(n,v).map(w=>w.default)).getOrUndefined(),set:(v,w)=>{if(h(v)){const k=n[v];return k.immutable?(console.error(`"${v}" is an immutable option and cannot be updated`),!1):i(v,w,k.processor)}else return console.warn(`"${v}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:v=>{const w=h(v);return w&&delete s[v],w},isSet:v=>It(s,v)}},OW=["design","readonly"],L5=(e,o,n,s)=>{const i=n[o.get()],d=n[s];try{d.activate()}catch(h){console.error(`problem while activating editor mode ${s}:`,h);return}i.deactivate(),i.editorReadOnly!==d.editorReadOnly&&aL(e,d.editorReadOnly),o.set(s),Uu(e,s)},Xf=(e,o,n,s)=>{if(s!==n.get()){if(!It(o,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?L5(e,n,o,s):e.on("init",()=>L5(e,n,o,s))}},TW=(e,o,n)=>{if(Ut(OW,o))throw new Error(`Cannot override default mode ${o}`);return{...e,[o]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${o}:`,s)}}}}},AW=e=>{const o=vr("design"),n=vr({design:{activate:De,deactivate:De,editorReadOnly:!1},readonly:{activate:De,deactivate:De,editorReadOnly:!0}});return lL(e),wW(e),{isReadOnly:()=>Xh(e),set:s=>Xf(e,n.get(),o,s),get:()=>o.get(),register:(s,i)=>{n.set(TW(n.get(),s,i))}}},H5=fe.each,P5=fe.explode,_l={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},B5=fe.makeMap("alt,ctrl,shift,meta,access"),DW=e=>e in B5,MW=e=>{const o={},n=ae.os.isMacOS()||ae.os.isiOS();H5(P5(e.toLowerCase(),"+"),d=>{DW(d)?o[d]=!0:/^[0-9]{2,}$/.test(d)?o.keyCode=parseInt(d,10):(o.charCode=d.charCodeAt(0),o.keyCode=_l[d]||d.toUpperCase().charCodeAt(0))});const s=[o.keyCode];let i;for(i in B5)o[i]?s.push(i):o[i]=!1;return o.id=s.join(","),o.access&&(o.alt=!0,n?o.ctrl=!0:o.shift=!0),o.meta&&(n?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class gL{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const n=this;o.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(H5(n.shortcuts,i=>{n.matchShortcut(s,i)&&(n.pendingPatterns=i.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(i))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(o,n,s,i){const d=this,h=d.normalizeCommandFunc(s);return H5(P5(fe.trim(o)),v=>{const w=d.createShortcut(v,n,h,i);d.shortcuts[w.id]=w}),!0}remove(o){const n=this.createShortcut(o);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(o){const n=this,s=o;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:fe.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(o,n,s,i){const d=fe.map(P5(o,">"),MW);return d[d.length-1]=fe.extend(d[d.length-1],{func:s,scope:i||this.editor}),fe.extend(d[0],{desc:this.editor.translate(n),subpatterns:d.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return o.type==="keydown"&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,n){return!n||n.ctrl!==o.ctrlKey||n.meta!==o.metaKey||n.alt!==o.altKey||n.shift!==o.shiftKey?!1:o.keyCode===n.keyCode||o.charCode&&o.charCode===n.charCode?(o.preventDefault(),!0):!1}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const NW=()=>{const e={},o={},n={},s={},i={},d={},h={},v={},w=(M,H)=>(I,$)=>{M[I.toLowerCase()]={...$,type:H}},k=(M,H)=>s[M.toLowerCase()]=H;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(o,"menuitem"),addNestedMenuItem:w(o,"nestedmenuitem"),addToggleMenuItem:w(o,"togglemenuitem"),addAutocompleter:w(n,"autocompleter"),addContextMenu:w(i,"contextmenu"),addContextToolbar:w(d,"contexttoolbar"),addContextForm:w(d,"contextform"),addSidebar:w(h,"sidebar"),addView:w(v,"views"),addIcon:k,getAll:()=>({buttons:e,menuItems:o,icons:s,popups:n,contextMenus:i,contextToolbars:d,sidebars:h,views:v})}},RW=()=>{const e=NW();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Yf=nn.DOM,hL=fe.extend,pL=fe.each;class R4{constructor(o,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,hL(this,uL);const i=this;this.id=o,this.hidden=!1;const d=T5(s.defaultOptions,n);this.options=EW(i,d),os(i);const h=this.options.get;h("deprecation_warnings")&&LE(n,d);const v=h("suffix");v&&(s.suffix=v),this.suffix=s.suffix;const w=h("base_url");w&&s._setBaseUrl(w),this.baseUri=s.baseURI;const k=Sb(i);k&&(xd.ScriptLoader._setReferrerPolicy(k),nn.DOM.styleSheetLoader._setReferrerPolicy(k));const M=Vw(i);xe(M)&&nn.DOM.styleSheetLoader._setContentCssCors(M),Ln.languageLoad=h("language_load"),Ln.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new sc(Mw(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Td(i),this.hasVisual=Zw(i),this.shortcuts=new gL(this),this.editorCommands=new D5(this),lW(this);const H=h("cache_suffix");H&&(ae.cacheSuffix=H.replace(/^[\?\&]+/,"")),this.ui={registry:RW(),styleSheetLoader:void 0,show:De,hide:De,setEnabled:De,isEnabled:ct},this.mode=AW(i),s.dispatch("SetupEditor",{editor:this});const I=Bc(i);J(I)&&I.call(i,i)}render(){gU(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return vf(this)}translate(o){return cr.translate(o)}getParam(o,n,s){const i=this.options;return i.isRegistered(o)||(xe(s)?i.register(o,{processor:s,default:n}):i.register(o,{processor:ct,default:n})),!i.isSet(o)&&!Gn(n)?n:i.get(o)}hasPlugin(o,n){return Ut(Fp(this),o)?n?ev.get(o)!==void 0:!0:!1}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,n,s){this.editorCommands.addCommand(o,n,s)}addQueryStateHandler(o,n,s){this.editorCommands.addQueryStateHandler(o,n,s)}addQueryValueHandler(o,n,s){this.editorCommands.addQueryValueHandler(o,n,s)}addShortcut(o,n,s,i){this.shortcuts.add(o,n,s,i)}execCommand(o,n,s,i){return this.editorCommands.execCommand(o,n,s,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":(Yf.show(o.getContainer()),Yf.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):(Yf.hide(o.getContainer()),Yf.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,n){this.dispatch("ProgressState",{state:o,time:n})}load(o={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const i={...o,load:!0},d=Oc(s)?s.value:s.innerHTML,h=n.setContent(d,i);return i.no_events||n.dispatch("LoadContent",{...i,element:s}),h}else return""}save(o={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const i={...o,save:!0,element:s};let d=n.getContent(i);const h={...i,content:d};if(h.no_events||n.dispatch("SaveContent",h),h.format==="raw"&&n.dispatch("RawSaveContent",h),d=h.content,Oc(s))s.value=d;else{(o.is_removing||!n.inline)&&(s.innerHTML=d);const v=Yf.getParent(n.id,"form");v&&pL(v.elements,w=>w.name===n.id?(w.value=d,!1):!0)}return h.element=i.element=s=null,h.set_dirty!==!1&&n.setDirty(!1),d}setContent(o,n){return Af(this,o,n)}getContent(o){return iN(this,o)}insertContent(o,n){n&&(o=hL({content:o},n)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){o===void 0?Af(this,this.startContent,{format:"raw"}):Af(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const n=!this.isNotDirty;this.isNotDirty=!o,o&&o!==n&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||Yf.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Yf.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const n=o.iframeElement;n&&(o.contentWindow=n.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const n=o.getWin();n&&(o.contentDocument=n.document)}return o.contentDocument}getBody(){var o,n;const s=this.getDoc();return(n=(o=this.bodyElement)!==null&&o!==void 0?o:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(o,n,s){const i=this,d=i.options.get,h=Ym(i);return J(h)?h.call(i,o,s,!0,n):!d("convert_urls")||s==="link"||Nt(s)&&s.nodeName==="LINK"||o.indexOf("file:")===0||o.length===0?o:d("relative_urls")?i.documentBaseURI.toRelative(o):(o=i.documentBaseURI.toAbsolute(o,d("remove_script_host")),o)}addVisual(o){xU(this,o)}setEditableRoot(o){Y7(this,o)}hasEditableRoot(){return hU(this)}remove(){Gy(this)}destroy(o){iI(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ev=nn.DOM,L4=fe.each;let fL=!1,H4,bi=[];const P4=e=>{const o=e.type;L4(Yh.get(),n=>{switch(o){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},Qf=e=>{if(e!==fL){const o=nn.DOM;e?(o.bind(window,"resize",P4),o.bind(window,"scroll",P4)):(o.unbind(window,"resize",P4),o.unbind(window,"scroll",P4)),fL=e}},vL=e=>{const o=bi;return bi=kt(bi,n=>e!==n),Yh.activeEditor===e&&(Yh.activeEditor=bi.length>0?bi[0]:null),Yh.focusedEditor===e&&(Yh.focusedEditor=null),o.length!==bi.length},LW=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(vL(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},HW=document.compatMode!=="CSS1Compat",Yh={...A4,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.2",releaseDate:"2023-10-25",i18n:cr,activeEditor:null,focusedEditor:null,setup(){const e=this;let o="",n="",s=sc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,n=i.suffix;else{const d=document.getElementsByTagName("script");for(let h=0;h<d.length;h++){const v=d[h].src||"";if(v==="")continue;const w=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){w.indexOf(".min")!==-1&&(n=".min"),o=v.substring(0,v.lastIndexOf("/"));break}}if(!o&&document.currentScript){const h=document.currentScript.src;h.indexOf(".min")!==-1&&(n=".min"),o=h.substring(0,h.lastIndexOf("/"))}}e.baseURL=new sc(s).toAbsolute(o),e.documentBaseURL=s,e.baseURI=new sc(e.baseURL),e.suffix=n,UL(e)},overrideDefaults(e){const o=e.base_url;o&&this._setBaseUrl(o);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&nt(s,(i,d)=>{Ln.PluginManager.urls[d]=i})},init(e){const o=this;let n;const s=fe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(M,H)=>M.inline&&H.tagName.toLowerCase()in s,d=M=>{let H=M.id;return H||(H=Xo(M,"name").filter(I=>!Ev.get(I)).getOrThunk(Ev.uniqueId),M.setAttribute("id",H)),H},h=M=>{const H=e[M];if(H)return H.apply(o,[])},v=M=>ae.browser.isIE()||ae.browser.isEdge()?(Lf("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):HW?(Lf("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):G(M.selector)?Ev.select(M.selector):xe(M.target)?[M.target]:[];let w=M=>{n=M};const k=()=>{let M=0;const H=[];let I;const $=(U,W,j)=>{const te=new R4(U,W,o);H.push(te),te.on("init",()=>{++M===I.length&&w(H)}),te.targetElm=te.targetElm||j,te.render()};Ev.unbind(window,"ready",k),h("onpageload"),I=Si(v(e)),fe.each(I,U=>{LW(o.get(U.id))}),I=fe.grep(I,U=>!o.get(U.id)),I.length===0?w([]):L4(I,U=>{i(e,U)?Lf("Could not initialize inline editor on invalid inline target element",U):$(d(U),e,U)})};return Ev.bind(window,"ready",k),new Promise(M=>{n?M(n):w=H=>{M(H)}})},get(e){return arguments.length===0?bi.slice(0):G(e)?xn(bi,o=>o.id===e).getOr(null):bs(e)&&bi[e]?bi[e]:null},add(e){const o=this,n=o.get(e.id);return n===e||(n===null&&bi.push(e),Qf(!0),o.activeEditor=e,o.dispatch("AddEditor",{editor:e}),H4||(H4=s=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return s.preventDefault(),s.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",H4))),e},createEditor(e,o){return this.add(new R4(e,o,this))},remove(e){const o=this;let n;if(!e){for(let s=bi.length-1;s>=0;s--)o.remove(bi[s]);return}if(G(e)){L4(Ev.select(e),s=>{n=o.get(s.id),n&&o.remove(n)});return}return n=e,re(o.get(n.id))?null:(vL(n)&&o.dispatch("RemoveEditor",{editor:n}),bi.length===0&&window.removeEventListener("beforeunload",H4),n.remove(),Qf(bi.length>0),n)},execCommand(e,o,n){var s;const i=this,d=Nt(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!i.get(d)){const h=n.options;new R4(d,h,i).render()}return!0}case"mceRemoveEditor":{const h=i.get(d);return h&&h.remove(),!0}case"mceToggleEditor":{const h=i.get(d);return h?(h.isHidden()?h.show():h.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,o,n):!1},triggerSave:()=>{L4(bi,e=>{e.save()})},addI18n:(e,o)=>{cr.add(e,o)},translate:e=>cr.translate(e),setActive(e){const o=this.activeEditor;this.activeEditor!==e&&(o&&o.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:o})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new sc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new sc(this.baseURL)}};Yh.setup();const bL=(()=>{const e=Xn(),o=d=>({items:d,types:pr(d),getType:h=>Xo(d,h).getOrUndefined()}),n=d=>{e.set(d)},s=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:o,write:n,read:s,clear:i}})(),k2=Math.min,Qh=Math.max,B4=Math.round,I5=(e,o,n)=>{let s=o.x,i=o.y;const d=e.w,h=e.h,v=o.w,w=o.h,k=(n||"").split("");return k[0]==="b"&&(i+=w),k[1]==="r"&&(s+=v),k[0]==="c"&&(i+=B4(w/2)),k[1]==="c"&&(s+=B4(v/2)),k[3]==="b"&&(i-=h),k[4]==="r"&&(s-=d),k[3]==="c"&&(i-=B4(h/2)),k[4]==="c"&&(s-=B4(d/2)),Ov(s,i,d,h)},yL=(e,o,n,s)=>{for(let i=0;i<s.length;i++){const d=I5(e,o,s[i]);if(d.x>=n.x&&d.x+d.w<=n.w+n.x&&d.y>=n.y&&d.y+d.h<=n.h+n.y)return s[i]}return null},PW=(e,o,n)=>Ov(e.x-o,e.y-n,e.w+o*2,e.h+n*2),wL=(e,o)=>{const n=Qh(e.x,o.x),s=Qh(e.y,o.y),i=k2(e.x+e.w,o.x+o.w),d=k2(e.y+e.h,o.y+o.h);return i-n<0||d-s<0?null:Ov(n,s,i-n,d-s)},BW=(e,o,n)=>{let s=e.x,i=e.y,d=e.x+e.w,h=e.y+e.h;const v=o.x+o.w,w=o.y+o.h,k=Qh(0,o.x-s),M=Qh(0,o.y-i),H=Qh(0,d-v),I=Qh(0,h-w);return s+=k,i+=M,n&&(d+=k,h+=M,s-=H,i-=I),d-=H,h-=I,Ov(s,i,d-s,h-i)},Ov=(e,o,n,s)=>({x:e,y:o,w:n,h:s}),IW={inflate:PW,relativePosition:I5,findBestRelativePosition:yL,intersect:wL,clamp:BW,create:Ov,fromClientRect:e=>Ov(e.left,e.top,e.width,e.height)},FW=(e,o,n=1e3)=>{let s=!1,i=null;const d=w=>(...k)=>{s||(s=!0,i!==null&&(clearTimeout(i),i=null),w.apply(null,k))},h=d(e),v=d(o);return{start:(...w)=>{!s&&i===null&&(i=setTimeout(()=>v.apply(null,w),n))},resolve:h,reject:v}},CL=(()=>{const e={},o={};return{load:(n,s)=>{const i=`Script at URL "${s}" failed to load`,d=`Script at URL "${s}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(e[n]!==void 0)return e[n];{const h=new Promise((v,w)=>{const k=FW(v,w);o[n]=k.resolve,xd.ScriptLoader.loadScript(s).then(()=>k.start(d),()=>k.reject(i))});return e[n]=h,h}},add:(n,s)=>{o[n]!==void 0&&(o[n](s),delete o[n]),e[n]=Promise.resolve(s)},unload:n=>{delete e[n]}}})(),xL=()=>(()=>{let e={},o=[];const n={getItem:s=>e[s]||null,setItem:(s,i)=>{o.push(s),e[s]=String(i)},key:s=>o[s],removeItem:s=>{o=o.filter(i=>i===s),delete e[s]},clear:()=>{o=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>o.length,configurable:!1,enumerable:!1}),n})();let Tv;try{const e="__storage_test__";Tv=window.localStorage,Tv.setItem(e,e),Tv.removeItem(e)}catch{Tv=xL()}var SL=Tv;const kL={geom:{Rect:IW},util:{Delay:nc,Tools:fe,VK:dt,URI:sc,EventDispatcher:x2,Observable:A4,I18n:cr,LocalStorage:SL,ImageUploader:zh},dom:{EventUtils:Cd,TreeWalker:Ar,TextSeeker:Sd,DOMUtils:nn,ScriptLoader:xd,RangeUtils:Qo,Serializer:aN,StyleSheetLoader:Te,ControlSelection:PC,BookmarkManager:sf,Selection:sN,Event:Cd.Event},html:{Styles:Eu,Entities:wd,Node:mi,Schema:_u,DomParser:Bh,Writer:Pt,Serializer:wh},Env:ae,AddOnManager:Ln,Annotator:E0,Formatter:TN,UndoManager:$E,EditorCommands:D5,WindowManager:rS,NotificationManager:fN,EditorObservable:uL,Shortcuts:gL,Editor:R4,FocusManager:O3,EditorManager:Yh,DOM:nn.DOM,ScriptLoader:xd.ScriptLoader,PluginManager:ev,ThemeManager:Vd,ModelManager:Df,IconManager:Ky,Resource:CL,FakeClipboard:bL,trim:fe.trim,isArray:fe.isArray,is:fe.is,toArray:fe.toArray,makeMap:fe.makeMap,each:fe.each,map:fe.map,grep:fe.grep,inArray:fe.inArray,extend:fe.extend,walk:fe.walk,resolve:fe.resolve,explode:fe.explode,_addCacheSuffix:fe._addCacheSuffix},F5=fe.extend(Yh,kL),V5=e=>{try{yt.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(F5),V5(F5)})()})(vj);var Xj=vj.exports;const GW=qj(Xj);(function(){var yt=tinymce.util.Tools.resolve("tinymce.ModelManager");const Oo=(c,m,p)=>{var b;return p(c,m.prototype)?!0:((b=c.constructor)===null||b===void 0?void 0:b.name)===m.name},ho=c=>{const m=typeof c;return c===null?"null":m==="object"&&Array.isArray(c)?"array":m==="object"&&Oo(c,String,(p,b)=>b.isPrototypeOf(p))?"string":m},Ro=c=>m=>ho(m)===c,Po=c=>m=>typeof m===c,Bo=c=>m=>c===m,wn=Ro("string"),Kt=Ro("object"),to=Ro("array"),sn=Bo(null),Xt=Po("boolean"),$n=Bo(void 0),is=c=>c==null,Hn=c=>!is(c),Kr=Po("function"),hn=Po("number"),vt=()=>{},Ns=(c,m)=>(...p)=>c(m.apply(null,p)),Cn=(c,m)=>p=>c(m(p)),G=c=>()=>c,Nt=c=>c,Ji=(c,m)=>c===m;function ko(c,...m){return(...p)=>{const b=m.concat(p);return c.apply(null,b)}}const re=c=>m=>!c(m),ao=c=>()=>{throw new Error(c)},Gn=c=>c(),oo=G(!1),xe=G(!0);class J{constructor(m,p){this.tag=m,this.value=p}static some(m){return new J(!0,m)}static none(){return J.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?J.some(m(this.value)):J.none()}bind(m){return this.tag?m(this.value):J.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:J.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Hn(m)?J.some(m):J.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}J.singletonNone=new J(!1);const bs=Array.prototype.slice,Ue=Array.prototype.indexOf,De=Array.prototype.push,E=(c,m)=>Ue.call(c,m),lo=(c,m)=>E(c,m)>-1,Be=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const x=c[p];if(m(x,p))return!0}return!1},go=(c,m)=>{const p=[];for(let b=0;b<c;b++)p.push(m(b));return p},Ot=(c,m)=>{const p=c.length,b=new Array(p);for(let x=0;x<p;x++){const O=c[x];b[x]=m(O,x)}return b},Me=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const x=c[p];m(x,p)}},zo=(c,m)=>{for(let p=c.length-1;p>=0;p--){const b=c[p];m(b,p)}},ls=(c,m)=>{const p=[],b=[];for(let x=0,O=c.length;x<O;x++){const N=c[x];(m(N,x)?p:b).push(N)}return{pass:p,fail:b}},Ko=(c,m)=>{const p=[];for(let b=0,x=c.length;b<x;b++){const O=c[b];m(O,b)&&p.push(O)}return p},xr=(c,m,p)=>(zo(c,(b,x)=>{p=m(p,b,x)}),p),Ne=(c,m,p)=>(Me(c,(b,x)=>{p=m(p,b,x)}),p),ct=(c,m,p)=>{for(let b=0,x=c.length;b<x;b++){const O=c[b];if(m(O,b))return J.some(O);if(p(O,b))break}return J.none()},B=(c,m)=>ct(c,m,oo),ys=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const x=c[p];if(m(x,p))return J.some(p)}return J.none()},qo=c=>{const m=[];for(let p=0,b=c.length;p<b;++p){if(!to(c[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+c);De.apply(m,c[p])}return m},Pn=(c,m)=>qo(Ot(c,m)),Io=(c,m)=>{for(let p=0,b=c.length;p<b;++p){const x=c[p];if(m(x,p)!==!0)return!1}return!0},pn=c=>{const m=bs.call(c,0);return m.reverse(),m},Ut=(c,m)=>{const p={};for(let b=0,x=c.length;b<x;b++){const O=c[b];p[String(O)]=m(O,b)}return p},Wo=(c,m)=>{const p=bs.call(c,0);return p.sort(m),p},$t=(c,m)=>m>=0&&m<c.length?J.some(c[m]):J.none(),Ce=c=>$t(c,0),el=c=>$t(c,c.length-1),hr=(c,m)=>{for(let p=0;p<c.length;p++){const b=m(c[p],p);if(b.isSome())return b}return J.none()},kt=Object.keys,El=Object.hasOwnProperty,_n=(c,m)=>{const p=kt(c);for(let b=0,x=p.length;b<x;b++){const O=p[b],N=c[O];m(N,O)}},od=(c,m)=>xn(c,(p,b)=>({k:b,v:m(p,b)})),xn=(c,m)=>{const p={};return _n(c,(b,x)=>{const O=m(b,x);p[O.k]=O.v}),p},qr=c=>(m,p)=>{c[p]=m},Ol=(c,m,p,b)=>{_n(c,(x,O)=>{(m(x,O)?p:b)(x,O)})},Rs=(c,m)=>{const p={};return Ol(c,m,qr(p),vt),p},Kn=(c,m)=>{const p=[];return _n(c,(b,x)=>{p.push(m(b,x))}),p},dn=c=>Kn(c,Nt),Tl=(c,m)=>Bn(c,m)?J.from(c[m]):J.none(),Bn=(c,m)=>El.call(c,m),an=(c,m)=>Bn(c,m)&&c[m]!==void 0&&c[m]!==null,Al=c=>{for(const m in c)if(El.call(c,m))return!1;return!0},un=typeof window<"u"?window:Function("return this;")(),xi=(c,m)=>{let p=m??un;for(let b=0;b<c.length&&p!==void 0&&p!==null;++b)p=p[c[b]];return p},ws=(c,m)=>{const p=c.split(".");return xi(p,m)},Ls=(c,m)=>ws(c,m),Si=(c,m)=>{const p=Ls(c,m);if(p==null)throw new Error(c+" not available on this browser");return p},pr=Object.getPrototypeOf,ki=c=>Si("HTMLElement",c),nt=c=>{const m=ws("ownerDocument.defaultView",c);return Kt(c)&&(ki(m).prototype.isPrototypeOf(c)||/^HTML\w*Element$/.test(pr(c).constructor.name))},wo=8,Gs=9,Xr=11,pc=1,tl=3,jo=c=>c.dom.nodeName.toLowerCase(),ol=c=>c.dom.nodeType,Dl=c=>m=>ol(m)===c,Xo=c=>ol(c)===wo||jo(c)==="#comment",It=c=>tr(c)&&nt(c.dom),tr=Dl(pc),_i=Dl(tl),nd=Dl(Gs),dm=Dl(Xr),Cs=c=>m=>tr(m)&&jo(m)===c,Sr=(c,m,p)=>{if(wn(p)||Xt(p)||hn(p))c.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",c),new Error("Attribute value was not simple")},Mn=(c,m,p)=>{Sr(c.dom,m,p)},fr=(c,m)=>{const p=c.dom;_n(m,(b,x)=>{Sr(p,x,b)})},Yr=(c,m)=>{_n(m,(p,b)=>{p.fold(()=>{Ao(c,b)},x=>{Sr(c.dom,b,x)})})},Hs=(c,m)=>{const p=c.dom.getAttribute(m);return p===null?void 0:p},kr=(c,m)=>J.from(Hs(c,m)),Ao=(c,m)=>{c.dom.removeAttribute(m)},or=c=>Ne(c.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Ia=(c,m)=>{const p=(m||document).createElement("div");if(p.innerHTML=c,!p.hasChildNodes()||p.childNodes.length>1){const b="HTML does not have a single root node";throw console.error(b,c),new Error(b)}return Xe(p.childNodes[0])},rd=(c,m)=>{const p=(m||document).createElement(c);return Xe(p)},Ei=(c,m)=>{const p=(m||document).createTextNode(c);return Xe(p)},Xe=c=>{if(c==null)throw new Error("Node cannot be null or undefined");return{dom:c}},tt={fromHtml:Ia,fromTag:rd,fromText:Ei,fromDom:Xe,fromPoint:(c,m,p)=>J.from(c.dom.elementFromPoint(m,p)).map(Xe)},_r=(c,m)=>{const p=c.dom;if(p.nodeType!==pc)return!1;{const b=p;if(b.matches!==void 0)return b.matches(m);if(b.msMatchesSelector!==void 0)return b.msMatchesSelector(m);if(b.webkitMatchesSelector!==void 0)return b.webkitMatchesSelector(m);if(b.mozMatchesSelector!==void 0)return b.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},sd=c=>c.nodeType!==pc&&c.nodeType!==Gs&&c.nodeType!==Xr||c.childElementCount===0,Ml=(c,m)=>{const p=m===void 0?document:m.dom;return sd(p)?[]:Ot(p.querySelectorAll(c),tt.fromDom)},Xd=(c,m)=>{const p=m===void 0?document:m.dom;return sd(p)?J.none():J.from(p.querySelector(c)).map(tt.fromDom)},Yo=(c,m)=>c.dom===m.dom,ad=(c,m)=>{const p=c.dom,b=m.dom;return p===b?!1:p.contains(b)},Nl=_r,Rl=c=>tt.fromDom(c.dom.ownerDocument),Oi=c=>nd(c)?c:Rl(c),Yd=c=>tt.fromDom(Oi(c).dom.documentElement),Pr=c=>tt.fromDom(Oi(c).dom.defaultView),$o=c=>J.from(c.dom.parentNode).map(tt.fromDom),Qd=c=>J.from(c.dom.parentElement).map(tt.fromDom),nl=(c,m)=>{const p=Kr(m)?m:oo;let b=c.dom;const x=[];for(;b.parentNode!==null&&b.parentNode!==void 0;){const O=b.parentNode,N=tt.fromDom(O);if(x.push(N),p(N)===!0)break;b=O}return x},xs=c=>J.from(c.dom.previousSibling).map(tt.fromDom),nr=c=>J.from(c.dom.nextSibling).map(tt.fromDom),Er=c=>Ot(c.dom.childNodes,tt.fromDom),Ks=(c,m)=>{const p=c.dom.childNodes;return J.from(p[m]).map(tt.fromDom)},fc=c=>Ks(c,0),vc=(c,m)=>{$o(c).each(p=>{p.dom.insertBefore(m.dom,c.dom)})},ti=(c,m)=>{nr(c).fold(()=>{$o(c).each(p=>{Do(p,m)})},p=>{vc(p,m)})},Ll=(c,m)=>{fc(c).fold(()=>{Do(c,m)},p=>{c.dom.insertBefore(m.dom,p.dom)})},Do=(c,m)=>{c.dom.appendChild(m.dom)},um=(c,m,p)=>{Ks(c,p).fold(()=>{Do(c,m)},b=>{vc(b,m)})},Fo=(c,m)=>{vc(c,m),Do(m,c)},xa=(c,m)=>{Me(m,(p,b)=>{const x=b===0?c:m[b-1];ti(x,p)})},Or=(c,m)=>{Me(m,p=>{Do(c,p)})},Hl=c=>{c.dom.textContent="",Me(Er(c),m=>{Qr(m)})},Qr=c=>{const m=c.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},bc=c=>{const m=Er(c);m.length>0&&xa(c,m),Qr(c)},cs=(c,m)=>tt.fromDom(c.dom.cloneNode(m)),mm=c=>cs(c,!1),Ss=c=>cs(c,!0),gm=(c,m)=>{const p=tt.fromTag(m),b=or(c);return fr(p,b),p},Pl=(c,m)=>{const p=gm(c,m),b=Er(Ss(c));return Or(p,b),p},Cg=(c,m)=>{const p=gm(c,m);ti(c,p);const b=Er(c);return Or(p,b),Qr(c),p},Sa=["tfoot","thead","tbody","colgroup"],rl=c=>lo(Sa,c),Jd=(c,m)=>({rows:c,columns:m}),hm=(c,m)=>({row:c,column:m}),eu=(c,m,p)=>({element:c,rowspan:m,colspan:p}),sl=(c,m,p,b)=>({element:c,rowspan:m,colspan:p,isNew:b}),tu=(c,m,p,b,x,O)=>({element:c,rowspan:m,colspan:p,row:b,column:x,isLocked:O}),ou=(c,m,p)=>({element:c,cells:m,section:p}),Jr=(c,m,p,b)=>({element:c,cells:m,section:p,isNew:b}),fn=(c,m,p)=>({element:c,isNew:m,isLocked:p}),al=(c,m,p,b)=>({element:c,cells:m,section:p,isNew:b}),nu=(c,m,p,b)=>({startRow:c,startCol:m,finishRow:p,finishCol:b}),Ti=(c,m,p)=>({element:c,colspan:m,column:p}),oi=(c,m)=>({element:c,columns:m}),xg=c=>dm(c)&&Hn(c.dom.host),Ps=Kr(Element.prototype.attachShadow)&&Kr(Node.prototype.getRootNode),Br=G(Ps),L=Ps?c=>tt.fromDom(c.dom.getRootNode()):Oi,z=c=>{const m=L(c);return xg(m)?J.some(m):J.none()},Z=c=>tt.fromDom(c.dom.host),ae=c=>{if(Br()&&Hn(c.target)){const m=tt.fromDom(c.target);if(tr(m)&&lt(m)&&c.composed&&c.composedPath){const p=c.composedPath();if(p)return Ce(p)}}return J.from(c.target)},lt=c=>Hn(c.dom.shadowRoot),_t=c=>{const m=_i(c)?c.dom.parentNode:c.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return z(tt.fromDom(m)).fold(()=>p.body.contains(m),Cn(_t,Z))},In=()=>Co(tt.fromDom(document)),Co=c=>{const m=c.dom.body;if(m==null)throw new Error("Body is not available yet");return tt.fromDom(m)},Bl=(c,m,p)=>Ko(nl(c,p),m),Ai=(c,m)=>Ko(Er(c),m),qs=(c,m)=>{let p=[];return Me(Er(c),b=>{m(b)&&(p=p.concat([b])),p=p.concat(qs(b,m))}),p},fe=(c,m,p)=>Bl(c,b=>_r(b,m),p),Bs=(c,m)=>Ai(c,p=>_r(p,m)),Xs=(c,m)=>Ml(m,c);var Ir=(c,m,p,b,x)=>c(p,b)?J.some(p):Kr(x)&&x(p)?J.none():m(p,b,x);const rr=(c,m,p)=>{let b=c.dom;const x=Kr(p)?p:oo;for(;b.parentNode;){b=b.parentNode;const O=tt.fromDom(b);if(m(O))return J.some(O);if(x(O))break}return J.none()},ln=(c,m,p)=>Ir((b,x)=>x(b),rr,c,m,p),Il=(c,m)=>{const p=b=>m(tt.fromDom(b));return B(c.dom.childNodes,p).map(tt.fromDom)},Sg=(c,m)=>{const p=b=>{for(let x=0;x<b.childNodes.length;x++){const O=tt.fromDom(b.childNodes[x]);if(m(O))return J.some(O);const N=p(b.childNodes[x]);if(N.isSome())return N}return J.none()};return p(c.dom)},So=(c,m,p)=>rr(c,b=>_r(b,m),p),yc=(c,m)=>Il(c,p=>_r(p,m)),ru=(c,m)=>Xd(m,c),Tr=(c,m,p)=>Ir((b,x)=>_r(b,x),So,c,m,p),sr=(c,m,p=Ji)=>c.exists(b=>p(b,m)),Fl=c=>{const m=[],p=b=>{m.push(b)};for(let b=0;b<c.length;b++)c[b].each(p);return m},Mv=(c,m)=>c!=null?m(c):J.none(),pm=(c,m)=>c?J.some(m):J.none(),mn=(c,m,p)=>m===""||c.length>=m.length&&c.substr(p,p+m.length)===m,ca=(c,m,p=0,b)=>{const x=c.indexOf(m,p);return x!==-1?$n(b)?!0:x+m.length<=b:!1},il=(c,m)=>mn(c,m,0),Ys=(c,m)=>mn(c,m,c.length-m.length),tn=(c=>m=>m.replace(c,""))(/^\s+|\s+$/g),su=c=>c.length>0,kg=c=>{const m=parseFloat(c);return isNaN(m)?J.none():J.some(m)},ar=c=>c.style!==void 0&&Kr(c.style.getPropertyValue),ll=(c,m,p)=>{if(!wn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",c),new Error("CSS value must be a string: "+p);ar(c)&&c.style.setProperty(m,p)},da=(c,m)=>{ar(c)&&c.style.removeProperty(m)},Lo=(c,m,p)=>{const b=c.dom;ll(b,m,p)},fm=(c,m)=>{const p=c.dom;_n(m,(b,x)=>{ll(p,x,b)})},id=(c,m)=>{const p=c.dom,b=window.getComputedStyle(p).getPropertyValue(m);return b===""&&!_t(c)?_g(p,m):b},_g=(c,m)=>ar(c)?c.style.getPropertyValue(m):"",Eg=(c,m)=>{const p=c.dom,b=_g(p,m);return J.from(b).filter(x=>x.length>0)},En=(c,m)=>{const p=c.dom;da(p,m),sr(kr(c,"style").map(tn),"")&&Ao(c,"style")},ni=(c,m)=>{const p=c.dom,b=m.dom;ar(p)&&ar(b)&&(b.style.cssText=p.style.cssText)},Nn=(c,m,p=0)=>kr(c,m).map(b=>parseInt(b,10)).getOr(p),Fa=(c,m)=>Nn(c,m,1),Di=c=>Cs("col")(c)?Nn(c,"span",1)>1:Fa(c,"colspan")>1,Fr=c=>Fa(c,"rowspan")>1,au=(c,m)=>parseInt(id(c,m),10),wc=G(10),Va=G(10),Og=(c,m)=>Cc(c,m,xe),Cc=(c,m,p)=>Pn(Er(c),b=>_r(b,m)?p(b)?[b]:[]:Cc(b,m,p)),cl=(c,m,p=oo)=>{if(p(m))return J.none();if(lo(c,jo(m)))return J.some(m);const b=x=>_r(x,"table")||p(x);return So(m,c.join(","),b)},xc=(c,m)=>cl(["td","th"],c,m),za=c=>Og(c,"th,td"),vm=c=>_r(c,"colgroup")?Bs(c,"col"):Pn(Vl(c),m=>Bs(m,"col")),Qs=(c,m)=>Tr(c,"table",m),Sc=c=>Og(c,"tr"),Vl=c=>Qs(c).fold(G([]),m=>Bs(m,"colgroup")),iu=(c,m)=>Ot(c,p=>{if(jo(p)==="colgroup"){const b=Ot(vm(p),x=>{const O=Nn(x,"span",1);return eu(x,1,O)});return ou(p,b,"colgroup")}else{const b=Ot(za(p),x=>{const O=Nn(x,"rowspan",1),N=Nn(x,"colspan",1);return eu(x,O,N)});return ou(p,b,m(p))}}),bm=c=>$o(c).map(m=>{const p=jo(m);return rl(p)?p:"tbody"}).getOr("tbody"),ld=c=>{const m=Sc(c),p=[...Vl(c),...m];return iu(p,bm)},t1=(c,m)=>iu(c,()=>m),lu=c=>{let m=!1,p;return(...b)=>(m||(m=!0,p=c.apply(null,b)),p)},o1=(c,m,p,b)=>{const x=c.isiOS()&&/ipad/i.test(p)===!0,O=c.isiOS()&&!x,N=c.isiOS()||c.isAndroid(),F=N||b("(pointer:coarse)"),X=x||!O&&N&&b("(min-device-width:768px)"),ie=O||N&&!X,we=m.isSafari()&&c.isiOS()&&/safari/i.test(p)===!1,Se=!ie&&!X&&!we;return{isiPad:G(x),isiPhone:G(O),isTablet:G(X),isPhone:G(ie),isTouch:G(F),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:G(we),isDesktop:G(Se)}},kc=(c,m)=>{for(let p=0;p<c.length;p++){const b=c[p];if(b.test(m))return b}},K=(c,m)=>{const p=kc(c,m);if(!p)return{major:0,minor:0};const b=x=>Number(m.replace(p,"$"+x));return cu(b(1),b(2))},tp=(c,m)=>{const p=String(m).toLowerCase();return c.length===0?Za():K(c,p)},Za=()=>cu(0,0),cu=(c,m)=>({major:c,minor:m}),cd={nu:cu,detect:tp,unknown:Za},n1=(c,m)=>hr(m.brands,p=>{const b=p.brand.toLowerCase();return B(c,x=>{var O;return b===((O=x.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(x=>({current:x.name,version:cd.nu(parseInt(p.version,10),0)}))}),To=(c,m)=>{const p=String(m).toLowerCase();return B(c,b=>b.search(p))},zl=(c,m)=>To(c,m).map(p=>{const b=cd.detect(p.versionRegexes,m);return{current:p.name,version:b}}),op=(c,m)=>To(c,m).map(p=>{const b=cd.detect(p.versionRegexes,m);return{current:p.name,version:b}}),Mi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ds=c=>m=>ca(m,c),du=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:c=>ca(c,"edge/")&&ca(c,"chrome")&&ca(c,"safari")&&ca(c,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mi],search:c=>ca(c,"chrome")&&!ca(c,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:c=>ca(c,"msie")||ca(c,"trident")},{name:"Opera",versionRegexes:[Mi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ds("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ds("firefox")},{name:"Safari",versionRegexes:[Mi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:c=>(ca(c,"safari")||ca(c,"mobile/"))&&ca(c,"applewebkit")}],Ua=[{name:"Windows",search:ds("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:c=>ca(c,"iphone")||ca(c,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ds("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ds("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ds("linux"),versionRegexes:[]},{name:"Solaris",search:ds("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ds("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ds("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],uu={browsers:G(du),oses:G(Ua)},ym="Edge",np="Chromium",_c="IE",mu="Opera",Zl="Firefox",rp="Safari",us=()=>ks({current:void 0,version:cd.unknown()}),ks=c=>{const m=c.current,p=c.version,b=x=>()=>m===x;return{current:m,version:p,isEdge:b(ym),isChromium:b(np),isIE:b(_c),isOpera:b(mu),isFirefox:b(Zl),isSafari:b(rp)}},Tg={unknown:us,nu:ks,edge:G(ym),chromium:G(np),ie:G(_c),opera:G(mu),firefox:G(Zl),safari:G(rp)},wm="Windows",gu="iOS",dl="Android",ka="Linux",Cm="macOS",xm="Solaris",sp="FreeBSD",ul="ChromeOS",Sm=()=>Ag({current:void 0,version:cd.unknown()}),Ag=c=>{const m=c.current,p=c.version,b=x=>()=>m===x;return{current:m,version:p,isWindows:b(wm),isiOS:b(gu),isAndroid:b(dl),isMacOS:b(Cm),isLinux:b(ka),isSolaris:b(xm),isFreeBSD:b(sp),isChromeOS:b(ul)}},Dg={unknown:Sm,nu:Ag,windows:G(wm),ios:G(gu),android:G(dl),linux:G(ka),macos:G(Cm),solaris:G(xm),freebsd:G(sp),chromeos:G(ul)},Nv={detect:(c,m,p)=>{const b=uu.browsers(),x=uu.oses(),O=m.bind(X=>n1(b,X)).orThunk(()=>zl(b,c)).fold(Tg.unknown,Tg.nu),N=op(x,c).fold(Dg.unknown,Dg.nu),F=o1(N,O,c,p);return{browser:O,os:N,deviceType:F}}},Mg=c=>window.matchMedia(c).matches;let Rv=lu(()=>Nv.detect(navigator.userAgent,J.from(navigator.userAgentData),Mg));const dd=()=>Rv(),ir=(c,m)=>{const p=(N,F)=>{if(!hn(F)&&!F.match(/^[0-9]+$/))throw new Error(c+".set accepts only positive integer values. Value was "+F);const X=N.dom;ar(X)&&(X.style[c]=F+"px")},b=N=>{const F=m(N);if(F<=0||F===null){const X=id(N,c);return parseFloat(X)||0}return F},x=b,O=(N,F)=>Ne(F,(X,ie)=>{const we=id(N,ie),Se=we===void 0?0:parseInt(we,10);return isNaN(Se)?X:X+Se},0);return{set:p,get:b,getOuter:x,aggregate:O,max:(N,F,X)=>{const ie=O(N,X);return F>ie?F-ie:0}}},Rn=(c,m)=>kg(c).getOr(m),_s=(c,m,p)=>Rn(id(c,m),p),km=(c,m,p,b)=>{const x=_s(c,`padding-${p}`,0),O=_s(c,`padding-${b}`,0),N=_s(c,`border-${p}-width`,0),F=_s(c,`border-${b}-width`,0);return m-x-O-N-F},r1=(c,m)=>{const p=c.dom,b=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?b:km(c,b,"left","right")},Is=c=>_s(c,"height",c.dom.offsetHeight),_m=c=>_s(c,"width",c.dom.offsetWidth),ud=c=>r1(c,"content-box"),ml=ir("width",c=>c.dom.offsetWidth),Gt=c=>ml.get(c),Vr=c=>ml.getOuter(c),Em=ud,Om=_m,Tm=(c,m,p)=>{const b=c.cells,x=b.slice(0,m),O=b.slice(m),N=x.concat(p).concat(O);return Am(c,N)},s1=(c,m,p)=>Tm(c,m,[p]),hu=(c,m,p)=>{const b=c.cells;b[m]=p},Am=(c,m)=>al(c.element,m,c.section,c.isNew),Ni=(c,m)=>{const p=c.cells,b=Ot(p,m);return al(c.element,b,c.section,c.isNew)},S=(c,m)=>c.cells[m],A=(c,m)=>S(c,m).element,P=c=>c.cells.length,q=c=>{const m=ls(c,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},ee=(c,m,p)=>{const b=Ot(c.cells,p);return al(m(c.element),b,c.section,!0)},He="data-snooker-locked-cols",xt=c=>kr(c,He).bind(m=>J.from(m.match(/\d+/g))).map(m=>Ut(m,xe)),Rt=c=>{const m=Ne(q(c).rows,(b,x)=>(Me(x.cells,(O,N)=>{O.isLocked&&(b[N]=!0)}),b),{}),p=Kn(m,(b,x)=>parseInt(x,10));return Wo(p)},ot=(c,m)=>c+","+m,Ft=(c,m,p)=>J.from(c.access[ot(m,p)]),Zo=(c,m,p)=>{const b=Fn(c,x=>p(m,x.element));return b.length>0?J.some(b[0]):J.none()},Fn=(c,m)=>{const p=Pn(c.all,b=>b.cells);return Ko(p,m)},Es=c=>{const m={};let p=0;return Me(c.cells,b=>{const x=b.colspan;go(x,O=>{const N=p+O;m[N]=Ti(b.element,x,N)}),p+=x}),m},Ho=c=>{const m={},p=[],b=Ce(c).map(Se=>Se.element).bind(Qs).bind(xt).getOr({});let x=0,O=0,N=0;const{pass:F,fail:X}=ls(c,Se=>Se.section==="colgroup");Me(X,Se=>{const ut=[];Me(Se.cells,Ke=>{let We=0;for(;m[ot(N,We)]!==void 0;)We++;const Dt=an(b,We.toString()),it=tu(Ke.element,Ke.rowspan,Ke.colspan,N,We,Dt);for(let Zt=0;Zt<Ke.colspan;Zt++)for(let Qt=0;Qt<Ke.rowspan;Qt++){const Qo=N+Qt,ya=We+Zt,ps=ot(Qo,ya);m[ps]=it,O=Math.max(O,ya+1)}ut.push(it)}),x++,p.push(ou(Se.element,ut,Se.section)),N++});const{columns:ie,colgroups:we}=el(F).map(Se=>{const ut=Es(Se);return{colgroups:[oi(Se.element,dn(ut))],columns:ut}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Jd(x,O),access:m,all:p,columns:ie,colgroups:we}},no={fromTable:c=>{const m=ld(c);return Ho(m)},generate:Ho,getAt:Ft,findItem:Zo,filterItems:Fn,justCells:c=>Pn(c.all,m=>m.cells),justColumns:c=>dn(c.columns),hasColumns:c=>kt(c.columns).length>0,getColumnAt:(c,m)=>J.from(c.columns[m])},Lv=(c,m=xe)=>{const p=c.grid,b=go(p.columns,Nt),x=go(p.rows,Nt);return Ot(b,O=>a1(()=>Pn(x,N=>no.getAt(c,N,O).filter(F=>F.column===O).toArray()),N=>N.colspan===1&&m(N.element),()=>no.getAt(c,0,O)))},a1=(c,m,p)=>{const b=c();return B(b,m).orThunk(()=>J.from(b[0]).orThunk(p)).map(x=>x.element)},i1=c=>{const m=c.grid,p=go(m.rows,Nt),b=go(m.columns,Nt);return Ot(p,x=>a1(()=>Pn(b,O=>no.getAt(c,x,O).filter(N=>N.row===x).fold(G([]),N=>[N])),O=>O.rowspan===1,()=>no.getAt(c,x,0)))},ap=(c,m)=>{if(m<0||m>=c.length-1)return J.none();const p=c[m].fold(()=>{const x=pn(c.slice(0,m));return hr(x,(O,N)=>O.map(F=>({value:F,delta:N+1})))},x=>J.some({value:x,delta:0})),b=c[m+1].fold(()=>{const x=c.slice(m+1);return hr(x,(O,N)=>O.map(F=>({value:F,delta:N+1})))},x=>J.some({value:x,delta:1}));return p.bind(x=>b.map(O=>{const N=O.delta+x.delta;return Math.abs(O.value-x.value)/N}))},l1=(c,m)=>p=>W4(p)==="rtl"?m:c,W4=c=>id(c,"direction")==="rtl"?"rtl":"ltr",Ng=ir("height",c=>{const m=c.dom;return _t(c)?m.getBoundingClientRect().height:m.offsetHeight}),Hv=c=>Ng.get(c),T2=c=>Ng.getOuter(c),j4=Is,A2=(c,m)=>({left:c,top:m,translate:(p,b)=>A2(c+p,m+b)}),Ec=A2,Ul=c=>{const m=c.getBoundingClientRect();return Ec(m.left,m.top)},ip=(c,m)=>c!==void 0?c:m!==void 0?m:0,pu=c=>{const m=c.dom.ownerDocument,p=m.body,b=m.defaultView,x=m.documentElement;if(p===c.dom)return Ec(p.offsetLeft,p.offsetTop);const O=ip(b==null?void 0:b.pageYOffset,x.scrollTop),N=ip(b==null?void 0:b.pageXOffset,x.scrollLeft),F=ip(x.clientTop,p.clientTop),X=ip(x.clientLeft,p.clientLeft);return D2(c).translate(N-X,O-F)},D2=c=>{const m=c.dom,p=m.ownerDocument.body;return p===m?Ec(p.offsetLeft,p.offsetTop):_t(c)?Ul(m):Ec(0,0)},c1=(c,m)=>({row:c,y:m}),d1=(c,m)=>({col:c,x:m}),Pv=c=>pu(c).left+Vr(c),Bv=c=>pu(c).left,Iv=(c,m)=>d1(c,Bv(m)),Fv=(c,m)=>d1(c,Pv(m)),ua=c=>pu(c).top,At=(c,m)=>c1(c,ua(m)),md=(c,m)=>c1(c,ua(m)+T2(m)),zr=(c,m,p)=>{if(p.length===0)return[];const b=Ot(p.slice(1),(O,N)=>O.map(F=>c(N,F))),x=p[p.length-1].map(O=>m(p.length-1,O));return b.concat([x])},M2=c=>-c,Ar={delta:Nt,positions:c=>zr(At,md,c),edge:ua},Wl=l1({delta:Nt,edge:Bv,positions:c=>zr(Iv,Fv,c)},{delta:M2,edge:Pv,positions:c=>zr(Fv,Iv,c)}),ma={delta:(c,m)=>Wl(m).delta(c,m),positions:(c,m)=>Wl(m).positions(c,m),edge:c=>Wl(c).edge(c)},gt={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},fu=(()=>{const c="[0-9]+",m="[eE]"+("[+-]?"+c),p="\\.",b=O=>`(?:${O})?`,x=`[+-]?(?:${["Infinity",c+p+b(c)+b(m),p+c+b(m),c+b(m)].join("|")})`;return new RegExp(`^(${x})(.*)$`)})(),Sn=(c,m)=>Be(m,p=>Be(gt[p],b=>c===b)),vu=(c,m)=>J.from(fu.exec(c)).bind(p=>{const b=Number(p[1]),x=p[2];return Sn(x,m)?J.some({value:b,unit:x}):J.none()}),lp=/(\d+(\.\d+)?)%/,N2=/(\d+(\.\d+)?)px|em/,Dm=Cs("col"),R2=(c,m,p)=>{const b=Qd(c).getOrThunk(()=>Co(Rl(c)));return m(c)/p(b)*100},Wa=(c,m)=>{Lo(c,"width",m+"px")},Vv=(c,m)=>{Lo(c,"width",m+"%")},Oc=(c,m)=>{Lo(c,"height",m+"px")},Ve=c=>j4(c)+"px",$4=(c,m,p,b)=>{const x=Qs(c).map(O=>{const N=p(O);return Math.floor(m/100*N)}).getOr(m);return b(c,x),x},Vn=(c,m,p,b)=>{const x=parseFloat(c);return Ys(c,"%")&&jo(m)!=="table"?$4(m,x,p,b):x},Js=c=>{const m=Ve(c);return m?Vn(m,c,Hv,Oc):Hv(c)},Os=(c,m,p)=>{const b=p(c),x=Fa(c,m);return b/x},gd=(c,m)=>Eg(c,m).orThunk(()=>kr(c,m).map(p=>p+"px")),fo=c=>gd(c,"width"),zv=c=>gd(c,"height"),On=c=>R2(c,Gt,Em),po=c=>Dm(c)?Gt(c):Om(c),Mm=c=>Os(c,"rowspan",Js),Re=c=>fo(c).bind(m=>vu(m,["fixed","relative","empty"])),Dr=(c,m,p)=>{Lo(c,"width",m+p)},G4=c=>Gt(c)+"px",lr=c=>R2(c,Gt,Em)+"%",hd=c=>fo(c).exists(m=>lp.test(m)),Rg=c=>fo(c).exists(m=>N2.test(m)),vn=c=>fo(c).isNone(),Zv=G(lp),bu=Cs("col"),u1=c=>fo(c).getOrThunk(()=>po(c)+"px"),ga=c=>zv(c).getOrThunk(()=>Mm(c)+"px"),_o=c=>Ot(no.justColumns(c),m=>J.from(m.element)),Tc=c=>{const m=dd().browser,p=m.isChromium()||m.isFirefox();return bu(c)?p:!0},Nm=(c,m,p,b,x,O)=>c.filter(b).fold(()=>O(ap(p,m)),N=>x(N)),Fs=(c,m,p,b)=>{const x=Lv(c),O=no.hasColumns(c)?_o(c):x,N=[J.some(ma.edge(m))].concat(Ot(ma.positions(x,m),X=>X.map(ie=>ie.x))),F=re(Di);return Ot(O,(X,ie)=>Nm(X,ie,N,F,we=>{if(Tc(we))return p(we);{const Se=Mv(x[ie],Nt);return Nm(Se,ie,N,F,ut=>b(J.some(Gt(ut))),b)}},b))},Uv=c=>c.map(m=>m+"px").getOr(""),Rm=(c,m)=>Fs(c,m,u1,Uv),L2=(c,m,p)=>Fs(c,m,On,b=>b.fold(()=>p.minCellWidth(),x=>x/p.pixelWidth()*100)),_a=(c,m,p)=>Fs(c,m,po,b=>b.getOrThunk(p.minCellWidth)),H2=(c,m,p,b,x)=>{const O=i1(c),N=[J.some(p.edge(m))].concat(Ot(p.positions(O,m),F=>F.map(X=>X.y)));return Ot(O,(F,X)=>Nm(F,X,N,re(Fr),b,x))},ge=(c,m,p)=>H2(c,m,p,Mm,b=>b.getOrThunk(Va)),Ri=(c,m,p)=>H2(c,m,p,ga,Uv),Li=(c,m)=>()=>_t(c)?m(c):parseFloat(Eg(c,"width").getOr("0")),es=c=>{const m=Li(c,Gt),p=G(0);return{width:m,pixelWidth:m,getWidths:(b,x)=>_a(b,c,x),getCellDelta:p,singleColumnWidth:G([0]),minCellWidth:p,setElementWidth:vt,adjustTableWidth:vt,isRelative:!0,label:"none"}},jl=c=>{const m=Li(c,b=>parseFloat(lr(b))),p=Li(c,Gt);return{width:m,pixelWidth:p,getWidths:(b,x)=>L2(b,c,x),getCellDelta:b=>b/p()*100,singleColumnWidth:(b,x)=>[100-b],minCellWidth:()=>wc()/p()*100,setElementWidth:Vv,adjustTableWidth:b=>{const x=m(),O=b/100*x,N=x+O;Vv(c,N)},isRelative:!0,label:"percent"}},Zr=c=>{const m=Li(c,Gt);return{width:m,pixelWidth:m,getWidths:(p,b)=>_a(p,c,b),getCellDelta:Nt,singleColumnWidth:(p,b)=>[Math.max(wc(),p+b)-p],minCellWidth:wc,setElementWidth:Wa,adjustTableWidth:p=>{const b=m()+p;Wa(c,b)},isRelative:!1,label:"pixel"}},zn=(c,m)=>Zv().exec(m)!==null?jl(c):Zr(c),Lm={getTableSize:c=>fo(c).fold(()=>es(c),m=>zn(c,m)),pixelSize:Zr,percentageSize:jl,noneSize:es},pd=(c,m,p,b,x,O)=>({minRow:c,minCol:m,maxRow:p,maxCol:b,allCells:x,selectedCells:O}),Hm=(c,m)=>{const p=c.grid.columns;let b=c.grid.rows,x=p,O=0,N=0;const F=[],X=[];return _n(c.access,ie=>{if(F.push(ie),m(ie)){X.push(ie);const we=ie.row,Se=we+ie.rowspan-1,ut=ie.column,Ke=ut+ie.colspan-1;we<b?b=we:Se>O&&(O=Se),ut<x?x=ut:Ke>N&&(N=Ke)}}),pd(b,x,O,N,F,X)},Lt=(c,m,p)=>{const b=c[p].element,x=tt.fromTag("td");Do(x,tt.fromTag("br")),(m?Do:Ll)(b,x)},Ea=(c,m,p,b)=>{const x=Ko(c,F=>F.section!=="colgroup"),O=m.grid.columns,N=m.grid.rows;for(let F=0;F<N;F++){let X=!1;for(let ie=0;ie<O;ie++)F<p.minRow||F>p.maxRow||ie<p.minCol||ie>p.maxCol||(no.getAt(m,F,ie).filter(b).isNone()?Lt(x,X,F):X=!0)}},m1=(c,m,p,b)=>{_n(p.columns,O=>{(O.column<m.minCol||O.column>m.maxCol)&&Qr(O.element)});const x=Ko(Og(c,"tr"),O=>O.dom.childElementCount===0);Me(x,Qr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Me(Og(c,"th,td"),O=>{Ao(O,"rowspan"),Ao(O,"colspan")}),Ao(c,He),Ao(c,"data-snooker-col-series"),Lm.getTableSize(c).adjustTableWidth(b)},K4=(c,m,p,b)=>{if(b.minCol===0&&m.grid.columns===b.maxCol+1)return 0;const x=_a(m,c,p),O=Ne(x,(F,X)=>F+X,0),N=Ne(x.slice(b.minCol,b.maxCol+1),(F,X)=>F+X,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(N)},q4=(c,m)=>{const p=ut=>_r(ut.element,m),b=Ss(c),x=ld(b),O=Lm.getTableSize(c),N=no.generate(x),F=Hm(N,p),X="th:not("+m+"),td:not("+m+")",ie=Cc(b,"th,td",ut=>_r(ut,X));Me(ie,Qr),Ea(x,N,F,p);const we=no.fromTable(c),Se=K4(c,we,O,F);return m1(b,F,N,Se),b},X4=" ",Wv=((c,m)=>{const p=x=>{if(!c(x))throw new Error("Can only get "+m+" value of a "+m+" node");return b(x).getOr("")},b=x=>c(x)?J.from(x.dom.nodeValue):J.none();return{get:p,getOption:b,set:(x,O)=>{if(!c(x))throw new Error("Can only set raw "+m+" value of a "+m+" node");x.dom.nodeValue=O}}})(_i,"text"),Hi=c=>Wv.get(c),ri=c=>Wv.getOption(c),Y4=(c,m)=>Wv.set(c,m),qn=c=>jo(c)==="img"?1:ri(c).fold(()=>Er(c).length,m=>m.length),g1=c=>ri(c).filter(m=>m.trim().length!==0||m.indexOf(X4)>-1).isSome(),gl=c=>It(c)&&Hs(c,"contenteditable")==="false",P2=["img","br"],Ac=c=>g1(c)||lo(P2,jo(c))||gl(c),yu=c=>Sg(c,Ac),fd=c=>ea(c,Ac),ea=(c,m)=>{const p=b=>{const x=Er(b);for(let O=x.length-1;O>=0;O--){const N=x[O];if(m(N))return J.some(N);const F=p(N);if(F.isSome())return F}return J.none()};return p(c)},B2={scope:["row","col"]},jv=c=>()=>{const m=tt.fromTag("td",c.dom);return Do(m,tt.fromTag("br",c.dom)),m},cp=c=>()=>tt.fromTag("col",c.dom),h1=c=>()=>tt.fromTag("colgroup",c.dom),ms=c=>()=>tt.fromTag("tr",c.dom),hl=(c,m,p)=>{const b=Pl(c,m);return _n(p,(x,O)=>{x===null?Ao(b,O):Mn(b,O,x)}),b},wu=c=>c,Pm=(c,m,p)=>yu(c).map(b=>{const x=p.join(","),O=fe(b,x,N=>Yo(N,c));return xr(O,(N,F)=>{const X=mm(F);return Do(N,X),X},m)}).getOr(m),p1=(c,m)=>{_n(B2,(p,b)=>kr(c,b).filter(x=>lo(p,x)).each(x=>Mn(m,b,x)))},Oa=(c,m,p)=>{const b=(O,N)=>{ni(O.element,N),En(N,"height"),O.colspan!==1&&En(N,"width")},x=O=>{const N=tt.fromTag(jo(O.element),m.dom),F=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),X=F.length>0?Pm(O.element,N,F):N;return Do(X,tt.fromTag("br")),b(O,N),p1(O.element,N),c(O.element,N),N};return{col:O=>{const N=tt.fromTag(jo(O.element),m.dom);return b(O,N),c(O.element,N),N},colgroup:h1(m),row:ms(m),cell:x,replace:hl,colGap:cp(m),gap:jv(m)}},Lg=c=>({col:cp(c),colgroup:h1(c),row:ms(c),cell:jv(c),replace:wu,colGap:cp(c),gap:jv(c)}),$v=(c,m)=>{const p=(m||document).createElement("div");return p.innerHTML=c,Er(tt.fromDom(p))},Gv=c=>Ot(c,tt.fromDom),ja=c=>m=>m.options.get(c),Dc="100%",f1=c=>{var m;const p=c.dom,b=(m=p.getParent(c.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:c.getBody();return Em(tt.fromDom(b))+"px"},$l=(c,m)=>Fm(c)||!Cu(c)?m:Pi(c)?{...m,width:f1(c)}:{...m,width:Dc},Q4=(c,m)=>Fm(c)||Cu(c)?m:Pi(c)?{...m,width:f1(c)}:{...m,width:Dc},ta=c=>{const m=c.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const b=lo(["section","cells","sectionCells","auto"],p);return b?{value:p,valid:b}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const b=lo(["preservetable","resizetable"],p);return b?{value:p,valid:b}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Bm=c=>J.from(c.options.get("table_clone_elements")),vd=c=>{const m=c.options.get("object_resizing");return lo(m.split(","),"table")},I2=ja("table_header_type"),Im=ja("table_column_resizing"),F2=c=>Im(c)==="preservetable",Kv=c=>Im(c)==="resizetable",Zn=ja("table_sizing_mode"),Gl=c=>Zn(c)==="relative",Pi=c=>Zn(c)==="fixed",Fm=c=>Zn(c)==="responsive",v1=ja("table_resize_bars"),Cu=ja("table_style_by_css"),$a=ja("table_merge_content_on_paste"),dp=c=>{const m=c.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Q4(c,p)},up=c=>{const m=c.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:$l(c,p)},J4=ja("table_use_colgroups"),xu=c=>Tr(c,"[contenteditable]"),Vm=(c,m=!1)=>_t(c)?c.dom.isContentEditable:xu(c).fold(G(m),p=>mp(p)==="true"),mp=c=>c.dom.contentEditable,b1=c=>tt.fromDom(c.getBody()),Hg=c=>m=>Yo(m,b1(c)),bn=c=>{Ao(c,"data-mce-style");const m=p=>Ao(p,"data-mce-style");Me(za(c),m),Me(vm(c),m),Me(Sc(c),m)},Mc=c=>tt.fromDom(c.selection.getStart()),Kl=c=>c.getBoundingClientRect().width,bd=c=>c.getBoundingClientRect().height,Su=(c,m)=>{const p=c.dom.getStyle(m,"width")||c.dom.getAttrib(m,"width");return J.from(p).filter(su)},qv=c=>/^(\d+(\.\d+)?)%$/.test(c),gp=c=>/^(\d+(\.\d+)?)px$/.test(c),hp=c=>ln(c,Cs("table")).exists(Vm),V2=(c,m)=>{const p=m.column,b=m.column+m.colspan-1,x=m.row,O=m.row+m.rowspan-1;return p<=c.finishCol&&b>=c.startCol&&x<=c.finishRow&&O>=c.startRow},z2=(c,m)=>m.column>=c.startCol&&m.column+m.colspan-1<=c.finishCol&&m.row>=c.startRow&&m.row+m.rowspan-1<=c.finishRow,y1=(c,m)=>{let p=!0;const b=ko(z2,m);for(let x=m.startRow;x<=m.finishRow;x++)for(let O=m.startCol;O<=m.finishCol;O++)p=p&&no.getAt(c,x,O).exists(b);return p?J.some(m):J.none()},Z2=(c,m)=>nu(Math.min(c.row,m.row),Math.min(c.column,m.column),Math.max(c.row+c.rowspan-1,m.row+m.rowspan-1),Math.max(c.column+c.colspan-1,m.column+m.colspan-1)),w1=(c,m,p)=>{const b=no.findItem(c,m,Yo),x=no.findItem(c,p,Yo);return b.bind(O=>x.map(N=>Z2(O,N)))},vo=(c,m,p)=>w1(c,m,p).bind(b=>y1(c,b)),wt=(c,m,p,b)=>no.findItem(c,m,Yo).bind(x=>{const O=p>0?x.row+x.rowspan-1:x.row,N=b>0?x.column+x.colspan-1:x.column;return no.getAt(c,O+p,N+b).map(F=>F.element)}),Nc=(c,m,p)=>w1(c,m,p).map(b=>{const x=no.filterItems(c,ko(V2,b));return Ot(x,O=>O.element)}),Rc=(c,m)=>{const p=(b,x)=>ad(x,b);return no.findItem(c,m,p).map(b=>b.element)},Xv=(c,m,p)=>Qs(c).bind(b=>{const x=pp(b);return wt(x,c,m,p)}),Yv=(c,m,p)=>{const b=pp(c);return Nc(b,m,p)},C1=(c,m,p,b,x)=>{const O=pp(c),N=Yo(c,p)?J.some(m):Rc(O,m),F=Yo(c,x)?J.some(b):Rc(O,b);return N.bind(X=>F.bind(ie=>Nc(O,X,ie)))},on=(c,m,p)=>{const b=pp(c);return vo(b,m,p)},pp=no.fromTable;var U2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],fp=()=>{const c=ie=>tt.fromDom(ie.dom.cloneNode(!1)),m=ie=>Oi(ie).dom,p=ie=>tr(ie)?jo(ie)==="body"?!0:lo(U2,jo(ie)):!1,b=ie=>tr(ie)?lo(["br","img","hr","input"],jo(ie)):!1,x=ie=>tr(ie)&&Hs(ie,"contenteditable")==="false",O=(ie,we)=>ie.dom.compareDocumentPosition(we.dom),N=(ie,we)=>{const Se=or(ie);fr(we,Se)},F=ie=>{const we=jo(ie);return lo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],we)},X=ie=>tr(ie)?kr(ie,"lang"):J.none();return{up:G({selector:So,closest:Tr,predicate:rr,all:nl}),down:G({selector:Xs,predicate:qs}),styles:G({get:id,getRaw:Eg,set:Lo,remove:En}),attrs:G({get:Hs,set:Mn,remove:Ao,copyTo:N}),insert:G({before:vc,after:ti,afterAll:xa,append:Do,appendAll:Or,prepend:Ll,wrap:Fo}),remove:G({unwrap:bc,remove:Qr}),create:G({nu:tt.fromTag,clone:c,text:tt.fromText}),query:G({comparePosition:O,prevSibling:xs,nextSibling:nr}),property:G({children:Er,name:jo,parent:$o,document:m,isText:_i,isComment:Xo,isElement:tr,isSpecial:F,getLanguage:X,getText:Hi,setText:Y4,isBoundary:p,isEmptyTag:b,isNonEditable:x}),eq:Yo,is:Nl}};const Te=(c,m,p,b)=>{const x=p[0],O=p.slice(1);return b(c,m,x,O)},x1=(c,m,p)=>p.length>0?Te(c,m,p,ek):J.none(),ek=(c,m,p,b)=>{const x=m(c,p);return xr(b,(O,N)=>{const F=m(c,N);return vp(c,O,F)},x)},vp=(c,m,p)=>m.bind(b=>p.filter(ko(c.eq,b))),tk=(c,m)=>ko(c.eq,m),zm=(c,m,p,b=oo)=>{const x=[m].concat(c.up().all(m)),O=[p].concat(c.up().all(p)),N=we=>ys(we,b).fold(()=>we,Se=>we.slice(0,Se+1)),F=N(x),X=N(O),ie=B(F,we=>Be(X,tk(c,we)));return{firstpath:F,secondpath:X,shared:ie}},Qv=x1,Zm=zm,W2=fp(),Lc=(c,m)=>Qv(W2,(p,b)=>c(b),m),yn=(c,m,p)=>Zm(W2,c,m,p),Ga=c=>So(c,"table"),Um=(c,m,p)=>{const b=x=>O=>p!==void 0&&p(O)||Yo(O,x);return Yo(c,m)?J.some({boxes:J.some([c]),start:c,finish:m}):Ga(c).bind(x=>Ga(m).bind(O=>{if(Yo(x,O))return J.some({boxes:Yv(x,c,m),start:c,finish:m});if(ad(x,O)){const N=fe(m,"td,th",b(x)),F=N.length>0?N[N.length-1]:m;return J.some({boxes:C1(x,c,x,m,O),start:c,finish:F})}else if(ad(O,x)){const N=fe(c,"td,th",b(O)),F=N.length>0?N[N.length-1]:c;return J.some({boxes:C1(O,c,x,m,O),start:c,finish:F})}else return yn(c,m).shared.bind(N=>Tr(N,"table",p).bind(F=>{const X=fe(m,"td,th",b(F)),ie=X.length>0?X[X.length-1]:m,we=fe(c,"td,th",b(F)),Se=we.length>0?we[we.length-1]:c;return J.some({boxes:C1(F,c,x,m,O),start:Se,finish:ie})}))}))},ql=(c,m)=>{const p=Xs(c,m);return p.length>0?J.some(p):J.none()},ok=(c,m)=>B(c,p=>_r(p,m)),S1=(c,m,p)=>ru(c,m).bind(b=>ru(c,p).bind(x=>Lc(Ga,[b,x]).map(O=>({first:b,last:x,table:O})))),pl=(c,m)=>So(c,"table").bind(p=>ru(p,m).bind(b=>Um(b,c).bind(x=>x.boxes.map(O=>({boxes:O,start:x.start,finish:x.finish}))))),nk=(c,m,p,b,x)=>ok(c,x).bind(O=>Xv(O,m,p).bind(N=>pl(N,b))),j2=(c,m)=>ql(c,m),$2=(c,m,p)=>S1(c,m,p).bind(b=>{const x=X=>Yo(c,X),O="thead,tfoot,tbody,table",N=So(b.first,O,x),F=So(b.last,O,x);return N.bind(X=>F.bind(ie=>Yo(X,ie)?on(b.table,b.first,b.last):J.none()))}),k1=Nt,yd=c=>{const m=(b,x)=>kr(b,x).exists(O=>parseInt(O,10)>1),p=b=>m(b,"rowspan")||m(b,"colspan");return c.length>0&&Io(c,p)?J.some(c):J.none()},rk=(c,m,p)=>m.length<=1?J.none():$2(c,p.firstSelectedSelector,p.lastSelectedSelector).map(b=>({bounds:b,cells:m})),bp="data-mce-selected",Jv="td["+bp+"],th["+bp+"]",wd="["+bp+"]",Qe="data-mce-first-selected",G2="td["+Qe+"],th["+Qe+"]",eb="data-mce-last-selected",sk="td["+eb+"],th["+eb+"]",K2=wd,Wm={selected:bp,selectedSelector:Jv,firstSelected:Qe,firstSelectedSelector:G2,lastSelected:eb,lastSelectedSelector:sk},Pg=(c,m,p)=>({element:p,mergable:rk(m,c,Wm),unmergable:yd(c),selection:k1(c)}),yp=(c,m,p)=>({element:c,clipboard:m,generators:p}),Bg=(c,m,p,b)=>({selection:k1(c),clipboard:p,generators:b}),ak=c=>Qs(c).bind(m=>j2(m,Wm.firstSelectedSelector)).fold(G(c),m=>m[0]),ku=c=>(m,p)=>{const b=jo(m),x=b==="col"||b==="colgroup"?ak(m):m;return Tr(x,c,p)},wp=ku("th,td,caption"),Bi=ku("th,td"),si=c=>Gv(c.model.table.getSelectedCells()),_1=c=>Ko(si(c),m=>_r(m,Wm.selectedSelector)),q2=c=>Qs(c[0]).map(m=>{const p=q4(m,K2);return bn(p),[p]}),Cp=(c,m)=>Ot(m,p=>c.selection.serializer.serialize(p.dom,{})).join(""),E1=c=>Ot(c,m=>m.dom.innerText).join(""),_u=(c,m)=>{c.on("BeforeGetContent",p=>{const b=x=>{p.preventDefault(),q2(x).each(O=>{p.content=p.format==="text"?E1(O):Cp(c,O)})};if(p.selection===!0){const x=_1(c);x.length>=1&&b(x)}}),c.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const b=si(c);Ce(b).each(x=>{Qs(x).each(O=>{const N=Ko($v(p.content),X=>jo(X)!=="meta"),F=Cs("table");if($a(c)&&N.length===1&&F(N[0])){p.preventDefault();const X=tt.fromDom(c.getDoc()),ie=Lg(X),we=yp(x,N[0],ie);m.pasteCells(O,we).each(()=>{c.focus()})}})})}})},Eu=(c,m)=>({element:c,offset:m}),xp=(c,m,p)=>c.property().isText(m)&&c.property().getText(m).trim().length===0||c.property().isComment(m)?p(m).bind(b=>xp(c,b,p).orThunk(()=>J.some(b))):J.none(),fl=(c,m)=>c.property().isText(m)?c.property().getText(m).length:c.property().children(m).length,Ka=(c,m)=>{const p=xp(c,m,c.query().prevSibling).getOr(m);if(c.property().isText(p))return Eu(p,fl(c,p));const b=c.property().children(p);return b.length>0?Ka(c,b[b.length-1]):Eu(p,fl(c,p))},ik=Ka,X2=fp(),tb=c=>ik(X2,c),Y2=(c,m)=>{Di(c)||Re(c).each(p=>{const b=p.value/2;Dr(c,b,p.unit),Dr(m,b,p.unit)})},ai=c=>Ot(c,G(0)),O1=(c,m,p,b,x)=>x(c.slice(0,m)).concat(b).concat(x(c.slice(p))),Sp=c=>(m,p,b,x)=>{if(c(b)){const O=Math.max(x,m[p]-Math.abs(b)),N=Math.abs(O-m[p]);return b>=0?N:-N}else return b},T1=Sp(c=>c<0),kp=Sp(xe),Q2=()=>{const c=(b,x,O,N,F)=>{const X=T1(b,x,N,F);return O1(b,x,O+1,[X,0],ai)},m=(b,x,O,N)=>{const F=(100+O)/100,X=Math.max(N,(b[x]+O)/F);return Ot(b,(ie,we)=>(we===x?X:ie/F)-ie)},p=(b,x,O,N,F,X)=>X?m(b,x,N,F):c(b,x,O,N,F);return{resizeTable:(b,x)=>b(x),clampTableDelta:T1,calcLeftEdgeDeltas:p,calcMiddleDeltas:(b,x,O,N,F,X,ie)=>p(b,O,N,F,X,ie),calcRightEdgeDeltas:(b,x,O,N,F,X)=>{if(X)return m(b,O,N,F);{const ie=T1(b,O,N,F);return ai(b.slice(0,O)).concat([ie])}},calcRedestributedWidths:(b,x,O,N)=>{if(N){const F=(x+O)/x,X=Ot(b,ie=>ie/F);return{delta:F*100-100,newSizes:X}}else return{delta:O,newSizes:b}}}},Cd=()=>{const c=(m,p,b,x,O)=>{const N=x>=0?b:p,F=kp(m,N,x,O);return O1(m,p,b+1,[F,-F],ai)};return{resizeTable:(m,p,b)=>{b&&m(p)},clampTableDelta:(m,p,b,x,O)=>{if(O){if(b>=0)return b;{const N=Ne(m,(F,X)=>F+X-x,0);return Math.max(-N,b)}}else return T1(m,p,b,x)},calcLeftEdgeDeltas:c,calcMiddleDeltas:(m,p,b,x,O,N)=>c(m,b,x,O,N),calcRightEdgeDeltas:(m,p,b,x,O,N)=>{if(N)return ai(m);{const F=x/m.length;return Ot(m,G(F))}},calcRedestributedWidths:(m,p,b,x)=>({delta:0,newSizes:m})}},jm=c=>no.fromTable(c).grid,A1=Cs("th"),Ig=c=>Io(c,m=>A1(m.element)),lk=(c,m)=>c&&m?"sectionCells":c?"section":"cells",Fg=c=>{const m=c.section==="thead",p=sr(D1(c.cells),"th");return c.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:lk(m,p)}:{type:"body"}},D1=c=>{const m=Ko(c,p=>A1(p.element));return m.length===0?J.some("td"):m.length===c.length?J.some("th"):J.none()},Vg=c=>{const m=Ot(c,x=>Fg(x).type),p=lo(m,"header"),b=lo(m,"footer");if(!p&&!b)return J.some("body");{const x=lo(m,"body");return p&&!x&&!b?J.some("header"):!p&&!x&&b?J.some("footer"):J.none()}},J2=c=>hr(c.all,m=>{const p=Fg(m);return p.type==="header"?J.from(p.subType):J.none()}),ob=(c,m,p)=>fn(p(c.element,m),!0,c.isLocked),Hc=(c,m)=>c.section!==m?al(c.element,c.cells,m,c.isNew):c,ew=()=>({transformRow:Hc,transformCell:(c,m,p)=>{const b=p(c.element,m),x=jo(b)!=="td"?Cg(b,"td"):b;return fn(x,c.isNew,c.isLocked)}}),nn=()=>({transformRow:Hc,transformCell:ob}),tw=()=>({transformRow:(c,m)=>Hc(c,m==="thead"?"tbody":m),transformCell:ob}),_p={getTableSectionType:(c,m)=>{const p=no.fromTable(c);switch(J2(p).getOr(m)){case"section":return ew();case"sectionCells":return nn();case"cells":return tw()}},section:ew,sectionCells:nn,cells:tw,fallback:()=>({transformRow:Nt,transformCell:ob})},Ep=(c,m,p,b)=>{p===b?Ao(c,m):Mn(c,m,p)},$m=(c,m,p)=>{el(Bs(c,m)).fold(()=>Ll(c,p),b=>ti(b,p))},ow=(c,m)=>{const p=yc(c,m).getOrThunk(()=>{const b=tt.fromTag(m,Rl(c).dom);return m==="thead"?$m(c,"caption,colgroup",b):m==="colgroup"?$m(c,"caption",b):Do(c,b),b});return Hl(p),p},xd=(c,m)=>{const p=[],b=[],x=Ke=>Ot(Ke,We=>{We.isNew&&p.push(We.element);const Dt=We.element;return Hl(Dt),Me(We.cells,it=>{it.isNew&&b.push(it.element),Ep(it.element,"colspan",it.colspan,1),Ep(it.element,"rowspan",it.rowspan,1),Do(Dt,it.element)}),Dt}),O=Ke=>Pn(Ke,We=>Ot(We.cells,Dt=>(Ep(Dt.element,"span",Dt.colspan,1),Dt.element))),N=(Ke,We)=>{const Dt=ow(c,We),it=(We==="colgroup"?O:x)(Ke);Or(Dt,it)},F=Ke=>{yc(c,Ke).each(Qr)},X=(Ke,We)=>{Ke.length>0?N(Ke,We):F(We)},ie=[],we=[],Se=[],ut=[];return Me(m,Ke=>{switch(Ke.section){case"thead":ie.push(Ke);break;case"tbody":we.push(Ke);break;case"tfoot":Se.push(Ke);break;case"colgroup":ut.push(Ke);break}}),X(ut,"colgroup"),X(ie,"thead"),X(we,"tbody"),X(Se,"tfoot"),{newRows:p,newCells:b}},vr=c=>Ot(c,m=>{const p=mm(m.element);return Me(m.cells,b=>{const x=Ss(b.element);Ep(x,"colspan",b.colspan,1),Ep(x,"rowspan",b.rowspan,1),Do(p,x)}),p}),nw=(c,m)=>Ot(c,p=>S(p,m)),ck=(c,m)=>c[m],rw=(c,m)=>{if(c.length===0)return 0;const p=c[0];return ys(c,b=>!m(p.element,b.element)).getOr(c.length)},Tn=(c,m,p,b)=>{const x=ck(c,m),O=x.section==="colgroup",N=rw(x.cells.slice(p),b),F=O?1:rw(nw(c.slice(m),p),b);return{colspan:N,rowspan:F}},nb=(c,m)=>{const p=Ot(c,x=>Ot(x.cells,oo)),b=(x,O,N,F)=>{for(let X=x;X<x+N;X++)for(let ie=O;ie<O+F;ie++)p[X][ie]=!0};return Ot(c,(x,O)=>{const N=Pn(x.cells,(F,X)=>{if(p[O][X]===!1){const ie=Tn(c,O,X,m);return b(O,X,ie.rowspan,ie.colspan),[sl(F.element,ie.rowspan,ie.colspan,F.isNew)]}else return[]});return Jr(x.element,N,x.section,x.isNew)})},cn=(c,m,p)=>{const b=[];Me(c.colgroups,x=>{const O=[];for(let N=0;N<c.grid.columns;N++){const F=no.getColumnAt(c,N).map(X=>fn(X.element,p,!1)).getOrThunk(()=>fn(m.colGap(),!0,!1));O.push(F)}b.push(al(x.element,O,"colgroup",p))});for(let x=0;x<c.grid.rows;x++){const O=[];for(let X=0;X<c.grid.columns;X++){const ie=no.getAt(c,x,X).map(we=>fn(we.element,p,we.isLocked)).getOrThunk(()=>fn(m.gap(),!0,!1));O.push(ie)}const N=c.all[x],F=al(N.element,O,N.section,p);b.push(F)}return b},cr=(c,m)=>cn(c,m,!1),Ln=c=>nb(c,Yo),Ta=(c,m)=>hr(c.all,p=>B(p.cells,b=>Yo(m,b.element))),M1=(c,m,p)=>{const b=Ot(m.selection,O=>xc(O).bind(N=>Ta(c,N)).filter(p)),x=Fl(b);return pm(x.length>0,x)},Xn=(c,m,p,b,x)=>(O,N,F,X)=>{const ie=no.fromTable(O),we=J.from(X==null?void 0:X.section).getOrThunk(_p.fallback);return m(ie,N).map(Se=>{const ut=cr(ie,F),Ke=c(ut,Se,Yo,x(F),we),We=Rt(Ke.grid),Dt=Ln(Ke.grid);return{info:Se,grid:Dt,cursor:Ke.cursor,lockedColumns:We}}).bind(Se=>{const ut=xd(O,Se.grid),Ke=J.from(X==null?void 0:X.sizing).getOrThunk(()=>Lm.getTableSize(O)),We=J.from(X==null?void 0:X.resize).getOrThunk(Cd);return p(O,Se.grid,Se.info,{sizing:Ke,resize:We,section:we}),b(O),Ao(O,He),Se.lockedColumns.length>0&&Mn(O,He,Se.lockedColumns.join(",")),J.some({cursor:Se.cursor,newRows:ut.newRows,newCells:ut.newCells})})},N1=(c,m)=>xc(m.element).bind(p=>Ta(c,p).map(b=>({...b,generators:m.generators,clipboard:m.clipboard}))),Ii=(c,m)=>M1(c,m,xe).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Xl=(c,m)=>m.mergable,Gm=(c,m)=>m.unmergable,qa=(c,m)=>M1(c,m,xe),ii=(c,m)=>M1(c,m,p=>!p.isLocked),zg=(c,m)=>Ta(c,m).exists(p=>!p.isLocked),Zg=(c,m)=>Io(m,p=>zg(c,p)),sw=(c,m)=>Xl(c,m).filter(p=>Zg(c,p.cells)),rb=(c,m)=>Gm(c,m).filter(p=>Zg(c,p)),dk=(c,m,p,b)=>{const x=q(c).rows;if(x.length===0)return c;for(let O=m.startRow;O<=m.finishRow;O++)for(let N=m.startCol;N<=m.finishCol;N++){const F=x[O],X=S(F,N).isLocked;hu(F,N,fn(b(),!1,X))}return c},sb=(c,m,p,b)=>{const x=q(c).rows;let O=!0;for(let N=0;N<x.length;N++)for(let F=0;F<P(x[0]);F++){const X=x[N],ie=S(X,F),we=ie.element,Se=p(we,m);Se&&!O?hu(X,F,fn(b(),!0,ie.isLocked)):Se&&(O=!1)}return c},aw=(c,m)=>Ne(c,(p,b)=>Be(p,x=>m(x.element,b.element))?p:p.concat([b]),[]),iw=(c,m,p,b)=>(m>0&&m<c[0].cells.length&&Me(c,x=>{const O=x.cells[m-1];let N=0;const F=b();for(;x.cells.length>m+N&&p(O.element,x.cells[m+N].element);)hu(x,m+N,fn(F,!0,x.cells[m+N].isLocked)),N++}),c),uk=(c,m,p,b)=>{const x=q(c).rows;if(m>0&&m<x.length){const O=x[m-1].cells,N=aw(O,p);Me(N,F=>{let X=J.none();for(let ie=m;ie<x.length;ie++)for(let we=0;we<P(x[0]);we++){const Se=x[ie],ut=S(Se,we);p(ut.element,F.element)&&(X.isNone()&&(X=J.some(b())),X.each(Ke=>{hu(Se,we,fn(Ke,!0,ut.isLocked))}))}})}return c},lw=c=>{const m=O=>O(c),p=G(c),b=()=>x,x={tag:!0,inner:c,fold:(O,N)=>N(c),isValue:xe,isError:oo,map:O=>Op.value(O(c)),mapError:b,bind:m,exists:m,forall:m,getOr:p,or:b,getOrThunk:p,orThunk:b,getOrDie:p,each:O=>{O(c)},toOptional:()=>J.some(c)};return x},cw=c=>{const m=()=>p,p={tag:!1,inner:c,fold:(b,x)=>b(c),isValue:oo,isError:xe,map:m,mapError:b=>Op.error(b(c)),bind:m,exists:oo,forall:xe,getOr:Nt,or:Nt,getOrThunk:Gn,orThunk:Gn,getOrDie:ao(String(c)),each:vt,toOptional:J.none};return p},Op={value:lw,error:cw,fromOption:(c,m)=>c.fold(()=>cw(m),lw)},Tp=(c,m,p)=>{if(c.row>=m.length||c.column>P(m[0]))return Op.error("invalid start address out of table bounds, row: "+c.row+", column: "+c.column);const b=m.slice(c.row),x=b[0].cells.slice(c.column),O=P(p[0]),N=p.length;return Op.value({rowDelta:b.length-N,colDelta:x.length-O})},dw=(c,m)=>{const p=P(c[0]),b=P(m[0]);return{rowDelta:0,colDelta:p-b}},uw=(c,m)=>{const p=c.length,b=m.length;return{rowDelta:p-b,colDelta:0}},R1=(c,m,p,b)=>{const x=m.section==="colgroup"?p.col:p.cell;return go(c,O=>fn(x(),!0,b(O)))},Km=(c,m,p,b)=>{const x=c[c.length-1];return c.concat(go(m,()=>{const O=x.section==="colgroup"?p.colgroup:p.row,N=ee(x,O,Nt),F=R1(N.cells.length,N,p,X=>Bn(b,X.toString()));return Am(N,F)}))},Un=(c,m,p,b)=>Ot(c,x=>{const O=R1(m,x,p,oo);return Tm(x,b,O)}),mw=(c,m,p)=>Ot(c,b=>Ne(p,(x,O)=>{const N=R1(1,b,m,xe)[0];return s1(x,O,N)},b)),Ap=(c,m,p)=>{const b=m.colDelta<0?Un:Nt,x=m.rowDelta<0?Km:Nt,O=Rt(c),N=P(c[0]),F=Be(O,we=>we===N-1),X=b(c,Math.abs(m.colDelta),p,F?N-1:N),ie=Rt(X);return x(X,Math.abs(m.rowDelta),p,Ut(ie,xe))},gw=(c,m,p,b)=>{const x=S(c[m],p),O=ko(b,x.element),N=c[m];return c.length>1&&P(N)>1&&(p>0&&O(A(N,p-1))||p<N.cells.length-1&&O(A(N,p+1))||m>0&&O(A(c[m-1],p))||m<c.length-1&&O(A(c[m+1],p)))},Sd=(c,m,p,b,x,O)=>{const N=c.row,F=c.column,X=p.length,ie=P(p[0]),we=N+X,Se=F+ie+O.length,ut=Ut(O,xe);for(let Ke=N;Ke<we;Ke++){let We=0;for(let Dt=F;Dt<Se;Dt++){if(ut[Dt]){We++;continue}gw(m,Ke,Dt,x)&&sb(m,A(m[Ke],Dt),x,b.cell);const it=Dt-F-We,Zt=S(p[Ke-N],it),Qt=Zt.element,Qo=b.replace(Qt);hu(m[Ke],Dt,fn(Qo,!0,Zt.isLocked))}}return m},Mr=(c,m,p)=>{const b=P(m[0]),x=q(m).cols.length+c.row,O=go(b-c.column,F=>F+c.column),N=B(O,F=>Io(p,X=>X!==F)).getOr(b-1);return{row:x,column:N}},Ts=(c,m,p)=>Ko(p,b=>b>=c.column&&b<=P(m[0])+c.column),ab=(c,m,p,b,x)=>{const O=Rt(m),N=Mr(c,m,O),F=q(p).rows,X=Ts(N,F,O);return Tp(N,m,F).map(ie=>{const we={...ie,colDelta:ie.colDelta-X.length},Se=Ap(m,we,b),ut=Rt(Se),Ke=Ts(N,F,ut);return Sd(N,Se,F,b,x,Ke)})},ib=(c,m,p,b,x)=>{iw(m,c,x,b.cell);const O=uw(p,m),N=Ap(p,O,b),F=uw(m,N),X=Ap(m,F,b);return Ot(X,(ie,we)=>Tm(ie,c,N[we].cells))},L1=(c,m,p,b,x)=>{uk(m,c,x,b.cell);const O=Rt(m),N=dw(m,p),F={...N,colDelta:N.colDelta-O.length},X=Ap(m,F,b),{cols:ie,rows:we}=q(X),Se=Rt(X),ut=dw(p,m),Ke={...ut,colDelta:ut.colDelta+Se.length},We=mw(p,b,Se),Dt=Ap(We,Ke,b);return[...ie,...we.slice(0,c),...Dt,...we.slice(c,we.length)]},Dp=(c,m,p,b)=>ee(c,x=>b(x,p),m),Ug=(c,m,p,b,x)=>{const{rows:O,cols:N}=q(c),F=O.slice(0,m),X=O.slice(m),ie=Dp(O[p],(we,Se)=>m>0&&m<O.length&&b(A(O[m-1],Se),A(O[m],Se))?S(O[m],Se):fn(x(we.element,b),!0,we.isLocked),b,x);return[...N,...F,ie,...X]},hw=(c,m,p,b,x,O,N)=>{if(p==="colgroup"||!b){const F=S(c,x);return fn(N(F.element,O),!0,!1)}else return S(c,m)},kd=(c,m,p,b,x)=>Ot(c,O=>{const N=m>0&&m<P(O)&&b(A(O,m-1),A(O,m)),F=hw(O,m,O.section,N,p,b,x);return s1(O,m,F)}),H1=(c,m)=>Pn(c,p=>{const b=p.cells,x=xr(m,(O,N)=>N>=0&&N<O.length?O.slice(0,N).concat(O.slice(N+1)):O,b);return x.length>0?[al(p.element,x,p.section,p.isNew)]:[]}),dr=(c,m,p)=>{const{rows:b,cols:x}=q(c);return[...x,...b.slice(0,m),...b.slice(p+1)]},Yl=(c,m,p,b)=>A(c[m],p)!==void 0&&m>0&&b(A(c[m-1],p),A(c[m],p)),Ou=(c,m,p)=>m>0&&p(A(c,m-1),A(c,m)),_d=(c,m,p,b)=>Yl(c,m,p,b)||Ou(c[m],p,b),pw=(c,m)=>Io(m,Nt)&&Ig(c.cells)?xe:(p,b,x)=>!(jo(p.element)==="th"&&m[x]),mk=(c,m)=>Io(m,Nt)&&Ig(c)?xe:(p,b,x)=>!(jo(p.element)==="th"&&m[b]),Ed=(c,m,p,b)=>{const x=N=>N==="row"?Fr(m):Di(m),O=N=>x(N)?`${N}group`:N;return c?A1(m)?O(p):null:b&&A1(m)?O(p==="row"?"col":"row"):null},fw=(c,m)=>(p,b,x)=>J.some(Ed(c,p.element,"col",m[x])),Wg=(c,m)=>(p,b)=>J.some(Ed(c,p.element,"row",m[b])),Mp=(c,m,p)=>fn(p(c.element,m),!0,c.isLocked),lb=(c,m,p,b,x,O,N)=>{const F=X=>Be(m,ie=>p(X.element,ie.element));return Ot(c,(X,ie)=>Ni(X,(we,Se)=>{if(F(we)){const ut=N(we,ie,Se)?x(we,p,b):we;return O(ut,ie,Se).each(Ke=>{Yr(ut.element,{scope:J.from(Ke)})}),ut}else return we}))},cb=(c,m,p)=>Pn(c,(b,x)=>_d(c,x,m,p)?[]:[S(b,m)]),gk=(c,m,p)=>{const b=c[m];return Pn(b.cells,(x,O)=>_d(c,m,O,p)?[]:[x])},jg=(c,m,p,b,x)=>{const O=q(c).rows,N=Pn(m,we=>cb(O,we,b)),F=Ot(O,we=>Ig(we.cells)),X=mk(N,F),ie=Wg(p,F);return lb(c,N,b,x,Mp,ie,X)},hk=(c,m,p,b,x,O,N)=>{const{cols:F,rows:X}=q(c),ie=X[m[0]],we=Pn(m,it=>gk(X,it,x)),Se=Ot(ie.cells,(it,Zt)=>Ig(cb(X,Zt,x))),ut=[...X];Me(m,it=>{ut[it]=N.transformRow(X[it],p)});const Ke=[...F,...ut],We=pw(ie,Se),Dt=fw(b,Se);return lb(Ke,we,x,O,N.transformCell,Dt,We)},Tu=(c,m,p,b)=>{const x=q(c).rows,O=Ot(m,N=>S(x[N.row],N.column));return lb(c,O,p,b,Mp,J.none,xe)},Od={generate:c=>{if(!to(c))throw new Error("cases must be an array");if(c.length===0)throw new Error("there must be at least one case");const m=[],p={};return Me(c,(b,x)=>{const O=kt(b);if(O.length!==1)throw new Error("one and only one name per case");const N=O[0],F=b[N];if(p[N]!==void 0)throw new Error("duplicate key detected:"+N);if(N==="cata")throw new Error("cannot have a case named cata (sorry)");if(!to(F))throw new Error("case arguments must be an array");m.push(N),p[N]=(...X)=>{const ie=X.length;if(ie!==F.length)throw new Error("Wrong number of arguments to case "+N+". Expected "+F.length+" ("+F+"), got "+ie);return{fold:(...we)=>{if(we.length!==c.length)throw new Error("Wrong number of arguments to fold. Expected "+c.length+", got "+we.length);return we[x].apply(null,X)},match:we=>{const Se=kt(we);if(m.length!==Se.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Se.join(","));if(!Io(m,ut=>lo(Se,ut)))throw new Error("Not all branches were specified when using match. Specified: "+Se.join(", ")+`
Required: `+m.join(", "));return we[N].apply(null,X)},log:we=>{console.log(we,{constructors:m,constructor:N,params:X})}}}}),p}},Au={...Od.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},$g=(c,m)=>c.length===0?Au.none():c.length===1?Au.only(0):m===0?Au.left(0,1):m===c.length-1?Au.right(m-1,m):m>0&&m<c.length-1?Au.middle(m-1,m,m+1):Au.none(),db=(c,m,p,b,x)=>{const O=c.slice(0),N=$g(c,m),F=G(Ot(O,G(0))),X=ut=>b.singleColumnWidth(O[ut],p),ie=(ut,Ke)=>x.calcLeftEdgeDeltas(O,ut,Ke,p,b.minCellWidth(),b.isRelative),we=(ut,Ke,We)=>x.calcMiddleDeltas(O,ut,Ke,We,p,b.minCellWidth(),b.isRelative),Se=(ut,Ke)=>x.calcRightEdgeDeltas(O,ut,Ke,p,b.minCellWidth(),b.isRelative);return N.fold(F,X,ie,we,Se)},P1=(c,m,p)=>{let b=0;for(let x=c;x<m;x++)b+=p[x]!==void 0?p[x]:0;return b},vw=(c,m)=>{const p=no.justCells(c);return Ot(p,b=>{const x=P1(b.column,b.column+b.colspan,m);return{element:b.element,width:x,colspan:b.colspan}})},Gg=(c,m)=>{const p=no.justColumns(c);return Ot(p,(b,x)=>({element:b.element,width:m[x],colspan:b.colspan}))},qm=(c,m)=>{const p=no.justCells(c);return Ot(p,b=>{const x=P1(b.row,b.row+b.rowspan,m);return{element:b.element,height:x,rowspan:b.rowspan}})},B1=(c,m)=>Ot(c.all,(p,b)=>({element:p.element,height:m[b]})),mo=c=>xr(c,(m,p)=>m+p,0),ts=(c,m)=>no.hasColumns(c)?Gg(c,m):vw(c,m),Xa=(c,m,p)=>{const b=ts(c,m);Me(b,x=>{p.setElementWidth(x.element,x.width)})},I1=(c,m,p,b,x)=>{const O=no.fromTable(c),N=x.getCellDelta(m),F=x.getWidths(O,x),X=p===O.grid.columns-1,ie=b.clampTableDelta(F,p,N,x.minCellWidth(),X),we=db(F,p,ie,x,b),Se=Ot(we,(ut,Ke)=>ut+F[Ke]);Xa(O,Se,x),b.resizeTable(x.adjustTableWidth,ie,X)},ce=(c,m,p,b)=>{const x=no.fromTable(c),O=ge(x,c,b),N=Ot(O,(we,Se)=>p===Se?Math.max(m+we,Va()):we),F=qm(x,N),X=B1(x,N);Me(X,we=>{Oc(we.element,we.height)}),Me(F,we=>{Oc(we.element,we.height)});const ie=mo(N);Oc(c,ie)},Np=(c,m,p,b,x)=>{const O=no.generate(m),N=b.getWidths(O,b),F=b.pixelWidth(),{newSizes:X,delta:ie}=x.calcRedestributedWidths(N,F,p.pixelDelta,b.isRelative);Xa(O,X,b),b.adjustTableWidth(ie)},bw=(c,m,p,b)=>{const x=no.generate(m),O=b.getWidths(x,b);Xa(x,O,b)},br=c=>Ne(c,(m,p)=>Be(m,b=>b.column===p.column)?m:m.concat([p]),[]).sort((m,p)=>m.column-p.column),Ql=Cs("col"),vl=Cs("colgroup"),ub=c=>jo(c)==="tr"||vl(c),yw=c=>{const m=Nn(c,"colspan",1),p=Nn(c,"rowspan",1);return{element:c,colspan:m,rowspan:p}},Rp=(c,m=yw)=>{const p=N=>Ql(N.element)?c.col(N):c.cell(N),b=N=>vl(N.element)?c.colgroup(N):c.row(N),x=N=>{if(ub(N))return b({element:N});{const F=N,X=p(m(F));return O=J.some({item:F,replacement:X}),X}};let O=J.none();return{getOrInit:(N,F)=>O.fold(()=>x(N),X=>F(N,X.item)?X.replacement:x(N))}},Lp=c=>m=>{const p=[],b=(O,N)=>B(p,F=>N(F.item,O)),x=O=>{const N=c==="td"?{scope:null}:{},F=m.replace(O,c,N);return p.push({item:O,sub:F}),F};return{replaceOrInit:(O,N)=>{if(ub(O)||Ql(O))return O;{const F=O;return b(F,N).fold(()=>x(F),X=>N(O,X.item)?X.sub:x(F))}}}},F1=c=>kr(c,"scope").map(m=>m.substr(0,3)),oa={modification:Rp,transform:Lp,merging:c=>({unmerge:m=>{const p=F1(m);return p.each(b=>Mn(m,"scope",b)),()=>{const b=c.cell({element:m,colspan:1,rowspan:1});return En(b,"width"),En(m,"width"),p.each(x=>Mn(b,"scope",x)),b}},merge:m=>{const p=()=>{const b=Fl(Ot(m,F1));if(b.length===0)return J.none();{const x=b[0],O=["row","col"];return Be(b,N=>N!==x&&lo(O,N))?J.none():J.from(x)}};return En(m[0],"width"),p().fold(()=>Ao(m[0],"scope"),b=>Mn(m[0],"scope",b+"group")),G(m[0])}})},ww=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mb=(c,m)=>{const p=c.property().name(m);return lo(["ol","ul"],p)},Cw=(c,m)=>{const p=c.property().name(m);return lo(ww,p)},gb=(c,m)=>lo(["br","img","hr","input"],c.property().name(m)),Du=fp(),Aa=c=>Cw(Du,c),xw=c=>mb(Du,c),Ur=c=>gb(Du,c),pk=c=>{const m=Cs("br"),p=F=>Io(F,X=>m(X)||_i(X)&&Hi(X).trim().length===0),b=F=>jo(F)==="li"||rr(F,xw).isSome(),x=F=>nr(F).map(X=>Aa(X)?!0:Ur(X)?jo(X)!=="img":!1).getOr(!1),O=F=>fd(F).bind(X=>{const ie=x(X);return $o(X).map(we=>ie===!0||b(we)||m(X)||Aa(we)&&!Yo(F,we)?[]:[tt.fromTag("br")])}).getOr([]),N=(()=>{const F=Pn(c,X=>{const ie=Er(X);return p(ie)?[]:ie.concat(O(X))});return F.length===0?[tt.fromTag("br")]:F})();Hl(c[0]),Or(c[0],N)},Pc=c=>Vm(c,!0),hb=c=>{za(c).length===0&&Qr(c)},Xm=(c,m)=>({grid:c,cursor:m}),pb=c=>hr(c,m=>hr(m.cells,p=>{const b=p.element;return pm(Pc(b),b)})),V1=(c,m,p)=>{var b,x;const O=q(c).rows;return J.from((x=(b=O[m])===null||b===void 0?void 0:b.cells[p])===null||x===void 0?void 0:x.element).filter(Pc).orThunk(()=>pb(O))},Vs=(c,m,p)=>{const b=V1(c,m,p);return Xm(c,b)},Hp=c=>Ne(c,(m,p)=>Be(m,b=>b.row===p.row)?m:m.concat([p]),[]).sort((m,p)=>m.row-p.row),Sw=(c,m,p,b)=>{const x=m[0].row,O=Hp(m),N=xr(O,(F,X)=>({grid:Ug(F.grid,x,X.row+F.delta,p,b.getOrInit),delta:F.delta+1}),{grid:c,delta:0}).grid;return Vs(N,x,m[0].column)},fk=(c,m,p,b)=>{const x=Hp(m),O=x[x.length-1],N=O.row+O.rowspan,F=xr(x,(X,ie)=>Ug(X,N,ie.row,p,b.getOrInit),c);return Vs(F,N,m[0].column)},As=(c,m,p,b)=>{const x=m.details,O=br(x),N=O[0].column,F=xr(O,(X,ie)=>({grid:kd(X.grid,N,ie.column+X.delta,p,b.getOrInit),delta:X.delta+1}),{grid:c,delta:0}).grid;return Vs(F,x[0].row,N)},gs=(c,m,p,b)=>{const x=m.details,O=x[x.length-1],N=O.column+O.colspan,F=br(x),X=xr(F,(ie,we)=>kd(ie,N,we.column,p,b.getOrInit),c);return Vs(X,x[0].row,N)},ha=(c,m,p,b)=>{const x=br(m),O=Ot(x,F=>F.column),N=jg(c,O,!0,p,b.replaceOrInit);return Vs(N,m[0].row,m[0].column)},Da=(c,m,p,b)=>{const x=Tu(c,m,p,b.replaceOrInit);return Vs(x,m[0].row,m[0].column)},Ds=(c,m,p,b)=>{const x=br(m),O=Ot(x,F=>F.column),N=jg(c,O,!1,p,b.replaceOrInit);return Vs(N,m[0].row,m[0].column)},Wr=(c,m,p,b)=>{const x=Tu(c,m,p,b.replaceOrInit);return Vs(x,m[0].row,m[0].column)},Kg=(c,m)=>(p,b,x,O,N)=>{const F=Hp(b),X=Ot(F,we=>we.row),ie=hk(p,X,c,m,x,O.replaceOrInit,N);return Vs(ie,b[0].row,b[0].column)},na=Kg("thead",!0),Jl=Kg("tbody",!1),kw=Kg("tfoot",!1),_w=(c,m,p,b)=>{const x=br(m.details),O=H1(c,Ot(x,F=>F.column)),N=O.length>0?O[0].cells.length-1:0;return Vs(O,x[0].row,Math.min(x[0].column,N))},Ew=(c,m,p,b)=>{const x=Hp(m),O=dr(c,x[0].row,x[x.length-1].row),N=O.length>0?O.length-1:0;return Vs(O,Math.min(m[0].row,N),m[0].column)},fb=(c,m,p,b)=>{const x=m.cells;pk(x);const O=dk(c,m.bounds,p,b.merge(x));return Xm(O,J.from(x[0]))},z1=(c,m,p,b)=>{const x=xr(m,(O,N)=>sb(O,N,p,b.unmerge(N)),c);return Xm(x,J.from(m[0]))},Ow=(c,m,p,b)=>{const x=((N,F)=>{const X=no.fromTable(N);return cn(X,F,!0)})(m.clipboard,m.generators),O=hm(m.row,m.column);return ab(O,c,x,m.generators,p).fold(()=>Xm(c,J.some(m.element)),N=>Vs(N,m.row,m.column))},Z1=(c,m,p)=>{const b=t1(c,p.section),x=no.generate(b);return cn(x,m,!0)},Tw=(c,m,p,b)=>{const x=q(c).rows,O=m.cells[0].column,N=x[m.cells[0].row],F=Z1(m.clipboard,m.generators,N),X=ib(O,c,F,m.generators,p);return Vs(X,m.cells[0].row,m.cells[0].column)},vk=(c,m,p,b)=>{const x=q(c).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,N=x[m.cells[0].row],F=Z1(m.clipboard,m.generators,N),X=ib(O,c,F,m.generators,p);return Vs(X,m.cells[0].row,m.cells[0].column)},Pp=(c,m,p,b)=>{const x=q(c).rows,O=m.cells[0].row,N=x[O],F=Z1(m.clipboard,m.generators,N),X=L1(O,c,F,m.generators,p);return Vs(X,m.cells[0].row,m.cells[0].column)},bk=(c,m,p,b)=>{const x=q(c).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,N=x[m.cells[0].row],F=Z1(m.clipboard,m.generators,N),X=L1(O,c,F,m.generators,p);return Vs(X,m.cells[0].row,m.cells[0].column)},yk=(c,m)=>{const p=no.fromTable(c);return qa(p,m).bind(b=>{const x=b[b.length-1],O=b[0].column,N=x.column+x.colspan,F=qo(Ot(p.all,X=>Ko(X.cells,ie=>ie.column>=O&&ie.column<N)));return D1(F)}).getOr("")},wk=(c,m)=>{const p=no.fromTable(c);return qa(p,m).bind(D1).getOr("")},Aw=(c,m)=>{const p=no.fromTable(c);return qa(p,m).bind(b=>{const x=b[b.length-1],O=b[0].row,N=x.row+x.rowspan,F=p.all.slice(O,N);return Vg(F)}).getOr("")},ht=(c,m,p,b)=>bw(c,m,p,b.sizing),ze=(c,m,p,b)=>Np(c,m,p,b.sizing,b.resize),vb=(c,m)=>Be(m,p=>p.column===0&&p.isLocked),os=(c,m)=>Be(m,p=>p.column+p.colspan>=c.grid.columns&&p.isLocked),Dw=(c,m)=>{const p=Lv(c),b=br(m);return Ne(b,(x,O)=>{const N=p[O.column].map(Vr).getOr(0);return x+N},0)},bb=c=>(m,p)=>qa(m,p).filter(b=>!(c?vb:os)(m,b)).map(b=>({details:b,pixelDelta:Dw(m,b)})),Mw=(c,m)=>ii(c,m).map(p=>({details:p,pixelDelta:-Dw(c,p)})),Ma=c=>(m,p)=>Ii(m,p).filter(b=>!(c?vb:os)(m,b.cells)),yb=oa.transform("th"),Na=oa.transform("td"),wb=Xn(Sw,qa,vt,vt,oa.modification),ns=Xn(fk,qa,vt,vt,oa.modification),li=Xn(As,bb(!0),ze,vt,oa.modification),ec=Xn(gs,bb(!1),ze,vt,oa.modification),Cb=Xn(_w,Mw,ze,hb,oa.modification),bl=Xn(Ew,qa,vt,hb,oa.modification),Ck=Xn(ha,ii,vt,vt,yb),Nw=Xn(Ds,ii,vt,vt,Na),U1=Xn(na,ii,vt,vt,yb),xb=Xn(Jl,ii,vt,vt,Na),Rw=Xn(kw,ii,vt,vt,Na),W1=Xn(Da,ii,vt,vt,yb),xk=Xn(Wr,ii,vt,vt,Na),Lw=Xn(fb,sw,ht,vt,oa.merging),Sk=Xn(z1,rb,ht,vt,oa.merging),kk=Xn(Ow,N1,ht,vt,oa.modification),_k=Xn(Tw,Ma(!0),vt,vt,oa.modification),Ek=Xn(vk,Ma(!1),vt,vt,oa.modification),Sb=Xn(Pp,Ii,vt,vt,oa.modification),j1=Xn(bk,Ii,vt,vt,oa.modification),Ok=yk,kb=wk,Tk=Aw,Bp=(c,m)=>c.dispatch("NewRow",{node:m}),Hw=(c,m)=>c.dispatch("NewCell",{node:m}),Mu=(c,m,p)=>{c.dispatch("TableModified",{...p,table:m})},Ak=(c,m,p,b,x)=>{c.dispatch("TableSelectionChange",{cells:m,start:p,finish:b,otherCells:x})},Dk=c=>{c.dispatch("TableSelectionClear")},Pw=(c,m,p,b,x)=>{c.dispatch("ObjectResizeStart",{target:m,width:p,height:b,origin:x})},_b=(c,m,p,b,x)=>{c.dispatch("ObjectResized",{target:m,width:p,height:b,origin:x})},$1={structure:!1,style:!0},Yn={structure:!0,style:!1},gn={structure:!0,style:!0},Nu=(c,m)=>Gl(c)?Lm.percentageSize(m):Pi(c)?Lm.pixelSize(m):Lm.getTableSize(m),pa=(c,m,p)=>{const b=Ha=>jo(b1(Ha))==="table",x=Ha=>!b(c)||jm(Ha).rows>1,O=Ha=>!b(c)||jm(Ha).columns>1,N=Bm(c),F=Kv(c)?vt:Y2,X=Ha=>{switch(I2(c)){case"section":return _p.section();case"sectionCells":return _p.sectionCells();case"cells":return _p.cells();default:return _p.getTableSectionType(Ha,"section")}},ie=(Ha,N0)=>N0.cursor.fold(()=>{const hf=za(Ha);return Ce(hf).filter(_t).map(Cl=>{p.clearSelectedCells(Ha.dom);const fs=c.dom.createRng();return fs.selectNode(Cl.dom),c.selection.setRng(fs),Mn(Cl,"data-mce-selected","1"),fs})},hf=>{const Cl=tb(hf),fs=c.dom.createRng();return fs.setStart(Cl.element.dom,Cl.offset),fs.setEnd(Cl.element.dom,Cl.offset),c.selection.setRng(fs),p.clearSelectedCells(Ha.dom),J.some(fs)}),we=(Ha,N0,hf,Cl)=>(fs,UC,fy=!1)=>{bn(fs);const WC=tt.fromDom(c.getDoc()),vy=Oa(hf,WC,N),jC={sizing:Nu(c,fs),resize:Kv(c)?Q2():Cd(),section:X(fs)};return N0(fs)?Ha(fs,UC,vy,jC).bind(R0=>{m.refresh(fs.dom),Me(R0.newRows,pf=>{Bp(c,pf.dom)}),Me(R0.newCells,pf=>{Hw(c,pf.dom)});const $C=ie(fs,R0);return _t(fs)&&(bn(fs),fy||Mu(c,fs.dom,Cl)),$C.map(pf=>({rng:pf,effect:Cl}))}):J.none()},Se=we(bl,x,vt,Yn),ut=we(Cb,O,vt,Yn),Ke=we(wb,xe,vt,Yn),We=we(ns,xe,vt,Yn),Dt=we(li,xe,F,Yn),it=we(ec,xe,F,Yn),Zt=we(Lw,xe,vt,Yn),Qt=we(Sk,xe,vt,Yn),Qo=we(_k,xe,vt,Yn),ya=we(Ek,xe,vt,Yn),ps=we(Sb,xe,vt,Yn),Zc=we(j1,xe,vt,Yn),Uc=we(kk,xe,vt,gn),ju=we(W1,xe,vt,Yn),Vo=we(xk,xe,vt,Yn),Ws=we(Ck,xe,vt,Yn),Rr=we(Nw,xe,vt,Yn),Ya=we(U1,xe,vt,Yn),Wc=we(xb,xe,vt,Yn),jc=we(Rw,xe,vt,Yn);return{deleteRow:Se,deleteColumn:ut,insertRowsBefore:Ke,insertRowsAfter:We,insertColumnsBefore:Dt,insertColumnsAfter:it,mergeCells:Zt,unmergeCells:Qt,pasteColsBefore:Qo,pasteColsAfter:ya,pasteRowsBefore:ps,pasteRowsAfter:Zc,pasteCells:Uc,makeCellsHeader:ju,unmakeCellsHeader:Vo,makeColumnsHeader:Ws,unmakeColumnsHeader:Rr,makeRowsHeader:Ya,makeRowsBody:Wc,makeRowsFooter:jc,getTableRowType:Tk,getTableCellType:kb,getTableColType:Ok}},qg=(c,m,p)=>{const b=Nn(c,m,1);p===1||b<=1?Ao(c,m):Mn(c,m,Math.min(p,b))},Eb=(c,m)=>p=>{const b=p.column+p.colspan-1,x=p.column;return b>=c&&x<m},Xg=(c,m,p)=>{if(no.hasColumns(c)){const b=Ko(no.justColumns(c),Eb(m,p)),x=Ot(b,N=>{const F=Ss(N.element);return qg(F,"span",p-m),F}),O=tt.fromTag("colgroup");return Or(O,x),[O]}else return[]},G1=(c,m,p)=>Ot(c.all,b=>{const x=Ko(b.cells,Eb(m,p)),O=Ot(x,F=>{const X=Ss(F.element);return qg(X,"colspan",p-m),X}),N=tt.fromTag("tr");return Or(N,O),N}),Mk=(c,m)=>{const p=no.fromTable(c);return ii(p,m).map(b=>{const x=b[b.length-1],O=b[0].column,N=x.column+x.colspan,F=Xg(p,O,N),X=G1(p,O,N);return[...F,...X]})},Nk=(c,m,p)=>{const b=no.fromTable(c);return qa(b,m).bind(x=>{const O=cn(b,p,!1),N=q(O).rows.slice(x[0].row,x[x.length-1].row+x[x.length-1].rowspan),F=Pn(N,ie=>{const we=Ko(ie.cells,Se=>!Se.isLocked);return we.length>0?[{...ie,cells:we}]:[]}),X=Ln(F);return pm(X.length>0,X)}).map(x=>vr(x))},Ip=Od.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Bw=(c,m,p)=>{const b=p.substring(0,p.length-c.length),x=parseFloat(b);return b===x.toString()?m(x):Ip.invalid(p)},Td={...Ip,from:c=>Ys(c,"%")?Bw("%",Ip.percent,c):Ys(c,"px")?Bw("px",Ip.pixels,c):Ip.invalid(c)},Rk=(c,m)=>Ot(c,p=>Td.from(p).fold(()=>p,b=>b/m*100+"%",b=>b+"%")),Lk=(c,m,p)=>{const b=p/m;return Ot(c,x=>Td.from(x).fold(()=>x,O=>O*b+"px",O=>O/100*p+"px"))},Hk=(c,m)=>{const p=c.fold(()=>G(""),b=>{const x=b/m;return G(x+"px")},()=>{const b=100/m;return G(b+"%")});return go(m,p)},Pk=(c,m,p)=>c.fold(()=>m,b=>Lk(m,p,b),b=>Rk(m,p)),Iw=(c,m,p)=>{const b=Td.from(p),x=Io(c,O=>O==="0px")?Hk(b,c.length):Pk(b,c,m);return Vw(x)},Ob=(c,m)=>c.length===0?m:xr(c,(p,b)=>Td.from(b).fold(G(0),Nt,Nt)+p,0),Fw=(c,m)=>{const p=Math.floor(c);return{value:p+m,remainder:c-p}},Bk=(c,m)=>Td.from(c).fold(G(c),p=>p+m+"px",p=>p+m+"%"),Vw=c=>{if(c.length===0)return c;const m=xr(c,(b,x)=>{const O=Td.from(x).fold(()=>({value:x,remainder:0}),N=>Fw(N,"px"),N=>({value:N+"%",remainder:0}));return{output:[O.value].concat(b.output),remainder:b.remainder+O.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Bk(p[p.length-1],Math.round(m.remainder))])},Fp=Td.from,zw=(c,m,p)=>{Me(m,b=>{const x=c.slice(b.column,b.colspan+b.column),O=Ob(x,wc());Lo(b.element,"width",O+p)})},Yg=(c,m,p)=>{Me(m,(b,x)=>{const O=Ob([c[x]],wc());Lo(b.element,"width",O+p)})},Zw=(c,m,p,b)=>{Me(p,x=>{const O=c.slice(x.row,x.rowspan+x.row),N=Ob(O,Va());Lo(x.element,"height",N+b)}),Me(m,(x,O)=>{Lo(x.element,"height",c[O])})},Uw=c=>Fp(c).fold(G("px"),G("px"),G("%")),Tb=(c,m,p)=>{const b=no.fromTable(c),x=b.all,O=no.justCells(b),N=no.justColumns(b);m.each(F=>{const X=Uw(F),ie=Gt(c),we=Rm(b,c),Se=Iw(we,ie,F);no.hasColumns(b)?Yg(Se,N,X):zw(Se,O,X),Lo(c,"width",F)}),p.each(F=>{const X=Uw(F),ie=Hv(c),we=Ri(b,c,Ar),Se=Iw(we,ie,F);Zw(Se,x,O,X),Lo(c,"height",F)})},Ww=hd,Bc=Rg,Vp=vn,Ym=c=>{Ao(c,"width")},Qm=c=>{const m=lr(c);Tb(c,J.some(m),J.none()),Ym(c)},Ab=c=>{const m=G4(c);Tb(c,J.some(m),J.none()),Ym(c)},Ic=c=>{En(c,"width");const m=vm(c),p=m.length>0?m:za(c);Me(p,b=>{En(b,"width"),Ym(b)}),Ym(c)},Db={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},K1=()=>tt.fromTag("th"),Ru=()=>tt.fromTag("td"),q1=()=>tt.fromTag("col"),Ik=(c,m,p,b)=>{const x=tt.fromTag("tr");for(let O=0;O<c;O++){const N=b<m||O<p?K1():Ru();O<p&&Mn(N,"scope","row"),b<m&&Mn(N,"scope","col"),Do(N,tt.fromTag("br")),Do(x,N)}return x},Fk=c=>{const m=tt.fromTag("colgroup");return go(c,()=>Do(m,q1())),m},jw=(c,m,p,b)=>go(c,x=>Ik(m,p,b,x)),Vk=(c,m,p,b,x,O=Db)=>{const N=tt.fromTag("table"),F=x!=="cells";fm(N,O.styles),fr(N,O.attributes),O.colGroups&&Do(N,Fk(m));const X=Math.min(c,p);if(F&&p>0){const ut=tt.fromTag("thead");Do(N,ut);const Ke=jw(p,m,x==="sectionCells"?X:0,b);Or(ut,Ke)}const ie=tt.fromTag("tbody");Do(N,ie);const we=F?c-X:c,Se=jw(we,m,F?0:p,b);return Or(ie,Se),N},$w=c=>c.dom.innerHTML,zk=c=>{const m=tt.fromTag("div"),p=tt.fromDom(c.dom.cloneNode(!0));return Do(m,p),$w(m)},Zk=(c,m)=>{c.selection.select(m.dom,!0),c.selection.collapse(!0)},Gw=(c,m)=>{ru(m,"td,th").each(ko(Zk,c))},Uk=(c,m)=>{Me(Xs(m,"tr"),p=>{Bp(c,p.dom),Me(Xs(p,"th,td"),b=>{Hw(c,b.dom)})})},Kw=c=>wn(c)&&c.indexOf("%")!==-1,qw=(c,m,p,b,x)=>{const O=up(c),N={styles:O,attributes:dp(c),colGroups:J4(c)};return c.undoManager.ignore(()=>{const F=Vk(p,m,x,b,I2(c),N);Mn(F,"data-mce-id","__mce");const X=zk(F);c.insertContent(X),c.addVisual()}),ru(b1(c),'table[data-mce-id="__mce"]').map(F=>(Pi(c)?Ab(F):Fm(c)?Ic(F):(Gl(c)||Kw(O.width))&&Qm(F),bn(F),Ao(F,"data-mce-id"),Uk(c,F),Gw(c,F),F.dom)).getOrNull()},Wk=(c,m,p,b={})=>{const x=O=>hn(O)&&O>0;if(x(m)&&x(p)){const O=b.headerRows||0,N=b.headerColumns||0;return qw(c,p,m,N,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var X1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Mb="x-tinymce/dom-table-",zp=Mb+"rows",Qg=Mb+"columns",Xw=c=>{const m=X1.FakeClipboardItem(c);X1.write([m])},Nb=c=>{var m;const p=(m=X1.read())!==null&&m!==void 0?m:[];return hr(p,b=>J.from(b.getType(c)))},Yw=c=>{Nb(c).isSome()&&X1.clear()},Qw=c=>{c.fold(Q1,m=>Xw({[zp]:m}))},Y1=()=>Nb(zp),Q1=()=>Yw(zp),Jw=c=>{c.fold(jk,m=>Xw({[Qg]:m}))},eC=()=>Nb(Qg),jk=()=>Yw(Qg),Rb=c=>wp(Mc(c),Hg(c)).filter(hp),tC=c=>Bi(Mc(c),Hg(c)).filter(hp),oC=(c,m)=>{const p=Hg(c),b=()=>Rb(c).each(it=>{Qs(it,p).filter(re(p)).each(Zt=>{const Qt=tt.fromText("");if(ti(Zt,Qt),Qr(Zt),c.dom.isEmpty(c.getBody()))c.setContent(""),c.selection.setCursorLocation();else{const Qo=c.dom.createRng();Qo.setStart(Qt.dom,0),Qo.setEnd(Qt.dom,0),c.selection.setRng(Qo),c.nodeChanged()}})}),x=it=>Rb(c).each(Zt=>{Fm(c)||Pi(c)||Gl(c)||Qs(Zt,p).each(Qt=>{it==="relative"&&!Ww(Qt)?Qm(Qt):it==="fixed"&&!Bc(Qt)?Ab(Qt):it==="responsive"&&!Vp(Qt)&&Ic(Qt),bn(Qt),Mu(c,Qt.dom,Yn)})}),O=it=>Qs(it,p),N=it=>tC(c).bind(Zt=>O(Zt).map(Qt=>it(Qt,Zt))),F=(it,Zt)=>{N(Qt=>{c.formatter.toggle("tableclass",{value:Zt},Qt.dom),Mu(c,Qt.dom,$1)})},X=(it,Zt)=>{N(Qt=>{const Qo=si(c),ya=Io(Qo,ps=>c.formatter.match("tablecellclass",{value:Zt},ps.dom))?c.formatter.remove:c.formatter.apply;Me(Qo,ps=>ya("tablecellclass",{value:Zt},ps.dom)),Mu(c,Qt.dom,$1)})},ie=()=>{Rb(c).each(it=>{Qs(it,p).each(Zt=>{yc(Zt,"caption").fold(()=>{const Qt=tt.fromTag("caption");Do(Qt,tt.fromText("Caption")),um(Zt,Qt,0),c.selection.setCursorLocation(Qt.dom,0)},Qt=>{Cs("caption")(it)&&Xd("td",Zt).each(Qo=>c.selection.setCursorLocation(Qo.dom,0)),Qr(Qt)}),Mu(c,Zt.dom,Yn)})})},we=it=>{c.focus()},Se=(it,Zt=!1)=>N((Qt,Qo)=>{const ya=Pg(si(c),Qt,Qo);it(Qt,ya,Zt).each(we)}),ut=()=>N((it,Zt)=>{const Qt=Pg(si(c),it,Zt),Qo=Oa(vt,tt.fromDom(c.getDoc()),J.none());return Nk(it,Qt,Qo)}),Ke=()=>N((it,Zt)=>{const Qt=Pg(si(c),it,Zt);return Mk(it,Qt)}),We=(it,Zt)=>Zt().each(Qt=>{const Qo=Ot(Qt,ya=>Ss(ya));N((ya,ps)=>{const Zc=Lg(tt.fromDom(c.getDoc())),Uc=Bg(si(c),ps,Qo,Zc);it(ya,Uc).each(we)})}),Dt=it=>(Zt,Qt)=>Tl(Qt,"type").each(Qo=>{Se(it(Qo),Qt.no_events)});_n({mceTableSplitCells:()=>Se(m.unmergeCells),mceTableMergeCells:()=>Se(m.mergeCells),mceTableInsertRowBefore:()=>Se(m.insertRowsBefore),mceTableInsertRowAfter:()=>Se(m.insertRowsAfter),mceTableInsertColBefore:()=>Se(m.insertColumnsBefore),mceTableInsertColAfter:()=>Se(m.insertColumnsAfter),mceTableDeleteCol:()=>Se(m.deleteColumn),mceTableDeleteRow:()=>Se(m.deleteRow),mceTableCutCol:()=>Ke().each(it=>{Jw(it),Se(m.deleteColumn)}),mceTableCutRow:()=>ut().each(it=>{Qw(it),Se(m.deleteRow)}),mceTableCopyCol:()=>Ke().each(it=>Jw(it)),mceTableCopyRow:()=>ut().each(it=>Qw(it)),mceTablePasteColBefore:()=>We(m.pasteColsBefore,eC),mceTablePasteColAfter:()=>We(m.pasteColsAfter,eC),mceTablePasteRowBefore:()=>We(m.pasteRowsBefore,Y1),mceTablePasteRowAfter:()=>We(m.pasteRowsAfter,Y1),mceTableDelete:b,mceTableCellToggleClass:X,mceTableToggleClass:F,mceTableToggleCaption:ie,mceTableSizingMode:(it,Zt)=>x(Zt),mceTableCellType:Dt(it=>it==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Dt(it=>it==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Dt(it=>{switch(it){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(it,Zt)=>c.addCommand(Zt,it)),c.addCommand("mceInsertTable",(it,Zt)=>{Wk(c,Zt.rows,Zt.columns,Zt.options)}),c.addCommand("mceTableApplyCellStyle",(it,Zt)=>{const Qt=ps=>"tablecell"+ps.toLowerCase().replace("-","");if(!Kt(Zt))return;const Qo=Ko(si(c),hp);if(Qo.length===0)return;const ya=Rs(Zt,(ps,Zc)=>c.formatter.has(Qt(Zc))&&wn(ps));Al(ya)||(_n(ya,(ps,Zc)=>{const Uc=Qt(Zc);Me(Qo,ju=>{ps===""?c.formatter.remove(Uc,{value:null},ju.dom,!0):c.formatter.apply(Uc,{value:ps},ju.dom)})}),O(Qo[0]).each(ps=>Mu(c,ps.dom,$1)))})},Zp=(c,m)=>{const p=Hg(c),b=x=>Bi(Mc(c)).bind(O=>Qs(O,p).map(N=>{const F=Pg(si(c),N,O);return x(N,F)})).getOr("");_n({mceTableRowType:()=>b(m.getTableRowType),mceTableCellType:()=>b(m.getTableCellType),mceTableColType:()=>b(m.getTableColType)},(x,O)=>c.addQueryValueHandler(O,x))},J1=Od.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nC=(c,m,p,b)=>c.fold(m,p,b),$k=c=>c.fold(Nt,Nt,Nt),Gk=J1.before,Kk=J1.on,qk=J1.after,fa={before:Gk,on:Kk,after:qk,cata:nC,getStart:$k},Ra={create:(c,m)=>({selection:c,kill:m})},Xk=(c,m)=>{const p=c.document.createRange();return p.selectNode(m.dom),p},Yk=(c,m)=>{const p=c.document.createRange();return rC(p,m),p},rC=(c,m)=>c.selectNodeContents(m.dom),sC=(c,m)=>{m.fold(p=>{c.setStartBefore(p.dom)},(p,b)=>{c.setStart(p.dom,b)},p=>{c.setStartAfter(p.dom)})},Lb=(c,m)=>{m.fold(p=>{c.setEndBefore(p.dom)},(p,b)=>{c.setEnd(p.dom,b)},p=>{c.setEndAfter(p.dom)})},aC=(c,m,p)=>{const b=c.document.createRange();return sC(b,m),Lb(b,p),b},Hb=(c,m,p,b,x)=>{const O=c.document.createRange();return O.setStart(m.dom,p),O.setEnd(b.dom,x),O},Jg=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:c.width,height:c.height}),eh=c=>{const m=c.getClientRects(),p=m.length>0?m[0]:c.getBoundingClientRect();return p.width>0||p.height>0?J.some(p).map(Jg):J.none()},Ad=Od.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),iC=(c,m,p)=>m(tt.fromDom(p.startContainer),p.startOffset,tt.fromDom(p.endContainer),p.endOffset),Pb=(c,m)=>m.match({domRange:p=>({ltr:G(p),rtl:J.none}),relative:(p,b)=>({ltr:lu(()=>aC(c,p,b)),rtl:lu(()=>J.some(aC(c,b,p)))}),exact:(p,b,x,O)=>({ltr:lu(()=>Hb(c,p,b,x,O)),rtl:lu(()=>J.some(Hb(c,x,O,p,b)))})}),lC=(c,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(b=>b.collapsed===!1).map(b=>Ad.rtl(tt.fromDom(b.endContainer),b.endOffset,tt.fromDom(b.startContainer),b.startOffset)).getOrThunk(()=>iC(c,Ad.ltr,p)):iC(c,Ad.ltr,p)},e0=(c,m)=>{const p=Pb(c,m);return lC(c,p)},Ms=(c,m)=>e0(c,m).match({ltr:(p,b,x,O)=>{const N=c.document.createRange();return N.setStart(p.dom,b),N.setEnd(x.dom,O),N},rtl:(p,b,x,O)=>{const N=c.document.createRange();return N.setStart(x.dom,O),N.setEnd(p.dom,b),N}});Ad.ltr,Ad.rtl;const th={create:(c,m,p,b)=>({start:c,soffset:m,finish:p,foffset:b})},cC={create:(c,m,p,b)=>({start:fa.on(c,m),finish:fa.on(p,b)})},dC=(c,m)=>{const p=Ms(c,m);return th.create(tt.fromDom(p.startContainer),p.startOffset,tt.fromDom(p.endContainer),p.endOffset)},Up=cC.create,oh=(c,m,p,b,x,O,N)=>Yo(p,x)&&b===O?J.none():Tr(p,"td,th",m).bind(F=>Tr(x,"td,th",m).bind(X=>Lu(c,m,F,X,N))),Lu=(c,m,p,b,x)=>Yo(p,b)?J.none():Um(p,b,m).bind(O=>{const N=O.boxes.getOr([]);return N.length>1?(x(c,N,O.start,O.finish),J.some(Ra.create(J.some(Up(p,0,p,qn(p))),!0))):J.none()}),Wp=(c,m,p,b,x)=>{const O=N=>(x.clearBeforeUpdate(p),x.selectRange(p,N.boxes,N.start,N.finish),N.boxes);return nk(b,c,m,x.firstSelectedSelector,x.lastSelectedSelector).map(O)},Jm=(c,m)=>({item:c,mode:m}),uC=(c,m,p,b=Fi)=>c.property().parent(m).map(x=>Jm(x,b)),Fi=(c,m,p,b=va)=>p.sibling(c,m).map(x=>Jm(x,b)),va=(c,m,p,b=va)=>{const x=c.property().children(m);return p.first(x).map(O=>Jm(O,b))},Bb=[{current:uC,next:Fi,fallback:J.none()},{current:Fi,next:va,fallback:J.some(uC)},{current:va,next:va,fallback:J.some(Fi)}],t0=(c,m,p,b,x=Bb)=>B(x,O=>O.current===p).bind(O=>O.current(c,m,b,O.next).orThunk(()=>O.fallback.bind(N=>t0(c,m,N,b)))),o0={left:()=>({sibling:(c,m)=>c.query().prevSibling(m),first:c=>c.length>0?J.some(c[c.length-1]):J.none()}),right:()=>({sibling:(c,m)=>c.query().nextSibling(m),first:c=>c.length>0?J.some(c[0]):J.none()})},jp=(c,m,p,b,x,O)=>t0(c,m,b,x).bind(N=>O(N.item)?J.none():p(N.item)?J.some(N.item):jp(c,N.item,p,N.mode,x,O)),$p=(c,m,p,b)=>jp(c,m,p,Fi,o0.left(),b),Gp=(c,m,p,b)=>jp(c,m,p,Fi,o0.right(),b),eg=c=>m=>c.property().children(m).length===0,Ib=(c,m,p)=>rh(c,m,eg(c),p),nh=(c,m,p)=>Fb(c,m,eg(c),p),rh=$p,Fb=Gp,tg=fp(),sh=(c,m)=>Ib(tg,c,m),jr=(c,m)=>nh(tg,c,m),mC=(c,m,p)=>rh(tg,c,m,p),tc=(c,m,p)=>Fb(tg,c,m,p),Vb=(c,m,p)=>rr(c,m,p).isSome(),ah=Od.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ih=(c,m,p)=>{const b=c.getRect(m),x=c.getRect(p);return x.right>b.left&&x.left<b.right},gC=c=>Tr(c,"tr"),Dd={...ah,verify:(c,m,p,b,x,O,N)=>Tr(b,"td,th",N).bind(F=>Tr(m,"td,th",N).map(X=>Yo(F,X)?Yo(b,F)&&qn(F)===x?O(X):ah.none("in same cell"):Lc(gC,[F,X]).fold(()=>ih(c,X,F)?ah.success():O(X),ie=>O(X)))).getOr(ah.none("default")),cata:(c,m,p,b,x)=>c.fold(m,p,b,x)},Qk=(c,m,p,b)=>({parent:c,children:m,element:p,index:b}),hC=c=>$o(c).bind(m=>{const p=Er(m);return pC(p,c).map(b=>Qk(m,p,c,b))}),pC=(c,m)=>ys(c,ko(Yo,m)),zb=Cs("br"),Kp=(c,m,p)=>m(c,p).bind(b=>_i(b)&&Hi(b).trim().length===0?Kp(b,m,p):J.some(b)),Fc=(c,m,p)=>p.traverse(m).orThunk(()=>Kp(m,p.gather,c)).map(p.relative),fC=(c,m)=>Ks(c,m).filter(zb).orThunk(()=>Ks(c,m-1).filter(zb)),Jk=(c,m,p,b)=>fC(m,p).bind(x=>b.traverse(x).fold(()=>Kp(x,b.gather,c).map(b.relative),O=>hC(O).map(N=>fa.on(N.parent,N.index)))),vC=(c,m,p,b)=>(zb(m)?Fc(c,m,b):Jk(c,m,p,b)).map(x=>({start:x,finish:x})),zs=c=>Dd.cata(c,m=>J.none(),()=>J.none(),m=>J.some(Eu(m,0)),m=>J.some(Eu(m,qn(m)))),og=(c,m)=>({left:c.left,top:c.top+m,right:c.right,bottom:c.bottom+m}),Hu=(c,m)=>({left:c.left,top:c.top-m,right:c.right,bottom:c.bottom-m}),lh=(c,m,p)=>({left:c.left+m,top:c.top+p,right:c.right+m,bottom:c.bottom+p}),ci=c=>c.top,Pu=c=>c.bottom,Zb=(c,m,p)=>p>=0&&p<qn(m)?c.getRangedRect(m,p,m,p+1):p>0?c.getRangedRect(m,p-1,m,p):J.none(),Md=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom}),ba=(c,m)=>J.some(c.getRect(m)),La=(c,m,p)=>tr(m)?ba(c,m).map(Md):_i(m)?Zb(c,m,p).map(Md):J.none(),yr=(c,m)=>tr(m)?ba(c,m).map(Md):_i(m)?c.getRangedRect(m,0,m,qn(m)).map(Md):J.none(),Zs=5,n0=100,Qn=Od.generate([{none:[]},{retry:["caret"]}]),Bu=(c,m)=>c.left<m.left||Math.abs(m.right-c.left)<1||c.left>m.right,r0=(c,m,p)=>ln(m,Aa).fold(oo,b=>yr(c,b).exists(x=>Bu(p,x))),s0=(c,m,p,b,x)=>{const O=og(x,Zs);return Math.abs(p.bottom-b.bottom)<1||p.top>x.bottom?Qn.retry(O):p.top===x.bottom?Qn.retry(og(x,1)):r0(c,m,x)?Qn.retry(lh(O,Zs,0)):Qn.none()},bC={point:ci,adjuster:(c,m,p,b,x)=>{const O=Hu(x,Zs);return Math.abs(p.top-b.top)<1||p.bottom<x.top?Qn.retry(O):p.bottom===x.top?Qn.retry(Hu(x,1)):r0(c,m,x)?Qn.retry(lh(O,Zs,0)):Qn.none()},move:Hu,gather:sh},yC={point:Pu,adjuster:s0,move:og,gather:jr},Ub=(c,m,p)=>c.elementFromPoint(m,p).filter(b=>jo(b)==="table").isSome(),qp=(c,m,p,b,x)=>a0(c,m,p,m.move(b,Zs),x),a0=(c,m,p,b,x)=>x===0?J.some(b):Ub(c,b.left,m.point(b))?qp(c,m,p,b,x-1):c.situsFromPoint(b.left,m.point(b)).bind(O=>O.start.fold(J.none,N=>yr(c,N).bind(F=>m.adjuster(c,N,F,p,b).fold(J.none,X=>a0(c,m,p,X,x-1))).orThunk(()=>J.some(b)),J.none)),e3=(c,m,p)=>c.point(m)>p.getInnerHeight()?J.some(c.point(m)-p.getInnerHeight()):c.point(m)<0?J.some(-c.point(m)):J.none(),Wb=(c,m,p)=>{const b=c.move(p,Zs),x=a0(m,c,p,b,n0).getOr(b);return e3(c,x,m).fold(()=>m.situsFromPoint(x.left,c.point(x)),O=>(m.scrollBy(0,O),m.situsFromPoint(x.left,c.point(x)-O)))},i0={tryUp:ko(Wb,bC),tryDown:ko(Wb,yC),getJumpSize:G(Zs)},t3=20,wC=(c,m,p)=>c.getSelection().bind(b=>vC(m,b.finish,b.foffset,p).fold(()=>J.some(Eu(b.finish,b.foffset)),x=>{const O=c.fromSitus(x),N=Dd.verify(c,b.finish,b.foffset,O.finish,O.foffset,p.failure,m);return zs(N)})),l0=(c,m,p,b,x,O)=>O===0?J.none():o3(c,m,p,b,x).bind(N=>{const F=c.fromSitus(N),X=Dd.verify(c,p,b,F.finish,F.foffset,x.failure,m);return Dd.cata(X,()=>J.none(),()=>J.some(N),ie=>Yo(p,ie)&&b===0?c0(c,p,b,Hu,x):l0(c,m,ie,0,x,O-1),ie=>Yo(p,ie)&&b===qn(ie)?c0(c,p,b,og,x):l0(c,m,ie,qn(ie),x,O-1))}),c0=(c,m,p,b,x)=>La(c,m,p).bind(O=>d0(c,x,b(O,i0.getJumpSize()))),d0=(c,m,p)=>{const b=dd().browser;return b.isChromium()||b.isSafari()||b.isFirefox()?m.retry(c,p):J.none()},o3=(c,m,p,b,x)=>La(c,p,b).bind(O=>d0(c,x,O)),CC=(c,m,p)=>wC(c,m,p).bind(b=>l0(c,m,b.element,b.offset,p,t3).map(c.fromSitus)),n3=(c,m)=>Vb(c,p=>$o(p).exists(b=>Yo(b,m))),xC=(c,m,p,b,x)=>Tr(b,"td,th",m).bind(O=>Tr(O,"table",m).bind(N=>n3(x,N)?CC(c,m,p).bind(F=>Tr(F.finish,"td,th",m).map(X=>({start:O,finish:X,range:F}))):J.none())),SC=(c,m,p,b,x,O)=>O(b,m).orThunk(()=>xC(c,m,p,b,x).map(N=>{const F=N.range;return Ra.create(J.some(Up(F.start,F.soffset,F.finish,F.foffset)),!0)})),r3=(c,m)=>Tr(c,"tr",m).bind(p=>Tr(p,"table",m).bind(b=>{const x=Xs(b,"tr");return Yo(p,x[0])?mC(b,O=>fd(O).isSome(),m).map(O=>{const N=qn(O);return Ra.create(J.some(Up(O,N,O,N)),!0)}):J.none()})),Yt=(c,m)=>Tr(c,"tr",m).bind(p=>Tr(p,"table",m).bind(b=>{const x=Xs(b,"tr");return Yo(p,x[x.length-1])?tc(b,O=>yu(O).isSome(),m).map(O=>Ra.create(J.some(Up(O,0,O,0)),!0)):J.none()})),yl=(c,m,p,b,x,O,N)=>xC(c,p,b,x,O).bind(F=>Lu(m,p,F.start,F.finish,N)),Vi=c=>{let m=c;return{get:()=>m,set:p=>{m=p}}},Xp=c=>{const m=Vi(J.none()),p=()=>m.get().each(c);return{clear:()=>{p(),m.set(J.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:b=>{p(),m.set(J.some(b))}}},u0=()=>{const c=Xp(vt);return{...c,on:m=>c.get().each(m)}},m0=(c,m)=>Tr(c,"td,th",m),jb=c=>Qd(c).exists(Vm),$b=(c,m,p,b)=>{const x=u0(),O=x.clear,N=F=>{x.on(X=>{b.clearBeforeUpdate(m),m0(F.target,p).each(ie=>{Um(X,ie,p).each(we=>{const Se=we.boxes.getOr([]);if(Se.length===1){const ut=Se[0],Ke=mp(ut)==="false",We=sr(xu(F.target),ut,Yo);Ke&&We&&(b.selectRange(m,Se,ut,ut),c.selectContents(ut))}else Se.length>1&&(b.selectRange(m,Se,we.start,we.finish),c.selectContents(ie))})})})};return{clearstate:O,mousedown:F=>{b.clear(m),m0(F.target,p).filter(jb).each(x.set)},mouseover:F=>{N(F)},mouseup:F=>{N(F),O()}}},g0={traverse:nr,gather:jr,relative:fa.before,retry:i0.tryDown,failure:Dd.failedDown},Gb={traverse:xs,gather:sh,relative:fa.before,retry:i0.tryUp,failure:Dd.failedUp},ng=c=>m=>m===c,h0=ng(38),Yp=ng(40),Nd=c=>c>=37&&c<=40,p0={isBackward:ng(37),isForward:ng(39)},s3={isBackward:ng(39),isForward:ng(37)},kC=c=>{const m=c!==void 0?c.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,b=m.body.scrollTop||m.documentElement.scrollTop;return Ec(p,b)},a3=(c,m,p)=>{const b=(p!==void 0?p.dom:document).defaultView;b&&b.scrollBy(c,m)},f0=Od.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_C=c=>f0.exact(c.start,c.soffset,c.finish,c.foffset),ch=c=>c.match({domRange:m=>tt.fromDom(m.startContainer),relative:(m,p)=>fa.getStart(m),exact:(m,p,b,x)=>m}),Qp=f0.domRange,i3=f0.relative,l3=f0.exact,EC=c=>{const m=ch(c);return Pr(m)},Kb=th.create,Iu={domRange:Qp,relative:i3,exact:l3,exactFromRange:_C,getWin:EC,range:Kb},qb=(c,m,p)=>{var b,x;return J.from((x=(b=c.dom).caretPositionFromPoint)===null||x===void 0?void 0:x.call(b,m,p)).bind(O=>{if(O.offsetNode===null)return J.none();const N=c.dom.createRange();return N.setStart(O.offsetNode,O.offset),N.collapse(),J.some(N)})},v0=(c,m,p)=>{var b,x;return J.from((x=(b=c.dom).caretRangeFromPoint)===null||x===void 0?void 0:x.call(b,m,p))},Xb=(()=>document.caretPositionFromPoint?qb:document.caretRangeFromPoint?v0:J.none)(),OC=(c,m,p)=>{const b=tt.fromDom(c.document);return Xb(b,m,p).map(x=>th.create(tt.fromDom(x.startContainer),x.startOffset,tt.fromDom(x.endContainer),x.endOffset))},Je=(c,m)=>{const p=jo(c);return p==="input"?fa.after(c):lo(["br","img"],p)?m===0?fa.before(c):fa.after(c):fa.on(c,m)},Nr=(c,m)=>{const p=c.fold(fa.before,Je,fa.after),b=m.fold(fa.before,Je,fa.after);return Iu.relative(p,b)},b0=(c,m,p,b)=>{const x=Je(c,m),O=Je(p,b);return Iu.relative(x,O)},Jn=(c,m,p,b)=>{const x=Rl(c).dom.createRange();return x.setStart(c.dom,m),x.setEnd(p.dom,b),x},zi=(c,m,p,b)=>{const x=Jn(c,m,p,b),O=Yo(c,p)&&m===b;return x.collapsed&&!O},Jp=c=>J.from(c.getSelection()),dh=(c,m)=>{Jp(c).each(p=>{p.removeAllRanges(),p.addRange(m)})},rg=(c,m,p,b,x)=>{const O=Hb(c,m,p,b,x);dh(c,O)},uh=(c,m,p,b,x,O)=>{m.collapse(p.dom,b),m.extend(x.dom,O)},y0=(c,m)=>e0(c,m).match({ltr:(p,b,x,O)=>{rg(c,p,b,x,O)},rtl:(p,b,x,O)=>{Jp(c).each(N=>{if(N.setBaseAndExtent)N.setBaseAndExtent(p.dom,b,x.dom,O);else if(N.extend)try{uh(c,N,p,b,x,O)}catch{rg(c,x,O,p,b)}else rg(c,x,O,p,b)})}}),Yb=(c,m,p,b,x)=>{const O=b0(m,p,b,x);y0(c,O)},TC=(c,m,p)=>{const b=Nr(m,p);y0(c,b)},Qb=c=>{if(c.rangeCount>0){const m=c.getRangeAt(0),p=c.getRangeAt(c.rangeCount-1);return J.some(th.create(tt.fromDom(m.startContainer),m.startOffset,tt.fromDom(p.endContainer),p.endOffset))}else return J.none()},Fu=c=>{if(c.anchorNode===null||c.focusNode===null)return Qb(c);{const m=tt.fromDom(c.anchorNode),p=tt.fromDom(c.focusNode);return zi(m,c.anchorOffset,p,c.focusOffset)?J.some(th.create(m,c.anchorOffset,p,c.focusOffset)):Qb(c)}},ef=(c,m,p=!0)=>{const b=(p?Yk:Xk)(c,m);dh(c,b)},Jb=c=>Jp(c).filter(m=>m.rangeCount>0).bind(Fu),mh=c=>Jb(c).map(m=>Iu.exact(m.start,m.soffset,m.finish,m.foffset)),tf=(c,m)=>{const p=Ms(c,m);return eh(p)},sg=(c,m,p)=>OC(c,m,p),of=c=>{Jp(c).each(m=>m.removeAllRanges())},gh=c=>({elementFromPoint:(m,p)=>tt.fromPoint(tt.fromDom(c.document),m,p),getRect:m=>m.dom.getBoundingClientRect(),getRangedRect:(m,p,b,x)=>{const O=Iu.exact(m,p,b,x);return tf(c,O)},getSelection:()=>mh(c).map(m=>dC(c,m)),fromSitus:m=>{const p=Iu.relative(m.start,m.finish);return dC(c,p)},situsFromPoint:(m,p)=>sg(c,m,p).map(b=>cC.create(b.start,b.soffset,b.finish,b.foffset)),clearSelection:()=>{of(c)},collapseSelection:(m=!1)=>{mh(c).each(p=>p.fold(b=>b.collapse(m),(b,x)=>{const O=m?b:x;TC(c,O,O)},(b,x,O,N)=>{const F=m?b:O,X=m?x:N;Yb(c,F,X,F,X)}))},setSelection:m=>{Yb(c,m.start,m.soffset,m.finish,m.foffset)},setRelativeSelection:(m,p)=>{TC(c,m,p)},selectNode:m=>{ef(c,m,!1)},selectContents:m=>{ef(c,m)},getInnerHeight:()=>c.innerHeight,getScrollY:()=>kC(tt.fromDom(c.document)).top,scrollBy:(m,p)=>{a3(m,p,tt.fromDom(c.document))}}),Vu=(c,m)=>({rows:c,cols:m}),Vc=(c,m,p,b)=>{const x=gh(c),O=$b(x,m,p,b);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},nf=c=>ln(c,It).exists(Vm),hh=(c,m)=>nf(c)||nf(m),Zi=(c,m,p,b)=>{const x=gh(c),O=()=>(b.clear(m),J.none());return{keydown:(N,F,X,ie,we,Se)=>{const ut=N.raw,Ke=ut.which,We=ut.shiftKey===!0;return ql(m,b.selectedSelector).fold(()=>(Nd(Ke)&&!We&&b.clearBeforeUpdate(m),Nd(Ke)&&We&&!hh(F,ie)?J.none:Yp(Ke)&&We?ko(yl,x,m,p,g0,ie,F,b.selectRange):h0(Ke)&&We?ko(yl,x,m,p,Gb,ie,F,b.selectRange):Yp(Ke)?ko(SC,x,p,g0,ie,F,Yt):h0(Ke)?ko(SC,x,p,Gb,ie,F,r3):J.none),Dt=>{const it=Zt=>()=>hr(Zt,Qt=>Wp(Qt.rows,Qt.cols,m,Dt,b)).fold(()=>S1(m,b.firstSelectedSelector,b.lastSelectedSelector).map(Qt=>{const Qo=Yp(Ke)||Se.isForward(Ke)?fa.after:fa.before;return x.setRelativeSelection(fa.on(Qt.first,0),Qo(Qt.table)),b.clear(m),Ra.create(J.none(),!0)}),Qt=>J.some(Ra.create(J.none(),!0)));return Nd(Ke)&&We&&!hh(F,ie)?J.none:Yp(Ke)&&We?it([Vu(1,0)]):h0(Ke)&&We?it([Vu(-1,0)]):Se.isBackward(Ke)&&We?it([Vu(0,-1),Vu(-1,0)]):Se.isForward(Ke)&&We?it([Vu(0,1),Vu(1,0)]):Nd(Ke)&&!We?O:J.none})()},keyup:(N,F,X,ie,we)=>ql(m,b.selectedSelector).fold(()=>{const Se=N.raw,ut=Se.which;return Se.shiftKey===!0&&Nd(ut)&&hh(F,ie)?oh(m,p,F,X,ie,we,b.selectRange):J.none()},J.none)}},rs=(c,m,p,b)=>{const x=gh(c);return(O,N)=>{b.clearBeforeUpdate(m),Um(O,N,p).each(F=>{const X=F.boxes.getOr([]);b.selectRange(m,X,F.start,F.finish),x.selectContents(N),x.collapseSelection()})}},ey=(c,m)=>{const p=Hs(c,m);return p===void 0||p===""?[]:p.split(" ")},ty=(c,m,p)=>{const b=ey(c,m).concat([p]);return Mn(c,m,b.join(" ")),!0},ag=(c,m,p)=>{const b=Ko(ey(c,m),x=>x!==p);return b.length>0?Mn(c,m,b.join(" ")):Ao(c,m),!1},ph=c=>c.dom.classList!==void 0,AC=c=>ey(c,"class"),w0=(c,m)=>ty(c,"class",m),Us=(c,m)=>ag(c,"class",m),hs=(c,m)=>{ph(c)?c.dom.classList.add(m):w0(c,m)},di=c=>{(ph(c)?c.dom.classList:AC(c)).length===0&&Ao(c,"class")},C0=(c,m)=>{ph(c)?c.dom.classList.remove(m):Us(c,m),di(c)},rf=(c,m)=>ph(c)&&c.dom.classList.contains(m),DC=(c,m)=>{Me(m,p=>{C0(c,p)})},x0=c=>m=>{hs(m,c)},MC=c=>m=>{DC(m,c)},S0={byClass:c=>{const m=x0(c.selected),p=MC([c.selected,c.lastSelected,c.firstSelected]),b=x=>{const O=Xs(x,c.selectedSelector);Me(O,p)};return{clearBeforeUpdate:b,clear:b,selectRange:(x,O,N,F)=>{b(x),Me(O,m),hs(N,c.firstSelected),hs(F,c.lastSelected)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}},byAttr:(c,m,p)=>{const b=F=>{Ao(F,c.selected),Ao(F,c.firstSelected),Ao(F,c.lastSelected)},x=F=>{Mn(F,c.selected,"1")},O=F=>{N(F),p()},N=F=>{const X=Xs(F,`${c.selectedSelector},${c.firstSelectedSelector},${c.lastSelectedSelector}`);Me(X,b)};return{clearBeforeUpdate:N,clear:O,selectRange:(F,X,ie,we)=>{O(F),Me(X,x),Mn(ie,c.firstSelected,"1"),Mn(we,c.lastSelected,"1"),m(X,ie,we)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}}},k0=(c,m,p,b)=>{switch(c.tag){case"none":return m();case"single":return b(c.element);case"multiple":return p(c.elements)}},_0=()=>({tag:"none"}),zu=c=>({tag:"multiple",elements:c}),fh=c=>({tag:"single",element:c}),oy=(c,m,p)=>({get:()=>j2(c(),p).fold(()=>m().fold(_0,fh),zu)}),ny=(c,m)=>{const p=c.slice(0,m[m.length-1].row+1),b=Ln(p);return Pn(b,x=>{const O=x.cells.slice(0,m[m.length-1].column+1);return Ot(O,N=>N.element)})},Go=(c,m)=>{const p=c.slice(m[0].row+m[0].rowspan-1,c.length),b=Ln(p);return Pn(b,x=>{const O=x.cells.slice(m[0].column+m[0].colspan-1,x.cells.length);return Ot(O,N=>N.element)})},Zu=(c,m,p)=>{const b=no.fromTable(c);return qa(b,m).map(x=>{const O=cn(b,p,!1),{rows:N}=q(O),F=ny(N,x),X=Go(N,x);return{upOrLeftCells:F,downOrRightCells:X}})},ry=(c,m,p,b,x,O,N)=>({target:c,x:m,y:p,stop:b,prevent:x,kill:O,raw:N}),sy=c=>{const m=tt.fromDom(ae(c).getOr(c.target)),p=()=>c.stopPropagation(),b=()=>c.preventDefault(),x=Ns(b,p);return ry(m,c.clientX,c.clientY,p,b,x,c)},ay=(c,m)=>p=>{c(p)&&m(sy(p))},iy=(c,m,p,b,x)=>{const O=ay(p,b);return c.dom.addEventListener(m,O,x),{unbind:ko(E0,c,m,O,x)}},NC=(c,m,p,b)=>iy(c,m,p,b,!1),E0=(c,m,p,b)=>{c.dom.removeEventListener(m,p,b)},sf=xe,ig=(c,m,p)=>NC(c,m,sf,p),vh=sy,ly=c=>!rf(tt.fromDom(c.target),"ephox-snooker-resizer-bar"),cy=(c,m)=>{const p=oy(()=>tt.fromDom(c.getBody()),()=>Bi(Mc(c),Hg(c)),Wm.selectedSelector),b=(N,F,X)=>{Qs(F).each(ie=>{const we=Bm(c),Se=Oa(vt,tt.fromDom(c.getDoc()),we),ut=si(c),Ke=Zu(ie,{selection:ut},Se);Ak(c,N,F,X,Ke)})},x=()=>Dk(c),O=S0.byAttr(Wm,b,x);return c.on("init",N=>{const F=c.getWin(),X=b1(c),ie=Hg(c),we=()=>{const Vo=c.selection,Ws=tt.fromDom(Vo.getStart()),Rr=tt.fromDom(Vo.getEnd());Lc(Qs,[Ws,Rr]).fold(()=>O.clear(X),vt)},Se=Vc(F,X,ie,O),ut=Zi(F,X,ie,O),Ke=rs(F,X,ie,O),We=Vo=>Vo.raw.shiftKey===!0;c.on("TableSelectorChange",Vo=>Ke(Vo.start,Vo.finish));const Dt=(Vo,Ws)=>{We(Vo)&&(Ws.kill&&Vo.kill(),Ws.selection.each(Rr=>{const Ya=Iu.relative(Rr.start,Rr.finish),Wc=Ms(F,Ya);c.selection.setRng(Wc)}))},it=Vo=>{const Ws=vh(Vo);if(Ws.raw.shiftKey&&Nd(Ws.raw.which)){const Rr=c.selection.getRng(),Ya=tt.fromDom(Rr.startContainer),Wc=tt.fromDom(Rr.endContainer);ut.keyup(Ws,Ya,Rr.startOffset,Wc,Rr.endOffset).each(jc=>{Dt(Ws,jc)})}},Zt=Vo=>{const Ws=vh(Vo);m.hide();const Rr=c.selection.getRng(),Ya=tt.fromDom(Rr.startContainer),Wc=tt.fromDom(Rr.endContainer),jc=l1(p0,s3)(tt.fromDom(c.selection.getStart()));ut.keydown(Ws,Ya,Rr.startOffset,Wc,Rr.endOffset,jc).each(Ha=>{Dt(Ws,Ha)}),m.show()},Qt=Vo=>Vo.button===0,Qo=Vo=>Vo.buttons===void 0?!0:(Vo.buttons&1)!==0,ya=Vo=>{Se.clearstate()},ps=Vo=>{Qt(Vo)&&ly(Vo)&&Se.mousedown(vh(Vo))},Zc=Vo=>{Qo(Vo)&&ly(Vo)&&Se.mouseover(vh(Vo))},Uc=Vo=>{Qt(Vo)&&ly(Vo)&&Se.mouseup(vh(Vo))},ju=(()=>{const Vo=Vi(tt.fromDom(X)),Ws=Vi(0);return{touchEnd:Rr=>{const Ya=tt.fromDom(Rr.target);if(Cs("td")(Ya)||Cs("th")(Ya)){const Wc=Vo.get(),jc=Ws.get();Yo(Wc,Ya)&&Rr.timeStamp-jc<300&&(Rr.preventDefault(),Ke(Ya,Ya))}Vo.set(Ya),Ws.set(Rr.timeStamp)}}})();c.on("dragstart",ya),c.on("mousedown",ps),c.on("mouseover",Zc),c.on("mouseup",Uc),c.on("touchend",ju.touchEnd),c.on("keyup",it),c.on("keydown",Zt),c.on("NodeChange",we)}),c.on("PreInit",()=>{c.serializer.addTempAttr(Wm.firstSelected),c.serializer.addTempAttr(Wm.lastSelected)}),{getSelectedCells:()=>k0(p.get(),G([]),N=>Ot(N,F=>F.dom),N=>[N.dom]),clearSelectedCells:N=>O.clear(tt.fromDom(N))}},wl=c=>{let m=[];return{bind:p=>{if(p===void 0)throw new Error("Event bind error: undefined handler");m.push(p)},unbind:p=>{m=Ko(m,b=>b!==p)},trigger:(...p)=>{const b={};Me(c,(x,O)=>{b[x]=p[O]}),Me(m,x=>{x(b)})}}},Uu=c=>{const m=od(c,b=>({bind:b.bind,unbind:b.unbind})),p=od(c,b=>b.trigger);return{registry:m,trigger:p}},c3=(c,m)=>{let p=null;const b=()=>{sn(p)||(clearTimeout(p),p=null)};return{cancel:b,throttle:(...x)=>{b(),p=setTimeout(()=>{p=null,c.apply(null,x)},m)}}},af=c=>c.slice(0).sort(),d3=(c,m)=>{throw new Error("All required keys ("+af(c).join(", ")+") were not specified. Specified keys were: "+af(m).join(", ")+".")},ui=c=>{throw new Error("Unsupported keys for object: "+af(c).join(", "))},ra=(c,m)=>{if(!to(m))throw new Error("The "+c+" fields must be an array. Was: "+m+".");Me(m,p=>{if(!wn(p))throw new Error("The value "+p+" in the "+c+" fields was not a string.")})},bh=(c,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+af(c).join(", ")+") were not.")},RC=c=>{const m=af(c);B(m,(p,b)=>b<m.length-1&&p===m[b+1]).each(p=>{throw new Error("The field: "+p+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},LC=(c,m)=>uo(c,m,{validate:Kr,label:"function"}),uo=(c,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return ra("required",m),RC(m),b=>{const x=kt(b);Io(m,N=>lo(x,N))||d3(m,x),c(m,x);const O=Ko(m,N=>!p.validate(b[N],N));return O.length>0&&bh(O,p.label),b}},u3=(c,m)=>{const p=Ko(m,b=>!lo(c,b));p.length>0&&ui(p)},lf=c=>LC(u3,c),dy=lf(["compare","extract","mutate","sink"]),HC=lf(["element","start","stop","destroy"]),m3=lf(["forceDrop","drop","move","delayDrop"]),g3=()=>{let c=J.none();const m=()=>{c=J.none()},p=(O,N)=>{const F=c.map(X=>O.compare(X,N));return c=J.some(N),F},b=(O,N)=>{N.extract(O).each(F=>{p(N,F).each(X=>{x.trigger.move(X)})})},x=Uu({move:wl(["info"])});return{onEvent:b,reset:m,events:x.registry}},h3=()=>{const c=Uu({move:wl(["info"])});return{onEvent:vt,reset:vt,events:c.registry}},p3=()=>{const c=h3(),m=g3();let p=c;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=c},isOn:()=>p===m,onEvent:(b,x)=>{p.onEvent(b,x)},events:m.events}},f3=(c,m,p)=>{let b=!1;const x=Uu({start:wl([]),stop:wl([])}),O=p3(),N=()=>{We.stop(),O.isOn()&&(O.off(),x.trigger.stop())},F=c3(N,200),X=it=>{We.start(it),O.on(),x.trigger.start()},ie=it=>{F.cancel(),O.onEvent(it,m)};O.events.move.bind(it=>{m.mutate(c,it.info)});const we=()=>{b=!0},Se=()=>{b=!1},ut=()=>b,Ke=it=>(...Zt)=>{b&&it.apply(null,Zt)},We=m.sink(m3({forceDrop:N,drop:Ke(N),move:Ke(ie),delayDrop:Ke(F.throttle)}),p),Dt=()=>{We.destroy()};return{element:We.element,go:X,on:we,off:Se,isActive:ut,destroy:Dt,events:x.registry}},cf=c=>{const m=c.replace(/\./g,"-");return{resolve:p=>m+"-"+p}},O0=cf("ephox-dragster").resolve,dt=c=>{const m={layerClass:O0("blocker"),...c},p=tt.fromTag("div");return Mn(p,"role","presentation"),fm(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),hs(p,O0("blocker")),hs(p,m.layerClass),{element:G(p),destroy:()=>{Qr(p)}}};var lg=dy({compare:(c,m)=>Ec(m.left-c.left,m.top-c.top),extract:c=>J.some(Ec(c.x,c.y)),sink:(c,m)=>{const p=dt(m),b=ig(p.element(),"mousedown",c.forceDrop),x=ig(p.element(),"mouseup",c.drop),O=ig(p.element(),"mousemove",c.move),N=ig(p.element(),"mouseout",c.delayDrop),F=()=>{p.destroy(),x.unbind(),O.unbind(),N.unbind(),b.unbind()},X=we=>{Do(we,p.element())},ie=()=>{Qr(p.element())};return HC({element:p.element,start:X,stop:ie,destroy:F})},mutate:(c,m)=>{c.mutate(m.left,m.top)}});const v3=(c,m={})=>{var p;const b=(p=m.mode)!==null&&p!==void 0?p:lg;return f3(c,b,m)},df=cf("ephox-snooker").resolve,Tt=()=>{const c=Uu({drag:wl(["xDelta","yDelta"])});return{mutate:(m,p)=>{c.trigger.drag(m,p)},events:c.registry}},T0=()=>{const c=Uu({drag:wl(["xDelta","yDelta","target"])});let m=J.none();const p=Tt();return p.events.drag.bind(b=>{m.each(x=>{c.trigger.drag(b.xDelta,b.yDelta,x)})}),{assign:b=>{m=J.some(b)},get:()=>m,mutate:p.mutate,events:c.registry}},b3=(c,m,p,b,x)=>{const O=tt.fromTag("div");return fm(O,{position:"absolute",left:m-b/2+"px",top:p+"px",height:x+"px",width:b+"px"}),fr(O,{"data-column":c,role:"presentation"}),O},PC=(c,m,p,b,x)=>{const O=tt.fromTag("div");return fm(O,{position:"absolute",left:m+"px",top:p-x/2+"px",height:x+"px",width:b+"px"}),fr(O,{"data-row":c,role:"presentation"}),O},cg=df("resizer-bar"),BC=df("resizer-rows"),uy=df("resizer-cols"),A0=7,uf=(c,m)=>Pn(c.all,(p,b)=>m(p.element)?[b]:[]),D0=(c,m)=>{const p=[];return go(c.grid.columns,b=>{no.getColumnAt(c,b).map(x=>x.element).forall(m)&&p.push(b)}),Ko(p,b=>{const x=no.filterItems(c,O=>O.column===b);return Io(x,O=>m(O.element))})},my=c=>{const m=Xs(c.parent(),"."+cg);Me(m,Qr)},IC=(c,m,p)=>{const b=c.origin();Me(m,x=>{x.each(O=>{const N=p(b,O);hs(N,cg),Do(c.parent(),N)})})},FC=(c,m,p,b)=>{IC(c,m,(x,O)=>{const N=b3(O.col,O.x-x.left,p.top-x.top,A0,b);return hs(N,uy),N})},gy=(c,m,p,b)=>{IC(c,m,(x,O)=>{const N=PC(O.row,p.left-x.left,O.y-x.top,b,A0);return hs(N,BC),N})},VC=(c,m,p,b,x)=>{const O=pu(p),N=m.isResizable,F=b.length>0?Ar.positions(b,p):[],X=F.length>0?uf(c,N):[],ie=Ko(F,(Ke,We)=>Be(X,Dt=>We===Dt));gy(m,ie,O,Vr(p));const we=x.length>0?ma.positions(x,p):[],Se=we.length>0?D0(c,N):[],ut=Ko(we,(Ke,We)=>Be(Se,Dt=>We===Dt));FC(m,ut,O,T2(p))},hy=(c,m)=>{if(my(c),c.isResizable(m)){const p=no.fromTable(m),b=i1(p),x=Lv(p);VC(p,c,m,b,x)}},zC=(c,m)=>{const p=Xs(c.parent(),"."+cg);Me(p,m)},ZC=c=>{zC(c,m=>{Lo(m,"display","none")})},py=c=>{zC(c,m=>{Lo(m,"display","block")})},y3=c=>rf(c,BC),xo=c=>rf(c,uy),w3=df("resizer-bar-dragging"),Rd=c=>{const m=T0(),p=v3(m,{});let b=J.none();const x=(We,Dt)=>J.from(Hs(We,Dt));m.events.drag.bind(We=>{x(We.target,"data-row").each(Dt=>{const it=au(We.target,"top");Lo(We.target,"top",it+We.yDelta+"px")}),x(We.target,"data-column").each(Dt=>{const it=au(We.target,"left");Lo(We.target,"left",it+We.xDelta+"px")})});const O=(We,Dt)=>{const it=au(We,Dt),Zt=Nn(We,"data-initial-"+Dt,0);return it-Zt};p.events.stop.bind(()=>{m.get().each(We=>{b.each(Dt=>{x(We,"data-row").each(it=>{const Zt=O(We,"top");Ao(We,"data-initial-top"),Ke.trigger.adjustHeight(Dt,Zt,parseInt(it,10))}),x(We,"data-column").each(it=>{const Zt=O(We,"left");Ao(We,"data-initial-left"),Ke.trigger.adjustWidth(Dt,Zt,parseInt(it,10))}),hy(c,Dt)})})});const N=(We,Dt)=>{Ke.trigger.startAdjust(),m.assign(We),Mn(We,"data-initial-"+Dt,au(We,Dt)),hs(We,w3),Lo(We,"opacity","0.2"),p.go(c.parent())},F=ig(c.parent(),"mousedown",We=>{y3(We.target)&&N(We.target,"top"),xo(We.target)&&N(We.target,"left")}),X=We=>Yo(We,c.view()),ie=We=>Tr(We,"table",X).filter(Vm),we=ig(c.view(),"mouseover",We=>{ie(We.target).fold(()=>{_t(We.target)&&my(c)},Dt=>{p.isActive()&&(b=J.some(Dt),hy(c,Dt))})}),Se=()=>{F.unbind(),we.unbind(),p.destroy(),my(c)},ut=We=>{hy(c,We)},Ke=Uu({adjustHeight:wl(["table","delta","row"]),adjustWidth:wl(["table","delta","column"]),startAdjust:wl([])});return{destroy:Se,refresh:ut,on:p.on,off:p.off,hideBars:ko(ZC,c),showBars:ko(py,c),events:Ke.registry}},zc={create:(c,m,p)=>{const b=Ar,x=ma,O=Rd(c),N=Uu({beforeResize:wl(["table","type"]),afterResize:wl(["table","type"]),startDrag:wl([])});return O.events.adjustHeight.bind(F=>{const X=F.table;N.trigger.beforeResize(X,"row");const ie=b.delta(F.delta,X);ce(X,ie,F.row,b),N.trigger.afterResize(X,"row")}),O.events.startAdjust.bind(F=>{N.trigger.startDrag()}),O.events.adjustWidth.bind(F=>{const X=F.table;N.trigger.beforeResize(X,"col");const ie=x.delta(F.delta,X),we=p(X);I1(X,ie,F.column,m,we),N.trigger.afterResize(X,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:N.registry}}},Ui={only:(c,m)=>{const p=nd(c)?Yd(c):c;return{parent:G(p),view:G(c),origin:G(Ec(0,0)),isResizable:m}},detached:(c,m,p)=>{const b=()=>pu(m);return{parent:G(m),view:G(c),origin:b,isResizable:p}},body:(c,m,p)=>({parent:G(m),view:G(c),origin:G(Ec(0,0)),isResizable:p})},sa=()=>{const c=tt.fromTag("div");return fm(c,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Do(In(),c),c},M0=(c,m)=>c.inline?Ui.body(tt.fromDom(c.getBody()),sa(),m):Ui.only(tt.fromDom(c.getDoc()),m),mf=(c,m)=>{c.inline&&Qr(m.parent())},gf=c=>Hn(c)&&c.nodeName==="TABLE",Wu="bar-",C3=c=>Hs(c,"data-mce-resize")!=="false",x3=c=>{const m=no.fromTable(c);no.hasColumns(m)||Me(za(c),p=>{const b=id(p,"width");Lo(p,"width",b),Ao(p,"width")})},S3=c=>{const m=u0(),p=u0(),b=u0();let x,O;const N=Se=>Nu(c,Se),F=()=>F2(c)?Cd():Q2(),X=Se=>jm(Se).columns,ie=(Se,ut,Ke)=>{const We=Ys(ut,"e");if(O===""&&Qm(Se),Ke!==x&&O!==""){Lo(Se,"width",O);const Dt=F(),it=N(Se),Zt=F2(c)||We?X(Se)-1:0;I1(Se,Ke-x,Zt,Dt,it)}else if(qv(O)){const Dt=parseFloat(O.replace("%","")),it=Ke*Dt/x;Lo(Se,"width",it+"%")}gp(O)&&x3(Se)},we=()=>{p.on(Se=>{Se.destroy()}),b.on(Se=>{mf(c,Se)})};return c.on("init",()=>{const Se=M0(c,C3);if(b.set(Se),vd(c)&&v1(c)){const ut=F(),Ke=zc.create(Se,ut,N);Ke.on(),Ke.events.startDrag.bind(We=>{m.set(c.selection.getRng())}),Ke.events.beforeResize.bind(We=>{const Dt=We.table.dom;Pw(c,Dt,Kl(Dt),bd(Dt),Wu+We.type)}),Ke.events.afterResize.bind(We=>{const Dt=We.table,it=Dt.dom;bn(Dt),m.on(Zt=>{c.selection.setRng(Zt),c.focus()}),_b(c,it,Kl(it),bd(it),Wu+We.type),c.undoManager.add()}),p.set(Ke)}}),c.on("ObjectResizeStart",Se=>{const ut=Se.target;if(gf(ut)){const Ke=tt.fromDom(ut);Me(c.dom.select(".mce-clonedresizable"),We=>{c.dom.addClass(We,"mce-"+Im(c)+"-columns")}),!Bc(Ke)&&Pi(c)?Ab(Ke):!Ww(Ke)&&Gl(c)&&Qm(Ke),Vp(Ke)&&il(Se.origin,Wu)&&Qm(Ke),x=Se.width,O=Fm(c)?"":Su(c,ut).getOr("")}}),c.on("ObjectResized",Se=>{const ut=Se.target;if(gf(ut)){const Ke=tt.fromDom(ut),We=Se.origin;il(We,"corner-")&&ie(Ke,We,Se.width),bn(Ke),Mu(c,Ke.dom,$1)}}),c.on("SwitchMode",()=>{p.on(Se=>{c.mode.isReadOnly()?Se.hideBars():Se.showBars()})}),c.on("dragstart dragend",Se=>{p.on(ut=>{Se.type==="dragstart"?(ut.hideBars(),ut.off()):(ut.on(),ut.showBars())})}),c.on("remove",()=>{we()}),{refresh:Se=>{p.on(ut=>ut.refreshBars(tt.fromDom(Se)))},hide:()=>{p.on(Se=>Se.hideBars())},show:()=>{p.on(Se=>Se.showBars())}}},yh=c=>{ta(c);const m=S3(c),p=cy(c,m),b=pa(c,m,p);return oC(c,b),Zp(c,b),_u(c,b),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},co=c=>({table:yh(c)});var oc=()=>{yt.add("dom",co)};oc()})();(function(){const yt=Object.getPrototypeOf,Oo=(t,r,a)=>{var l;return a(t,r.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===r.name},ho=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&Oo(t,String,(a,l)=>l.isPrototypeOf(a))?"string":r},Ro=t=>r=>ho(r)===t,Po=t=>r=>typeof r===t,Bo=t=>r=>t===r,wn=(t,r)=>to(t)&&Oo(t,r,(a,l)=>yt(a)===l),Kt=Ro("string"),to=Ro("object"),sn=t=>wn(t,Object),Xt=Ro("array"),$n=Bo(null),is=Po("boolean"),Hn=Bo(void 0),Kr=t=>t==null,hn=t=>!Kr(t),vt=Po("function"),Ns=Po("number"),Cn=(t,r)=>{if(Xt(t)){for(let a=0,l=t.length;a<l;++a)if(!r(t[a]))return!1;return!0}return!1},G=()=>{},Nt=t=>()=>t(),Ji=(t,r)=>(...a)=>t(r.apply(null,a)),ko=(t,r)=>a=>t(r(a)),re=t=>()=>t,ao=t=>t,Gn=(t,r)=>t===r;function oo(t,...r){return(...a)=>{const l=r.concat(a);return t.apply(null,l)}}const xe=t=>r=>!t(r),J=t=>()=>{throw new Error(t)},bs=t=>t(),Ue=re(!1),De=re(!0);class E{constructor(r,a){this.tag=r,this.value=a}static some(r){return new E(!0,r)}static none(){return E.singletonNone}fold(r,a){return this.tag?a(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?E.some(r(this.value)):E.none()}bind(r){return this.tag?r(this.value):E.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:E.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return hn(r)?E.some(r):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const lo=Array.prototype.slice,Be=Array.prototype.indexOf,go=Array.prototype.push,Ot=(t,r)=>Be.call(t,r),Me=(t,r)=>{const a=Ot(t,r);return a===-1?E.none():E.some(a)},zo=(t,r)=>Ot(t,r)>-1,ls=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(r(u,a))return!0}return!1},Ko=(t,r)=>{const a=[];for(let l=0;l<t;l++)a.push(r(l));return a},xr=(t,r)=>{const a=[];for(let l=0;l<t.length;l+=r){const u=lo.call(t,l,l+r);a.push(u)}return a},Ne=(t,r)=>{const a=t.length,l=new Array(a);for(let u=0;u<a;u++){const g=t[u];l[u]=r(g,u)}return l},ct=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];r(u,a)}},B=(t,r)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];r(l,a)}},ys=(t,r)=>{const a=[],l=[];for(let u=0,g=t.length;u<g;u++){const f=t[u];(r(f,u)?a:l).push(f)}return{pass:a,fail:l}},qo=(t,r)=>{const a=[];for(let l=0,u=t.length;l<u;l++){const g=t[l];r(g,l)&&a.push(g)}return a},Pn=(t,r,a)=>(B(t,(l,u)=>{a=r(a,l,u)}),a),Io=(t,r,a)=>(ct(t,(l,u)=>{a=r(a,l,u)}),a),pn=(t,r,a)=>{for(let l=0,u=t.length;l<u;l++){const g=t[l];if(r(g,l))return E.some(g);if(a(g,l))break}return E.none()},Ut=(t,r)=>pn(t,r,Ue),Wo=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(r(u,a))return E.some(a)}return E.none()},$t=t=>{const r=[];for(let a=0,l=t.length;a<l;++a){if(!Xt(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);go.apply(r,t[a])}return r},Ce=(t,r)=>$t(Ne(t,r)),el=(t,r)=>{for(let a=0,l=t.length;a<l;++a){const u=t[a];if(r(u,a)!==!0)return!1}return!0},hr=t=>{const r=lo.call(t,0);return r.reverse(),r},kt=(t,r)=>qo(t,a=>!zo(r,a)),El=(t,r)=>{const a={};for(let l=0,u=t.length;l<u;l++){const g=t[l];a[String(g)]=r(g,l)}return a},_n=t=>[t],od=(t,r)=>{const a=lo.call(t,0);return a.sort(r),a},xn=(t,r)=>r>=0&&r<t.length?E.some(t[r]):E.none(),qr=t=>xn(t,0),Ol=t=>xn(t,t.length-1),Rs=vt(Array.from)?Array.from:t=>lo.call(t),Kn=(t,r)=>{for(let a=0;a<t.length;a++){const l=r(t[a],a);if(l.isSome())return l}return E.none()},dn=Object.keys,Tl=Object.hasOwnProperty,Bn=(t,r)=>{const a=dn(t);for(let l=0,u=a.length;l<u;l++){const g=a[l],f=t[g];r(f,g)}},an=(t,r)=>Al(t,(a,l)=>({k:l,v:r(a,l)})),Al=(t,r)=>{const a={};return Bn(t,(l,u)=>{const g=r(l,u);a[g.k]=g.v}),a},un=t=>(r,a)=>{t[a]=r},xi=(t,r,a,l)=>{Bn(t,(u,g)=>{(r(u,g)?a:l)(u,g)})},ws=(t,r)=>{const a={},l={};return xi(t,r,un(a),un(l)),{t:a,f:l}},Ls=(t,r)=>{const a={};return xi(t,r,un(a),G),a},Si=(t,r)=>{const a=[];return Bn(t,(l,u)=>{a.push(r(l,u))}),a},pr=(t,r)=>{const a=dn(t);for(let l=0,u=a.length;l<u;l++){const g=a[l],f=t[g];if(r(f,g,t))return E.some(f)}return E.none()},ki=t=>Si(t,ao),nt=(t,r)=>wo(t,r)?E.from(t[r]):E.none(),wo=(t,r)=>Tl.call(t,r),Gs=(t,r)=>wo(t,r)&&t[r]!==void 0&&t[r]!==null,Xr=(t,r,a=Gn)=>t.exists(l=>a(l,r)),pc=(t,r,a=Gn)=>ol(t,r,a).getOr(t.isNone()&&r.isNone()),tl=t=>{const r=[],a=l=>{r.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return r},jo=t=>{const r=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())r.push(l.getOrDie());else return E.none()}return E.some(r)},ol=(t,r,a)=>t.isSome()&&r.isSome()?E.some(a(t.getOrDie(),r.getOrDie())):E.none(),Dl=(t,r,a,l)=>t.isSome()&&r.isSome()&&a.isSome()?E.some(l(t.getOrDie(),r.getOrDie(),a.getOrDie())):E.none(),Xo=(t,r)=>t!=null?E.some(r(t)):E.none(),It=(t,r)=>t?E.some(r):E.none(),tr=(t,r)=>t+r,_i=(t,r)=>t.substring(r),nd=(t,r,a)=>r===""||t.length>=r.length&&t.substr(a,a+r.length)===r,dm=(t,r)=>Mn(t,r)?_i(t,r.length):t,Cs=(t,r)=>fr(t,r)?t:tr(t,r),Sr=(t,r,a=0,l)=>{const u=t.indexOf(r,a);return u!==-1?Hn(l)?!0:u+r.length<=l:!1},Mn=(t,r)=>nd(t,r,0),fr=(t,r)=>nd(t,r,t.length-r.length),Yr=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),Hs=t=>t.length>0,kr=t=>!Hs(t),Ao=t=>t.style!==void 0&&vt(t.style.getPropertyValue),or=(t,r)=>{const a=(r||document).createElement("div");if(a.innerHTML=t,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,t),new Error(l)}return Ei(a.childNodes[0])},Ia=(t,r)=>{const a=(r||document).createElement(t);return Ei(a)},rd=(t,r)=>{const a=(r||document).createTextNode(t);return Ei(a)},Ei=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Xe={fromHtml:or,fromTag:Ia,fromText:rd,fromDom:Ei,fromPoint:(t,r,a)=>E.from(t.dom.elementFromPoint(r,a)).map(Ei)},tt=typeof window<"u"?window:Function("return this;")(),_r=(t,r)=>{let a=r??tt;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},sd=(t,r)=>{const a=t.split(".");return _r(a,r)},Ml=(t,r)=>sd(t,r),Xd=(t,r)=>{const a=Ml(t,r);if(a==null)throw new Error(t+" not available on this browser");return a},Yo=Object.getPrototypeOf,ad=t=>Xd("HTMLElement",t),Nl=t=>{const r=sd("ownerDocument.defaultView",t);return to(t)&&(ad(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Yo(t).constructor.name))},Rl=9,Oi=11,Yd=1,Pr=3,$o=t=>t.dom.nodeName.toLowerCase(),Qd=t=>t.dom.nodeType,nl=t=>r=>Qd(r)===t,xs=t=>nr(t)&&Nl(t.dom),nr=nl(Yd),Er=nl(Pr),Ks=nl(Rl),fc=nl(Oi),vc=t=>r=>nr(r)&&$o(r)===t,ti=(t,r)=>{const a=t.dom;if(a.nodeType!==Yd)return!1;{const l=a;if(l.matches!==void 0)return l.matches(r);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(r);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(r);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},Ll=t=>t.nodeType!==Yd&&t.nodeType!==Rl&&t.nodeType!==Oi||t.childElementCount===0,Do=(t,r)=>{const a=r===void 0?document:r.dom;return Ll(a)?[]:Ne(a.querySelectorAll(t),Xe.fromDom)},um=(t,r)=>{const a=r===void 0?document:r.dom;return Ll(a)?E.none():E.from(a.querySelector(t)).map(Xe.fromDom)},Fo=(t,r)=>t.dom===r.dom,xa=(t,r)=>{const a=t.dom,l=r.dom;return a===l?!1:a.contains(l)},Or=t=>Xe.fromDom(t.dom.ownerDocument),Hl=t=>Ks(t)?t:Or(t),Qr=t=>Xe.fromDom(Hl(t).dom.documentElement),bc=t=>Xe.fromDom(Hl(t).dom.defaultView),cs=t=>E.from(t.dom.parentNode).map(Xe.fromDom),mm=t=>cs(t),Ss=t=>E.from(t.dom.parentElement).map(Xe.fromDom),gm=(t,r)=>{const a=vt(r)?r:Ue;let l=t.dom;const u=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,f=Xe.fromDom(g);if(u.push(f),a(f)===!0)break;l=g}return u},Pl=t=>E.from(t.dom.offsetParent).map(Xe.fromDom),Cg=t=>E.from(t.dom.nextSibling).map(Xe.fromDom),Sa=t=>Ne(t.dom.childNodes,Xe.fromDom),rl=(t,r)=>{const a=t.dom.childNodes;return E.from(a[r]).map(Xe.fromDom)},Jd=t=>rl(t,0),hm=(t,r)=>({element:t,offset:r}),eu=(t,r)=>{const a=Sa(t);return a.length>0&&r<a.length?hm(a[r],0):hm(t,r)},sl=t=>fc(t)&&hn(t.dom.host),tu=vt(Element.prototype.attachShadow)&&vt(Node.prototype.getRootNode),ou=re(tu),Jr=tu?t=>Xe.fromDom(t.dom.getRootNode()):Hl,fn=t=>sl(t)?t:Xe.fromDom(Hl(t).dom.body),al=t=>nu(t).isSome(),nu=t=>{const r=Jr(t);return sl(r)?E.some(r):E.none()},Ti=t=>Xe.fromDom(t.dom.host),oi=t=>{if(ou()&&hn(t.target)){const r=Xe.fromDom(t.target);if(nr(r)&&xg(r)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return qr(a)}}return E.from(t.target)},xg=t=>hn(t.dom.shadowRoot),Ps=t=>{const r=Er(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const a=r.ownerDocument;return nu(Xe.fromDom(r)).fold(()=>a.body.contains(r),ko(Ps,Ti))},Br=()=>L(Xe.fromDom(document)),L=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Xe.fromDom(r)},z=(t,r,a)=>{if(Kt(a)||is(a)||Ns(a))t.setAttribute(r,a+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Z=(t,r,a)=>{z(t.dom,r,a)},ae=(t,r)=>{const a=t.dom;Bn(r,(l,u)=>{z(a,u,l)})},lt=(t,r)=>{const a=t.dom.getAttribute(r);return a===null?void 0:a},_t=(t,r)=>E.from(lt(t,r)),In=(t,r)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(r):!1},Co=(t,r)=>{t.dom.removeAttribute(r)},Bl=t=>Io(t.dom.attributes,(r,a)=>(r[a.name]=a.value,r),{}),Ai=(t,r,a)=>{if(!Kt(a))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ao(t)&&t.style.setProperty(r,a)},qs=(t,r)=>{Ao(t)&&t.style.removeProperty(r)},fe=(t,r,a)=>{const l=t.dom;Ai(l,r,a)},Bs=(t,r)=>{const a=t.dom;Bn(r,(l,u)=>{Ai(a,u,l)})},Xs=(t,r)=>{const a=t.dom;Bn(r,(l,u)=>{l.fold(()=>{qs(a,u)},g=>{Ai(a,u,g)})})},Ir=(t,r)=>{const a=t.dom,l=window.getComputedStyle(a).getPropertyValue(r);return l===""&&!Ps(t)?rr(a,r):l},rr=(t,r)=>Ao(t)?t.style.getPropertyValue(r):"",ln=(t,r)=>{const a=t.dom,l=rr(a,r);return E.from(l).filter(u=>u.length>0)},Il=t=>{const r={},a=t.dom;if(Ao(a))for(let l=0;l<a.style.length;l++){const u=a.style.item(l);r[u]=a.style[u]}return r},Sg=(t,r,a)=>{const l=Xe.fromTag(t);return fe(l,r,a),ln(l,r).isSome()},So=(t,r)=>{const a=t.dom;qs(a,r),Xr(_t(t,"style").map(Yr),"")&&Co(t,"style")},yc=t=>t.dom.offsetWidth,ru=(t,r)=>{const a=(f,y)=>{if(!Ns(y)&&!y.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+y);const C=f.dom;Ao(C)&&(C.style[t]=y+"px")},l=f=>{const y=r(f);if(y<=0||y===null){const C=Ir(f,t);return parseFloat(C)||0}return y},u=l,g=(f,y)=>Io(y,(C,_)=>{const T=Ir(f,_),D=T===void 0?0:parseInt(T,10);return isNaN(D)?C:C+D},0);return{set:a,get:l,getOuter:u,aggregate:g,max:(f,y,C)=>{const _=g(f,C);return y>_?y-_:0}}},Tr=ru("height",t=>{const r=t.dom;return Ps(t)?r.getBoundingClientRect().height:r.offsetHeight}),sr=t=>Tr.get(t),Fl=t=>Tr.getOuter(t),Mv=(t,r)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Tr.max(t,r,a);fe(t,"max-height",l+"px")},pm=(t,r)=>({left:t,top:r,translate:(a,l)=>pm(t+a,r+l)}),mn=pm,ca=t=>{const r=t.getBoundingClientRect();return mn(r.left,r.top)},il=(t,r)=>t!==void 0?t:r!==void 0?r:0,Ys=t=>{const r=t.dom.ownerDocument,a=r.body,l=r.defaultView,u=r.documentElement;if(a===t.dom)return mn(a.offsetLeft,a.offsetTop);const g=il(l==null?void 0:l.pageYOffset,u.scrollTop),f=il(l==null?void 0:l.pageXOffset,u.scrollLeft),y=il(u.clientTop,a.clientTop),C=il(u.clientLeft,a.clientLeft);return tn(t).translate(f-C,g-y)},tn=t=>{const r=t.dom,a=r.ownerDocument.body;return a===r?mn(a.offsetLeft,a.offsetTop):Ps(t)?ca(r):mn(0,0)},su=ru("width",t=>t.dom.offsetWidth),kg=(t,r)=>su.set(t,r),ar=t=>su.get(t),ll=t=>su.getOuter(t),da=(t,r)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=su.max(t,r,a);fe(t,"max-width",l+"px")},Lo=t=>{let r=!1,a;return(...l)=>(r||(r=!0,a=t.apply(null,l)),a)},fm=(t,r,a,l)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!u,f=t.isiOS()||t.isAndroid(),y=f||l("(pointer:coarse)"),C=u||!g&&f&&l("(min-device-width:768px)"),_=g||f&&!C,T=r.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,D=!_&&!C&&!T;return{isiPad:re(u),isiPhone:re(g),isTablet:re(C),isPhone:re(_),isTouch:re(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:re(T),isDesktop:re(D)}},id=(t,r)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(r))return l}},_g=(t,r)=>{const a=id(t,r);if(!a)return{major:0,minor:0};const l=u=>Number(r.replace(a,"$"+u));return ni(l(1),l(2))},Eg=(t,r)=>{const a=String(r).toLowerCase();return t.length===0?En():_g(t,a)},En=()=>ni(0,0),ni=(t,r)=>({major:t,minor:r}),Nn={nu:ni,detect:Eg,unknown:En},Fa=(t,r)=>Kn(r.brands,a=>{const l=a.brand.toLowerCase();return Ut(t,u=>{var g;return l===((g=u.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(u=>({current:u.name,version:Nn.nu(parseInt(a.version,10),0)}))}),Di=(t,r)=>{const a=String(r).toLowerCase();return Ut(t,l=>l.search(a))},Fr=(t,r)=>Di(t,r).map(a=>{const l=Nn.detect(a.versionRegexes,r);return{current:a.name,version:l}}),au=(t,r)=>Di(t,r).map(a=>{const l=Nn.detect(a.versionRegexes,r);return{current:a.name,version:l}}),wc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Va=t=>r=>Sr(r,t),Og=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Sr(t,"edge/")&&Sr(t,"chrome")&&Sr(t,"safari")&&Sr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wc],search:t=>Sr(t,"chrome")&&!Sr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Sr(t,"msie")||Sr(t,"trident")},{name:"Opera",versionRegexes:[wc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Va("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Va("firefox")},{name:"Safari",versionRegexes:[wc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Sr(t,"safari")||Sr(t,"mobile/"))&&Sr(t,"applewebkit")}],Cc=[{name:"Windows",search:Va("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Sr(t,"iphone")||Sr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Va("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Va("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Va("linux"),versionRegexes:[]},{name:"Solaris",search:Va("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Va("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Va("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],cl={browsers:re(Og),oses:re(Cc)},xc="Edge",za="Chromium",vm="IE",Qs="Opera",Sc="Firefox",Vl="Safari",iu=()=>bm({current:void 0,version:Nn.unknown()}),bm=t=>{const r=t.current,a=t.version,l=u=>()=>r===u;return{current:r,version:a,isEdge:l(xc),isChromium:l(za),isIE:l(vm),isOpera:l(Qs),isFirefox:l(Sc),isSafari:l(Vl)}},ld={unknown:iu,nu:bm,edge:re(xc),chromium:re(za),ie:re(vm),opera:re(Qs),firefox:re(Sc),safari:re(Vl)},t1="Windows",lu="iOS",o1="Android",kc="Linux",K="macOS",tp="Solaris",Za="FreeBSD",cu="ChromeOS",cd=()=>n1({current:void 0,version:Nn.unknown()}),n1=t=>{const r=t.current,a=t.version,l=u=>()=>r===u;return{current:r,version:a,isWindows:l(t1),isiOS:l(lu),isAndroid:l(o1),isMacOS:l(K),isLinux:l(kc),isSolaris:l(tp),isFreeBSD:l(Za),isChromeOS:l(cu)}},To={unknown:cd,nu:n1,windows:re(t1),ios:re(lu),android:re(o1),linux:re(kc),macos:re(K),solaris:re(tp),freebsd:re(Za),chromeos:re(cu)},zl={detect:(t,r,a)=>{const l=cl.browsers(),u=cl.oses(),g=r.bind(C=>Fa(l,C)).orThunk(()=>Fr(l,t)).fold(ld.unknown,ld.nu),f=au(u,t).fold(To.unknown,To.nu),y=fm(f,g,t,a);return{browser:g,os:f,deviceType:y}}},op=t=>window.matchMedia(t).matches;let Mi=Lo(()=>zl.detect(navigator.userAgent,E.from(navigator.userAgentData),op));const ds=()=>Mi(),du=(t,r,a,l,u,g,f)=>({target:t,x:r,y:a,stop:l,prevent:u,kill:g,raw:f}),Ua=t=>{const r=Xe.fromDom(oi(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),u=Ji(l,a);return du(r,t.clientX,t.clientY,a,l,u,t)},uu=(t,r)=>a=>{t(a)&&r(Ua(a))},ym=(t,r,a,l,u)=>{const g=uu(a,l);return t.dom.addEventListener(r,g,u),{unbind:oo(mu,t,r,g,u)}},np=(t,r,a,l)=>ym(t,r,a,l,!1),_c=(t,r,a,l)=>ym(t,r,a,l,!0),mu=(t,r,a,l)=>{t.dom.removeEventListener(r,a,l)},Zl=(t,r)=>{cs(t).each(a=>{a.dom.insertBefore(r.dom,t.dom)})},rp=(t,r)=>{Cg(t).fold(()=>{cs(t).each(a=>{ks(a,r)})},a=>{Zl(a,r)})},us=(t,r)=>{Jd(t).fold(()=>{ks(t,r)},a=>{t.dom.insertBefore(r.dom,a.dom)})},ks=(t,r)=>{t.dom.appendChild(r.dom)},Tg=(t,r,a)=>{rl(t,a).fold(()=>{ks(t,r)},l=>{Zl(l,r)})},wm=(t,r)=>{ct(r,a=>{ks(t,a)})},gu=t=>{t.dom.textContent="",ct(Sa(t),r=>{dl(r)})},dl=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},ka=t=>{const r=t!==void 0?t.dom:document,a=r.body.scrollLeft||r.documentElement.scrollLeft,l=r.body.scrollTop||r.documentElement.scrollTop;return mn(a,l)},Cm=(t,r,a)=>{const l=(a!==void 0?a.dom:document).defaultView;l&&l.scrollTo(t,r)},xm=t=>{const r=t===void 0?window:t;return ds().browser.isFirefox()?E.none():E.from(r.visualViewport)},sp=(t,r,a,l)=>({x:t,y:r,width:a,height:l,right:t+a,bottom:r+l}),ul=t=>{const r=t===void 0?window:t,a=r.document,l=ka(Xe.fromDom(a));return xm(r).fold(()=>{const u=r.document.documentElement,g=u.clientWidth,f=u.clientHeight;return sp(l.left,l.top,g,f)},u=>sp(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height))},Sm=()=>Xe.fromDom(document),Ag=(t,r)=>t.view(r).fold(re([]),a=>{const l=t.owner(a),u=Ag(t,l);return[a].concat(u)}),Dg=(t,r)=>{const a=r.owner(t),l=Ag(r,a);return E.some(l)};var Nv=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?E.none():E.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(Xe.fromDom)},owner:t=>Or(t)});const Mg=t=>{const r=Sm(),a=ka(r);return Dg(t,Nv).fold(oo(Ys,t),l=>{const u=tn(t),g=Pn(l,(f,y)=>{const C=tn(y);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return mn(g.left+u.left+a.left,g.top+u.top+a.top)})},Rv=(t,r,a)=>({point:t,width:r,height:a}),dd=(t,r,a,l)=>({x:t,y:r,width:a,height:l}),ir=(t,r,a,l)=>({x:t,y:r,width:a,height:l,right:t+a,bottom:r+l}),Rn=t=>{const r=Ys(t),a=ll(t),l=Fl(t);return ir(r.left,r.top,a,l)},_s=t=>{const r=Mg(t),a=ll(t),l=Fl(t);return ir(r.left,r.top,a,l)},km=(t,r)=>{const a=Math.max(t.x,r.x),l=Math.max(t.y,r.y),u=Math.min(t.right,r.right),g=Math.min(t.bottom,r.bottom),f=u-a,y=g-l;return ir(a,l,f,y)},r1=(t,r)=>Io(r,(a,l)=>km(a,l),t),Is=()=>ul(window);var _m=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ud=t=>{const r=g=>g(t),a=re(t),l=()=>u,u={tag:!0,inner:t,fold:(g,f)=>f(t),isValue:De,isError:Ue,map:g=>Gt.value(g(t)),mapError:l,bind:r,exists:r,forall:r,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>E.some(t)};return u},ml=t=>{const r=()=>a,a={tag:!1,inner:t,fold:(l,u)=>l(t),isValue:Ue,isError:De,map:r,mapError:l=>Gt.error(l(t)),bind:r,exists:Ue,forall:De,getOr:ao,or:ao,getOrThunk:bs,orThunk:bs,getOrDie:J(String(t)),each:G,toOptional:E.none};return a},Gt={value:ud,error:ml,fromOption:(t,r)=>t.fold(()=>ml(r),ud)};var Vr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Vr||(Vr={}));const Em=(t,r,a)=>t.stype===Vr.Error?r(t.serror):a(t.svalue),Om=t=>{const r=[],a=[];return ct(t,l=>{Em(l,u=>a.push(u),u=>r.push(u))}),{values:r,errors:a}},Tm=(t,r)=>t.stype===Vr.Error?{stype:Vr.Error,serror:r(t.serror)}:t,s1=(t,r)=>t.stype===Vr.Value?{stype:Vr.Value,svalue:r(t.svalue)}:t,hu=(t,r)=>t.stype===Vr.Value?r(t.svalue):t,Am=(t,r)=>t.stype===Vr.Error?r(t.serror):t,Ni=t=>({stype:Vr.Value,svalue:t}),S=t=>({stype:Vr.Error,serror:t}),A={fromResult:t=>t.fold(S,Ni),toResult:t=>Em(t,Gt.error,Gt.value),svalue:Ni,partition:Om,serror:S,bind:hu,bindError:Am,map:s1,mapError:Tm,fold:Em},P=(t,r,a,l)=>({tag:"field",key:t,newKey:r,presence:a,prop:l}),q=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),ee=(t,r,a)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},He=(t,r)=>r,xt=(t,r)=>sn(t)&&sn(r)?ot(t,r):r,Rt=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<r.length;l++){const u=r[l];for(const g in u)wo(u,g)&&(a[g]=t(a[g],u[g]))}return a},ot=Rt(xt),Ft=Rt(He),Zo=()=>({tag:"required",process:{}}),Fn=t=>({tag:"defaultedThunk",process:t}),Es=t=>Fn(re(t)),Ho=()=>({tag:"option",process:{}}),no=t=>({tag:"mergeWithThunk",process:t}),Lv=t=>no(re(t)),a1=(t,r)=>t.length>0?A.svalue(ot(r,Ft.apply(void 0,t))):A.svalue(r),i1=t=>Ji(A.serror,$t)(t),ap={consolidateObj:(t,r)=>{const a=A.partition(t);return a.errors.length>0?i1(a.errors):a1(a.values,r)},consolidateArr:t=>{const r=A.partition(t);return r.errors.length>0?i1(r.errors):A.svalue(r.values)}},l1=t=>to(t)&&dn(t).length>100?" removed due to size":JSON.stringify(t,null,2),W4=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):t;return Ne(r,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Ng=(t,r)=>A.serror([{path:t,getErrorInfo:r}]),Hv=(t,r,a)=>Ng(t,()=>'Could not find valid *required* value for "'+r+'" in '+l1(a)),T2=(t,r)=>Ng(t,()=>'Choice schema did not contain choice key: "'+r+'"'),j4=(t,r,a)=>Ng(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+l1(r)),A2=(t,r)=>Ng(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),Ec=(t,r)=>Ng(t,re(r)),Ul=t=>{const r=(l,u)=>A.bindError(t(u),g=>Ec(l,g)),a=re("val");return{extract:r,toString:a}},ip=Ul(A.svalue),pu=(t,r,a,l)=>nt(r,a).fold(()=>Hv(t,a,r),l),D2=(t,r,a,l)=>{const u=nt(t,r).getOrThunk(()=>a(t));return l(u)},c1=(t,r,a)=>a(nt(t,r)),d1=(t,r,a,l)=>{const u=nt(t,r).map(g=>g===!0?a(t):g);return l(u)},Pv=(t,r,a,l,u)=>{const g=y=>u.extract(r.concat([l]),y),f=y=>y.fold(()=>A.svalue(E.none()),C=>{const _=u.extract(r.concat([l]),C);return A.map(_,E.some)});switch(t.tag){case"required":return pu(r,a,l,g);case"defaultedThunk":return D2(a,l,t.process,g);case"option":return c1(a,l,f);case"defaultedOptionThunk":return d1(a,l,t.process,f);case"mergeWithThunk":return D2(a,l,re({}),y=>{const C=ot(t.process(a),y);return g(C)})}},Bv=(t,r,a)=>{const l={},u=[];for(const g of a)ee(g,(f,y,C,_)=>{const T=Pv(C,t,r,f,_);A.fold(T,D=>{u.push(...D)},D=>{l[y]=D})},(f,y)=>{l[f]=y(r)});return u.length>0?A.serror(u):A.svalue(l)},Iv=t=>({extract:(r,a)=>t().extract(r,a),toString:()=>t().toString()}),Fv=t=>dn(Ls(t,hn)),ua=t=>{const r=At(t),a=Pn(t,(l,u)=>ee(u,g=>ot(l,{[g]:!0}),re(l)),{});return{extract:(l,u)=>{const g=is(u)?[]:Fv(u),f=qo(g,y=>!Gs(a,y));return f.length===0?r.extract(l,u):A2(l,f)},toString:r.toString}},At=t=>({extract:(r,a)=>Bv(r,a,t),toString:()=>`obj{
`+Ne(t,r=>ee(r,(a,l,u,g)=>a+" -> "+g.toString(),(a,l)=>"state("+a+")")).join(`
`)+"}"}),md=t=>({extract:(r,a)=>{const l=Ne(a,(u,g)=>t.extract(r.concat(["["+g+"]"]),u));return ap.consolidateArr(l)},toString:()=>"array("+t.toString()+")"}),zr=(t,r)=>{const a=r!==void 0?r:ao;return{extract:(l,u)=>{const g=[];for(const f of t){const y=f.extract(l,u);if(y.stype===Vr.Value)return{stype:Vr.Value,svalue:a(y.svalue)};g.push(y)}return ap.consolidateArr(g)},toString:()=>"oneOf("+Ne(t,l=>l.toString()).join(", ")+")"}},M2=(t,r)=>{const a=(l,u)=>md(Ul(t)).extract(l,u);return{extract:(l,u)=>{const g=dn(u),f=a(l,g);return A.bind(f,y=>{const C=Ne(y,_=>P(_,_,Zo(),r));return At(C).extract(l,u)})},toString:()=>"setOf("+r.toString()+")"}},Ar=(t,r)=>{const a=Lo(r);return{extract:(l,u)=>a().extract(l,u),toString:()=>a().toString()}},Wl=Ji(md,At),ma=re(ip),gt=(t,r)=>Ul(a=>{const l=typeof a;return t(a)?A.svalue(a):A.serror(`Expected type: ${r} but got: ${l}`)}),fu=gt(Ns,"number"),Sn=gt(Kt,"string"),vu=gt(is,"boolean"),lp=gt(vt,"function"),N2=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>N2(t[r]));default:return!1}},Dm=Ul(t=>N2(t)?A.svalue(t):A.serror("Expected value to be acceptable for sending via postMessage")),R2=(t,r,a,l)=>nt(a,l).fold(()=>j4(t,a,l),u=>u.extract(t.concat(["branch: "+l]),r)),Wa=(t,r)=>({extract:(a,l)=>nt(l,t).fold(()=>T2(a,t),u=>R2(a,l,r,u)),toString:()=>"chooseOn("+t+"). Possible values: "+dn(r)}),Vv=()=>md(ip),Oc=t=>Ul(r=>t(r).fold(A.serror,A.svalue)),Ve=(t,r)=>M2(a=>A.fromResult(t(a)),r),$4=(t,r,a)=>{const l=r.extract([t],a);return A.mapError(l,u=>({input:a,errors:u}))},Vn=(t,r,a)=>A.toResult($4(t,r,a)),Js=t=>t.fold(r=>{throw new Error(gd(r))},ao),Os=(t,r,a)=>Js(Vn(t,r,a)),gd=t=>`Errors: 
`+W4(t.errors).join(`
`)+`

Input object: `+l1(t.input),fo=(t,r)=>Wa(t,an(r,At)),zv=(t,r)=>Ar(t,r),On=P,po=q,Mm=t=>Oc(r=>zo(t,r)?Gt.value(r):Gt.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),Re=t=>On(t,t,Zo(),ma()),Dr=(t,r)=>On(t,t,Zo(),r),G4=t=>Dr(t,fu),lr=t=>Dr(t,Sn),hd=(t,r)=>On(t,t,Zo(),Mm(r)),Rg=t=>Dr(t,vu),vn=t=>Dr(t,lp),Zv=(t,r)=>On(t,t,Ho(),Ul(a=>A.serror("The field: "+t+" is forbidden. "+r))),bu=(t,r)=>On(t,t,Zo(),At(r)),u1=(t,r)=>On(t,t,Zo(),Wl(r)),ga=(t,r)=>On(t,t,Zo(),md(r)),_o=t=>On(t,t,Ho(),ma()),Tc=(t,r)=>On(t,t,Ho(),r),Nm=t=>Tc(t,fu),Fs=t=>Tc(t,Sn),Uv=(t,r)=>Tc(t,Mm(r)),Rm=t=>Tc(t,lp),L2=(t,r)=>Tc(t,md(r)),_a=(t,r)=>Tc(t,At(r)),H2=(t,r)=>Tc(t,ua(r)),ge=(t,r)=>On(t,t,Es(r),ma()),Ri=(t,r,a)=>On(t,t,Es(r),a),Li=(t,r)=>Ri(t,r,fu),es=(t,r)=>Ri(t,r,Sn),jl=(t,r,a)=>Ri(t,r,Mm(a)),Zr=(t,r)=>Ri(t,r,vu),zn=(t,r)=>Ri(t,r,lp),Lm=(t,r)=>Ri(t,r,Dm),pd=(t,r,a)=>Ri(t,r,md(a)),Hm=(t,r,a)=>Ri(t,r,At(a)),Lt=t=>{let r=t;return{get:()=>r,set:a=>{r=a}}},Ea={generate:t=>{if(!Xt(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],a={};return ct(t,(l,u)=>{const g=dn(l);if(g.length!==1)throw new Error("one and only one name per case");const f=g[0],y=l[f];if(a[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Xt(y))throw new Error("case arguments must be an array");r.push(f),a[f]=(...C)=>{const _=C.length;if(_!==y.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+y.length+" ("+y+"), got "+_);return{fold:(...T)=>{if(T.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+T.length);return T[u].apply(null,C)},match:T=>{const D=dn(T);if(r.length!==D.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+D.join(","));if(!el(r,R=>zo(D,R)))throw new Error("Not all branches were specified when using match. Specified: "+D.join(", ")+`
Required: `+r.join(", "));return T[f].apply(null,C)},log:T=>{console.log(T,{constructors:r,constructor:f,params:C})}}}}),a}};Ea.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const m1=t=>{const r=[],a=[];return ct(t,l=>{l.fold(u=>{r.push(u)},u=>{a.push(u)})}),{errors:r,values:a}},K4=(t,r)=>{const a={};return Bn(t,(l,u)=>{zo(r,u)||(a[u]=l)}),a},q4=(t,r)=>({[t]:r}),X4=t=>{const r={};return ct(t,a=>{r[a.key]=a.value}),r},Wv=(t,r)=>K4(t,r),Hi=(t,r)=>q4(t,r),ri=t=>X4(t),Y4=(t,r)=>t.length===0?Gt.value(r):Gt.value(ot(r,Ft.apply(void 0,t))),qn=t=>Gt.error($t(t)),g1=(t,r)=>{const a=m1(t);return a.errors.length>0?qn(a.errors):Y4(a.values,r)},gl=t=>vt(t)?t:Ue,P2=(t,r,a)=>{let l=t.dom;const u=gl(a);for(;l.parentNode;){l=l.parentNode;const g=Xe.fromDom(l),f=r(g);if(f.isSome())return f;if(u(g))break}return E.none()},Ac=(t,r,a)=>{const l=r(t),u=gl(a);return l.orThunk(()=>u(t)?E.none():P2(t,r,u))},yu=(t,r)=>Fo(t.element,r.event.target),fd={can:De,abort:Ue,run:G},ea=t=>{if(!Gs(t,"can")&&!Gs(t,"abort")&&!Gs(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...fd,...t}},B2=(t,r)=>(...a)=>Io(t,(l,u)=>l&&r(u).apply(void 0,a),!0),jv=(t,r)=>(...a)=>Io(t,(l,u)=>l||r(u).apply(void 0,a),!1),cp=t=>vt(t)?{can:De,abort:Ue,run:t}:t,h1=t=>{const r=B2(t,l=>l.can),a=jv(t,l=>l.abort);return{can:r,abort:a,run:(...l)=>{ct(t,u=>{u.run.apply(void 0,l)})}}},ms=re,hl=ms("touchstart"),wu=ms("touchmove"),Pm=ms("touchend"),p1=ms("touchcancel"),Oa=ms("mousedown"),Lg=ms("mousemove"),$v=ms("mouseout"),Gv=ms("mouseup"),ja=ms("mouseover"),Dc=ms("focusin"),f1=ms("focusout"),$l=ms("keydown"),Q4=ms("keyup"),ta=ms("input"),Bm=ms("change"),vd=ms("click"),I2=ms("transitioncancel"),Im=ms("transitionend"),F2=ms("transitionstart"),Kv=ms("selectstart"),Zn=t=>re("alloy."+t),Gl={tap:Zn("tap")},Pi=Zn("focus"),Fm=Zn("blur.post"),v1=Zn("paste.post"),Cu=Zn("receive"),$a=Zn("execute"),dp=Zn("focus.item"),up=Gl.tap,J4=Zn("longpress"),xu=Zn("sandbox.close"),Vm=Zn("typeahead.cancel"),mp=Zn("system.init"),b1=Zn("system.touchmove"),Hg=Zn("system.touchend"),bn=Zn("system.scroll"),Mc=Zn("system.resize"),Kl=Zn("system.attached"),bd=Zn("system.detached"),Su=Zn("system.dismissRequested"),qv=Zn("system.repositionRequested"),gp=Zn("focusmanager.shifted"),hp=Zn("slotcontainer.visibility"),V2=Zn("system.external.element.scroll"),z2=Zn("change.tab"),y1=Zn("dismiss.tab"),Z2=Zn("highlight"),w1=Zn("dehighlight"),vo=(t,r)=>{Xv(t,t.element,r,{})},wt=(t,r,a)=>{Xv(t,t.element,r,a)},Nc=t=>{vo(t,$a())},Rc=(t,r,a)=>{Xv(t,r,a,{})},Xv=(t,r,a,l)=>{const u={target:r,...l};t.getSystem().triggerEvent(a,r,u)},Yv=(t,r,a,l)=>{const u={...l,target:r};t.getSystem().triggerEvent(a,r,u)},C1=(t,r,a,l)=>{t.getSystem().triggerEvent(a,r,l.event)},on=t=>ri(t),pp=(t,r)=>({key:t,value:ea({abort:r})}),U2=(t,r)=>({key:t,value:ea({can:r})}),fp=t=>({key:t,value:ea({run:(r,a)=>{a.event.prevent()}})}),Te=(t,r)=>({key:t,value:ea({run:r})}),x1=(t,r,a)=>({key:t,value:ea({run:(l,u)=>{r.apply(void 0,[l,u].concat(a))}})}),ek=t=>r=>Te(t,r),vp=t=>r=>({key:t,value:ea({run:(a,l)=>{yu(a,l)&&r(a,l)}})}),tk=(t,r)=>Te(t,(a,l)=>{a.getSystem().getByUid(r).each(u=>{C1(u,u.element,t,l)})}),zm=(t,r,a)=>{const l=r.partUids[a];return tk(t,l)},Qv=(t,r)=>Te(t,(a,l)=>{const u=l.event,g=a.getSystem().getByDom(u.target).getOrThunk(()=>Ac(u.target,f=>a.getSystem().getByDom(f).toOptional(),Ue).getOr(a));r(a,g,l)}),Zm=t=>Te(t,(r,a)=>{a.cut()}),W2=t=>Te(t,(r,a)=>{a.stop()}),Lc=(t,r)=>vp(t)(r),yn=vp(Kl()),Ga=vp(bd()),Um=vp(mp()),ql=ek($a()),ok=(t,r)=>{const a=(r||document).createElement("div");return a.innerHTML=t,Sa(Xe.fromDom(a))},S1=t=>t.dom.innerHTML,pl=(t,r)=>{const a=Or(t).dom,l=Xe.fromDom(a.createDocumentFragment()),u=ok(r,a);wm(l,u),gu(t),ks(t,l)},nk=t=>{const r=Xe.fromTag("div"),a=Xe.fromDom(t.dom.cloneNode(!0));return ks(r,a),S1(r)},j2=(t,r)=>Xe.fromDom(t.dom.cloneNode(r)),$2=t=>j2(t,!1),k1=t=>{if(sl(t))return"#shadow-root";{const r=$2(t);return nk(r)}},yd=t=>k1(t),rk=(t,r,a)=>Fo(r,t.element)&&!Fo(r,a),bp=on([U2(Pi(),(t,r)=>{const a=r.event,l=a.originator,u=a.target;return rk(t,l,u)?(console.warn(Pi()+` did not get interpreted by the desired target. 
Originator: `+yd(l)+`
Target: `+yd(u)+`
Check the `+Pi()+" event handlers"),!1):!0})]);var Jv=Object.freeze({__proto__:null,events:bp});let wd=0;const Qe=t=>{const r=new Date().getTime(),a=Math.floor(Math.random()*1e9);return wd++,t+"_"+a+wd+String(r)},G2=re("alloy-id-"),eb=re("data-alloy-id"),sk=G2(),K2=eb(),Wm=(t,r)=>{const a=Qe(sk+t);return Pg(r,a),a},Pg=(t,r)=>{Object.defineProperty(t.dom,K2,{value:r,writable:!0})},yp=t=>{const r=nr(t)?t.dom[K2]:null;return E.from(r)},Bg=t=>Qe(t),ak=ao,ku=t=>{const r=u=>`The component must be in a context to execute: ${u}`+(t?`
`+yd(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(r(u))},l=u=>()=>{console.warn(r(u))};return{debugInfo:re("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ue}},wp=ku(),Bi=(t,r,a)=>{const l=a.toString(),u=l.indexOf(")")+1,g=l.indexOf("("),f=l.substring(g+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:si(f.slice(0,1).concat(f.slice(3)))}),t},si=t=>Ne(t,r=>fr(r,"/*")?r.substring(0,r.length-2):r),_1=(t,r)=>{const a=t.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),g=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:si(g)}),t},q2=(t,r)=>{const a=r.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),g=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:si(g.slice(1))}),t},Cp=Qe("alloy-premade"),E1=t=>(Object.defineProperty(t.element.dom,Cp,{value:t.uid,writable:!0}),Hi(Cp,t)),_u=t=>wo(t.dom,Cp),Eu=t=>nt(t,Cp),xp=t=>q2((r,...a)=>t(r.getApis(),r,...a),t),fl={init:()=>Ka({readState:re("No State required")})},Ka=t=>t,ik=(t,r)=>{const a=Ne(r,u=>_a(u.name(),[Re("config"),ge("state",fl)])),l=Vn("component.behaviours",At(a),t.behaviours).fold(u=>{throw new Error(gd(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},ao);return{list:r,data:an(l,u=>{const g=u.map(f=>({config:f.config,state:f.state.init(f.config)}));return re(g)})}},X2=t=>t.list,tb=t=>t.data,Y2=(t,r)=>{const a={};return Bn(t,(l,u)=>{Bn(l,(g,f)=>{const y=nt(a,f).getOr([]);a[f]=y.concat([r(u,g)])})}),a},ai=t=>({classes:Hn(t.classes)?[]:t.classes,attributes:Hn(t.attributes)?{}:t.attributes,styles:Hn(t.styles)?{}:t.styles}),O1=(t,r)=>({...t,attributes:{...t.attributes,...r.attributes},styles:{...t.styles,...r.styles},classes:t.classes.concat(r.classes)}),Sp=(t,r,a,l)=>{const u={...r};ct(a,T=>{u[T.name()]=T.exhibit(t,l)});const g=Y2(u,(T,D)=>({name:T,modification:D})),f=T=>Pn(T,(D,R)=>({...R.modification,...D}),{}),y=Pn(g.classes,(T,D)=>D.modification.concat(T),[]),C=f(g.attributes),_=f(g.styles);return ai({classes:y,attributes:C,styles:_})},T1=(t,r,a,l)=>{try{const u=od(a,(g,f)=>{const y=g[r],C=f[r],_=l.indexOf(y),T=l.indexOf(C);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));return _<T?-1:T<_?1:0});return Gt.value(u)}catch(u){return Gt.error([u])}},kp=(t,r)=>({handler:t,purpose:r}),Q2=(t,r)=>({cHandler:t,purpose:r}),Cd=(t,r)=>Q2(oo.apply(void 0,[t.handler].concat(r)),t.purpose),jm=t=>t.cHandler,A1=(t,r)=>({name:t,handler:r}),Ig=(t,r)=>{const a={};return ct(t,l=>{a[l.name()]=l.handlers(r)}),a},lk=(t,r,a)=>{const l={...a,...Ig(r,t)};return Y2(l,A1)},Fg=(t,r,a,l)=>{const u=lk(t,a,l);return ob(u,r)},D1=t=>{const r=cp(t);return(a,l,...u)=>{const g=[a,l].concat(u);r.abort.apply(void 0,g)?l.stop():r.can.apply(void 0,g)&&r.run.apply(void 0,g)}},Vg=(t,r)=>Gt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ne(r,a=>a.name),null,2)]),J2=(t,r,a)=>{const l=r[a];return l?T1("Event: "+a,"name",t,l).map(u=>{const g=Ne(u,f=>f.handler);return h1(g)}):Vg(a,t)},ob=(t,r)=>{const a=Si(t,(l,u)=>(l.length===1?Gt.value(l[0].handler):J2(l,r,u)).map(g=>{const f=D1(g),y=l.length>1?qo(r[u],C=>ls(l,_=>_.name===C)).join(" > "):l[0].name;return Hi(u,kp(f,y))}));return g1(a,{})},Hc="alloy.base.behaviour",ew=At([On("dom","dom",Zo(),At([Re("tag"),ge("styles",{}),ge("classes",[]),ge("attributes",{}),_o("value"),_o("innerHtml")])),Re("components"),Re("uid"),ge("events",{}),ge("apis",{}),On("eventOrder","eventOrder",Lv({[$a()]:["disabling",Hc,"toggling","typeaheadevents"],[Pi()]:[Hc,"focusing","keying"],[mp()]:[Hc,"disabling","toggling","representing"],[ta()]:[Hc,"representing","streaming","invalidating"],[bd()]:[Hc,"representing","item-events","tooltipping"],[Oa()]:["focusing",Hc,"item-type-events"],[hl()]:["focusing",Hc,"item-type-events"],[ja()]:["item-type-events","tooltipping"],[Cu()]:["receiving","reflecting","tooltipping"]}),ma()),_o("domModification")]),nn=t=>Vn("custom.definition",ew,t),tw=t=>({...t.dom,uid:t.uid,domChildren:Ne(t.components,r=>r.element)}),_p=t=>t.domModification.fold(()=>ai({}),ai),Ep=t=>t.events,$m=(t,r)=>{const a=lt(t,r);return a===void 0||a===""?[]:a.split(" ")},ow=(t,r,a)=>{const l=$m(t,r).concat([a]);return Z(t,r,l.join(" ")),!0},xd=(t,r,a)=>{const l=qo($m(t,r),u=>u!==a);return l.length>0?Z(t,r,l.join(" ")):Co(t,r),!1},vr=t=>t.dom.classList!==void 0,nw=t=>$m(t,"class"),ck=(t,r)=>ow(t,"class",r),rw=(t,r)=>xd(t,"class",r),Tn=(t,r)=>{vr(t)?t.dom.classList.add(r):ck(t,r)},nb=t=>{(vr(t)?t.dom.classList:nw(t)).length===0&&Co(t,"class")},cn=(t,r)=>{vr(t)?t.dom.classList.remove(r):rw(t,r),nb(t)},cr=(t,r)=>vr(t)&&t.dom.classList.contains(r),Ln=(t,r)=>{ct(r,a=>{Tn(t,a)})},Ta=(t,r)=>{ct(r,a=>{cn(t,a)})},M1=(t,r)=>el(r,a=>cr(t,a)),Xn=t=>{const r=t.dom.classList,a=new Array(r.length);for(let l=0;l<r.length;l++){const u=r.item(l);u!==null&&(a[l]=u)}return a},N1=t=>vr(t)?Xn(t):nw(t),Ii=t=>t.dom.value,Xl=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},Gm=(t,r,a)=>rl(t,r).map(l=>{if(a.exists(u=>!Fo(u,l))){const u=a.map($o).getOr("span"),g=Xe.fromTag(u);return Zl(l,g),g}else return l}),qa=(t,r,a)=>{a.fold(()=>ks(t,r),l=>{Fo(l,r)||(Zl(l,r),dl(l))})},ii=(t,r,a)=>{const l=Ne(r,a),u=Sa(t);return ct(u.slice(l.length),dl),l},zg=(t,r,a,l)=>{const u=rl(t,r),g=l(a,u),f=Gm(t,r,u);return qa(t,g.element,f),g},Zg=(t,r,a)=>ii(t,r,(l,u)=>zg(t,u,l,a)),sw=(t,r)=>ii(t,r,(a,l)=>{const u=rl(t,l);return qa(t,a,u),a}),rb=(t,r)=>{const a=dn(t),l=dn(r),u=kt(l,a),g=ws(t,(f,y)=>!wo(r,y)||f!==r[y]).t;return{toRemove:u,toSet:g}},dk=(t,r)=>{const{class:a,style:l,...u}=Bl(r),{toSet:g,toRemove:f}=rb(t.attributes,u),y=()=>{ct(f,be=>Co(r,be)),ae(r,g)},C=Il(r),{toSet:_,toRemove:T}=rb(t.styles,C),D=()=>{ct(T,be=>So(r,be)),Bs(r,_)},R=N1(r),V=kt(R,t.classes),Q=kt(t.classes,R),le=()=>{Ln(r,Q),Ta(r,V)},Oe=be=>{pl(r,be)},Y=()=>{const be=t.domChildren;sw(r,be)},ne=()=>{const be=r,pe=t.value.getOrUndefined();pe!==Ii(be)&&Xl(be,pe??"")};return y(),le(),D(),t.innerHtml.fold(Y,Oe),ne(),r},sb=t=>{const r=Xe.fromTag(t.tag);ae(r,t.attributes),Ln(r,t.classes),Bs(r,t.styles),t.innerHtml.each(l=>pl(r,l));const a=t.domChildren;return wm(r,a),t.value.each(l=>{Xl(r,l)}),r},aw=(t,r)=>{try{const a=dk(t,r);return E.some(a)}catch{return E.none()}},iw=t=>t.innerHtml.isSome()&&t.domChildren.length>0,uk=(t,r)=>{const a=u=>$o(u)===t.tag&&!iw(t)&&!_u(u),l=r.filter(a).bind(u=>aw(t,u)).getOrThunk(()=>sb(t));return Pg(l,t.uid),l},lw=t=>{const r=nt(t,"behaviours").getOr({});return Ce(dn(r),a=>{const l=r[a];return hn(l)?[l.me]:[]})},cw=(t,r)=>ik(t,r),Op=t=>{const r=lw(t);return cw(t,r)},Tp=(t,r,a)=>{const l=tw(t),u=_p(t),g={"alloy.base.modification":u},f=r.length>0?Sp(a,g,r,l):u;return O1(l,f)},dw=(t,r,a)=>{const l={"alloy.base.behaviour":Ep(t)};return Fg(a,t.eventOrder,r,l).getOrDie()},uw=(t,r)=>{const a=()=>be,l=Lt(wp),u=Js(nn(t)),g=Op(t),f=X2(g),y=tb(g),C=Tp(u,f,y),_=uk(C,r),T=dw(u,f,y),D=Lt(u.components),R=pe=>{l.set(pe)},V=()=>{l.set(ku(a))},Q=()=>{const pe=Sa(_),Pe=Ce(pe,Ge=>l.get().getByDom(Ge).fold(()=>[],_n));D.set(Pe)},le=pe=>{const Pe=y;return(vt(Pe[pe.name()])?Pe[pe.name()]:()=>{throw new Error("Could not find "+pe.name()+" in "+JSON.stringify(t,null,2))})()},Oe=pe=>vt(y[pe.name()]),Y=()=>u.apis,ne=pe=>y[pe]().map(Pe=>Pe.state.readState()).getOr("not enabled"),be={uid:t.uid,getSystem:l.get,config:le,hasConfigured:Oe,spec:t,readState:ne,getApis:Y,connect:R,disconnect:V,element:_,syncComponents:Q,components:D.get,events:T};return be},R1=(t,r)=>{const a=nt(t,"components").getOr([]);return r.fold(()=>Ne(a,Mr),l=>Ne(a,(u,g)=>Sd(u,rl(l,g))))},Km=(t,r)=>{const{events:a,...l}=ak(t),u=R1(l,r),g={...l,events:{...Jv,...a},components:u};return Gt.value(uw(g,r))},Un=t=>{const r=Xe.fromText(t);return mw({element:r})},mw=t=>{const r=Os("external.component",ua([Re("element"),_o("uid")]),t),a=Lt(ku()),l=y=>{a.set(y)},u=()=>{a.set(ku(()=>f))},g=r.uid.getOrThunk(()=>Bg("external"));Pg(r.element,g);const f={uid:g,getSystem:a.get,config:E.none,hasConfigured:Ue,connect:l,disconnect:u,getApis:()=>({}),element:r.element,spec:t,readState:re("No state"),syncComponents:G,components:re([]),events:{}};return E1(f)},Ap=Bg,gw=t=>wo(t,"uid"),Sd=(t,r)=>Eu(t).getOrThunk(()=>{const a=gw(t)?t:{uid:Ap(""),...t};return Km(a,r).getOrDie()}),Mr=t=>Sd(t,E.none()),Ts=E1;var ab=(t,r,a,l,u)=>t(a,l)?E.some(a):vt(u)&&u(a)?E.none():r(a,l,u);const ib=(t,r,a)=>{let l=t.dom;const u=vt(a)?a:Ue;for(;l.parentNode;){l=l.parentNode;const g=Xe.fromDom(l);if(r(g))return E.some(g);if(u(g))break}return E.none()},L1=(t,r,a)=>ab((l,u)=>u(l),ib,t,r,a),Dp=(t,r)=>{const a=l=>r(Xe.fromDom(l));return Ut(t.dom.childNodes,a).map(Xe.fromDom)},Ug=(t,r)=>{const a=l=>{for(let u=0;u<l.childNodes.length;u++){const g=Xe.fromDom(l.childNodes[u]);if(r(g))return E.some(g);const f=a(l.childNodes[u]);if(f.isSome())return f}return E.none()};return a(t.dom)},hw=(t,r,a)=>L1(t,r,a).isSome(),kd=(t,r,a)=>ib(t,l=>ti(l,r),a),H1=(t,r)=>Dp(t,a=>ti(a,r)),dr=(t,r)=>um(r,t),Yl=(t,r,a)=>ab((l,u)=>ti(l,u),kd,t,r,a),Ou="aria-controls",_d=t=>L1(t,r=>{if(!nr(r))return!1;const a=lt(r,"id");return a!==void 0&&a.indexOf(Ou)>-1}).bind(r=>{const a=lt(r,"id"),l=Jr(r);return dr(l,`[${Ou}="${a}"]`)}),pw=()=>{const t=Qe(Ou);return{id:t,link:r=>{Z(r,Ou,t)},unlink:r=>{Co(r,Ou)}}},mk=(t,r)=>_d(r).exists(a=>Ed(t,a)),Ed=(t,r)=>hw(r,a=>Fo(a,t.element),Ue)||mk(t,r),fw="unknown";var Wg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Wg||(Wg={}));const Mp=Lt({}),lb=(t,r)=>{const a=[],l=new Date().getTime();return{logEventCut:(u,g,f)=>{a.push({outcome:"cut",target:g,purpose:f})},logEventStopped:(u,g,f)=>{a.push({outcome:"stopped",target:g,purpose:f})},logNoParent:(u,g,f)=>{a.push({outcome:"no-parent",target:g,purpose:f})},logEventNoHandlers:(u,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(u,g,f)=>{a.push({outcome:"response",purpose:f,target:g})},write:()=>{const u=new Date().getTime();zo(["mousemove","mouseover","mouseout",mp()],t)||console.log(t,{event:t,time:u-l,target:r.dom,sequence:Ne(a,g=>zo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+yd(g.target)+")":g.outcome)})}}},cb=(t,r,a)=>{switch(nt(Mp.get(),t).orThunk(()=>{const l=dn(Mp.get());return Kn(l,u=>t.indexOf(u)>-1?E.some(Mp.get()[u]):E.none())}).getOr(Wg.NORMAL)){case Wg.NORMAL:return a(Od());case Wg.LOGGING:{const l=lb(t,r),u=a(l);return l.write(),u}case Wg.STOP:return!0}},gk=["alloy/data/Fields","alloy/debugging/Debugging"],jg=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return Ut(r,a=>a.indexOf("alloy")>0&&!ls(gk,l=>a.indexOf(l)>-1)).getOr(fw)}else return fw},hk={logEventCut:G,logEventStopped:G,logNoParent:G,logEventNoHandlers:G,logEventResponse:G,write:G},Tu=(t,r,a)=>cb(t,r,a),Od=re(hk),Au=re([Re("menu"),Re("selectedMenu")]),$g=re([Re("item"),Re("selectedItem")]);re(At($g().concat(Au())));const db=re(At($g())),P1=bu("initSize",[Re("numColumns"),Re("numRows")]),vw=()=>Dr("markers",db()),Gg=()=>bu("markers",[Re("backgroundMenu")].concat(Au()).concat($g())),qm=t=>bu("markers",Ne(t,Re)),B1=(t,r,a)=>(jg(),On(r,r,a,Oc(l=>Gt.value((...u)=>l.apply(void 0,u))))),mo=t=>B1("onHandler",t,Es(G)),ts=t=>B1("onKeyboardHandler",t,Es(E.none)),Xa=t=>B1("onHandler",t,Zo()),I1=t=>B1("onKeyboardHandler",t,Zo()),ce=(t,r)=>po(t,re(r)),Np=t=>po(t,ao),bw=re(P1),br=(t,r,a,l,u,g,f,y=!1)=>({x:t,y:r,bubble:a,direction:l,placement:u,restriction:g,label:`${f}-${u}`,alwaysFit:y}),Ql=Ea.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),vl=(t,r,a,l,u,g,f,y,C)=>t.fold(r,a,l,u,g,f,y,C),ub=(t,r,a,l)=>t.fold(r,r,l,l,r,l,a,a),yw=(t,r,a,l)=>t.fold(r,l,r,l,a,a,r,l),Rp=Ql.southeast,Lp=Ql.southwest,F1=Ql.northeast,oa=Ql.northwest,ww=Ql.south,mb=Ql.north,Cw=Ql.east,gb=Ql.west,Du=(t,r,a,l)=>{const u=t+r;return u>l?a:u<a?l:u},Aa=(t,r,a)=>Math.min(Math.max(t,r),a),xw=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ur=(t,r)=>El(["left","right","top","bottom"],a=>nt(r,a).map(l=>xw(t,l))),pk=(t,r,a)=>{const l=(C,_)=>r[C].map(T=>{const D=C==="top"||C==="bottom",R=D?a.top:a.left,V=(C==="left"||C==="top"?Math.max:Math.min)(T,_)+R;return D?Aa(V,t.y,t.bottom):Aa(V,t.x,t.right)}).getOr(_),u=l("left",t.x),g=l("top",t.y),f=l("right",t.right),y=l("bottom",t.bottom);return ir(u,g,f-u,y-g)},Pc="layout",hb=t=>t.x,Xm=(t,r)=>t.x+t.width/2-r.width/2,pb=(t,r)=>t.x+t.width-r.width,V1=(t,r)=>t.y-r.height,Vs=t=>t.y+t.height,Hp=(t,r)=>t.y+t.height/2-r.height/2,Sw=t=>t.x+t.width,fk=(t,r)=>t.x-r.width,As=(t,r,a)=>br(hb(t),Vs(t),a.southeast(),Rp(),"southeast",Ur(t,{left:1,top:3}),Pc),gs=(t,r,a)=>br(pb(t,r),Vs(t),a.southwest(),Lp(),"southwest",Ur(t,{right:0,top:3}),Pc),ha=(t,r,a)=>br(hb(t),V1(t,r),a.northeast(),F1(),"northeast",Ur(t,{left:1,bottom:2}),Pc),Da=(t,r,a)=>br(pb(t,r),V1(t,r),a.northwest(),oa(),"northwest",Ur(t,{right:0,bottom:2}),Pc),Ds=(t,r,a)=>br(Xm(t,r),V1(t,r),a.north(),mb(),"north",Ur(t,{bottom:2}),Pc),Wr=(t,r,a)=>br(Xm(t,r),Vs(t),a.south(),ww(),"south",Ur(t,{top:3}),Pc),Kg=(t,r,a)=>br(Sw(t),Hp(t,r),a.east(),Cw(),"east",Ur(t,{left:0}),Pc),na=(t,r,a)=>br(fk(t,r),Hp(t,r),a.west(),gb(),"west",Ur(t,{right:1}),Pc),Jl=()=>[As,gs,ha,Da,Wr,Ds,Kg,na],kw=()=>[gs,As,Da,ha,Wr,Ds,Kg,na],_w=()=>[ha,Da,As,gs,Ds,Wr],Ew=()=>[Da,ha,gs,As,Ds,Wr],fb=()=>[As,gs,ha,Da,Wr,Ds],z1=()=>[gs,As,Da,ha,Wr,Ds],Ow=(t,r)=>r.universal?t:qo(t,a=>zo(r.channels,a));var Z1=Object.freeze({__proto__:null,events:t=>on([Te(Cu(),(r,a)=>{const l=t.channels,u=dn(l),g=a,f=Ow(u,g);ct(f,y=>{const C=l[y],_=C.schema,T=Os("channel["+y+`] data
Receiver: `+yd(r.element),_,g.data);C.onReceive(r,T)})})])}),Tw=[Dr("channels",Ve(Gt.value,ua([Xa("onReceive"),ge("schema",ma())])))];const vk=(t,r,a)=>ql(l=>{a(l,t,r)}),Pp=(t,r,a)=>Um((l,u)=>{a(l,t,r)}),bk=(t,r,a,l,u,g)=>{const f=ua(t),y=_a(r,[H2("config",t)]);return ht(f,y,r,a,l,u,g)},yk=(t,r,a,l,u,g)=>{const f=t,y=_a(r,[Tc("config",t)]);return ht(f,y,r,a,l,u,g)},wk=(t,r,a)=>Bi((l,...u)=>{const g=[l].concat(u);return l.config({name:re(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},f=>{const y=Array.prototype.slice.call(g,1);return r.apply(void 0,[l,f.config,f.state].concat(y))})},a,r),Aw=t=>({key:t,value:void 0}),ht=(t,r,a,l,u,g,f)=>{const y=T=>Gs(T,a)?T[a]():E.none(),C=an(u,(T,D)=>wk(a,T,D)),_={...an(g,(T,D)=>_1(T,D)),...C,revoke:oo(Aw,a),config:T=>{const D=Os(a+"-config",t,T);return{key:a,value:{config:D,me:_,configAsRaw:Lo(()=>Os(a+"-config",t,T)),initialConfig:T,state:f}}},schema:re(r),exhibit:(T,D)=>ol(y(T),nt(l,"exhibit"),(R,V)=>V(D,R.config,R.state)).getOrThunk(()=>ai({})),name:re(a),handlers:T=>y(T).map(D=>nt(l,"events").getOr(()=>({}))(D.config,D.state)).getOr({})};return _},ze=t=>ri(t),vb=ua([Re("fields"),Re("name"),ge("active",{}),ge("apis",{}),ge("state",fl),ge("extra",{})]),os=t=>{const r=Os("Creating behaviour: "+t.name,vb,t);return bk(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Dw=ua([Re("branchKey"),Re("branches"),Re("name"),ge("active",{}),ge("apis",{}),ge("state",fl),ge("extra",{})]),bb=t=>{const r=Os("Creating behaviour: "+t.name,Dw,t);return yk(fo(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},Mw=re(void 0),Ma=os({fields:Tw,name:"receiving",active:Z1});var yb=Object.freeze({__proto__:null,exhibit:(t,r)=>ai({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Na=t=>t.dom.focus(),wb=t=>t.dom.blur(),ns=t=>{const r=Jr(t).dom;return t.dom===r.activeElement},li=(t=Sm())=>E.from(t.dom.activeElement).map(Xe.fromDom),ec=t=>li(Jr(t)).filter(r=>t.dom.contains(r.dom)),Cb=(t,r)=>{const a=Jr(r),l=li(a).bind(g=>{const f=y=>Fo(g,y);return f(r)?E.some(r):Ug(r,f)}),u=t(r);return l.each(g=>{li(a).filter(f=>Fo(f,g)).fold(()=>{Na(g)},G)}),u},bl=(t,r,a,l,u)=>{const g=f=>f+"px";return{position:t,left:r.map(g),top:a.map(g),right:l.map(g),bottom:u.map(g)}},Ck=t=>({...t,position:E.some(t.position)}),Nw=(t,r)=>{Xs(t,Ck(r))},U1=Ea.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),xb=(t,r,a,l,u,g)=>{const f=r.rect,y=f.x-a,C=f.y-l,_=f.width,T=f.height,D=u-(y+_),R=g-(C+T),V=E.some(y),Q=E.some(C),le=E.some(D),Oe=E.some(R),Y=E.none();return vl(r.direction,()=>bl(t,V,Q,Y,Y),()=>bl(t,Y,Q,le,Y),()=>bl(t,V,Y,Y,Oe),()=>bl(t,Y,Y,le,Oe),()=>bl(t,V,Q,Y,Y),()=>bl(t,V,Y,Y,Oe),()=>bl(t,V,Q,Y,Y),()=>bl(t,Y,Q,le,Y))},Rw=(t,r)=>t.fold(()=>{const a=r.rect;return bl("absolute",E.some(a.x),E.some(a.y),E.none(),E.none())},(a,l,u,g)=>xb("absolute",r,a,l,u,g),(a,l,u,g)=>xb("fixed",r,a,l,u,g)),W1=(t,r)=>{const a=oo(Mg,r),l=t.fold(a,a,()=>{const f=ka();return Mg(r).translate(-f.left,-f.top)}),u=ll(r),g=Fl(r);return ir(l.left,l.top,u,g)},xk=(t,r)=>r.fold(()=>t.fold(Is,Is,ir),a=>t.fold(re(a),re(a),()=>{const l=Lw(t,a.x,a.y);return ir(l.left,l.top,a.width,a.height)})),Lw=(t,r,a)=>{const l=mn(r,a),u=()=>{const g=ka();return l.translate(-g.left,-g.top)};return t.fold(re(l),re(l),u)},Sk=(t,r,a,l)=>t.fold(r,a,l);U1.none;const kk=U1.relative,_k=U1.fixed,Ek=(t,r)=>({anchorBox:t,origin:r}),Sb=(t,r)=>Ek(t,r),j1="data-alloy-placement",Ok=(t,r)=>{Z(t,j1,r)},kb=t=>_t(t,j1),Tk=t=>Co(t,j1),Bp=Ea.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Hw=(t,r)=>{const{x:a,y:l,right:u,bottom:g}=r,{x:f,y,right:C,bottom:_,width:T,height:D}=t,R=f>=a&&f<=u,V=y>=l&&y<=g,Q=R&&V,le=C<=u&&C>=a,Oe=_<=g&&_>=l,Y=le&&Oe,ne=Math.min(T,f>=a?u-f:C-a),be=Math.min(D,y>=l?g-y:_-l);return{originInBounds:Q,sizeInBounds:Y,visibleW:ne,visibleH:be}},Mu=(t,r)=>{const{x:a,y:l,right:u,bottom:g}=r,{x:f,y,width:C,height:_}=t,T=Math.max(a,u-C),D=Math.max(l,g-_),R=Aa(f,a,T),V=Aa(y,l,D),Q=Math.min(R+C,u)-R,le=Math.min(V+_,g)-V;return ir(R,V,Q,le)},Ak=(t,r,a)=>{const l=re(r.bottom-a.y),u=re(a.bottom-r.y),g=ub(t,u,u,l),f=re(r.right-a.x),y=re(a.right-r.x);return{maxWidth:yw(t,y,y,f),maxHeight:g}},Dk=(t,r,a,l)=>{const u=t.bubble,g=u.offset,f=pk(l,t.restriction,g),y=t.x+g.left,C=t.y+g.top,_=ir(y,C,r,a),{originInBounds:T,sizeInBounds:D,visibleW:R,visibleH:V}=Hw(_,f),Q=T&&D,le=Q?_:Mu(_,f),Oe=le.width>0&&le.height>0,{maxWidth:Y,maxHeight:ne}=Ak(t.direction,le,l),be={rect:le,maxHeight:ne,maxWidth:Y,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:C};return Q||t.alwaysFit?Bp.fit(be):Bp.nofit(be,R,V,Oe)},Pw=(t,r,a,l,u,g)=>{const f=l.width,y=l.height,C=(_,T,D,R,V)=>{const Q=_(a,l,u,t,g),le=Dk(Q,f,y,g);return le.fold(re(le),(Oe,Y,ne,be)=>(V===be?ne>R||Y>D:!V&&be)?le:Bp.nofit(T,D,R,V))};return Io(r,(_,T)=>{const D=oo(C,T);return _.fold(re(_),D)},Bp.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:Rp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ao,ao)},_b=t=>{const r=Lt(E.none()),a=()=>r.get().each(t);return{clear:()=>{a(),r.set(E.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{a(),r.set(E.some(l))}}},$1=()=>_b(t=>t.destroy()),Yn=()=>_b(t=>t.unbind()),gn=()=>{const t=_b(G);return{...t,on:r=>t.get().each(r)}},Nu=De,pa=(t,r,a)=>np(t,r,Nu,a),qg=(t,r,a)=>_c(t,r,Nu,a),Eb=Ua,Xg=["top","bottom","right","left"],G1="data-alloy-transition-timer",Mk=(t,r)=>M1(t,r.classes),Nk=(t,r,a)=>a.exists(l=>{const u=t.mode;return u==="all"?!0:l[u]!==r[u]}),Ip=(t,r)=>{const a=l=>parseFloat(l).toFixed(3);return pr(r,(l,u)=>{const g=t[u].map(a),f=l.map(a);return!pc(g,f)}).isSome()},Bw=t=>{const r=g=>{const f=Ir(t,g).split(/\s*,\s*/);return qo(f,Hs)},a=g=>{if(Kt(g)&&/^[\d.]+/.test(g)){const f=parseFloat(g);return fr(g,"ms")?f:f*1e3}else return 0},l=r("transition-delay"),u=r("transition-duration");return Io(u,(g,f,y)=>{const C=a(l[y])+a(f);return Math.max(g,C)},0)},Td=(t,r)=>{const a=Yn(),l=Yn();let u;const g=_=>{var T;const D=(T=_.raw.pseudoElement)!==null&&T!==void 0?T:"";return Fo(_.target,t)&&kr(D)&&zo(Xg,_.raw.propertyName)},f=_=>{if(Kr(_)||g(_)){a.clear(),l.clear();const T=_==null?void 0:_.raw.type;(Kr(T)||T===Im())&&(clearTimeout(u),Co(t,G1),Ta(t,r.classes))}},y=pa(t,F2(),_=>{g(_)&&(y.unbind(),a.set(pa(t,Im(),f)),l.set(pa(t,I2(),f)))}),C=Bw(t);requestAnimationFrame(()=>{u=setTimeout(f,C+17),Z(t,G1,u)})},Rk=(t,r)=>{Ln(t,r.classes),_t(t,G1).each(a=>{clearTimeout(parseInt(a,10)),Co(t,G1)}),Td(t,r)},Lk=(t,r,a,l,u,g)=>{const f=Nk(l,u,g);if(f||Mk(t,l)){fe(t,"position",a.position);const y=W1(r,t),C=Rw(r,{...u,rect:y}),_=El(Xg,T=>C[T]);Ip(a,_)&&(Xs(t,_),f&&Rk(t,l),yc(t))}else Ta(t,l.classes)},Hk=t=>({width:ll(t),height:Fl(t)}),Pk=(t,r,a,l)=>{So(r,"max-height"),So(r,"max-width");const u=Hk(r);return Pw(r,l.preference,t,u,a,l.bounds)},Iw=(t,r)=>{const a=r.classes;Ta(t,a.off),Ln(t,a.on)},Ob=(t,r,a)=>{const l=a.maxHeightFunction;l(t,r.maxHeight)},Fw=(t,r,a)=>{const l=a.maxWidthFunction;l(t,r.maxWidth)},Bk=(t,r,a)=>{const l=Rw(a.origin,r);a.transition.each(u=>{Lk(t,a.origin,l,u,r,a.lastPlacement)}),Nw(t,l)},Vw=(t,r)=>{Ok(t,r.placement)},Fp=(t,r)=>{Mv(t,Math.floor(r))},zw=re((t,r)=>{Fp(t,r),Bs(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Yg=re((t,r)=>{Fp(t,r)}),Zw=(t,r,a)=>t[r]===void 0?a:t[r],Uw=(t,r,a,l,u,g,f,y)=>{const C=Zw(f,"maxHeightFunction",zw()),_=Zw(f,"maxWidthFunction",G),T=t.anchorBox,D=t.origin,R={bounds:xk(D,g),origin:D,preference:l,maxHeightFunction:C,maxWidthFunction:_,lastPlacement:u,transition:y};return Tb(T,r,a,R)},Tb=(t,r,a,l)=>{const u=Pk(t,r,a,l);return Bk(r,u,l),Vw(r,u),Iw(r,u),Ob(r,u,l),Fw(r,u,l),{layout:u.layout,placement:u.placement}},Ww=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Bc=(t,r,a,l=1)=>{const u=t*l,g=r*l,f=C=>nt(a,C).getOr([]),y=(C,_,T)=>{const D=kt(Ww,T);return{offset:mn(C,_),classesOn:Ce(T,f),classesOff:Ce(D,f)}};return{southeast:()=>y(-t,r,["top","alignLeft"]),southwest:()=>y(t,r,["top","alignRight"]),south:()=>y(-t/2,r,["top","alignCentre"]),northeast:()=>y(-t,-r,["bottom","alignLeft"]),northwest:()=>y(t,-r,["bottom","alignRight"]),north:()=>y(-t/2,-r,["bottom","alignCentre"]),east:()=>y(t,-r/2,["valignCentre","left"]),west:()=>y(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>y(u,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-u,g,["top","alignRight","inset"]),insetNorth:()=>y(-u/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(u,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-u,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-u/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-u,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(u,-g/2,["valignCentre","left","inset"])}},Vp=()=>Bc(0,0,{}),Ym=ao,Qm=(t,r)=>a=>Ab(a)==="rtl"?r:t,Ab=t=>Ir(t,"direction")==="rtl"?"rtl":"ltr";var Ic;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Ic||(Ic={}));const Db="data-alloy-vertical-dir",K1=t=>hw(t,r=>nr(r)&&lt(r,"data-alloy-vertical-dir")===Ic.BottomToTop),Ru=()=>_a("layouts",[Re("onLtr"),Re("onRtl"),_o("onBottomLtr"),_o("onBottomRtl")]),q1=(t,r,a,l,u,g,f)=>{const y=f.map(K1).getOr(!1),C=r.layouts.map(R=>R.onLtr(t)),_=r.layouts.map(R=>R.onRtl(t)),T=y?r.layouts.bind(R=>R.onBottomLtr.map(V=>V(t))).or(C).getOr(u):C.getOr(a),D=y?r.layouts.bind(R=>R.onBottomRtl.map(V=>V(t))).or(_).getOr(g):_.getOr(l);return Qm(T,D)(t)},Ik=(t,r,a)=>{const l=r.hotspot,u=W1(a,l.element),g=q1(t.element,r,fb(),z1(),_w(),Ew(),E.some(r.hotspot.element));return E.some(Ym({anchorBox:u,bubble:r.bubble.getOr(Vp()),overrides:r.overrides,layouts:g}))};var Fk=[Re("hotspot"),_o("bubble"),ge("overrides",{}),Ru(),ce("placement",Ik)];const jw=(t,r,a)=>{const l=Lw(a,r.x,r.y),u=ir(l.left,l.top,r.width,r.height),g=q1(t.element,r,Jl(),kw(),Jl(),kw(),E.none());return E.some(Ym({anchorBox:u,bubble:r.bubble,overrides:r.overrides,layouts:g}))};var Vk=[Re("x"),Re("y"),ge("height",0),ge("width",0),ge("bubble",Vp()),ge("overrides",{}),Ru(),ce("placement",jw)];const $w=Ea.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),zk=t=>t.fold(ao,(r,a,l)=>r.translate(-a,-l)),Zk=t=>t.fold(ao,ao),Gw=t=>Io(t,(r,a)=>r.translate(a.left,a.top),mn(0,0)),Uk=t=>{const r=Ne(t,zk);return Gw(r)},Kw=t=>{const r=Ne(t,Zk);return Gw(r)},qw=$w.screen,Wk=$w.absolute,X1=(t,r,a)=>{const l=bc(a.root).dom,u=g=>{const f=Or(g),y=Or(t.element);return Fo(f,y)};return E.from(l.frameElement).map(Xe.fromDom).filter(u).map(Ys)},Mb=(t,r,a)=>{const l=Or(t.element),u=ka(l),g=X1(t,r,a).getOr(u);return Wk(g,u.left,u.top)},zp=(t,r,a,l)=>{const u=qw(mn(t,r));return E.some(Rv(u,a,l))},Qg=(t,r,a,l,u)=>t.map(g=>{const f=[r,g.point],y=Sk(l,()=>Kw(f),()=>Kw(f),()=>Uk(f)),C=dd(y.left,y.top,g.width,g.height),_=a.showAbove?_w():fb(),T=a.showAbove?Ew():z1(),D=q1(u,a,_,T,_,T,E.none());return Ym({anchorBox:C,bubble:a.bubble.getOr(Vp()),overrides:a.overrides,layouts:D})}),Xw=(t,r,a)=>{const l=Mb(t,a,r);return r.node.filter(Ps).bind(u=>{const g=u.dom.getBoundingClientRect(),f=zp(g.left,g.top,g.width,g.height),y=r.node.getOr(t.element);return Qg(f,l,r,a,y)})};var Nb=[Re("node"),Re("root"),_o("bubble"),Ru(),ge("overrides",{}),ge("showAbove",!1),ce("placement",Xw)];const Yw="\uFEFF",Qw=" ",Y1={create:(t,r,a,l)=>({start:t,soffset:r,finish:a,foffset:l})},Q1=Ea.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Jw=(t,r,a,l)=>t.fold(r,a,l),eC=t=>t.fold(ao,ao,ao),jk=Q1.before,Rb=Q1.on,tC=Q1.after,oC={before:jk,on:Rb,after:tC,cata:Jw,getStart:eC},Zp=Ea.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),J1=t=>Zp.exact(t.start,t.soffset,t.finish,t.foffset),nC=t=>t.match({domRange:r=>Xe.fromDom(r.startContainer),relative:(r,a)=>oC.getStart(r),exact:(r,a,l,u)=>r}),$k=Zp.domRange,Gk=Zp.relative,Kk=Zp.exact,qk=t=>{const r=nC(t);return bc(r)},fa=Y1.create,Ra={domRange:$k,relative:Gk,exact:Kk,exactFromRange:J1,getWin:qk,range:fa},Xk=(t,r)=>{r.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},Yk=(t,r)=>{r.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},rC=(t,r,a)=>{const l=t.document.createRange();return Xk(l,r),Yk(l,a),l},sC=(t,r,a,l,u)=>{const g=t.document.createRange();return g.setStart(r.dom,a),g.setEnd(l.dom,u),g},Lb=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),aC=t=>{const r=t.getClientRects(),a=r.length>0?r[0]:t.getBoundingClientRect();return a.width>0||a.height>0?E.some(a).map(Lb):E.none()},Hb=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?E.some(r).map(Lb):E.none()},Jg=Ea.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),eh=(t,r,a)=>r(Xe.fromDom(a.startContainer),a.startOffset,Xe.fromDom(a.endContainer),a.endOffset),Ad=(t,r)=>r.match({domRange:a=>({ltr:re(a),rtl:E.none}),relative:(a,l)=>({ltr:Lo(()=>rC(t,a,l)),rtl:Lo(()=>E.some(rC(t,l,a)))}),exact:(a,l,u,g)=>({ltr:Lo(()=>sC(t,a,l,u,g)),rtl:Lo(()=>E.some(sC(t,u,g,a,l)))})}),iC=(t,r)=>{const a=r.ltr();return a.collapsed?r.rtl().filter(l=>l.collapsed===!1).map(l=>Jg.rtl(Xe.fromDom(l.endContainer),l.endOffset,Xe.fromDom(l.startContainer),l.startOffset)).getOrThunk(()=>eh(t,Jg.ltr,a)):eh(t,Jg.ltr,a)},Pb=(t,r)=>{const a=Ad(t,r);return iC(t,a)},lC=(t,r)=>Pb(t,r).match({ltr:(a,l,u,g)=>{const f=t.document.createRange();return f.setStart(a.dom,l),f.setEnd(u.dom,g),f},rtl:(a,l,u,g)=>{const f=t.document.createRange();return f.setStart(u.dom,g),f.setEnd(a.dom,l),f}});Jg.ltr,Jg.rtl;const e0=(t,r,a)=>qo(gm(t,a),r),Ms=(t,r)=>Do(r,t),th=(t,r,a,l)=>{const u=Or(t).dom.createRange();return u.setStart(t.dom,r),u.setEnd(a.dom,l),u},cC=(t,r,a,l)=>{const u=th(t,r,a,l),g=Fo(t,a)&&r===l;return u.collapsed&&!g},dC=t=>E.from(t.getSelection()),Up=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return E.some(Y1.create(Xe.fromDom(r.startContainer),r.startOffset,Xe.fromDom(a.endContainer),a.endOffset))}else return E.none()},oh=t=>{if(t.anchorNode===null||t.focusNode===null)return Up(t);{const r=Xe.fromDom(t.anchorNode),a=Xe.fromDom(t.focusNode);return cC(r,t.anchorOffset,a,t.focusOffset)?E.some(Y1.create(r,t.anchorOffset,a,t.focusOffset)):Up(t)}},Lu=t=>dC(t).filter(r=>r.rangeCount>0).bind(oh),Wp=(t,r)=>{const a=lC(t,r);return aC(a)},Jm=(t,r)=>{const a=lC(t,r);return Hb(a)},uC=((t,r)=>{const a=u=>{if(!t(u))throw new Error("Can only get "+r+" value of a "+r+" node");return l(u).getOr("")},l=u=>t(u)?E.from(u.dom.nodeValue):E.none();return{get:a,getOption:l,set:(u,g)=>{if(!t(u))throw new Error("Can only set raw "+r+" value of a "+r+" node");u.dom.nodeValue=g}}})(Er,"text"),Fi=t=>uC.get(t),va=(t,r)=>({element:t,offset:r}),Bb=(t,r)=>{const a=Sa(t);if(a.length===0)return va(t,r);if(r<a.length)return va(a[r],0);{const l=a[a.length-1],u=Er(l)?Fi(l).length:Sa(l).length;return va(l,u)}},t0=(t,r)=>Er(t)?va(t,r):Bb(t,r),o0=t=>t.foffset!==void 0,jp=(t,r)=>r.getSelection.getOrThunk(()=>()=>Lu(t))().map(a=>{if(o0(a)){const l=t0(a.start,a.soffset),u=t0(a.finish,a.foffset);return Ra.range(l.element,l.offset,u.element,u.offset)}else return a}),$p=(t,r,a)=>{const l=bc(r.root).dom,u=Mb(t,a,r),g=jp(l,r).bind(y=>{if(o0(y))return Jm(l,Ra.exactFromRange(y)).orThunk(()=>{const C=Xe.fromText(Yw);Zl(y.start,C);const _=Wp(l,Ra.exact(C,0,C,1));return dl(C),_}).bind(C=>zp(C.left,C.top,C.width,C.height));{const C=an(y,T=>T.dom.getBoundingClientRect()),_={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return zp(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),f=jp(l,r).bind(y=>o0(y)?nr(y.start)?E.some(y.start):Ss(y.start):E.some(y.firstCell)).getOr(t.element);return Qg(g,u,r,a,f)};var Gp=[_o("getSelection"),Re("root"),_o("bubble"),Ru(),ge("overrides",{}),ge("showAbove",!1),ce("placement",$p)];const eg="link-layout",Ib=t=>t.x+t.width,nh=(t,r)=>t.x-r.width,rh=(t,r)=>t.y-r.height+t.height,Fb=t=>t.y,tg=(t,r,a)=>br(Ib(t),Fb(t),a.southeast(),Rp(),"southeast",Ur(t,{left:0,top:2}),eg),sh=(t,r,a)=>br(nh(t,r),Fb(t),a.southwest(),Lp(),"southwest",Ur(t,{right:1,top:2}),eg),jr=(t,r,a)=>br(Ib(t),rh(t,r),a.northeast(),F1(),"northeast",Ur(t,{left:0,bottom:3}),eg),mC=(t,r,a)=>br(nh(t,r),rh(t,r),a.northwest(),oa(),"northwest",Ur(t,{right:1,bottom:3}),eg),tc=()=>[tg,sh,jr,mC],Vb=()=>[sh,tg,mC,jr],ah=(t,r,a)=>{const l=W1(a,r.item.element),u=q1(t.element,r,tc(),Vb(),tc(),Vb(),E.none());return E.some(Ym({anchorBox:l,bubble:Vp(),overrides:r.overrides,layouts:u}))};var ih=[Re("item"),Ru(),ge("overrides",{}),ce("placement",ah)],gC=fo("type",{selection:Gp,node:Nb,hotspot:Fk,submenu:ih,makeshift:Vk});const Dd=[ga("classes",Sn),jl("mode","all",["all","layout","placement"])],Qk=[ge("useFixed",Ue),_o("getBounds")],hC=[Dr("anchor",gC),_a("transition",Dd)],pC=()=>{const t=document.documentElement;return _k(0,0,t.clientWidth,t.clientHeight)},zb=t=>{const r=Ys(t.element),a=t.element.dom.getBoundingClientRect();return kk(r.left,r.top,a.width,a.height)},Kp=(t,r,a,l,u,g)=>{const f=Sb(r.anchorBox,t);return Uw(f,l.element,r.bubble,r.layouts,u,a,r.overrides,g)},Fc=(t,r,a,l,u)=>{const g=E.none();fC(t,r,a,l,u,g)},fC=(t,r,a,l,u,g)=>{const f=Os("placement.info",At(hC),u),y=f.anchor,C=l.element,_=a.get(l.uid);Cb(()=>{fe(C,"position","fixed");const T=ln(C,"visibility");fe(C,"visibility","hidden");const D=r.useFixed()?pC():zb(t);y.placement(t,y,D).each(R=>{const V=g.orThunk(()=>r.getBounds.map(bs)),Q=Kp(D,R,V,l,_,f.transition);a.set(l.uid,Q)}),T.fold(()=>{So(C,"visibility")},R=>{fe(C,"visibility",R)}),ln(C,"left").isNone()&&ln(C,"top").isNone()&&ln(C,"right").isNone()&&ln(C,"bottom").isNone()&&Xr(ln(C,"position"),"fixed")&&So(C,"position")},C)};var Jk=Object.freeze({__proto__:null,position:Fc,positionWithinBounds:fC,getMode:(t,r,a)=>r.useFixed()?"fixed":"absolute",reset:(t,r,a,l)=>{const u=l.element;ct(["position","left","right","top","bottom"],g=>So(u,g)),Tk(u),a.clear(l.uid)}}),vC=Object.freeze({__proto__:null,init:()=>{let t={};return Ka({readState:()=>t,clear:r=>{hn(r)?delete t[r]:t={}},set:(r,a)=>{t[r]=a},get:r=>nt(t,r)})}});const zs=os({fields:Qk,name:"positioning",active:yb,apis:Jk,state:vC}),og=t=>t.getSystem().isConnected(),Hu=t=>{vo(t,bd());const r=t.components();ct(r,Hu)},lh=t=>{const r=t.components();ct(r,lh),vo(t,Kl())},ci=(t,r)=>{t.getSystem().addToWorld(r),Ps(t.element)&&lh(r)},Pu=t=>{Hu(t),t.getSystem().removeFromWorld(t)},Zb=(t,r)=>{ks(t.element,r.element)},Md=t=>{ct(t.components(),r=>dl(r.element)),gu(t.element),t.syncComponents()},ba=(t,r,a)=>{const l=t.components();Md(t);const u=a(r),g=kt(l,u);ct(g,f=>{Hu(f),t.getSystem().removeFromWorld(f)}),ct(u,f=>{og(f)?Zb(t,f):(t.getSystem().addToWorld(f),Zb(t,f),Ps(t.element)&&lh(f))}),t.syncComponents()},La=(t,r,a)=>{const l=t.components(),u=Ce(r,y=>Eu(y).toArray());ct(l,y=>{zo(u,y)||Pu(y)});const g=a(r),f=kt(l,g);ct(f,y=>{og(y)&&Pu(y)}),ct(g,y=>{og(y)||ci(t,y)}),t.syncComponents()},yr=(t,r)=>{Zs(t,r,ks)},Zs=(t,r,a)=>{t.getSystem().addToWorld(r),a(t.element,r.element),Ps(t.element)&&lh(r),t.syncComponents()},n0=t=>{Hu(t),dl(t.element),t.getSystem().removeFromWorld(t)},Qn=t=>{const r=cs(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());n0(t),r.each(a=>{a.syncComponents()})},Bu=t=>{const r=t.components();ct(r,n0),gu(t.element),t.syncComponents()},r0=(t,r)=>{bC(t,r,ks)},s0=(t,r)=>{bC(t,r,rp)},bC=(t,r,a)=>{a(t,r.element);const l=Sa(r.element);ct(l,u=>{r.getByDom(u).each(lh)})},yC=t=>{const r=Sa(t.element);ct(r,a=>{t.getByDom(a).each(Hu)}),dl(t.element)},Ub=(t,r,a,l)=>{a.get().each(f=>{Bu(t)});const u=r.getAttachPoint(t);yr(u,t);const g=t.getSystem().build(l);return yr(t,g),a.set(g),g},qp=(t,r,a,l)=>{const u=Ub(t,r,a,l);return r.onOpen(t,u),u},a0=(t,r,a,l)=>a.get().map(()=>Ub(t,r,a,l)),e3=(t,r,a,l,u)=>{d0(t,r),qp(t,r,a,l),u(),CC(t,r)},Wb=(t,r,a)=>{a.get().each(l=>{Bu(t),Qn(t),r.onClose(t,l),a.clear()})},i0=(t,r,a)=>a.isOpen(),t3=(t,r,a,l)=>i0(t,r,a)&&a.get().exists(u=>r.isPartOf(t,u,l)),wC=(t,r,a)=>a.get(),l0=(t,r,a,l)=>{ln(t.element,r).fold(()=>{Co(t.element,a)},u=>{Z(t.element,a,u)}),fe(t.element,r,l)},c0=(t,r,a)=>{_t(t.element,a).fold(()=>So(t.element,r),l=>fe(t.element,r,l))},d0=(t,r,a)=>{const l=r.getAttachPoint(t);fe(t.element,"position",zs.getMode(l)),l0(t,"visibility",r.cloakVisibilityAttr,"hidden")},o3=t=>ls(["top","left","right","bottom"],r=>ln(t,r).isSome()),CC=(t,r,a)=>{o3(t.element)||So(t.element,"position"),c0(t,"visibility",r.cloakVisibilityAttr)};var n3=Object.freeze({__proto__:null,cloak:d0,decloak:CC,open:qp,openWhileCloaked:e3,close:Wb,isOpen:i0,isPartOf:t3,getState:wC,setContent:a0}),xC=Object.freeze({__proto__:null,events:(t,r)=>on([Te(xu(),(a,l)=>{Wb(a,t,r)})])}),SC=[mo("onOpen"),mo("onClose"),Re("isPartOf"),Re("getAttachPoint"),ge("cloakVisibilityAttr","data-precloak-visibility")],r3=Object.freeze({__proto__:null,init:()=>{const t=gn(),r=re("not-implemented");return Ka({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Yt=os({fields:SC,name:"sandboxing",active:xC,apis:n3,state:r3}),yl=re("dismiss.popups"),Vi=re("reposition.popups"),Xp=re("mouse.released"),u0=ua([ge("isExtraPart",Ue),_a("fireEventInstead",[ge("event",Su())])]),m0=t=>{const r=Os("Dismissal",u0,t);return{[yl()]:{schema:ua([Re("target")]),onReceive:(a,l)=>{Yt.isOpen(a)&&(Yt.isPartOf(a,l.target)||r.isExtraPart(a,l.target)||r.fireEventInstead.fold(()=>Yt.close(a),u=>vo(a,u.event)))}}}},jb=ua([_a("fireEventInstead",[ge("event",qv())]),vn("doReposition")]),$b=t=>{const r=Os("Reposition",jb,t);return{[Vi()]:{onReceive:a=>{Yt.isOpen(a)&&r.fireEventInstead.fold(()=>r.doReposition(a),l=>vo(a,l.event))}}}},g0=(t,r,a)=>{r.store.manager.onLoad(t,r,a)},Gb=(t,r,a)=>{r.store.manager.onUnload(t,r,a)};var ng=Object.freeze({__proto__:null,onLoad:g0,onUnload:Gb,setValue:(t,r,a,l)=>{r.store.manager.setValue(t,r,a,l)},getValue:(t,r,a)=>r.store.manager.getValue(t,r,a),getState:(t,r,a)=>a}),h0=Object.freeze({__proto__:null,events:(t,r)=>{const a=t.resetOnDom?[yn((l,u)=>{g0(l,t,r)}),Ga((l,u)=>{Gb(l,t,r)})]:[Pp(t,r,g0)];return on(a)}});const Yp=()=>{const t=Lt(null),r=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return Ka({set:t.set,get:t.get,isNotSet:a,clear:l,readState:r})},Nd=()=>Ka({readState:G}),p0=()=>{const t=Lt({}),r=Lt({});return Ka({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:a=>nt(t.get(),a).orThunk(()=>nt(r.get(),a)),update:a=>{const l=t.get(),u=r.get(),g={},f={};ct(a,y=>{g[y.value]=y,nt(y,"meta").each(C=>{nt(C,"text").each(_=>{f[_]=y})})}),t.set({...l,...g}),r.set({...u,...f})},clear:()=>{t.set({}),r.set({})}})};var s3=Object.freeze({__proto__:null,memory:Yp,dataset:p0,manual:Nd,init:t=>t.store.manager.state(t)});const kC=(t,r,a,l)=>{const u=r.store;a.update([l]),u.setValue(t,l),r.onSetValue(t,l)},a3=(t,r,a)=>{const l=r.store,u=l.getDataKey(t);return a.lookup(u).getOrThunk(()=>l.getFallbackEntry(u))},f0=(t,r,a)=>{r.store.initialValue.each(l=>{kC(t,r,a,l)})},_C=(t,r,a)=>{a.clear()};var ch=[_o("initialValue"),Re("getFallbackEntry"),Re("getDataKey"),Re("setValue"),ce("manager",{setValue:kC,getValue:a3,onLoad:f0,onUnload:_C,state:p0})];const Qp=(t,r,a)=>r.store.getValue(t),i3=(t,r,a,l)=>{r.store.setValue(t,l),r.onSetValue(t,l)},l3=(t,r,a)=>{r.store.initialValue.each(l=>{r.store.setValue(t,l)})};var EC=[Re("getValue"),ge("setValue",G),_o("initialValue"),ce("manager",{setValue:i3,getValue:Qp,onLoad:l3,onUnload:G,state:fl.init})];const Kb=(t,r,a,l)=>{a.set(l),r.onSetValue(t,l)},Iu=(t,r,a)=>a.get(),qb=(t,r,a)=>{r.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},v0=(t,r,a)=>{a.clear()};var Xb=[_o("initialValue"),ce("manager",{setValue:Kb,getValue:Iu,onLoad:qb,onUnload:v0,state:Yp})],OC=[Ri("store",{mode:"memory"},fo("mode",{memory:Xb,manual:EC,dataset:ch})),mo("onSetValue"),ge("resetOnDom",!1)];const Je=os({fields:OC,name:"representing",active:h0,apis:ng,extra:{setValueFrom:(t,r)=>{const a=Je.getValue(r);Je.setValue(t,a)}},state:s3}),Nr=(t,r)=>Hm(t,{},Ne(r,a=>Zv(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([po("dump",ao)])),b0=t=>t.dump,Jn=(t,r)=>({...ze(r),...t.dump}),zi={field:Nr,augment:Jn,get:b0},Jp="placeholder",dh=Ea.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),rg=t=>wo(t,"uiType"),uh=(t,r,a,l)=>t.exists(u=>u!==a.owner)?dh.single(!0,re(a)):nt(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+dn(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),y0=(t,r,a,l)=>rg(a)&&a.uiType===Jp?uh(t,r,a,l):dh.single(!1,re(a)),Yb=(t,r,a,l)=>y0(t,r,a,l).fold((u,g)=>{const f=rg(a)?g(r,a.config,a.validated):g(r),y=nt(f,"components").getOr([]),C=Ce(y,_=>Yb(t,r,_,l));return[{...f,components:C}]},(u,g)=>{if(rg(a)){const f=g(r,a.config,a.validated);return a.validated.preprocess.getOr(ao)(f)}else return g(r)}),TC=(t,r,a,l)=>Ce(a,u=>Yb(t,r,u,l)),Qb=(t,r)=>{let a=!1;const l=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,r},g=()=>r.fold((f,y)=>f,(f,y)=>f);return{name:re(t),required:g,used:l,replace:u}},Fu=(t,r,a,l)=>{const u=an(l,(f,y)=>Qb(y,f)),g=TC(t,r,a,u);return Bn(u,f=>{if(f.used()===!1&&f.required())throw new Error("Placeholder: "+f.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),g},ef=dh.single,Jb=dh.multiple,mh=re(Jp),tf=Ea.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),sg=ge("factory",{sketch:ao}),of=ge("schema",[]),gh=Re("name"),Vu=On("pname","pname",Fn(t=>"<alloy."+Qe(t.name)+">"),ma()),Vc=po("schema",()=>[_o("preprocess")]),nf=ge("defaults",re({})),hh=ge("overrides",re({})),Zi=At([sg,of,gh,Vu,nf,hh]),rs=At([sg,of,gh,nf,hh]),ey=At([sg,of,gh,Vu,nf,hh]),ty=At([sg,Vc,gh,Re("unit"),Vu,nf,hh]),ag=t=>t.fold(E.some,E.none,E.some,E.some),ph=t=>{const r=a=>a.name;return t.fold(r,r,r,r)},AC=t=>t.fold(ao,ao,ao,ao),w0=(t,r)=>a=>{const l=Os("Converting part type",r,a);return t(l)},Us=w0(tf.required,Zi),hs=w0(tf.external,rs),di=w0(tf.optional,ey),C0=w0(tf.group,ty),rf=re("entirety");var DC=Object.freeze({__proto__:null,required:Us,external:hs,optional:di,group:C0,asNamedPart:ag,name:ph,asCommon:AC,original:rf});const x0=(t,r,a,l)=>ot(r.defaults(t,a,l),a,{uid:t.partUids[r.name]},r.overrides(t,a,l)),MC=(t,r,a)=>{const l={},u={};return ct(a,g=>{g.fold(f=>{l[f.pname]=ef(!0,(y,C,_)=>f.factory.sketch(x0(y,f,C,_)))},f=>{const y=r.parts[f.name];u[f.name]=re(f.factory.sketch(x0(r,f,y[rf()]),y))},f=>{l[f.pname]=ef(!1,(y,C,_)=>f.factory.sketch(x0(y,f,C,_)))},f=>{l[f.pname]=Jb(!0,(y,C,_)=>{const T=y[f.name];return Ne(T,D=>f.factory.sketch(ot(f.defaults(y,D,_),D,f.overrides(y,D))))})})}),{internals:re(l),externals:re(u)}},S0=(t,r)=>{const a={};return ct(r,l=>{ag(l).each(u=>{const g=k0(t,u.pname);a[u.name]=f=>{const y=Os("Part: "+u.name+" in "+t,At(u.schema),f);return{...g,config:f,validated:y}}})}),a},k0=(t,r)=>({uiType:mh(),owner:t,name:r}),_0=(t,r,a)=>({uiType:mh(),owner:t,name:r,config:a,validated:{}}),zu=t=>Ce(t,r=>r.fold(E.none,E.some,E.none,E.none).map(a=>bu(a.name,a.schema.concat([Np(rf())]))).toArray()),fh=t=>Ne(t,ph),oy=(t,r,a)=>MC(t,r,a),ny=(t,r,a)=>Fu(E.some(t),r,r.components,a),Go=(t,r,a)=>{const l=r.partUids[a];return t.getSystem().getByUid(l).toOptional()},Zu=(t,r,a)=>Go(t,r,a).getOrDie("Could not find part: "+a),ry=(t,r,a)=>{const l={},u=r.partUids,g=t.getSystem();return ct(a,f=>{l[f]=re(g.getByUid(u[f]))}),l},sy=(t,r)=>{const a=t.getSystem();return an(r.partUids,(l,u)=>re(a.getByUid(l)))},ay=t=>dn(t.partUids),iy=(t,r,a)=>{const l={},u=r.partUids,g=t.getSystem();return ct(a,f=>{l[f]=re(g.getByUid(u[f]).getOrDie())}),l},NC=(t,r)=>{const a=fh(r);return ri(Ne(a,l=>({key:l,value:t+"-"+l})))},E0=t=>On("partUids","partUids",no(r=>NC(r.uid,t)),ma());var sf=Object.freeze({__proto__:null,generate:S0,generateOne:_0,schemas:zu,names:fh,substitutes:oy,components:ny,defaultUids:NC,defaultUidsSchema:E0,getAllParts:sy,getAllPartNames:ay,getPart:Go,getPartOrDie:Zu,getParts:ry,getPartsOrDie:iy});const ig=(t,r)=>(t.length>0?[bu("parts",t)]:[]).concat([Re("uid"),ge("dom",{}),ge("components",[]),Np("originalSpec"),ge("debug.sketcher",{})]).concat(r),vh=(t,r,a,l,u)=>{const g=ig(l,u);return Os(t+" [SpecSchema]",ua(g.concat(r)),a)},ly=(t,r,a,l)=>{const u=Uu(l),g=vh(t,r,u,[],[]);return a(g,u)},cy=(t,r,a,l,u)=>{const g=Uu(u),f=zu(a),y=E0(a),C=vh(t,r,g,f,[y]),_=oy(t,C,a),T=ny(t,C,_.internals());return l(C,T,g,_.externals())},wl=t=>wo(t,"uid"),Uu=t=>wl(t)?t:{...t,uid:Bg("uid")},c3=t=>t.uid!==void 0,af=ua([Re("name"),Re("factory"),Re("configFields"),ge("apis",{}),ge("extraApis",{})]),d3=ua([Re("name"),Re("factory"),Re("configFields"),Re("partFields"),ge("apis",{}),ge("extraApis",{})]),ui=t=>{const r=Os("Sketcher for "+t.name,af,t),a=g=>ly(r.name,r.configFields,r.factory,g),l=an(r.apis,xp),u=an(r.extraApis,(g,f)=>_1(g,f));return{name:r.name,configFields:r.configFields,sketch:a,...l,...u}},ra=t=>{const r=Os("Sketcher for "+t.name,d3,t),a=f=>cy(r.name,r.configFields,r.partFields,r.factory,f),l=S0(r.name,r.partFields),u=an(r.apis,xp),g=an(r.extraApis,(f,y)=>_1(f,y));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:a,parts:l,...u,...g}},bh=t=>vc("input")(t)&&lt(t,"type")!=="radio"||vc("textarea")(t);var RC=Object.freeze({__proto__:null,getCurrent:(t,r,a)=>r.find(t)});const LC=[Re("find")],uo=os({fields:LC,name:"composing",apis:RC}),u3=["input","button","textarea","select"],lf=(t,r,a)=>{(r.disabled()?cf:O0)(t,r)},dy=(t,r)=>r.useNative===!0&&zo(u3,$o(t.element)),HC=t=>In(t.element,"disabled"),m3=t=>{Z(t.element,"disabled","disabled")},g3=t=>{Co(t.element,"disabled")},h3=t=>lt(t.element,"aria-disabled")==="true",p3=t=>{Z(t.element,"aria-disabled","true")},f3=t=>{Z(t.element,"aria-disabled","false")},cf=(t,r,a)=>{r.disableClass.each(l=>{Tn(t.element,l)}),(dy(t,r)?m3:p3)(t),r.onDisabled(t)},O0=(t,r,a)=>{r.disableClass.each(l=>{cn(t.element,l)}),(dy(t,r)?g3:f3)(t),r.onEnabled(t)},dt=(t,r)=>dy(t,r)?HC(t):h3(t);var lg=Object.freeze({__proto__:null,enable:O0,disable:cf,isDisabled:dt,onLoad:lf,set:(t,r,a,l)=>{(l?cf:O0)(t,r)}}),v3=Object.freeze({__proto__:null,exhibit:(t,r)=>ai({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>on([pp($a(),(a,l)=>dt(a,t)),Pp(t,r,lf)])}),df=[zn("disabled",Ue),ge("useNative",!0),_o("disableClass"),mo("onDisabled"),mo("onEnabled")];const Tt=os({fields:df,name:"disabling",active:v3,apis:lg}),T0=(t,r,a,l)=>{const u=Ms(t.element,"."+r.highlightClass);ct(u,g=>{ls(l,f=>Fo(f.element,g))||(cn(g,r.highlightClass),t.getSystem().getByDom(g).each(f=>{r.onDehighlight(t,f),vo(f,w1())}))})},b3=(t,r,a)=>T0(t,r,a,[]),PC=(t,r,a,l)=>{D0(t,r,a,l)&&(cn(l.element,r.highlightClass),r.onDehighlight(t,l),vo(l,w1()))},cg=(t,r,a,l)=>{T0(t,r,a,[l]),D0(t,r,a,l)||(Tn(l.element,r.highlightClass),r.onHighlight(t,l),vo(l,Z2()))},BC=(t,r,a)=>{FC(t,r).each(l=>{cg(t,r,a,l)})},uy=(t,r,a)=>{gy(t,r).each(l=>{cg(t,r,a,l)})},A0=(t,r,a,l)=>{IC(t,r,a,l).fold(u=>{throw u},u=>{cg(t,r,a,u)})},uf=(t,r,a,l)=>{const u=ZC(t,r);Ut(u,l).each(g=>{cg(t,r,a,g)})},D0=(t,r,a,l)=>cr(l.element,r.highlightClass),my=(t,r,a)=>dr(t.element,"."+r.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),IC=(t,r,a,l)=>{const u=Ms(t.element,"."+r.itemClass);return E.from(u[l]).fold(()=>Gt.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},FC=(t,r,a)=>dr(t.element,"."+r.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),gy=(t,r,a)=>{const l=Ms(t.element,"."+r.itemClass);return(l.length>0?E.some(l[l.length-1]):E.none()).bind(u=>t.getSystem().getByDom(u).toOptional())},VC=(t,r,a,l)=>{const u=Ms(t.element,"."+r.itemClass);return Wo(u,g=>cr(g,r.highlightClass)).bind(g=>{const f=Du(g,l,0,u.length-1);return t.getSystem().getByDom(u[f]).toOptional()})},hy=(t,r,a)=>VC(t,r,a,-1),zC=(t,r,a)=>VC(t,r,a,1),ZC=(t,r,a)=>{const l=Ms(t.element,"."+r.itemClass);return tl(Ne(l,u=>t.getSystem().getByDom(u).toOptional()))};var py=Object.freeze({__proto__:null,dehighlightAll:b3,dehighlight:PC,highlight:cg,highlightFirst:BC,highlightLast:uy,highlightAt:A0,highlightBy:uf,isHighlighted:D0,getHighlighted:my,getFirst:FC,getLast:gy,getPrevious:hy,getNext:zC,getCandidates:ZC}),y3=[Re("highlightClass"),Re("itemClass"),mo("onHighlight"),mo("onDehighlight")];const xo=os({fields:y3,name:"highlighting",apis:py}),w3=[8],Rd=[9],zc=[13],Ui=[27],sa=[32],M0=[37],mf=[38],gf=[39],Wu=[40],C3=(t,r,a)=>{const l=hr(t.slice(0,r)),u=hr(t.slice(r+1));return Ut(l.concat(u),a)},x3=(t,r,a)=>{const l=hr(t.slice(0,r));return Ut(l,a)},S3=(t,r,a)=>{const l=t.slice(0,r),u=t.slice(r+1);return Ut(u.concat(l),a)},yh=(t,r,a)=>{const l=t.slice(r+1);return Ut(l,a)},co=t=>r=>{const a=r.raw;return zo(t,a.which)},oc=t=>r=>el(t,a=>a(r)),c=t=>t.raw.shiftKey===!0,m=t=>t.raw.ctrlKey===!0,p=xe(c),b=(t,r)=>({matches:t,classification:r}),x=(t,r)=>Ut(t,a=>a.matches(r)).map(a=>a.classification),O=(t,r,a)=>{r.exists(l=>a.exists(u=>Fo(u,l)))||wt(t,gp(),{prevFocus:r,newFocus:a})},N=()=>{const t=r=>ec(r.element);return{get:t,set:(r,a)=>{const l=t(r);r.getSystem().triggerFocus(a,r.element);const u=t(r);O(r,l,u)}}},F=()=>{const t=r=>xo.getHighlighted(r).map(a=>a.element);return{get:t,set:(r,a)=>{const l=t(r);r.getSystem().getByDom(a).fold(G,g=>{xo.highlight(r,g)});const u=t(r);O(r,l,u)}}};var X;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(X||(X={}));const ie=(t,r,a,l,u)=>{const g=()=>t.concat([ge("focusManager",N()),Ri("focusInside","onFocus",Oc(C=>zo(["onFocus","onEnterOrSpace","onApi"],C)?Gt.value(C):Gt.error("Invalid value for focusInside"))),ce("handler",y),ce("state",r),ce("sendFocusIn",u)]),f=(C,_,T,D,R)=>{const V=T(C,_,D,R);return x(V,_.event).bind(Q=>Q(C,_,D,R))},y={schema:g,processKey:f,toEvents:(C,_)=>{const T=C.focusInside!==X.OnFocusMode?E.none():u(C).map(V=>Te(Pi(),(Q,le)=>{V(Q,C,_),le.stop()})),D=(V,Q)=>{const le=co(sa.concat(zc))(Q.event);C.focusInside===X.OnEnterOrSpaceMode&&le&&yu(V,Q)&&u(C).each(Oe=>{Oe(V,C,_),Q.stop()})},R=[Te($l(),(V,Q)=>{f(V,Q,a,C,_).fold(()=>{D(V,Q)},le=>{Q.stop()})}),Te(Q4(),(V,Q)=>{f(V,Q,l,C,_).each(le=>{Q.stop()})})];return on(T.toArray().concat(R))}};return y},we=t=>{const r=[_o("onEscape"),_o("onEnter"),ge("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ge("firstTabstop",0),ge("useTabstopAt",De),_o("visibilitySelector")].concat([t]),a=(Y,ne)=>{const be=Y.visibilitySelector.bind(pe=>Yl(ne,pe)).getOr(ne);return sr(be)>0},l=(Y,ne)=>{const be=Ms(Y.element,ne.selector),pe=qo(be,Pe=>a(ne,Pe));return E.from(pe[ne.firstTabstop])},u=(Y,ne)=>ne.focusManager.get(Y).bind(be=>Yl(be,ne.selector)),g=(Y,ne)=>a(Y,ne)&&Y.useTabstopAt(ne),f=(Y,ne,be)=>{l(Y,ne).each(pe=>{ne.focusManager.set(Y,pe)})},y=(Y,ne,be,pe,Pe)=>Pe(ne,be,Ge=>g(pe,Ge)).fold(()=>pe.cyclic?E.some(!0):E.none(),Ge=>(pe.focusManager.set(Y,Ge),E.some(!0))),C=(Y,ne,be,pe)=>{const Pe=Ms(Y.element,be.selector);return u(Y,be).bind(Ge=>Wo(Pe,oo(Fo,Ge)).bind(st=>y(Y,Pe,st,be,pe)))},_=(Y,ne,be)=>{const pe=be.cyclic?C3:x3;return C(Y,ne,be,pe)},T=(Y,ne,be)=>{const pe=be.cyclic?S3:yh;return C(Y,ne,be,pe)},D=Y=>mm(Y).bind(Jd).exists(ne=>Fo(ne,Y)),R=(Y,ne,be)=>u(Y,be).filter(pe=>!be.useTabstopAt(pe)).bind(pe=>(D(pe)?_:T)(Y,ne,be)),V=(Y,ne,be)=>be.onEnter.bind(pe=>pe(Y,ne)),Q=(Y,ne,be)=>be.onEscape.bind(pe=>pe(Y,ne)),le=re([b(oc([c,co(Rd)]),_),b(co(Rd),T),b(oc([p,co(zc)]),V)]),Oe=re([b(co(Ui),Q),b(co(Rd),R)]);return ie(r,fl.init,le,Oe,()=>E.some(f))};var Se=we(po("cyclic",Ue)),ut=we(po("cyclic",De));const Ke=(t,r,a)=>(Rc(t,a,$a()),E.some(!0)),We=(t,r,a)=>bh(a)&&co(sa)(r.event)?E.none():Ke(t,r,a),Dt=(t,r)=>E.some(!0),it=[ge("execute",We),ge("useSpace",!1),ge("useEnter",!0),ge("useControlEnter",!1),ge("useDown",!1)],Zt=(t,r,a)=>a.execute(t,r,t.element),Qt=(t,r,a,l)=>{const u=a.useSpace&&!bh(t.element)?sa:[],g=a.useEnter?zc:[],f=a.useDown?Wu:[],y=u.concat(g).concat(f);return[b(co(y),Zt)].concat(a.useControlEnter?[b(oc([m,co(zc)]),Zt)]:[])},Qo=(t,r,a,l)=>a.useSpace&&!bh(t.element)?[b(co(sa),Dt)]:[];var ya=ie(it,fl.init,Qt,Qo,()=>E.none());const ps=()=>{const t=gn();return Ka({readState:()=>t.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{t.set({numRows:r,numColumns:a})},getNumRows:()=>t.get().map(r=>r.numRows),getNumColumns:()=>t.get().map(r=>r.numColumns)})};var Zc=Object.freeze({__proto__:null,flatgrid:ps,init:t=>t.state(t)});const Uc=t=>(r,a,l,u)=>{const g=t(r.element);return Rr(g,r,a,l,u)},ju=(t,r)=>{const a=Qm(t,r);return Uc(a)},Vo=(t,r)=>{const a=Qm(r,t);return Uc(a)},Ws=t=>(r,a,l,u)=>Rr(t,r,a,l,u),Rr=(t,r,a,l,u)=>l.focusManager.get(r).bind(g=>t(r.element,g,l,u)).map(g=>(l.focusManager.set(r,g),!0)),Ya=Ws,Wc=Ws,jc=Ws,Ha=t=>t.offsetWidth<=0&&t.offsetHeight<=0,N0=t=>!Ha(t.dom),hf=(t,r)=>Wo(t,r).map(a=>({index:a,candidates:t})),Cl=(t,r,a)=>{const l=f=>Fo(f,r),u=Ms(t,a),g=qo(u,N0);return hf(g,l)},fs=(t,r)=>Wo(t,a=>Fo(r,a)),UC=(t,r,a,l)=>{const u=Math.floor(r/a),g=r%a;return l(u,g).bind(f=>{const y=f.row*a+f.column;return y>=0&&y<t.length?E.some(t[y]):E.none()})},fy=(t,r,a,l,u)=>UC(t,r,l,(g,f)=>{const y=g===a-1?t.length-g*l:l,C=Du(f,u,0,y-1);return E.some({row:g,column:C})}),WC=(t,r,a,l,u)=>UC(t,r,l,(g,f)=>{const y=Du(g,u,0,a-1),C=y===a-1?t.length-y*l:l,_=Aa(f,0,C-1);return E.some({row:y,column:_})}),vy=(t,r,a,l)=>fy(t,r,a,l,1),jC=(t,r,a,l)=>fy(t,r,a,l,-1),R0=(t,r,a,l)=>WC(t,r,a,l,-1),$C=(t,r,a,l)=>WC(t,r,a,l,1),pf=[Re("selector"),ge("execute",We),ts("onEscape"),ge("captureTab",!1),bw()],DL=(t,r,a)=>{dr(t.element,r.selector).each(l=>{r.focusManager.set(t,l)})},ML=(t,r)=>r.focusManager.get(t).bind(a=>Yl(a,r.selector)),NL=(t,r,a,l)=>ML(t,a).bind(u=>a.execute(t,r,u)),GC=t=>(r,a,l,u)=>Cl(r,a,l.selector).bind(g=>t(g.candidates,g.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns))),L0=(t,r,a)=>a.captureTab?E.some(!0):E.none(),W5=(t,r,a)=>a.onEscape(t,r),k3=GC(jC),KC=GC(vy),RL=GC(R0),j5=GC($C),LL=re([b(co(M0),ju(k3,KC)),b(co(gf),Vo(k3,KC)),b(co(mf),Ya(RL)),b(co(Wu),Wc(j5)),b(oc([c,co(Rd)]),L0),b(oc([p,co(Rd)]),L0),b(co(sa.concat(zc)),NL)]),$5=re([b(co(Ui),W5),b(co(sa),Dt)]);var G5=ie(pf,ps,LL,$5,()=>E.some(DL));const K5=(t,r,a,l,u)=>{const g=y=>$o(y)==="button"&&lt(y,"disabled")==="disabled",f=(y,C,_)=>u(y,C,l,0,_.length-1,_[C],T=>g(_[T])?f(y,T,_):E.from(_[T]));return Cl(t,a,r).bind(y=>{const C=y.index,_=y.candidates;return f(C,C,_)})},q5=(t,r,a,l)=>K5(t,r,a,l,(u,g,f,y,C,_,T)=>{const D=Aa(g+f,y,C);return D===u?E.from(_):T(D)}),qC=(t,r,a,l)=>K5(t,r,a,l,(u,g,f,y,C,_,T)=>{const D=Du(g,f,y,C);return D===u?E.none():T(D)}),HL=[Re("selector"),ge("getInitial",E.none),ge("execute",We),ts("onEscape"),ge("executeOnMove",!1),ge("allowVertical",!0),ge("allowHorizontal",!0),ge("cycles",!0)],PL=(t,r)=>r.focusManager.get(t).bind(a=>Yl(a,r.selector)),_3=(t,r,a)=>PL(t,a).bind(l=>a.execute(t,r,l)),E3=(t,r,a)=>{r.getInitial(t).orThunk(()=>dr(t.element,r.selector)).each(l=>{r.focusManager.set(t,l)})},XC=(t,r,a)=>(a.cycles?qC:q5)(t,a.selector,r,-1),X5=(t,r,a)=>(a.cycles?qC:q5)(t,a.selector,r,1),O3=t=>(r,a,l,u)=>t(r,a,l,u).bind(()=>l.executeOnMove?_3(r,a,l):E.some(!0)),BL=(t,r,a)=>a.onEscape(t,r),IL=(t,r,a,l)=>{const u=[...a.allowHorizontal?M0:[]].concat(a.allowVertical?mf:[]),g=[...a.allowHorizontal?gf:[]].concat(a.allowVertical?Wu:[]);return[b(co(u),O3(ju(XC,X5))),b(co(g),O3(Vo(XC,X5))),b(co(zc),_3),b(co(sa),_3)]},nc=re([b(co(sa),Dt),b(co(Ui),BL)]);var FL=ie(HL,fl.init,IL,nc,()=>E.some(E3));const YC=(t,r,a)=>E.from(t[r]).bind(l=>E.from(l[a]).map(u=>({rowIndex:r,columnIndex:a,cell:u}))),Y5=(t,r,a,l)=>{const u=t[r].length,g=Du(a,l,0,u-1);return YC(t,r,g)},Q5=(t,r,a,l)=>{const u=Du(a,l,0,t.length-1),g=t[u].length,f=Aa(r,0,g-1);return YC(t,u,f)},J5=(t,r,a,l)=>{const u=t[r].length,g=Aa(a+l,0,u-1);return YC(t,r,g)},ff=(t,r,a,l)=>{const u=Aa(a+l,0,t.length-1),g=t[u].length,f=Aa(r,0,g-1);return YC(t,u,f)},T3=(t,r,a)=>Y5(t,r,a,1),VL=(t,r,a)=>Y5(t,r,a,-1),A3=(t,r,a)=>Q5(t,a,r,-1),QC=(t,r,a)=>Q5(t,a,r,1),D3=(t,r,a)=>J5(t,r,a,-1),zL=(t,r,a)=>J5(t,r,a,1),ZL=(t,r,a)=>ff(t,a,r,-1),UL=(t,r,a)=>ff(t,a,r,1),WL=[bu("selectors",[Re("row"),Re("cell")]),ge("cycles",!0),ge("previousSelector",E.none),ge("execute",We)],jL=(t,r,a)=>{r.previousSelector(t).orThunk(()=>{const l=r.selectors;return dr(t.element,l.cell)}).each(l=>{r.focusManager.set(t,l)})},$L=(t,r,a)=>ec(t.element).bind(l=>a.execute(t,r,l)),eA=(t,r)=>Ne(t,a=>Ms(a,r.selectors.cell)),H0=(t,r)=>(a,l,u)=>{const g=u.cycles?t:r;return Yl(l,u.selectors.row).bind(f=>{const y=Ms(f,u.selectors.cell);return fs(y,l).bind(C=>{const _=Ms(a,u.selectors.row);return fs(_,f).bind(T=>{const D=eA(_,u);return g(D,T,C).map(R=>R.cell)})})})},tA=H0(VL,D3),oA=H0(T3,zL),GL=H0(A3,ZL),KL=H0(QC,UL),vf=re([b(co(M0),ju(tA,oA)),b(co(gf),Vo(tA,oA)),b(co(mf),Ya(GL)),b(co(Wu),Wc(KL)),b(co(sa.concat(zc)),$L)]),qL=re([b(co(sa),Dt)]);var XL=ie(WL,fl.init,vf,qL,()=>E.some(jL));const M3=[Re("selector"),ge("execute",We),ge("moveOnTab",!1)],nA=(t,r,a)=>a.focusManager.get(t).bind(l=>a.execute(t,r,l)),rA=(t,r,a)=>{dr(t.element,r.selector).each(l=>{r.focusManager.set(t,l)})},N3=(t,r,a)=>qC(t,a.selector,r,-1),R3=(t,r,a)=>qC(t,a.selector,r,1),sA=(t,r,a,l)=>a.moveOnTab?jc(N3)(t,r,a,l):E.none(),YL=(t,r,a,l)=>a.moveOnTab?jc(R3)(t,r,a,l):E.none(),QL=re([b(co(mf),jc(N3)),b(co(Wu),jc(R3)),b(oc([c,co(Rd)]),sA),b(oc([p,co(Rd)]),YL),b(co(zc),nA),b(co(sa),nA)]),JL=re([b(co(sa),Dt)]);var L3=ie(M3,fl.init,QL,JL,()=>E.some(rA));const eH=[ts("onSpace"),ts("onEnter"),ts("onShiftEnter"),ts("onLeft"),ts("onRight"),ts("onTab"),ts("onShiftTab"),ts("onUp"),ts("onDown"),ts("onEscape"),ge("stopSpaceKeyup",!1),_o("focusIn")],tH=(t,r,a)=>[b(co(sa),a.onSpace),b(oc([p,co(zc)]),a.onEnter),b(oc([c,co(zc)]),a.onShiftEnter),b(oc([c,co(Rd)]),a.onShiftTab),b(oc([p,co(Rd)]),a.onTab),b(co(mf),a.onUp),b(co(Wu),a.onDown),b(co(M0),a.onLeft),b(co(gf),a.onRight),b(co(sa),a.onSpace)],oH=(t,r,a)=>[...a.stopSpaceKeyup?[b(co(sa),Dt)]:[],b(co(Ui),a.onEscape)];var nH=ie(eH,fl.init,tH,oH,t=>t.focusIn);const aA=Se.schema(),rH=ut.schema(),sH=FL.schema(),aH=G5.schema(),iA=XL.schema(),iH=ya.schema(),lH=L3.schema(),lA=nH.schema();var cH=Object.freeze({__proto__:null,acyclic:aA,cyclic:rH,flow:sH,flatgrid:aH,matrix:iA,execution:iH,menu:lH,special:lA});const dH=t=>Gs(t,"setGridSize"),Ct=bb({branchKey:"mode",branches:cH,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,a)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,r,a)})},setGridSize:(t,r,a,l,u)=>{dH(a)?a.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:Zc}),cA=(t,r)=>{Cb(()=>{ba(t,r,()=>Ne(r,t.getSystem().build))},t.element)},H3=(t,r)=>{Cb(()=>{La(t,r,()=>Zg(t.element,r,t.getSystem().buildOrPatch))},t.element)},mi=(t,r,a,l)=>{Pu(r);const u=zg(t.element,a,l,t.getSystem().buildOrPatch);ci(t,u),t.syncComponents()},JC=(t,r,a)=>{const l=t.getSystem().build(a);Zs(t,l,r)},uH=(t,r,a,l)=>{Qn(r),JC(t,(u,g)=>Tg(u,g,a),l)},dA=(t,r,a,l)=>(r.reuseDom?H3:cA)(t,l),mH=(t,r,a,l)=>{JC(t,ks,l)},uA=(t,r,a,l)=>{JC(t,us,l)},mA=(t,r,a,l)=>{const u=ex(t);Ut(u,g=>Fo(l.element,g.element)).each(Qn)},ex=(t,r)=>t.components(),P3=(t,r,a,l,u)=>{const g=ex(t);return E.from(g[l]).map(f=>(u.fold(()=>Qn(f),y=>{(r.reuseDom?mi:uH)(t,f,l,y)}),f))};var gA=Object.freeze({__proto__:null,append:mH,prepend:uA,remove:mA,replaceAt:P3,replaceBy:(t,r,a,l,u)=>{const g=ex(t);return Wo(g,l).bind(f=>P3(t,r,a,f,u))},set:dA,contents:ex});const Wt=os({fields:[Zr("reuseDom",!0)],name:"replacing",apis:gA}),hA=(t,r)=>{const a=on(r);return os({fields:[Re("enabled")],name:t,active:{events:re(a)}})},qt=(t,r)=>{const a=hA(t,r);return{key:t,value:{config:{},me:a,configAsRaw:re({}),initialConfig:{},state:fl}}},pA=(t,r)=>{r.ignore||(Na(t.element),r.onFocus(t))};var gH=Object.freeze({__proto__:null,focus:pA,blur:(t,r)=>{r.ignore||wb(t.element)},isFocused:t=>ns(t.element)}),hH=Object.freeze({__proto__:null,exhibit:(t,r)=>{const a=r.ignore?{}:{attributes:{tabindex:"-1"}};return ai(a)},events:t=>on([Te(Pi(),(r,a)=>{pA(r,t),a.stop()})].concat(t.stopMousedown?[Te(Oa(),(r,a)=>{a.event.prevent()})]:[]))}),fA=[mo("onFocus"),ge("stopMousedown",!1),ge("ignore",!1)];const Pt=os({fields:fA,name:"focusing",active:hH,apis:gH}),wh=t=>({init:()=>{const r=Lt(t);return{get:()=>r.get(),set:a=>r.set(a),clear:()=>r.set(t),readState:()=>r.get()}}}),vA=(t,r,a)=>{const l=r.aria;l.update(t,l,a.get())},bA=(t,r,a)=>{r.toggleClass.each(l=>{a.get()?Tn(t.element,l):cn(t.element,l)})},bf=(t,r,a,l)=>{const u=a.get();a.set(l),bA(t,r,a),vA(t,r,a),u!==l&&r.onToggled(t,l)},yA=(t,r,a)=>{bf(t,r,a,!a.get())},pH=(t,r,a)=>{bf(t,r,a,!0)},fH=(t,r,a)=>{bf(t,r,a,!1)},vH=(t,r,a)=>a.get(),B3=(t,r,a)=>{bf(t,r,a,r.selected)};var I3=Object.freeze({__proto__:null,onLoad:B3,toggle:yA,isOn:vH,on:pH,off:fH,set:bf}),F3=Object.freeze({__proto__:null,exhibit:()=>ai({}),events:(t,r)=>{const a=vk(t,r,yA),l=Pp(t,r,B3);return on($t([t.toggleOnExecute?[a]:[],[l]]))}});const bH=(t,r,a)=>{Z(t.element,"aria-pressed",a),r.syncWithExpanded&&V3(t,r,a)},Ch=(t,r,a)=>{Z(t.element,"aria-selected",a)},wA=(t,r,a)=>{Z(t.element,"aria-checked",a)},V3=(t,r,a)=>{Z(t.element,"aria-expanded",a)};var yH=[ge("selected",!1),_o("toggleClass"),ge("toggleOnExecute",!0),mo("onToggled"),Ri("aria",{mode:"none"},fo("mode",{pressed:[ge("syncWithExpanded",!1),ce("update",bH)],checked:[ce("update",wA)],expanded:[ce("update",V3)],selected:[ce("update",Ch)],none:[ce("update",G)]}))];const so=os({fields:yH,name:"toggling",active:F3,apis:I3,state:wh(!1)}),P0=()=>{const t=(r,a)=>{a.stop(),Nc(r)};return[Te(vd(),t),Te(up(),t),Zm(hl()),Zm(Oa())]},xh=t=>{const r=a=>ql((l,u)=>{a(l),u.stop()});return on($t([t.map(r).toArray(),P0()]))},z3="alloy.item-hover",Z3="alloy.item-focus",dg="alloy.item-toggled",ug=t=>{(ec(t.element).isNone()||Pt.isFocused(t))&&(Pt.isFocused(t)||Pt.focus(t),wt(t,z3,{item:t}))},CA=t=>{wt(t,Z3,{item:t})},wH=(t,r)=>{wt(t,dg,{item:t,state:r})},U3=re(z3),mg=re(Z3),W3=re(dg),xA=t=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),SA=t=>({aria:{mode:"checked"},...Ls(t,(r,a)=>a!=="exclusive"),onToggled:(r,a)=>{vt(t.onToggled)&&t.onToggled(r,a),wH(r,a)}}),kA=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:xA(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:zi.augment(t.itemBehaviours,[t.toggling.fold(so.revoke,r=>so.config(SA(r))),Pt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{CA(r)}}),Ct.config({mode:"execution"}),Je.config({store:{mode:"memory",initialValue:t.data}}),qt("item-type-events",[...P0(),Te(ja(),ug),Te(dp(),Pt.focus)])]),components:t.components,eventOrder:t.eventOrder}),j3=[Re("data"),Re("components"),Re("dom"),ge("hasSubmenu",!1),_o("toggling"),zi.field("itemBehaviours",[so,Pt,Ct,Je]),ge("ignoreFocus",!1),ge("domModification",{}),ce("builder",kA),ge("eventOrder",{})],_A=t=>({dom:t.dom,components:t.components,events:on([W2(dp())])}),CH=[Re("dom"),Re("components"),ce("builder",_A)],$3=re("item-widget"),G3=re([Us({name:"widget",overrides:t=>({behaviours:ze([Je.config({store:{mode:"manual",getValue:r=>t.data,setValue:G}})])})})]),tx=t=>{const r=oy($3(),t,G3()),a=ny($3(),t,r.internals()),l=g=>Go(g,t,"widget").map(f=>(Ct.focusIn(f),f)),u=(g,f)=>bh(f.event.target)?E.none():(()=>(t.autofocus&&f.setSource(g.element),E.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:on([ql((g,f)=>{l(g).each(y=>{f.stop()})}),Te(ja(),ug),Te(dp(),(g,f)=>{t.autofocus?l(g):Pt.focus(g)})]),behaviours:zi.augment(t.widgetBehaviours,[Je.config({store:{mode:"memory",initialValue:t.data}}),Pt.config({ignore:t.ignoreFocus,onFocus:g=>{CA(g)}}),Ct.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:Mw(),onLeft:u,onRight:u,onEscape:(g,f)=>!Pt.isFocused(g)&&!t.autofocus?(Pt.focus(g),E.some(!0)):(t.autofocus&&f.setSource(g.element),E.none())})])}},K3=[Re("uid"),Re("data"),Re("components"),Re("dom"),ge("autofocus",!1),ge("ignoreFocus",!1),zi.field("widgetBehaviours",[Je,Pt,Ct]),ge("domModification",{}),E0(G3()),ce("builder",tx)],q3=fo("type",{widget:K3,item:j3,separator:CH}),xH=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),SH=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),EA=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),OA=re([C0({factory:{sketch:t=>{const r=Os("menu.spec item",q3,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>wo(r,"uid")?r:{...r,uid:Bg("item")},overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),TA=re([Re("value"),Re("items"),Re("dom"),Re("components"),ge("eventOrder",{}),Nr("menuBehaviours",[xo,Je,uo,Ct]),Ri("movement",{mode:"menu",moveOnTab:!0},fo("mode",{grid:[bw(),ce("config",xH)],matrix:[ce("config",SH),Re("rowSelector"),ge("previousSelector",E.none)],menu:[ge("moveOnTab",!0),ce("config",EA)]})),vw(),ge("fakeFocus",!1),ge("focusManager",N()),mo("onHighlight"),mo("onDehighlight")]),X3=re("alloy.menu-focus"),kH=(t,r)=>{const a=Ms(t.element,'[role="menuitemradio"][aria-checked="true"]');ct(a,l=>{Fo(l,r.element)||t.getSystem().getByDom(l).each(u=>{so.off(u)})})},Y3=(t,r,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jn(t.menuBehaviours,[xo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Je.config({store:{mode:"memory",initialValue:t.value}}),uo.config({find:E.some}),Ct.config(t.movement.config(t,t.movement))]),events:on([Te(mg(),(u,g)=>{const f=g.event;u.getSystem().getByDom(f.target).each(y=>{xo.highlight(u,y),g.stop(),wt(u,X3(),{menu:u,item:y})})}),Te(U3(),(u,g)=>{const f=g.event.item;xo.highlight(u,f)}),Te(W3(),(u,g)=>{const{item:f,state:y}=g.event;y&&lt(f.element,"role")==="menuitemradio"&&kH(u,f)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),yf=ra({name:"Menu",configFields:TA(),partFields:OA(),factory:Y3}),_H=t=>Al(t,(r,a)=>({k:r,v:a})),AA=(t,r,a,l)=>nt(a,l).bind(u=>nt(t,u).bind(g=>{const f=AA(t,r,a,g);return E.some([g].concat(f))})).getOr([]),EH=(t,r)=>{const a={};Bn(t,(f,y)=>{ct(f,C=>{a[C]=y})});const l=r,u=_H(r),g=an(u,(f,y)=>[y].concat(AA(a,l,u,y)));return an(a,f=>nt(g,f).getOr([f]))},DA=()=>{const t=Lt({}),r=Lt({}),a=Lt({}),l=gn(),u=Lt({}),g=()=>{t.set({}),r.set({}),a.set({}),l.clear()},f=()=>l.get().isNone(),y=(ne,be)=>{r.set({...r.get(),[ne]:{type:"prepared",menu:be}})},C=(ne,be,pe,Pe)=>{l.set(ne),t.set(pe),r.set(be),u.set(Pe);const Ge=EH(Pe,pe);a.set(Ge)},_=ne=>pr(t.get(),(be,pe)=>be===ne),T=(ne,be,pe)=>le(ne).bind(Pe=>_(ne).bind(Ge=>be(Ge).map(st=>({triggeredMenu:Pe,triggeringItem:st,triggeringPath:pe})))),D=(ne,be)=>{const pe=qo(Y(ne).toArray(),Pe=>le(Pe).isSome());return nt(a.get(),ne).bind(Pe=>{const Ge=hr(pe.concat(Pe)),st=Ce(Ge,(pt,io)=>T(pt,be,Ge.slice(0,io+1)).fold(()=>Xr(l.get(),pt)?[]:[E.none()],je=>[E.some(je)]));return jo(st)})},R=ne=>nt(t.get(),ne).map(be=>{const pe=nt(a.get(),ne).getOr([]);return[be].concat(pe)}),V=ne=>nt(a.get(),ne).bind(be=>be.length>1?E.some(be.slice(1)):E.none()),Q=ne=>nt(a.get(),ne),le=ne=>Oe(ne).bind(MA),Oe=ne=>nt(r.get(),ne),Y=ne=>nt(t.get(),ne);return{setMenuBuilt:y,setContents:C,expand:R,refresh:Q,collapse:V,lookupMenu:Oe,lookupItem:Y,otherMenus:ne=>{const be=u.get();return kt(dn(be),ne)},getPrimary:()=>l.get().bind(le),getMenus:()=>r.get(),clear:g,isClear:f,getTriggeringPath:D}},MA=t=>t.type==="prepared"?E.some(t.menu):E.none(),NA={init:DA,extractPreparedMenu:MA},Q3=Qe("tiered-menu-item-highlight"),B0=Qe("tiered-menu-item-dehighlight");var Qa;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Qa||(Qa={}));const by=(t,r)=>{const a=gn(),l=(Ze,mt,at)=>an(at,(Bt,oe)=>{const se=()=>yf.sketch({...Bt,value:oe,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ke,_e)=>{wt(ke,Q3,{menuComp:ke,itemComp:_e})},onDehighlight:(ke,_e)=>{wt(ke,B0,{menuComp:ke,itemComp:_e})},focusManager:t.fakeFocus?F():N()});return oe===mt?{type:"prepared",menu:Ze.getSystem().build(se())}:{type:"notbuilt",nbMenu:se}}),u=NA.init(),g=Ze=>{const mt=l(Ze,t.data.primary,t.data.menus),at=C();return u.setContents(t.data.primary,mt,t.data.expansions,at),u.getPrimary()},f=Ze=>Je.getValue(Ze).value,y=(Ze,mt,at)=>Kn(mt,Bt=>{if(!Bt.getSystem().isConnected())return E.none();const oe=xo.getCandidates(Bt);return Ut(oe,se=>f(se)===at)}),C=Ze=>an(t.data.menus,(mt,at)=>Ce(mt.items,Bt=>Bt.type==="separator"?[]:[Bt.data.value])),_=xo.highlight,T=(Ze,mt)=>{_(Ze,mt),xo.getHighlighted(mt).orThunk(()=>xo.getFirst(mt)).each(at=>{t.fakeFocus?xo.highlight(mt,at):Rc(Ze,at.element,dp())})},D=(Ze,mt)=>tl(Ne(mt,at=>Ze.lookupMenu(at).bind(Bt=>Bt.type==="prepared"?E.some(Bt.menu):E.none()))),R=(Ze,mt,at)=>{const Bt=D(mt,mt.otherMenus(at));ct(Bt,oe=>{Ta(oe.element,[t.markers.backgroundMenu]),t.stayInDom||Wt.remove(Ze,oe)})},V=Ze=>a.get().getOrThunk(()=>{const mt={},at=Ms(Ze.element,`.${t.markers.item}`),Bt=qo(at,oe=>lt(oe,"aria-haspopup")==="true");return ct(Bt,oe=>{Ze.getSystem().getByDom(oe).each(se=>{const ke=f(se);mt[ke]=se})}),a.set(mt),mt}),Q=(Ze,mt)=>{const at=V(Ze);Bn(at,(Bt,oe)=>{const se=zo(mt,oe);Z(Bt.element,"aria-expanded",se)})},le=(Ze,mt,at)=>E.from(at[0]).bind(Bt=>mt.lookupMenu(Bt).bind(oe=>{if(oe.type==="notbuilt")return E.none();{const se=oe.menu,ke=D(mt,at.slice(1));return ct(ke,_e=>{Tn(_e.element,t.markers.backgroundMenu)}),Ps(se.element)||Wt.append(Ze,Ts(se)),Ta(se.element,[t.markers.backgroundMenu]),T(Ze,se),R(Ze,mt,at),E.some(se)}}));let Oe;(function(Ze){Ze[Ze.HighlightSubmenu=0]="HighlightSubmenu",Ze[Ze.HighlightParent=1]="HighlightParent"})(Oe||(Oe={}));const Y=(Ze,mt,at)=>{if(at.type==="notbuilt"){const Bt=Ze.getSystem().build(at.nbMenu());return u.setMenuBuilt(mt,Bt),Bt}else return at.menu},ne=(Ze,mt,at=Oe.HighlightSubmenu)=>{if(mt.hasConfigured(Tt)&&Tt.isDisabled(mt))return E.some(mt);{const Bt=f(mt);return u.expand(Bt).bind(oe=>(Q(Ze,oe),E.from(oe[0]).bind(se=>u.lookupMenu(se).bind(ke=>{const _e=Y(Ze,se,ke);return Ps(_e.element)||Wt.append(Ze,Ts(_e)),t.onOpenSubmenu(Ze,mt,_e,hr(oe)),at===Oe.HighlightSubmenu?(xo.highlightFirst(_e),le(Ze,u,oe)):(xo.dehighlightAll(_e),E.some(mt))}))))}},be=(Ze,mt)=>{const at=f(mt);return u.collapse(at).bind(Bt=>(Q(Ze,Bt),le(Ze,u,Bt).map(oe=>(t.onCollapseMenu(Ze,mt,oe),oe))))},pe=(Ze,mt)=>{const at=f(mt);return u.refresh(at).bind(Bt=>(Q(Ze,Bt),le(Ze,u,Bt)))},Pe=(Ze,mt)=>bh(mt.element)?E.none():ne(Ze,mt,Oe.HighlightSubmenu),Ge=(Ze,mt)=>bh(mt.element)?E.none():be(Ze,mt),st=(Ze,mt)=>be(Ze,mt).orThunk(()=>t.onEscape(Ze,mt).map(()=>Ze)),pt=Ze=>(mt,at)=>Yl(at.getSource(),`.${t.markers.item}`).bind(Bt=>mt.getSystem().getByDom(Bt).toOptional().bind(oe=>Ze(mt,oe).map(De))),io=on([Te(X3(),(Ze,mt)=>{const at=mt.event.item;u.lookupItem(f(at)).each(()=>{const Bt=mt.event.menu;xo.highlight(Ze,Bt);const oe=f(mt.event.item);u.refresh(oe).each(se=>R(Ze,u,se))})}),ql((Ze,mt)=>{const at=mt.event.target;Ze.getSystem().getByDom(at).each(Bt=>{f(Bt).indexOf("collapse-item")===0&&be(Ze,Bt),ne(Ze,Bt,Oe.HighlightSubmenu).fold(()=>{t.onExecute(Ze,Bt)},G)})}),yn((Ze,mt)=>{g(Ze).each(at=>{Wt.append(Ze,Ts(at)),t.onOpenMenu(Ze,at),t.highlightOnOpen===Qa.HighlightMenuAndItem?T(Ze,at):t.highlightOnOpen===Qa.HighlightJustMenu&&_(Ze,at)})}),Te(Q3,(Ze,mt)=>{t.onHighlightItem(Ze,mt.event.menuComp,mt.event.itemComp)}),Te(B0,(Ze,mt)=>{t.onDehighlightItem(Ze,mt.event.menuComp,mt.event.itemComp)}),...t.navigateOnHover?[Te(U3(),(Ze,mt)=>{const at=mt.event.item;pe(Ze,at),ne(Ze,at,Oe.HighlightParent),t.onHover(Ze,at)})]:[]]),je=Ze=>xo.getHighlighted(Ze).bind(xo.getHighlighted),qe=Ze=>{je(Ze).each(mt=>{be(Ze,mt)})},Et=Ze=>{u.getPrimary().each(mt=>{T(Ze,mt)})},yo=Ze=>E.from(Ze.components()[0]).filter(mt=>lt(mt.element,"role")==="menu"),kn={collapseMenu:qe,highlightPrimary:Et,repositionMenus:Ze=>{u.getPrimary().bind(mt=>je(Ze).bind(at=>{const Bt=f(at),oe=ki(u.getMenus()),se=tl(Ne(oe,NA.extractPreparedMenu));return u.getTriggeringPath(Bt,ke=>y(Ze,se,ke))}).map(at=>({primary:mt,triggeringPath:at}))).fold(()=>{yo(Ze).each(mt=>{t.onRepositionMenu(Ze,mt,[])})},({primary:mt,triggeringPath:at})=>{t.onRepositionMenu(Ze,mt,at)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jn(t.tmenuBehaviours,[Ct.config({mode:"special",onRight:pt(Pe),onLeft:pt(Ge),onEscape:pt(st),focusIn:(Ze,mt)=>{u.getPrimary().each(at=>{Rc(Ze,at.element,dp())})}}),xo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),uo.config({find:Ze=>xo.getHighlighted(Ze)}),Wt.config({})]),eventOrder:t.eventOrder,apis:kn,events:io}},J3=re("collapse-item"),RA=(t,r,a)=>({primary:t,menus:r,expansions:a}),LA=(t,r)=>({primary:t,menus:Hi(t,r),expansions:{}}),OH=t=>({value:Qe(J3()),meta:{text:t}}),wf=ui({name:"TieredMenu",configFields:[I1("onExecute"),I1("onEscape"),Xa("onOpenMenu"),Xa("onOpenSubmenu"),mo("onRepositionMenu"),mo("onCollapseMenu"),ge("highlightOnOpen",Qa.HighlightMenuAndItem),bu("data",[Re("primary"),Re("menus"),Re("expansions")]),ge("fakeFocus",!1),mo("onHighlightItem"),mo("onDehighlightItem"),mo("onHover"),Gg(),Re("dom"),ge("navigateOnHover",!0),ge("stayInDom",!1),Nr("tmenuBehaviours",[Ct,xo,uo,Wt]),ge("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:by,extraApis:{tieredData:RA,singleData:LA,collapseItem:OH}}),HA=(t,r,a,l,u)=>{const g=()=>t.lazySink(r),f=l.type==="horizontal"?{layouts:{onLtr:()=>fb(),onRtl:()=>z1()}}:{},y=_=>_.length===2,C=_=>y(_)?f:{};return wf.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Yt.close(r),t.onEscape.map(_=>_(r)),E.some(!0)),onExecute:()=>E.some(!0),onOpenMenu:(_,T)=>{zs.positionWithinBounds(g().getOrDie(),T,a,u())},onOpenSubmenu:(_,T,D,R)=>{const V=g().getOrDie();zs.position(V,D,{anchor:{type:"submenu",item:T,...C(R)}})},onRepositionMenu:(_,T,D)=>{const R=g().getOrDie();zs.positionWithinBounds(R,T,a,u()),ct(D,V=>{const Q=C(V.triggeringPath);zs.position(R,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...Q}})})}})},TH=(t,r)=>{const a=(R,V)=>t.getRelated(R).exists(Q=>Ed(Q,V)),l=(R,V)=>{Yt.setContent(R,V)},u=(R,V,Q)=>{const le=E.none;g(R,V,Q,le)},g=(R,V,Q,le)=>{const Oe=t.lazySink(R).getOrDie();Yt.openWhileCloaked(R,V,()=>zs.positionWithinBounds(Oe,R,Q,le())),Je.setValue(R,E.some({mode:"position",config:Q,getBounds:le}))},f=(R,V,Q)=>{y(R,V,Q,E.none)},y=(R,V,Q,le)=>{const Oe=HA(t,R,V,Q,le);Yt.open(R,Oe),Je.setValue(R,E.some({mode:"menu",menu:Oe}))},C=R=>{Yt.isOpen(R)&&(Je.setValue(R,E.none()),Yt.close(R))},_=R=>Yt.getState(R),T=R=>{Yt.isOpen(R)&&Je.getValue(R).each(V=>{switch(V.mode){case"menu":Yt.getState(R).each(wf.repositionMenus);break;case"position":const Q=t.lazySink(R).getOrDie();zs.positionWithinBounds(Q,R,V.config,V.getBounds());break}})},D={setContent:l,showAt:u,showWithinBounds:g,showMenuAt:f,showMenuWithinBounds:y,hide:C,getContent:_,reposition:T,isOpen:Yt.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Jn(t.inlineBehaviours,[Yt.config({isPartOf:(R,V,Q)=>Ed(V,Q)||a(R,Q),getAttachPoint:R=>t.lazySink(R).getOrDie(),onOpen:R=>{t.onShow(R)},onClose:R=>{t.onHide(R)}}),Je.config({store:{mode:"memory",initialValue:E.none()}}),Ma.config({channels:{...m0({isExtraPart:r.isExtraPart,...t.fireDismissalEventInstead.map(R=>({fireEventInstead:{event:R.event}})).getOr({})}),...$b({...t.fireRepositionEventInstead.map(R=>({fireEventInstead:{event:R.event}})).getOr({}),doReposition:T})}})]),eventOrder:t.eventOrder,apis:D}},An=ui({name:"InlineView",configFields:[Re("lazySink"),mo("onShow"),mo("onHide"),Rm("onEscape"),Nr("inlineBehaviours",[Yt,Je,Ma]),_a("fireDismissalEventInstead",[ge("event",Su())]),_a("fireRepositionEventInstead",[ge("event",qv())]),ge("getRelated",E.none),ge("isExtraPart",Ue),ge("eventOrder",E.none)],factory:TH,apis:{showAt:(t,r,a,l)=>{t.showAt(r,a,l)},showWithinBounds:(t,r,a,l,u)=>{t.showWithinBounds(r,a,l,u)},showMenuAt:(t,r,a,l)=>{t.showMenuAt(r,a,l)},showMenuWithinBounds:(t,r,a,l,u)=>{t.showMenuWithinBounds(r,a,l,u)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,a)=>{t.setContent(r,a)},reposition:(t,r)=>{t.reposition(r)}}});var ox=tinymce.util.Tools.resolve("tinymce.util.Delay");const js=ui({name:"Button",factory:t=>{const r=xh(t.action),a=t.dom.tag,l=g=>nt(t.dom,"attributes").bind(f=>nt(f,g)),u=()=>{if(a==="button"){const g=l("type").getOr("button"),f=l("role").map(y=>({role:y})).getOr({});return{type:g,...f}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:zi.augment(t.buttonBehaviours,[Pt.config({}),Ct.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[ge("uid",void 0),Re("dom"),ge("components",[]),zi.field("buttonBehaviours",[Pt,Ct]),_o("action"),_o("role"),ge("eventOrder",{})]}),PA=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return Io(r,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},nx=t=>Array.prototype.slice.call(t.dom.classList,0),Ld=t=>{const r=Xe.fromHtml(t),a=Sa(r),l=PA(r),u=nx(r),g=a.length===0?{}:{innerHtml:S1(r)};return{tag:$o(r),classes:u,attributes:l,...g}},Eo=t=>{const r=c3(t)&&Gs(t,"uid")?t.uid:Bg("memento");return{get:a=>a.getSystem().getByUid(r).getOrDie(),getOpt:a=>a.getSystem().getByUid(r).toOptional(),asSpec:()=>({...t,uid:r})}};function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cf(t)}function e_(t,r){return e_=Object.setPrototypeOf||function(a,l){return a.__proto__=l,a},e_(t,r)}function AH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rx(t,r,a){return AH()?rx=Reflect.construct:rx=function(l,u,g){var f=[null];f.push.apply(f,u);var y=Function.bind.apply(l,f),C=new y;return g&&e_(C,g.prototype),C},rx.apply(null,arguments)}function $c(t){return BA(t)||DH(t)||MH(t)||NH()}function BA(t){if(Array.isArray(t))return t_(t)}function DH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MH(t,r){if(t){if(typeof t=="string")return t_(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t_(t,r)}}function t_(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=t[a];return l}function NH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var RH=Object.hasOwnProperty,IA=Object.setPrototypeOf,FA=Object.isFrozen,LH=Object.getPrototypeOf,HH=Object.getOwnPropertyDescriptor,Wi=Object.freeze,$u=Object.seal,PH=Object.create,Sh=typeof Reflect<"u"&&Reflect,sx=Sh.apply,o_=Sh.construct;sx||(sx=function(t,r,a){return t.apply(r,a)}),Wi||(Wi=function(t){return t}),$u||($u=function(t){return t}),o_||(o_=function(t,r){return rx(t,$c(r))});var xf=Pd(Array.prototype.forEach),VA=Pd(Array.prototype.pop),yy=Pd(Array.prototype.push),Hd=Pd(String.prototype.toLowerCase),BH=Pd(String.prototype.match),kh=Pd(String.prototype.replace),rc=Pd(String.prototype.indexOf),zA=Pd(String.prototype.trim),gi=Pd(RegExp.prototype.test),ax=n_(TypeError);function Pd(t){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return sx(t,r,l)}}function n_(t){return function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return o_(t,a)}}function Jo(t,r){IA&&IA(t,null);for(var a=r.length;a--;){var l=r[a];if(typeof l=="string"){var u=Hd(l);u!==l&&(FA(r)||(r[a]=u),l=u)}t[l]=!0}return t}function Sf(t){var r=PH(null),a;for(a in t)sx(RH,t,[a])&&(r[a]=t[a]);return r}function ix(t,r){for(;t!==null;){var a=HH(t,r);if(a){if(a.get)return Pd(a.get);if(typeof a.value=="function")return Pd(a.value)}t=LH(t)}function l(u){return console.warn("fallback value for",u),null}return l}var wy=Wi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cy=Wi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lx=Wi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ZA=Wi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cx=Wi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),IH=Wi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dx=Wi(["#text"]),UA=Wi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xy=Wi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),WA=Wi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_h=Wi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ux=$u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jA=$u(/<%[\w\W]*|[\w\W]*%>/gm),$A=$u(/^data-[\-\w.\u00B7-\uFFFF]/),FH=$u(/^aria-[\-\w]+$/),VH=$u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zH=$u(/^(?:\w+script|data):/i),ZH=$u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),r_=$u(/^html$/i),GA=function(){return typeof window>"u"?null:window},KA=function(t,r){if(Cf(t)!=="object"||typeof t.createPolicy!="function")return null;var a=null,l="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(l)&&(a=r.currentScript.getAttribute(l));var u="dompurify"+(a?"#"+a:"");try{return t.createPolicy(u,{createHTML:function(g){return g}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function mx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:GA(),r=function(he){return mx(he)};if(r.version="2.3.8",r.removed=[],!t||!t.document||t.document.nodeType!==9)return r.isSupported=!1,r;var a=t.document,l=t.document,u=t.DocumentFragment,g=t.HTMLTemplateElement,f=t.Node,y=t.Element,C=t.NodeFilter,_=t.NamedNodeMap,T=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,D=t.HTMLFormElement,R=t.DOMParser,V=t.trustedTypes,Q=y.prototype,le=ix(Q,"cloneNode"),Oe=ix(Q,"nextSibling"),Y=ix(Q,"childNodes"),ne=ix(Q,"parentNode");if(typeof g=="function"){var be=l.createElement("template");be.content&&be.content.ownerDocument&&(l=be.content.ownerDocument)}var pe=KA(V,a),Pe=pe?pe.createHTML(""):"",Ge=l,st=Ge.implementation,pt=Ge.createNodeIterator,io=Ge.createDocumentFragment,je=Ge.getElementsByTagName,qe=a.importNode,Et={};try{Et=Sf(l).documentMode?l.documentMode:{}}catch{}var yo={};r.isSupported=typeof ne=="function"&&st&&typeof st.createHTMLDocument<"u"&&Et!==9;var kn=ux,Ze=jA,mt=$A,at=FH,Bt=zH,oe=ZH,se=VH,ke=null,_e=Jo({},[].concat($c(wy),$c(Cy),$c(lx),$c(cx),$c(dx))),rt=null,ro=Jo({},[].concat($c(UA),$c(xy),$c(WA),$c(_h))),eo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Cr=null,jn=null,im=!0,lm=!0,Jh=!1,Ci=!1,cm=!1,I4=!1,F4=!1,Jf=!1,V4=!1,me=!1,zt=!0,St=!0,Dn=!1,Lr={},Ba=null,la=Jo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Av=null,Kd=Jo({},["audio","video","img","source","image","track"]),hc=null,_L=Jo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),z5="http://www.w3.org/1998/Math/MathML",VW="http://www.w3.org/2000/svg",Dv="http://www.w3.org/1999/xhtml",EL=Dv,zW=!1,z4,bj=["application/xhtml+xml","text/html"],yj="text/html",_2,Z4=null,wj=l.createElement("form"),qW=function(he){return he instanceof RegExp||he instanceof Function},ZW=function(he){Z4&&Z4===he||((!he||Cf(he)!=="object")&&(he={}),he=Sf(he),ke="ALLOWED_TAGS"in he?Jo({},he.ALLOWED_TAGS):_e,rt="ALLOWED_ATTR"in he?Jo({},he.ALLOWED_ATTR):ro,hc="ADD_URI_SAFE_ATTR"in he?Jo(Sf(_L),he.ADD_URI_SAFE_ATTR):_L,Av="ADD_DATA_URI_TAGS"in he?Jo(Sf(Kd),he.ADD_DATA_URI_TAGS):Kd,Ba="FORBID_CONTENTS"in he?Jo({},he.FORBID_CONTENTS):la,Cr="FORBID_TAGS"in he?Jo({},he.FORBID_TAGS):{},jn="FORBID_ATTR"in he?Jo({},he.FORBID_ATTR):{},Lr="USE_PROFILES"in he?he.USE_PROFILES:!1,im=he.ALLOW_ARIA_ATTR!==!1,lm=he.ALLOW_DATA_ATTR!==!1,Jh=he.ALLOW_UNKNOWN_PROTOCOLS||!1,Ci=he.SAFE_FOR_TEMPLATES||!1,cm=he.WHOLE_DOCUMENT||!1,Jf=he.RETURN_DOM||!1,V4=he.RETURN_DOM_FRAGMENT||!1,me=he.RETURN_TRUSTED_TYPE||!1,F4=he.FORCE_BODY||!1,zt=he.SANITIZE_DOM!==!1,St=he.KEEP_CONTENT!==!1,Dn=he.IN_PLACE||!1,se=he.ALLOWED_URI_REGEXP||se,EL=he.NAMESPACE||Dv,he.CUSTOM_ELEMENT_HANDLING&&qW(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(eo.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&qW(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(eo.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(eo.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),z4=bj.indexOf(he.PARSER_MEDIA_TYPE)===-1?z4=yj:z4=he.PARSER_MEDIA_TYPE,_2=z4==="application/xhtml+xml"?function(jt){return jt}:Hd,Ci&&(lm=!1),V4&&(Jf=!0),Lr&&(ke=Jo({},$c(dx)),rt=[],Lr.html===!0&&(Jo(ke,wy),Jo(rt,UA)),Lr.svg===!0&&(Jo(ke,Cy),Jo(rt,xy),Jo(rt,_h)),Lr.svgFilters===!0&&(Jo(ke,lx),Jo(rt,xy),Jo(rt,_h)),Lr.mathMl===!0&&(Jo(ke,cx),Jo(rt,WA),Jo(rt,_h))),he.ADD_TAGS&&(ke===_e&&(ke=Sf(ke)),Jo(ke,he.ADD_TAGS)),he.ADD_ATTR&&(rt===ro&&(rt=Sf(rt)),Jo(rt,he.ADD_ATTR)),he.ADD_URI_SAFE_ATTR&&Jo(hc,he.ADD_URI_SAFE_ATTR),he.FORBID_CONTENTS&&(Ba===la&&(Ba=Sf(Ba)),Jo(Ba,he.FORBID_CONTENTS)),St&&(ke["#text"]=!0),cm&&Jo(ke,["html","head","body"]),ke.table&&(Jo(ke,["tbody"]),delete Cr.tbody),Wi&&Wi(he),Z4=he)},XW=Jo({},["mi","mo","mn","ms","mtext"]),YW=Jo({},["foreignobject","desc","title","annotation-xml"]),Cj=Jo({},["title","style","font","a","script"]),OL=Jo({},Cy);Jo(OL,lx),Jo(OL,ZA);var UW=Jo({},cx);Jo(UW,IH);var xj=function(he){var jt=ne(he);(!jt||!jt.tagName)&&(jt={namespaceURI:Dv,tagName:"template"});var Mt=Hd(he.tagName),Hr=Hd(jt.tagName);return he.namespaceURI===VW?jt.namespaceURI===Dv?Mt==="svg":jt.namespaceURI===z5?Mt==="svg"&&(Hr==="annotation-xml"||XW[Hr]):!!OL[Mt]:he.namespaceURI===z5?jt.namespaceURI===Dv?Mt==="math":jt.namespaceURI===VW?Mt==="math"&&YW[Hr]:!!UW[Mt]:he.namespaceURI===Dv?jt.namespaceURI===VW&&!YW[Hr]||jt.namespaceURI===z5&&!XW[Hr]?!1:!UW[Mt]&&(Cj[Mt]||!OL[Mt]):!1},U4=function(he){yy(r.removed,{element:he});try{he.parentNode.removeChild(he)}catch{try{he.outerHTML=Pe}catch{he.remove()}}},TL=function(he,jt){try{yy(r.removed,{attribute:jt.getAttributeNode(he),from:jt})}catch{yy(r.removed,{attribute:null,from:jt})}if(jt.removeAttribute(he),he==="is"&&!rt[he])if(Jf||V4)try{U4(jt)}catch{}else try{jt.setAttribute(he,"")}catch{}},QW=function(he){var jt,Mt;if(F4)he="<remove></remove>"+he;else{var Hr=BH(he,/^[\r\n\t ]+/);Mt=Hr&&Hr[0]}z4==="application/xhtml+xml"&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");var Ca=pe?pe.createHTML(he):he;if(EL===Dv)try{jt=new R().parseFromString(Ca,z4)}catch{}if(!jt||!jt.documentElement){jt=st.createDocument(EL,"template",null);try{jt.documentElement.innerHTML=zW?"":Ca}catch{}}var qd=jt.body||jt.documentElement;return he&&Mt&&qd.insertBefore(l.createTextNode(Mt),qd.childNodes[0]||null),EL===Dv?je.call(jt,cm?"html":"body")[0]:cm?jt.documentElement:qd},JW=function(he){return pt.call(he.ownerDocument||he,he,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT,null,!1)},Sj=function(he){return he instanceof D&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof T)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function")},Z5=function(he){return Cf(f)==="object"?he instanceof f:he&&Cf(he)==="object"&&typeof he.nodeType=="number"&&typeof he.nodeName=="string"},e1=function(he,jt,Mt){yo[he]&&xf(yo[he],function(Hr){Hr.call(r,jt,Mt,Z4)})},ej=function(he){var jt;if(e1("beforeSanitizeElements",he,null),Sj(he)||gi(/[\u0080-\uFFFF]/,he.nodeName))return U4(he),!0;var Mt=_2(he.nodeName);if(e1("uponSanitizeElement",he,{tagName:Mt,allowedTags:ke}),he.hasChildNodes()&&!Z5(he.firstElementChild)&&(!Z5(he.content)||!Z5(he.content.firstElementChild))&&gi(/<[/\w]/g,he.innerHTML)&&gi(/<[/\w]/g,he.textContent)||Mt==="select"&&gi(/<template/i,he.innerHTML))return U4(he),!0;if(!ke[Mt]||Cr[Mt]){if(!Cr[Mt]&&oj(Mt)&&(eo.tagNameCheck instanceof RegExp&&gi(eo.tagNameCheck,Mt)||eo.tagNameCheck instanceof Function&&eo.tagNameCheck(Mt)))return!1;if(St&&!Ba[Mt]){var Hr=ne(he)||he.parentNode,Ca=Y(he)||he.childNodes;if(Ca&&Hr)for(var qd=Ca.length,ei=qd-1;ei>=0;--ei)Hr.insertBefore(le(Ca[ei],!0),Oe(he))}return U4(he),!0}return he instanceof y&&!xj(he)||(Mt==="noscript"||Mt==="noembed")&&gi(/<\/no(script|embed)/i,he.innerHTML)?(U4(he),!0):(Ci&&he.nodeType===3&&(jt=he.textContent,jt=kh(jt,kn," "),jt=kh(jt,Ze," "),he.textContent!==jt&&(yy(r.removed,{element:he.cloneNode()}),he.textContent=jt)),e1("afterSanitizeElements",he,null),!1)},tj=function(he,jt,Mt){if(zt&&(jt==="id"||jt==="name")&&(Mt in l||Mt in wj))return!1;if(!(lm&&!jn[jt]&&gi(mt,jt))&&!(im&&gi(at,jt))){if(!rt[jt]||jn[jt]){if(!(oj(he)&&(eo.tagNameCheck instanceof RegExp&&gi(eo.tagNameCheck,he)||eo.tagNameCheck instanceof Function&&eo.tagNameCheck(he))&&(eo.attributeNameCheck instanceof RegExp&&gi(eo.attributeNameCheck,jt)||eo.attributeNameCheck instanceof Function&&eo.attributeNameCheck(jt))||jt==="is"&&eo.allowCustomizedBuiltInElements&&(eo.tagNameCheck instanceof RegExp&&gi(eo.tagNameCheck,Mt)||eo.tagNameCheck instanceof Function&&eo.tagNameCheck(Mt))))return!1}else if(!hc[jt]&&!gi(se,kh(Mt,oe,""))&&!((jt==="src"||jt==="xlink:href"||jt==="href")&&he!=="script"&&rc(Mt,"data:")===0&&Av[he])&&!(Jh&&!gi(Bt,kh(Mt,oe,"")))&&Mt)return!1}return!0},oj=function(he){return he.indexOf("-")>0},nj=function(he){var jt,Mt,Hr,Ca;e1("beforeSanitizeAttributes",he,null);var qd=he.attributes;if(qd){var ei={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:rt};for(Ca=qd.length;Ca--;){jt=qd[Ca];var U5=jt,ep=U5.name,wg=U5.namespaceURI;Mt=ep==="value"?jt.value:zA(jt.value),Hr=_2(ep);var _j=Mt;if(ei.attrName=Hr,ei.attrValue=Mt,ei.keepAttr=!0,ei.forceKeepAttr=void 0,e1("uponSanitizeAttribute",he,ei),Mt=ei.attrValue,!ei.forceKeepAttr){if(!ei.keepAttr){TL(ep,he);continue}if(gi(/\/>/i,Mt)){TL(ep,he);continue}Ci&&(Mt=kh(Mt,kn," "),Mt=kh(Mt,Ze," "));var Ej=_2(he.nodeName);if(!tj(Ej,Hr,Mt)){TL(ep,he);continue}if(Mt!==_j)try{wg?he.setAttributeNS(wg,ep,Mt):he.setAttribute(ep,Mt)}catch{TL(ep,he)}}}e1("afterSanitizeAttributes",he,null)}},kj=function he(jt){var Mt,Hr=JW(jt);for(e1("beforeSanitizeShadowDOM",jt,null);Mt=Hr.nextNode();)e1("uponSanitizeShadowNode",Mt,null),!ej(Mt)&&(Mt.content instanceof u&&he(Mt.content),nj(Mt));e1("afterSanitizeShadowDOM",jt,null)};return r.sanitize=function(he,jt){var Mt,Hr,Ca,qd,ei;if(zW=!he,zW&&(he="<!-->"),typeof he!="string"&&!Z5(he)){if(typeof he.toString!="function")throw ax("toString is not a function");if(he=he.toString(),typeof he!="string")throw ax("dirty is not a string, aborting")}if(!r.isSupported){if(Cf(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof he=="string")return t.toStaticHTML(he);if(Z5(he))return t.toStaticHTML(he.outerHTML)}return he}if(I4||ZW(jt),r.removed=[],typeof he=="string"&&(Dn=!1),Dn){if(he.nodeName){var U5=_2(he.nodeName);if(!ke[U5]||Cr[U5])throw ax("root node is forbidden and cannot be sanitized in-place")}}else if(he instanceof f)Mt=QW("<!---->"),Hr=Mt.ownerDocument.importNode(he,!0),Hr.nodeType===1&&Hr.nodeName==="BODY"||Hr.nodeName==="HTML"?Mt=Hr:Mt.appendChild(Hr);else{if(!Jf&&!Ci&&!cm&&he.indexOf("<")===-1)return pe&&me?pe.createHTML(he):he;if(Mt=QW(he),!Mt)return Jf?null:me?Pe:""}Mt&&F4&&U4(Mt.firstChild);for(var ep=JW(Dn?he:Mt);Ca=ep.nextNode();)Ca.nodeType===3&&Ca===qd||ej(Ca)||(Ca.content instanceof u&&kj(Ca.content),nj(Ca),qd=Ca);if(qd=null,Dn)return he;if(Jf){if(V4)for(ei=io.call(Mt.ownerDocument);Mt.firstChild;)ei.appendChild(Mt.firstChild);else ei=Mt;return rt.shadowroot&&(ei=qe.call(a,ei,!0)),ei}var wg=cm?Mt.outerHTML:Mt.innerHTML;return cm&&ke["!doctype"]&&Mt.ownerDocument&&Mt.ownerDocument.doctype&&Mt.ownerDocument.doctype.name&&gi(r_,Mt.ownerDocument.doctype.name)&&(wg="<!DOCTYPE "+Mt.ownerDocument.doctype.name+`>
`+wg),Ci&&(wg=kh(wg,kn," "),wg=kh(wg,Ze," ")),pe&&me?pe.createHTML(wg):wg},r.setConfig=function(he){ZW(he),I4=!0},r.clearConfig=function(){Z4=null,I4=!1},r.isValidAttribute=function(he,jt,Mt){Z4||ZW({});var Hr=_2(he),Ca=_2(jt);return tj(Hr,Ca,Mt)},r.addHook=function(he,jt){typeof jt=="function"&&(yo[he]=yo[he]||[],yy(yo[he],jt))},r.removeHook=function(he){if(yo[he])return VA(yo[he])},r.removeHooks=function(he){yo[he]&&(yo[he]=[])},r.removeAllHooks=function(){yo={}},r}var UH=mx();const s_=t=>UH().sanitize(t);var xl=tinymce.util.Tools.resolve("tinymce.util.I18n");const WH={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},qA="temporary-placeholder",gx=t=>()=>nt(t,qA).getOr("!not found!"),a_=(t,r)=>{const a=t.toLowerCase();if(xl.isRtl()){const l=Cs(a,"-rtl");return wo(r,l)?l:a}else return a},XA=(t,r)=>nt(r,a_(t,r)),hx=(t,r)=>{const a=r();return XA(t,a).getOrThunk(gx(a))},YA=(t,r,a)=>{const l=r();return XA(t,l).or(a).getOrThunk(gx(l))},QA=t=>xl.isRtl()?wo(WH,t):!1,i_=()=>qt("add-focusable",[yn(t=>{H1(t.element,"svg").each(r=>Z(r,"focusable","false"))})]),px=(t,r,a,l)=>{var u,g;const f=QA(r)?["tox-icon--flip"]:[],y=nt(a,a_(r,a)).or(l).getOrThunk(gx(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(f),innerHtml:y},behaviours:ze([...(g=t.behaviours)!==null&&g!==void 0?g:[],i_()])}},Gc=(t,r,a,l=E.none())=>px(r,t,a(),l),jH=(t,r,a)=>{const l=a(),u=Ut(t,g=>wo(l,a_(g,l)));return px(r,u.getOr(qA),l,E.none())},$H={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},l_=ui({name:"Notification",factory:t=>{const r=Eo({dom:Ld(`<p>${s_(t.translationProvider(t.text))}</p>`),behaviours:ze([Wt.config({})])}),a=D=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${D}%`}}}),l=D=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${D}%`}}),u=Eo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:ze([Wt.config({})])}),g={updateProgress:(D,R)=>{D.getSystem().isConnected()&&u.getOpt(D).each(V=>{Wt.set(V,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(R)]},l(R)])})},updateText:(D,R)=>{if(D.getSystem().isConnected()){const V=r.get(D);Wt.set(V,[Un(R)])}}},f=$t([t.icon.toArray(),t.level.toArray(),t.level.bind(D=>E.from($H[D])).toArray()]),y=Eo(js.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Gc("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:D=>{t.onAction(D)}})),C=jH(f,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),_={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:ze([Wt.config({})])},T=[C,_];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(D=>["tox-notification","tox-notification--in",`tox-notification--${D}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:ze([Pt.config({}),qt("notification-events",[Te(Dc(),D=>{y.getOpt(D).each(Pt.focus)})])]),components:T.concat(t.progress?[u.asSpec()]:[]).concat(t.closeButton?[y.asSpec()]:[]),apis:g}},configFields:[_o("level"),Re("progress"),_o("icon"),Re("onAction"),Re("text"),Re("iconProvider"),Re("translationProvider"),Zr("closeButton",!0)],apis:{updateProgress:(t,r,a)=>{t.updateProgress(r,a)},updateText:(t,r,a)=>{t.updateText(r,a)}}});var GH=(t,r,a)=>{const l=r.backstage.shared,u=()=>{const g=Rn(Xe.fromDom(t.getContentAreaContainer())),f=Is(),y=Aa(f.x,g.x,g.right),C=Aa(f.y,g.y,g.bottom),_=Math.max(g.right,f.right),T=Math.max(g.bottom,f.bottom);return E.some(ir(y,C,_-y,T-C))};return{open:(g,f)=>{const y=()=>{f(),An.hide(_)},C=Mr(l_.sketch({text:g.text,level:zo(["success","error","warning","warn","info"],g.type)?g.type:void 0,progress:g.progressBar===!0,icon:g.icon,closeButton:g.closeButton,onAction:y,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),_=Mr(An.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(_),Ns(g.timeout)&&g.timeout>0&&ox.setEditorTimeout(t,()=>{y()},g.timeout);const T={close:y,reposition:()=>{const D=Ts(C),R={maxHeightFunction:Yg()},V=t.notificationManager.getNotifications();if(V[0]===T){const Q={...l.anchors.banner(),overrides:R};An.showWithinBounds(_,D,{anchor:Q},u)}else Me(V,T).each(Q=>{const le=V[Q-1].getEl(),Oe={type:"node",root:Br(),node:E.some(Xe.fromDom(le)),overrides:R,layouts:{onRtl:()=>[Wr],onLtr:()=>[Wr]}};An.showWithinBounds(_,D,{anchor:Oe},u)})},text:D=>{l_.updateText(C,D)},settings:g,getEl:()=>C.element.dom,progressBar:{value:D=>{l_.updateProgress(C,D)}}};return T},close:g=>{g.close()},getArgs:g=>g.settings}},I0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c_=tinymce.util.Tools.resolve("tinymce.EditorManager"),F0=tinymce.util.Tools.resolve("tinymce.Env"),hi;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(hi||(hi={}));var Sy;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Sy||(Sy={}));const rn=t=>r=>r.options.get(t),ky=t=>r=>E.from(t(r)),JA=t=>{const r=F0.deviceType.isPhone(),a=F0.deviceType.isTablet()||r,l=t.options.register,u=f=>Kt(f)||f===!1,g=f=>Kt(f)||Ns(f);l("skin",{processor:f=>Kt(f)||f===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:I0.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:f=>Kt(f)||is(f),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:f=>is(f)||Kt(f)||Xt(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ko(9,f=>{l("toolbar"+(f+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Sy.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:f=>f==="both"||is(f),default:!F0.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")})},eD=rn("readonly"),d_=rn("height"),fx=rn("width"),u_=ky(rn("min_width")),m_=ky(rn("min_height")),V0=ky(rn("max_width")),gg=ky(rn("max_height")),tD=ky(rn("style_formats")),oD=rn("style_formats_merge"),vx=rn("style_formats_autohide"),nD=rn("content_langs"),g_=rn("removed_menuitems"),z0=rn("toolbar_mode"),h_=rn("toolbar_groups"),bx=rn("toolbar_location"),p_=rn("fixed_toolbar_container"),KH=rn("fixed_toolbar_container_target"),f_=rn("toolbar_persist"),rD=rn("toolbar_sticky_offset"),Z0=rn("menubar"),yx=rn("toolbar"),sD=rn("file_picker_callback"),wx=rn("file_picker_validator_handler"),Cx=rn("font_size_input_default_unit"),aD=rn("file_picker_types"),v_=rn("typeahead_urls"),iD=rn("anchor_top"),lD=rn("anchor_bottom"),xx=rn("draggable_modal"),cD=rn("statusbar"),dD=rn("elementpath"),b_=rn("branding"),uD=rn("resize"),mD=rn("paste_as_text"),gD=rn("sidebar_show"),hD=rn("promotion"),pD=rn("help_accessibility"),y_=t=>t.options.get("skin")===!1,Sx=t=>t.options.get("menubar")!==!1,fD=t=>{const r=t.options.get("skin_url");if(y_(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const a=t.options.get("skin");return c_.baseURL+"/skins/ui/"+a}},vD=t=>t.options.get("line_height_formats").split(" "),U0=t=>{const r=yx(t),a=Kt(r),l=Xt(r)&&r.length>0;return!_y(t)&&(l||a||r===!0)},w_=t=>{const r=Ko(9,l=>t.options.get("toolbar"+(l+1))),a=qo(r,Kt);return It(a.length>0,a)},_y=t=>w_(t).fold(()=>{const r=yx(t);return Cn(r,Kt)&&r.length>0},De),C_=t=>bx(t)===Sy.bottom,x_=t=>{var r;if(!t.inline)return E.none();const a=(r=p_(t))!==null&&r!==void 0?r:"";if(a.length>0)return dr(Br(),a);const l=KH(t);return hn(l)?E.some(Xe.fromDom(l)):E.none()},W0=t=>t.inline&&x_(t).isSome(),S_=t=>x_(t).getOrThunk(()=>fn(Jr(Xe.fromDom(t.getElement())))),k_=t=>t.inline&&!Sx(t)&&!U0(t)&&!_y(t),Ey=t=>(t.options.get("toolbar_sticky")||t.inline)&&!W0(t)&&!k_(t),Eh=t=>!W0(t)&&t.options.get("ui_mode")==="split",bD=t=>{const r=t.options.get("menu");return an(r,a=>({...a,items:a.items}))};var __=Object.freeze({__proto__:null,get ToolbarMode(){return hi},get ToolbarLocation(){return Sy},register:JA,getSkinUrl:fD,isReadOnly:eD,isSkinDisabled:y_,getHeightOption:d_,getWidthOption:fx,getMinWidthOption:u_,getMinHeightOption:m_,getMaxWidthOption:V0,getMaxHeightOption:gg,getUserStyleFormats:tD,shouldMergeStyleFormats:oD,shouldAutoHideStyleFormats:vx,getLineHeightFormats:vD,getContentLanguages:nD,getRemovedMenuItems:g_,isMenubarEnabled:Sx,isMultipleToolbars:_y,isToolbarEnabled:U0,isToolbarPersist:f_,getMultipleToolbarsOption:w_,getUiContainer:S_,useFixedContainer:W0,isSplitUiMode:Eh,getToolbarMode:z0,isDraggableModal:xx,isDistractionFree:k_,isStickyToolbar:Ey,getStickyToolbarOffset:rD,getToolbarLocation:bx,isToolbarLocationBottom:C_,getToolbarGroups:h_,getMenus:bD,getMenubar:Z0,getToolbar:yx,getFilePickerCallback:sD,getFilePickerTypes:aD,useTypeaheadUrls:v_,getAnchorTop:iD,getAnchorBottom:lD,getFilePickerValidatorHandler:wx,getFontSizeInputDefaultUnit:Cx,useStatusBar:cD,useElementPath:dD,promotionEnabled:hD,useBranding:b_,getResize:uD,getPasteAsText:mD,getSidebarShow:gD,useHelpAccessibility:pD});const yD="[data-mce-autocompleter]",wD=t=>Yl(t,yD),qH=t=>dr(t,yD),XH={setup:(t,r)=>{const a=(u,g)=>{wt(u,$l(),{raw:g})},l=()=>t.getMenu().bind(xo.getHighlighted);r.on("keydown",u=>{const g=u.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Nc),u.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(xo.highlightFirst)},f=>{a(f,u)}),u.preventDefault(),u.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(f=>{a(f,u),u.preventDefault(),u.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),r.on("NodeChange",u=>{t.isActive()&&!t.isProcessingAction()&&wD(Xe.fromDom(u.element)).isNone()&&t.cancelIfNecessary()})}};var E_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(E_||(E_={}));var Bd=E_;const O_="tox-menu-nav__js",kx="tox-collection__item",T_="tox-swatch",YH={normal:O_,color:T_},CD="tox-collection__item--enabled",QH="tox-collection__group-heading",Oy="tox-collection__item-icon",A_="tox-collection__item-label",D_="tox-collection__item-accessory",xD="tox-collection__item-caret",JH="tox-collection__item-checkmark",Ty="tox-collection__item--active",SD="tox-collection__item-container",eP="tox-collection__item-container--column",M_="tox-collection__item-container--row",tP="tox-collection__item-container--align-right",N_="tox-collection__item-container--align-left",R_="tox-collection__item-container--valign-top",kD="tox-collection__item-container--valign-middle",L_="tox-collection__item-container--valign-bottom",Ay=t=>nt(YH,t).getOr(O_),_D=t=>t==="color"?"tox-swatches":"tox-menu",Kc=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:_D(t),tieredMenu:"tox-tiered-menu"}),hg=t=>{const r=Kc(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:Ay(t)}},oP=(t,r,a)=>{const l=Kc(a);return{tag:"div",classes:$t([[l.menu,`tox-menu-${r}-column`],t?[l.hasIcons]:[]])}},nP=[yf.parts.items({})],_x=(t,r,a)=>{const l=Kc(a);return{dom:{tag:"div",classes:$t([[l.tieredMenu]])},markers:hg(a)}},ED=re([_o("data"),ge("inputAttributes",{}),ge("inputStyles",{}),ge("tag","input"),ge("inputClasses",[]),mo("onSetValue"),ge("styles",{}),ge("eventOrder",{}),Nr("inputBehaviours",[Je,Pt]),ge("selectOnFocus",!0)]),kf=t=>ze([Pt.config({onFocus:t.selectOnFocus?r=>{const a=r.element,l=Ii(a);a.dom.setSelectionRange(0,l.length)}:G})]),rP=t=>({...kf(t),...Jn(t.inputBehaviours,[Je.config({store:{mode:"manual",...t.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>Ii(r.element),setValue:(r,a)=>{Ii(r.element)!==a&&Xl(r.element,a)}},onSetValue:t.onSetValue})])}),OD=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),TD=(t,r)=>({uid:t.uid,dom:OD(t),components:[],behaviours:rP(t),eventOrder:t.eventOrder}),Oh=ui({name:"Input",configFields:ED(),factory:TD}),Ex=Qe("refetch-trigger-event"),AD=Qe("redirect-menu-item-interaction"),Ox="tox-menu__searcher",j0=t=>dr(t.element,`.${Ox}`).bind(r=>t.getSystem().getByDom(r).toOptional()),DD=j0,MD=(t,r)=>{Je.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},H_=t=>{const r=Je.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:a,selectionEnd:l}},sP=(t,r)=>{_t(r.element,"id").each(a=>Z(t.element,"aria-activedescendant",a))},aP=t=>{const r=(u,g)=>(g.cut(),E.none()),a=(u,g)=>{const f={interactionEvent:g.event,eventType:g.event.raw.type};return wt(u,AD,f),E.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[kx]},components:[Oh.sketch({inputClasses:[Ox,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:ze([qt(l,[Te(ta(),u=>{vo(u,Ex)}),Te($l(),(u,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Ct.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Ct.name()]}})]}},Tx="tox-collection--results__js",ND=t=>{var r;return t.dom?{...t,dom:{...t.dom,attributes:{...(r=t.dom.attributes)!==null&&r!==void 0?r:{},id:Qe("aria-item-search-result-id"),"aria-selected":"false"}}}:t},P_=(t,r)=>a=>{const l=xr(a,r);return Ne(l,u=>({dom:t,components:u}))},iP=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[yf.parts.items({preprocess:t!=="auto"?P_({tag:"div",classes:["tox-swatches__row"]},t):ao})]}]}),RD=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[yf.parts.items({preprocess:P_({tag:"div",classes:["tox-collection__group"]},t)})]}),B_=(t,r)=>{const a=[];let l=[];return ct(t,(u,g)=>{r(u,g)?(l.length>0&&a.push(l),l=[],(wo(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)}),l.length>0&&a.push(l),Ne(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},I_=(t,r,a)=>yf.parts.items({preprocess:l=>{const u=Ne(l,a);return t!=="auto"&&t>1?P_({tag:"div",classes:["tox-collection__group"]},t)(u):B_(u,(g,f)=>r[f].type==="separator")}}),F_=(t,r,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[I_(t,r,ao)]}),LD=(t,r,a=!0)=>{const l=Qe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Tx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[I_(t,r,ND)]}},Dy=(t,r,a)=>{const l=Qe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[aP({i18n:xl.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Tx],attributes:{id:l}},components:[I_(t,r,ND)]}]}},HD=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[yf.parts.items({preprocess:a=>B_(a,(l,u)=>t[u].type==="separator")})]}),Ax=t=>ls(t,r=>"icon"in r&&r.icon!==void 0),pg=t=>(console.error(gd(t)),console.log(t),E.none()),PD=(t,r,a,l,u)=>{const g=HD(a);return{value:t,dom:g.dom,components:g.components,items:a}},V_=(t,r,a,l,u)=>{const g=()=>u.menuType!=="searchable"?F_(l,a):u.searchMode.searchMode==="search-with-field"?Dy(l,a,u.searchMode):LD(l,a);if(u.menuType==="color"){const f=iP(l);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"&&l==="auto"){const f=F_(l,a);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const f=g();return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="listpreview"&&l!=="auto"){const f=RD(l);return{value:t,dom:f.dom,components:f.components,items:a}}else return{value:t,dom:oP(r,l,u.menuType),components:nP,items:a}},wr=lr("type"),Dx=lr("name"),Mx=lr("label"),Gu=lr("text"),z_=lr("title"),BD=lr("icon"),My=lr("value"),ID=vn("fetch"),Z_=vn("getSubmenuItems"),Th=vn("onAction"),FD=vn("onItemAction"),Ah=zn("onSetup",()=>G),VD=Fs("name"),Dh=Fs("text"),ji=Fs("icon"),Nx=Fs("tooltip"),Rx=Fs("label"),zD=Fs("shortcut"),$0=Rm("select"),Lx=Zr("active",!1),U_=Zr("borderless",!1),$i=Zr("enabled",!0),Hx=Zr("primary",!1),W_=t=>ge("columns",t),Px=ge("meta",{}),Bx=zn("onAction",G),fg=t=>es("type",t),Ix=t=>On("name","name",Fn(()=>Qe(`${t}-name`)),Sn),lP=t=>On("value","value",Fn(()=>Qe(`${t}-value`)),ma()),j_=At([wr,Dh]),ZD=t=>Vn("separatormenuitem",j_,t),UD=At([fg("autocompleteitem"),Lx,$i,Px,My,Dh,ji]),WD=t=>Vn("Autocompleter.Separator",j_,t),cP=t=>Vn("Autocompleter.Item",UD,t),G0=[$i,Nx,ji,Dh,Ah],dP=At([wr,Th].concat(G0)),jD=t=>Vn("toolbarbutton",dP,t),$_=[Lx].concat(G0),uP=At($_.concat([wr,Th])),G_=t=>Vn("ToggleButton",uP,t),K0=[zn("predicate",Ue),jl("scope","node",["node","editor"]),jl("position","selection",["node","selection","line"])],$D=G0.concat([fg("contextformbutton"),Hx,Th,po("original",ao)]),mP=$_.concat([fg("contextformbutton"),Hx,Th,po("original",ao)]),gP=G0.concat([fg("contextformbutton")]),hP=$_.concat([fg("contextformtogglebutton")]),pP=fo("type",{contextformbutton:$D,contextformtogglebutton:mP}),fP=At([fg("contextform"),zn("initValue",re("")),Rx,ga("commands",pP),Tc("launch",fo("type",{contextformbutton:gP,contextformtogglebutton:hP}))].concat(K0)),Fx=t=>Vn("ContextForm",fP,t),vP=At([fg("contexttoolbar"),lr("items")].concat(K0)),GD=t=>Vn("ContextToolbar",vP,t),bP=[wr,lr("src"),Fs("alt"),pd("classes",[],Sn)],KD=At(bP),qD=[wr,Gu,VD,pd("classes",["tox-collection__item-label"],Sn)],yP=At(qD),K_=Iv(()=>Wa("type",{cardimage:KD,cardtext:yP,cardcontainer:XD})),XD=At([wr,es("direction","horizontal"),es("align","left"),es("valign","middle"),ga("items",K_)]),_f=[$i,Dh,zD,lP("menuitem"),Px],YD=At([wr,Rx,ga("items",K_),Ah,Bx].concat(_f)),wP=t=>Vn("cardmenuitem",YD,t),CP=At([wr,Lx,ji].concat(_f)),xP=t=>Vn("choicemenuitem",CP,t),QD=[wr,lr("fancytype"),Bx],JD=[ge("initData",{})].concat(QD),eM=[Rm("select"),Hm("initData",{},[Zr("allowCustomColors",!0),es("storageKey","default"),L2("colors",ma())])].concat(QD),SP=fo("fancytype",{inserttable:JD,colorswatch:eM}),kP=t=>Vn("fancymenuitem",SP,t),_P=At([wr,Ah,Bx,ji].concat(_f)),EP=t=>Vn("menuitem",_P,t),OP=At([wr,Z_,Ah,ji].concat(_f)),tM=t=>Vn("nestedmenuitem",OP,t),TP=At([wr,ji,Lx,Ah,Th].concat(_f)),AP=t=>Vn("togglemenuitem",TP,t),Ny=(t,r,a)=>{const l=Ms(t.element,"."+a);if(l.length>0){const u=Wo(l,g=>{const f=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(f-y)>r}).getOr(l.length);return E.some({numColumns:u,numRows:Math.ceil(l.length/u)})}else return E.none()},q_=(t,r)=>ze([qt(t,r)]),Ry={namedEvents:q_,unnamedEvents:t=>q_(Qe("unnamed-events"),t)},oM=Qe("tooltip.exclusive"),q0=Qe("tooltip.show"),Ly=Qe("tooltip.hide"),nM=(t,r,a)=>{t.getSystem().broadcastOn([oM],{})};var rM=Object.freeze({__proto__:null,hideAllExclusive:nM,setComponents:(t,r,a,l)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&Wt.set(u,l)})}}),sM=Object.freeze({__proto__:null,events:(t,r)=>{const a=u=>{r.getTooltip().each(g=>{Qn(g),t.onHide(u,g),r.clearTooltip()}),r.clearTimer()},l=u=>{if(!r.isShowing()){nM(u);const g=t.lazySink(u).getOrDie(),f=u.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:on(t.mode==="normal"?[Te(ja(),y=>{vo(u,q0)}),Te($v(),y=>{vo(u,Ly)})]:[]),behaviours:ze([Wt.config({})])});r.setTooltip(f),yr(g,f),t.onShow(u,f),zs.position(g,f,{anchor:t.anchor(u)})}};return on($t([[Te(q0,u=>{r.resetTimer(()=>{l(u)},t.delay)}),Te(Ly,u=>{r.resetTimer(()=>{a(u)},t.delay)}),Te(Cu(),(u,g)=>{const f=g;f.universal||zo(f.channels,oM)&&a(u)}),Ga(u=>{a(u)})],t.mode==="normal"?[Te(Dc(),u=>{vo(u,q0)}),Te(Fm(),u=>{vo(u,Ly)}),Te(ja(),u=>{vo(u,q0)}),Te($v(),u=>{vo(u,Ly)})]:[Te(Z2(),(u,g)=>{vo(u,q0)}),Te(w1(),u=>{vo(u,Ly)})]]))}}),aM=[Re("lazySink"),Re("tooltipDom"),ge("exclusive",!0),ge("tooltipComponents",[]),ge("delay",300),jl("mode","normal",["normal","follow-highlight"]),ge("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:re([Wr,Ds,As,ha,gs,Da]),onRtl:re([Wr,Ds,As,ha,gs,Da])}})),mo("onHide"),mo("onShow")],DP=Object.freeze({__proto__:null,init:()=>{const t=gn(),r=gn(),a=()=>{t.on(clearTimeout)},l=(g,f)=>{a(),t.set(setTimeout(g,f))},u=re("not-implemented");return Ka({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:a,resetTimer:l,readState:u})}});const iM=os({fields:aM,name:"tooltipping",active:sM,state:DP,apis:rM}),MP=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),lM="silver.readonly",NP=At([Rg("readonly")]),Ku=(t,r)=>{const a=t.mainUi.outerContainer.element,l=[t.mainUi.mothership,...t.uiMotherships];r&&ct(l,u=>{u.broadcastOn([yl()],{target:a})}),ct(l,u=>{u.broadcastOn([lM],{readonly:r})})},Vx=(t,r)=>{t.on("init",()=>{t.mode.isReadOnly()&&Ku(r,!0)}),t.on("SwitchMode",()=>Ku(r,t.mode.isReadOnly())),eD(t)&&t.mode.set("readonly")},ss=()=>Ma.config({channels:{[lM]:{schema:NP,onReceive:(t,r)=>{Tt.set(t,r.readonly)}}}}),Gi={item:t=>Tt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Tt.config({disabled:t}),splitButton:t=>Tt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Tt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Sl=(t,r)=>{const a=t.getApi(r);return l=>{l(a)}},Mh=(t,r)=>yn(a=>{Sl(t,a)(l=>{const u=t.onSetup(l);vt(u)&&r.set(u)})}),Nh=(t,r)=>Ga(a=>Sl(t,a)(r.get())),RP=(t,r)=>ql((a,l)=>{Sl(t,a)(t.onAction),!t.triggersSubmenu&&r===Bd.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&vo(a,xu()),l.stop())}),X_={[$a()]:["disabling","alloy.base.behaviour","toggling","item-events"]},X0=tl,Y0=(t,r,a,l)=>{const u=Lt(G);return{type:"item",dom:r.dom,components:X0(r.optComponents),data:t.data,eventOrder:X_,hasSubmenu:t.triggersSubmenu,itemBehaviours:ze([qt("item-events",[RP(t,a),Mh(t,u),Nh(t,u)]),Gi.item(()=>!t.enabled||l.isDisabled()),ss(),Wt.config({})].concat(t.itemBehaviours))}},Ef=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),cM=t=>{const r=F0.os.isMacOS()||F0.os.isiOS(),a=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},l=t.split("+"),u=Ne(l,g=>{const f=g.toLowerCase().trim();return wo(a,f)?a[f]:g});return r?u.join(""):u.join("+")},Y_=(t,r,a=[Oy])=>Gc(t,{tag:"div",classes:a},r),dM=t=>({dom:{tag:"div",classes:[A_]},components:[Un(xl.translate(t))]}),pi=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),qu=(t,r)=>({dom:{tag:"div",classes:[A_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Un(xl.translate(r))]}]}),LP=t=>({dom:{tag:"div",classes:[D_]},components:[Un(cM(t))]}),Q_=t=>Y_("checkmark",t,[JH]),zx=t=>Y_("chevron-right",t,[xD]),J_=t=>Y_("chevron-down",t,[xD]),HP=(t,r)=>{const a=t.direction==="vertical"?eP:M_,l=t.align==="left"?N_:tP;return{dom:{tag:"div",classes:[SD,a,l,(()=>{switch(t.valign){case"top":return R_;case"middle":return kD;case"bottom":return L_}})()]},components:r}},PP=(t,r,a)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:a.getOr("")}}}),Hy=(t,r,a)=>{const l="custom",u="remove",g=t.ariaLabel,f=t.value,y=t.iconContent.map(C=>YA(C,r.icons,a));return{dom:(()=>{const C=T_,_=y.getOr(""),T={tag:"div",attributes:g.map(D=>({title:r.translate(D)})).getOr({}),classes:[C]};return f===l?{...T,tag:"button",classes:[...T.classes,"tox-swatches__picker-btn"],innerHtml:_}:f===u?{...T,classes:[...T.classes,"tox-swatch--remove"],innerHtml:_}:hn(f)?{...T,attributes:{...T.attributes,"data-mce-color":f},styles:{"background-color":f},innerHtml:_}:T})(),optComponents:[]}},Py=t=>{const r=t.map(a=>({attributes:{title:xl.translate(a),id:Qe("menu-item")}})).getOr({});return{tag:"div",classes:[O_,kx],...r}},BP=(t,r,a,l)=>{const u={tag:"div",classes:[Oy]},g=D=>Gc(D,u,r.icons,l),f=()=>E.some({dom:u}),y=a?t.iconContent.map(g).orThunk(f):E.none(),C=t.checkMark,_=E.from(t.meta).fold(()=>dM,D=>wo(D,"style")?oo(qu,D.style):dM),T=t.htmlContent.fold(()=>t.textContent.map(_),D=>E.some(pi(D,[A_])));return{dom:Py(t.ariaLabel),optComponents:[y,T,t.shortcutContent.map(LP),C,t.caret]}},qc=(t,r,a,l=E.none())=>t.presets==="color"?Hy(t,r,l):BP(t,r,a,l),uM=(t,r)=>nt(t,"tooltipWorker").map(a=>[iM.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Yg}}),mode:"follow-highlight",onShow:(l,u)=>{a(g=>{iM.setComponents(l,[mw({element:Xe.fromDom(g)})])})}})]).getOr([]),IP=t=>I0.DOM.encode(t),fi=(t,r)=>{const a=xl.translate(t),l=IP(a);if(r.length>0){const u=new RegExp(MP(r),"gi");return l.replace(u,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},eE=(t,r,a,l,u,g,f,y=!0)=>{const C=qc({presets:l,textContent:E.none(),htmlContent:a?t.text.map(_=>fi(_,r)):E.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:E.none(),checkMark:E.none(),caret:E.none(),value:t.value},f.providers,y,t.icon);return Y0({data:Ef(t),enabled:t.enabled,getApi:re({}),onAction:_=>u(t.value,t.meta),onSetup:re(G),triggersSubmenu:!1,itemBehaviours:uM(t.meta,f)},C,g,f.providers)},Xc=(t,r)=>Ne(t,a=>{switch(a.type){case"cardcontainer":return HP(a,Xc(a.items,r));case"cardimage":return PP(a.src,a.classes,a.alt);case"cardtext":const l=a.name.exists(u=>zo(r.cardText.highlightOn,u))?E.from(r.cardText.matchText).getOr(""):"";return pi(fi(a.text,l),a.classes)}}),FP=(t,r,a,l)=>{const u=f=>({isEnabled:()=>!Tt.isDisabled(f),setEnabled:y=>{Tt.set(f,!y),ct(Ms(f.element,"*"),C=>{f.getSystem().getByDom(C).each(_=>{_.hasConfigured(Tt)&&Tt.set(_,!y)})})}}),g={dom:Py(t.label),optComponents:[E.some({dom:{tag:"div",classes:[SD,M_]},components:Xc(t.items,l)})]};return Y0({data:Ef({text:E.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:E.from(l.itemBehaviours).getOr([])},g,r,a.providers)},en=(t,r,a,l,u,g,f,y=!0)=>{const C=T=>({setActive:D=>{so.set(T,D)},isActive:()=>so.isOn(T),isEnabled:()=>!Tt.isDisabled(T),setEnabled:D=>Tt.set(T,!D)}),_=qc({presets:a,textContent:r?t.text:E.none(),htmlContent:E.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:E.none(),checkMark:r?E.some(Q_(f.icons)):E.none(),caret:E.none(),value:t.value},f,y);return ot(Y0({data:Ef(t),enabled:t.enabled,getApi:C,onAction:T=>l(t.value),onSetup:T=>(T.setActive(u),G),triggersSubmenu:!1,itemBehaviours:[]},_,g,f),{toggling:{toggleClass:CD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Rh=S0($3(),G3()),By=t=>({value:mM(t)}),tE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Zx=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ux=t=>tE.test(t)||Zx.test(t),mM=t=>dm(t,"#").toUpperCase(),oE=t=>Ux(t)?E.some({value:mM(t)}):E.none(),VP=t=>({value:t.value.replace(tE,(r,a,l,u)=>a+a+l+l+u+u)}),gM=t=>{const r=VP(t),a=Zx.exec(r.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Wx=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},Of=t=>{const r=Wx(t.red)+Wx(t.green)+Wx(t.blue);return By(r)},nE=Math.min,Iy=Math.max,jx=Math.round,zP=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ZP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Lh=(t,r,a,l)=>({red:t,green:r,blue:a,alpha:l}),rE=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},hM=t=>{let r,a,l;const u=(t.hue||0)%360;let g=t.saturation/100,f=t.value/100;if(g=Iy(0,nE(g,1)),f=Iy(0,nE(f,1)),g===0)return r=a=l=jx(255*f),Lh(r,a,l,1);const y=u/60,C=f*g,_=C*(1-Math.abs(y%2-1)),T=f-C;switch(Math.floor(y)){case 0:r=C,a=_,l=0;break;case 1:r=_,a=C,l=0;break;case 2:r=0,a=C,l=_;break;case 3:r=0,a=_,l=C;break;case 4:r=_,a=0,l=C;break;case 5:r=C,a=0,l=_;break;default:r=a=l=0}return r=jx(255*(r+T)),a=jx(255*(a+T)),l=jx(255*(l+T)),Lh(r,a,l,1)},Fy=t=>{const r=gM(t),a=parseInt(r[1],16),l=parseInt(r[2],16),u=parseInt(r[3],16);return Lh(a,l,u,1)},pM=(t,r,a,l)=>{const u=parseInt(t,10),g=parseInt(r,10),f=parseInt(a,10),y=parseFloat(l);return Lh(u,g,f,y)},sE=t=>{if(t==="transparent")return E.some(Lh(0,0,0,0));const r=zP.exec(t);if(r!==null)return E.some(pM(r[1],r[2],r[3],"1"));const a=ZP.exec(t);return a!==null?E.some(pM(a[1],a[2],a[3],a[4])):E.none()},fM=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,aE=Lh(255,0,0,1),UP=t=>{t.dispatch("SkinLoaded")},vM=(t,r)=>{t.dispatch("SkinLoadError",r)},WP=t=>{t.dispatch("ResizeEditor")},iE=(t,r)=>{t.dispatch("ResizeContent",r)},jP=(t,r)=>{t.dispatch("ScrollContent",r)},bM=(t,r)=>{t.dispatch("TextColorChange",r)},$P=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},GP=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),yM=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},sc=(t,r)=>()=>{t(),r()},Pa=t=>Hh(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),lE=(t,r)=>a=>{const l=Yn(),u=()=>{a.setActive(t.formatter.match(r));const g=t.formatter.formatChanged(r,a.setActive);l.set(g)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),l.clear()}},Vy=(t,r)=>a=>{const l=Pa(t)(a),u=lE(t,r)(a);return()=>{l(),u()}},Hh=(t,r,a)=>l=>{const u=()=>a(l),g=()=>{a(l),t.on(r,u)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(r,u)}},cE=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},vi=(t,r)=>()=>t.execCommand(r);var Ph=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const wM={},KP=(t,r=10)=>{const a=Ph.getItem(t),l=Kt(a)?JSON.parse(a):[],u=(y=>r-y.length<0?y.slice(0,r):y)(l),g=y=>{Me(u,y).each(f),u.unshift(y),u.length>r&&u.pop(),Ph.setItem(t,JSON.stringify(u))},f=y=>{u.splice(y,1)};return{add:g,state:()=>u.slice(0)}},CM=t=>nt(wM,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,a=Ph.getItem(r);if(Kr(a)){const u=Ph.getItem("tinymce-custom-colors");Ph.setItem(r,hn(u)?u:"[]")}const l=KP(r,10);return wM[t]=l,l}),qP=t=>Ne(CM(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),dE=(t,r)=>{CM(t).add(r)},Q0=(t,r,a)=>({hue:t,saturation:r,value:a}),$x=t=>{let r=0,a=0,l=0;const u=t.red/255,g=t.green/255,f=t.blue/255,y=Math.min(u,Math.min(g,f)),C=Math.max(u,Math.max(g,f));if(y===C)return l=y,Q0(0,0,l*100);const _=u===y?g-f:f===y?u-g:f-u;return r=u===y?3:f===y?1:5,r=60*(r-_/(C-y)),a=(C-y)/C,l=C,Q0(Math.round(r),Math.round(a*100),Math.round(l*100))},XP=t=>$x(Fy(t)),xM=t=>Of(hM(t)),YP=t=>oE(t).orThunk(()=>sE(t).map(Of)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,u=l[0],g=l[1],f=l[2],y=l[3];return Of(Lh(u,g,f,y))}),Bh="forecolor",uE="hilitecolor",SM=5,kM=t=>{const r=[];for(let a=0;a<t.length;a+=2)r.push({text:t[a+1],value:"#"+YP(t[a]).value,icon:"checkmark",type:"choiceitem"});return r},Id=t=>r=>r.options.get(t),zy="#000000",mE=t=>{const r=t.options.register,a=u=>Cn(u,Kt)?{value:kM(u),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=u=>Ns(u)&&u>0?{value:u,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_background",{processor:a}),r("color_map_foreground",{processor:a}),r("color_cols",{processor:l,default:Gx(t)}),r("color_cols_foreground",{processor:l,default:_M(t,Bh)}),r("color_cols_background",{processor:l,default:_M(t,uE)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:zy}),r("color_default_background",{processor:"string",default:zy})},Zy=(t,r)=>r===Bh&&t.options.isSet("color_map_foreground")?Id("color_map_foreground")(t):r===uE&&t.options.isSet("color_map_background")?Id("color_map_background")(t):Id("color_map")(t),Gx=(t,r="default")=>Math.max(SM,Math.ceil(Math.sqrt(Zy(t,r).length))),_M=(t,r)=>{const a=Id("color_cols")(t),l=Gx(t,r);return a===Gx(t)?l:a},gE=(t,r="default")=>Math.round((()=>r===Bh?Id("color_cols_foreground")(t):r===uE?Id("color_cols_background")(t):Id("color_cols")(t))()),EM=Id("custom_colors"),QP=Id("color_default_foreground"),JP=Id("color_default_background"),OM="rgba(0, 0, 0, 0)",TM=t=>sE(t).exists(r=>r.alpha!==0),AM=t=>Ac(t,r=>{if(nr(r)){const a=Ir(r,"background-color");return It(TM(a),a)}else return E.none()}).getOr(OM),DM=(t,r)=>{const a=Xe.fromDom(t.selection.getStart()),l=r==="hilitecolor"?AM(a):Ir(a,"color");return sE(l).map(u=>"#"+Of(u).value)},eB=(t,r,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:a}),t.nodeChanged()})},tB=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},oB=t=>{t.addCommand("mceApplyTextcolor",(r,a)=>{eB(t,r,a)}),t.addCommand("mceRemoveTextcolor",r=>{tB(t,r)})},MM=t=>{const r="choiceitem",a={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},hE=(t,r,a,l)=>{a==="custom"?PM(t)(u=>{u.each(g=>{dE(r,g),t.execCommand("mceApplyTextcolor",r,g),l(g)})},DM(t,r).getOr(zy)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",r)):(l(a),t.execCommand("mceApplyTextcolor",r,a))},NM=(t,r,a)=>t.concat(qP(r).concat(MM(a))),RM=(t,r,a)=>l=>{l(NM(t,r,a))},pE=(t,r,a)=>{const l=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},LM=(t,r)=>a=>{const l=DM(t,r);return Xr(l,a.toUpperCase())},HM=(t,r,a,l,u)=>{t.ui.registry.addSplitButton(r,{tooltip:l,presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:LM(t,a),columns:gE(t,a),fetch:RM(Zy(t,a),a,EM(t)),onAction:g=>{hE(t,a,u.get(),G)},onItemAction:(g,f)=>{hE(t,a,f,y=>{u.set(y),bM(t,{name:r,color:y})})},onSetup:g=>{pE(g,r,u.get());const f=y=>{y.name===r&&pE(g,y.name,y.color)};return t.on("TextColorChange",f),sc(Pa(t)(g),()=>{t.off("TextColorChange",f)})}})},fE=(t,r,a,l,u)=>{t.ui.registry.addNestedMenuItem(r,{text:l,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(pE(g,r,u.get()),Pa(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:LM(t,a),initData:{storageKey:a},onAction:g=>{hE(t,a,g.value,f=>{u.set(f),bM(t,{name:r,color:f})})}}]})},PM=t=>(r,a)=>{let l=!1;const u=y=>{const C=y.getData().colorpicker;l?(r(E.from(C)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},g=(y,C)=>{C.name==="hex-valid"&&(l=C.value)},f={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f,onAction:g,onSubmit:u,onClose:G,onCancel:()=>{r(E.none())}})},nB=t=>{oB(t);const r=QP(t),a=JP(t),l=Lt(r),u=Lt(a);HM(t,"forecolor","forecolor","Text color",l),HM(t,"backcolor","hilitecolor","Background color",u),fE(t,"forecolor","forecolor","Text color",l),fE(t,"backcolor","hilitecolor","Background color",u)},vE=(t,r,a,l,u,g,f,y)=>{const C=Ax(r),_=rB(r,a,l,u!=="color"?"normal":"color",g,f,y);return V_(t,C,_,l,{menuType:u})},rB=(t,r,a,l,u,g,f)=>tl(Ne(t,y=>y.type==="choiceitem"?xP(y).fold(pg,C=>E.some(en(C,a===1,l,r,g(C.value),u,f,Ax(t)))):E.none())),Kx=(t,r)=>{const a=hg(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>r==="color"?dr(l.element,"[aria-checked=true]"):E.none()}},qx=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${T_}`:`.${kx}`}},BM=(t,r)=>{const a=sB(t,r),l=r.colorinput.getColorCols(t.initData.storageKey),u="color",g={...vE(Qe("menu-value"),a,f=>{t.onAction({value:f})},l,u,Bd.CLOSE_ON_EXECUTE,t.select.getOr(Ue),r.shared.providers),markers:hg(u),movement:Kx(l,u)};return{type:"widget",data:{value:Qe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Rh.widget(yf.sketch(g))]}},sB=(t,r)=>{const a=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>NM(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(MM(a)))},IM=Qe("cell-over"),FM=Qe("cell-execute"),aB=t=>(r,a)=>t.shared.providers.translate(`${a} columns, ${r} rows`),iB=(t,r,a)=>{const l=f=>wt(f,IM,{row:t,col:r}),u=f=>wt(f,FM,{row:t,col:r}),g=(f,y)=>{y.stop(),u(f)};return Mr({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:ze([qt("insert-table-picker-cell",[Te(ja(),Pt.focus),Te($a(),u),Te(vd(),g),Te(up(),g)]),so.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Pt.config({onFocus:l})])})},lB=(t,r,a)=>{const l=[];for(let u=0;u<r;u++){const g=[];for(let f=0;f<a;f++){const y=t(u+1,f+1);g.push(iB(u,f,y))}l.push(g)}return l},bE=(t,r,a,l,u)=>{for(let g=0;g<l;g++)for(let f=0;f<u;f++)so.set(t[g][f],g<=r&&f<=a)},VM=t=>Ce(t,r=>Ne(r,Ts)),yE=(t,r)=>Un(`${r}x${t}`),cB={inserttable:(t,r)=>{const a=aB(r),l=lB(a,10,10),u=yE(0,0),g=Eo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[u],behaviours:ze([Wt.config({})])});return{type:"widget",data:{value:Qe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Rh.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:VM(l).concat(g.asSpec()),behaviours:ze([qt("insert-table-picker",[yn(f=>{Wt.set(g.get(f),[u])}),Qv(IM,(f,y,C)=>{const{row:_,col:T}=C.event;bE(l,_,T,10,10),Wt.set(g.get(f),[yE(_+1,T+1)])}),Qv(FM,(f,y,C)=>{const{row:_,col:T}=C.event;t.onAction({numRows:_+1,numColumns:T+1}),vo(f,xu())})]),Ct.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:BM},wE=(t,r)=>nt(cB,t.fancytype).map(a=>a(t,r)),dB=(t,r,a,l=!0,u=!1)=>{const g=u?J_(a.icons):zx(a.icons),f=C=>({isEnabled:()=>!Tt.isDisabled(C),setEnabled:_=>Tt.set(C,!_),setIconFill:(_,T)=>{dr(C.element,`svg path[class="${_}"], rect[class="${_}"]`).each(D=>{Z(D,"fill",T)})}}),y=qc({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,caret:E.some(g),checkMark:E.none(),shortcutContent:t.shortcut},a,l);return Y0({data:Ef(t),getApi:f,enabled:t.enabled,onAction:G,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,r,a)},uB=(t,r,a,l=!0)=>{const u=f=>({isEnabled:()=>!Tt.isDisabled(f),setEnabled:y=>Tt.set(f,!y)}),g=qc({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,caret:E.none(),checkMark:E.none(),shortcutContent:t.shortcut},a,l);return Y0({data:Ef(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,r,a)},mB=t=>({type:"separator",dom:{tag:"div",classes:[kx,QH]},components:t.text.map(Un).toArray()}),gB=(t,r,a,l=!0)=>{const u=f=>({setActive:y=>{so.set(f,y)},isActive:()=>so.isOn(f),isEnabled:()=>!Tt.isDisabled(f),setEnabled:y=>Tt.set(f,!y)}),g=qc({iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,checkMark:E.some(Q_(a.icons)),caret:E.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return ot(Y0({data:Ef(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,r,a),{toggling:{toggleClass:CD,toggleOnExecute:!1,selected:t.active}})},hB=eE,zM=mB,pB=uB,fB=dB,vB=gB,bB=wE,Xx=FP;var CE=Object.freeze({__proto__:null,getCoupled:(t,r,a,l)=>a.getOrCreate(t,r,l),getExistingCoupled:(t,r,a,l)=>a.getExisting(t,r,l)}),xE=[Dr("others",Ve(Gt.value,ma()))],ZM=Object.freeze({__proto__:null,init:()=>{const t={},r=(g,f)=>{if(dn(g.others).length===0)throw new Error("Cannot find any known coupled components");return nt(t,f)},a=(g,f,y)=>r(f,y).getOrThunk(()=>{const C=nt(f.others,y).getOrDie("No information found for coupled component: "+y)(g),_=g.getSystem().build(C);return t[y]=_,_}),l=(g,f,y)=>r(f,y).orThunk(()=>(nt(f.others,y).getOrDie("No information found for coupled component: "+y),E.none())),u=re({});return Ka({readState:u,getExisting:l,getOrCreate:a})}});const er=os({fields:xE,name:"coupling",apis:CE,state:ZM}),SE=t=>{let r=E.none(),a=[];const l=_=>SE(T=>{u(D=>{T(_(D))})}),u=_=>{f()?C(_):a.push(_)},g=_=>{f()||(r=E.some(_),y(a),a=[])},f=()=>r.isSome(),y=_=>{ct(_,C)},C=_=>{r.each(T=>{setTimeout(()=>{_(T)},0)})};return t(g),{get:u,map:l,isReady:f}},kE={nu:SE,pure:t=>SE(r=>{r(t)})},_E=t=>{setTimeout(()=>{throw t},0)},vg=t=>{const r=a=>{t().then(a,_E)};return{map:a=>vg(()=>t().then(a)),bind:a=>vg(()=>t().then(l=>a(l).toPromise())),anonBind:a=>vg(()=>t().then(()=>a.toPromise())),toLazy:()=>kE.nu(r),toCached:()=>{let a=null;return vg(()=>(a===null&&(a=t()),a))},toPromise:t,get:r}},$s={nu:t=>vg(()=>new Promise(t)),pure:t=>vg(()=>Promise.resolve(t))},UM=re("sink"),WM=re(di({name:UM(),overrides:re({dom:{tag:"div"},behaviours:ze([zs.config({useFixed:De})]),events:on([Zm($l()),Zm(Oa()),Zm(vd())])})})),jM=(t,r)=>{const a=t.getHotspot(r).getOr(r),l="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:u}),g=>({type:l,hotspot:a,overrides:u,layouts:g}))},yB=(t,r,a)=>{const l=t.fetch;return l(a).map(r)},wB=(t,r,a,l,u,g,f)=>{const y=yB(t,r,l),C=$M(l,t);return y.map(_=>_.bind(T=>E.from(wf.sketch({...g.menu(),uid:Bg(""),data:T,highlightOnOpen:f,onOpenMenu:(D,R)=>{const V=C().getOrDie();zs.position(V,R,{anchor:a}),Yt.decloak(u)},onOpenSubmenu:(D,R,V)=>{const Q=C().getOrDie();zs.position(Q,V,{anchor:{type:"submenu",item:R}}),Yt.decloak(u)},onRepositionMenu:(D,R,V)=>{const Q=C().getOrDie();zs.position(Q,R,{anchor:a}),ct(V,le=>{zs.position(Q,le.triggeredMenu,{anchor:{type:"submenu",item:le.triggeringItem}})})},onEscape:()=>(Pt.focus(l),Yt.close(u),E.some(!0))}))))},Yx=(t,r,a,l,u,g,f)=>{const y=jM(t,a);return wB(t,r,y,a,l,u,f).map(C=>(C.fold(()=>{Yt.isOpen(l)&&Yt.close(l)},_=>{Yt.cloak(l),Yt.open(l,_),g(l)}),l))},CB=(t,r,a,l,u,g,f)=>(Yt.close(l),$s.pure(l)),EE=(t,r,a,l,u,g)=>{const f=er.getCoupled(a,"sandbox");return(Yt.isOpen(f)?CB:Yx)(t,r,a,f,l,u,g)},xB=(t,r,a)=>{const l=uo.getCurrent(r).getOr(r),u=ar(t.element);a?fe(l.element,"min-width",u+"px"):kg(l.element,u)},$M=(t,r)=>t.getSystem().getByUid(r.uid+"-"+UM()).map(a=>()=>Gt.value(a)).getOrThunk(()=>r.lazySink.fold(()=>()=>Gt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),GM=t=>{Yt.getState(t).each(r=>{wf.repositionMenus(r)})},OE=(t,r,a)=>{const l=pw(),u=(y,C)=>{const _=jM(t,r);l.link(r.element),t.matchWidth&&xB(_.hotspot,C,t.useMinWidth),t.onOpen(_,y,C),a!==void 0&&a.onOpen!==void 0&&a.onOpen(y,C)},g=(y,C)=>{l.unlink(r.element),a!==void 0&&a.onClose!==void 0&&a.onClose(y,C)},f=$M(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:zi.augment(t.sandboxBehaviours,[Je.config({store:{mode:"memory",initialValue:r}}),Yt.config({onOpen:u,onClose:g,isPartOf:(y,C,_)=>Ed(C,_)||Ed(r,_),getAttachPoint:()=>f().getOrDie()}),uo.config({find:y=>Yt.getState(y).bind(C=>uo.getCurrent(C))}),Ma.config({channels:{...m0({isExtraPart:Ue}),...$b({doReposition:GM})}})])}},KM=t=>{const r=er.getCoupled(t,"sandbox");GM(r)},Qx=()=>[ge("sandboxClasses",[]),zi.field("sandboxBehaviours",[uo,Ma,Yt,Je])],SB=re([Re("dom"),Re("fetch"),mo("onOpen"),ts("onExecute"),ge("getHotspot",E.some),ge("getAnchorOverrides",re({})),Ru(),Nr("dropdownBehaviours",[so,er,Ct,Pt]),Re("toggleClass"),ge("eventOrder",{}),_o("lazySink"),ge("matchWidth",!1),ge("useMinWidth",!1),_o("role")].concat(Qx())),kB=re([hs({schema:[Gg(),ge("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),WM()]),Xu=(t,r,a,l)=>{const u=T=>nt(t.dom,"attributes").bind(D=>nt(D,T)),g=T=>{Yt.getState(T).each(D=>{wf.highlightPrimary(D)})},f=(T,D,R)=>EE(t,ao,T,l,D,R),y=T=>{f(T,g,Qa.HighlightMenuAndItem).get(G)},C={expand:T=>{so.isOn(T)||f(T,G,Qa.HighlightNone).get(G)},open:T=>{so.isOn(T)||f(T,G,Qa.HighlightMenuAndItem).get(G)},refetch:T=>er.getExistingCoupled(T,"sandbox").fold(()=>f(T,G,Qa.HighlightMenuAndItem).map(G),D=>Yx(t,ao,T,D,l,G,Qa.HighlightMenuAndItem).map(G)),isOpen:so.isOn,close:T=>{so.isOn(T)&&f(T,G,Qa.HighlightMenuAndItem).get(G)},repositionMenus:T=>{so.isOn(T)&&KM(T)}},_=(T,D)=>(Nc(T),E.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.dropdownBehaviours,[so.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),er.config({others:{sandbox:T=>OE(t,T,{onOpen:()=>so.on(T),onClose:()=>so.off(T)})}}),Ct.config({mode:"special",onSpace:_,onEnter:_,onDown:(T,D)=>{if(ac.isOpen(T)){const R=er.getCoupled(T,"sandbox");g(R)}else ac.open(T);return E.some(!0)},onEscape:(T,D)=>ac.isOpen(T)?(ac.close(T),E.some(!0)):E.none()}),Pt.config({})]),events:xh(E.some(y)),eventOrder:{...t.eventOrder,[$a()]:["disabling","toggling","alloy.base.behaviour"]},apis:C,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),T=>({role:T})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},ac=ra({name:"Dropdown",configFields:SB(),partFields:kB(),factory:Xu,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),_B=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},TE=t=>{const r=Je.getValue(t),a=j0(t).map(H_);ac.refetch(r).get(()=>{const l=er.getCoupled(r,"sandbox");a.each(u=>j0(l).each(g=>MD(g,u)))})},$r=(t,r)=>{EB(t).each(a=>{Yv(t,a.element,r.event.eventType,r.event.interactionEvent)})},EB=t=>Yt.getState(t).bind(xo.getHighlighted).bind(xo.getHighlighted),OB=t=>cr(t.element,Tx)?E.some(t.element):dr(t.element,"."+Tx),qM=(t,r,a)=>{DD(t).each(l=>{sP(l,a),OB(r).each(u=>{_t(u,"id").each(g=>Z(l.element,"aria-controls",g))})}),Z(a.element,"aria-selected","true")},TB=(t,r,a)=>{Z(a.element,"aria-selected","false")},AB=t=>{DD(t).each(r=>Pt.focus(r))},DB=t=>er.getExistingCoupled(t,"sandbox").bind(j0).map(H_).map(r=>r.fetchPattern).getOr("");var Jx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Jx||(Jx={}));const MB=(t,r,a,l,u)=>{const g=a.shared.providers,f=y=>u?{...y,shortcut:E.none(),icon:y.text.isSome()?E.none():y.icon}:y;switch(t.type){case"menuitem":return EP(t).fold(pg,y=>E.some(pB(f(y),r,g,l)));case"nestedmenuitem":return tM(t).fold(pg,y=>E.some(fB(f(y),r,g,l,u)));case"togglemenuitem":return AP(t).fold(pg,y=>E.some(vB(f(y),r,g,l)));case"separator":return ZD(t).fold(pg,y=>E.some(zM(y)));case"fancymenuitem":return kP(t).fold(pg,y=>bB(y,a));default:return console.error("Unknown item in general menu",t),E.none()}},NB=(t,r,a,l,u,g,f)=>{const y=l===1,C=!y||Ax(t);return tl(Ne(t,_=>{switch(_.type){case"separator":return WD(_).fold(pg,T=>E.some(zM(T)));case"cardmenuitem":return wP(_).fold(pg,T=>E.some(Xx({...T,onAction:D=>{T.onAction(D),a(T.value,T.meta)}},u,g,{itemBehaviours:uM(T.meta,g),cardText:{matchText:r,highlightOn:f}})));case"autocompleteitem":default:return cP(_).fold(pg,T=>E.some(hB(T,r,y,"normal",a,u,g,C)))}}))},XM=(t,r,a,l,u,g)=>{const f=Ax(r),y=tl(Ne(r,_=>{const T=R=>u?!wo(R,"text"):f,D=R=>MB(R,a,l,T(R),u);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?D({..._,enabled:!1}):D(_)})),C=_B(g);return(u?PD:V_)(t,f,y,1,C)},AE=t=>wf.singleData(t.value,t),RB=(t,r,a,l)=>{const u=Kx(r,l),g=hg(l);return{data:AE({...t,movement:u,menuBehaviours:Ry.unnamedEvents(r!=="auto"?[]:[yn((f,y)=>{Ny(f,4,g.item).each(({numColumns:C,numRows:_})=>{Ct.setGridSize(f,_,C)})})])}),menu:{markers:hg(l),fakeFocus:a===Jx.ContentFocus}}},LB=(t,r)=>wD(Xe.fromDom(r.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),HB={register:(t,r)=>{const a=Lt(!1),l=Lt(!1),u=Mr(An.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ze([qt("dismissAutocompleter",[Te(Su(),()=>_())])]),lazySink:r.getSink})),g=()=>An.isOpen(u),f=l.get,y=()=>{g()&&An.hide(u)},C=()=>An.getContent(u).bind(Q=>xn(Q.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),T=Q=>{const le=Kn(Q,Oe=>E.from(Oe.columns)).getOr(1);return Ce(Q,Oe=>{const Y=Oe.items;return NB(Y,Oe.matchText,(ne,be)=>{const pe=t.selection.getRng();LB(t.dom,pe).each(Pe=>{const Ge={hide:()=>_(),reload:st=>{y(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:st})}};a.set(!0),Oe.onAction(Ge,Pe,ne,be),a.set(!1)})},le,Bd.BUBBLE_TO_SANDBOX,r,Oe.highlightOn)})},D=(Q,le)=>{qH(Xe.fromDom(t.getBody())).each(Oe=>{const Y=Kn(Q,ne=>E.from(ne.columns)).getOr(1);An.showMenuAt(u,{anchor:{type:"node",root:Xe.fromDom(t.getBody()),node:E.from(Oe)}},RB(V_("autocompleter-value",!0,le,Y,{menuType:"normal"}),Y,Jx.ContentFocus,"normal"))}),C().each(xo.highlightFirst)},R=Q=>{const le=T(Q);le.length>0?D(Q,le):y()};t.on("AutocompleterStart",({lookupData:Q})=>{l.set(!0),a.set(!1),R(Q)}),t.on("AutocompleterUpdate",({lookupData:Q})=>R(Q)),t.on("AutocompleterEnd",()=>{y(),l.set(!1),a.set(!1)});const V={cancelIfNecessary:_,isMenuOpen:g,isActive:f,isProcessingAction:a.get,getMenu:C};XH.setup(V,t)}},PB=["visible","hidden","clip"],YM=t=>Yr(t).length>0&&!zo(PB,t),QM=t=>{if(xs(t)){const r=Ir(t,"overflow-x"),a=Ir(t,"overflow-y");return YM(r)||YM(a)}else return!1},BB=t=>{const r=e0(t,QM),a=r.length===0?nu(t).map(Ti).map(l=>e0(l,QM)).getOr([]):r;return qr(a).map(l=>({element:l,others:a.slice(1)}))},Tf=(t,r)=>Eh(t)?BB(r):E.none(),J0=t=>{const r=[...Ne(t.others,Rn),Is()];return r1(Rn(t.element),r)},Uy=(t,r,a)=>Yl(t,r,a).isSome(),JM=(t,r)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...l)=>{a=setTimeout(()=>{t.apply(null,l),a=null},r)}}},eN=5,IB=400,tN=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?E.none():E.some(r.touches[0])},oN=(t,r)=>{const a=Math.abs(t.clientX-r.x),l=Math.abs(t.clientY-r.y);return a>eN||l>eN},FB=t=>{const r=gn(),a=Lt(!1),l=JM(C=>{t.triggerEvent(J4(),C),a.set(!0)},IB),u=C=>(tN(C).each(_=>{l.cancel();const T={x:_.clientX,y:_.clientY,target:C.target};l.schedule(C),a.set(!1),r.set(T)}),E.none()),g=C=>(l.cancel(),tN(C).each(_=>{r.on(T=>{oN(_,T)&&r.clear()})}),E.none()),f=C=>{l.cancel();const _=T=>Fo(T.target,C.target);return r.get().filter(_).map(T=>a.get()?(C.prevent(),!1):t.triggerEvent(up(),C))},y=ri([{key:hl(),value:u},{key:wu(),value:g},{key:Pm(),value:f}]);return{fireIfReady:(C,_)=>nt(y,_).bind(T=>T(C))}},VB=t=>t.raw.which===w3[0]&&!zo(["input","textarea"],$o(t.target))&&!Uy(t.target,'[contenteditable="true"]'),zB=(t,r)=>{const a={stopBackspace:!0,...r},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=FB(a),g=Ne(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),R=>pa(t,R,V=>{u.fireIfReady(V,R).each(Q=>{Q&&V.kill()}),a.triggerEvent(R,V)&&V.kill()})),f=gn(),y=pa(t,"paste",R=>{u.fireIfReady(R,"paste").each(V=>{V&&R.kill()}),a.triggerEvent("paste",R)&&R.kill(),f.set(setTimeout(()=>{a.triggerEvent(v1(),R)},0))}),C=pa(t,"keydown",R=>{a.triggerEvent("keydown",R)?R.kill():a.stopBackspace&&VB(R)&&R.prevent()}),_=pa(t,"focusin",R=>{a.triggerEvent("focusin",R)&&R.kill()}),T=gn(),D=pa(t,"focusout",R=>{a.triggerEvent("focusout",R)&&R.kill(),T.set(setTimeout(()=>{a.triggerEvent(Fm(),R)},0))});return{unbind:()=>{ct(g,R=>{R.unbind()}),C.unbind(),_.unbind(),D.unbind(),y.unbind(),f.on(clearTimeout),T.on(clearTimeout)}}},DE=(t,r)=>{const a=nt(t,"target").getOr(r);return Lt(a)},ZB=(t,r)=>{const a=Lt(!1),l=Lt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:r.set,getSource:r.get}},UB=t=>{const r=Lt(!1);return{stop:()=>{r.set(!0)},cut:G,isStopped:r.get,isCut:Ue,event:t,setSource:J("Cannot set source of a broadcasted event"),getSource:J("Cannot get source of a broadcasted event")}},Wy=Ea.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),ME=(t,r,a,l,u,g)=>{const f=t(r,l),y=ZB(a,u);return f.fold(()=>(g.logEventNoHandlers(r,l),Wy.complete()),C=>{const _=C.descHandler;return jm(_)(y),y.isStopped()?(g.logEventStopped(r,C.element,_.purpose),Wy.stopped()):y.isCut()?(g.logEventCut(r,C.element,_.purpose),Wy.complete()):cs(C.element).fold(()=>(g.logNoParent(r,C.element,_.purpose),Wy.complete()),T=>(g.logEventResponse(r,C.element,_.purpose),Wy.resume(T)))})},nN=(t,r,a,l,u,g)=>ME(t,r,a,l,u,g).fold(De,f=>nN(t,r,a,f,u,g),Ue),WB=(t,r,a,l,u)=>{const g=DE(a,l);return ME(t,r,a,l,g,u)},jB=(t,r,a)=>{const l=UB(r);return ct(t,u=>{const g=u.descHandler;jm(g)(l)}),l.isStopped()},$B=(t,r,a,l)=>NE(t,r,a,a.target,l),NE=(t,r,a,l,u)=>{const g=DE(a,l);return nN(t,r,a,l,g,u)},GB=(t,r)=>({element:t,descHandler:r}),rN=(t,r)=>({id:t,descHandler:r}),KB=()=>{const t={},r=(l,u,g)=>{Bn(g,(f,y)=>{const C=t[y]!==void 0?t[y]:{};C[u]=Cd(f,l),t[y]=C})},a=(l,u)=>yp(u).bind(g=>nt(l,g)).map(g=>GB(u,g));return{registerId:r,unregisterId:l=>{Bn(t,(u,g)=>{wo(u,l)&&delete u[l]})},filterByType:l=>nt(t,l).map(u=>Si(u,(g,f)=>rN(f,g))).getOr([]),find:(l,u,g)=>nt(t,u).bind(f=>Ac(g,y=>a(f,y),l))}},sN=()=>{const t=KB(),r={},a=f=>{const y=f.element;return yp(y).getOrThunk(()=>Wm("uid-",f.element))},l=(f,y)=>{const C=r[y];if(C===f)g(f);else throw new Error('The tagId "'+y+'" is already used by: '+yd(C.element)+`
Cannot use it for: `+yd(f.element)+`
The conflicting element is`+(Ps(C.element)?" ":" not ")+"already in the DOM")},u=f=>{const y=a(f);Gs(r,y)&&l(f,y);const C=[f];t.registerId(C,y,f.events),r[y]=f},g=f=>{yp(f.element).each(y=>{delete r[y],t.unregisterId(y)})};return{find:(f,y,C)=>t.find(f,y,C),filter:f=>t.filterByType(f),register:u,unregister:g,getById:f=>nt(r,f)}},Fd=ui({name:"Container",factory:t=>{const{attributes:r,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...a},components:t.components,behaviours:b0(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ge("components",[]),Nr("containerBehaviours",[]),ge("events",{}),ge("domModification",{}),ge("eventOrder",{})]}),RE=t=>{const r=Y=>cs(t.element).fold(De,ne=>Fo(Y,ne)),a=sN(),l=(Y,ne)=>a.find(r,Y,ne),u=zB(t.element,{triggerEvent:(Y,ne)=>Tu(Y,ne.target,be=>$B(l,Y,ne,be))}),g={debugInfo:re("real"),triggerEvent:(Y,ne,be)=>{Tu(Y,ne,pe=>NE(l,Y,be,ne,pe))},triggerFocus:(Y,ne)=>{yp(Y).fold(()=>{Na(Y)},be=>{Tu(Pi(),Y,pe=>(WB(l,Pi(),{originator:ne,kill:G,prevent:G,target:Y},Y,pe),!1))})},triggerEscape:(Y,ne)=>{g.triggerEvent("keydown",Y.element,ne.event)},getByUid:Y=>le(Y),getByDom:Y=>Oe(Y),build:Mr,buildOrPatch:Sd,addToGui:Y=>{C(Y)},removeFromGui:Y=>{_(Y)},addToWorld:Y=>{f(Y)},removeFromWorld:Y=>{y(Y)},broadcast:Y=>{R(Y)},broadcastOn:(Y,ne)=>{V(Y,ne)},broadcastEvent:(Y,ne)=>{Q(Y,ne)},isConnected:De},f=Y=>{Y.connect(g),Er(Y.element)||(a.register(Y),ct(Y.components(),f),g.triggerEvent(mp(),Y.element,{target:Y.element}))},y=Y=>{Er(Y.element)||(ct(Y.components(),y),a.unregister(Y)),Y.disconnect()},C=Y=>{yr(t,Y)},_=Y=>{Qn(Y)},T=()=>{u.unbind(),dl(t.element)},D=Y=>{const ne=a.filter(Cu());ct(ne,be=>{const pe=be.descHandler;jm(pe)(Y)})},R=Y=>{D({universal:!0,data:Y})},V=(Y,ne)=>{D({universal:!1,channels:Y,data:ne})},Q=(Y,ne)=>{const be=a.filter(Y);return jB(be,ne)},le=Y=>a.getById(Y).fold(()=>Gt.error(new Error('Could not find component with uid: "'+Y+'" in system.')),Gt.value),Oe=Y=>{const ne=yp(Y).getOr("not found");return le(ne)};return f(t),{root:t,element:t.element,destroy:T,add:C,remove:_,getByUid:le,getByDom:Oe,addToWorld:f,removeFromWorld:y,broadcast:R,broadcastOn:V,broadcastEvent:Q}},qB=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ne(t.items,r.interpreter)}),XB=re([ge("prefix","form-field"),Nr("fieldBehaviours",[uo,Je])]),YB=re([di({schema:[Re("dom")],name:"label"}),di({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Re("text")],name:"aria-descriptor"}),Us({factory:{sketch:t=>{const r=Wv(t,["factory"]);return t.factory.sketch(r)}},schema:[Re("factory")],name:"field"})]),QB=(t,r,a,l)=>{const u=Jn(t.fieldBehaviours,[uo.config({find:y=>Go(y,t,"field")}),Je.config({store:{mode:"manual",getValue:y=>uo.getCurrent(y).bind(Je.getValue),setValue:(y,C)=>{uo.getCurrent(y).each(_=>{Je.setValue(_,C)})}}})]),g=on([yn((y,C)=>{const _=ry(y,t,["label","field","aria-descriptor"]);_.field().each(T=>{const D=Qe(t.prefix);_.label().each(R=>{Z(R.element,"for",D),Z(T.element,"id",D)}),_["aria-descriptor"]().each(R=>{const V=Qe(t.prefix);Z(R.element,"id",V),Z(T.element,"aria-describedby",V)})})})]),f={getField:y=>Go(y,t,"field"),getLabel:y=>Go(y,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:u,events:g,apis:f}},Mo=ra({name:"FormField",configFields:XB(),partFields:YB(),factory:QB,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var JB=Object.freeze({__proto__:null,exhibit:(t,r)=>ai({attributes:ri([{key:r.tabAttr,value:"true"}])})}),eI=[ge("tabAttr","data-alloy-tabstop")];const Wn=os({fields:eI,name:"tabstopping",active:JB});var tI=tinymce.util.Tools.resolve("tinymce.html.Entities");const jy=(t,r,a,l)=>{const u=oI(t,r,a,l);return Mo.sketch(u)},aN=(t,r)=>jy(t,r,[],[]),oI=(t,r,a,l)=>({dom:iN(a),components:t.toArray().concat([r]),fieldBehaviours:ze(l)}),nI=()=>iN([]),iN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Ih=(t,r)=>Mo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Un(r.translate(t))]}),Ki=Qe("form-component-change"),Af=Qe("form-close"),Fh=Qe("form-cancel"),Yu=Qe("form-action"),$y=Qe("form-submit"),eS=Qe("form-block"),tS=Qe("form-unblock"),lN=Qe("form-tabchange"),cN=Qe("form-resize"),dN=(t,r,a)=>{const l=t.label.map(T=>Ih(T,r)),u=T=>(D,R)=>{Yl(R.event.target,"[data-collection-item-value]").each(V=>{T(D,R,V,lt(V,"data-collection-item-value"))})},g=(T,D)=>{const R=Ne(D,le=>{const Oe=xl.translate(le.text),Y=t.columns===1?`<div class="tox-collection__item-label">${Oe}</div>`:"",ne=`<div class="tox-collection__item-icon">${le.icon}</div>`,be={_:" "," - ":" ","-":" "},pe=Oe.replace(/\_| \- |\-/g,Pe=>be[Pe]);return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${tI.encodeAllRaw(le.value)}" title="${pe}" aria-label="${pe}">${ne}${Y}</div>`}),V=t.columns!=="auto"&&t.columns>1?xr(R,t.columns):[R],Q=Ne(V,le=>`<div class="tox-collection__group">${le.join("")}</div>`);pl(T.element,Q.join(""))},f=u((T,D,R,V)=>{D.stop(),r.isDisabled()||wt(T,Yu,{name:t.name,value:V})}),y=[Te(ja(),u((T,D,R)=>{Na(R)})),Te(vd(),f),Te(up(),f),Te(Dc(),u((T,D,R)=>{dr(T.element,"."+Ty).each(V=>{cn(V,Ty)}),Tn(R,Ty)})),Te(f1(),u(T=>{dr(T.element,"."+Ty).each(D=>{cn(D,Ty)})})),ql(u((T,D,R,V)=>{wt(T,Yu,{name:t.name,value:V})}))],C=(T,D)=>Ne(Ms(T.element,".tox-collection__item"),D),_=Mo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ao},behaviours:ze([Tt.config({disabled:r.isDisabled,onDisabled:T=>{C(T,D=>{Tn(D,"tox-collection__item--state-disabled"),Z(D,"aria-disabled",!0)})},onEnabled:T=>{C(T,D=>{cn(D,"tox-collection__item--state-disabled"),Co(D,"aria-disabled")})}}),ss(),Wt.config({}),Je.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(T,D)=>{g(T,D),t.columns==="auto"&&Ny(T,5,"tox-collection__item").each(({numRows:R,numColumns:V})=>{Ct.setGridSize(T,R,V)}),vo(T,cN)}}),Wn.config({}),Ct.config(qx(t.columns,"normal")),qt("collection-events",y)]),eventOrder:{[$a()]:["disabling","alloy.base.behaviour","collection-events"]}});return jy(l,_,["tox-form__group--collection"],[])},rI=["input","textarea"],uN=t=>{const r=$o(t);return zo(rI,r)},mN=(t,r)=>{const a=r.getRoot(t).getOr(t.element);cn(a,r.invalidClass),r.notify.each(l=>{uN(t.element)&&Z(t.element,"aria-invalid",!1),l.getContainer(t).each(u=>{pl(u,l.validHtml)}),l.onValid(t)})},gN=(t,r,a,l)=>{const u=r.getRoot(t).getOr(t.element);Tn(u,r.invalidClass),r.notify.each(g=>{uN(t.element)&&Z(t.element,"aria-invalid",!0),g.getContainer(t).each(f=>{pl(f,l)}),g.onInvalid(t,l)})},hN=(t,r,a)=>r.validator.fold(()=>$s.pure(Gt.value(!0)),l=>l.validate(t)),LE=(t,r,a)=>(r.notify.each(l=>{l.onValidate(t)}),hN(t,r).map(l=>t.getSystem().isConnected()?l.fold(u=>(gN(t,r,a,u),Gt.error(u)),u=>(mN(t,r),Gt.value(u))):Gt.error("No longer in system")));var oS=Object.freeze({__proto__:null,markValid:mN,markInvalid:gN,query:hN,run:LE,isInvalid:(t,r)=>{const a=r.getRoot(t).getOr(t.element);return cr(a,r.invalidClass)}}),sI=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(a=>on([Te(a.onEvent,l=>{LE(l,t,r).get(ao)})].concat(a.validateOnLoad?[yn(l=>{LE(l,t,r).get(G)})]:[]))).getOr({})}),nS=[Re("invalidClass"),ge("getRoot",E.none),_a("notify",[ge("aria","alert"),ge("getContainer",E.none),ge("validHtml",""),mo("onValid"),mo("onInvalid"),mo("onValidate")]),_a("validator",[Re("validate"),ge("onEvent","input"),ge("validateOnLoad",!0)])];const Qu=os({fields:nS,name:"invalidating",active:sI,apis:oS,extra:{validation:t=>r=>{const a=Je.getValue(r);return $s.pure(t(a))}}});var aI=Object.freeze({__proto__:null,events:()=>on([pp(Kv(),De)]),exhibit:()=>ai({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Gy=os({fields:[],name:"unselecting",active:aI}),iI=(t,r)=>ac.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:ze([Gi.button(r.providers.isDisabled),ss(),Gy.config({}),Wn.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:a=>$s.nu(l=>t.fetch(l)).map(l=>E.from(AE(ot(vE(Qe("menu-value"),l,u=>{t.onItemAction(a,u)},t.columns,t.presets,Bd.CLOSE_ON_EXECUTE,Ue,r.providers),{movement:Kx(t.columns,t.presets)})))),parts:{menu:_x(!1,1,t.presets)}}),Ky=Qe("color-input-change"),Df=Qe("color-swatch-change"),HE=Qe("color-picker-cancel"),pN=(t,r,a,l)=>{const u=Mo.parts.field({factory:Oh,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Qu.run(_).get(G),inputBehaviours:ze([Tt.config({disabled:r.providers.isDisabled}),ss(),Wn.config({}),Qu.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>Ss(_.element),notify:{onValid:_=>{const T=Je.getValue(_);wt(_,Ky,{color:T})}},validator:{validateOnLoad:!1,validate:_=>{const T=Je.getValue(_);if(T.length===0)return $s.pure(Gt.value(!0));{const D=Xe.fromTag("span");fe(D,"background-color",T);const R=ln(D,"background-color").fold(()=>Gt.error("blah"),V=>Gt.value(T));return $s.pure(R)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>Ih(_,r.providers)),f=(_,T)=>{wt(_,Df,{value:T})},y=(_,T)=>{C.getOpt(_).each(D=>{T==="custom"?a.colorPicker(R=>{R.fold(()=>vo(D,HE),V=>{f(D,V),dE(t.storageKey,V)})},"#ffffff"):T==="remove"?f(D,""):f(D,T)})},C=Eo(iI({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[gs,As,Wr],onLtr:()=>[As,gs,Wr]},components:[],fetch:RM(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:y},r));return Mo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,C.asSpec()]}]),fieldBehaviours:ze([qt("form-field-events",[Te(Ky,(_,T)=>{C.getOpt(_).each(D=>{fe(D.element,"background-color",T.event.color)}),wt(_,Ki,{name:t.name})}),Te(Df,(_,T)=>{Mo.getField(_).each(D=>{Je.setValue(D,T.event.value),uo.getCurrent(_).each(Pt.focus)})}),Te(HE,(_,T)=>{Mo.getField(_).each(D=>{uo.getCurrent(_).each(Pt.focus)})})])])})},lI=di({schema:[Re("dom")],name:"label"}),Vh=t=>di({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),a=>({events:on([x1(hl(),(l,u,g)=>a(l,g),[r]),x1(Oa(),(l,u,g)=>a(l,g),[r]),x1(Lg(),(l,u,g)=>{g.mouseIsDown.get()&&a(l,g)},[r])])}))}),cI=Vh("top-left"),dI=Vh("top"),uI=Vh("top-right"),mI=Vh("right"),gI=Vh("bottom-right"),hI=Vh("bottom"),pI=Vh("bottom-left"),fI=Vh("left"),vI=Us({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:on([zm(hl(),t,"spectrum"),zm(wu(),t,"spectrum"),zm(Pm(),t,"spectrum"),zm(Oa(),t,"spectrum"),zm(Lg(),t,"spectrum"),zm(Gv(),t,"spectrum")])})}),fN=Us({schema:[po("mouseIsDown",()=>Lt(!1))],name:"spectrum",overrides:t=>{const r=t.model.manager,a=(l,u)=>r.getValueFromEvent(u).map(g=>r.setValueFrom(l,t,g));return{behaviours:ze([Ct.config({mode:"special",onLeft:l=>r.onLeft(l,t),onRight:l=>r.onRight(l,t),onUp:l=>r.onUp(l,t),onDown:l=>r.onDown(l,t)}),Pt.config({})]),events:on([Te(hl(),a),Te(wu(),a),Te(Oa(),a),Te(Lg(),(l,u)=>{t.mouseIsDown.get()&&a(l,u)})])}}});var ev=[lI,fI,mI,dI,hI,cI,uI,pI,gI,vI,fN];const Vd=re("slider.change.value"),bI=t=>t.type.indexOf("touch")!==-1,rS=t=>{const r=t.event.raw;if(bI(r)){const a=r;return a.touches!==void 0&&a.touches.length===1?E.some(a.touches[0]).map(l=>mn(l.clientX,l.clientY)):E.none()}else{const a=r;return a.clientX!==void 0?E.some(a).map(l=>mn(l.clientX,l.clientY)):E.none()}},vN="top",sS="right",yI="bottom",qy="left",zd=t=>t.model.minX,Mf=t=>t.model.minY,aS=t=>t.model.minX-1,iS=t=>t.model.minY-1,Nf=t=>t.model.maxX,Rf=t=>t.model.maxY,lS=t=>t.model.maxX+1,Lf=t=>t.model.maxY+1,bN=(t,r,a)=>r(t)-a(t),PE=t=>bN(t,Nf,zd),BE=t=>bN(t,Rf,Mf),IE=t=>PE(t)/2,yN=t=>BE(t)/2,tv=t=>t.stepSize,wN=t=>t.snapToGrid,FE=t=>t.snapStart,CN=t=>t.rounded,cS=(t,r)=>t[r+"-edge"]!==void 0,xN=t=>cS(t,qy),SN=t=>cS(t,sS),kN=t=>cS(t,vN),VE=t=>cS(t,yI),Ju=t=>t.model.value.get(),zh=(t,r)=>({x:t,y:r}),Yc=(t,r)=>{wt(t,Vd(),{value:r})},wI=(t,r)=>{Yc(t,zh(aS(r),iS(r)))},CI=(t,r)=>{Yc(t,iS(r))},xI=(t,r)=>{Yc(t,zh(IE(r),iS(r)))},_N=(t,r)=>{Yc(t,zh(lS(r),iS(r)))},ov=(t,r)=>{Yc(t,lS(r))},SI=(t,r)=>{Yc(t,zh(lS(r),yN(r)))},kI=(t,r)=>{Yc(t,zh(lS(r),Lf(r)))},_I=(t,r)=>{Yc(t,Lf(r))},dS=(t,r)=>{Yc(t,zh(IE(r),Lf(r)))},ic=(t,r)=>{Yc(t,zh(aS(r),Lf(r)))},zE=(t,r)=>{Yc(t,aS(r))},EN=(t,r)=>{Yc(t,zh(aS(r),yN(r)))},ZE=(t,r,a,l)=>t<r?t:t>a?a:t===r?r-1:Math.max(r,t-l),UE=(t,r,a,l)=>t>a?t:t<r?r:t===a?a+1:Math.min(a,t+l),ON=(t,r,a)=>Math.max(r,Math.min(a,t)),EI=(t,r,a,l,u)=>u.fold(()=>{const g=t-r,f=Math.round(g/l)*l;return ON(r+f,r-1,a+1)},g=>{const f=(t-g)%l,y=Math.round(f/l),C=Math.floor((t-g)/l),_=Math.floor((a-g)/l),T=Math.min(_,C+y),D=g+T*l;return Math.max(g,D)}),TN=(t,r,a)=>Math.min(a,Math.max(t,r))-r,WE=t=>{const{min:r,max:a,range:l,value:u,step:g,snap:f,snapStart:y,rounded:C,hasMinEdge:_,hasMaxEdge:T,minBound:D,maxBound:R,screenRange:V}=t,Q=_?r-1:r,le=T?a+1:a;if(u<D)return Q;if(u>R)return le;{const Oe=TN(u,D,R),Y=ON(Oe/V*l+r,Q,le);return f&&Y>=r&&Y<=a?EI(Y,r,a,g,y):C?Math.round(Y):Y}},AN=t=>{const{min:r,max:a,range:l,value:u,hasMinEdge:g,hasMaxEdge:f,maxBound:y,maxOffset:C,centerMinEdge:_,centerMaxEdge:T}=t;return u<r?g?0:_:u>a?f?y:T:(u-r)/l*C},jE="top",$E="right",DN="bottom",uS="left",MN="width",NN="height",em=t=>t.element.dom.getBoundingClientRect(),Qc=(t,r)=>t[r],mS=t=>{const r=em(t);return Qc(r,uS)},RN=t=>{const r=em(t);return Qc(r,$E)},gS=t=>{const r=em(t);return Qc(r,jE)},LN=t=>{const r=em(t);return Qc(r,DN)},hS=t=>{const r=em(t);return Qc(r,MN)},HN=t=>{const r=em(t);return Qc(r,NN)},GE=(t,r,a)=>(t+r)/2-a,PN=(t,r)=>{const a=em(t),l=em(r),u=Qc(a,uS),g=Qc(a,$E),f=Qc(l,uS);return GE(u,g,f)},BN=(t,r)=>{const a=em(t),l=em(r),u=Qc(a,jE),g=Qc(a,DN),f=Qc(l,jE);return GE(u,g,f)},pS=(t,r)=>{wt(t,Vd(),{value:r})},KE=(t,r,a)=>{const l={min:zd(r),max:Nf(r),range:PE(r),value:a,step:tv(r),snap:wN(r),snapStart:FE(r),rounded:CN(r),hasMinEdge:xN(r),hasMaxEdge:SN(r),minBound:mS(t),maxBound:RN(t),screenRange:hS(t)};return WE(l)},OI=(t,r,a)=>{const l=KE(t,r,a);return pS(t,l),l},TI=(t,r)=>{const a=zd(r);pS(t,a)},AI=(t,r)=>{const a=Nf(r);pS(t,a)},IN=(t,r,a)=>{const l=(t>0?UE:ZE)(Ju(a),zd(a),Nf(a),tv(a));return pS(r,l),E.some(l)},qE=t=>(r,a)=>IN(t,r,a).map(De),DI=t=>rS(t).map(r=>r.left),MI=(t,r,a,l,u)=>{const g=hS(t),f=l.bind(_=>E.some(PN(_,t))).getOr(0),y=u.bind(_=>E.some(PN(_,t))).getOr(g),C={min:zd(r),max:Nf(r),range:PE(r),value:a,hasMinEdge:xN(r),hasMaxEdge:SN(r),minBound:mS(t),minOffset:0,maxBound:RN(t),maxOffset:g,centerMinEdge:f,centerMaxEdge:y};return AN(C)},XE=(t,r,a,l,u,g)=>{const f=MI(r,g,a,l,u);return mS(r)-mS(t)+f},NI=(t,r,a,l)=>{const u=Ju(a),g=XE(t,l.getSpectrum(t),u,l.getLeftEdge(t),l.getRightEdge(t),a),f=ar(r.element)/2;fe(r.element,"left",g-f+"px")},RI=qE(-1),FN=qE(1),VN=E.none,zN=E.none,YE={"top-left":E.none(),top:E.none(),"top-right":E.none(),right:E.some(ov),"bottom-right":E.none(),bottom:E.none(),"bottom-left":E.none(),left:E.some(zE)};var LI=Object.freeze({__proto__:null,setValueFrom:OI,setToMin:TI,setToMax:AI,findValueOfOffset:KE,getValueFromEvent:DI,findPositionOfValue:XE,setPositionFromValue:NI,onLeft:RI,onRight:FN,onUp:VN,onDown:zN,edgeActions:YE});const Xy=(t,r)=>{wt(t,Vd(),{value:r})},QE=(t,r,a)=>{const l={min:Mf(r),max:Rf(r),range:BE(r),value:a,step:tv(r),snap:wN(r),snapStart:FE(r),rounded:CN(r),hasMinEdge:kN(r),hasMaxEdge:VE(r),minBound:gS(t),maxBound:LN(t),screenRange:HN(t)};return WE(l)},HI=(t,r,a)=>{const l=QE(t,r,a);return Xy(t,l),l},PI=(t,r)=>{const a=Mf(r);Xy(t,a)},BI=(t,r)=>{const a=Rf(r);Xy(t,a)},JE=(t,r,a)=>{const l=(t>0?UE:ZE)(Ju(a),Mf(a),Rf(a),tv(a));return Xy(r,l),E.some(l)},tm=t=>(r,a)=>JE(t,r,a).map(De),II=t=>rS(t).map(r=>r.top),Yy=(t,r,a,l,u)=>{const g=HN(t),f=l.bind(_=>E.some(BN(_,t))).getOr(0),y=u.bind(_=>E.some(BN(_,t))).getOr(g),C={min:Mf(r),max:Rf(r),range:BE(r),value:a,hasMinEdge:kN(r),hasMaxEdge:VE(r),minBound:gS(t),minOffset:0,maxBound:LN(t),maxOffset:g,centerMinEdge:f,centerMaxEdge:y};return AN(C)},eO=(t,r,a,l,u,g)=>{const f=Yy(r,g,a,l,u);return gS(r)-gS(t)+f},tO=(t,r,a,l)=>{const u=Ju(a),g=eO(t,l.getSpectrum(t),u,l.getTopEdge(t),l.getBottomEdge(t),a),f=sr(r.element)/2;fe(r.element,"top",g-f+"px")},FI=E.none,VI=E.none,zI=tm(-1),ZN=tm(1),ZI={"top-left":E.none(),top:E.some(CI),"top-right":E.none(),right:E.none(),"bottom-right":E.none(),bottom:E.some(_I),"bottom-left":E.none(),left:E.none()};var oO=Object.freeze({__proto__:null,setValueFrom:HI,setToMin:PI,setToMax:BI,findValueOfOffset:QE,getValueFromEvent:II,findPositionOfValue:eO,setPositionFromValue:tO,onLeft:FI,onRight:VI,onUp:zI,onDown:ZN,edgeActions:ZI});const nv=(t,r)=>{wt(t,Vd(),{value:r})},rv=(t,r)=>({x:t,y:r}),UI=(t,r,a)=>{const l=KE(t,r,a.left),u=QE(t,r,a.top),g=rv(l,u);return nv(t,g),g},lc=(t,r,a,l)=>{const u=t>0?UE:ZE,g=r?Ju(l).x:u(Ju(l).x,zd(l),Nf(l),tv(l)),f=r?u(Ju(l).y,Mf(l),Rf(l),tv(l)):Ju(l).y;return nv(a,rv(g,f)),E.some(g)},fS=(t,r)=>(a,l)=>lc(t,r,a,l).map(De),WI=(t,r)=>{const a=zd(r),l=Mf(r);nv(t,rv(a,l))},jI=(t,r)=>{const a=Nf(r),l=Rf(r);nv(t,rv(a,l))},UN=t=>rS(t),$I=(t,r,a,l)=>{const u=Ju(a),g=XE(t,l.getSpectrum(t),u.x,l.getLeftEdge(t),l.getRightEdge(t),a),f=eO(t,l.getSpectrum(t),u.y,l.getTopEdge(t),l.getBottomEdge(t),a),y=ar(r.element)/2,C=sr(r.element)/2;fe(r.element,"left",g-y+"px"),fe(r.element,"top",f-C+"px")},GI=fS(-1,!1),KI=fS(1,!1),qI=fS(-1,!0),XI=fS(1,!0),YI={"top-left":E.some(wI),top:E.some(xI),"top-right":E.some(_N),right:E.some(SI),"bottom-right":E.some(kI),bottom:E.some(dS),"bottom-left":E.some(ic),left:E.some(EN)};var QI=Object.freeze({__proto__:null,setValueFrom:UI,setToMin:WI,setToMax:jI,getValueFromEvent:UN,setPositionFromValue:$I,onLeft:GI,onRight:KI,onUp:qI,onDown:XI,edgeActions:YI});const WN=[ge("stepSize",1),ge("onChange",G),ge("onChoose",G),ge("onInit",G),ge("onDragStart",G),ge("onDragEnd",G),ge("snapToGrid",!1),ge("rounded",!0),_o("snapStart"),Dr("model",fo("mode",{x:[ge("minX",0),ge("maxX",100),po("value",t=>Lt(t.mode.minX)),Re("getInitialValue"),ce("manager",LI)],y:[ge("minY",0),ge("maxY",100),po("value",t=>Lt(t.mode.minY)),Re("getInitialValue"),ce("manager",oO)],xy:[ge("minX",0),ge("maxX",100),ge("minY",0),ge("maxY",100),po("value",t=>Lt({x:t.mode.minX,y:t.mode.minY})),Re("getInitialValue"),ce("manager",QI)]})),Nr("sliderBehaviours",[Ct,Je]),po("mouseIsDown",()=>Lt(!1))],Jc=ra({name:"Slider",configFields:WN,partFields:ev,factory:(t,r,a,l)=>{const u=pe=>Zu(pe,t,"thumb"),g=pe=>Zu(pe,t,"spectrum"),f=pe=>Go(pe,t,"left-edge"),y=pe=>Go(pe,t,"right-edge"),C=pe=>Go(pe,t,"top-edge"),_=pe=>Go(pe,t,"bottom-edge"),T=t.model,D=T.manager,R=(pe,Pe)=>{D.setPositionFromValue(pe,Pe,t,{getLeftEdge:f,getRightEdge:y,getTopEdge:C,getBottomEdge:_,getSpectrum:g})},V=(pe,Pe)=>{T.value.set(Pe);const Ge=u(pe);R(pe,Ge)},Q=(pe,Pe)=>{V(pe,Pe);const Ge=u(pe);return t.onChange(pe,Ge,Pe),E.some(!0)},le=pe=>{D.setToMin(pe,t)},Oe=pe=>{D.setToMax(pe,t)},Y=pe=>{const Pe=()=>{Go(pe,t,"thumb").each(st=>{const pt=T.value.get();t.onChoose(pe,st,pt)})},Ge=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ge&&Pe()},ne=(pe,Pe)=>{Pe.stop(),t.mouseIsDown.set(!0),t.onDragStart(pe,u(pe))},be=(pe,Pe)=>{Pe.stop(),t.onDragEnd(pe,u(pe)),Y(pe)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.sliderBehaviours,[Ct.config({mode:"special",focusIn:pe=>Go(pe,t,"spectrum").map(Ct.focusIn).map(De)}),Je.config({store:{mode:"manual",getValue:pe=>T.value.get(),setValue:V}}),Ma.config({channels:{[Xp()]:{onReceive:Y}}})]),events:on([Te(Vd(),(pe,Pe)=>{Q(pe,Pe.event.value)}),yn((pe,Pe)=>{const Ge=T.getInitialValue();T.value.set(Ge);const st=u(pe);R(pe,st);const pt=g(pe);t.onInit(pe,st,pt,T.value.get())}),Te(hl(),ne),Te(Pm(),be),Te(Oa(),ne),Te(Gv(),be)]),apis:{resetToMin:le,resetToMax:Oe,setValue:V,refresh:R},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,a)=>{t.setValue(r,a)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),nO=Qe("rgb-hex-update"),jN=Qe("slider-update"),rO=Qe("palette-update"),sO=(t,r)=>{const a=Jc.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Jc.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Jc.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:re(0)},components:[a,l],sliderBehaviours:ze([Pt.config({})]),onChange:(u,g,f)=>{wt(u,jN,{value:f})}})},$N="form",aO=[Nr("formBehaviours",[Je])],Hf=t=>"<alloy.field."+t+">",GN=t=>{const r=(()=>{const g=[];return{field:(f,y)=>(g.push(f),_0($N,Hf(f),y)),record:re(g)}})(),a=t(r),l=r.record(),u=Ne(l,g=>Us({name:g,pname:Hf(g)}));return cy($N,aO,u,qN,a)},KN=(t,r)=>t.fold(()=>Gt.error(r),Gt.value),qN=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.formBehaviours,[Je.config({store:{mode:"manual",getValue:a=>{const l=sy(a,t);return an(l,(u,g)=>u().bind(f=>{const y=uo.getCurrent(f);return KN(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+yd(f.element)))}).map(Je.getValue))},setValue:(a,l)=>{Bn(l,(u,g)=>{Go(a,t,g).each(f=>{uo.getCurrent(f).each(y=>{Je.setValue(y,u)})})})}}})]),apis:{getField:(a,l)=>Go(a,t,l).bind(uo.getCurrent)}}),sv={getField:xp((t,r,a)=>t.getField(r,a)),sketch:GN},XN=Qe("valid-input"),Qy=Qe("invalid-input"),YN=Qe("validating-input"),iO="colorcustom.rgb.",QN=(t,r,a,l)=>{const u=(T,D)=>Qu.config({invalidClass:r("invalid"),notify:{onValidate:R=>{wt(R,YN,{type:T})},onValid:R=>{wt(R,XN,{type:T,value:Je.getValue(R)})},onInvalid:R=>{wt(R,Qy,{type:T,value:Je.getValue(R)})}},validator:{validate:R=>{const V=Je.getValue(R),Q=D(V)?Gt.value(!0):Gt.error(t("aria.input.invalid"));return $s.pure(Q)},validateOnLoad:!1}}),g=(T,D,R,V,Q)=>{const le=t(iO+"range"),Oe=Mo.parts.label({dom:{tag:"label",attributes:{"aria-label":V}},components:[Un(R)]}),Y=Mo.parts.field({data:Q,factory:Oh,inputAttributes:{type:"text",...D==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:ze([u(D,T),Wn.config({})]),onSetValue:Pe=>{Qu.isInvalid(Pe)&&Qu.run(Pe).get(G)}}),ne=[Oe,Y],be=D!=="hex"?[Mo.parts["aria-descriptor"]({text:le})]:[],pe=ne.concat(be);return{dom:{tag:"div",attributes:{role:"presentation"}},components:pe}},f=(T,D)=>{const R=Of(D);return sv.getField(T,"hex").each(V=>{Pt.isFocused(V)||Je.setValue(T,{hex:R.value})}),R},y=(T,D)=>{const R=D.red,V=D.green,Q=D.blue;Je.setValue(T,{red:R,green:V,blue:Q})},C=Eo({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(T,D)=>{C.getOpt(T).each(R=>{fe(R.element,"background-color","#"+D.value)})};return ui({factory:()=>{const T={red:Lt(E.some(255)),green:Lt(E.some(255)),blue:Lt(E.some(255)),hex:Lt(E.some("ffffff"))},D=(je,qe)=>{const Et=Fy(qe);y(je,Et),le(Et)},R=je=>T[je].get(),V=(je,qe)=>{T[je].set(qe)},Q=()=>R("red").bind(je=>R("green").bind(qe=>R("blue").map(Et=>Lh(je,qe,Et,1)))),le=je=>{const qe=je.red,Et=je.green,yo=je.blue;V("red",E.some(qe)),V("green",E.some(Et)),V("blue",E.some(yo))},Oe=(je,qe)=>{const Et=qe.event;Et.type!=="hex"?V(Et.type,E.none()):l(je)},Y=(je,qe)=>{a(je);const Et=By(qe);V("hex",E.some(Et.value));const yo=Fy(Et);y(je,yo),le(yo),wt(je,nO,{hex:Et}),_(je,Et)},ne=(je,qe,Et)=>{const yo=parseInt(Et,10);V(qe,E.some(yo)),Q().each(kn=>{const Ze=f(je,kn);wt(je,nO,{hex:Ze}),_(je,Ze)})},be=je=>je.type==="hex",pe=(je,qe)=>{const Et=qe.event;be(Et)?Y(je,Et.value):ne(je,Et.type,Et.value)},Pe=je=>({label:t(iO+je+".label"),description:t(iO+je+".description")}),Ge=Pe("red"),st=Pe("green"),pt=Pe("blue"),io=Pe("hex");return ot(sv.sketch(je=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[je.field("red",Mo.sketch(g(rE,"red",Ge.label,Ge.description,255))),je.field("green",Mo.sketch(g(rE,"green",st.label,st.description,255))),je.field("blue",Mo.sketch(g(rE,"blue",pt.label,pt.description,255))),je.field("hex",Mo.sketch(g(Ux,"hex",io.label,io.description,"ffffff"))),C.asSpec()],formBehaviours:ze([Qu.config({invalidClass:r("form-invalid")}),qt("rgb-form-events",[Te(XN,pe),Te(Qy,Oe),Te(YN,Oe)])])})),{apis:{updateHex:(je,qe)=>{Je.setValue(je,{hex:qe.value}),D(je,qe),_(je,qe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(T,D,R)=>{T.updateHex(D,R)}},extraApis:{}})},JN=(t,r)=>{const a=Jc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),l=Jc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(y,C)=>{const{width:_,height:T}=y,D=y.getContext("2d");if(D===null)return;D.fillStyle=C,D.fillRect(0,0,_,T);const R=D.createLinearGradient(0,0,_,0);R.addColorStop(0,"rgba(255,255,255,1)"),R.addColorStop(1,"rgba(255,255,255,0)"),D.fillStyle=R,D.fillRect(0,0,_,T);const V=D.createLinearGradient(0,0,0,T);V.addColorStop(0,"rgba(0,0,0,0)"),V.addColorStop(1,"rgba(0,0,0,1)"),D.fillStyle=V,D.fillRect(0,0,_,T)},g=(y,C)=>{const _=y.components()[0].element.dom,T=Q0(C,100,100),D=hM(T);u(_,fM(D))},f=(y,C)=>{const _=$x(Fy(C));Jc.setValue(y,{x:_.saturation,y:100-_.value})};return ui({factory:y=>{const C=re({x:0,y:0}),_=(R,V,Q)=>{wt(R,rO,{value:Q})},T=(R,V,Q,le)=>{u(Q.element.dom,fM(aE))},D=ze([uo.config({find:E.some}),Pt.config({})]);return Jc.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:C},rounded:!1,components:[a,l],onChange:_,onInit:T,sliderBehaviours:D})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(y,C,_)=>{g(C,_)},setThumb:(y,C,_)=>{f(C,_)}},extraApis:{}})},lO=(t,r)=>{const a=l=>{const u=QN(t,r,l.onValidHex,l.onInvalidHex),g=JN(t,r),f=Pe=>(100-Pe)/100*360,y=Pe=>100-Pe/360*100,C={paletteRgba:Lt(aE),paletteHue:Lt(0)},_=Eo(sO(t,r)),T=Eo(g.sketch({})),D=Eo(u.sketch({})),R=(Pe,Ge,st)=>{T.getOpt(Pe).each(pt=>{g.setHue(pt,st)})},V=(Pe,Ge)=>{D.getOpt(Pe).each(st=>{u.updateHex(st,Ge)})},Q=(Pe,Ge,st)=>{_.getOpt(Pe).each(pt=>{Jc.setValue(pt,y(st))})},le=(Pe,Ge)=>{T.getOpt(Pe).each(st=>{g.setThumb(st,Ge)})},Oe=(Pe,Ge)=>{const st=Fy(Pe);C.paletteRgba.set(st),C.paletteHue.set(Ge)},Y=(Pe,Ge,st,pt)=>{Oe(Ge,st),ct(pt,io=>{io(Pe,Ge,st)})},ne=()=>{const Pe=[V];return(Ge,st)=>{const pt=st.event.value,io=C.paletteHue.get(),je=Q0(io,pt.x,100-pt.y),qe=xM(je);Y(Ge,qe,io,Pe)}},be=()=>{const Pe=[R,V];return(Ge,st)=>{const pt=f(st.event.value),io=C.paletteRgba.get(),je=$x(io),qe=Q0(pt,je.saturation,je.value),Et=xM(qe);Y(Ge,Et,pt,Pe)}},pe=()=>{const Pe=[R,Q,le];return(Ge,st)=>{const pt=st.event.hex,io=XP(pt);Y(Ge,pt,io.hue,Pe)}};return{uid:l.uid,dom:l.dom,components:[T.asSpec(),_.asSpec(),D.asSpec()],behaviours:ze([qt("colour-picker-events",[Te(nO,pe()),Te(rO,ne()),Te(jN,be())]),uo.config({find:Pe=>D.getOpt(Pe)}),Ct.config({mode:"acyclic"})])}};return ui({name:"ColourPicker",configFields:[Re("dom"),ge("onValidHex",G),ge("onInvalidHex",G)],factory:a})},cc={self:()=>uo.config({find:E.some}),memento:t=>uo.config({find:t.getOpt}),childAt:t=>uo.config({find:r=>rl(r.element,t).bind(a=>r.getSystem().getByDom(a).toOptional())})},Ja=At([ge("preprocess",ao),ge("postprocess",ao)]),e6=(t,r)=>{const a=Os("RepresentingConfigs.memento processors",Ja,r);return Je.config({store:{mode:"manual",getValue:l=>{const u=t.get(l),g=Je.getValue(u);return a.postprocess(g)},setValue:(l,u)=>{const g=a.preprocess(u),f=t.get(l);Je.setValue(f,g)}}})},Pf=(t,r,a)=>Je.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:a}}),t6=(t,r,a)=>Pf(t,l=>r(l.element),(l,u)=>a(l.element,u)),o6=t=>t6(t,S1,pl),vS=t=>Je.config({store:{mode:"memory",initialValue:t}}),JI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},eF=t=>r=>t.translate(JI[r]),n6=(t,r,a)=>{const l=C=>"tox-"+C,u=lO(eF(r),l),g=C=>{wt(C,Yu,{name:"hex-valid",value:!0})},f=C=>{wt(C,Yu,{name:"hex-valid",value:!1})},y=Eo(u.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:f}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:ze([Pf(a,C=>{const _=y.get(C);return uo.getCurrent(_).bind(T=>Je.getValue(T).hex).map(T=>"#"+dm(T,"#")).getOr("")},(C,_)=>{const T=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,D=E.from(T.exec(_)).bind(V=>xn(V,1)),R=y.get(C);uo.getCurrent(R).fold(()=>{console.log("Can not find form")},V=>{Je.setValue(V,{hex:D.getOr("")}),sv.getField(V,"hex").each(Q=>{vo(Q,ta())})})}),cc.self()])}};var om=tinymce.util.Tools.resolve("tinymce.Resource");const cO=t=>wo(t,"init"),r6=t=>{const r=gn(),a=Eo({dom:{tag:t.tag}}),l=gn();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ze([qt("custom-editor-events",[yn(u=>{a.getOpt(u).each(g=>{(cO(t)?t.init(g.element.dom):om.load(t.scriptId,t.scriptUrl).then(f=>f(g.element.dom,t.settings))).then(f=>{l.on(y=>{f.setValue(y)}),l.clear(),r.set(f)})})})]),Pf(E.none(),()=>r.get().fold(()=>l.get().getOr(""),u=>u.getValue()),(u,g)=>{r.get().fold(()=>l.set(g),f=>f.setValue(g))}),cc.self()]),components:[a.asSpec()]}};var ed=tinymce.util.Tools.resolve("tinymce.util.Tools");const dO=(t,r)=>{const a=ed.explode(r.getOption("images_file_types")),l=u=>ls(a,g=>fr(u.name.toLowerCase(),`.${g.toLowerCase()}`));return qo(Rs(t),l)},tF=(t,r,a)=>{const l=(R,V)=>{V.stop()},u=R=>(V,Q)=>{ct(R,le=>{le(V,Q)})},g=(R,V)=>{var Q;if(!Tt.isDisabled(R)){const le=V.event.raw;y(R,(Q=le.dataTransfer)===null||Q===void 0?void 0:Q.files)}},f=(R,V)=>{const Q=V.event.raw.target;y(R,Q.files)},y=(R,V)=>{V&&(Je.setValue(R,dO(V,r)),wt(R,Ki,{name:t.name}))},C=Eo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ze([qt("input-file-events",[Zm(vd()),Zm(up())])])}),_=R=>({uid:R.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ze([vS(a.getOr([])),cc.self(),Tt.config({}),so.config({toggleClass:"dragenter",toggleOnExecute:!1}),qt("dropzone-events",[Te("dragenter",u([l,so.toggle])),Te("dragleave",u([l,so.toggle])),Te("dragover",l),Te("drop",u([l,g])),Te(Bm(),f)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Un(r.translate("Drop an image here"))]},js.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Un(r.translate("Browse for an image")),C.asSpec()],action:V=>{C.get(V).element.dom.click()},buttonBehaviours:ze([Wn.config({}),Gi.button(r.isDisabled),ss()])})]}]}),T=t.label.map(R=>Ih(R,r)),D=Mo.parts.field({factory:{sketch:_}});return jy(T,D,["tox-form__group--stretched"],[])},oF=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ne(t.items,r.interpreter)}),nF=(t,r)=>{let a=null,l=null;return{cancel:()=>{$n(a)||(clearTimeout(a),a=null,l=null)},throttle:(...u)=>{l=u,$n(a)&&(a=setTimeout(()=>{const g=l;a=null,l=null,t.apply(null,g)},r))}}},rF=(t,r)=>{let a=null;return{cancel:()=>{$n(a)||(clearTimeout(a),a=null)},throttle:(...l)=>{$n(a)&&(a=setTimeout(()=>{a=null,t.apply(null,l)},r))}}},uO=(t,r)=>{let a=null;const l=()=>{$n(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...u)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,u)},r)}}},mO=Qe("alloy-fake-before-tabstop"),gO=Qe("alloy-fake-after-tabstop"),hO=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ze([Pt.config({ignore:!0}),Wn.config({})])}),s6=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[hO([mO]),r,hO([gO])],behaviours:ze([cc.childAt(1)])}),Zd=(t,r)=>{wt(t,$l(),{raw:{which:9,shiftKey:r}})},bS=(t,r)=>{const a=r.element;cr(a,mO)?Zd(t,!0):cr(a,gO)&&Zd(t,!1)},Jy=t=>Uy(t,["."+mO,"."+gO].join(","),Ue),pO=Qe("update-dialog"),fO=Qe("update-title"),vO=Qe("update-body"),yS=Qe("update-footer"),e2=Qe("body-send-message"),Zh=Qe("dialog-focus-shifted"),Bf=ds().browser,av=Bf.isSafari(),a6=Bf.isFirefox(),bO=av||a6,i6=Bf.isChromium(),sF=({scrollTop:t,scrollHeight:r,clientHeight:a})=>Math.ceil(t)+a>=r,l6=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),aF=(t,r)=>{const a=t.body;return E.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!i6&&!av||hn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},c6=(t,r,a)=>{const l=t.dom;E.from(l.contentDocument).fold(a,u=>{let g=0;const f=aF(u,r).map(C=>(g=C.scrollTop,C)).forall(sF),y=()=>{const C=l.contentWindow;hn(C)&&(f?l6(C,"bottom"):!f&&bO&&g!==0&&l6(C,g))};av&&l.addEventListener("load",y,{once:!0}),u.open(),u.write(r),u.close(),av||y()})},iF=It(bO,av?500:200).map(t=>nF(c6,t)),d6=(t,r)=>{const a=Lt(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,u)=>{if(a.get()!==u){const g=l.element,f=()=>Z(g,"srcdoc",u);r?iF.fold(re(c6),y=>y.throttle)(g,u,f):f()}a.set(u)}}},u6=(t,r,a)=>{const l="tox-dialog__iframe",u=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],f={...t.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=d6(a,t.streamContent),C=t.label.map(D=>Ih(D,r)),_=D=>s6(E.from(g),{uid:D.uid,dom:{tag:"iframe",attributes:f,classes:[l,...u]},behaviours:ze([Wn.config({}),Pt.config({}),Pf(a,y.getValue,y.setValue),Ma.config({channels:{[Zh]:{onReceive:(R,V)=>{V.newFocus.each(Q=>{Ss(R.element).each(le=>{(Fo(R.element,Q)?Tn:cn)(le,"tox-navobj-bordered-focus")})})}}}})])}),T=Mo.parts.field({factory:{sketch:_}});return jy(C,T,["tox-form__group--stretched"],[])},lF=t=>new Promise((r,a)=>{const l=()=>{g(),r(t)},u=[pa(t,"load",l),pa(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>ct(u,f=>f.unbind());t.dom.complete&&l()}),m6=(t,r,a,l,u)=>{const g=a*u,f=l*u,y=Math.max(0,t/2-g/2),C=Math.max(0,r/2-f/2);return{left:y.toString()+"px",top:C.toString()+"px",width:g.toString()+"px",height:f.toString()+"px"}},cF=(t,r,a)=>{const l=ar(t),u=sr(t);return Math.min(l/r,u/a,1)},g6=(t,r)=>{const a=Lt(r.getOr({url:""})),l=Eo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(C=>({src:C.url})).getOr({})}}),u=Eo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(C,_)=>{const T={url:_.url};_.zoom.each(R=>T.zoom=R),_.cachedWidth.each(R=>T.cachedWidth=R),_.cachedHeight.each(R=>T.cachedHeight=R),a.set(T);const D=()=>{const{cachedWidth:R,cachedHeight:V,zoom:Q}=T;if(!Hn(R)&&!Hn(V)){if(Hn(Q)){const Oe=cF(C.element,R,V);T.zoom=Oe}const le=m6(ar(C.element),sr(C.element),R,V,T.zoom);u.getOpt(C).each(Oe=>{Bs(Oe.element,le)})}};l.getOpt(C).each(R=>{const V=R.element;_.url!==lt(V,"src")&&(Z(V,"src",_.url),cn(C.element,"tox-imagepreview__loaded")),D(),lF(V).then(Q=>{C.getSystem().isConnected()&&(Tn(C.element,"tox-imagepreview__loaded"),T.cachedWidth=Q.dom.naturalWidth,T.cachedHeight=Q.dom.naturalHeight,D())})})},f={};t.height.each(C=>f.height=C);const y=r.map(C=>({url:C.url,zoom:E.from(C.zoom),cachedWidth:E.from(C.cachedWidth),cachedHeight:E.from(C.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:f,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:ze([cc.self(),Pf(y,()=>a.get(),g)])}},t2=(t,r)=>{const a="tox-label",l=t.align==="center"?[`${a}--center`]:[],u=t.align==="end"?[`${a}--end`]:[],g={dom:{tag:"label",classes:[a,...l,...u]},components:[Un(r.providers.translate(t.label))]},f=Ne(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...f],behaviours:ze([cc.self(),Wt.config({}),o6(E.none()),Ct.config({mode:"acyclic"})])}},h6=Qe("toolbar.button.execute"),p6=t=>ql((r,a)=>{Sl(t,r)(l=>{wt(r,h6,{buttonApi:l}),t.onAction(l)})}),If=Qe("common-button-display-events"),f6={[$a()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Kl()]:["toolbar-button-events",If],[Oa()]:["focusing","alloy.base.behaviour",If]},yO=t=>fe(t.element,"width",Ir(t.element,"width")),v6=(t,r,a)=>Gc(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},r),wS=(t,r)=>v6(t,r,[]),Uh=(t,r)=>v6(t,r,[Wt.config({})]),wO=(t,r,a)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Un(a.translate(t))],behaviours:ze([Wt.config({})])}),qi=Qe("update-menu-text"),Xi=Qe("update-menu-icon"),CS=(t,r,a)=>{const l=Lt(G),u=t.text.map(D=>Eo(wO(D,r,a.providers))),g=t.icon.map(D=>Eo(Uh(D,a.providers.icons))),f=(D,R)=>{const V=Je.getValue(D);return Pt.focus(V),wt(V,"keydown",{raw:R.event.raw}),ac.close(V),E.some(!0)},y=t.role.fold(()=>({}),D=>({role:D})),C=t.tooltip.fold(()=>({}),D=>{const R=a.providers.translate(D);return{title:R,"aria-label":R}}),_=Gc("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},a.providers.icons),T=Qe("common-button-display-events");return Eo(ac.sketch({...t.uid?{uid:t.uid}:{},...y,dom:{tag:"button",classes:[r,`${r}--select`].concat(Ne(t.classes,D=>`${r}--${D}`)),attributes:{...C}},components:X0([g.map(D=>D.asSpec()),u.map(D=>D.asSpec()),E.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(D,R,V)=>{t.searchable&&AB(V)},dropdownBehaviours:ze([...t.dropdownBehaviours,Gi.button(()=>t.disabled||a.providers.isDisabled()),ss(),Gy.config({}),Wt.config({}),qt("dropdown-events",[Mh(t,l),Nh(t,l)]),qt(T,[yn((D,R)=>yO(D))]),qt("menubutton-update-display-text",[Te(qi,(D,R)=>{u.bind(V=>V.getOpt(D)).each(V=>{Wt.set(V,[Un(a.providers.translate(R.event.text))])})}),Te(Xi,(D,R)=>{g.bind(V=>V.getOpt(D)).each(V=>{Wt.set(V,[Uh(R.event.icon,a.providers.icons)])})})])]),eventOrder:ot(f6,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Kl()]:["toolbar-button-events","dropdown-events",T]}),sandboxBehaviours:ze([Ct.config({mode:"special",onLeft:f,onRight:f}),qt("dropdown-sandbox-events",[Te(Ex,(D,R)=>{TE(D),R.stop()}),Te(AD,(D,R)=>{$r(D,R),R.stop()})])]),lazySink:a.getSink,toggleClass:`${r}--active`,parts:{menu:{..._x(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:qM,onCollapseMenu:(D,R,V)=>{xo.getHighlighted(V).each(Q=>{qM(D,V,Q)})},onDehighlightItem:TB}},getAnchorOverrides:()=>({maxHeightFunction:(D,R)=>{zw()(D,R-10)}}),fetch:D=>$s.nu(oo(t.fetch,D))})).asSpec()},b6=t=>Kt(t),CO=t=>t.type==="separator",xO=t=>wo(t,"getSubmenuItems"),y6={type:"separator"},xS=(t,r)=>{const a=Io(t,(l,u)=>b6(u)?u===""?l:u==="|"?l.length>0&&!CO(l[l.length-1])?l.concat([y6]):l:wo(r,u.toLowerCase())?l.concat([r[u.toLowerCase()]]):l:l.concat([u]),[]);return a.length>0&&CO(a[a.length-1])&&a.pop(),a},w6=(t,r)=>{const a=t.getSubmenuItems(),l=x6(a,r),u=ot(l.menus,{[t.value]:l.items}),g=ot(l.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:g}},C6=t=>{const r=nt(t,"value").getOrThunk(()=>Qe("generated-menu-item"));return ot({value:r},t)},x6=(t,r)=>{const a=xS(Kt(t)?t.split(" "):t,r);return Pn(a,(l,u)=>{if(xO(u)){const g=C6(u),f=w6(g,r);return{menus:ot(l.menus,f.menus),items:[f.item,...l.items],expansions:ot(l.expansions,f.expansions)}}else return{...l,items:[u,...l.items]}},{menus:{},expansions:{},items:[]})},dF=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),uF=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),iv=(t,r,a,l)=>{const u=Qe("primary-menu"),g=x6(t,a.shared.providers.menuItems());if(g.items.length===0)return E.none();const f=dF(l),y=XM(u,g.items,r,a,l.isHorizontalMenu,f),C=uF(l),_=an(g.menus,(D,R)=>XM(R,D,r,a,!1,C)),T=ot(_,Hi(u,y));return E.from(wf.tieredData(u,T,g.expansions))},SO=t=>!wo(t,"items"),kO="data-value",_O=(t,r,a,l)=>Ne(a,u=>SO(u)?{type:"togglemenuitem",text:u.text,value:u.value,active:u.value===l,onAction:()=>{Je.setValue(t,u.value),wt(t,Ki,{name:r}),Pt.focus(t)}}:{type:"nestedmenuitem",text:u.text,getSubmenuItems:()=>_O(t,r,u.items,l)}),EO=(t,r)=>Kn(t,a=>SO(a)?It(a.value===r,a):EO(a.items,r)),mF=(t,r,a)=>{const l=r.shared.providers,u=a.bind(C=>EO(t.items,C)).orThunk(()=>qr(t.items).filter(SO)),g=t.label.map(C=>Ih(C,l)),f=Mo.parts.field({dom:{},factory:{sketch:C=>CS({uid:C.uid,text:u.map(_=>_.text),icon:E.none(),tooltip:t.label,role:E.none(),fetch:(_,T)=>{const D=_O(_,t.name,t.items,Je.getValue(_));T(iv(D,Bd.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:E.none()}))},onSetup:re(G),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Wn.config({}),Pf(u.map(_=>_.value),_=>lt(_.element,kO),(_,T)=>{EO(t.items,T).each(D=>{Z(_.element,kO,D.value),wt(_,qi,{text:D.text})})})]},"tox-listbox",r.shared)}}),y={dom:{tag:"div",classes:["tox-listboxfield"]},components:[f]};return Mo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:$t([g.toArray(),[y]]),fieldBehaviours:ze([Tt.config({disabled:re(!t.enabled),onDisabled:C=>{Mo.getField(C).each(Tt.disable)},onEnabled:C=>{Mo.getField(C).each(Tt.enable)}})])})},gF=(t,r)=>({dom:{tag:"div",classes:t.classes},components:Ne(t.items,r.shared.interpreter)}),SS=(t,r)=>{const a=Ne(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),l=t.data.map(u=>Hi("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Jn(t.selectBehaviours,[Pt.config({}),Je.config({store:{mode:"manual",getValue:u=>Ii(u.element),setValue:(u,g)=>{const f=qr(t.options);Ut(t.options,y=>y.value===g).isSome()?Xl(u.element,g):u.element.dom.selectedIndex===-1&&g===""&&f.each(y=>Xl(u.element,y.value))},...l}})])}},hF=ui({name:"HtmlSelect",configFields:[Re("options"),Nr("selectBehaviours",[Pt,Je]),ge("selectClasses",[]),ge("selectAttributes",{}),_o("data")],factory:SS}),pF=(t,r,a)=>{const l=Ne(t.items,C=>({text:r.translate(C.text),value:C.value})),u=t.label.map(C=>Ih(C,r)),g=Mo.parts.field({dom:{},...a.map(C=>({data:C})).getOr({}),selectAttributes:{size:t.size},options:l,factory:hF,selectBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled()}),Wn.config({}),qt("selectbox-change",[Te(Bm(),(C,_)=>{wt(C,Ki,{name:t.name})})])])}),f=t.size>1?E.none():E.some(Gc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:$t([[g],f.toArray()])};return Mo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:$t([u.toArray(),[y]]),fieldBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:C=>{Mo.getField(C).each(Tt.disable)},onEnabled:C=>{Mo.getField(C).each(Tt.enable)}}),ss()])})},S6=re([ge("field1Name","field1"),ge("field2Name","field2"),Xa("onLockedChange"),qm(["lockClass"]),ge("locked",!1),zi.field("coupledFieldBehaviours",[uo,Je])]),k6=(t,r,a)=>Go(t,r,a).bind(uo.getCurrent),_6=(t,r)=>Us({factory:Mo,name:t,overrides:a=>({fieldBehaviours:ze([qt("coupled-input-behaviour",[Te(ta(),l=>{k6(l,a,r).each(u=>{Go(l,a,"lock").each(g=>{so.isOn(g)&&a.onLockedChange(l,u,g)})})})])])})}),fF=re([_6("field1","field2"),_6("field2","field1"),Us({factory:js,schema:[Re("dom")],name:"lock",overrides:t=>({buttonBehaviours:ze([so.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),OO=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,behaviours:zi.augment(t.coupledFieldBehaviours,[uo.config({find:E.some}),Je.config({store:{mode:"manual",getValue:u=>{const g=iy(u,t,["field1","field2"]);return{[t.field1Name]:Je.getValue(g.field1()),[t.field2Name]:Je.getValue(g.field2())}},setValue:(u,g)=>{const f=iy(u,t,["field1","field2"]);Gs(g,t.field1Name)&&Je.setValue(f.field1(),g[t.field1Name]),Gs(g,t.field2Name)&&Je.setValue(f.field2(),g[t.field2Name])}}})]),apis:{getField1:u=>Go(u,t,"field1"),getField2:u=>Go(u,t,"field2"),getLock:u=>Go(u,t,"lock")}}),kl=ra({name:"FormCoupledInputs",configFields:S6(),partFields:fF(),factory:OO,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),E6=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in r?r[u]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},TO=t=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(r!==null){const a=parseFloat(r[1]),l=r[2];return Gt.value({value:a,unit:l})}else return Gt.error(t)},O6=(t,r)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>wo(a,u);return t.unit===r?E.some(t.value):l(t.unit)&&l(r)?a[t.unit]===a[r]?E.some(t.value):E.some(t.value/a[t.unit]*a[r]):E.none()},AO=t=>E.none(),T6=(t,r)=>a=>O6(a,r).map(l=>({value:l*t,unit:r})),A6=(t,r)=>{const a=TO(t).toOptional(),l=TO(r).toOptional();return ol(a,l,(u,g)=>O6(u,g.unit).map(f=>g.value/f).map(f=>T6(f,g.unit)).getOr(AO)).getOr(AO)},vF=(t,r)=>{let a=AO;const l=Qe("ratio-event"),u=D=>Gc(D,{tag:"span",classes:["tox-icon","tox-lock-icon__"+D]},r.icons),g=kl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[u("lock"),u("unlock")],buttonBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled()}),ss(),Wn.config({})])}),f=D=>({dom:{tag:"div",classes:["tox-form__group"]},components:D}),y=D=>Mo.parts.field({factory:Oh,inputClasses:["tox-textfield"],inputBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled()}),ss(),Wn.config({}),qt("size-input-events",[Te(Dc(),(R,V)=>{wt(R,l,{isField1:D})}),Te(Bm(),(R,V)=>{wt(R,Ki,{name:t.name})})])]),selectOnFocus:!1}),C=D=>({dom:{tag:"label",classes:["tox-label"]},components:[Un(r.translate(D))]}),_=kl.parts.field1(f([Mo.parts.label(C("Width")),y(!0)])),T=kl.parts.field2(f([Mo.parts.label(C("Height")),y(!1)]));return kl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,T,f([C(Qw),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(D,R,V)=>{TO(Je.getValue(D)).each(Q=>{a(Q).each(le=>{Je.setValue(R,E6(le))})})},coupledFieldBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:D=>{kl.getField1(D).bind(Mo.getField).each(Tt.disable),kl.getField2(D).bind(Mo.getField).each(Tt.disable),kl.getLock(D).each(Tt.disable)},onEnabled:D=>{kl.getField1(D).bind(Mo.getField).each(Tt.enable),kl.getField2(D).bind(Mo.getField).each(Tt.enable),kl.getLock(D).each(Tt.enable)}}),ss(),qt("size-input-events2",[Te(l,(D,R)=>{const V=R.event.isField1,Q=V?kl.getField1(D):kl.getField2(D),le=V?kl.getField2(D):kl.getField1(D),Oe=Q.map(Je.getValue).getOr(""),Y=le.map(Je.getValue).getOr("");a=A6(Oe,Y)})])])})},bF=(t,r,a)=>{const l=Jc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Un(r.translate(t.label))]}),u=Jc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Jc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Jc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:re(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,u,g],sliderBehaviours:ze([cc.self(),Pt.config({})]),onChoose:(f,y,C)=>{wt(f,Ki,{name:t.name,value:C})}})},yF=(t,r)=>{const a=y=>({dom:{tag:"th",innerHtml:r.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ne(y,a)}]}),u=y=>({dom:{tag:"td",innerHtml:r.translate(y)}}),g=y=>({dom:{tag:"tr"},components:Ne(y,u)}),f=y=>({dom:{tag:"tbody"},components:Ne(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),f(t.cells)],behaviours:ze([Wn.config({}),Pt.config({})])}},D6=(t,r)=>{const a=t.label.map(R=>Ih(R,r)),l=[Tt.config({disabled:()=>t.disabled||r.isDisabled()}),ss(),Ct.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:R=>(vo(R,$y),E.some(!0))}),qt("textfield-change",[Te(ta(),(R,V)=>{wt(R,Ki,{name:t.name})}),Te(v1(),(R,V)=>{wt(R,Ki,{name:t.name})})]),Wn.config({})],u=t.validation.map(R=>Qu.config({getRoot:V=>Ss(V.element),invalidClass:"tox-invalid",validator:{validate:V=>{const Q=Je.getValue(V),le=R.validator(Q);return $s.pure(le===!0?Gt.value(Q):Gt.error(le))},validateOnLoad:R.validateOnLoad}})).toArray(),g=t.placeholder.fold(re({}),R=>({placeholder:r.translate(R)})),f=t.inputMode.fold(re({}),R=>({inputmode:R})),y={...g,...f},C=Mo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(R=>({data:R})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:ze($t([l,u])),selectOnFocus:!1,factory:Oh}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[C]}:C,T=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),D=[Tt.config({disabled:()=>t.disabled||r.isDisabled(),onDisabled:R=>{Mo.getField(R).each(Tt.disable)},onEnabled:R=>{Mo.getField(R).each(Tt.enable)}}),ss()];return jy(a,_,T,D)},M6=(t,r,a)=>D6({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:E.none(),maximized:t.maximized,data:a},r),wF=(t,r,a)=>D6({name:t.name,multiline:!0,label:t.label,inputMode:E.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:E.none(),maximized:t.maximized,data:a},r),lv=(t,r)=>r.getAnimationRoot.fold(()=>t.element,a=>a(t)),bg=t=>t.dimension.property,Ff=(t,r)=>t.dimension.getDimension(r),kS=(t,r)=>{const a=lv(t,r);Ta(a,[r.shrinkingClass,r.growingClass])},DO=(t,r)=>{cn(t.element,r.openClass),Tn(t.element,r.closedClass),fe(t.element,bg(r),"0px"),yc(t.element)},MO=(t,r)=>{cn(t.element,r.closedClass),Tn(t.element,r.openClass),So(t.element,bg(r))},N6=(t,r,a,l)=>{a.setCollapsed(),fe(t.element,bg(r),Ff(r,t.element)),kS(t,r),DO(t,r),r.onStartShrink(t),r.onShrunk(t)},CF=(t,r,a,l)=>{const u=l.getOrThunk(()=>Ff(r,t.element));a.setCollapsed(),fe(t.element,bg(r),u),yc(t.element);const g=lv(t,r);cn(g,r.growingClass),Tn(g,r.shrinkingClass),DO(t,r),r.onStartShrink(t)},R6=(t,r,a)=>{const l=Ff(r,t.element);(l==="0px"?N6:CF)(t,r,a,E.some(l))},L6=(t,r,a)=>{const l=lv(t,r),u=cr(l,r.shrinkingClass),g=Ff(r,t.element);MO(t,r);const f=Ff(r,t.element);(u?()=>{fe(t.element,bg(r),g),yc(t.element)}:()=>{DO(t,r)})(),cn(l,r.shrinkingClass),Tn(l,r.growingClass),MO(t,r),fe(t.element,bg(r),f),a.setExpanded(),r.onStartGrow(t)},NO=(t,r,a)=>{if(a.isExpanded()){So(t.element,bg(r));const l=Ff(r,t.element);fe(t.element,bg(r),l)}},xF=(t,r,a)=>{a.isExpanded()||L6(t,r,a)},SF=(t,r,a)=>{a.isExpanded()&&R6(t,r,a)},kF=(t,r,a)=>{a.isExpanded()&&N6(t,r,a)},o2=(t,r,a)=>a.isExpanded(),RO=(t,r,a)=>a.isCollapsed(),H6=(t,r,a)=>{const l=lv(t,r);return cr(l,r.growingClass)===!0},P6=(t,r,a)=>{const l=lv(t,r);return cr(l,r.shrinkingClass)===!0};var LO=Object.freeze({__proto__:null,refresh:NO,grow:xF,shrink:SF,immediateShrink:kF,hasGrown:o2,hasShrunk:RO,isGrowing:H6,isShrinking:P6,isTransitioning:(t,r,a)=>H6(t,r)||P6(t,r),toggleGrow:(t,r,a)=>{(a.isExpanded()?R6:L6)(t,r,a)},disableTransitions:kS,immediateGrow:(t,r,a)=>{a.isExpanded()||(MO(t,r),fe(t.element,bg(r),Ff(r,t.element)),kS(t,r),a.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),_F=Object.freeze({__proto__:null,exhibit:(t,r,a)=>{const l=r.expanded;return ai(l?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:Hi(r.dimension.property,"0px")})},events:(t,r)=>on([Lc(Im(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(kS(a,t),r.isExpanded()&&So(a.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),HO=[Re("closedClass"),Re("openClass"),Re("shrinkingClass"),Re("growingClass"),_o("getAnimationRoot"),mo("onShrunk"),mo("onStartShrink"),mo("onGrown"),mo("onStartGrow"),ge("expanded",!1),Dr("dimension",fo("property",{width:[ce("property","width"),ce("getDimension",t=>ar(t)+"px")],height:[ce("property","height"),ce("getDimension",t=>sr(t)+"px")]}))],B6=Object.freeze({__proto__:null,init:t=>{const r=Lt(t.expanded),a=()=>"expanded: "+r.get();return Ka({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:oo(r.set,!1),setExpanded:oo(r.set,!0),readState:a})}});const Yi=os({fields:HO,name:"sliding",active:_F,apis:LO,state:B6}),I6=t=>({isEnabled:()=>!Tt.isDisabled(t),setEnabled:r=>Tt.set(t,!r),setActive:r=>{const a=t.element;r?(Tn(a,"tox-tbtn--enabled"),Z(a,"aria-pressed",!0)):(cn(a,"tox-tbtn--enabled"),Co(a,"aria-pressed"))},isActive:()=>cr(t.element,"tox-tbtn--enabled"),setText:r=>{wt(t,qi,{text:r})},setIcon:r=>wt(t,Xi,{icon:r})}),cv=(t,r,a,l,u=!0)=>CS({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(g,f)=>{const y={pattern:t.search.isSome()?DB(g):""};t.fetch(C=>{f(iv(C,Bd.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},y,I6(g))},onSetup:t.onSetup,getApi:I6,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...u?[Wn.config({})]:[]]},r,a.shared),F6=(t,r,a)=>{const l=g=>f=>{const y=!f.isActive();f.setActive(y),g.storage.set(y),a.shared.getSink().each(C=>{r().getOpt(C).each(_=>{Na(_.element),wt(_,Yu,{name:g.name,value:g.storage.get()})})})},u=g=>f=>{f.setActive(g.storage.get())};return g=>{g(Ne(t,f=>{const y=f.text.fold(()=>({}),C=>({text:C}));return{type:f.type,active:!1,...y,onAction:l(f),onSetup:u(f)}}))}},V6=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Un(t)]}),PO=Qe("leaf-label-event-id"),_S=({leaf:t,onLeafAction:r,visible:a,treeId:l,selectedId:u,backstage:g})=>{const f=t.menu.map(C=>cv(C,"tox-mbtn",g,E.none(),a)),y=[V6(t.title)];return f.each(C=>y.push(C)),js.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:C=>{r(t.id),C.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[$l()]:[PO,"keying"]},buttonBehaviours:ze([...a?[Wn.config({})]:[],so.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ma.config({channels:{[`update-active-item-${l}`]:{onReceive:(C,_)=>{(_.value===t.id?so.on:so.off)(C)}}}}),qt(PO,[yn((C,_)=>{u.each(T=>{(T===t.id?so.on:so.off)(C)})}),Te($l(),(C,_)=>{const T=_.event.raw.code==="ArrowLeft",D=_.event.raw.code==="ArrowRight";T?(kd(C.element,".tox-tree--directory").each(R=>{C.getSystem().getByDom(R).each(V=>{H1(R,".tox-tree--directory__label").each(Q=>{V.getSystem().getByDom(Q).each(Pt.focus)})})}),_.stop()):D&&_.stop()})])])})},EF=(t,r,a)=>Gc(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},r),z6=(t,r)=>EF(t,r,[]),BO=Qe("directory-label-event-id"),Z6=({directory:t,visible:r,noChildren:a,backstage:l})=>{const u=t.menu.map(y=>cv(y,"tox-mbtn",l,E.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[z6("chevron-right",l.shared.providers.icons)]},V6(t.title)];u.each(y=>{g.push(y)});const f=y=>{kd(y.element,".tox-tree--directory").each(C=>{y.getSystem().getByDom(C).each(_=>{const T=!so.isOn(_);so.toggle(_),wt(y,"expand-tree-node",{expanded:T,node:t.id})})})};return js.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:g,action:f,eventOrder:{[$l()]:[BO,"keying"]},buttonBehaviours:ze([...r?[Wn.config({})]:[],qt(BO,[Te($l(),(y,C)=>{const _=C.event.raw.code==="ArrowRight",T=C.event.raw.code==="ArrowLeft";_&&a&&C.stop(),(_||T)&&kd(y.element,".tox-tree--directory").each(D=>{y.getSystem().getByDom(D).each(R=>{!so.isOn(R)&&_||so.isOn(R)&&T?(f(y),C.stop()):T&&!so.isOn(R)&&(kd(R.element,".tox-tree--directory").each(V=>{H1(V,".tox-tree--directory__label").each(Q=>{R.getSystem().getByDom(Q).each(Pt.focus)})}),C.stop())})})})])])})},OF=({children:t,onLeafAction:r,visible:a,treeId:l,expandedIds:u,selectedId:g,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?_S({leaf:y,selectedId:g,onLeafAction:r,visible:a,treeId:l,backstage:f}):IO({directory:y,expandedIds:u,selectedId:g,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:f})),behaviours:ze([Yi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Wt.config({})])}),TF=Qe("directory-event-id"),IO=({directory:t,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:u,expandedIds:g,selectedId:f})=>{const{children:y}=t,C=Lt(g),_=D=>y.map(R=>R.type==="leaf"?_S({leaf:R,selectedId:f,onLeafAction:r,visible:D,treeId:l,backstage:u}):IO({directory:R,expandedIds:C.get(),selectedId:f,onLeafAction:r,labelTabstopping:D,treeId:l,backstage:u})),T=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Z6({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),OF({children:y,expandedIds:g,selectedId:f,onLeafAction:r,visible:T,treeId:l,backstage:u})],behaviours:ze([qt(TF,[yn((D,R)=>{so.set(D,T)}),Te("expand-tree-node",(D,R)=>{const{expanded:V,node:Q}=R.event;C.set(V?[...C.get(),Q]:C.get().filter(le=>le!==Q))})]),so.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,R)=>{const V=D.components()[1],Q=_(R);R?Yi.grow(V):Yi.shrink(V),Wt.set(V,Q)}})])}},U6=Qe("tree-event-id"),AF=(t,r)=>{const a=t.onLeafAction.getOr(G),l=t.onToggleExpand.getOr(G),u=t.defaultExpandedIds,g=Lt(u),f=Lt(t.defaultSelectedId),y=Qe("tree-id"),C=(_,T)=>t.items.map(D=>D.type==="leaf"?_S({leaf:D,selectedId:_,onLeafAction:a,visible:!0,treeId:y,backstage:r}):IO({directory:D,selectedId:_,onLeafAction:a,expandedIds:T,labelTabstopping:!0,treeId:y,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:C(f.get(),g.get()),behaviours:ze([Ct.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),qt(U6,[Te("expand-tree-node",(_,T)=>{const{expanded:D,node:R}=T.event;g.set(D?[...g.get(),R]:g.get().filter(V=>V!==R)),l(g.get(),{expanded:D,node:R})})]),Ma.config({channels:{[`update-active-item-${y}`]:{onReceive:(_,T)=>{f.set(E.some(T.value)),Wt.set(_,C(E.some(T.value),g.get()))}}}}),Wt.config({})])}};var W6=Object.freeze({__proto__:null,events:(t,r)=>{const a=t.stream.streams.setup(t,r);return on([Te(t.event,a),Ga(()=>r.cancel())].concat(t.cancelEvent.map(l=>[Te(l,()=>r.cancel())]).getOr([])))}});const j6=t=>{const r=Lt(null);return Ka({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:a=>{r.set(a)},cancel:()=>{const a=r.get();a!==null&&a.cancel()}})};var DF=Object.freeze({__proto__:null,throttle:j6,init:t=>t.stream.streams.state(t)});const FO=(t,r)=>{const a=t.stream,l=uO(t.onStream,a.delay);return r.setTimer(l),(u,g)=>{l.throttle(u,g),a.stopEvent&&g.stop()}};var MF=[Dr("stream",fo("mode",{throttle:[Re("delay"),ge("stopEvent",!0),ce("streams",{setup:FO,state:j6})]})),ge("event","input"),_o("cancelEvent"),Xa("onStream")];const VO=os({fields:MF,name:"streaming",active:W6,state:DF}),ES=(t,r,a)=>{const l=Je.getValue(a);Je.setValue(r,l),$6(r)},zO=(t,r)=>{const a=t.element,l=Ii(a),u=a.dom;lt(a,"type")!=="number"&&r(u,l)},$6=t=>{zO(t,(r,a)=>r.setSelectionRange(a.length,a.length))},G6=(t,r)=>{zO(t,(a,l)=>a.setSelectionRange(r,l.length))},NF=(t,r,a)=>{if(t.selectsOver){const l=Je.getValue(r),u=t.getDisplayText(l),g=Je.getValue(a);return t.getDisplayText(g).indexOf(u)===0?E.some(()=>{ES(t,r,a),G6(r,u.length)}):E.none()}else return E.none()},OS=re("alloy.typeahead.itemexecute"),RF=(t,r,a,l)=>{const u=(D,R,V)=>{t.previewing.set(!1);const Q=er.getCoupled(D,"sandbox");if(Yt.isOpen(Q))uo.getCurrent(Q).each(le=>{xo.getHighlighted(le).fold(()=>{V(le)},()=>{C1(Q,le.element,"keydown",R)})});else{const le=Oe=>{uo.getCurrent(Oe).each(V)};Yx(t,f(D),D,Q,l,le,Qa.HighlightMenuAndItem).get(G)}},g=kf(t),f=D=>R=>R.map(V=>{const Q=ki(V.menus),le=Ce(Q,Oe=>qo(Oe.items,Y=>Y.type==="item"));return Je.getState(D).update(Ne(le,Oe=>Oe.data)),V}),y=D=>uo.getCurrent(D),C="typeaheadevents",_=[Pt.config({}),Je.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:D=>Ii(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,R)=>{Xl(D.element,t.model.getDisplayText(R))},...t.initialData.map(D=>Hi("initialValue",D)).getOr({})}}),VO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(D,R)=>{const V=er.getCoupled(D,"sandbox");if(Pt.isFocused(D)&&Ii(D.element).length>=t.minChars){const Q=y(V).bind(Oe=>xo.getHighlighted(Oe).map(Je.getValue));t.previewing.set(!0);const le=Oe=>{y(V).each(Y=>{Q.fold(()=>{t.model.selectsOver&&xo.highlightFirst(Y)},ne=>{xo.highlightBy(Y,be=>Je.getValue(be).value===ne.value),xo.getHighlighted(Y).orThunk(()=>(xo.highlightFirst(Y),E.none()))})})};Yx(t,f(D),D,V,l,le,Qa.HighlightJustMenu).get(G)}},cancelEvent:Vm()}),Ct.config({mode:"special",onDown:(D,R)=>(u(D,R,xo.highlightFirst),E.some(!0)),onEscape:D=>{const R=er.getCoupled(D,"sandbox");return Yt.isOpen(R)?(Yt.close(R),E.some(!0)):E.none()},onUp:(D,R)=>(u(D,R,xo.highlightLast),E.some(!0)),onEnter:D=>{const R=er.getCoupled(D,"sandbox"),V=Yt.isOpen(R);if(V&&!t.previewing.get())return y(R).bind(Q=>xo.getHighlighted(Q)).map(Q=>(wt(D,OS(),{item:Q}),!0));{const Q=Je.getValue(D);return vo(D,Vm()),t.onExecute(R,D,Q),V&&Yt.close(R),E.some(!0)}}}),so.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),er.config({others:{sandbox:D=>OE(t,D,{onOpen:()=>so.on(D),onClose:()=>{t.lazyTypeaheadComp.get().each(R=>Co(R.element,"aria-activedescendant")),so.off(D)}})}}),qt(C,[yn(D=>{t.lazyTypeaheadComp.set(E.some(D))}),Ga(D=>{t.lazyTypeaheadComp.set(E.none())}),ql(D=>{const R=G;EE(t,f(D),D,l,R,Qa.HighlightMenuAndItem).get(G)}),Te(OS(),(D,R)=>{const V=er.getCoupled(D,"sandbox");ES(t.model,D,R.event.item),vo(D,Vm()),t.onItemExecute(D,V,R.event.item,Je.getValue(D)),Yt.close(V),$6(D)})].concat(t.dismissOnBlur?[Te(Fm(),D=>{const R=er.getCoupled(D,"sandbox");ec(R.element).isNone()&&Yt.close(R)})]:[]))],T={[bd()]:[Je.name(),VO.name(),C],...t.eventOrder};return{uid:t.uid,dom:OD(ot(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Jn(t.typeaheadBehaviours,_)},eventOrder:T}},LF=re([_o("lazySink"),Re("fetch"),ge("minChars",5),ge("responseTime",1e3),mo("onOpen"),ge("getHotspot",E.some),ge("getAnchorOverrides",re({})),ge("layouts",E.none()),ge("eventOrder",{}),Hm("model",{},[ge("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ge("selectsOver",!0),ge("populateFromBrowse",!0)]),mo("onSetValue"),ts("onExecute"),mo("onItemExecute"),ge("inputClasses",[]),ge("inputAttributes",{}),ge("inputStyles",{}),ge("matchWidth",!0),ge("useMinWidth",!1),ge("dismissOnBlur",!0),qm(["openClass"]),_o("initialData"),Nr("typeaheadBehaviours",[Pt,Je,VO,Ct,so,er]),po("lazyTypeaheadComp",()=>Lt(E.none)),po("previewing",()=>Lt(!0))].concat(ED()).concat(Qx())),HF=re([hs({schema:[Gg()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{NF(t.model,u,l).fold(()=>{t.model.selectsOver?(xo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&ES(t.model,u,l),_t(l.element,"id").each(g=>Z(u.element,"aria-activedescendant",g))})},onExecute:(r,a)=>t.lazyTypeaheadComp.get().map(l=>(wt(l,OS(),{item:a}),!0)),onHover:(r,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&ES(t.model,l,a)})}})})]),PF=ra({name:"Typeahead",configFields:LF(),partFields:HF(),factory:RF}),dc=t=>({...t,toCached:()=>dc(t.toCached()),bindFuture:r=>dc(t.bind(a=>a.fold(l=>$s.pure(Gt.error(l)),l=>r(l)))),bindResult:r=>dc(t.map(a=>a.bind(r))),mapResult:r=>dc(t.map(a=>a.map(r))),mapError:r=>dc(t.map(a=>a.mapError(r))),foldResult:(r,a)=>t.map(l=>l.fold(r,a)),withTimeout:(r,a)=>dc($s.nu(l=>{let u=!1;const g=setTimeout(()=>{u=!0,l(Gt.error(a()))},r);t.get(f=>{u||(clearTimeout(g),l(f))})}))}),K6=t=>dc($s.nu(t)),q6=t=>dc($s.pure(Gt.value(t))),X6={nu:K6,wrap:dc,pure:q6,value:q6,error:t=>dc($s.pure(Gt.error(t))),fromResult:t=>dc($s.pure(t)),fromFuture:t=>dc(t.map(Gt.value)),fromPromise:t=>K6(r=>{t.then(a=>{r(Gt.value(a))},a=>{r(Gt.error(a))})})},TS=(t,r,a=[],l,u,g)=>{const f=r.fold(()=>({}),_=>({action:_})),y={buttonBehaviours:ze([Gi.button(()=>!t.enabled||g.isDisabled()),ss(),Wn.config({}),qt("button press",[fp("click"),fp("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...f},C=ot(y,{dom:l});return ot(C,{components:u})},BF=(t,r,a,l=[])=>{const u=t.tooltip.map(C=>({"aria-label":a.translate(C),title:a.translate(C)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:u},f=t.icon.map(C=>wS(C,a.icons)),y=X0([f]);return TS(t,r,l,g,y,a)},ZO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},UO=(t,r,a,l=[],u=[])=>{const g=a.translate(t.text),f=t.icon.map(T=>wS(T,a.icons)),y=[f.getOrThunk(()=>Un(g))],C=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),_={tag:"button",classes:[...ZO(C),...f.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{title:g}};return TS(t,r,l,_,y,a)},Y6=(t,r,a,l=[],u=[])=>{const g=UO(t,E.some(r),a,l,u);return js.sketch(g)},Q6=(t,r)=>a=>{r==="custom"?wt(a,Yu,{name:t,value:{}}):r==="submit"?vo(a,$y):r==="cancel"?vo(a,Fh):console.error("Unknown button type: ",r)},IF=(t,r)=>r==="menu",J6=(t,r)=>r==="custom"||r==="cancel"||r==="submit",eR=(t,r)=>r==="togglebutton",tR=(t,r)=>{var a,l;const u=t.icon.map(Y=>Uh(Y,r.icons)).map(Eo),g=Y=>{wt(Y,Yu,{name:t.name,value:{setIcon:ne=>{u.map(be=>be.getOpt(Y).each(pe=>{Wt.set(pe,[Uh(ne,r.icons)])}))}}})},f=t.buttonType.getOr(t.primary?"primary":"secondary"),y={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:f==="primary",tooltip:E.from(t.tooltip),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1},C=y.tooltip.map(Y=>({"aria-label":r.translate(Y),title:r.translate(Y)})).getOr({}),_=ZO(f??"secondary"),T=t.icon.isSome()&&t.text.isSome(),D={tag:"button",classes:[..._.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...T?["tox-button--icon-and-text"]:[]],attributes:C},R=[],V=r.translate(t.text.getOr("")),Q=Un(V),le=[...X0([u.map(Y=>Y.asSpec())]),...t.text.isSome()?[Q]:[]],Oe=TS(y,E.some(g),R,D,le,r);return js.sketch(Oe)},Vf=(t,r,a)=>{if(IF(t,r)){const l=()=>f,u=t,g={...t,type:"menubutton",search:E.none(),onSetup:y=>(y.setEnabled(t.enabled),G),fetch:F6(u.items,l,a)},f=Eo(cv(g,"tox-tbtn",a,E.none()));return f.asSpec()}else if(J6(t,r)){const l=Q6(t.name,r),u={...t,borderless:!1};return Y6(u,l,a.shared.providers,[])}else{if(eR(t,r))return tR(t,a.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")}},FF=(t,r)=>{const a=Q6(t.name,"custom");return aN(E.none(),Mo.parts.field({factory:js,...UO(t,E.some(a),r,[vS(""),cc.self()])}))},VF={type:"separator"},zF=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:G}),WO=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:G}),oR=t=>Ne(t,zF),ZF=(t,r)=>qo(r,a=>a.type===t),nR=(t,r)=>oR(ZF(t,r)),UF=t=>nR("header",t.targets),rR=t=>nR("anchor",t.targets),sR=t=>E.from(t.anchorTop).map(r=>WO("<top>",r)).toArray(),WF=t=>E.from(t.anchorBottom).map(r=>WO("<bottom>",r)).toArray(),jF=t=>Ne(t,r=>WO(r,r)),aR=t=>Io(t,(r,a)=>r.length===0||a.length===0?r.concat(a):r.concat(VF,a),[]),jO=(t,r)=>{const a=t.toLowerCase();return qo(r,l=>{var u;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,f=(u=l.value)!==null&&u!==void 0?u:"";return Sr(g.toLowerCase(),a)||Sr(f.toLowerCase(),a)})},$F=(t,r,a)=>{var l,u;const g=Je.getValue(r),f=(u=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&u!==void 0?u:g.value;return a.getLinkInformation().fold(()=>[],y=>{const C=jO(f,jF(a.getHistory(t)));return t==="file"?aR([C,jO(f,UF(y)),jO(f,$t([sR(y),rR(y),WF(y)]))]):C})},Vt=Qe("aria-invalid"),n2=(t,r,a,l)=>{const u=r.shared.providers,g=Y=>{const ne=Je.getValue(Y);a.addToHistory(ne.value,t.filetype)},f={...l.map(Y=>({initialData:Y})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":Vt,type:"url"},minChars:0,responseTime:0,fetch:Y=>{const ne=$F(t.filetype,Y,a),be=iv(ne,Bd.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:E.none()});return $s.pure(be)},getHotspot:Y=>V.getOpt(Y),onSetValue:(Y,ne)=>{Y.hasConfigured(Qu)&&Qu.run(Y).get(G)},typeaheadBehaviours:ze([...a.getValidationHandler().map(Y=>Qu.config({getRoot:ne=>Ss(ne.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ne,be)=>{_.getOpt(ne).each(pe=>{Z(pe.element,"title",u.translate(be))})}},validator:{validate:ne=>{const be=Je.getValue(ne);return X6.nu(pe=>{Y({type:t.filetype,url:be.value},Pe=>{if(Pe.status==="invalid"){const Ge=Gt.error(Pe.message);pe(Ge)}else{const Ge=Gt.value(Pe.message);pe(Ge)}})})},validateOnLoad:!1}})).toArray(),Tt.config({disabled:()=>!t.enabled||u.isDisabled()}),Wn.config({}),qt("urlinput-events",[Te(ta(),Y=>{const ne=Ii(Y.element),be=ne.trim();be!==ne&&Xl(Y.element,be),t.filetype==="file"&&wt(Y,Ki,{name:t.name})}),Te(Bm(),Y=>{wt(Y,Ki,{name:t.name}),g(Y)}),Te(v1(),Y=>{wt(Y,Ki,{name:t.name}),g(Y)})])]),eventOrder:{[ta()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Y=>Y.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:_x(!1,1,"normal")},onExecute:(Y,ne,be)=>{wt(ne,$y,{})},onItemExecute:(Y,ne,be,pe)=>{g(Y),wt(Y,Ki,{name:t.name})}},y=Mo.parts.field({...f,factory:PF}),C=t.label.map(Y=>Ih(Y,u)),_=Eo(((Y,ne,be=Y,pe=Y)=>Gc(be,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Y],attributes:{title:u.translate(pe),"aria-live":"polite",...ne.fold(()=>({}),Pe=>({id:Pe}))}},u.icons))("invalid",E.some(Vt),"warning")),T=Eo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),D=a.getUrlPicker(t.filetype),R=Qe("browser.url.event"),V=Eo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,T.asSpec()],behaviours:ze([Tt.config({disabled:()=>!t.enabled||u.isDisabled()})])}),Q=Eo(Y6({name:t.name,icon:E.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:E.none(),borderless:!0},Y=>vo(Y,R),u,[],["tox-browse-url"])),le=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:$t([[V.asSpec()],D.map(()=>Q.asSpec()).toArray()])}),Oe=Y=>{uo.getCurrent(Y).each(ne=>{const be=Je.getValue(ne),pe={fieldname:t.name,...be};D.each(Pe=>{Pe(pe).get(Ge=>{Je.setValue(ne,Ge),wt(Y,Ki,{name:t.name})})})})};return Mo.sketch({dom:nI(),components:C.toArray().concat([le()]),fieldBehaviours:ze([Tt.config({disabled:()=>!t.enabled||u.isDisabled(),onDisabled:Y=>{Mo.getField(Y).each(Tt.disable),Q.getOpt(Y).each(Tt.disable)},onEnabled:Y=>{Mo.getField(Y).each(Tt.enable),Q.getOpt(Y).each(Tt.enable)}}),ss(),qt("url-input-events",[Te(R,Oe)])])})},iR=(t,r)=>{const a=hx(t.icon,r.icons);return Fd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:r.translate(t.iconTooltip)}},action:l=>wt(l,Yu,{name:"alert-banner",value:t.url}),buttonBehaviours:ze([i_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},lR=(t,r)=>{t.dom.checked=r},cR=t=>t.dom.checked,dR=(t,r,a)=>{const l=C=>(C.element.dom.click(),E.some(!0)),u=Mo.parts.field({factory:{sketch:ao},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ze([cc.self(),Tt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:C=>{Ss(C.element).each(_=>Tn(_,"tox-checkbox--disabled"))},onEnabled:C=>{Ss(C.element).each(_=>cn(_,"tox-checkbox--disabled"))}}),Wn.config({}),Pt.config({}),t6(a,cR,lR),Ct.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),qt("checkbox-events",[Te(Bm(),(C,_)=>{wt(C,Ki,{name:t.name})})])])}),g=Mo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Un(r.translate(t.label))],behaviours:ze([Gy.config({})])}),f=C=>Gc(C==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+C]},r.icons),y=Eo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[f("checked"),f("unchecked")]});return Mo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,y.asSpec(),g],fieldBehaviours:ze([Tt.config({disabled:()=>!t.enabled||r.isDisabled()}),ss()])})},uR=t=>t.presets==="presentation"?Fd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Fd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ze([Wn.config({}),Pt.config({})])}),ur=t=>(r,a,l,u)=>nt(a,"name").fold(()=>t(a,u,E.none()),g=>r.field(g,t(a,u,nt(l,g)))),GF=t=>(r,a,l,u)=>{const g=ot(a,{source:"dynamic"});return ur(t)(r,g,l,u)},mR={bar:ur((t,r)=>qB(t,r.shared)),collection:ur((t,r,a)=>dN(t,r.shared.providers,a)),alertbanner:ur((t,r)=>iR(t,r.shared.providers)),input:ur((t,r,a)=>M6(t,r.shared.providers,a)),textarea:ur((t,r,a)=>wF(t,r.shared.providers,a)),label:ur((t,r)=>t2(t,r.shared)),iframe:GF((t,r,a)=>u6(t,r.shared.providers,a)),button:ur((t,r)=>FF(t,r.shared.providers)),checkbox:ur((t,r,a)=>dR(t,r.shared.providers,a)),colorinput:ur((t,r,a)=>pN(t,r.shared,r.colorinput,a)),colorpicker:ur((t,r,a)=>n6(t,r.shared.providers,a)),dropzone:ur((t,r,a)=>tF(t,r.shared.providers,a)),grid:ur((t,r)=>oF(t,r.shared)),listbox:ur((t,r,a)=>mF(t,r,a)),selectbox:ur((t,r,a)=>pF(t,r.shared.providers,a)),sizeinput:ur((t,r)=>vF(t,r.shared.providers)),slider:ur((t,r,a)=>bF(t,r.shared.providers,a)),urlinput:ur((t,r,a)=>n2(t,r,r.urlinput,a)),customeditor:ur(r6),htmlpanel:ur(uR),imagepreview:ur((t,r,a)=>g6(t,a)),table:ur((t,r)=>yF(t,r.shared.providers)),tree:ur((t,r)=>AF(t,r)),panel:ur((t,r)=>gF(t,r))},KF={field:(t,r)=>r,record:re([])},gR=(t,r,a,l)=>{const u=ot(l,{shared:{interpreter:g=>$O(t,g,a,u)}});return $O(t,r,a,u)},$O=(t,r,a,l)=>nt(mR,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),u=>u(t,r,a,l)),GO=(t,r,a)=>$O(KF,t,r,a),nm="layout-inset",AS=t=>t.x,hR=(t,r)=>t.x+t.width/2-r.width/2,KO=(t,r)=>t.x+t.width-r.width,qO=t=>t.y,XO=(t,r)=>t.y+t.height-r.height,pR=(t,r)=>t.y+t.height/2-r.height/2,r2=(t,r,a)=>br(KO(t,r),XO(t,r),a.insetSouthwest(),oa(),"southwest",Ur(t,{right:0,bottom:3}),nm),DS=(t,r,a)=>br(AS(t),XO(t,r),a.insetSoutheast(),F1(),"southeast",Ur(t,{left:1,bottom:3}),nm),s2=(t,r,a)=>br(KO(t,r),qO(t),a.insetNorthwest(),Lp(),"northwest",Ur(t,{right:0,top:2}),nm),a2=(t,r,a)=>br(AS(t),qO(t),a.insetNortheast(),Rp(),"northeast",Ur(t,{left:1,top:2}),nm),td=(t,r,a)=>br(hR(t,r),qO(t),a.insetNorth(),ww(),"north",Ur(t,{top:2}),nm),i2=(t,r,a)=>br(hR(t,r),XO(t,r),a.insetSouth(),mb(),"south",Ur(t,{bottom:3}),nm),fR=(t,r,a)=>br(KO(t,r),pR(t,r),a.insetEast(),gb(),"east",Ur(t,{right:0}),nm),vR=(t,r,a)=>br(AS(t),pR(t,r),a.insetWest(),Cw(),"west",Ur(t,{left:1}),nm),qF=t=>{switch(t){case"north":return td;case"northeast":return a2;case"northwest":return s2;case"south":return i2;case"southeast":return DS;case"southwest":return r2;case"east":return fR;case"west":return vR}},bR=(t,r,a,l,u)=>kb(l).map(qF).getOr(td)(t,r,a,l,u),XF=t=>{switch(t){case"north":return i2;case"northeast":return DS;case"northwest":return r2;case"south":return td;case"southeast":return a2;case"southwest":return s2;case"east":return vR;case"west":return fR}},YF=(t,r,a,l,u)=>kb(l).map(XF).getOr(td)(t,r,a,l,u),dv={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},QF=(t,r,a)=>{const l={maxHeightFunction:Yg()},u=()=>({type:"node",root:fn(Jr(t())),node:E.from(t()),bubble:Bc(12,12,dv),layouts:{onRtl:()=>[a2],onLtr:()=>[s2]},overrides:l}),g=()=>({type:"hotspot",hotspot:r(),bubble:Bc(-12,12,dv),layouts:{onRtl:()=>[As,gs,Wr],onLtr:()=>[gs,As,Wr]},overrides:l});return()=>a()?u():g()},JF=(t,r,a,l)=>{const u={maxHeightFunction:Yg()},g=()=>({type:"node",root:fn(Jr(r())),node:E.from(r()),bubble:Bc(12,12,dv),layouts:{onRtl:()=>[td],onLtr:()=>[td]},overrides:u}),f=()=>t?{type:"node",root:fn(Jr(r())),node:E.from(r()),bubble:Bc(0,-Fl(r()),dv),layouts:{onRtl:()=>[Ds],onLtr:()=>[Ds]},overrides:u}:{type:"hotspot",hotspot:a(),bubble:Bc(0,0,dv),layouts:{onRtl:()=>[Ds],onLtr:()=>[Ds]},overrides:u};return()=>l()?g():f()},e9=(t,r,a)=>{const l=()=>({type:"node",root:fn(Jr(t())),node:E.from(t()),layouts:{onRtl:()=>[td],onLtr:()=>[td]}}),u=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Wr],onLtr:()=>[Wr]}});return()=>a()?l():u()},t9=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const u=l[0],g=l[l.length-1],f={firstCell:Xe.fromDom(u),lastCell:Xe.fromDom(g)};return E.some(f)}return E.some(Ra.range(Xe.fromDom(a.startContainer),a.startOffset,Xe.fromDom(a.endContainer),a.endOffset))}}),o9=t=>r=>({type:"node",root:t(),node:r}),n9=(t,r,a,l)=>{const u=W0(t),g=()=>Xe.fromDom(t.getBody()),f=()=>Xe.fromDom(t.getContentAreaContainer()),y=()=>u||!l();return{inlineDialog:QF(f,r,y),inlineBottomDialog:JF(t.inline,f,a,y),banner:e9(f,r,y),cursor:t9(t,g),node:o9(g)}},r9=t=>(r,a)=>{PM(t)(r,a)},s9=t=>()=>EM(t),yR=t=>r=>Zy(t,r),a9=t=>r=>gE(t,r),wR=t=>({colorPicker:r9(t),hasCustomColors:s9(t),getColors:yR(t),getColorCols:a9(t)}),CR=t=>()=>xx(t),YO=t=>({isDraggableModal:CR(t)}),i9=t=>{const r=Lt(C_(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},QO=t=>Gs(t,"items"),JO=t=>Gs(t,"format"),xR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],SR=t=>wo(t,"items"),l9=t=>wo(t,"block"),c9=t=>wo(t,"inline"),Ud=t=>wo(t,"selector"),l2=t=>Io(t,(r,a)=>{if(SR(a)){const l=l2(a.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:a.title,items:l.formats}])}}else if(c9(a)||l9(a)||Ud(a)){const l=`custom-${Kt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:a}]),formats:r.formats.concat([{title:a.title,format:l,icon:a.icon}])}}else return{...r,formats:r.formats.concat(a)}},{customFormats:[],formats:[]}),MS=(t,r)=>{const a=l2(r),l=u=>{ct(u,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},kR=t=>tD(t).map(r=>{const a=MS(t,r);return oD(t)?xR.concat(a):a}).getOr(xR),eT=t=>{const r=dn(t);return r.length===1&&zo(r,"title")},_R=(t,r,a)=>({...t,type:"formatter",isSelected:r(t.format),getStylePreview:a(t.format)}),NS=(t,r,a,l)=>{const u=C=>_R(C,a,l),g=C=>{const _=y(C.items);return{...C,type:"submenu",getStyleItems:re(_)}},f=C=>{const _=Kt(C.name)?C.name:Qe(C.title),T=`custom-${_}`,D={...C,type:"formatter",format:T,isSelected:a(T),getStylePreview:l(T)};return t.formatter.register(_,D),D},y=C=>Ne(C,_=>QO(_)?g(_):JO(_)?u(_):eT(_)?{..._,type:"separator"}:f(_));return y(r)},ER=t=>{const r=f=>()=>t.formatter.match(f),a=f=>()=>{const y=t.formatter.get(f);return y!==void 0?E.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):E.none()},l=Lt([]),u=Lt([]),g=Lt(!1);return t.on("PreInit",f=>{const y=kR(t),C=NS(t,y,r,a);l.set(C)}),t.on("addStyleModifications",f=>{const y=NS(t,f.items,r,a);u.set(y),g.set(f.replace)}),{getData:()=>{const f=g.get()?[]:l.get(),y=u.get();return f.concat(y)}}},tT=t=>hn(t)&&t.nodeType===1,d9=ed.trim,oT=t=>r=>!!(tT(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),OR=oT("true"),nT=oT("false"),TR=(t,r,a,l,u)=>({type:t,title:r,url:a,level:l,attach:u}),u9=t=>{let r=t;for(;r=r.parentNode;){const a=r.contentEditable;if(a&&a!=="inherit")return OR(r)}return!1},AR=(t,r)=>Ne(Ms(Xe.fromDom(r),t),a=>a.dom),DR=t=>t.innerText||t.textContent,m9=t=>t.id?t.id:Qe("h"),MR=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,NR=t=>MR(t)&&LR(t),RR=t=>t&&/^(H[1-6])$/.test(t.nodeName),LR=t=>u9(t)&&!nT(t),g9=t=>RR(t)&&LR(t),h9=t=>RR(t)?parseInt(t.nodeName.substr(1),10):0,HR=t=>{var r;const a=m9(t),l=()=>{t.id=a};return TR("header",(r=DR(t))!==null&&r!==void 0?r:"","#"+a,h9(t),l)},Wd=t=>{const r=t.id||t.name,a=DR(t);return TR("anchor",a||"#"+r,"#"+r,0,G)},rT=t=>Ne(qo(t,g9),HR),p9=t=>Ne(qo(t,NR),Wd),f9=t=>AR("h1,h2,h3,h4,h5,h6,a:not([href])",t),v9=t=>d9(t.title).length>0,b9={find:t=>{const r=f9(t);return qo(rT(r).concat(p9(r)),v9)}},RS="tinymce-url-history",sT=5,aT=t=>Kt(t)&&/^https?/.test(t),aa=t=>Xt(t)&&t.length<=sT&&el(t,aT),LS=t=>to(t)&&pr(t,r=>!aa(r)).isNone(),PR=()=>{const t=Ph.getItem(RS);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+RS+" was not valid JSON",a),{};throw a}return LS(r)?r:(console.log("Local storage "+RS+" was not valid format",r),{})},HS=t=>{if(!LS(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Ph.setItem(RS,JSON.stringify(t))},y9=t=>{const r=PR();return nt(r,t).getOr([])},w9=(t,r)=>{if(!aT(t))return;const a=PR(),l=nt(a,r).getOr([]),u=qo(l,g=>g!==t);a[r]=[t].concat(u).slice(0,sT),HS(a)},BR=t=>!!t,C9=t=>an(ed.makeMap(t,/[, ]/),BR),iT=t=>E.from(sD(t)),x9=t=>{const r=E.from(aD(t)).filter(BR).map(C9);return iT(t).fold(Ue,a=>r.fold(De,l=>dn(l).length>0?l:!1))},S9=(t,r)=>{const a=x9(t);return is(a)?a?iT(t):E.none():a[r]?iT(t):E.none()},k9=(t,r)=>S9(t,r).map(a=>l=>$s.nu(u=>{const g=(y,C)=>{if(!Kt(y))throw new Error("Expected value to be string");if(C!==void 0&&!to(C))throw new Error("Expected meta to be a object");u({value:y,meta:C})},f={filetype:r,fieldname:l.fieldname,...E.from(l.meta).getOr({})};a.call(t,g,l.value,f)})),lT=t=>E.from(t).filter(Kt).getOrUndefined(),PS=t=>v_(t)?E.some({targets:b9.find(t.getBody()),anchorTop:lT(iD(t)),anchorBottom:lT(lD(t))}):E.none(),_9=t=>E.from(wx(t)),IR=t=>({getHistory:y9,addToHistory:w9,getLinkInformation:()=>PS(t),getValidationHandler:()=>_9(t),getUrlPicker:r=>k9(t,r)}),E9=(t,r,a,l)=>{const u=Lt(!1),g=i9(r),f={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:xl.translate,isDisabled:()=>r.mode.isReadOnly()||!r.ui.isEnabled(),getOption:r.options.get},y=IR(r),C=ER(r),_=wR(r),T=YO(r),D=()=>u.get(),R=Oe=>u.set(Oe),V={shared:{providers:f,anchors:n9(r,a,l,g.isPositionedAtTop),header:g},urlinput:y,styles:C,colorinput:_,dialog:T,isContextMenuOpen:D,setContextMenuState:R},Q={...V,shared:{...V.shared,interpreter:Oe=>GO(Oe,{},Q),getSink:t.popup}},le={...V,shared:{...V.shared,interpreter:Oe=>GO(Oe,{},le),getSink:t.dialog}};return{popup:Q,dialog:le}},FR=(t,r,a)=>{const l=(Ge,st)=>{ct([r,...a],pt=>{pt.broadcastEvent(Ge,st)})},u=(Ge,st)=>{ct([r,...a],pt=>{pt.broadcastOn([Ge],st)})},g=Ge=>u(yl(),{target:Ge.target}),f=Sm(),y=pa(f,"touchstart",g),C=pa(f,"touchmove",Ge=>l(b1(),Ge)),_=pa(f,"touchend",Ge=>l(Hg(),Ge)),T=pa(f,"mousedown",g),D=pa(f,"mouseup",Ge=>{Ge.raw.button===0&&u(Xp(),{target:Ge.target})}),R=Ge=>u(yl(),{target:Xe.fromDom(Ge.target)}),V=Ge=>{Ge.button===0&&u(Xp(),{target:Xe.fromDom(Ge.target)})},Q=()=>{ct(t.editorManager.get(),Ge=>{t!==Ge&&Ge.dispatch("DismissPopups",{relatedTarget:t})})},le=Ge=>l(bn(),Eb(Ge)),Oe=Ge=>{u(Vi(),{}),l(Mc(),Eb(Ge))},Y=Jr(Xe.fromDom(t.getElement())),ne=qg(Y,"scroll",Ge=>{requestAnimationFrame(()=>{if(t.getContainer()!=null){const pt=Tf(t,r.element).map(io=>[io.element,...io.others]).getOr([]);ls(pt,io=>Fo(io,Ge.target))&&(t.dispatch("ElementScroll",{target:Ge.target.dom}),l(V2(),Ge))}})}),be=()=>u(Vi(),{}),pe=Ge=>{Ge.state&&u(yl(),{target:Xe.fromDom(t.getContainer())})},Pe=Ge=>{u(yl(),{target:Xe.fromDom(Ge.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",R),t.on("tap",R),t.on("mouseup",V),t.on("mousedown",Q),t.on("ScrollWindow",le),t.on("ResizeWindow",Oe),t.on("ResizeEditor",be),t.on("AfterProgressState",pe),t.on("DismissPopups",Pe)}),t.on("remove",()=>{t.off("click",R),t.off("tap",R),t.off("mouseup",V),t.off("mousedown",Q),t.off("ScrollWindow",le),t.off("ResizeWindow",Oe),t.off("ResizeEditor",be),t.off("AfterProgressState",pe),t.off("DismissPopups",Pe),T.unbind(),y.unbind(),C.unbind(),_.unbind(),D.unbind(),ne.unbind()}),t.on("detach",()=>{ct([r,...a],yC),ct([r,...a],Ge=>Ge.destroy())})},vs=sf,rm=DC,VR=re([ge("shell",!1),Re("makeItem"),ge("setupItem",G),zi.field("listBehaviours",[Wt])]),O9=di({name:"items",overrides:()=>({behaviours:ze([Wt.config({})])})}),T9=re([O9]),A9=re("CustomList"),zR=(t,r,a,l)=>{const u=(y,C)=>{f(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const T=Wt.contents(_),D=C.length,R=D-T.length,V=R>0?Ko(R,()=>t.makeItem()):[],Q=T.slice(D);ct(Q,Oe=>Wt.remove(_,Oe)),ct(V,Oe=>Wt.append(_,Oe));const le=Wt.contents(_);ct(le,(Oe,Y)=>{t.setupItem(y,Oe,C[Y],Y)})})},g=t.shell?{behaviours:[Wt.config({})],components:[]}:{behaviours:[],components:r},f=y=>t.shell?E.some(y):Go(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Jn(t.listBehaviours,g.behaviours),apis:{setItems:u}}},BS=ra({name:A9(),configFields:VR(),partFields:T9(),factory:zR,apis:{setItems:(t,r,a)=>{t.setItems(r,a)}}}),uv=re([Re("dom"),ge("shell",!0),Nr("toolbarBehaviours",[Wt])]),D9=re([di({name:"groups",overrides:()=>({behaviours:ze([Wt.config({})])})})]),ZR=(t,r,a,l)=>{const u=(y,C)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Wt.set(_,C)})},g=y=>t.shell?E.some(y):Go(y,t,"groups"),f=t.shell?{behaviours:[Wt.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:f.components,behaviours:Jn(t.toolbarBehaviours,f.behaviours),apis:{setGroups:u,refresh:G},domModification:{attributes:{role:"group"}}}},jd=ra({name:"Toolbar",configFields:uv(),partFields:D9(),factory:ZR,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)}}}),M9=G,N9=Ue,UR=re([]);var cT=Object.freeze({__proto__:null,setup:M9,isDocked:N9,getBehaviours:UR});const IS=t=>(Xr(ln(t,"position"),"fixed")?E.none():Pl(t)).orThunk(()=>{const r=Xe.fromTag("span");return cs(t).bind(a=>{ks(a,r);const l=Pl(r);return dl(r),l})}),WR=t=>IS(t).map(Ys).getOrThunk(()=>mn(0,0)),R9=(t,r)=>{const a=t.element;Tn(a,r.transitionClass),cn(a,r.fadeOutClass),Tn(a,r.fadeInClass),r.onShow(t)},L9=(t,r)=>{const a=t.element;Tn(a,r.transitionClass),cn(a,r.fadeInClass),Tn(a,r.fadeOutClass),r.onHide(t)},H9=(t,r)=>t.y<r.bottom&&t.bottom>r.y,dT=(t,r)=>t.y>=r.y,jR=(t,r)=>t.bottom<=r.bottom,mv=(t,r,a)=>({location:"top",leftX:r,topY:a.bounds.y-t.y}),uT=(t,r,a)=>({location:"bottom",leftX:r,bottomY:t.bottom-a.bounds.bottom}),gv=t=>t.box.x-t.win.x,P9=(t,r,a)=>{const l=r.win,u=r.box,g=gv(r);return Kn(t,f=>{switch(f){case"bottom":return jR(u,a.bounds)?E.none():E.some(uT(l,g,a));case"top":return dT(u,a.bounds)?E.none():E.some(mv(l,g,a));default:return E.none()}}).getOr({location:"no-dock"})},mT=(t,r,a)=>el(t,l=>{switch(l){case"bottom":return jR(r,a.bounds);case"top":return dT(r,a.bounds)}}),c2=(t,r)=>{const a=r.optScrollEnv.fold(re(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return mn(t.bounds.x,a)},$R=(t,r)=>{const a=r.optScrollEnv.fold(re(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return mn(t.x,a)},gT=(t,r,a)=>a.getInitialPos().map(l=>{const u=c2(l,r);return{box:ir(u.left,u.top,ar(t),sr(t)),location:l.location}}),hT=(t,r,a,l,u)=>{const g=$R(r,a),f=ir(g.left,g.top,r.width,r.height);l.setInitialPos({style:Il(t),position:Ir(t,"position")||"static",bounds:f,location:u.location})},GR=(t,r,a,l,u)=>{l.getInitialPos().fold(()=>hT(t,r,a,l,u),()=>G)},pT=(t,r,a)=>a.getInitialPos().bind(l=>{var u;switch(a.clearInitialPos(),l.position){case"static":return E.some({morph:"static"});case"absolute":const g=IS(t).getOr(Br()),f=Rn(g),y=(u=g.dom.scrollTop)!==null&&u!==void 0?u:0;return E.some({morph:"absolute",positionCss:bl("absolute",nt(l.style,"left").map(C=>r.x-f.x),nt(l.style,"top").map(C=>r.y-f.y+y),nt(l.style,"right").map(C=>f.right-r.right),nt(l.style,"bottom").map(C=>f.bottom-r.bottom))});default:return E.none()}}),B9=(t,r,a)=>gT(t,r,a).filter(({box:l})=>mT(a.getModes(),l,r)).bind(({box:l})=>pT(t,l,a)),d2=t=>{switch(t.location){case"top":return E.some({morph:"fixed",positionCss:bl("fixed",E.some(t.leftX),E.some(t.topY),E.none(),E.none())});case"bottom":return E.some({morph:"fixed",positionCss:bl("fixed",E.some(t.leftX),E.none(),E.none(),E.some(t.bottomY))});default:return E.none()}},FS=(t,r,a)=>{const l=Rn(t),u=Is(),g=P9(a.getModes(),{win:u,box:l},r);return g.location==="top"||g.location==="bottom"?(hT(t,l,r,a,g),d2(g)):E.none()},I9=(t,r,a)=>B9(t,r,a).orThunk(()=>r.optScrollEnv.bind(l=>gT(t,r,a)).bind(({box:l,location:u})=>{const g=Is(),f=gv({win:g,box:l}),y=u==="top"?mv(g,f,r):uT(g,f,r);return d2(y)})),F9=(t,r,a)=>{const l=t.element;return Xr(ln(l,"position"),"fixed")?I9(l,r,a):FS(l,r,a)},hv=(t,r,a)=>{const l=t.element;return gT(l,r,a).bind(({box:u})=>pT(l,u,a))},KR=(t,r,a,l)=>{const u=Rn(t),g=Is(),f=gv({win:g,box:u}),y=l(g,f,r);return y.location==="bottom"||y.location==="top"?(GR(t,u,r,a,y),d2(y)):E.none()},qR=(t,r,a)=>{a.setDocked(!1),ct(["left","right","top","bottom","position"],l=>So(t.element,l)),r.onUndocked(t)},VS=(t,r,a,l)=>{const u=l.position==="fixed";a.setDocked(u),Nw(t.element,l),(u?r.onDocked:r.onUndocked)(t)},zS=(t,r,a,l,u=!1)=>{r.contextual.each(g=>{g.lazyContext(t).each(f=>{const y=H9(f,l.bounds);y!==a.isVisible()&&(a.setVisible(y),u&&!y?(Ln(t.element,[g.fadeOutClass]),g.onHide(t)):(y?R9:L9)(t,g))})})},ZS=(t,r,a,l,u)=>{zS(t,r,a,l,!0),VS(t,r,a,u.positionCss)},V9=(t,r,a,l,u)=>{switch(u.morph){case"static":return qR(t,r,a);case"absolute":return VS(t,r,a,u.positionCss);case"fixed":return ZS(t,r,a,l,u)}},z9=(t,r,a)=>{const l=r.lazyViewport(t);zS(t,r,a,l),F9(t,l,a).each(u=>{V9(t,r,a,l,u)})},Z9=(t,r,a)=>{const l=t.element;a.setDocked(!1);const u=r.lazyViewport(t);hv(t,u,a).each(g=>{switch(g.morph){case"static":{qR(t,r,a);break}case"absolute":{VS(t,r,a,g.positionCss);break}}}),a.setVisible(!0),r.contextual.each(g=>{Ta(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),pv(t,r,a)},pv=(t,r,a)=>{t.getSystem().isConnected()&&z9(t,r,a)},XR=(t,r,a)=>{a.isDocked()&&Z9(t,r,a)},YR=t=>(r,a,l)=>{const u=a.lazyViewport(r);KR(r.element,u,l,t).each(g=>{ZS(r,a,l,u,g)})},U9=YR(mv),W9=YR(uT);var j9=Object.freeze({__proto__:null,refresh:pv,reset:XR,isDocked:(t,r,a)=>a.isDocked(),getModes:(t,r,a)=>a.getModes(),setModes:(t,r,a,l)=>a.setModes(l),forceDockToTop:U9,forceDockToBottom:W9}),$9=Object.freeze({__proto__:null,events:(t,r)=>on([Lc(Im(),(a,l)=>{t.contextual.each(u=>{cr(a.element,u.transitionClass)&&(Ta(a.element,[u.transitionClass,u.fadeInClass]),(r.isVisible()?u.onShown:u.onHidden)(a)),l.stop()})}),Te(bn(),(a,l)=>{pv(a,t,r)}),Te(V2(),(a,l)=>{pv(a,t,r)}),Te(Mc(),(a,l)=>{XR(a,t,r)})])}),G9=[_a("contextual",[lr("fadeInClass"),lr("fadeOutClass"),lr("transitionClass"),vn("lazyContext"),mo("onShow"),mo("onShown"),mo("onHide"),mo("onHidden")]),zn("lazyViewport",()=>({bounds:Is(),optScrollEnv:E.none()})),pd("modes",["top","bottom"],Sn),mo("onDocked"),mo("onUndocked")],QR=Object.freeze({__proto__:null,init:t=>{const r=Lt(!1),a=Lt(!0),l=gn(),u=Lt(t.modes),g=()=>`docked:  ${r.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return Ka({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:g})}});const mr=os({fields:G9,name:"docking",active:$9,apis:j9,state:QR}),zf=re(Qe("toolbar-height-change")),sm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},JR="tox-tinymce--toolbar-sticky-on",US="tox-tinymce--toolbar-sticky-off",e8=(t,r)=>{const a=Or(r),l=bc(r).dom.innerHeight,u=ka(a),g=Xe.fromDom(t.elm),f=_s(g),y=sr(g),C=f.y,_=C+y,T=Ys(r),D=sr(r),R=T.top,V=R+D,Q=Math.abs(R-u.top)<2,le=Math.abs(V-(u.top+l))<2;if(Q&&C<V)Cm(u.left,C-D,a);else if(le&&_>R){const Oe=C-l+y+D;Cm(u.left,Oe,a)}},WS=(t,r)=>zo(mr.getModes(t),r),fT=t=>{const r=l=>Fl(l)+(parseInt(Ir(l,"margin-top"),10)||0)+(parseInt(Ir(l,"margin-bottom"),10)||0),a=t.element;Ss(a).each(l=>{const u="padding-"+mr.getModes(t)[0];if(mr.isDocked(t)){const g=ar(l);fe(a,"width",g+"px"),fe(l,u,r(a)+"px")}else So(a,"width"),So(l,u)})},t8=(t,r)=>{r?(cn(t,sm.fadeOutClass),Ln(t,[sm.transitionClass,sm.fadeInClass])):(cn(t,sm.fadeInClass),Ln(t,[sm.fadeOutClass,sm.transitionClass]))},o8=(t,r)=>{const a=Xe.fromDom(t.getContainer());r?(Tn(a,JR),cn(a,US)):(Tn(a,US),cn(a,JR))},K9=(t,r)=>{const a=Or(r);li(a).filter(l=>!Fo(r,l)).filter(l=>Fo(l,Xe.fromDom(a.dom.body))||xa(t,l)).each(()=>Na(r))},q9=(t,r)=>ec(t).orThunk(()=>r().toOptional().bind(a=>ec(a.element))),X9=(t,r,a)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(mr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(fT)}),t.on("SkinLoaded",()=>{a().each(l=>{mr.isDocked(l)?mr.reset(l):mr.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(mr.reset)})),t.on("AfterScrollIntoView",l=>{a().each(u=>{mr.refresh(u);const g=u.element;N0(g)&&e8(l,g)})}),t.on("PostRender",()=>{o8(t,!1)})},Y9=t=>t().map(mr.isDocked).getOr(!1),Q9=()=>[Ma.config({channels:{[zf()]:{onReceive:fT}}})],n8=(t,r)=>{const a=gn(),l=r.getSink,u=y=>{l().each(C=>y(C.element))},g=y=>{t.inline||fT(y),o8(t,mr.isDocked(y)),y.getSystem().broadcastOn([Vi()],{}),l().each(C=>C.getSystem().broadcastOn([Vi()],{}))},f=t.inline?[]:Q9();return[Pt.config({}),mr.config({contextual:{lazyContext:y=>{const C=Fl(y.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return E.from(_).map(T=>{const D=Rn(Xe.fromDom(T));return Tf(t,y.element).fold(()=>{const R=D.height-C,V=D.y+(WS(y,"top")?0:C);return ir(D.x,V,D.width,R)},R=>{const V=km(D,J0(R)),Q=WS(y,"top")?V.y:V.y+C;return ir(V.x,Q,V.width,V.height-C)})})},onShow:()=>{u(y=>t8(y,!0))},onShown:y=>{u(C=>Ta(C,[sm.transitionClass,sm.fadeInClass])),a.get().each(C=>{K9(y.element,C),a.clear()})},onHide:y=>{q9(y.element,l).fold(a.clear,a.set),u(C=>t8(C,!1))},onHidden:()=>{u(y=>Ta(y,[sm.transitionClass]))},...sm},lazyViewport:y=>Tf(t,y.element).fold(()=>{const C=Is(),_=rD(t),T=C.y+(WS(y,"top")?_:0),D=C.height-(WS(y,"bottom")?_:0);return{bounds:ir(C.x,T,C.width,D),optScrollEnv:E.none()}},C=>({bounds:J0(C),optScrollEnv:E.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:Ys(C.element).top})})),modes:[r.header.getDockingMode()],onDocked:g,onUndocked:g}),...f]};var r8=Object.freeze({__proto__:null,setup:X9,isDocked:Y9,getBehaviours:n8});const s8=t=>{const r=t.editor,a=t.sticky?n8:UR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ze(a(r,t.sharedBackstage))}},jS=At([wr,Dr("items",zr([Wl([Dx,ga("items",Sn)]),Sn]))].concat(G0)),a8=t=>Vn("GroupToolbarButton",jS,t),J9=[Fs("text"),Fs("tooltip"),Fs("icon"),Ri("search",!1,zr([vu,At([Fs("placeholder")])],t=>is(t)?t?E.some({placeholder:E.none()}):E.none():E.some(t))),vn("fetch"),zn("onSetup",()=>G)],i8=At([wr,...J9]),l8=t=>Vn("menubutton",i8,t),eV=At([wr,Nx,ji,Dh,$0,ID,Ah,jl("presets","normal",["normal","color","listpreview"]),W_(1),Th,FD]),tV=t=>Vn("SplitButton",eV,t);var vT=ui({factory:(t,r)=>{const a=(u,g)=>{const f=Ne(g,y=>{const C={type:"menubutton",text:y.text,fetch:T=>{T(y.getItems())}},_=l8(C).mapError(T=>gd(T)).getOrDie();return cv(_,"tox-mbtn",r.backstage,E.some("menuitem"))});Wt.set(u,f)},l={focus:Ct.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:ze([Wt.config({}),qt("menubar-events",[yn(u=>{t.onSetup(u)}),Te(ja(),(u,g)=>{dr(u.element,".tox-mbtn--active").each(f=>{Yl(g.event.target,".tox-mbtn").each(y=>{Fo(f,y)||u.getSystem().getByDom(f).each(C=>{u.getSystem().getByDom(y).each(_=>{ac.expand(_),ac.close(C),Pt.focus(_)})})})})}),Te(gp(),(u,g)=>{g.event.prevFocus.bind(f=>u.getSystem().getByDom(f).toOptional()).each(f=>{g.event.newFocus.bind(y=>u.getSystem().getByDom(y).toOptional()).each(y=>{ac.isOpen(f)&&(ac.expand(y),ac.close(f))})})})]),Ct.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),E.some(!0))}),Wn.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Re("dom"),Re("uid"),Re("onEscape"),Re("backstage"),ge("onSetup",G)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,a)=>{t.setMenus(r,a)}}});const oV="⚡️Upgrade",c8="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",d8=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:c8,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:oV}}]}),u8="container",m8=[Nr("slotBehaviours",[])],g8=t=>"<alloy.field."+t+">",nV=t=>{const r=(()=>{const g=[];return{slot:(f,y)=>(g.push(f),_0(u8,g8(f),y)),record:re(g)}})(),a=t(r),l=r.record(),u=Ne(l,g=>Us({name:g,pname:g8(g)}));return cy(u8,m8,u,rV,a)},rV=(t,r)=>{const a=le=>ay(t),l=(le,Oe)=>Go(le,t,Oe),u=(le,Oe)=>(Y,ne)=>Go(Y,t,ne).map(be=>le(be,ne)).getOr(Oe),g=le=>(Oe,Y)=>{ct(Y,ne=>le(Oe,ne))},f=(le,Oe)=>lt(le.element,"aria-hidden")!=="true",y=(le,Oe)=>{if(!f(le)){const Y=le.element;So(Y,"display"),Co(Y,"aria-hidden"),wt(le,hp(),{name:Oe,visible:!0})}},C=(le,Oe)=>{if(f(le)){const Y=le.element;fe(Y,"display","none"),Z(Y,"aria-hidden","true"),wt(le,hp(),{name:Oe,visible:!1})}},_=u(f,!1),T=u(C),D=g(T),R=le=>D(le,a()),V=u(y),Q={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:T,hideAllSlots:R,showSlot:V};return{uid:t.uid,dom:t.dom,components:r,behaviours:b0(t.slotBehaviours),apis:Q}},Gr={...an({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,a)=>t.getSlot(r,a),isShowing:(t,r,a)=>t.isShowing(r,a),hideSlot:(t,r,a)=>t.hideSlot(r,a),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,a)=>t.showSlot(r,a)},t=>xp(t)),sketch:nV},h8=At([ji,Nx,zn("onShow",G),zn("onHide",G),Ah]),u2=t=>Vn("sidebar",h8,t),$S=t=>{const{sidebars:r}=t.ui.registry.getAll();ct(dn(r),a=>{const l=r[a],u=()=>Xr(E.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(u())},onSetup:g=>{g.setActive(u());const f=()=>g.setActive(u());return t.on("ToggleSidebar",f),()=>{t.off("ToggleSidebar",f)}}})})},p8=t=>({element:()=>t.element.dom}),f8=(t,r)=>{const a=Ne(dn(r),l=>{const u=r[l],g=Js(u2(u));return{name:l,getApi:p8,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ne(a,l=>{const u=Lt(G);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Ry.unnamedEvents([Mh(l,u),Nh(l,u),Te(hp(),(g,f)=>{const y=f.event;Ut(a,C=>C.name===y.name).each(C=>{(y.visible?C.onShow:C.onHide)(C.getApi(g))})})])})})},v8=t=>Gr.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:f8(r,t),slotBehaviours:Ry.unnamedEvents([yn(a=>Gr.hideAllSlots(a))])})),sV=(t,r,a)=>{uo.getCurrent(t).each(l=>{Wt.set(l,[v8(r)]);const u=a==null?void 0:a.toLowerCase();Kt(u)&&wo(r,u)&&uo.getCurrent(l).each(g=>{Gr.showSlot(g,u),Yi.immediateGrow(l),So(l.element,"width"),GS(t.element,"region")})})},GS=(t,r)=>{Z(t,"role",r)},aV=(t,r)=>{uo.getCurrent(t).each(a=>{uo.getCurrent(a).each(l=>{Yi.hasGrown(a)?Gr.isShowing(l,r)?(Yi.shrink(a),GS(t.element,"presentation")):(Gr.hideAllSlots(l),Gr.showSlot(l,r),GS(t.element,"region")):(Gr.hideAllSlots(l),Gr.showSlot(l,r),Yi.grow(a),GS(t.element,"region"))})})},iV=t=>uo.getCurrent(t).bind(r=>Yi.isGrowing(r)||Yi.hasGrown(r)?uo.getCurrent(r).bind(a=>Ut(Gr.getSlotNames(a),l=>Gr.isShowing(a,l))):E.none()),bT=Qe("FixSizeEvent"),Wh=Qe("AutoSizeEvent"),m2=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ze([Wn.config({}),Pt.config({}),Yi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{uo.getCurrent(r).each(Gr.hideAllSlots),vo(r,Wh)},onGrown:r=>{vo(r,Wh)},onStartGrow:r=>{wt(r,bT,{width:ln(r.element,"width").getOr("")})},onStartShrink:r=>{wt(r,bT,{width:ar(r.element)+"px"})}}),Wt.config({}),uo.config({find:r=>{const a=Wt.contents(r);return qr(a)}})])}],behaviours:ze([cc.childAt(0),qt("sidebar-sliding-events",[Te(bT,(r,a)=>{fe(r.element,"width",a.event.width)}),Te(Wh,(r,a)=>{So(r.element,"width")})])])});var yT=Object.freeze({__proto__:null,block:(t,r,a,l)=>{Z(t.element,"aria-busy",!0);const u=r.getRoot(t).getOr(t),g=ze([Ct.config({mode:"special",onTab:()=>E.some(!0),onShiftTab:()=>E.some(!0)}),Pt.config({})]),f=l(u,g),y=u.getSystem().build(f);Wt.append(u,Ts(y)),y.hasConfigured(Ct)&&r.focus&&Ct.focusIn(y),a.isBlocked()||r.onBlock(t),a.blockWith(()=>Wt.remove(u,y))},unblock:(t,r,a)=>{Co(t.element,"aria-busy"),a.isBlocked()&&r.onUnblock(t),a.clear()},isBlocked:(t,r,a)=>a.isBlocked()}),lV=[zn("getRoot",E.none),Zr("focus",!0),mo("onBlock"),mo("onUnblock")],cV=Object.freeze({__proto__:null,init:()=>{const t=$1(),r=a=>{t.set({destroy:a})};return Ka({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const uc=os({fields:lV,name:"blocking",apis:yT,state:cV}),dV=t=>(r,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),fv=t=>uo.getCurrent(t).each(r=>Na(r.element)),b8=(t,r)=>{const a="tabindex",l=`data-mce-${a}`;E.from(t.iframeElement).map(Xe.fromDom).each(u=>{r?(_t(u,a).each(g=>Z(u,l,g)),Z(u,a,-1)):(Co(u,a),_t(u,l).each(g=>{Z(u,a,g),Co(u,l)}))})},uV=(t,r,a,l)=>{const u=r.element;if(b8(t,a),a)uc.block(r,dV(l)),So(u,"display"),Co(u,"aria-hidden"),t.hasFocus()&&fv(r);else{const g=uo.getCurrent(r).exists(f=>ns(f.element));uc.unblock(r),fe(u,"display","none"),Z(u,"aria-hidden","true"),g&&t.focus()}},mV=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ze([Wt.config({}),uc.config({focus:!1}),uo.config({find:r=>qr(r.components())})]),components:[]}),gV=t=>t.type==="focusin",hV=t=>gV(t)?(t.composed?qr(t.composedPath()):E.from(t.target)).map(Xe.fromDom).filter(nr).exists(r=>cr(r,"mce-pastebin")):!1,pV=(t,r,a)=>{const l=Lt(!1),u=gn(),g=y=>{l.get()&&!hV(y)&&(y.preventDefault(),fv(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const f=y=>{y!==l.get()&&(l.set(y),uV(t,r(),y,a.providers),$P(t,y))};t.on("ProgressState",y=>{if(u.on(clearTimeout),Ns(y.time)){const C=ox.setEditorTimeout(t,()=>f(y.state),y.time);u.set(C)}else f(y.state),u.clear()})},fV=(t,r)=>Io(t,(a,l)=>r(l,a.len).fold(re(a),u=>({len:u.finish,list:a.list.concat([u])})),{len:0,list:[]}).list,KS=(t,r,a)=>({within:t,extra:r,withinWidth:a}),wT=(t,r,a)=>{const l=fV(t,(y,C)=>{const _=a(y);return E.some({element:y,start:C,finish:C+_,width:_})}),u=qo(l,y=>y.finish<=r),g=Pn(u,(y,C)=>y+C.width,0),f=l.slice(u.length);return{within:u,extra:f,withinWidth:g}},qS=t=>Ne(t,r=>r.element),vV=(t,r,a)=>{const l=qS(t.concat(r));return KS(l,[],a)},XS=(t,r,a,l)=>{const u=qS(t).concat([a]);return KS(u,qS(r),l)},YS=(t,r,a)=>KS(qS(t),[],a),bV=(t,r,a)=>{const l=wT(r,t,a);return l.extra.length===0?E.some(l):E.none()},yV=(t,r,a,l)=>{const u=bV(t,r,a).getOrThunk(()=>wT(r,t-a(l),a)),g=u.within,f=u.extra,y=u.withinWidth;return f.length===1&&f[0].width<=a(l)?vV(g,f,y):f.length>=1?XS(g,f,l,y):YS(g,f,y)},y8=(t,r)=>{const a=Ne(r,l=>Ts(l));jd.setGroups(t,a)},wV=t=>Kn(t,r=>ec(r.element).bind(a=>r.getSystem().getByDom(a).toOptional())),QS=(t,r,a)=>{const l=r.builtGroups.get();if(l.length===0)return;const u=Zu(t,r,"primary"),g=er.getCoupled(t,"overflowGroup");fe(u.element,"visibility","hidden");const f=l.concat([g]),y=wV(f);a([]),y8(u,f);const C=ar(u.element),_=yV(C,r.builtGroups.get(),T=>ar(T.element),g);_.extra.length===0?(Wt.remove(u,g),a([])):(y8(u,_.within),a(_.extra)),So(u.element,"visibility"),yc(u.element),y.each(Pt.focus)},JS=re([Nr("splitToolbarBehaviours",[er]),po("builtGroups",()=>Lt([]))]),CV=re([qm(["overflowToggledClass"]),Rm("getOverflowBounds"),Re("lazySink"),po("overflowGroups",()=>Lt([])),mo("onOpened"),mo("onClosed")].concat(JS())),CT=re([Us({factory:jd,schema:uv(),name:"primary"}),hs({schema:uv(),name:"overflow"}),hs({name:"overflow-button"}),hs({name:"overflow-group"})]),xT=re((t,r)=>{da(t,Math.floor(r))}),xV=re([qm(["toggledClass"]),Re("lazySink"),vn("fetch"),Rm("getBounds"),_a("fireDismissalEventInstead",[ge("event",Su())]),Ru(),mo("onToggled")]),SV=re([hs({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ze([so.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),hs({factory:jd,schema:uv(),name:"toolbar",overrides:t=>({toolbarBehaviours:ze([Ct.config({mode:"cyclic",onEscape:r=>(Go(r,t,"button").each(Pt.focus),E.none())})])})})]),e4=gn(),kV=(t,r)=>{e4.set(!0),t4(t,r),e4.clear()},t4=(t,r)=>{const a=er.getCoupled(t,"toolbarSandbox");Yt.isOpen(a)?Yt.close(a):Yt.open(a,r.toolbar())},ST=(t,r,a,l)=>{const u=a.getBounds.map(f=>f()),g=a.lazySink(t).getOrDie();zs.positionWithinBounds(g,r,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:xT()}}},u)},kT=(t,r,a,l,u)=>{jd.setGroups(r,u),ST(t,r,a,l),so.on(t)},_V=(t,r,a)=>{const l=pw(),u=(f,y)=>{const C=e4.get().getOr(!1);a.fetch().get(_=>{kT(t,y,a,r.layouts,_),l.link(t.element),C||Ct.focusIn(y)})},g=()=>{so.off(t),e4.get().getOr(!1)||Pt.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:ze([Ct.config({mode:"special",onEscape:f=>(Yt.close(f),E.some(!0))}),Yt.config({onOpen:u,onClose:g,isPartOf:(f,y,C)=>Ed(y,C)||Ed(t,C),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Ma.config({channels:{...m0({isExtraPart:Ue,...a.fireDismissalEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({})}),...$b({doReposition:()=>{Yt.getState(er.getCoupled(t,"toolbarSandbox")).each(f=>{ST(t,f,a,r.layouts)})}})}})])}},jh=ra({name:"FloatingToolbarButton",factory:(t,r,a,l)=>({...js.sketch({...l.button(),action:u=>{t4(u,l)},buttonBehaviours:zi.augment({dump:l.button().buttonBehaviours},[er.config({others:{toolbarSandbox:u=>_V(u,a,t)}})])}),apis:{setGroups:(u,g)=>{Yt.getState(er.getCoupled(u,"toolbarSandbox")).each(f=>{kT(u,f,t,a.layouts,g)})},reposition:u=>{Yt.getState(er.getCoupled(u,"toolbarSandbox")).each(g=>{ST(u,g,t,a.layouts)})},toggle:u=>{t4(u,l)},toggleWithoutFocusing:u=>{kV(u,l)},getToolbar:u=>Yt.getState(er.getCoupled(u,"toolbarSandbox")),isOpen:u=>Yt.isOpen(er.getCoupled(u,"toolbarSandbox"))}}),configFields:xV(),partFields:SV(),apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),EV=re([Re("items"),qm(["itemSelector"]),Nr("tgroupBehaviours",[Ct])]),OV=re([C0({name:"items",unit:"item"})]),TV=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.tgroupBehaviours,[Ct.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),g2=ra({name:"ToolbarGroup",configFields:EV(),partFields:OV(),factory:TV}),w8=t=>Ne(t,r=>Ts(r)),C8=(t,r,a)=>{QS(t,a,l=>{a.overflowGroups.set(l),r.getOpt(t).each(u=>{jh.setGroups(u,w8(l))})})},AV=(t,r,a,l)=>{const u=Eo(jh.sketch({fetch:()=>$s.nu(g=>{g(w8(t.overflowGroups.get()))}),layouts:{onLtr:()=>[gs,As],onRtl:()=>[As,gs],onBottomLtr:()=>[Da,ha],onBottomRtl:()=>[ha,Da]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,f)=>t[f?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.splitToolbarBehaviours,[er.config({others:{overflowGroup:()=>g2.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(g,f)=>{t.builtGroups.set(Ne(f,g.getSystem().build)),C8(g,u,t)},refresh:g=>C8(g,u,t),toggle:g=>{u.getOpt(g).each(f=>{jh.toggle(f)})},toggleWithoutFocusing:g=>{u.getOpt(g).each(jh.toggleWithoutFocusing)},isOpen:g=>u.getOpt(g).map(jh.isOpen).getOr(!1),reposition:g=>{u.getOpt(g).each(f=>{jh.reposition(f)})},getOverflow:g=>u.getOpt(g).bind(jh.getToolbar)},domModification:{attributes:{role:"group"}}}},_T=ra({name:"SplitFloatingToolbar",configFields:CV(),partFields:CT(),factory:AV,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),x8=re([qm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),mo("onOpened"),mo("onClosed")].concat(JS())),DV=re([Us({factory:jd,schema:uv(),name:"primary"}),Us({factory:jd,schema:uv(),name:"overflow",overrides:t=>({toolbarBehaviours:ze([Yi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{Go(r,t,"overflow-button").each(a=>{so.off(a),Pt.focus(a)}),t.onClosed(r)},onGrown:r=>{Ct.focusIn(r),t.onOpened(r)},onStartGrow:r=>{Go(r,t,"overflow-button").each(so.on)}}),Ct.config({mode:"acyclic",onEscape:r=>(Go(r,t,"overflow-button").each(Pt.focus),E.some(!0))})])})}),hs({name:"overflow-button",overrides:t=>({buttonBehaviours:ze([so.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),hs({name:"overflow-group"})]),MV=(t,r)=>Go(t,r,"overflow").map(Yi.hasGrown).getOr(!1),Qi=(t,r)=>{Go(t,r,"overflow-button").bind(()=>Go(t,r,"overflow")).each(a=>{ET(t,r),Yi.toggleGrow(a)})},ET=(t,r)=>{Go(t,r,"overflow").each(a=>{QS(t,r,l=>{const u=Ne(l,g=>Ts(g));jd.setGroups(a,u)}),Go(t,r,"overflow-button").each(l=>{Yi.hasGrown(a)&&so.on(l)}),Yi.refresh(a)})},S8=(t,r,a,l)=>{const u="alloy.toolbar.toggle",g=(f,y)=>{const C=Ne(y,f.getSystem().build);t.builtGroups.set(C)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Jn(t.splitToolbarBehaviours,[er.config({others:{overflowGroup:f=>g2.sketch({...l["overflow-group"](),items:[js.sketch({...l["overflow-button"](),action:y=>{vo(f,u)}})]})}}),qt("toolbar-toggle-events",[Te(u,f=>{Qi(f,t)})])]),apis:{setGroups:(f,y)=>{g(f,y),ET(f,t)},refresh:f=>ET(f,t),toggle:f=>Qi(f,t),isOpen:f=>MV(f,t)},domModification:{attributes:{role:"group"}}}},o4=ra({name:"SplitSlidingToolbar",configFields:x8(),partFields:DV(),factory:S8,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),k8=t=>{const r=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...r},components:[g2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:ze([Wn.config({}),Pt.config({})])}},$h=t=>g2.sketch(k8(t)),_8=(t,r)=>{const a=yn(l=>{const u=Ne(t.initGroups,$h);jd.setGroups(l,u)});return ze([Gi.toolbarButton(t.providers.isDisabled),ss(),Ct.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),qt("toolbar-events",[a])])},h2=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":k8({title:E.none(),items:[]}),"overflow-button":BF({name:"more",icon:E.some("more-drawer"),enabled:!0,tooltip:E.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:E.none(),borderless:!1},E.none(),t.providers)},splitToolbarBehaviours:_8(t,r)}},NV=t=>{const r=h2(t),a=4,l=_T.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return _T.sketch({...r,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,g=_s(u),f=Qr(u),y=_s(f),C=Math.max(f.dom.scrollHeight,y.height);return ir(g.x+a,y.y,g.width-a*2,C)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},n4=t=>{const r=o4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=o4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=h2(t);return o4.sketch({...l,components:[r,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([zf()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([zf()],{type:"closed"}),t.onToggled(u,!1)}})},r4=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return jd.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===hi.scrolling?["tox-toolbar--scrolling"]:[])},components:[jd.parts.groups({})],toolbarBehaviours:_8(t,r)})},E8=[Dh,ji,Fs("tooltip"),jl("buttonType","secondary",["primary","secondary"]),Zr("borderless",!1),vn("onAction")],mc=[...E8,Gu,hd("type",["button"])],RV=[...E8,Zr("active",!1),hd("type",["togglebutton"])],p2={button:mc,togglebutton:RV},O8=[hd("type",["group"]),pd("buttons",[],fo("type",p2))],T8=fo("type",{...p2,group:O8}),LV=At([pd("buttons",[],T8),vn("onShow"),vn("onHide")]),A8=t=>Vn("view",LV,t),HV=(t,r)=>{var a,l;const u=t.type==="togglebutton",g=t.icon.map(ne=>Uh(ne,r.icons)).map(Eo),f=(()=>ne=>{const be=Ge=>{g.map(st=>st.getOpt(ne).each(pt=>{Wt.set(pt,[Uh(Ge,r.icons)])}))},pe=Ge=>{const st=ne.element;Ge?(Tn(st,"tox-button--enabled"),Z(st,"aria-pressed",!0)):(cn(st,"tox-button--enabled"),Co(st,"aria-pressed"))},Pe=()=>cr(ne.element,"tox-button--enabled");if(u)return t.onAction({setIcon:be,setActive:pe,isActive:Pe});if(t.type==="button")return t.onAction({setIcon:be})})(),y={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:E.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=ZO((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),_=u?t.text.map(r.translate):E.some(r.translate(t.text)),T=_.map(Un),D=y.tooltip.or(_).map(ne=>({"aria-label":r.translate(ne),title:r.translate(ne)})).getOr({}),R=g.map(ne=>ne.asSpec()),V=X0([R,T]),Q=t.icon.isSome()&&T.isSome(),le={tag:"button",classes:C.concat(...t.icon.isSome()&&!Q?["tox-button--icon"]:[]).concat(...Q?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:D},Oe=[],Y=TS(y,E.some(f),Oe,le,V,r);return js.sketch(Y)},D8=(t,r)=>HV(t,r),PV=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ne(t.buttons,a=>D8(a,r))}),M8=ds().deviceType,BV=M8.isPhone(),IV=M8.isTablet(),FV=t=>{let r=!1;const a=Ne(t.buttons,l=>l.type==="group"?(r=!0,PV(l,t.providers)):D8(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...BV||IV?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:ze([Pt.config({}),Ct.config({mode:"flow",selector:"button, .tox-button",focusInside:X.OnEnterOrSpaceMode})]),components:r?a:[Fd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Fd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},N8=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),R8=(t,r,a,l)=>{const u={getPane:g=>vs.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,apis:u}};var Zf=ra({name:"silver.View",configFields:[Re("viewConfig")],partFields:[di({factory:{sketch:FV},schema:[Re("buttons"),Re("providers")],name:"header"}),di({factory:{sketch:N8},schema:[],name:"pane"})],factory:R8,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const VV=(t,r,a)=>Si(r,(l,u)=>{const g=Js(A8(l));return t.slot(u,Zf.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Zf.parts.header({buttons:g.buttons,providers:a})]:[],Zf.parts.pane({})]}))}),L8=(t,r)=>Gr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:VV(a,t,r),slotBehaviours:Ry.unnamedEvents([yn(l=>Gr.hideAllSlots(l))])})),OT=t=>Ut(Gr.getSlotNames(t),r=>Gr.isShowing(t,r)),H8=t=>{const r=t.element;fe(r,"display","none"),Z(r,"aria-hidden","true")},zV=t=>{const r=t.element;So(r,"display"),Co(r,"aria-hidden")},ZV=t=>({getContainer:re(t)}),P8=(t,r,a)=>{Gr.getSlot(t,r).each(l=>{Zf.getPane(l).each(u=>{a(l)(ZV(u.element.dom))})})},B8=(t,r)=>P8(t,r,Zf.getOnShow),UV=(t,r)=>P8(t,r,Zf.getOnHide);var s4=ui({factory:(t,r)=>{const a={setViews:(l,u)=>{Wt.set(l,[L8(u,r.backstage.shared.providers)])},whichView:l=>uo.getCurrent(l).bind(OT),toggleView:(l,u,g,f)=>uo.getCurrent(l).exists(y=>{const C=OT(y),_=C.exists(D=>f===D),T=Gr.getSlot(y,f).isSome();return T&&(Gr.hideAllSlots(y),_?(H8(l),u()):(g(),zV(l),Gr.showSlot(y,f),B8(y,f)),C.each(D=>UV(y,D))),T})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:ze([Wt.config({}),uo.config({find:l=>{const u=Wt.contents(l);return qr(u)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[Re("backstage")],apis:{setViews:(t,r,a)=>t.setViews(r,a),toggleView:(t,r,a,l,u)=>t.toggleView(r,a,l,u),whichView:(t,r)=>t.whichView(r)}});const WV=(t,r,a)=>{let l=!1;const u={getSocket:g=>vs.getPart(g,t,"socket"),setSidebar:(g,f,y)=>{vs.getPart(g,t,"sidebar").each(C=>sV(C,f,y))},toggleSidebar:(g,f)=>{vs.getPart(g,t,"sidebar").each(y=>aV(y,f))},whichSidebar:g=>vs.getPart(g,t,"sidebar").bind(iV).getOrNull(),getHeader:g=>vs.getPart(g,t,"header"),getToolbar:g=>vs.getPart(g,t,"toolbar"),setToolbar:(g,f)=>{vs.getPart(g,t,"toolbar").each(y=>{const C=Ne(f,$h);y.getApis().setGroups(y,C)})},setToolbars:(g,f)=>{vs.getPart(g,t,"multiple-toolbar").each(y=>{const C=Ne(f,_=>Ne(_,$h));BS.setItems(y,C)})},refreshToolbar:g=>{vs.getPart(g,t,"toolbar").each(f=>f.getApis().refresh(f))},toggleToolbarDrawer:g=>{vs.getPart(g,t,"toolbar").each(f=>{Xo(f.getApis().toggle,y=>y(f))})},toggleToolbarDrawerWithoutFocusing:g=>{vs.getPart(g,t,"toolbar").each(f=>{Xo(f.getApis().toggleWithoutFocusing,y=>y(f))})},isToolbarDrawerToggled:g=>vs.getPart(g,t,"toolbar").bind(f=>E.from(f.getApis().isOpen).map(y=>y(f))).getOr(!1),getThrobber:g=>vs.getPart(g,t,"throbber"),focusToolbar:g=>{vs.getPart(g,t,"toolbar").orThunk(()=>vs.getPart(g,t,"multiple-toolbar")).each(f=>{Ct.focusIn(f)})},setMenubar:(g,f)=>{vs.getPart(g,t,"menubar").each(y=>{vT.setMenus(y,f)})},focusMenubar:g=>{vs.getPart(g,t,"menubar").each(f=>{vT.focus(f)})},setViews:(g,f)=>{vs.getPart(g,t,"viewWrapper").each(y=>{s4.setViews(y,f)})},toggleView:(g,f)=>vs.getPart(g,t,"viewWrapper").exists(y=>s4.toggleView(y,()=>u.showMainView(g),()=>u.hideMainView(g),f)),whichView:g=>vs.getPart(g,t,"viewWrapper").bind(s4.whichView).getOrNull(),hideMainView:g=>{l=u.isToolbarDrawerToggled(g),l&&u.toggleToolbarDrawer(g),vs.getPart(g,t,"editorContainer").each(f=>{const y=f.element;fe(y,"display","none"),Z(y,"aria-hidden","true")})},showMainView:g=>{l&&u.toggleToolbarDrawer(g),vs.getPart(g,t,"editorContainer").each(f=>{const y=f.element;So(y,"display"),Co(y,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:u,behaviours:t.behaviours}},jV=rm.optional({factory:vT,name:"menubar",schema:[Re("backstage")]}),$V=t=>t.type===hi.sliding?n4:t.type===hi.floating?NV:r4,GV=rm.optional({factory:{sketch:t=>BS.sketch({uid:t.uid,dom:t.dom,listBehaviours:ze([Ct.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>r4({type:t.type,uid:Qe("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),E.some(!0))}),setupItem:(r,a,l,u)=>{jd.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Re("dom"),Re("onEscape")]}),KV=rm.optional({factory:{sketch:t=>{const r=$V(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),E.some(!0)),onToggled:(l,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(a)}},name:"toolbar",schema:[Re("dom"),Re("onEscape"),Re("getSink")]}),qV=rm.optional({factory:{sketch:s8},name:"header",schema:[Re("dom")]}),XV=rm.optional({factory:{sketch:d8},name:"promotion",schema:[Re("dom")]}),YV=rm.optional({name:"socket",schema:[Re("dom")]}),I8=rm.optional({factory:{sketch:m2},name:"sidebar",schema:[Re("dom")]}),QV=rm.optional({factory:{sketch:mV},name:"throbber",schema:[Re("dom")]}),JV=rm.optional({factory:s4,name:"viewWrapper",schema:[Re("backstage")]}),TT=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),ez=rm.optional({factory:{sketch:TT},name:"editorContainer",schema:[]});var Uo=ra({name:"OuterContainer",factory:WV,configFields:[Re("dom"),Re("behaviours")],partFields:[qV,jV,KV,GV,YV,I8,XV,QV,JV,ez],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,a,l)=>{t.setSidebar(r,a,l)},toggleSidebar:(t,r,a)=>{t.toggleSidebar(r,a)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,a)=>{t.setToolbar(r,a)},setToolbars:(t,r,a)=>{t.setToolbars(r,a)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,a)=>{t.setMenubar(r,a)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,a)=>{t.setViews(r,a)},toggleView:(t,r,a)=>t.toggleView(r,a),whichView:(t,r)=>t.whichView(r)}});const tz="file edit view insert format tools table help",AT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},oz=(t,r,a)=>{const l=g_(a).split(/[ ,]/);return{text:t.title,getItems:()=>Ce(t.items,u=>{const g=u.toLowerCase();return g.trim().length===0?[]:ls(l,f=>f===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:r.menuItems[g]?[r.menuItems[g]]:[]})}},DT=t=>t.split(" "),F8=(t,r)=>{const a={...AT,...r.menus},l=dn(r.menus).length>0,u=r.menubar===void 0||r.menubar===!0?DT(tz):DT(r.menubar===!1?"":r.menubar),g=qo(u,y=>{const C=wo(AT,y);return l?C||nt(r.menus,y).exists(_=>wo(_,"items")):C}),f=Ne(g,y=>{const C=a[y];return oz({title:C.title,items:DT(C.items)},r,t)});return qo(f,y=>{const C=_=>Kt(_)||_.type!=="separator";return y.getItems().length>0&&ls(y.getItems(),C)})},V8=t=>{const r=()=>{t._skinLoaded=!0,UP(t)};return()=>{t.initialized?r():t.on("init",r)}},MT=(t,r)=>()=>vM(t,{message:r}),z8=(t,r,a)=>(t.on("remove",()=>a.unload(r)),a.load(r)),a4=(t,r)=>{const a=r+"/skin.min.css";return z8(t,a,t.ui.styleSheetLoader)},Z8=(t,r)=>{if(al(Xe.fromDom(t.getElement()))){const a=r+"/skin.shadowdom.min.css";return z8(t,a,I0.DOM.styleSheetLoader)}else return Promise.resolve()},NT=(t,r)=>{const a=fD(r);return a&&r.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!y_(r)&&Kt(a)?Promise.all([a4(r,a),Z8(r,a)]).then(V8(r),MT(r,"Skin could not be loaded")):Promise.resolve(V8(r)())},RT=oo(NT,!1),nz=oo(NT,!0),U8=(t,r,a)=>{const l=(f,y,C,_)=>{const T=r.shared.providers.translate(f.title);if(f.type==="separator")return E.some({type:"separator",text:T});if(f.type==="submenu"){const D=Ce(f.getStyleItems(),R=>u(R,y,_));return y===0&&D.length<=0?E.none():E.some({type:"nestedmenuitem",text:T,enabled:D.length>0,getSubmenuItems:()=>Ce(f.getStyleItems(),R=>u(R,y,_))})}else return E.some({type:"togglemenuitem",text:T,icon:f.icon,active:f.isSelected(_),enabled:!C,onAction:a.onAction(f),...f.getStylePreview().fold(()=>({}),D=>({meta:{style:D}}))})},u=(f,y,C)=>{const _=f.type==="formatter"&&a.isInvalid(f);return y===0?_?[]:l(f,y,!1,C).toArray():l(f,y,_,C).toArray()},g=f=>{const y=a.getCurrentValue(),C=a.shouldHide?0:1;return Ce(f,_=>u(_,C,y))};return{validateItems:g,getFetch:(f,y)=>(C,_)=>{const T=y(),D=g(T),R=iv(D,Bd.CLOSE_ON_EXECUTE,f,{isHorizontalMenu:!1,search:E.none()});_(R)}}},$d=(t,r,a)=>{const l=a.dataset,u=l.type==="basic"?()=>Ne(l.data,g=>_R(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:U8(t,r,a),getStyleItems:u}},vv=(t,r,a)=>{const{items:l,getStyleItems:u}=$d(t,r,a),g=y=>({getComponent:re(y)}),f=Hh(t,"NodeChange",y=>{const C=y.getComponent();a.updateText(C),Tt.set(y.getComponent(),!t.selection.isEditable())});return CS({text:a.icon.isSome()?E.none():a.text,icon:a.icon,tooltip:E.from(a.tooltip),role:E.none(),fetch:l.getFetch(r,u),onSetup:f,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},rz=t=>Ne(t,r=>{let a=r,l=r;const u=r.split("=");return u.length>1&&(a=u[0],l=u[1]),{title:a,format:l}}),sz=t=>({type:"basic",data:t});var bv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(bv||(bv={}));const LT=(t,r)=>r===bv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),HT=(t,r,a)=>{const l=t.options.get(r);return{type:"basic",data:rz(LT(l,a))}},PT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],BT=t=>{const r=()=>Ut(PT,y=>t.formatter.match(y.format)),a=y=>()=>t.formatter.match(y),l=y=>E.none,u=y=>{const C=r().fold(re("left"),_=>_.title.toLowerCase());wt(y,Xi,{icon:`align-${C}`})},g=sz(PT),f=y=>()=>Ut(PT,C=>C.format===y.format).each(C=>t.execCommand(C.command));return{tooltip:"Align",text:E.none(),icon:E.some("align-left"),isSelectedFor:a,getCurrentValue:E.none,getPreviewFor:l,onAction:f,updateText:u,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},W8=(t,r)=>vv(t,r,BT(t)),i4=(t,r)=>{const a=$d(t,r,BT(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate("Align"),onSetup:Pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},l4=(t,r)=>{const a=r(),l=Ne(a,u=>u.format);return E.from(t.formatter.closest(l)).bind(u=>Ut(a,g=>g.format===u)).orThunk(()=>It(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},j8=t=>{const r="Paragraph",a=f=>()=>t.formatter.match(f),l=f=>()=>{const y=t.formatter.get(f);return y?E.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):E.none()},u=f=>{const y=l4(t,()=>g.data).fold(re(r),C=>C.title);wt(f,qi,{text:y})},g=HT(t,"block_formats",bv.SemiColon);return{tooltip:"Blocks",text:E.some(r),icon:E.none(),isSelectedFor:a,getCurrentValue:E.none,getPreviewFor:l,onAction:cE(t),updateText:u,dataset:g,shouldHide:!1,isInvalid:f=>!t.formatter.canApply(f.format)}},az=(t,r)=>vv(t,r,j8(t)),$8=(t,r)=>{const a=$d(t,r,j8(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},iz=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],G8=t=>{const r=t.split(/\s*,\s*/);return Ne(r,a=>a.replace(/^['"]+|['"]+$/g,""))},lz=t=>{const r=()=>{const a=G8(t.toLowerCase());return el(iz,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&r()},IT=t=>{const r="System Font",a=()=>{const _=V=>V?G8(V)[0]:"",T=t.queryCommandValue("FontName"),D=C.data,R=T?T.toLowerCase():"";return{matchOpt:Ut(D,V=>{const Q=V.format;return Q.toLowerCase()===R||_(Q).toLowerCase()===_(R).toLowerCase()}).orThunk(()=>It(lz(R),{title:r,format:R})),font:T}},l=_=>T=>T.exists(D=>D.format===_),u=()=>{const{matchOpt:_}=a();return _},g=_=>()=>E.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),f=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},y=_=>{const{matchOpt:T,font:D}=a(),R=T.fold(re(D),V=>V.title);wt(_,qi,{text:R})},C=HT(t,"font_family_formats",bv.SemiColon);return{tooltip:"Fonts",text:E.some(r),icon:E.none(),isSelectedFor:l,getCurrentValue:u,getPreviewFor:g,onAction:f,updateText:y,dataset:C,shouldHide:!1,isInvalid:Ue}},cz=(t,r)=>vv(t,r,IT(t)),dz=(t,r)=>{const a=$d(t,r,IT(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate("Fonts"),onSetup:Pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},FT={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},uz=(()=>{const t="[0-9]+",r="[eE]"+("[+-]?"+t),a="\\.",l=g=>`(?:${g})?`,u=`[+-]?(?:${["Infinity",t+a+l(t)+l(r),a+t+l(r),t+l(r)].join("|")})`;return new RegExp(`^(${u})(.*)$`)})(),mz=(t,r)=>ls(r,a=>ls(FT[a],l=>t===l)),f2=(t,r)=>E.from(uz.exec(t)).bind(a=>{const l=Number(a[1]),u=a[2];return mz(u,r)?E.some({value:l,unit:u}):E.none()}),gz=(t,r)=>f2(t,r).map(({value:a,unit:l})=>a+l),VT={tab:re(9),escape:re(27),enter:re(13),backspace:re(8),delete:re(46),left:re(37),up:re(38),right:re(39),down:re(40),space:re(32),home:re(36),end:re(35),pageUp:re(33),pageDown:re(34)},hz=(t,r,a)=>{let l=E.none();const u=ne=>ne.map(be=>Je.getValue(be)).getOr(""),g=Hh(t,"NodeChange SwitchMode",ne=>{const be=ne.getComponent();l=E.some(be),a.updateInputValue(be),Tt.set(be,!t.selection.isEditable())}),f=ne=>({getComponent:re(ne)}),y=Lt(G),C=Qe("custom-number-input-events"),_=(ne,be,pe)=>{const Pe=u(l),Ge=a.getNewValue(Pe,ne),st=Pe.length-`${Ge}`.length,pt=l.map(je=>je.element.dom.selectionStart-st),io=l.map(je=>je.element.dom.selectionEnd-st);a.onAction(Ge,pe),l.each(je=>{Je.setValue(je,Ge),be&&(pt.each(qe=>je.element.dom.selectionStart=qe),io.each(qe=>je.element.dom.selectionEnd=qe))})},T=(ne,be)=>_((pe,Pe)=>pe-Pe,ne,be),D=(ne,be)=>_((pe,Pe)=>pe+Pe,ne,be),R=ne=>Ss(ne.element).fold(E.none,be=>(Na(be),E.some(!0))),V=ne=>ns(ne.element)?(Jd(ne.element).each(be=>Na(be)),E.some(!0)):E.none(),Q=(ne,be,pe,Pe)=>{const Ge=r.shared.providers.translate(pe),st=Qe("altExecuting"),pt=Hh(t,"NodeChange SwitchMode",je=>{Tt.set(je.getComponent(),!t.selection.isEditable())}),io=je=>{Tt.isDisabled(je)||ne(!0)};return js.sketch({dom:{tag:"button",attributes:{title:Ge,"aria-label":Ge},classes:Pe.concat(be)},components:[wS(be,r.shared.providers.icons)],buttonBehaviours:ze([Tt.config({}),qt(st,[Mh({onSetup:pt,getApi:f},y),Nh({getApi:f},y),Te($l(),(je,qe)=>{(qe.event.raw.keyCode===VT.space()||qe.event.raw.keyCode===VT.enter())&&(Tt.isDisabled(je)||ne(!1))}),Te(vd(),io),Te(Pm(),io)])]),eventOrder:{[$l()]:[st,"keying"],[vd()]:[st,"alloy.base.behaviour"],[Pm()]:[st,"alloy.base.behaviour"]}})},le=Eo(Q(ne=>T(!1,ne),"minus","Decrease font size",["highlight-on-focus"])),Oe=Eo(Q(ne=>D(!1,ne),"plus","Increase font size",["highlight-on-focus"])),Y=Eo({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[Oh.sketch({inputBehaviours:ze([Tt.config({}),qt(C,[Mh({onSetup:g,getApi:f},y),Nh({getApi:f},y)]),qt("input-update-display-text",[Te(qi,(ne,be)=>{Je.setValue(ne,be.event.text)}),Te(f1(),ne=>{a.onAction(Je.getValue(ne))}),Te(Bm(),ne=>{a.onAction(Je.getValue(ne))})]),Ct.config({mode:"special",onEnter:ne=>(_(ao,!0,!0),E.some(!0)),onEscape:R,onUp:ne=>(D(!0,!1),E.some(!0)),onDown:ne=>(T(!0,!1),E.some(!0)),onLeft:(ne,be)=>(be.cut(),E.none()),onRight:(ne,be)=>(be.cut(),E.none())})])})],behaviours:ze([Pt.config({}),Ct.config({mode:"special",onEnter:V,onSpace:V,onEscape:R}),qt("input-wrapper-events",[Te(ja(),ne=>{ct([le,Oe],be=>{const pe=Xe.fromDom(be.get(ne).element.dom);ns(pe)&&wb(pe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[le.asSpec(),Y.asSpec(),Oe.asSpec()],behaviours:ze([Pt.config({}),Ct.config({mode:"flow",focusInside:X.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ne=>ns(ne.element)?E.none():(Na(ne.element),E.some(!0))})])}},K8={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},pz={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},fz=(t,r)=>{const a=Math.pow(10,r);return Math.round(t*a)/a},vz=(t,r)=>/[0-9.]+px$/.test(t)?fz(parseInt(t,10)*72/96,r||0)+"pt":nt(pz,t).getOr(t),q8=t=>nt(K8,t).getOr(""),X8=t=>{const r=()=>{let C=E.none();const _=y.data,T=t.queryCommandValue("FontSize");if(T)for(let D=3;C.isNone()&&D>=0;D--){const R=vz(T,D),V=q8(R);C=Ut(_,Q=>Q.format===T||Q.format===R||Q.format===V)}return{matchOpt:C,size:T}},a=C=>_=>_.exists(T=>T.format===C),l=()=>{const{matchOpt:C}=r();return C},u=re(E.none),g=C=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,C.format)})},f=C=>{const{matchOpt:_,size:T}=r(),D=_.fold(re(T),R=>R.title);wt(C,qi,{text:D})},y=HT(t,"font_size_formats",bv.Space);return{tooltip:"Font sizes",text:E.some("12pt"),icon:E.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:l,onAction:g,updateText:f,dataset:y,shouldHide:!1,isInvalid:Ue}},bz=(t,r)=>vv(t,r,X8(t)),yz=t=>{var r;const a={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:a},zT=16,ZT=t=>t>=0,wz=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:a=>wt(a,qi,{text:r()}),onAction:(a,l)=>t.execCommand("FontSize",!1,a,{skip_focus:!l}),getNewValue:(a,l)=>{f2(a,["unsupportedLength","empty"]);const u=f2(a,["unsupportedLength","empty"]).or(f2(r(),["unsupportedLength","empty"])),g=u.map(_=>_.value).getOr(zT),f=Cx(t),y=u.map(_=>_.unit).filter(_=>_!=="").getOr(f),C=l(g,yz(y).step);return`${ZT(C)?C:g}${y}`}}},Cz=(t,r)=>hz(t,r,wz(t)),xz=(t,r)=>{const a=$d(t,r,X8(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Pa(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Y8=(t,r)=>{const a="Paragraph",l=f=>()=>t.formatter.match(f),u=f=>()=>{const y=t.formatter.get(f);return y!==void 0?E.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):E.none()},g=f=>{const y=T=>QO(T)?Ce(T.items,y):JO(T)?[{title:T.title,format:T.format}]:[],C=Ce(kR(t),y),_=l4(t,re(C)).fold(re(a),T=>T.title);wt(f,qi,{text:_})};return{tooltip:"Formats",text:E.some(a),icon:E.none(),isSelectedFor:l,getCurrentValue:E.none,getPreviewFor:u,onAction:cE(t),updateText:g,shouldHide:vx(t),isInvalid:f=>!t.formatter.canApply(f.format),dataset:r}},Sz=(t,r)=>{const a={type:"advanced",...r.styles};return vv(t,r,Y8(t,a))},kz=(t,r)=>{const a={type:"advanced",...r.styles},l=$d(t,r,Y8(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Pa(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},_z=re([Re("toggleClass"),Re("fetch"),Xa("onExecute"),ge("getHotspot",E.some),ge("getAnchorOverrides",re({})),Ru(),Xa("onItemExecute"),_o("lazySink"),Re("dom"),mo("onOpen"),Nr("splitDropdownBehaviours",[er,Ct,Pt]),ge("matchWidth",!1),ge("useMinWidth",!1),ge("eventOrder",{}),_o("role")].concat(Qx())),Ez=Us({factory:js,schema:[Re("dom")],name:"arrow",defaults:()=>({buttonBehaviours:ze([Pt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(Nc)},buttonBehaviours:ze([so.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Oz=Us({factory:js,schema:[Re("dom")],name:"button",defaults:()=>({buttonBehaviours:ze([Pt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,r)})}})}),Q8=re([Ez,Oz,di({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Re("text")],name:"aria-descriptor"}),hs({schema:[Gg()],name:"menu",defaults:t=>({onExecute:(r,a)=>{r.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,r,a)})}})}),WM()]),c4=(t,r,a,l)=>{const u=T=>{uo.getCurrent(T).each(D=>{xo.highlightFirst(D),Ct.focusIn(D)})},g=T=>{EE(t,ao,T,l,u,Qa.HighlightMenuAndItem).get(G)},f=T=>(g(T),E.some(!0)),y=T=>{const D=Zu(T,t,"button");return Nc(D),E.some(!0)},C={...on([yn((T,D)=>{Go(T,t,"aria-descriptor").each(R=>{const V=Qe("aria");Z(R.element,"id",V),Z(T.element,"aria-describedby",V)})})]),...xh(E.some(g))},_={repositionMenus:T=>{so.isOn(T)&&KM(T)}};return{uid:t.uid,dom:t.dom,components:r,apis:_,eventOrder:{...t.eventOrder,[$a()]:["disabling","toggling","alloy.base.behaviour"]},events:C,behaviours:Jn(t.splitDropdownBehaviours,[er.config({others:{sandbox:T=>{const D=Zu(T,t,"arrow");return OE(t,T,{onOpen:()=>{so.on(D),so.on(T)},onClose:()=>{so.off(D),so.off(T)}})}}}),Ct.config({mode:"special",onSpace:y,onEnter:y,onDown:f}),Pt.config({}),so.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},yv=ra({name:"SplitDropdown",configFields:_z(),partFields:Q8(),factory:c4,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),UT=t=>({isEnabled:()=>!Tt.isDisabled(t),setEnabled:r=>Tt.set(t,!r),setText:r=>wt(t,qi,{text:r}),setIcon:r=>wt(t,Xi,{icon:r})}),Gh=t=>({setActive:r=>{so.set(t,r)},isActive:()=>so.isOn(t),isEnabled:()=>!Tt.isDisabled(t),setEnabled:r=>Tt.set(t,!r),setText:r=>wt(t,qi,{text:r}),setIcon:r=>wt(t,Xi,{icon:r})}),WT=(t,r)=>t.map(a=>({"aria-label":r.translate(a),title:r.translate(a)})).getOr({}),J8=Qe("focus-button"),jT=(t,r,a,l,u)=>{const g=r.map(y=>Eo(wO(y,"tox-tbtn",u))),f=t.map(y=>Eo(Uh(y,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:WT(a,u)},components:X0([f.map(y=>y.asSpec()),g.map(y=>y.asSpec())]),eventOrder:{[Oa()]:["focusing","alloy.base.behaviour",If],[Kl()]:[If,"toolbar-group-button-events"]},buttonBehaviours:ze([Gi.toolbarButton(u.isDisabled),ss(),qt(If,[yn((y,C)=>yO(y)),Te(qi,(y,C)=>{g.bind(_=>_.getOpt(y)).each(_=>{Wt.set(_,[Un(u.translate(C.event.text))])})}),Te(Xi,(y,C)=>{f.bind(_=>_.getOpt(y)).each(_=>{Wt.set(_,[Uh(C.event.icon,u.icons)])})}),Te(Oa(),(y,C)=>{C.event.prevent(),vo(y,J8)})])].concat(l.getOr([])))}},Tz=(t,r,a,l)=>{const u=r.shared,g=Lt(G),f={toolbarButtonBehaviours:[],getApi:UT,onSetup:t.onSetup},y=[qt("toolbar-group-button-events",[Mh(f,g),Nh(f,g)])];return jh.sketch({lazySink:u.getSink,fetch:()=>$s.nu(C=>{C(Ne(a(t.items),$h))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:jT(t.icon,t.text,t.tooltip,E.some(y),u.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},e7=(t,r,a)=>{var l;const u=Lt(G),g=jT(t.icon,t.text,t.tooltip,E.none(),a);return js.sketch({dom:g.dom,components:g.components,eventOrder:f6,buttonBehaviours:{...ze([qt("toolbar-button-events",[p6({onAction:t.onAction,getApi:r.getApi}),Mh(r,u),Nh(r,u)]),Gi.toolbarButton(()=>!t.enabled||a.isDisabled()),ss()].concat(r.toolbarButtonBehaviours)),[If]:(l=g.buttonBehaviours)===null||l===void 0?void 0:l[If]}})},Az=(t,r)=>t7(t,r,[]),t7=(t,r,a)=>e7(t,{toolbarButtonBehaviours:a.length>0?[qt("toolbarButtonWith",a)]:[],getApi:UT,onSetup:t.onSetup},r),Dz=(t,r)=>$T(t,r,[]),$T=(t,r,a)=>e7(t,{toolbarButtonBehaviours:[Wt.config({}),so.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[qt("toolbarToggleButtonWith",a)]:[]),getApi:Gh,onSetup:t.onSetup},r),Mz=(t,r,a)=>l=>$s.nu(u=>r.fetch(u)).map(u=>E.from(AE(ot(vE(Qe("menu-value"),u,g=>{r.onItemAction(t(l),g)},r.columns,r.presets,Bd.CLOSE_ON_EXECUTE,r.select.getOr(Ue),a),{movement:Kx(r.columns,r.presets),menuBehaviours:Ry.unnamedEvents(r.columns!=="auto"?[]:[yn((g,f)=>{Ny(g,4,Ay(r.presets)).each(({numRows:y,numColumns:C})=>{Ct.setGridSize(g,y,C)})})])})))),Nz=(t,r)=>{const a=g=>({isEnabled:()=>!Tt.isDisabled(g),setEnabled:f=>Tt.set(g,!f),setIconFill:(f,y)=>{dr(g.element,`svg path[class="${f}"], rect[class="${f}"]`).each(C=>{Z(C,"fill",y)})},setActive:f=>{Z(g.element,"aria-pressed",f),dr(g.element,"span").each(y=>{g.getSystem().getByDom(y).each(C=>so.set(C,f))})},isActive:()=>dr(g.element,"span").exists(f=>g.getSystem().getByDom(f).exists(so.isOn)),setText:f=>dr(g.element,"span").each(y=>g.getSystem().getByDom(y).each(C=>wt(C,qi,{text:f}))),setIcon:f=>dr(g.element,"span").each(y=>g.getSystem().getByDom(y).each(C=>wt(C,Xi,{icon:f})))}),l=Lt(G),u={getApi:a,onSetup:t.onSetup};return yv.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...WT(t.tooltip,r.providers)}},onExecute:g=>{const f=a(g);f.isEnabled()&&t.onAction(f)},onItemExecute:(g,f,y)=>{},splitDropdownBehaviours:ze([Gi.splitButton(r.providers.isDisabled),ss(),qt("split-dropdown-events",[yn((g,f)=>yO(g)),Te(J8,Pt.focus),Mh(u,l),Nh(u,l)]),Gy.config({})]),eventOrder:{[Kl()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:Mz(a,t,r.providers),parts:{menu:_x(!1,t.columns,t.presets)},components:[yv.parts.button(jT(t.icon,t.text,E.none(),E.some([so.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),yv.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:hx("chevron-down",r.providers.icons)},buttonBehaviours:ze([Gi.splitButton(r.providers.isDisabled),ss(),i_()])}),yv.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},GT=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],v2=(t,r)=>(a,l,u)=>{const g=t(a).mapError(f=>gd(f)).getOrDie();return r(g,l,u)},Rz={button:v2(jD,(t,r)=>Az(t,r.shared.providers)),togglebutton:v2(G_,(t,r)=>Dz(t,r.shared.providers)),menubutton:v2(l8,(t,r)=>cv(t,"tox-tbtn",r,E.none(),!1)),splitbutton:v2(tV,(t,r)=>Nz(t,r.shared)),grouptoolbarbutton:v2(a8,(t,r,a)=>{const l=a.ui.registry.getAll().buttons,u=f=>d4(a,{buttons:l,toolbar:f,allowToolbarGroups:!1},r,E.none()),g={[Db]:r.shared.header.isPositionedAtTop()?Ic.TopToBottom:Ic.BottomToTop};switch(z0(a)){case hi.floating:return Tz(t,r,u,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Lz=(t,r,a)=>nt(Rz,t.type).fold(()=>(console.error("skipping button defined by",t),E.none()),l=>E.some(l(t,r,a))),o7={styles:Sz,fontsize:bz,fontsizeinput:Cz,fontfamily:cz,blocks:az,align:W8},Hz=t=>{const r=Ne(GT,a=>{const l=qo(a.items,u=>wo(t,u)||wo(o7,u));return{name:a.name,items:l}});return qo(r,a=>a.items.length>0)},Pz=t=>{const r=t.split("|");return Ne(r,a=>({items:a.trim().split(" ")}))},n7=t=>Cn(t,r=>wo(r,"name")&&wo(r,"items")),r7=t=>{const r=t.toolbar,a=t.buttons;return r===!1?[]:r===void 0||r===!0?Hz(a):Kt(r)?Pz(r):n7(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},s7=(t,r,a,l,u,g)=>nt(r,a.toLowerCase()).orThunk(()=>g.bind(f=>Kn(f,y=>nt(r,y+a.toLowerCase())))).fold(()=>nt(o7,a.toLowerCase()).map(f=>f(t,u)),f=>f.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),E.none()):Lz(f,u,t)),d4=(t,r,a,l)=>{const u=r7(r),g=Ne(u,f=>{const y=Ce(f.items,C=>C.trim().length===0?[]:s7(t,r.buttons,C,r.allowToolbarGroups,a,l).toArray());return{title:E.from(t.translate(f.name)),items:y}});return qo(g,f=>f.items.length>0)},u4=(t,r,a,l)=>{const u=r.mainUi.outerContainer,g=a.toolbar,f=a.buttons;if(Cn(g,Kt)){const y=g.map(C=>{const _={toolbar:C,buttons:f,allowToolbarGroups:a.allowToolbarGroups};return d4(t,_,l,E.none())});Uo.setToolbars(u,y)}else Uo.setToolbar(u,d4(t,a,l,E.none()))},a7=ds(),Bz=a7.os.isiOS()&&a7.os.version.major<=12,Iz=(t,r)=>{const{uiMotherships:a}=r,l=t.dom;let u=t.getWin();const g=t.getDoc().documentElement,f=Lt(mn(u.innerWidth,u.innerHeight)),y=Lt(mn(g.offsetWidth,g.offsetHeight)),C=()=>{const R=f.get();(R.left!==u.innerWidth||R.top!==u.innerHeight)&&(f.set(mn(u.innerWidth,u.innerHeight)),iE(t))},_=()=>{const R=t.getDoc().documentElement,V=y.get();(V.left!==R.offsetWidth||V.top!==R.offsetHeight)&&(y.set(mn(R.offsetWidth,R.offsetHeight)),iE(t))},T=R=>{jP(t,R)};l.bind(u,"resize",C),l.bind(u,"scroll",T);const D=qg(Xe.fromDom(t.getBody()),"load",_);t.on("hide",()=>{ct(a,R=>{fe(R.element,"display","none")})}),t.on("show",()=>{ct(a,R=>{So(R.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{D.unbind(),l.unbind(u,"resize",C),l.unbind(u,"scroll",T),u=null})},i7=(t,r,a)=>{Eh(t)&&s0(a.mainUi.mothership.element,a.popupUi.mothership),r0(r,a.dialogUi.mothership)};var Fz=Object.freeze({__proto__:null,render:(t,r,a,l,u)=>{const{mainUi:g,uiMotherships:f}=r,y=Lt(0),C=g.outerContainer;t.on("SkinLoaded",()=>{u4(t,r,a,l)}),RT(t);const _=Xe.fromDom(u.targetNode),T=fn(Jr(_));s0(_,g.mothership),i7(t,T,r),t.on("PostRender",()=>{Uo.setSidebar(C,a.sidebar,gD(t)),u4(t,r,a,l),y.set(t.getWin().innerWidth),Uo.setMenubar(C,F8(t,a)),Uo.setViews(C,a.views),Iz(t,r)});const D=Uo.getSocket(C).getOrDie("Could not find expected socket element");if(Bz){Bs(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const le=rF(()=>{t.dispatch("ScrollContent")},20),Oe=pa(D.element,"scroll",le.throttle);t.on("remove",Oe.unbind)}Vx(t,r),t.addCommand("ToggleSidebar",(le,Oe)=>{Uo.toggleSidebar(C,Oe),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var le;return(le=Uo.whichSidebar(C))!==null&&le!==void 0?le:""}),t.addCommand("ToggleView",(le,Oe)=>{if(Uo.toggleView(C,Oe)){const Y=C.element;g.mothership.broadcastOn([yl()],{target:Y}),ct(f,ne=>{ne.broadcastOn([yl()],{target:Y})}),$n(Uo.whichView(C))&&(t.focus(),t.nodeChanged(),Uo.refreshToolbar(C))}}),t.addQueryValueHandler("ToggleView",()=>{var le;return(le=Uo.whichView(C))!==null&&le!==void 0?le:""});const R=z0(t),V=()=>{Uo.refreshToolbar(r.mainUi.outerContainer)};(R===hi.sliding||R===hi.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const le=t.getWin().innerWidth;le!==y.get()&&(V(),y.set(le))});const Q={setEnabled:le=>{Ku(r,!le)},isEnabled:()=>!Tt.isDisabled(C)};return{iframeContainer:D.element.dom,editorContainer:C.element.dom,api:Q}}});const m4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?E.some(parseInt(""+t,10)):E.none(),KT=t=>Ns(t)?t+"px":t,g4=(t,r,a)=>{const l=r.filter(g=>t<g),u=a.filter(g=>t>g);return l.or(u).getOr(t)},Vz=t=>{const r=d_(t),a=m_(t),l=gg(t);return m4(r).map(u=>g4(u,a,l))},zz=t=>Vz(t).getOr(d_(t)),l7=t=>{const r=fx(t),a=u_(t),l=V0(t);return m4(r).map(u=>g4(u,a,l))},Zz=t=>l7(t).getOr(fx(t)),{ToolbarLocation:qT,ToolbarMode:XT}=__,Uz=40,Wz=(t,r,a,l,u)=>{const{mainUi:g,uiMotherships:f}=a,y=I0.DOM,C=W0(t),_=Ey(t),T=V0(t).or(l7(t)),D=l.shared.header,R=D.isPositionedAtTop,V=z0(t),Q=V===XT.sliding||V===XT.floating,le=Lt(!1),Oe=()=>le.get()&&!t.removed,Y=qe=>Q?qe.fold(re(0),Et=>Et.components().length>1?sr(Et.components()[1].element):0):0,ne=qe=>{switch(bx(t)){case qT.auto:const Et=Uo.getToolbar(g.outerContainer),yo=Y(Et),kn=sr(qe.element)-yo,Ze=Rn(r);if(Ze.y>kn)return"top";{const mt=Qr(r),at=Math.max(mt.dom.scrollHeight,sr(mt));return Ze.bottom<at-kn||Is().bottom<Ze.bottom-kn?"bottom":"top"}case qT.bottom:return"bottom";case qT.top:default:return"top"}},be=qe=>{u.on(Et=>{mr.setModes(Et,[qe]),D.setDockingMode(qe);const yo=R()?Ic.TopToBottom:Ic.BottomToTop;Z(Et.element,Db,yo)})},pe=()=>{u.on(qe=>{const Et=T.getOrThunk(()=>{const yo=m4(Ir(Br(),"margin-left")).getOr(0);return ar(Br())-Ys(r).left+yo});fe(qe.element,"max-width",Et+"px")})},Pe=qe=>{u.on(Et=>{const yo=Uo.getToolbar(g.outerContainer),kn=Y(yo),Ze=Rn(r),{top:mt,left:at}=Ge(t,g.outerContainer.element).fold(()=>({top:R()?Math.max(Ze.y-sr(Et.element)+kn,0):Ze.bottom,left:Ze.x}),se=>{var ke;const _e=Rn(se),rt=(ke=se.dom.scrollTop)!==null&&ke!==void 0?ke:0,ro=Fo(se,Br()),eo=ro?Math.max(Ze.y-sr(Et.element)+kn,0):Ze.y-_e.y+rt-sr(Et.element)+kn;return{top:R()?eo:Ze.bottom,left:ro?Ze.x:Ze.x-_e.x}}),Bt={position:"absolute",left:Math.round(at)+"px",top:Math.round(mt)+"px"},oe=qe.map(se=>{const ke=ka(),_e=150,rt=window.innerWidth-(at-ke.left);return{width:Math.max(Math.min(se,rt),_e)+"px"}}).getOr({});Bs(g.outerContainer.element,{...Bt,...oe})})},Ge=(qe,Et)=>Eh(qe)?IS(Et):E.none(),st=()=>{ct(f,qe=>{qe.broadcastOn([Vi()],{})})},pt=()=>{if(C)return E.none();if(Ys(g.outerContainer.element).left+ll(g.outerContainer.element)>=window.innerWidth-Uz||ln(g.outerContainer.element,"width").isSome()){fe(g.outerContainer.element,"position","absolute"),fe(g.outerContainer.element,"left","0px"),So(g.outerContainer.element,"width");const qe=ll(g.outerContainer.element);return E.some(qe)}else return E.none()},io=qe=>{if(!Oe())return;C||pe();const Et=C?E.none():pt();Q&&Uo.refreshToolbar(g.outerContainer),C||Pe(Et),_&&u.on(qe),st()},je=()=>C||!_||!Oe()?!1:u.get().exists(qe=>{const Et=D.getDockingMode(),yo=ne(qe);return yo!==Et?(be(yo),!0):!1});return{isVisible:Oe,isPositionedAtTop:R,show:()=>{le.set(!0),fe(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),ct(f,qe=>{So(qe.element,"display")}),je(),Eh(t)?io(qe=>mr.isDocked(qe)?mr.reset(qe):mr.refresh(qe)):io(mr.refresh)},hide:()=>{le.set(!1),fe(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),ct(f,qe=>{fe(qe.element,"display","none")})},update:io,updateMode:()=>{je()&&io(mr.reset)},repositionPopups:st}},c7=(t,r)=>{const a=Rn(t);return{pos:r?a.y:a.bottom,bounds:a}},jz=(t,r,a,l)=>{const u=Lt(c7(r,a.isPositionedAtTop())),g=_=>{const{pos:T,bounds:D}=c7(r,a.isPositionedAtTop()),{pos:R,bounds:V}=u.get(),Q=D.height!==V.height||D.width!==V.width;u.set({pos:T,bounds:D}),Q&&iE(t,_),a.isVisible()&&(R!==T?a.update(mr.reset):Q&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(mr.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let f=0;const y=uO(()=>a.update(mr.refresh),33);t.on("ScrollWindow",()=>{const _=ka().left;_!==f&&(f=_,y.throttle()),a.updateMode()}),Eh(t)&&t.on("ElementScroll",_=>{a.update(mr.refresh)});const C=Yn();C.set(qg(Xe.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{C.clear()})};var $z=Object.freeze({__proto__:null,render:(t,r,a,l,u)=>{const{mainUi:g}=r,f=gn(),y=Xe.fromDom(u.targetNode),C=Wz(t,y,r,l,f),_=f_(t);nz(t);const T=()=>{if(f.isSet()){C.show();return}f.set(Uo.getHeader(g.outerContainer).getOrDie());const R=S_(t);Eh(t)?(s0(y,g.mothership),s0(y,r.popupUi.mothership)):r0(R,g.mothership),r0(R,r.dialogUi.mothership),u4(t,r,a,l),Uo.setMenubar(g.outerContainer,F8(t,a)),C.show(),jz(t,y,C,_),t.nodeChanged()};t.on("show",T),t.on("hide",C.hide),_||(t.on("focus",T),t.on("blur",C.hide)),t.on("init",()=>{(t.hasFocus()||_)&&T()}),Vx(t,r);const D={show:T,hide:C.hide,setEnabled:R=>{Ku(r,!R)},isEnabled:()=>!Tt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:D}}});const Gz=()=>{const t=gn(),r=gn(),a=gn();return{dialogUi:t,popupUi:r,mainUi:a,getUiMotherships:()=>{const l=t.get().map(g=>g.mothership),u=r.get().map(g=>g.mothership);return l.fold(()=>u.toArray(),g=>u.fold(()=>[g],f=>Fo(g.element,f.element)?[g]:[g,f]))},lazyGetInOuterOrDie:(l,u)=>()=>a.get().bind(g=>u(g.outerContainer)).getOrDie(`Could not find ${l} element in OuterContainer`)}},Kz="contexttoolbar-show",YT="contexttoolbar-hide",qz=t=>({hide:()=>vo(t,xu()),getValue:()=>Je.getValue(t)}),d7=(t,r)=>Te(h6,(a,l)=>{const u=t.get(a),g=qz(u);r.onAction(g,l.event.buttonApi)}),u7=(t,r,a)=>{const{primary:l,...u}=r.original,g=Js(jD({...u,type:"button",onAction:G}));return t7(g,a,[d7(t,r)])},Xz=(t,r,a)=>{const{primary:l,...u}=r.original,g=Js(G_({...u,type:"togglebutton",onAction:G}));return $T(g,a,[d7(t,r)])},m7=t=>t.type==="contextformtogglebutton",g7=(t,r,a)=>m7(r)?Xz(t,r,a):u7(t,r,a),Yz=(t,r,a)=>{const l=Ne(r,u=>Eo(g7(t,u,a)));return{asSpecs:()=>Ne(l,u=>u.asSpec()),findPrimary:u=>Kn(r,(g,f)=>g.primary?E.from(l[f]).bind(y=>y.getOpt(u)).filter(xe(Tt.isDisabled)):E.none())}},h7=(t,r)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=Eo(Oh.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ze([Ct.config({mode:"special",onEnter:g=>u.findPrimary(g).map(f=>(Nc(f),!0)),onLeft:(g,f)=>(f.cut(),E.none()),onRight:(g,f)=>(f.cut(),E.none())})])})),u=Yz(l,t.commands,r);return[{title:E.none(),items:[l.asSpec()]},{title:E.none(),items:u.asSpecs()}]},Qz={renderContextForm:(t,r,a)=>r4({type:t,uid:Qe("context-toolbar"),initGroups:h7(r,a),onEscape:E.none,cyclicKeying:!0,providers:a}),buildInitGroups:h7},Uf=(t,r,a)=>r.bottom-t.y>=a&&t.bottom-r.y>=a,Jz=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const a=eu(Xe.fromDom(t.startContainer),t.startOffset).element;return(Er(a)?cs(a):E.some(a)).filter(nr).map(l=>l.dom.getBoundingClientRect()).getOr(r)}else return r},QT=t=>{const r=t.selection.getRng(),a=Jz(r);if(t.inline){const l=ka();return ir(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=_s(Xe.fromDom(t.getBody()));return ir(l.x+a.left,l.y+a.top,a.width,a.height)}},eZ=(t,r)=>r.filter(a=>Ps(a)&&xs(a)).map(_s).getOrThunk(()=>QT(t)),tZ=(t,r,a)=>{const l=Math.max(t.x+a,r.x),u=Math.min(t.right-a,r.right);return{x:l,width:u-l}},oZ=(t,r,a,l,u,g)=>{const f=Xe.fromDom(t.getContainer()),y=dr(f,".tox-editor-header").getOr(f),C=Rn(y),_=C.y>=r.bottom,T=l&&!_;if(t.inline&&T)return{y:Math.max(C.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!T)return{y:a.y,bottom:Math.min(C.y-g,a.bottom)};const D=u==="line"?Rn(f):r;return T?{y:Math.max(C.bottom+g,a.y),bottom:Math.min(D.bottom-g,a.bottom)}:{y:Math.max(D.y+g,a.y),bottom:Math.min(C.y-g,a.bottom)}},p7=(t,r,a,l=0)=>{const u=ul(window),g=Rn(Xe.fromDom(t.getContentAreaContainer())),f=Sx(t)||U0(t)||_y(t),{x:y,width:C}=tZ(g,u,l);if(t.inline&&!f)return ir(y,u.y,C,u.height);{const _=r.header.isPositionedAtTop(),{y:T,bottom:D}=oZ(t,g,u,_,a,l);return ir(y,T,C,D-T)}},h4=12,f7={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},p4={maxHeightFunction:Yg(),maxWidthFunction:xT()},nZ=(t,r)=>{const a=t.selection.getRng(),l=eu(Xe.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Fo(l.element,r)},rZ=(t,r,a)=>{const l=ln(t,"position");fe(t,"position",r);const u=a(t);return l.each(g=>fe(t,"position",g)),u},JT=t=>t==="node",v7=(t,r,a,l,u)=>{const g=QT(t),f=l.lastElement().exists(y=>Fo(a,y));if(nZ(t,a))return f?bR:td;if(f)return rZ(r,l.getMode(),()=>Uf(g,Rn(r),-20)&&!l.isReposition()?YF:bR);{const y=l.getMode()==="fixed"?u.y+ka().top:u.y,C=sr(r)+h4;return y+C<=g.y?td:i2}},sZ=(t,r,a,l)=>{const u=f=>(y,C,_,T,D)=>{const R=v7(t,T,f,a,D),V={...y,y:D.y,height:D.height};return{...R(V,C,_,T,D),alwaysFit:!0}},g=f=>JT(l)?[u(f)]:[];return r?{onLtr:f=>[Wr,As,gs,ha,Da,Ds].concat(g(f)),onRtl:f=>[Wr,gs,As,Da,ha,Ds].concat(g(f))}:{onLtr:f=>[Ds,Wr,ha,As,Da,gs].concat(g(f)),onRtl:f=>[Ds,Wr,Da,gs,ha,As].concat(g(f))}},aZ=(t,r,a,l)=>r==="line"?{bubble:Bc(h4,0,f7),layouts:{onLtr:()=>[Kg],onRtl:()=>[na]},overrides:p4}:{bubble:Bc(0,h4,f7,1/h4),layouts:sZ(t,a,l,r),overrides:p4},e5=(t,r)=>{const a=qo(r,g=>g.predicate(t.dom)),{pass:l,fail:u}=ys(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:u}},iZ=t=>{if(t.length<=1)return t;{const r=g=>ls(t,f=>f.position===g),a=g=>qo(t,f=>f.position===g),l=r("selection"),u=r("node");if(l||u)if(u&&l){const g=a("node"),f=Ne(a("selection"),y=>({...y,position:"node"}));return g.concat(f)}else return a(l?"selection":"node");else return a("line")}},lZ=t=>{if(t.length<=1)return t;{const r=a=>Ut(t,l=>l.position===a);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(a=>a.position).fold(()=>[],a=>qo(t,l=>l.position===a))}},cZ=(t,r,a)=>{const l=e5(t,r);if(l.contextForms.length>0)return E.some({elem:t,toolbars:[l.contextForms[0]]});{const u=e5(t,a);if(u.contextForms.length>0)return E.some({elem:t,toolbars:[u.contextForms[0]]});if(l.contextToolbars.length>0||u.contextToolbars.length>0){const g=iZ(l.contextToolbars.concat(u.contextToolbars));return E.some({elem:t,toolbars:g})}else return E.none()}},b7=(t,r,a)=>t(r)?E.none():P2(r,l=>{if(nr(l)){const{contextToolbars:u,contextForms:g}=e5(l,a.inNodeScope),f=g.length>0?g:lZ(u);return f.length>0?E.some({elem:l,toolbars:f}):E.none()}else return E.none()},t),dZ=(t,r)=>{const a=Xe.fromDom(r.getBody()),l=f=>Fo(f,a),u=f=>!l(f)&&!xa(a,f),g=Xe.fromDom(r.selection.getNode());return u(g)?E.none():cZ(g,t.inNodeScope,t.inEditorScope).orThunk(()=>b7(l,g,t))},uZ=(t,r)=>{const a={},l=[],u=[],g={},f={},y=(T,D)=>{const R=Js(Fx(D));a[T]=R,R.launch.map(V=>{g["form:"+T]={...D.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(R)}}}),R.scope==="editor"?u.push(R):l.push(R),f[T]=R},C=(T,D)=>{GD(D).each(R=>{D.scope==="editor"?u.push(R):l.push(R),f[T]=R})},_=dn(t);return ct(_,T=>{const D=t[T];D.type==="contextform"?y(T,D):D.type==="contexttoolbar"&&C(T,D)}),{forms:a,inNodeScope:l,inEditorScope:u,lookupTable:f,formNavigators:g}},y7=Qe("forward-slide"),w7=Qe("backward-slide"),wv=Qe("change-slide-event"),t5="tox-pop--resizing",f4=t=>{const r=Lt([]);return An.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{r.set([]),An.getContent(a).each(l=>{So(l.element,"visibility")}),cn(a.element,t5),So(a.element,"width")},inlineBehaviours:ze([qt("context-toolbar-events",[Lc(Im(),(a,l)=>{l.event.raw.propertyName==="width"&&(cn(a.element,t5),So(a.element,"width"))}),Te(wv,(a,l)=>{const u=a.element;So(u,"width");const g=ar(u);An.setContent(a,l.event.contents),Tn(u,t5);const f=ar(u);fe(u,"width",g+"px"),An.getContent(a).each(y=>{l.event.focus.bind(C=>(Na(C),ec(u))).orThunk(()=>(Ct.focusIn(y),li(Jr(u))))}),setTimeout(()=>{fe(a.element,"width",f+"px")},0)}),Te(y7,(a,l)=>{An.getContent(a).each(u=>{r.set(r.get().concat([{bar:u,focus:li(Jr(a.element))}]))}),wt(a,wv,{contents:l.event.forwardContents,focus:E.none()})}),Te(w7,(a,l)=>{Ol(r.get()).each(u=>{r.set(r.get().slice(0,r.get().length-1)),wt(a,wv,{contents:Ts(u.bar),focus:u.focus})})})]),Ct.config({mode:"special",onEscape:a=>Ol(r.get()).fold(()=>t.onEscape(),l=>(vo(a,w7),E.some(!0)))})]),lazySink:()=>Gt.value(t.sink)})},Cv="tox-pop--transition",C7=(t,r,a,l)=>{const u=l.backstage,g=u.shared,f=ds().deviceType.isTouch,y=gn(),C=gn(),_=gn(),T=Mr(f4({sink:a,onEscape:()=>(t.focus(),E.some(!0))})),D=()=>{const je=_.get().getOr("node"),qe=JT(je)?1:0;return p7(t,g,je,qe)},R=()=>!t.removed&&!(f()&&u.isContextMenuOpen()),V=je=>Xr(ol(je,y.get(),Fo),!0),Q=()=>{if(R()){const je=D(),qe=Xr(_.get(),"node")?eZ(t,y.get()):QT(t);return je.height<=0||!Uf(qe,je,.01)}else return!0},le=()=>{y.clear(),C.clear(),_.clear(),An.hide(T)},Oe=()=>{if(An.isOpen(T)){const je=T.element;So(je,"display"),Q()?fe(je,"display","none"):(C.set(0),An.reposition(T))}},Y=je=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[je],behaviours:ze([Ct.config({mode:"acyclic"}),qt("pop-dialog-wrap-events",[yn(qe=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Ct.focusIn(qe))}),Ga(qe=>{t.shortcuts.remove("ctrl+F9")})])])}),ne=Lo(()=>uZ(r,je=>{const qe=Pe([je]);wt(T,y7,{forwardContents:Y(qe)})})),be=(je,qe)=>d4(t,{buttons:je,toolbar:qe.items,allowToolbarGroups:!1},l.backstage,E.some(["form:"])),pe=(je,qe)=>Qz.buildInitGroups(je,qe),Pe=je=>{const{buttons:qe}=t.ui.registry.getAll(),Et=ne(),yo={...qe,...Et.formNavigators},kn=z0(t)===hi.scrolling?hi.scrolling:hi.default,Ze=$t(Ne(je,mt=>mt.type==="contexttoolbar"?be(yo,mt):pe(mt,g.providers)));return r4({type:kn,uid:Qe("context-toolbar"),initGroups:Ze,onEscape:E.none,cyclicKeying:!0,providers:g.providers})},Ge=(je,qe)=>{const Et=je==="node"?g.anchors.node(qe):g.anchors.cursor(),yo=aZ(t,je,f(),{lastElement:y.get,isReposition:()=>Xr(C.get(),0),getMode:()=>zs.getMode(a)});return ot(Et,yo)},st=(je,qe)=>{if(io.cancel(),!R())return;const Et=Pe(je),yo=je[0].position,kn=Ge(yo,qe);_.set(yo),C.set(1);const Ze=T.element;So(Ze,"display"),V(qe)||(cn(Ze,Cv),zs.reset(a,T)),An.showWithinBounds(T,Y(Et),{anchor:kn,transition:{classes:[Cv],mode:"placement"}},()=>E.some(D())),qe.fold(y.clear,y.set),Q()&&fe(Ze,"display","none")};let pt=!1;const io=uO(()=>{if(!(!t.hasFocus()||t.removed||pt))if(cr(T.element,Cv))io.throttle();else{const je=ne();dZ(je,t).fold(le,qe=>{st(qe.toolbars,E.some(qe.elem))})}},17);t.on("init",()=>{t.on("remove",le),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Oe),t.on("click keyup focus SetContent",io.throttle),t.on(YT,le),t.on(Kz,je=>{const qe=ne();nt(qe.lookupTable,je.toolbarKey).each(Et=>{st([Et],It(je.target!==t,je.target)),An.getContent(T).each(Ct.focusIn)})}),t.on("focusout",je=>{ox.setEditorTimeout(t,()=>{ec(a.element).isNone()&&ec(T.element).isNone()&&le()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&le()}),t.on("AfterProgressState",je=>{je.state?le():t.hasFocus()&&io.throttle()}),t.on("dragstart",()=>{pt=!0}),t.on("dragend drop",()=>{pt=!1}),t.on("NodeChange",je=>{ec(T.element).fold(io.throttle,G)})})},mZ=t=>{ct([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:vi(t,r.cmd),onSetup:Vy(t,r.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Pa(t),onAction:vi(t,"JustifyNone")})},x7=(t,r)=>{const a=()=>{const l=r.getOptions(t),u=r.getCurrent(t).map(r.hash),g=gn();return Ne(l,f=>({type:"togglemenuitem",text:r.display(f),onSetup:y=>{const C=T=>{T&&(g.on(D=>D.setActive(!1)),g.set(y)),y.setActive(T)};C(Xr(u,r.hash(f)));const _=r.watcher(t,f,C);return()=>{g.clear(),_()}},onAction:()=>r.setCurrent(t,f)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(a()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:a,onSetup:r.onMenuSetup})},gZ=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:vD,hash:r=>gz(r,["fixed","relative","empty"]).getOr(r),display:ao,watcher:(r,a,l)=>r.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:r=>E.from(r.queryCommandValue("LineHeight")),setCurrent:(r,a)=>r.execCommand("LineHeight",!1,a),onToolbarSetup:Pa(t),onMenuSetup:Pa(t)}),hZ=t=>E.from(nD(t)).map(r=>({name:"language",text:"Language",icon:"language",getOptions:re(r),hash:a=>Hn(a.customCode)?a.code:`${a.code}/${a.customCode}`,display:a=>a.title,watcher:(a,l,u)=>{var g;return a.formatter.formatChanged("lang",u,!1,{value:l.code,customValue:(g=l.customCode)!==null&&g!==void 0?g:null}).unbind},getCurrent:a=>{const l=Xe.fromDom(a.selection.getNode());return Ac(l,u=>E.some(u).filter(nr).bind(g=>_t(g,"lang").map(f=>{const y=_t(g,"data-mce-lang").getOrUndefined();return{code:f,customCode:y,title:""}})))},setCurrent:(a,l)=>a.execCommand("Lang",!1,l),onToolbarSetup:a=>{const l=Yn();return a.setActive(t.formatter.match("lang",{},void 0,!0)),l.set(t.formatter.formatChanged("lang",a.setActive,!0)),sc(l.clear,Pa(t)(a))},onMenuSetup:Pa(t)})),pZ=t=>{x7(t,gZ(t)),hZ(t).each(r=>x7(t,r))},v4=(t,r)=>{i4(t,r),dz(t,r),kz(t,r),$8(t,r),xz(t,r)},S7=t=>Hh(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),k7=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:S7(t),onAction:vi(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Pa(t),onAction:vi(t,"indent")})},_7=t=>{k7(t)},o5=(t,r)=>a=>{a.setActive(r.get());const l=u=>{r.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",l),sc(()=>t.off("PastePlainTextToggle",l),Pa(t)(a))},fZ=t=>{const r=Lt(mD(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:o5(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:o5(t,r)})},b4=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},vZ=t=>{ed.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,a)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Vy(t,r.name),onAction:b4(t,r.name)})});for(let r=1;r<=6;r++){const a="h"+r;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+r,onSetup:Vy(t,a),onAction:b4(t,a)})}},bZ=t=>{ed.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:vi(t,r.action)})}),ed.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Pa(t),onAction:vi(t,r.action)})})},yZ=t=>{ed.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:vi(t,r.action),onSetup:Vy(t,r.name)})})},wZ=t=>{vZ(t),bZ(t),yZ(t)},CZ=t=>{ed.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:vi(t,r.action)})}),ed.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:Pa(t),onAction:vi(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Pa(t),onAction:b4(t,"code")})},b2=t=>{wZ(t),CZ(t)},y4=(t,r)=>Hh(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),xZ=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:y4(t,"hasUndo"),onAction:vi(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:y4(t,"hasRedo"),onAction:vi(t,"redo")})},SZ=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:y4(t,"hasUndo"),onAction:vi(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:y4(t,"hasRedo"),onAction:vi(t,"redo")})},E7=t=>{xZ(t),SZ(t)},kZ=t=>Hh(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),O7=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:kZ(t),onAction:vi(t,"mceToggleVisualAid")})},_Z=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:vi(t,"mceToggleVisualAid")})},EZ=t=>{_Z(t),O7(t)},OZ=(t,r)=>{mZ(t),b2(t),v4(t,r),E7(t),nB(t),EZ(t),_7(t),pZ(t),fZ(t)},TZ=t=>Kt(t)?t.split(/[ ,]/):t,T7=t=>r=>r.options.get(t),y2=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Kt(a)||Cn(a,Kt)?{value:TZ(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},n5=T7("contextmenu_never_use_native"),AZ=T7("contextmenu_avoid_overlap"),DZ=t=>r5(t).length===0,r5=t=>{const r=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:qo(a,l=>wo(r,l))},Wf=(t,r)=>({type:"makeshift",x:t,y:r}),A7=(t,r,a)=>Wf(t.x+r,t.y+a),s5=t=>t.type==="longpress"||t.type.indexOf("touch")===0,MZ=t=>{if(s5(t)){const r=t.touches[0];return Wf(r.pageX,r.pageY)}else return Wf(t.pageX,t.pageY)},xv=t=>{if(s5(t)){const r=t.touches[0];return Wf(r.clientX,r.clientY)}else return Wf(t.clientX,t.clientY)},w4=(t,r)=>{const a=I0.DOM.getPos(t);return A7(r,a.x,a.y)},a5=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?MZ(r):w4(t.getContentAreaContainer(),xv(r)):i5(t),i5=t=>({type:"selection",root:Xe.fromDom(t.selection.getNode())}),D7=t=>({type:"node",node:E.some(Xe.fromDom(t.selection.getNode())),root:Xe.fromDom(t.getBody())}),M7=(t,r,a)=>{switch(a){case"node":return D7(t);case"point":return a5(t,r);case"selection":return i5(t)}},N7=(t,r,a,l,u,g)=>{const f=a(),y=M7(t,r,g);iv(f,Bd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:E.none()}).map(C=>{r.preventDefault(),An.showMenuAt(u,{anchor:y},{menu:{markers:hg("normal")},data:C})})},NZ={onLtr:()=>[Wr,As,gs,ha,Da,Ds,td,i2,a2,DS,s2,r2],onRtl:()=>[Wr,gs,As,Da,ha,Ds,td,i2,s2,r2,a2,DS]},RZ=12,LZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},HZ=(t,r)=>{const a=t.selection;if(a.isCollapsed()||r.touches.length<1)return!1;{const l=r.touches[0],u=a.getRng();return Wp(t.getWin(),Ra.domRange(u)).exists(g=>g.left<=l.clientX&&g.right>=l.clientX&&g.top<=l.clientY&&g.bottom>=l.clientY)}},PZ=t=>{const r=t.selection.getRng(),a=()=>{ox.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),g()};t.once("touchend",a);const l=f=>{f.preventDefault(),f.stopImmediatePropagation()};t.on("mousedown",l,!0);const u=()=>g();t.once("longpresscancel",u);const g=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",l)}},R7=(t,r,a)=>{const l=M7(t,r,a);return{bubble:Bc(0,a==="point"?RZ:0,LZ),layouts:NZ,overrides:{maxWidthFunction:xT(),maxHeightFunction:Yg()},...l}},C4=(t,r,a,l,u,g,f)=>{const y=R7(t,r,g);iv(a,Bd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:E.none()}).map(C=>{r.preventDefault();const _=f?Qa.HighlightMenuAndItem:Qa.HighlightNone;An.showMenuWithinBounds(u,{anchor:y},{menu:{markers:hg("normal"),highlightOnOpen:_},data:C,type:"horizontal"},()=>E.some(p7(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(YT)})},L7=(t,r,a,l,u,g)=>{const f=ds(),y=f.os.isiOS(),C=f.os.isMacOS(),_=f.os.isAndroid(),T=f.deviceType.isTouch(),D=()=>!(_||y||C&&T),R=()=>{const V=a();C4(t,r,V,l,u,g,D())};if((C||y)&&g!=="node"){const V=()=>{PZ(t),R()};HZ(t,r)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else R()},l5=t=>Kt(t)?t==="|":t.type==="separator",w2={type:"separator"},H7=t=>{const r=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Kt(t))return t;switch(t.type){case"separator":return w2;case"submenu":return{type:"nestedmenuitem",...r(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Kt(l)?l:Ne(l,H7)}};default:const a=t;return{type:"menuitem",...r(a),onAction:Nt(a.onAction)}}},c5=(t,r)=>{if(r.length===0)return t;const a=Ol(t).filter(l=>!l5(l)).fold(()=>[],l=>[w2]);return t.concat(a).concat(r).concat([w2])},BZ=(t,r,a)=>{const l=Io(r,(u,g)=>nt(t,g.toLowerCase()).map(f=>{const y=f.update(a);if(Kt(y)&&Hs(Yr(y)))return c5(u,y.split(" "));if(Xt(y)&&y.length>0){const C=Ne(y,H7);return c5(u,C)}else return u}).getOrThunk(()=>u.concat([g])),[]);return l.length>0&&l5(l[l.length-1])&&l.pop(),l},IZ=(t,r)=>r.ctrlKey&&!n5(t),x4=t=>t.type==="longpress"||wo(t,"touches"),d5=(t,r)=>!x4(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),P7=(t,r)=>d5(t,r)?t.selection.getStart(!0):r.target,FZ=(t,r)=>{const a=AZ(t),l=d5(t,r)?"selection":"point";if(Hs(a)){const u=P7(t,r);return Uy(Xe.fromDom(u),a)?"node":l}else return l},VZ=(t,r,a)=>{const l=ds().deviceType.isTouch,u=Mr(An.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:ze([qt("dismissContextMenu",[Te(Su(),(y,C)=>{Yt.close(y),t.focus()})])])})),g=()=>An.hide(u),f=y=>{if(n5(t)&&y.preventDefault(),IZ(t,y)||DZ(t))return;const C=FZ(t,y),_=()=>{const T=P7(t,y),D=t.ui.registry.getAll(),R=r5(t);return BZ(D.contextMenus,R,T)};(l()?L7:N7)(t,y,_,a,u,C)};t.on("init",()=>{const y="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");t.on(y,g),t.on("longpress contextmenu",f)})},u5=Ea.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),S4=t=>r=>r.translate(-t.left,-t.top),C2=t=>r=>r.translate(t.left,t.top),am=t=>(r,a)=>Io(t,(l,u)=>u(l),mn(r,a)),k4=(t,r,a)=>t.fold(am([C2(a),S4(r)]),am([S4(r)]),am([])),Sv=(t,r,a)=>t.fold(am([C2(a)]),am([]),am([C2(r)])),m5=(t,r,a)=>t.fold(am([]),am([S4(a)]),am([C2(r),S4(a)])),zZ=(t,r,a,l,u,g)=>{const f=Sv(t,u,g),y=Sv(r,u,g);return Math.abs(f.left-y.left)<=a&&Math.abs(f.top-y.top)<=l},ZZ=(t,r,a,l,u,g)=>{const f=Sv(t,u,g),y=Sv(r,u,g),C=Math.abs(f.left-y.left),_=Math.abs(f.top-y.top);return mn(C,_)},B7=(t,r,a)=>{const l=t.fold((u,g)=>({position:E.some("absolute"),left:E.some(u+"px"),top:E.some(g+"px")}),(u,g)=>({position:E.some("absolute"),left:E.some(u-a.left+"px"),top:E.some(g-a.top+"px")}),(u,g)=>({position:E.some("fixed"),left:E.some(u+"px"),top:E.some(g+"px")}));return{right:E.none(),bottom:E.none(),...l}},UZ=(t,r,a)=>t.fold((l,u)=>kv(l+r,u+a),(l,u)=>Kh(l+r,u+a),(l,u)=>jf(l+r,u+a)),g5=(t,r,a,l)=>{const u=(g,f)=>(y,C)=>{const _=g(r,a,l);return f(y.getOr(_.left),C.getOr(_.top))};return t.fold(u(m5,kv),u(Sv,Kh),u(k4,jf))},kv=u5.offset,Kh=u5.absolute,jf=u5.fixed,_4=(t,r)=>{const a=lt(t,r);return Hn(a)?NaN:parseInt(a,10)},I7=(t,r)=>{const a=t.element,l=_4(a,r.leftAttr),u=_4(a,r.topAttr);return isNaN(l)||isNaN(u)?E.none():E.some(mn(l,u))},F7=(t,r,a)=>{const l=t.element;Z(l,r.leftAttr,a.left+"px"),Z(l,r.topAttr,a.top+"px")},WZ=(t,r)=>{const a=t.element;Co(a,r.leftAttr),Co(a,r.topAttr)},jZ=(t,r,a,l)=>I7(t,r).fold(()=>a,u=>jf(u.left+l.left,u.top+l.top)),$Z=(t,r,a,l,u,g)=>{const f=jZ(t,r,a,l),y=r.mustSnap?z7(t,r,f,u,g):KZ(t,r,f,u,g),C=k4(f,u,g);return F7(t,r,C),y.fold(()=>({coord:jf(C.left,C.top),extra:E.none()}),_=>({coord:_.output,extra:_.extra}))},GZ=(t,r)=>{WZ(t,r)},V7=(t,r,a,l)=>Kn(t,u=>{const g=u.sensor;return zZ(r,g,u.range.left,u.range.top,a,l)?E.some({output:g5(u.output,r,a,l),extra:u.extra}):E.none()}),z7=(t,r,a,l,u)=>{const g=r.getSnapPoints(t);return V7(g,a,l,u).orThunk(()=>Io(g,(f,y)=>{const C=y.sensor,_=ZZ(a,C,y.range.left,y.range.top,l,u);return f.deltas.fold(()=>({deltas:E.some(_),snap:E.some(y)}),T=>{const D=(_.left+_.top)/2,R=(T.left+T.top)/2;return D<=R?{deltas:E.some(_),snap:E.some(y)}:f})},{deltas:E.none(),snap:E.none()}).snap.map(f=>({output:g5(f.output,a,l,u),extra:f.extra})))},KZ=(t,r,a,l,u)=>{const g=r.getSnapPoints(t);return V7(g,a,l,u)},Z7=(t,r,a)=>({coord:g5(t.output,t.output,r,a),extra:t.extra});var qZ=Object.freeze({__proto__:null,snapTo:(t,r,a,l)=>{const u=r.getTarget(t.element);if(r.repositionTarget){const g=Or(t.element),f=ka(g),y=WR(u),C=Z7(l,f,y),_=B7(C.coord,f,y);Xs(u,_)}}});const h5="data-initial-z-index",p5=t=>{cs(t.element).filter(nr).each(r=>{_t(r,h5).fold(()=>So(r,"z-index"),a=>fe(r,"z-index",a)),Co(r,h5)})},XZ=t=>{cs(t.element).filter(nr).each(r=>{ln(r,"z-index").each(a=>{Z(r,h5,a)}),fe(r,"z-index",Ir(t.element,"z-index"))})},f5=(t,r)=>{t.getSystem().addToGui(r),XZ(r)},YZ=t=>{p5(t),t.getSystem().removeFromGui(t)},U7=(t,r,a)=>t.getSystem().build(Fd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:a}));var v5=_a("snaps",[Re("getSnapPoints"),mo("onSensor"),Re("leftAttr"),Re("topAttr"),ge("lazyViewport",Is),ge("mustSnap",!1)]);const b5=[ge("useFixed",Ue),Re("blockerClass"),ge("getTarget",ao),ge("onDrag",G),ge("repositionTarget",!0),ge("onDrop",G),zn("getBounds",Is),v5],QZ=t=>Dl(ln(t,"left"),ln(t,"top"),ln(t,"position"),(r,a,l)=>(l==="fixed"?jf:kv)(parseInt(r,10),parseInt(a,10))).getOrThunk(()=>{const r=Ys(t);return Kh(r.left,r.top)}),JZ=(t,r,a,l,u)=>{const g=u.bounds,f=Sv(r,a,l),y=Aa(f.left,g.x,g.x+g.width-u.width),C=Aa(f.top,g.y,g.y+g.height-u.height),_=Kh(y,C);return r.fold(()=>{const T=m5(_,a,l);return kv(T.left,T.top)},re(_),()=>{const T=k4(_,a,l);return jf(T.left,T.top)})},eU=(t,r,a,l,u,g,f)=>{const y=r.fold(()=>{const C=UZ(a,g.left,g.top),_=k4(C,l,u);return jf(_.left,_.top)},C=>{const _=$Z(t,C,a,g,l,u);return _.extra.each(T=>{C.onSensor(t,T)}),_.coord});return JZ(t,y,l,u,f)},tU=(t,r,a,l)=>{const u=r.getTarget(t.element);if(r.repositionTarget){const g=Or(t.element),f=ka(g),y=WR(u),C=QZ(u),_=eU(t,r.snaps,C,f,y,l,a),T=B7(_,f,y);Xs(u,T)}r.onDrag(t,u,l)},y5=(t,r)=>({bounds:t.getBounds(),height:Fl(r.element),width:ll(r.element)}),w5=(t,r,a,l,u)=>{const g=a.update(l,u),f=a.getStartData().getOrThunk(()=>y5(r,t));g.each(y=>{tU(t,r,f,y)})},W7=(t,r,a,l)=>{r.each(YZ),a.snaps.each(g=>{GZ(t,g)});const u=a.getTarget(t.element);l.reset(),a.onDrop(t,u)},C5=t=>(r,a)=>{const l=u=>{a.setStartData(y5(r,u))};return on([Te(bn(),u=>{a.getStartData().each(()=>l(u))}),...t(r,a,l)])},oU=t=>on([Te(Oa(),t.forceDrop),Te(Gv(),t.drop),Te(Lg(),(r,a)=>{t.move(a.event)}),Te($v(),t.delayDrop)]);var nU=Object.freeze({__proto__:null,getData:t=>E.from(mn(t.x,t.y)),getDelta:(t,r)=>mn(r.left-t.left,r.top-t.top)});const j7=(t,r,a)=>[Te(Oa(),(l,u)=>{if(u.event.raw.button!==0)return;u.stop();const g=()=>W7(l,E.some(C),t,r),f=JM(g,200),y={drop:g,delayDrop:f.schedule,forceDrop:g,move:_=>{f.cancel(),w5(l,t,r,nU,_)}},C=U7(l,t.blockerClass,oU(y));a(l),f5(l,C)})],rU=[...b5,ce("dragger",{handlers:C5(j7)})],sU=t=>on([Te(hl(),t.forceDrop),Te(Pm(),t.drop),Te(p1(),t.drop),Te(wu(),(r,a)=>{t.move(a.event)})]),$7=t=>{const r=t[0];return E.some(mn(r.clientX,r.clientY))};var G7=Object.freeze({__proto__:null,getData:t=>{const r=t.raw.touches;return r.length===1?$7(r):E.none()},getDelta:(t,r)=>mn(r.left-t.left,r.top-t.top)});const x5=(t,r,a)=>{const l=gn(),u=g=>{W7(g,l.get(),t,r),l.clear()};return[Te(hl(),(g,f)=>{f.stop();const y=()=>u(g),C={drop:y,delayDrop:G,forceDrop:y,move:T=>{w5(g,t,r,G7,T)}},_=U7(g,t.blockerClass,sU(C));l.set(_),a(g),f5(g,_)}),Te(wu(),(g,f)=>{f.stop(),w5(g,t,r,G7,f.event)}),Te(Pm(),(g,f)=>{f.stop(),u(g)}),Te(p1(),u)]},aU=[...b5,ce("dragger",{handlers:C5(x5)})],iU=(t,r,a)=>[...j7(t,r,a),...x5(t,r,a)],lU=[...b5,ce("dragger",{handlers:C5(iU)})];var $f=Object.freeze({__proto__:null,mouse:rU,touch:aU,mouseOrTouch:lU}),K7=Object.freeze({__proto__:null,init:()=>{let t=E.none(),r=E.none();const a=()=>{t=E.none(),r=E.none()},l=(C,_)=>{const T=t.map(D=>C.getDelta(D,_));return t=E.some(_),T},u=(C,_)=>C.getData(_).bind(T=>l(C,T)),g=C=>{r=E.some(C)},f=()=>r,y=re({});return Ka({readState:y,reset:a,update:u,getStartData:f,setStartData:g})}});const Gf=bb({branchKey:"mode",branches:$f,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:E.from(t.extra)})},state:K7,apis:qZ}),S5=40,E4=S5/2,q7=(t,r,a,l,u,g)=>t.fold(()=>Gf.snap({sensor:Kh(a-E4,l-E4),range:mn(u,g),output:Kh(E.some(a),E.some(l)),extra:{td:r}}),f=>{const y=a-E4,C=l-E4,_=S5,T=S5,D=f.element.dom.getBoundingClientRect();return Gf.snap({sensor:Kh(y,C),range:mn(_,T),output:Kh(E.some(a-D.width/2),E.some(l-D.height/2)),extra:{td:r}})}),k5=(t,r,a)=>{const l=(u,g)=>u.exists(f=>Fo(f,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,g)=>{const f=g.td;l(r.get(),f)||(r.set(f),a(f))},mustSnap:!0}},X7=t=>Eo(js.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ze([Gf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Gy.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),cU=(t,r)=>{const a=Lt([]),l=Lt([]),u=Lt(!1),g=gn(),f=gn(),y=st=>{const pt=_s(st);return q7(V.getOpt(r),st,pt.x,pt.y,pt.width,pt.height)},C=()=>Ne(a.get(),st=>y(st)),_=st=>{const pt=_s(st);return q7(Q.getOpt(r),st,pt.right,pt.bottom,pt.width,pt.height)},T=()=>Ne(l.get(),st=>_(st)),D=k5(C,g,st=>{f.get().each(pt=>{t.dispatch("TableSelectorChange",{start:st,finish:pt})})}),R=k5(T,f,st=>{g.get().each(pt=>{t.dispatch("TableSelectorChange",{start:pt,finish:st})})}),V=X7(D),Q=X7(R),le=Mr(V.asSpec()),Oe=Mr(Q.asSpec()),Y=(st,pt,io,je)=>{const qe=pt.dom.getBoundingClientRect();So(st.element,"display");const Et=bc(Xe.fromDom(t.getBody())).dom.innerHeight,yo=io(qe),kn=je(qe,Et);(yo||kn)&&fe(st.element,"display","none")},ne=(st,pt,io,je)=>{const qe=io(pt);Gf.snapTo(st,qe),Y(st,pt,Et=>Et[je]<0,(Et,yo)=>Et[je]>yo)},be=st=>ne(le,st,y,"top"),pe=()=>g.get().each(be),Pe=st=>ne(Oe,st,_,"bottom"),Ge=()=>f.get().each(Pe);ds().deviceType.isTouch()&&(t.on("TableSelectionChange",st=>{u.get()||(yr(r,le),yr(r,Oe),u.set(!0)),g.set(st.start),f.set(st.finish),st.otherCells.each(pt=>{a.set(pt.upOrLeftCells),l.set(pt.downOrRightCells),be(st.start),Pe(st.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{pe(),Ge()}),t.on("TableSelectionClear",()=>{u.get()&&(Qn(le),Qn(Oe),u.set(!1)),g.clear(),f.clear()}))};var dU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const uU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",mU=(t,r,a)=>{var l;const u=(l=r.delimiter)!==null&&l!==void 0?l:"›",g=(_,T,D)=>js.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":D,"aria-level":D+1}},components:[Un(_)],action:R=>{t.focus(),t.selection.select(T),t.nodeChanged()},buttonBehaviours:ze([Gi.button(a.isDisabled),ss()])}),f=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Un(` ${u} `)]}),y=_=>Io(_,(T,D,R)=>{const V=g(D.name,D.element,R);return R===0?T.concat([V]):T.concat([f(),V])},[]),C=_=>{const T=[];let D=_.length;for(;D-- >0;){const R=_[D];if(R.nodeType===1&&!uU(R)){const V=GP(t,R);if(V.isDefaultPrevented()||T.push({name:V.name,element:R}),V.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ze([Ct.config({mode:"flow",selector:"div[role=button]"}),Tt.config({disabled:a.isDisabled}),ss(),Wn.config({}),Wt.config({}),qt("elementPathEvents",[yn((_,T)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Ct.focusIn(_)),t.on("NodeChange",D=>{const R=C(D.parents),V=R.length>0?y(R):[];Wt.set(_,V)})})])]),components:[]}};var qh;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(qh||(qh={}));const gU=(t,r,a,l,u)=>{const g={height:g4(l+r.top,m_(t),gg(t))};return a===qh.Both&&(g.width=g4(u+r.left,u_(t),V0(t))),g},Y7=(t,r,a)=>{const l=Xe.fromDom(t.getContainer()),u=gU(t,r,a,sr(l),ar(l));Bn(u,(g,f)=>{Ns(g)&&fe(l,f,KT(g))}),WP(t)},hU=t=>{const r=uD(t);return r===!1?qh.None:r==="both"?qh.Both:qh.Vertical},O4=(t,r,a,l)=>{const u=mn(a*20,l*20);return Y7(t,u,r),E.some(!0)},Q7=(t,r)=>{const a=hU(t);if(a===qh.None)return E.none();const l=a===qh.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return E.some(Gc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize"),"aria-label":r.translate(l)},behaviours:[Gf.config({mode:"mouse",repositionTarget:!1,onDrag:(u,g,f)=>Y7(t,f,a),blockerClass:"tox-blocker"}),Ct.config({mode:"special",onLeft:()=>O4(t,a,-1,0),onRight:()=>O4(t,a,1,0),onUp:()=>O4(t,a,0,-1),onDown:()=>O4(t,a,0,1)}),Wn.config({}),Pt.config({})]},r.icons))},J7=(t,r)=>{const a=(l,u,g)=>Wt.set(l,[Un(r.translate(["{0} "+g,u[g]]))]);return js.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ze([Gi.button(r.isDisabled),ss(),Wn.config({}),Wt.config({}),Je.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),qt("wordcount-events",[ql(l=>{const u=Je.getValue(l),g=u.mode==="words"?"characters":"words";Je.setValue(l,{mode:g,count:u.count}),a(l,u.count,g)}),yn(l=>{t.on("wordCountUpdate",u=>{const{mode:g}=Je.getValue(l);Je.setValue(l,{mode:g,count:u.wordCount}),a(l,u.wordCount,g)})})])]),eventOrder:{[$a()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},pU=(t,r)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":xl.translate(["Powered by {0}","Tiny"])},innerHtml:dU.trim()},behaviours:ze([Pt.config({})])}]}),l=()=>{const f=cM("Alt+0"),y="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Un(xl.translate([y,f]))]}},u=()=>{const f=[];return t.hasPlugin("wordcount")&&f.push(J7(t,r)),b_(t)&&f.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:f}},g=()=>{const f=[],y=pD(t),C=dD(t),_=b_(t)||t.hasPlugin("wordcount"),T=()=>{const D="tox-statusbar__text-container--flex-start",R="tox-statusbar__text-container--flex-end",V="tox-statusbar__text-container--space-around";if(y){const Q="tox-statusbar__text-container-3-cols";return!_&&!C?[Q,V]:_&&!C?[Q,R]:[Q,D]}return[_&&!C?R:D]};return C&&f.push(mU(t,{},r)),y&&f.push(l()),_&&f.push(u()),f.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...T()]},components:f}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const f=g(),y=Q7(t,r);return f.concat(y.toArray())})()}},_v=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),fU=(t,r)=>{const a=t.inline,l=a?$z:Fz,u=Ey(t)?r8:cT,g=Gz(),f=gn(),y=gn(),C=gn(),_=ds().deviceType.isTouch()?["tox-platform-touch"]:[],T=C_(t),D=z0(t),R=Eo({dom:{tag:"div",classes:["tox-anchorbar"]}}),V=Eo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Q=()=>g.mainUi.get().map(at=>at.outerContainer).bind(Uo.getHeader),le=()=>Gt.fromOption(g.dialogUi.get().map(at=>at.sink),"UI has not been rendered"),Oe=()=>Gt.fromOption(g.popupUi.get().map(at=>at.sink),"(popup) UI has not been rendered"),Y=g.lazyGetInOuterOrDie("anchor bar",R.getOpt),ne=g.lazyGetInOuterOrDie("bottom anchor bar",V.getOpt),be=g.lazyGetInOuterOrDie("toolbar",Uo.getToolbar),pe=g.lazyGetInOuterOrDie("throbber",Uo.getThrobber),Pe=E9({popup:Oe,dialog:le},t,Y,ne),Ge=()=>{const at={attributes:{[Db]:T?Ic.BottomToTop:Ic.TopToBottom}},Bt=Uo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Pe.popup,onEscape:()=>{t.focus()}}),oe=Uo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Pe.popup.shared.getSink,providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:lm=>{yM(t,lm)},type:D,lazyToolbar:be,lazyHeader:()=>Q().getOrDie("Could not find header element"),...at}),se=Uo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},type:D}),ke=_y(t),_e=U0(t),rt=Sx(t),ro=hD(t),eo=st(),Cr=ke||_e||rt,jn=()=>ke?[se]:_e?[oe]:[],im=ro?[eo,Bt]:[Bt];return Uo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Cr?[]:["tox-editor-header--empty"]),...at},components:$t([rt?im:[],jn(),W0(t)?[]:[R.asSpec()]]),sticky:Ey(t),editor:t,sharedBackstage:Pe.popup.shared})},st=()=>Uo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),pt=()=>{const at=Uo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Bt=Uo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[at,Bt]}},io=()=>{const at=S_(t),Bt=Fo(Br(),at)&&Ir(at,"display")==="grid",oe={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(_),attributes:{...xl.isRtl()?{dir:"rtl"}:{}}},behaviours:ze([zs.config({useFixed:()=>u.isDocked(Q)})])},se={dom:{styles:{width:document.body.clientWidth+"px"}},events:on([Te(Mc(),rt=>{fe(rt.element,"width",document.body.clientWidth+"px")})])},ke=Mr(ot(oe,Bt?se:{})),_e=RE(ke);return y.set(_e),{sink:ke,mothership:_e}},je=()=>{const at={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(_),attributes:{...xl.isRtl()?{dir:"rtl"}:{}}},behaviours:ze([zs.config({useFixed:()=>u.isDocked(Q),getBounds:()=>r.getPopupSinkBounds()})])},Bt=Mr(at),oe=RE(Bt);return C.set(oe),{sink:Bt,mothership:oe}},qe=()=>{const at=Ge(),Bt=pt(),oe=Uo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Pe.popup}),se=Uo.parts.viewWrapper({backstage:Pe.popup}),ke=cD(t)&&!a?E.some(pU(t,Pe.popup.shared.providers)):E.none(),_e=$t([T?[]:[at],a?[]:[Bt],T?[at]:[]]),rt=Uo.parts.editorContainer({components:$t([_e,a?[]:[V.asSpec(),...ke.toArray()]])}),ro=k_(t),eo={role:"application",...xl.isRtl()?{dir:"rtl"}:{},...ro?{"aria-hidden":"true"}:{}},Cr=Mr(Uo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(T?["tox-tinymce--toolbar-bottom"]:[]).concat(_),styles:{visibility:"hidden",...ro?{opacity:"0",border:"0"}:{}},attributes:eo},components:[rt,...a?[]:[se],oe],behaviours:ze([ss(),Tt.config({disableClass:"tox-tinymce--disabled"}),Ct.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),jn=RE(Cr);return f.set(jn),{mothership:jn,outerContainer:Cr}},Et=at=>{const Bt=KT(zz(t)),oe=KT(Zz(t));return t.inline||(Sg("div","width",oe)&&fe(at.element,"width",oe),Sg("div","height",Bt)?fe(at.element,"height",Bt):fe(at.element,"height","400px")),Bt},yo=at=>{t.addShortcut("alt+F9","focus menubar",()=>{Uo.focusMenubar(at)}),t.addShortcut("alt+F10","focus toolbar",()=>{Uo.focusToolbar(at)}),t.addCommand("ToggleToolbarDrawer",(Bt,oe)=>{oe!=null&&oe.skipFocus?Uo.toggleToolbarDrawerWithoutFocusing(at):Uo.toggleToolbarDrawer(at)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Uo.isToolbarDrawerToggled(at))},kn=at=>{const{mainUi:Bt,popupUi:oe,uiMotherships:se}=at;an(h_(t),(Ci,cm)=>{t.ui.registry.addGroupToolbarButton(cm,Ci)});const{buttons:ke,menuItems:_e,contextToolbars:rt,sidebars:ro,views:eo}=t.ui.registry.getAll(),Cr=w_(t),jn={menuItems:_e,menus:bD(t),menubar:Z0(t),toolbar:Cr.getOrThunk(()=>yx(t)),allowToolbarGroups:D===hi.floating,buttons:ke,sidebar:ro,views:eo};yo(Bt.outerContainer),FR(t,Bt.mothership,se),u.setup(t,Pe.popup.shared,Q),OZ(t,Pe.popup),VZ(t,Pe.popup.shared.getSink,Pe.popup),$S(t),pV(t,pe,Pe.popup.shared),C7(t,rt,oe.sink,{backstage:Pe.popup}),cU(t,oe.sink);const im=t.getElement(),lm=Et(Bt.outerContainer),Jh={targetNode:im,height:lm};return l.render(t,at,jn,Pe.popup,Jh)},Ze=at=>(C.set(at.mothership),at),mt=()=>{const at=qe(),Bt=io(),oe=Eh(t)?je():Ze(Bt);g.dialogUi.set(Bt),g.popupUi.set(oe),g.mainUi.set(at);const se={popupUi:oe,dialogUi:Bt,mainUi:at,uiMotherships:g.getUiMotherships()};return kn(se)};return{popups:{backstage:Pe.popup,getMothership:()=>_v("popups",C)},dialogs:{backstage:Pe.dialog,getMothership:()=>_v("dialogs",y)},renderUI:mt}},vU=(t,r)=>{const a=_t(t,"id").fold(()=>{const l=Qe("dialog-label");return Z(r,"id",l),l},ao);Z(t,"aria-labelledby",a)},_5=re([Re("lazySink"),_o("dragBlockClass"),zn("getBounds",Is),ge("useTabstopAt",De),ge("firstTabstop",0),ge("eventOrder",{}),Nr("modalBehaviours",[Ct]),ts("onExecute"),I1("onEscape")]),E5={sketch:ao},bU=re([di({name:"draghandle",overrides:(t,r)=>({behaviours:ze([Gf.config({mode:"mouse",getTarget:a=>kd(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Us({schema:[Re("dom")],name:"title"}),Us({factory:E5,schema:[Re("dom")],name:"close"}),Us({factory:E5,schema:[Re("dom")],name:"body"}),di({factory:E5,schema:[Re("dom")],name:"footer"}),hs({factory:{sketch:(t,r)=>({...t,dom:r.dom,components:r.components})},schema:[ge("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ge("components",[])],name:"blocker"})]),yU=(t,r,a,l)=>{const u=gn(),g=V=>{u.set(V);const Q=t.lazySink(V).getOrDie(),le=l.blocker(),Oe=Q.getSystem().build({...le,components:le.components.concat([Ts(V)]),behaviours:ze([Pt.config({}),qt("dialog-blocker-events",[Lc(Dc(),()=>{uc.isBlocked(V)?G():Ct.focusIn(V)})])])});yr(Q,Oe),Ct.focusIn(V)},f=V=>{u.clear(),cs(V.element).each(Q=>{V.getSystem().getByDom(Q).each(le=>{Qn(le)})})},y=V=>Zu(V,t,"body"),C=V=>Go(V,t,"footer"),_=(V,Q)=>{uc.block(V,Q)},T=V=>{uc.unblock(V)},D=Qe("modal-events"),R={...t.eventOrder,[Kl()]:[D].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:r,apis:{show:g,hide:f,getBody:y,getFooter:C,setIdle:T,setBusy:_},eventOrder:R,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Jn(t.modalBehaviours,[Wt.config({}),Ct.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),uc.config({getRoot:u.get}),qt(D,[yn(V=>{vU(V.element,Zu(V,t,"title").element)})])])}},as=ra({name:"ModalDialog",configFields:_5(),partFields:bU(),factory:yU,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,a)=>{t.setBusy(r,a)},setIdle:(t,r)=>{t.setIdle(r)}}}),wU=At([wr,Dx].concat(_f)),CU=vu,O5=[Ix("button"),ji,jl("align","end",["start","end"]),Hx,$i,Uv("buttonType",["primary","secondary"])],eL=[...O5,Gu],T5=[hd("type",["submit","cancel","custom"]),...eL],xU=[hd("type",["menu"]),Dh,Nx,ji,ga("items",wU),...O5],SU=[...O5,hd("type",["togglebutton"]),lr("tooltip"),ji,Dh,Zr("active",!1)],kU=fo("type",{submit:T5,cancel:T5,custom:T5,menu:xU,togglebutton:SU}),_U=[wr,Gu,hd("level",["info","warn","error","success"]),BD,ge("url","")],EU=At(_U),OU=t=>[wr,t],TU=[wr,Gu,$i,Ix("button"),ji,U_,Uv("buttonType",["primary","secondary","toolbar"]),Hx],AU=At(TU),yg=[wr,Dx],Gd=yg.concat([Rx]),DU=yg.concat([Mx,$i]),MU=At(DU),NU=vu,RU=Gd.concat([W_("auto")]),LU=At(RU),tL=Wl([My,Gu,BD]),HU=Gd.concat([es("storageKey","default")]),PU=At(HU),BU=Sn,IU=At(Gd),FU=Sn,A5=yg.concat([es("tag","textarea"),lr("scriptId"),lr("scriptUrl"),Lm("settings",void 0)]),oL=yg.concat([es("tag","textarea"),vn("init")]),VU=Oc(t=>Vn("customeditor.old",ua(oL),t).orThunk(()=>Vn("customeditor.new",ua(A5),t))),zU=Sn,ZU=At(Gd),UU=Vv(),WU=t=>[wr,G4("columns"),t],jU=[wr,lr("html"),jl("presets","presentation",["presentation","document"])],$U=At(jU),GU=Gd.concat([Zr("border",!1),Zr("sandboxed",!0),Zr("streamContent",!1),Zr("transparent",!0)]),KU=At(GU),qU=Sn,XU=At(yg.concat([Fs("height")])),YU=At([lr("url"),Nm("zoom"),Nm("cachedWidth"),Nm("cachedHeight")]),QU=Gd.concat([Fs("inputMode"),Fs("placeholder"),Zr("maximized",!1),$i]),JU=At(QU),eW=Sn,tW=t=>[wr,Mx,t,jl("align","start",["start","center","end"])],oW=[Gu,My],nL=[Gu,ga("items",zv("items",()=>rL))],rL=zr([At(oW),At(nL)]),nW=Gd.concat([ga("items",rL),$i]),rW=At(nW),sW=Sn,aW=Gd.concat([u1("items",[Gu,My]),Li("size",1),$i]),iW=At(aW),lW=Sn,cW=Gd.concat([Zr("constrain",!0),$i]),sL=At(cW),D5=At([lr("width"),lr("height")]),Kf=yg.concat([Mx,Li("min",0),Li("max",0)]),dW=At(Kf),M5=fu,T4=[wr,ga("header",Sn),ga("cells",md(Sn))],uW=At(T4),mW=Gd.concat([Fs("placeholder"),Zr("maximized",!1),$i]),gW=At(mW),hW=Sn,aL=[hd("type",["directory","leaf"]),z_,lr("id"),Tc("menu",i8)],Xh=At(aL),iL=aL.concat([ga("children",zv("children",()=>Wa("type",{directory:lL,leaf:Xh})))]),lL=At(iL),pW=Wa("type",{directory:lL,leaf:Xh}),fW=[wr,ga("items",pW),Rm("onLeafAction"),Rm("onToggleExpand"),pd("defaultExpandedIds",[],Sn),Fs("defaultSelectedId")],vW=At(fW),bW=Gd.concat([jl("filetype","file",["image","media","file"]),$i]),yW=At(bW),wW=At([My,Px]),N5=t=>On("items","items",Zo(),md(Oc(r=>Vn(`Checking item of ${t}`,x2,r).fold(a=>Gt.error(gd(a)),a=>Gt.value(a))))),x2=Iv(()=>Wa("type",{alertbanner:EU,bar:At(OU(N5("bar"))),button:AU,checkbox:MU,colorinput:PU,colorpicker:IU,dropzone:ZU,grid:At(WU(N5("grid"))),iframe:KU,input:JU,listbox:rW,selectbox:iW,sizeinput:sL,slider:dW,textarea:gW,urlinput:yW,customeditor:VU,htmlpanel:$U,imagepreview:XU,collection:LU,label:At(tW(N5("label"))),table:uW,tree:vW,panel:A4})),S2=[wr,ge("classes",[]),ga("items",x2)],A4=At(S2),D4=[Ix("tab"),z_,ga("items",x2)],qf=[wr,u1("tabs",D4)],M4=At(qf),CW=eL,cL=kU,dL=At([lr("title"),Dr("body",Wa("type",{panel:A4,tabpanel:M4})),es("size","normal"),pd("buttons",[],cL),ge("initialData",{}),zn("onAction",G),zn("onChange",G),zn("onSubmit",G),zn("onClose",G),zn("onCancel",G),zn("onTabChange",G)]),uL=t=>Vn("dialog",dL,t),xW=At([hd("type",["cancel","custom"]),...CW]),SW=At([lr("title"),lr("url"),Nm("height"),Nm("width"),L2("buttons",xW),zn("onAction",G),zn("onCancel",G),zn("onClose",G),zn("onMessage",G)]),kW=t=>Vn("dialog",SW,t),N4=t=>to(t)?[t].concat(Ce(ki(t),N4)):Xt(t)?Ce(t,N4):[],mL=t=>Kt(t.type)&&Kt(t.name),R5={checkbox:NU,colorinput:BU,colorpicker:FU,dropzone:UU,input:eW,iframe:qU,imagepreview:YU,selectbox:lW,sizeinput:D5,slider:M5,listbox:sW,size:D5,textarea:hW,urlinput:wW,customeditor:zU,collection:tL,togglemenuitem:CU},_W=t=>E.from(R5[t.type]),EW=t=>qo(N4(t),mL),OW=t=>{const r=EW(t),a=Ce(r,l=>_W(l).fold(()=>[],u=>[Dr(l.name,u)]));return At(a)},L5=t=>{var r;const a=Js(uL(t)),l=OW(t),u=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:a,dataValidator:l,initialData:u}},Xf={open:(t,r)=>{const a=L5(r);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,r)=>{const a=Js(kW(r));return t(a)},redial:t=>L5(t)};var TW=Object.freeze({__proto__:null,events:(t,r)=>{const a=(l,u)=>{t.updateState.each(g=>{const f=g(l,u);r.set(f)}),t.renderComponents.each(g=>{const f=g(u,r.get());(t.reuseDom?H3:cA)(l,f)})};return on([Te(Cu(),(l,u)=>{const g=u;if(!g.universal){const f=t.channel;zo(g.channels,f)&&a(l,g.data)}}),yn((l,u)=>{t.initialData.each(g=>{a(l,g)})})])}}),AW=Object.freeze({__proto__:null,getState:(t,r,a)=>a}),H5=[Re("channel"),_o("renderComponents"),_o("updateState"),_o("initialData"),Zr("reuseDom",!0)],P5=Object.freeze({__proto__:null,init:()=>{const t=Lt(E.none()),r=()=>t.set(E.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const _l=os({fields:H5,name:"reflecting",active:TW,apis:AW,state:P5}),B5=t=>{const r=[],a={};return Bn(t,(l,u)=>{l.fold(()=>{r.push(u)},g=>{a[u]=g})}),r.length>0?Gt.error(r):Gt.value(a)},DW=(t,r,a)=>{const l=Eo(sv.sketch(u=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ne(t.items,g=>gR(u,g,r,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:ze([Ct.config({mode:"acyclic",useTabstopAt:xe(Jy)}),cc.memento(l),e6(l,{postprocess:u=>B5(u).fold(g=>(console.error(g),{}),ao)}),qt("dialog-body-panel",[Te(Dc(),(u,g)=>{u.getSystem().broadcastOn([Zh],{newFocus:E.some(g.event.target)})})])])}},MW=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:xh(t.action),behaviours:Jn(t.tabButtonBehaviours,[Pt.config({}),Ct.config({mode:"execution",useSpace:!0,useEnter:!0}),Je.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),gL=ui({name:"TabButton",configFields:[ge("uid",void 0),Re("value"),On("dom","dom",no(()=>({attributes:{role:"tab",id:Qe("aria"),"aria-selected":"false"}})),ma()),_o("action"),ge("domModification",{}),Nr("tabButtonBehaviours",[Pt,Ct,Je]),Re("view")],factory:MW}),NW=re([Re("tabs"),Re("dom"),ge("clickToDismiss",!1),Nr("tabbarBehaviours",[xo,Ct]),qm(["tabClass","selectedClass"])]),RW=C0({factory:gL,name:"tabs",unit:"tab",overrides:t=>{const r=(l,u)=>{xo.dehighlight(l,u),wt(l,y1(),{tabbar:l,button:u})},a=(l,u)=>{xo.highlight(l,u),wt(l,z2(),{tabbar:l,button:u})};return{action:l=>{const u=l.getSystem().getByUid(t.uid).getOrDie(),g=xo.isHighlighted(u,l);(()=>g&&t.clickToDismiss?r:g?G:a)()(u,l)},domModification:{classes:[t.markers.tabClass]}}}}),Yf=re([RW]),hL=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Jn(t.tabbarBehaviours,[xo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,g)=>{Z(g.element,"aria-selected","true")},onDehighlight:(u,g)=>{Z(g.element,"aria-selected","false")}}),Ct.config({mode:"flow",getInitial:u=>xo.getHighlighted(u).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),pL=ra({name:"Tabbar",configFields:NW(),partFields:Yf(),factory:hL}),R4=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:Jn(t.tabviewBehaviours,[Wt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Ev=ui({name:"Tabview",configFields:[Nr("tabviewBehaviours",[Wt])],factory:R4}),L4=re([ge("selectFirst",!0),mo("onChangeTab"),mo("onDismissTab"),ge("tabs",[]),Nr("tabSectionBehaviours",[])]),fL=Us({factory:pL,schema:[Re("dom"),bu("markers",[Re("tabClass"),Re("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),H4=Us({factory:Ev,name:"tabview"}),bi=re([fL,H4]),P4=(t,r,a,l)=>{const u=f=>{const y=Je.getValue(f);Go(f,t,"tabview").each(C=>{Ut(t.tabs,_=>_.value===y).each(_=>{const T=_.view();_t(f.element,"id").each(D=>{Z(C.element,"aria-labelledby",D)}),Wt.set(C,T),t.onChangeTab(C,f,T)})})},g=(f,y)=>{Go(f,t,"tabbar").each(C=>{y(C).each(Nc)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:b0(t.tabSectionBehaviours),events:on($t([t.selectFirst?[yn((f,y)=>{g(f,xo.getFirst)})]:[],[Te(z2(),(f,y)=>{const C=y.event.button;u(C)}),Te(y1(),(f,y)=>{const C=y.event.button;t.onDismissTab(f,C)})]])),apis:{getViewItems:f=>Go(f,t,"tabview").map(y=>Wt.contents(y)).getOr([]),showTab:(f,y)=>{g(f,C=>{const _=xo.getCandidates(C);return Ut(_,T=>Je.getValue(T)===y).filter(T=>!xo.isHighlighted(C,T))})}}}},Qf=ra({name:"TabSection",configFields:L4(),partFields:bi(),factory:P4,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,a)=>{t.showTab(r,a)}}}),vL=(t,r,a)=>Ne(t,(l,u)=>{Wt.set(a,t[u].view());const g=r.dom.getBoundingClientRect();return Wt.set(a,[]),g.height}),LW=t=>qr(od(t,(r,a)=>r>a?-1:r<a?1:0)),HW=(t,r,a)=>{const l=Qr(t).dom,u=kd(t,".tox-dialog-wrap").getOr(t),g=Ir(u,"position")==="fixed";let f;g?f=Math.max(l.clientHeight,window.innerHeight):f=Math.max(l.offsetHeight,l.scrollHeight);const y=sr(r),C=r.dom.offsetLeft>=a.dom.offsetLeft+ar(a)?Math.max(sr(a),y):y,_=parseInt(Ir(t,"margin-top"),10)||0,T=parseInt(Ir(t,"margin-bottom"),10)||0,D=sr(t)+_+T-C;return f-D},Yh=(t,r)=>{qr(t).each(a=>Qf.showTab(r,a.value))},bL=(t,r)=>{fe(t,"height",r+"px"),fe(t,"flex-basis",r+"px")},k2=(t,r,a)=>{kd(t,'[role="dialog"]').each(l=>{dr(l,'[role="tablist"]').each(u=>{a.get().map(g=>(fe(r,"height","0"),fe(r,"flex-basis","0"),Math.min(g,HW(l,r,u)))).each(g=>{bL(r,g)})})})},Qh=t=>dr(t,'[role="tabpanel"]'),B4=t=>{const r=gn();return{extraEvents:[yn(a=>{const l=a.element;Qh(l).each(u=>{fe(u,"visibility","hidden"),a.getSystem().getByDom(u).toOptional().each(g=>{const f=vL(t,u,g);LW(f).fold(r.clear,r.set)}),k2(l,u,r),So(u,"visibility"),Yh(t,a),requestAnimationFrame(()=>{k2(l,u,r)})})}),Te(Mc(),a=>{const l=a.element;Qh(l).each(u=>{k2(l,u,r)})}),Te(cN,(a,l)=>{const u=a.element;Qh(u).each(g=>{const f=li(Jr(g));fe(g,"visibility","hidden");const y=ln(g,"height").map(_=>parseInt(_,10));So(g,"height"),So(g,"flex-basis");const C=g.dom.getBoundingClientRect().height;y.forall(_=>C>_)?(r.set(C),k2(u,g,r)):y.each(_=>{bL(g,_)}),So(g,"visibility"),f.each(Na)})})],selectFirst:!1}},I5="send-data-to-section",yL="send-data-to-view",PW=(t,r,a)=>{const l=Lt({}),u=_=>{const T=Je.getValue(_),D=B5(T).getOr({}),R=l.get(),V=ot(R,D);l.set(V)},g=_=>{const T=l.get();Je.setValue(_,T)},f=Lt(null),y=Ne(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Un(a.shared.providers.translate(_.title))],view:()=>[sv.sketch(T=>({dom:{tag:"div",classes:["tox-form"]},components:Ne(_.items,D=>gR(T,D,r,a)),formBehaviours:ze([Ct.config({mode:"acyclic",useTabstopAt:xe(Jy)}),qt("TabView.form.events",[yn(g),Ga(u)]),Ma.config({channels:ri([{key:I5,value:{onReceive:u}},{key:yL,value:{onReceive:g}}])})])}))]})),C=B4(y);return Qf.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,T,D)=>{const R=Je.getValue(T);wt(_,lN,{name:R,oldName:f.get()}),f.set(R)},tabs:y,components:[Qf.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pL.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ze([Wn.config({})])}),Qf.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:ze([qt("tabpanel",C.extraEvents),Ct.config({mode:"acyclic"}),uo.config({find:_=>qr(Qf.getViewItems(_))}),Pf(E.none(),_=>(_.getSystem().broadcastOn([I5],{}),l.get()),(_,T)=>{l.set(T),_.getSystem().broadcastOn([yL],{})})])})},wL=(t,r,a,l,u)=>{const g=C=>{const _=C.body;switch(_.type){case"tabpanel":return[PW(_,C.initialData,l)];default:return[DW(_,C.initialData,l)]}},f=(C,_)=>E.some({isTabPanel:()=>_.body.type==="tabpanel"}),y={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?y:{}}},components:[],behaviours:ze([cc.childAt(0),_l.config({channel:`${vO}-${r}`,updateState:f,renderComponents:g,initialData:t})])}},BW=(t,r,a,l,u)=>wL(t,r,E.some(a),l,u),Ov=(t,r,a)=>{const l=wL(t,r,E.none(),a,!1);return as.parts.body(l)},IW=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[s6(E.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ze([Wn.config({}),Pt.config({})])})]}],behaviours:ze([Ct.config({mode:"acyclic",useTabstopAt:xe(Jy)})])};return as.parts.body(r)},FW=F0.deviceType.isTouch(),CL=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),xL=(t,r)=>as.parts.close(js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:ze([Wn.config({})])})),Tv=()=>as.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),SL=(t,r)=>as.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Ld(`<p>${s_(r.translate(t))}</p>`)}]}]}),kL=t=>as.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),F5=(t,r)=>[Fd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Fd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],V5=t=>{const r="tox-dialog",a=r+"-wrap",l=a+"__backdrop",u=r+"__disable-scroll";return as.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),E.some(!0)),useTabstopAt:g=>!Jy(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Ld(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:FW?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:ze([Pt.config({}),qt("dialog-events",t.dialogEvents.concat([Lc(Dc(),(g,f)=>{uc.isBlocked(g)?G():Ct.focusIn(g)}),Te(gp(),(g,f)=>{g.getSystem().broadcastOn([Zh],{newFocus:f.event.newFocus})})])),qt("scroll-lock",[yn(()=>{Tn(Br(),u)}),Ga(()=>{cn(Br(),u)})]),...t.extraBehaviours]),eventOrder:{[$a()]:["dialog-events"],[Kl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[bd()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},e=t=>js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:ze([Wn.config({})]),components:[Gc("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{vo(r,Fh)}}),o=(t,r,a,l)=>{const u=g=>[Un(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:ze([_l.config({channel:`${fO}-${r}`,initialData:t,renderComponents:u})])}},n=()=>({dom:Ld('<div class="tox-dialog__draghandle"></div>')}),s=(t,r,a,l)=>Fd.sketch({dom:Ld('<div class="tox-dialog__header"></div>'),components:[o(t,r,E.some(a),l),n(),e(l)],containerBehaviours:ze([Gf.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Yl(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),i=(t,r,a)=>{const l=as.parts.title(o(t,r,E.none(),a)),u=as.parts.draghandle(n()),g=as.parts.close(e(a)),f=[l].concat(t.draggable?[u]:[]).concat([g]);return Fd.sketch({dom:Ld('<div class="tox-dialog__header"></div>'),components:f})},d=(t,r,a)=>i({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},r,a.shared.providers),h=(t,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:Ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),v=(t,r,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const u=dr(t().element,".tox-dialog__header").map(g=>sr(g));as.setBusy(t(),(g,f)=>h(l.message,f,r,u))},onUnblock:()=>{as.setIdle(t())}}),w=(t,r,a,l)=>{const u=(g,f)=>E.some(f);return Mr(V5({...t,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[_l.config({channel:`${pO}-${t.id}`,updateState:u,initialData:r}),vS({}),...t.extraBehaviours],onEscape:g=>{vo(g,Fh)},dialogEvents:a,eventOrder:{[Cu()]:[_l.name(),Ma.name()],[Kl()]:["scroll-lock",_l.name(),"messages","dialog-events","alloy.base.behaviour"],[bd()]:["alloy.base.behaviour","dialog-events","messages",_l.name(),"scroll-lock"]}}))},k=(t,r={})=>{const a=l=>{const u=Ne(l.items,g=>{const f=nt(r,g.name).getOr(Lt(!1));return{...g,storage:f}});return{...l,items:u}};return Ne(t,l=>l.type==="menu"?a(l):l)},M=t=>Io(t,(r,a)=>a.type==="menu"?Io(a.items,(l,u)=>(l[u.name]=u.storage,l),r):r,{}),H=(t,r)=>[Qv(Dc(),bS),t(Af,(a,l,u,g)=>{li(Jr(g.element)).fold(G,wb),r.onClose(),l.onClose()}),t(Fh,(a,l,u,g)=>{l.onCancel(a),vo(g,Af)}),Te(tS,(a,l)=>r.onUnblock()),Te(eS,(a,l)=>r.onBlock(l.event))],I=(t,r)=>{const a=(u,g)=>Te(u,(f,y)=>{l(f,(C,_)=>{g(t(),C,y.event,f)})}),l=(u,g)=>{_l.getState(u).get().each(f=>{g(f,u)})};return[...H(a,r),a(Yu,(u,g,f)=>{g.onAction(u,{name:f.name})})]},$=(t,r,a)=>{const l=(g,f)=>Te(g,(y,C)=>{u(y,(_,T)=>{f(t(),_,C.event,y)})}),u=(g,f)=>{_l.getState(g).get().each(y=>{f(y.internalDialog,g)})};return[...H(l,r),l($y,(g,f)=>f.onSubmit(g)),l(Ki,(g,f,y)=>{f.onChange(g,{name:y.name})}),l(Yu,(g,f,y,C)=>{const _=()=>C.getSystem().isConnected()?Ct.focusIn(C):void 0,T=V=>In(V,"disabled")||_t(V,"aria-disabled").exists(Q=>Q==="true"),D=Jr(C.element),R=li(D);f.onAction(g,{name:y.name,value:y.value}),li(D).fold(_,V=>{T(V)||R.exists(Q=>xa(V,Q)&&T(Q))?_():a().toOptional().filter(Q=>!xa(Q.element,V)).each(_)})}),l(lN,(g,f,y)=>{f.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),Ga(g=>{const f=t();Je.setValue(g,f.getData())})]},U=(t,r)=>Vf(t,t.type,r),W=(t,r,a)=>Ut(r,l=>l.name===a).bind(l=>l.memento.getOpt(t)),j=(t,r)=>{const a=r.map(y=>y.footerButtons).getOr([]),l=ys(a,y=>y.align==="start"),u=(y,C)=>Fd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:Ne(C,_=>_.memento.asSpec())}),g=u("start",l.pass),f=u("end",l.fail);return[g,f]},te=(t,r,a)=>{const l=(u,g)=>{const f=Ne(g.buttons,C=>{const _=Eo(U(C,a));return{name:C.name,align:C.align,memento:_}}),y=C=>W(u,f,C);return E.some({lookupByName:y,footerButtons:f})};return{dom:Ld('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ze([_l.config({channel:`${yS}-${r}`,initialData:t,updateState:l,renderComponents:j})])}},de=(t,r,a)=>te(t,r,a),ue=(t,r,a)=>as.parts.footer(te(t,r,a)),Ae=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const a=uo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return sv.getField(a,r).orThunk(()=>t.getFooter().bind(l=>_l.getState(l).get()).bind(l=>l.lookupByName(r)))}else return E.none()},$e=(t,r)=>{const a=t.getRoot();return _l.getState(a).get().map(l=>Js(Vn("data",l.dataValidator,r))).getOr(r)},Ye=(t,r,a)=>{const l=g=>{const f=t.getRoot();f.getSystem().isConnected()&&g(f)},u={getData:()=>{const g=t.getRoot(),f=g.getSystem().isConnected()?t.getFormWrapper():g,y=Je.getValue(f),C=an(a,_=>_.get());return{...y,...C}},setData:g=>{l(f=>{const y=u.getData(),C=ot(y,g),_=$e(t,C),T=t.getFormWrapper();Je.setValue(T,_),Bn(a,(D,R)=>{wo(C,R)&&D.set(C[R])})})},setEnabled:(g,f)=>{Ae(t,g).each(f?Tt.enable:Tt.disable)},focus:g=>{Ae(t,g).each(Pt.focus)},block:g=>{if(!Kt(g))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(f=>{wt(f,eS,{message:g})})},unblock:()=>{l(g=>{vo(g,tS)})},showTab:g=>{l(f=>{const y=t.getBody();_l.getState(y).get().exists(C=>C.isTabPanel())&&uo.getCurrent(y).each(C=>{Qf.showTab(C,g)})})},redial:g=>{l(f=>{const y=t.getId(),C=r(g),_=k(C.internalDialog.buttons,a);f.getSystem().broadcastOn([`${pO}-${y}`],C),f.getSystem().broadcastOn([`${fO}-${y}`],C.internalDialog),f.getSystem().broadcastOn([`${vO}-${y}`],C.internalDialog),f.getSystem().broadcastOn([`${yS}-${y}`],{...C.internalDialog,buttons:_}),u.setData(C.initialData)})},close:()=>{l(g=>{vo(g,Af)})},toggleFullscreen:t.toggleFullscreen};return u},Ie=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Ee=(t,r,a)=>{const l=Qe("dialog"),u=t.internalDialog,g=d(u.title,l,a),f=Ov({body:u.body,initialData:u.initialData},l,a),y=k(u.buttons),C=M(y),_=It(y.length!==0,ue({buttons:y},l,a)),T=$(()=>Q,v(()=>R,a.shared.providers,r),a.shared.getSink),D=Ie(u.size),R=w({id:l,header:g,body:f,footer:_,extraClasses:D,extraBehaviours:[],extraStyles:{}},t,T,a),V=(()=>{const le=()=>{const Y=as.getBody(R);return uo.getCurrent(Y).getOr(Y)},Oe=()=>{const Y="tox-dialog--fullscreen",ne=Xe.fromDom(R.element.dom);cr(ne,Y)?(cn(ne,Y),Ln(ne,D)):(Ta(ne,D),Tn(ne,Y))};return{getId:re(l),getRoot:re(R),getBody:()=>as.getBody(R),getFooter:()=>as.getFooter(R),getFormWrapper:le,toggleFullscreen:Oe}})(),Q=Ye(V,r.redial,C);return{dialog:R,instanceApi:Q}},ye=t=>{switch(t){case"medium":return E.some("tox-dialog--width-md");default:return E.none()}},Fe=(t,r,a,l=!1)=>{const u=Qe("dialog"),g=Qe("dialog-label"),f=Qe("dialog-content"),y=t.internalDialog,C=ye(y.size),_=(pe,Pe)=>E.some(Pe),T=Eo(s({title:y.title,draggable:!0},u,g,a.shared.providers)),D=Eo(BW({body:y.body,initialData:y.initialData},u,f,a,l)),R=k(y.buttons),V=M(R),Q=It(R.length!==0,Eo(de({buttons:R},u,a))),le=$(()=>be,{onBlock:pe=>{uc.block(Y,(Pe,Ge)=>{const st=T.getOpt(Y).map(pt=>sr(pt.element));return h(pe.message,Ge,a.shared.providers,st)})},onUnblock:()=>{uc.unblock(Y)},onClose:()=>r.closeWindow()},a.shared.getSink),Oe="tox-dialog-inline",Y=Mr({dom:{tag:"div",classes:["tox-dialog",Oe,...C.toArray()],attributes:{role:"dialog","aria-labelledby":g}},eventOrder:{[Cu()]:[_l.name(),Ma.name()],[$a()]:["execute-on-form"],[Kl()]:["reflecting","execute-on-form"]},behaviours:ze([Ct.config({mode:"cyclic",onEscape:pe=>(vo(pe,Af),E.some(!0)),useTabstopAt:pe=>!Jy(pe)&&($o(pe)!=="button"||lt(pe,"disabled")!=="disabled"),firstTabstop:1}),_l.config({channel:`${pO}-${u}`,updateState:_,initialData:t}),Pt.config({}),qt("execute-on-form",le.concat([Lc(Dc(),(pe,Pe)=>{Ct.focusIn(pe)}),Te(gp(),(pe,Pe)=>{pe.getSystem().broadcastOn([Zh],{newFocus:Pe.event.newFocus})})])),uc.config({getRoot:()=>E.some(Y)}),Wt.config({}),vS({})]),components:[T.asSpec(),D.asSpec(),...Q.map(pe=>pe.asSpec()).toArray()]}),ne=()=>{const pe="tox-dialog--fullscreen",Pe=Xe.fromDom(Y.element.dom);M1(Pe,[pe])?(Ta(Pe,[pe]),Ln(Pe,[Oe])):(Ta(Pe,[Oe]),Ln(Pe,[pe]))},be=Ye({getId:re(u),getRoot:re(Y),getFooter:()=>Q.map(pe=>pe.get(Y)),getBody:()=>D.get(Y),getFormWrapper:()=>{const pe=D.get(Y);return uo.getCurrent(pe).getOr(pe)},toggleFullscreen:ne},r.redial,V);return{dialog:Y,instanceApi:be}};var ft=tinymce.util.Tools.resolve("tinymce.util.URI");const ve=t=>{const r=a=>{t.getSystem().isConnected()&&a(t)};return{block:a=>{if(!Kt(a))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(l=>{wt(l,eS,{message:a})})},unblock:()=>{r(a=>{vo(a,tS)})},close:()=>{r(a=>{vo(a,Af)})},sendMessage:a=>{r(l=>{l.getSystem().broadcastOn([e2],a)})}}},et=["insertContent","setContent","execCommand","close","block","unblock"],bt=t=>to(t)&&et.indexOf(t.mceAction)!==-1,Jt=t=>!bt(t)&&to(t)&&wo(t,"mceAction"),bo=(t,r,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=is(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":r.close();break;case"block":r.block(a.message);break;case"unblock":r.unblock();break}},ia=(t,r,a,l)=>{const u=Qe("dialog"),g=d(t.title,u,l),f=IW(t),y=t.buttons.bind(Y=>Y.length===0?E.none():E.some(ue({buttons:Y},u,l))),C=I(()=>Oe,v(()=>le,l.shared.providers,r)),_={...t.height.fold(()=>({}),Y=>({height:Y+"px","max-height":Y+"px"})),...t.width.fold(()=>({}),Y=>({width:Y+"px","max-width":Y+"px"}))},T=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],D=new ft(t.url,{base_uri:new ft(window.location.href)}),R=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,V=Yn(),Q=[qt("messages",[yn(()=>{const Y=pa(Xe.fromDom(window),"message",ne=>{if(D.isSameOrigin(new ft(ne.raw.origin))){const be=ne.raw.data;bt(be)?bo(a,Oe,be):Jt(be)&&t.onMessage(Oe,be)}});V.set(Y)}),Ga(V.clear)]),Ma.config({channels:{[e2]:{onReceive:(Y,ne)=>{dr(Y.element,"iframe").each(be=>{const pe=be.dom.contentWindow;hn(pe)&&pe.postMessage(ne,R)})}}}})],le=w({id:u,header:g,body:f,footer:y,extraClasses:T,extraBehaviours:Q,extraStyles:_},t,C,l),Oe=ve(le);return{dialog:le,instanceApi:Oe}},yi=t=>{const r=t.shared;return{open:(a,l)=>{const u=()=>{as.hide(C),l()},g=Eo(Vf({name:"close-alert",text:"OK",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"cancel",t)),f=Tv(),y=xL(u,r.providers),C=Mr(V5({lazySink:()=>r.getSink(),header:CL(f,y),body:SL(a,r.providers),footer:E.some(kL(F5([],[g.asSpec()]))),onEscape:u,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(Fh,u)],eventOrder:{}}));as.show(C);const _=g.get(C);Pt.focus(_)}}},wa=t=>{const r=t.shared;return{open:(a,l)=>{const u=D=>{as.hide(_),l(D)},g=Eo(Vf({name:"yes",text:"Yes",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"submit",t)),f=Vf({name:"no",text:"No",primary:!1,buttonType:E.some("secondary"),align:"end",enabled:!0,icon:E.none()},"cancel",t),y=Tv(),C=xL(()=>u(!1),r.providers),_=Mr(V5({lazySink:()=>r.getSink(),header:CL(y,C),body:SL(a,r.providers),footer:E.some(kL(F5([],[f,g.asSpec()]))),onEscape:()=>u(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(Fh,()=>u(!1)),Te($y,()=>u(!0))],eventOrder:{}}));as.show(_);const T=g.get(_);Pt.focus(T)}}},wi=(t,r)=>Js(Vn("data",r,t)),No=t=>Uy(t,".tox-alert-dialog")||Uy(t,".tox-confirm-dialog"),gc=(t,r,a)=>r&&a?[]:[mr.config({contextual:{lazyContext:()=>E.some(Rn(Xe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>Tf(t,l.element).map(u=>({bounds:J0(u),optScrollEnv:E.some({currentScrollTop:u.element.dom.scrollTop,scrollElmTop:Ys(u.element).top})})).getOrThunk(()=>({bounds:Is(),optScrollEnv:E.none()}))})],gr=t=>{const r=t.editor,a=Ey(r),l=yi(t.backstages.dialog),u=wa(t.backstages.dialog),g=(D,R,V)=>{if(!Hn(R)){if(R.inline==="toolbar")return _(D,t.backstages.popup.shared.anchors.inlineDialog(),V,R);if(R.inline==="bottom")return T(D,t.backstages.popup.shared.anchors.inlineBottomDialog(),V,R);if(R.inline==="cursor")return _(D,t.backstages.popup.shared.anchors.cursor(),V,R)}return C(D,V)},f=(D,R)=>y(D,R),y=(D,R)=>{const V=Q=>{const le=ia(Q,{closeWindow:()=>{as.hide(le.dialog),R(le.instanceApi)}},r,t.backstages.dialog);return as.show(le.dialog),le.instanceApi};return Xf.openUrl(V,D)},C=(D,R)=>{const V=(Q,le,Oe)=>{const Y=le,ne=Ee({dataValidator:Oe,initialData:Y,internalDialog:Q},{redial:Xf.redial,closeWindow:()=>{as.hide(ne.dialog),R(ne.instanceApi)}},t.backstages.dialog);return as.show(ne.dialog),ne.instanceApi.setData(Y),ne.instanceApi};return Xf.open(V,D)},_=(D,R,V,Q)=>{const le=(Oe,Y,ne)=>{const be=wi(Y,ne),pe=gn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),Ge={dataValidator:ne,initialData:be,internalDialog:Oe},st=()=>pe.on(qe=>{An.reposition(qe),mr.refresh(qe)}),pt=Fe(Ge,{redial:Xf.redial,closeWindow:()=>{pe.on(An.hide),r.off("ResizeEditor",st),pe.clear(),V(pt.instanceApi)}},t.backstages.popup,Q.ariaAttrs),io=Mr(An.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ze([qt("window-manager-inline-events",[Te(Su(),(qe,Et)=>{vo(pt.dialog,Fh)})]),...gc(r,a,Pe)]),isExtraPart:(qe,Et)=>No(Et)}));pe.set(io);const je=()=>{const qe=r.inline?Br():Xe.fromDom(r.getContainer()),Et=Rn(qe);return E.some(Et)};return An.showWithinBounds(io,Ts(pt.dialog),{anchor:R},je),(!a||!Pe)&&(mr.refresh(io),r.on("ResizeEditor",st)),pt.instanceApi.setData(be),Ct.focusIn(pt.dialog),pt.instanceApi};return Xf.open(le,D)},T=(D,R,V,Q)=>{const le=(Oe,Y,ne)=>{const be=wi(Y,ne),pe=gn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),Ge={dataValidator:ne,initialData:be,internalDialog:Oe},st=()=>pe.on(qe=>{An.reposition(qe),mr.refresh(qe)}),pt=Fe(Ge,{redial:Xf.redial,closeWindow:()=>{pe.on(An.hide),r.off("ResizeEditor ScrollWindow ElementScroll",st),pe.clear(),V(pt.instanceApi)}},t.backstages.popup,Q.ariaAttrs),io=Mr(An.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ze([qt("window-manager-inline-events",[Te(Su(),(qe,Et)=>{vo(pt.dialog,Fh)})]),mr.config({contextual:{lazyContext:()=>E.some(Rn(Xe.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:qe=>Tf(r,qe.element).map(Et=>({bounds:J0(Et),optScrollEnv:E.some({currentScrollTop:Et.element.dom.scrollTop,scrollElmTop:Ys(Et.element).top})})).getOrThunk(()=>({bounds:Is(),optScrollEnv:E.none()}))})]),isExtraPart:(qe,Et)=>No(Et)}));pe.set(io);const je=()=>t.backstages.popup.shared.getSink().toOptional().bind(qe=>{const Et=Tf(r,qe.element),yo=15,kn=Et.map(at=>J0(at)).getOr(Is()),Ze=Rn(Xe.fromDom(r.getContentAreaContainer())),mt=km(Ze,kn);return E.some(ir(mt.x,mt.y,mt.width,mt.height-yo))});return An.showWithinBounds(io,Ts(pt.dialog),{anchor:R},je),mr.refresh(io),r.on("ResizeEditor ScrollWindow ElementScroll",st),pt.instanceApi.setData(be),Ct.focusIn(pt.dialog),pt.instanceApi};return Xf.open(le,D)};return{open:g,openUrl:f,alert:(D,R)=>{l.open(D,R)},close:D=>{D.close()},confirm:(D,R)=>{u.open(D,R)}}},Ht=t=>{JA(t),mE(t),y2(t)};var Le=()=>{_m.add("silver",t=>{Ht(t);let r=()=>Is();const{dialogs:a,popups:l,renderUI:u}=fU(t,{getPopupSinkBounds:()=>r()}),g=()=>{const C=u();return Tf(t,l.getMothership().element).each(_=>{r=()=>J0(_)}),C};HB.register(t,l.backstage.shared);const f=gr({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),y=()=>GH(t,{backstage:l.backstage},l.getMothership());return{renderUI:g,getWindowManagerImpl:re(f),getNotificationManagerImpl:y}})};Le()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var yt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Oo=(Ue,De,E)=>{const lo=De==="UL"?"InsertUnorderedList":"InsertOrderedList";Ue.execCommand(lo,!1,E===!1?null:{"list-style-type":E})},ho=Ue=>{Ue.addCommand("ApplyUnorderedListStyle",(De,E)=>{Oo(Ue,"UL",E["list-style-type"])}),Ue.addCommand("ApplyOrderedListStyle",(De,E)=>{Oo(Ue,"OL",E["list-style-type"])})},Ro=Ue=>De=>De.options.get(Ue),Po=Ue=>{const De=Ue.options.register;De("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),De("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},Bo=Ro("advlist_number_styles"),wn=Ro("advlist_bullet_styles"),Kt=Ue=>Ue==null,to=Ue=>!Kt(Ue);var sn=tinymce.util.Tools.resolve("tinymce.util.Tools");class Xt{constructor(De,E){this.tag=De,this.value=E}static some(De){return new Xt(!0,De)}static none(){return Xt.singletonNone}fold(De,E){return this.tag?E(this.value):De()}isSome(){return this.tag}isNone(){return!this.tag}map(De){return this.tag?Xt.some(De(this.value)):Xt.none()}bind(De){return this.tag?De(this.value):Xt.none()}exists(De){return this.tag&&De(this.value)}forall(De){return!this.tag||De(this.value)}filter(De){return!this.tag||De(this.value)?this:Xt.none()}getOr(De){return this.tag?this.value:De}or(De){return this.tag?this:De}getOrThunk(De){return this.tag?this.value:De()}orThunk(De){return this.tag?this:De()}getOrDie(De){if(this.tag)return this.value;throw new Error(De??"Called getOrDie on None")}static from(De){return to(De)?Xt.some(De):Xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(De){this.tag&&De(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xt.singletonNone=new Xt(!1);const $n=(Ue,De,E)=>{for(let lo=0,Be=Ue.length;lo<Be;lo++){const go=Ue[lo];if(De(go,lo))return Xt.some(go);if(E(go,lo))break}return Xt.none()},is=Ue=>/\btox\-/.test(Ue.className),Hn=(Ue,De)=>Ue.dom.isChildOf(De,Ue.getBody()),Kr=Ue=>De=>to(De)&&Ue.test(De.nodeName),hn=Kr(/^(OL|UL|DL)$/),vt=Kr(/^(TH|TD)$/),Ns=(Ue,De,E)=>$n(De,lo=>hn(lo)&&!is(lo),vt).exists(lo=>lo.nodeName===E&&Hn(Ue,lo)),Cn=Ue=>{const De=Ue.dom.getParent(Ue.selection.getNode(),"ol,ul"),E=Ue.dom.getStyle(De,"listStyleType");return Xt.from(E)},G=(Ue,De)=>De!==null&&!Ue.dom.isEditable(De),Nt=(Ue,De)=>{const E=Ue.dom.getParent(De,"ol,ul,dl");return G(Ue,E)&&Ue.selection.isEditable()},Ji=(Ue,De)=>{const E=Ue.selection.getNode();return De({parents:Ue.dom.getParents(E),element:E}),Ue.on("NodeChange",De),()=>Ue.off("NodeChange",De)},ko=Ue=>Ue.replace(/\-/g," ").replace(/\b\w/g,De=>De.toUpperCase()),re=Ue=>Kt(Ue)||Ue==="default"?"":Ue,ao=(Ue,De)=>E=>{const lo=(Be,go)=>{const Ot=Be.selection.getStart(!0);E.setActive(Ns(Be,go,De)),E.setEnabled(!Nt(Be,Ot)&&Be.selection.isEditable())};return Ji(Ue,Be=>lo(Ue,Be.parents))},Gn=(Ue,De,E,lo,Be,go)=>{Ue.ui.registry.addSplitButton(De,{tooltip:E,icon:Be==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Ot=>{const Me=sn.map(go,zo=>{const ls=Be==="OL"?"num":"bull",Ko=zo==="disc"||zo==="decimal"?"default":zo,xr=re(zo),Ne=ko(zo);return{type:"choiceitem",value:xr,icon:"list-"+ls+"-"+Ko,text:Ne}});Ot(Me)},onAction:()=>Ue.execCommand(lo),onItemAction:(Ot,Me)=>{Oo(Ue,Be,Me)},select:Ot=>Cn(Ue).map(Me=>Ot===Me).getOr(!1),onSetup:ao(Ue,Be)})},oo=(Ue,De,E,lo,Be,go)=>{Ue.ui.registry.addToggleButton(De,{active:!1,tooltip:E,icon:Be==="OL"?"ordered-list":"unordered-list",onSetup:ao(Ue,Be),onAction:()=>Ue.queryCommandState(lo)||go===""?Ue.execCommand(lo):Oo(Ue,Be,go)})},xe=(Ue,De,E,lo,Be,go)=>{go.length>1?Gn(Ue,De,E,lo,Be,go):oo(Ue,De,E,lo,Be,re(go[0]))},J=Ue=>{xe(Ue,"numlist","Numbered list","InsertOrderedList","OL",Bo(Ue)),xe(Ue,"bullist","Bullet list","InsertUnorderedList","UL",wn(Ue))};var bs=()=>{yt.add("advlist",Ue=>{Ue.hasPlugin("lists")?(Po(Ue),J(Ue),ho(Ue)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};bs()})();(function(){var yt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Oo=(S,A,P)=>{var q;return P(S,A.prototype)?!0:((q=S.constructor)===null||q===void 0?void 0:q.name)===A.name},ho=S=>{const A=typeof S;return S===null?"null":A==="object"&&Array.isArray(S)?"array":A==="object"&&Oo(S,String,(P,q)=>q.isPrototypeOf(P))?"string":A},Ro=S=>A=>ho(A)===S,Po=S=>A=>typeof A===S,Bo=Ro("string"),wn=Ro("object"),Kt=Ro("array"),to=Po("boolean"),sn=S=>S==null,Xt=S=>!sn(S),$n=Po("function"),is=Po("number"),Hn=()=>{},Kr=S=>()=>S,hn=(S,A)=>S===A;function vt(S,...A){return(...P)=>{const q=A.concat(P);return S.apply(null,q)}}const Ns=S=>A=>!S(A),Cn=Kr(!1);class G{constructor(A,P){this.tag=A,this.value=P}static some(A){return new G(!0,A)}static none(){return G.singletonNone}fold(A,P){return this.tag?P(this.value):A()}isSome(){return this.tag}isNone(){return!this.tag}map(A){return this.tag?G.some(A(this.value)):G.none()}bind(A){return this.tag?A(this.value):G.none()}exists(A){return this.tag&&A(this.value)}forall(A){return!this.tag||A(this.value)}filter(A){return!this.tag||A(this.value)?this:G.none()}getOr(A){return this.tag?this.value:A}or(A){return this.tag?this:A}getOrThunk(A){return this.tag?this.value:A()}orThunk(A){return this.tag?this:A()}getOrDie(A){if(this.tag)return this.value;throw new Error(A??"Called getOrDie on None")}static from(A){return Xt(A)?G.some(A):G.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(A){this.tag&&A(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}G.singletonNone=new G(!1);const Nt=Array.prototype.slice,Ji=Array.prototype.indexOf,ko=Array.prototype.push,re=(S,A)=>Ji.call(S,A),ao=(S,A)=>re(S,A)>-1,Gn=(S,A)=>{for(let P=0,q=S.length;P<q;P++){const ee=S[P];if(A(ee,P))return!0}return!1},oo=(S,A)=>{const P=S.length,q=new Array(P);for(let ee=0;ee<P;ee++){const He=S[ee];q[ee]=A(He,ee)}return q},xe=(S,A)=>{for(let P=0,q=S.length;P<q;P++){const ee=S[P];A(ee,P)}},J=(S,A)=>{const P=[];for(let q=0,ee=S.length;q<ee;q++){const He=S[q];A(He,q)&&P.push(He)}return P},bs=(S,A)=>{if(S.length===0)return[];{let P=A(S[0]);const q=[];let ee=[];for(let He=0,xt=S.length;He<xt;He++){const Rt=S[He],ot=A(Rt);ot!==P&&(q.push(ee),ee=[]),P=ot,ee.push(Rt)}return ee.length!==0&&q.push(ee),q}},Ue=(S,A,P)=>(xe(S,(q,ee)=>{P=A(P,q,ee)}),P),De=(S,A,P)=>{for(let q=0,ee=S.length;q<ee;q++){const He=S[q];if(A(He,q))return G.some(He);if(P(He,q))break}return G.none()},E=(S,A)=>De(S,A,Cn),lo=S=>{const A=[];for(let P=0,q=S.length;P<q;++P){if(!Kt(S[P]))throw new Error("Arr.flatten item "+P+" was not an array, input: "+S);ko.apply(A,S[P])}return A},Be=(S,A)=>lo(oo(S,A)),go=S=>{const A=Nt.call(S,0);return A.reverse(),A},Ot=(S,A)=>A>=0&&A<S.length?G.some(S[A]):G.none(),Me=S=>Ot(S,0),zo=S=>Ot(S,S.length-1),ls=(S,A)=>{const P=[],q=$n(A)?ee=>Gn(P,He=>A(He,ee)):ee=>ao(P,ee);for(let ee=0,He=S.length;ee<He;ee++){const xt=S[ee];q(xt)||P.push(xt)}return P},Ko=(S,A,P=hn)=>S.exists(q=>P(q,A)),xr=(S,A,P=hn)=>Ne(S,A,P).getOr(S.isNone()&&A.isNone()),Ne=(S,A,P)=>S.isSome()&&A.isSome()?G.some(P(S.getOrDie(),A.getOrDie())):G.none(),ct=8,B=1,ys=(S,A)=>{const P=(A||document).createElement("div");if(P.innerHTML=S,!P.hasChildNodes()||P.childNodes.length>1){const q="HTML does not have a single root node";throw console.error(q,S),new Error(q)}return Io(P.childNodes[0])},qo=(S,A)=>{const P=(A||document).createElement(S);return Io(P)},Pn=(S,A)=>{const P=(A||document).createTextNode(S);return Io(P)},Io=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},pn={fromHtml:ys,fromTag:qo,fromText:Pn,fromDom:Io,fromPoint:(S,A,P)=>G.from(S.dom.elementFromPoint(A,P)).map(Io)},Ut=(S,A)=>{const P=S.dom;if(P.nodeType!==B)return!1;{const q=P;if(q.matches!==void 0)return q.matches(A);if(q.msMatchesSelector!==void 0)return q.msMatchesSelector(A);if(q.webkitMatchesSelector!==void 0)return q.webkitMatchesSelector(A);if(q.mozMatchesSelector!==void 0)return q.mozMatchesSelector(A);throw new Error("Browser lacks native selectors")}},Wo=(S,A)=>S.dom===A.dom,$t=(S,A)=>{const P=S.dom,q=A.dom;return P===q?!1:P.contains(q)},Ce=Ut;var el=(S,A,P,q,ee)=>S(P,q)?G.some(P):$n(ee)&&ee(P)?G.none():A(P,q,ee);typeof window<"u"||Function("return this;")();const hr=S=>S.dom.nodeName.toLowerCase(),kt=S=>S.dom.nodeType,El=S=>A=>kt(A)===S,_n=S=>kt(S)===ct||hr(S)==="#comment",od=El(B),xn=S=>A=>od(A)&&hr(A)===S,qr=S=>G.from(S.dom.parentNode).map(pn.fromDom),Ol=S=>G.from(S.dom.parentElement).map(pn.fromDom),Rs=S=>G.from(S.dom.nextSibling).map(pn.fromDom),Kn=S=>oo(S.dom.childNodes,pn.fromDom),dn=(S,A)=>{const P=S.dom.childNodes;return G.from(P[A]).map(pn.fromDom)},Tl=S=>dn(S,0),Bn=S=>dn(S,S.dom.childNodes.length-1),an=(S,A,P)=>{let q=S.dom;const ee=$n(P)?P:Cn;for(;q.parentNode;){q=q.parentNode;const He=pn.fromDom(q);if(A(He))return G.some(He);if(ee(He))break}return G.none()},Al=(S,A,P)=>el((q,ee)=>ee(q),an,S,A,P),un=(S,A)=>{qr(S).each(P=>{P.dom.insertBefore(A.dom,S.dom)})},xi=(S,A)=>{Rs(S).fold(()=>{qr(S).each(P=>{Ls(P,A)})},P=>{un(P,A)})},ws=(S,A)=>{Tl(S).fold(()=>{Ls(S,A)},P=>{S.dom.insertBefore(A.dom,P.dom)})},Ls=(S,A)=>{S.dom.appendChild(A.dom)},Si=(S,A)=>{xe(A,P=>{un(S,P)})},pr=(S,A)=>{xe(A,P=>{Ls(S,P)})},ki=S=>{S.dom.textContent="",xe(Kn(S),A=>{nt(A)})},nt=S=>{const A=S.dom;A.parentNode!==null&&A.parentNode.removeChild(A)};var wo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Gs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Xr=tinymce.util.Tools.resolve("tinymce.util.VK");const pc=S=>oo(S,pn.fromDom),tl=Object.keys,jo=(S,A)=>{const P=tl(S);for(let q=0,ee=P.length;q<ee;q++){const He=P[q],xt=S[He];A(xt,He)}},ol=S=>(A,P)=>{S[P]=A},Dl=(S,A,P,q)=>{jo(S,(ee,He)=>{(A(ee,He)?P:q)(ee,He)})},Xo=(S,A)=>{const P={};return Dl(S,A,ol(P),Hn),P},It=(S,A,P)=>{if(Bo(P)||to(P)||is(P))S.setAttribute(A,P+"");else throw console.error("Invalid call to Attribute.set. Key ",A,":: Value ",P,":: Element ",S),new Error("Attribute value was not simple")},tr=(S,A)=>{const P=S.dom;jo(A,(q,ee)=>{It(P,ee,q)})},_i=S=>Ue(S.dom.attributes,(A,P)=>(A[P.name]=P.value,A),{}),nd=(S,A)=>pn.fromDom(S.dom.cloneNode(A)),dm=S=>nd(S,!0),Cs=(S,A)=>{const P=pn.fromTag(A),q=_i(S);return tr(P,q),P},Sr=(S,A)=>{const P=Cs(S,A);xi(S,P);const q=Kn(S);return pr(P,q),nt(S),P};var Mn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yr=S=>A=>Xt(A)&&A.nodeName.toLowerCase()===S,Hs=S=>A=>Xt(A)&&S.test(A.nodeName),kr=S=>Xt(S)&&S.nodeType===3,Ao=S=>Xt(S)&&S.nodeType===1,or=Hs(/^(OL|UL|DL)$/),Ia=Hs(/^(OL|UL)$/),rd=Yr("ol"),Ei=Hs(/^(LI|DT|DD)$/),Xe=Hs(/^(DT|DD)$/),tt=Hs(/^(TH|TD)$/),_r=Yr("br"),sd=S=>{var A;return((A=S.parentNode)===null||A===void 0?void 0:A.firstChild)===S},Ml=(S,A)=>Xt(A)&&A.nodeName in S.schema.getTextBlockElements(),Xd=(S,A)=>Xt(S)&&S.nodeName in A,Yo=(S,A)=>Xt(A)&&A.nodeName in S.schema.getVoidElements(),ad=(S,A)=>_r(A)?S.isBlock(A.nextSibling)&&!_r(A.previousSibling):!1,Nl=(S,A,P)=>{const q=S.isEmpty(A);return P&&S.select("span[data-mce-type=bookmark]",A).length>0?!1:q},Rl=(S,A)=>S.isChildOf(A,S.getRoot()),Oi=S=>A=>A.options.get(S),Yd=S=>{const A=S.options.register;A("lists_indent_on_tab",{processor:"boolean",default:!0})},Pr=Oi("lists_indent_on_tab"),$o=Oi("forced_root_block"),Qd=Oi("forced_root_block_attrs"),nl=(S,A)=>{const P=S.dom,q=S.schema.getBlockElements(),ee=P.createFragment(),He=$o(S),xt=Qd(S);let Rt,ot,Ft=!1;for(ot=P.create(He,xt),Xd(A.firstChild,q)||ee.appendChild(ot);Rt=A.firstChild;){const Zo=Rt.nodeName;!Ft&&(Zo!=="SPAN"||Rt.getAttribute("data-mce-type")!=="bookmark")&&(Ft=!0),Xd(Rt,q)?(ee.appendChild(Rt),ot=null):(ot||(ot=P.create(He,xt),ee.appendChild(ot)),ot.appendChild(Rt))}return!Ft&&ot&&ot.appendChild(P.create("br",{"data-mce-bogus":"1"})),ee},xs=Mn.DOM,nr=(S,A,P)=>{const q=Ft=>{const Zo=Ft.parentNode;Zo&&fr.each(ee,Fn=>{Zo.insertBefore(Fn,P.parentNode)}),xs.remove(Ft)},ee=xs.select('span[data-mce-type="bookmark"]',A),He=nl(S,P),xt=xs.createRng();xt.setStartAfter(P),xt.setEndAfter(A);const Rt=xt.extractContents();for(let Ft=Rt.firstChild;Ft;Ft=Ft.firstChild)if(Ft.nodeName==="LI"&&S.dom.isEmpty(Ft)){xs.remove(Ft);break}S.dom.isEmpty(Rt)||xs.insertAfter(Rt,A),xs.insertAfter(He,A);const ot=P.parentElement;ot&&Nl(S.dom,ot)&&q(ot),xs.remove(P),Nl(S.dom,A)&&xs.remove(A)},Er=xn("dd"),Ks=xn("dt"),fc=(S,A)=>{Er(A)?Sr(A,"dt"):Ks(A)&&Ol(A).each(P=>nr(S,P.dom,A.dom))},vc=S=>{Ks(S)&&Sr(S,"dd")},ti=(S,A,P)=>{A==="Indent"?xe(P,vc):xe(P,q=>fc(S,q))},Ll=(S,A)=>{if(kr(S))return{container:S,offset:A};const P=wo.getNode(S,A);return kr(P)?{container:P,offset:A>=S.childNodes.length?P.data.length:0}:P.previousSibling&&kr(P.previousSibling)?{container:P.previousSibling,offset:P.previousSibling.data.length}:P.nextSibling&&kr(P.nextSibling)?{container:P.nextSibling,offset:0}:{container:S,offset:A}},Do=S=>{const A=S.cloneRange(),P=Ll(S.startContainer,S.startOffset);A.setStart(P.container,P.offset);const q=Ll(S.endContainer,S.endOffset);return A.setEnd(q.container,q.offset),A},um=["OL","UL","DL"],Fo=um.join(","),xa=(S,A)=>{const P=A||S.selection.getStart(!0);return S.dom.getParent(P,Fo,Pl(S,P))},Or=(S,A)=>Xt(S)&&A.length===1&&A[0]===S,Hl=S=>J(S.querySelectorAll(Fo),or),Qr=S=>{const A=xa(S),P=S.selection.getSelectedBlocks();return Or(A,P)?Hl(A):J(P,q=>or(q)&&A!==q)},bc=(S,A)=>{const P=fr.map(A,q=>S.dom.getParent(q,"li,dd,dt",Pl(S,q))||q);return ls(P)},cs=S=>{const A=S.selection.getSelectedBlocks();return J(bc(S,A),Ei)},mm=S=>J(cs(S),Xe),Ss=(S,A)=>{const P=S.dom.getParents(A,"TD,TH");return P.length>0?P[0]:S.getBody()},gm=(S,A)=>!or(A)&&!Ei(A)&&Gn(um,P=>S.isValidChild(A.nodeName,P)),Pl=(S,A)=>{const P=S.dom.getParents(A,S.dom.isBlock);return E(P,q=>gm(S.schema,q)).getOr(S.getBody())},Cg=S=>qr(S).exists(A=>Ei(A.dom)&&Tl(A).exists(P=>!or(P.dom))&&Bn(A).exists(P=>!or(P.dom))),Sa=(S,A)=>{const P=S.dom.getParents(A,"ol,ul",Pl(S,A));return zo(P)},rl=S=>{const A=Sa(S,S.selection.getStart()),P=J(S.selection.getSelectedBlocks(),Ia);return A.toArray().concat(P)},Jd=S=>{const A=S.selection.getStart();return S.dom.getParents(A,"ol,ul",Pl(S,A))},hm=S=>{const A=rl(S),P=Jd(S);return E(P,q=>Cg(pn.fromDom(q))).fold(()=>eu(S,A),q=>[q])},eu=(S,A)=>{const P=oo(A,q=>Sa(S,q).getOr(q));return ls(P)},sl=S=>/\btox\-/.test(S.className),tu=(S,A)=>De(S,or,tt).exists(P=>P.nodeName===A&&!sl(P)),ou=(S,A)=>A!==null&&!S.dom.isEditable(A),Jr=S=>{const A=xa(S);return ou(S,A)},fn=(S,A)=>{const P=S.dom.getParent(A,"ol,ul,dl");return ou(S,P)},al=(S,A)=>{const P=S.selection.getNode();return A({parents:S.dom.getParents(P),element:P}),S.on("NodeChange",A),()=>S.off("NodeChange",A)},nu=(S,A)=>{const P=(A||document).createDocumentFragment();return xe(S,q=>{P.appendChild(q.dom)}),pn.fromDom(P)},Ti=(S,A,P)=>S.dispatch("ListMutation",{action:A,element:P}),oi=(S=>A=>A.replace(S,""))(/^\s+|\s+$/g),xg=S=>S.length>0,Ps=S=>!xg(S),Br=S=>S.style!==void 0&&$n(S.style.getPropertyValue),L=(S,A,P)=>{if(!Bo(P))throw console.error("Invalid call to CSS.set. Property ",A,":: Value ",P,":: Element ",S),new Error("CSS value must be a string: "+P);Br(S)&&S.style.setProperty(A,P)},z=(S,A,P)=>{const q=S.dom;L(q,A,P)},Z=S=>Ce(S,"OL,UL"),ae=S=>Tl(S).exists(Z),lt=S=>Bn(S).exists(Z),_t=S=>"listAttributes"in S,In=S=>"isInPreviousLi"in S,Co=S=>"isComment"in S,Bl=S=>S.depth>0,Ai=S=>S.isSelected,qs=S=>{const A=Kn(S),P=lt(S)?A.slice(0,-1):A;return oo(P,dm)},fe=(S,A,P)=>qr(S).filter(od).map(q=>({depth:A,dirty:!1,isSelected:P,content:qs(S),itemAttributes:_i(S),listAttributes:_i(q),listType:hr(q),isInPreviousLi:!1})),Bs=(S,A)=>{Ls(S.item,A.list)},Xs=S=>{for(let A=1;A<S.length;A++)Bs(S[A-1],S[A])},Ir=(S,A)=>{Ne(zo(S),Me(A),Bs)},rr=(S,A)=>{const P={list:pn.fromTag(A,S),item:pn.fromTag("li",S)};return Ls(P.list,P.item),P},ln=(S,A,P)=>{const q=[];for(let ee=0;ee<P;ee++)q.push(rr(S,A.listType));return q},Il=(S,A)=>{for(let P=0;P<S.length-1;P++)z(S[P].item,"list-style-type","none");zo(S).each(P=>{tr(P.list,A.listAttributes),tr(P.item,A.itemAttributes),pr(P.item,A.content)})},Sg=(S,A)=>{hr(S.list)!==A.listType&&(S.list=Sr(S.list,A.listType)),tr(S.list,A.listAttributes)},So=(S,A,P)=>{const q=pn.fromTag("li",S);return tr(q,A),pr(q,P),q},yc=(S,A)=>{Ls(S.list,A),S.item=A},ru=(S,A,P,q)=>{const ee=pn.fromTag(q,S);return tr(ee,A),pr(ee,P),ee},Tr=(S,A,P)=>{const q=A.slice(0,P.depth);return zo(q).each(ee=>{if(_t(P)){const He=So(S,P.itemAttributes,P.content);yc(ee,He),Sg(ee,P)}else if(In(P)){if(P.isInPreviousLi){const He=ru(S,P.attributes,P.content,P.type);Ls(ee.item,He)}}else{const He=pn.fromHtml(`<!--${P.content}-->`);Ls(ee.list,He)}}),q},sr=(S,A,P)=>{const q=ln(S,P,P.depth-A.length);return Xs(q),Il(q,P),Ir(A,q),A.concat(q)},Fl=(S,A)=>{let P=G.none();const q=Ue(A,(ee,He,xt)=>_t(He)?He.depth>ee.length?sr(S,ee,He):Tr(S,ee,He):xt===0&&Co(He)?(P=G.some(He),ee):Tr(S,ee,He),[]);return P.each(ee=>{const He=pn.fromHtml(`<!--${ee.content}-->`);Me(q).each(xt=>{ws(xt.list,He)})}),Me(q).map(ee=>ee.list)},Mv=(S,A)=>{switch(S){case"Indent":A.depth++;break;case"Outdent":A.depth--;break;case"Flatten":A.depth=0}A.dirty=!0},pm=(S,A)=>{_t(S)&&_t(A)&&(S.listType=A.listType,S.listAttributes={...A.listAttributes})},mn=S=>{S.listAttributes=Xo(S.listAttributes,(A,P)=>P!=="start")},ca=(S,A)=>{const P=S[A].depth,q=He=>He.depth===P&&!He.dirty,ee=He=>He.depth<P;return De(go(S.slice(0,A)),q,ee).orThunk(()=>De(S.slice(A+1),q,ee))},il=S=>(xe(S,(A,P)=>{ca(S,P).fold(()=>{A.dirty&&_t(A)&&mn(A)},q=>pm(A,q))}),S),Ys=S=>{let A=S;return{get:()=>A,set:P=>{A=P}}},tn=(S,A,P)=>_t(S)?{depth:S.depth,dirty:S.dirty,content:S.content,isSelected:S.isSelected,type:A,attributes:S.itemAttributes,isInPreviousLi:P}:S,su=(S,A,P,q)=>{var ee;if(_n(q))return[{depth:S+1,content:(ee=q.dom.nodeValue)!==null&&ee!==void 0?ee:"",dirty:!1,isSelected:!1,isComment:!0}];A.each(Rt=>{Wo(Rt.start,q)&&P.set(!0)});const He=fe(q,S,P.get());A.each(Rt=>{Wo(Rt.end,q)&&P.set(!1)});const xt=Bn(q).filter(Z).map(Rt=>ar(S,A,P,Rt)).getOr([]);return He.toArray().concat(xt)},kg=(S,A,P,q)=>Tl(q).filter(Z).fold(()=>su(S,A,P,q),ee=>{const He=Ue(Kn(q),(xt,Rt,ot)=>{if(ot===0)return xt;{const Ft=su(S,A,P,Rt).map(Zo=>tn(Zo,Rt.dom.nodeName.toLowerCase(),!0));return xt.concat(Ft)}},[]);return ar(S,A,P,ee).concat(He)}),ar=(S,A,P,q)=>Be(Kn(q),ee=>{const He=Z(ee)?ar:kg,xt=S+1;return He(xt,A,P,ee)}),ll=(S,A)=>{const P=Ys(!1),q=0;return oo(S,ee=>({sourceList:ee,entries:ar(q,A,P,ee)}))},da=(S,A)=>{const P=il(A);return oo(P,q=>{const ee=Co(q)?nu([pn.fromHtml(`<!--${q.content}-->`)]):nu(q.content);return pn.fromDom(nl(S,ee.dom))})},Lo=(S,A)=>{const P=il(A);return Fl(S.contentDocument,P).toArray()},fm=(S,A)=>Be(bs(A,Bl),P=>Me(P).exists(Bl)?Lo(S,P):da(S,P)),id=(S,A)=>{xe(J(S,Ai),P=>Mv(A,P))},_g=S=>{const A=oo(cs(S),pn.fromDom);return Ne(E(A,Ns(ae)),E(go(A),Ns(ae)),(P,q)=>({start:P,end:q}))},Eg=(S,A,P)=>{const q=ll(A,_g(S));xe(q,ee=>{id(ee.entries,P);const He=fm(S,ee.entries);xe(He,xt=>{Ti(S,P==="Indent"?"IndentList":"OutdentList",xt.dom)}),Si(ee.sourceList,He),nt(ee.sourceList)})},En=(S,A)=>{const P=pc(hm(S)),q=pc(mm(S));let ee=!1;if(P.length||q.length){const He=S.selection.getBookmark();Eg(S,P,A),ti(S,A,q),S.selection.moveToBookmark(He),S.selection.setRng(Do(S.selection.getRng())),S.nodeChanged(),ee=!0}return ee},ni=(S,A)=>!Jr(S)&&En(S,A),Nn=S=>ni(S,"Indent"),Fa=S=>ni(S,"Outdent"),Di=S=>ni(S,"Flatten"),Fr="\uFEFF",au=S=>S===Fr,wc=(S,A,P)=>an(S,A,P).isSome(),Va=(S,A)=>wc(S,vt(Wo,A));var Og=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Cc=Mn.DOM,cl=S=>{const A={},P=q=>{let ee=S[q?"startContainer":"endContainer"],He=S[q?"startOffset":"endOffset"];if(Ao(ee)){const xt=Cc.create("span",{"data-mce-type":"bookmark"});ee.hasChildNodes()?(He=Math.min(He,ee.childNodes.length-1),q?ee.insertBefore(xt,ee.childNodes[He]):Cc.insertAfter(xt,ee.childNodes[He])):ee.appendChild(xt),ee=xt,He=0}A[q?"startContainer":"endContainer"]=ee,A[q?"startOffset":"endOffset"]=He};return P(!0),S.collapsed||P(),A},xc=S=>{const A=q=>{const ee=Rt=>{var ot;let Ft=(ot=Rt.parentNode)===null||ot===void 0?void 0:ot.firstChild,Zo=0;for(;Ft;){if(Ft===Rt)return Zo;(!Ao(Ft)||Ft.getAttribute("data-mce-type")!=="bookmark")&&Zo++,Ft=Ft.nextSibling}return-1};let He=S[q?"startContainer":"endContainer"],xt=S[q?"startOffset":"endOffset"];if(He){if(Ao(He)&&He.parentNode){const Rt=He;xt=ee(He),He=He.parentNode,Cc.remove(Rt),!He.hasChildNodes()&&Cc.isBlock(He)&&He.appendChild(Cc.create("br"))}S[q?"startContainer":"endContainer"]=He,S[q?"startOffset":"endOffset"]=xt}};A(!0),A();const P=Cc.createRng();return P.setStart(S.startContainer,S.startOffset),S.endContainer&&P.setEnd(S.endContainer,S.endOffset),Do(P)},za=S=>{switch(S){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},vm=(S,A,P)=>{const q=P["list-style-type"]?P["list-style-type"]:null;S.setStyle(A,"list-style-type",q)},Qs=(S,A)=>{fr.each(A,(P,q)=>{S.setAttribute(q,P)})},Sc=(S,A,P)=>{Qs(A,P["list-attributes"]),fr.each(S.select("li",A),q=>{Qs(q,P["list-item-attributes"])})},Vl=(S,A,P)=>{vm(S,A,P),Sc(S,A,P)},iu=(S,A,P)=>{fr.each(P,q=>S.setStyle(A,q,""))},bm=(S,A)=>Xt(A)&&!Xd(A,S.schema.getBlockElements()),ld=(S,A,P,q)=>{let ee=A[P?"startContainer":"endContainer"];const He=A[P?"startOffset":"endOffset"];Ao(ee)&&(ee=ee.childNodes[Math.min(He,ee.childNodes.length-1)]||ee),!P&&_r(ee.nextSibling)&&(ee=ee.nextSibling);const xt=ot=>{for(;!S.dom.isBlock(ot)&&ot.parentNode&&q!==ot;)ot=ot.parentNode;return ot},Rt=(ot,Ft)=>{var Zo;const Fn=new Gs(ot,xt(ot)),Es=Ft?"next":"prev";let Ho;for(;Ho=Fn[Es]();)if(!(Yo(S,Ho)||au(Ho.textContent)||((Zo=Ho.textContent)===null||Zo===void 0?void 0:Zo.length)===0))return G.some(Ho);return G.none()};if(P&&kr(ee))if(au(ee.textContent))ee=Rt(ee,!1).getOr(ee);else for(ee.parentNode!==null&&bm(S,ee.parentNode)&&(ee=ee.parentNode);ee.previousSibling!==null&&(bm(S,ee.previousSibling)||kr(ee.previousSibling));)ee=ee.previousSibling;if(!P&&kr(ee))if(au(ee.textContent))ee=Rt(ee,!0).getOr(ee);else for(ee.parentNode!==null&&bm(S,ee.parentNode)&&(ee=ee.parentNode);ee.nextSibling!==null&&(bm(S,ee.nextSibling)||kr(ee.nextSibling));)ee=ee.nextSibling;for(;ee.parentNode!==q;){const ot=ee.parentNode;if(Ml(S,ee)||/^(TD|TH)$/.test(ot.nodeName))return ee;ee=ot}return ee},t1=(S,A,P)=>{const q=[],ee=S.dom,He=ld(S,A,!0,P),xt=ld(S,A,!1,P);let Rt;const ot=[];for(let Ft=He;Ft&&(ot.push(Ft),Ft!==xt);Ft=Ft.nextSibling);return fr.each(ot,Ft=>{var Zo;if(Ml(S,Ft)){q.push(Ft),Rt=null;return}if(ee.isBlock(Ft)||_r(Ft)){_r(Ft)&&ee.remove(Ft),Rt=null;return}const Fn=Ft.nextSibling;if(Og.isBookmarkNode(Ft)&&(or(Fn)||Ml(S,Fn)||!Fn&&Ft.parentNode===P)){Rt=null;return}Rt||(Rt=ee.create("p"),(Zo=Ft.parentNode)===null||Zo===void 0||Zo.insertBefore(Rt,Ft),q.push(Rt)),Rt.appendChild(Ft)}),q},lu=(S,A,P)=>{const q=S.getStyle(A,"list-style-type");let ee=P?P["list-style-type"]:"";return ee=ee===null?"":ee,q===ee},o1=(S,A)=>{const P=S.selection.getStart(!0),q=ld(S,A,!0,S.getBody());return Va(pn.fromDom(q),pn.fromDom(A.commonAncestorContainer))?A.commonAncestorContainer:P},kc=(S,A,P)=>{const q=S.selection.getRng();let ee="LI";const He=Pl(S,o1(S,q)),xt=S.dom;if(xt.getContentEditable(S.selection.getNode())==="false")return;A=A.toUpperCase(),A==="DL"&&(ee="DT");const Rt=cl(q),ot=J(t1(S,q,He),S.dom.isEditable);fr.each(ot,Ft=>{let Zo;const Fn=Ft.previousSibling,Es=Ft.parentNode;Ei(Es)||(Fn&&or(Fn)&&Fn.nodeName===A&&lu(xt,Fn,P)?(Zo=Fn,Ft=xt.rename(Ft,ee),Fn.appendChild(Ft)):(Zo=xt.create(A),Es.insertBefore(Zo,Ft),Zo.appendChild(Ft),Ft=xt.rename(Ft,ee)),iu(xt,Ft,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Vl(xt,Zo,P),cd(S.dom,Zo))}),S.selection.setRng(xc(Rt))},K=(S,A)=>or(S)&&S.nodeName===(A==null?void 0:A.nodeName),tp=(S,A,P)=>{const q=S.getStyle(A,"list-style-type",!0),ee=S.getStyle(P,"list-style-type",!0);return q===ee},Za=(S,A)=>S.className===A.className,cu=(S,A,P)=>K(A,P)&&tp(S,A,P)&&Za(A,P),cd=(S,A)=>{let P,q=A.nextSibling;if(cu(S,A,q)){const ee=q;for(;P=ee.firstChild;)A.appendChild(P);S.remove(ee)}if(q=A.previousSibling,cu(S,A,q)){const ee=q;for(;P=ee.lastChild;)A.insertBefore(P,A.firstChild);S.remove(ee)}},n1=(S,A,P,q)=>{if(A.nodeName!==P){const ee=S.dom.rename(A,P);Vl(S.dom,ee,q),Ti(S,za(P),ee)}else Vl(S.dom,A,q),Ti(S,za(P),A)},To=(S,A,P,q)=>{if(A.classList.forEach((ee,He,xt)=>{ee.startsWith("tox-")&&(xt.remove(ee),xt.length===0&&A.removeAttribute("class"))}),A.nodeName!==P){const ee=S.dom.rename(A,P);Vl(S.dom,ee,q),Ti(S,za(P),ee)}else Vl(S.dom,A,q),Ti(S,za(P),A)},zl=(S,A,P,q,ee)=>{const He=or(A);if(He&&A.nodeName===q&&!op(ee)&&!sl(A))Di(S);else{kc(S,q,ee);const xt=cl(S.selection.getRng()),Rt=He?[A,...P]:P,ot=He&&sl(A)?To:n1;fr.each(Rt,Ft=>{ot(S,Ft,q,ee)}),S.selection.setRng(xc(xt))}},op=S=>"list-style-type"in S,Mi=(S,A,P,q)=>{if(A!==S.getBody())if(A)if(A.nodeName===P&&!op(q)&&!sl(A))Di(S);else{const ee=cl(S.selection.getRng());sl(A)&&A.classList.forEach((xt,Rt,ot)=>{xt.startsWith("tox-")&&(ot.remove(xt),ot.length===0&&A.removeAttribute("class"))}),Vl(S.dom,A,q);const He=S.dom.rename(A,P);cd(S.dom,He),S.selection.setRng(xc(ee)),kc(S,P,q),Ti(S,za(P),He)}else kc(S,P,q),Ti(S,za(P),A)},ds=(S,A,P)=>{const q=xa(S);if(fn(S,q))return;const ee=Qr(S),He=wn(P)?P:{};ee.length>0?zl(S,q,ee,A,He):Mi(S,q,A,He)},du=Mn.DOM,Ua=(S,A)=>{const P=A.parentElement;if(P&&P.nodeName==="LI"&&P.firstChild===A){const q=P.previousSibling;q&&q.nodeName==="LI"?(q.appendChild(A),Nl(S,P)&&du.remove(P)):du.setStyle(P,"listStyleType","none")}if(or(P)){const q=P.previousSibling;q&&q.nodeName==="LI"&&q.appendChild(A)}},uu=(S,A)=>{const P=fr.grep(S.select("ol,ul",A));fr.each(P,q=>{Ua(S,q)})},ym=(S,A,P,q)=>{let ee=A.startContainer;const He=A.startOffset;if(kr(ee)&&(P?He<ee.data.length:He>0))return ee;const xt=S.schema.getNonEmptyElements();Ao(ee)&&(ee=wo.getNode(ee,He));const Rt=new Gs(ee,q);P&&ad(S.dom,ee)&&Rt.next();const ot=P?Rt.next.bind(Rt):Rt.prev2.bind(Rt);for(;ee=ot();)if(ee.nodeName==="LI"&&!ee.hasChildNodes()||xt[ee.nodeName]||kr(ee)&&ee.data.length>0)return ee;return null},np=(S,A)=>{const P=A.childNodes;return P.length===1&&!or(P[0])&&S.isBlock(P[0])},_c=(S,A)=>{np(S,A)&&S.remove(A.firstChild,!0)},mu=(S,A,P)=>{let q;const ee=np(S,P)?P.firstChild:P;if(_c(S,A),!Nl(S,A,!0))for(;q=A.firstChild;)ee.appendChild(q)},Zl=(S,A,P)=>{let q;const ee=A.parentNode;if(!Rl(S,A)||!Rl(S,P))return;or(P.lastChild)&&(q=P.lastChild),ee===P.lastChild&&_r(ee.previousSibling)&&S.remove(ee.previousSibling);const He=P.lastChild;He&&_r(He)&&A.hasChildNodes()&&S.remove(He),Nl(S,P,!0)&&ki(pn.fromDom(P)),mu(S,A,P),q&&P.appendChild(q);const xt=$t(pn.fromDom(P),pn.fromDom(A))?S.getParents(A,or,P):[];S.remove(A),xe(xt,Rt=>{Nl(S,Rt)&&Rt!==S.getRoot()&&S.remove(Rt)})},rp=(S,A,P)=>{ki(pn.fromDom(P)),Zl(S.dom,A,P),S.selection.setCursorLocation(P,0)},us=(S,A,P,q)=>{const ee=S.dom;if(ee.isEmpty(q))rp(S,P,q);else{const He=cl(A);Zl(ee,P,q),S.selection.setRng(xc(He))}},ks=(S,A,P,q)=>{const ee=cl(A);Zl(S.dom,P,q);const He=xc(ee);S.selection.setRng(He)},Tg=(S,A)=>{const P=S.dom,q=S.selection,ee=q.getStart(),He=Ss(S,ee),xt=P.getParent(q.getStart(),"LI",He);if(xt){const Rt=xt.parentElement;if(Rt===S.getBody()&&Nl(P,Rt))return!0;const ot=Do(q.getRng()),Ft=P.getParent(ym(S,ot,A,He),"LI",He);if(Ft&&Ft!==xt)return S.undoManager.transact(()=>{A?us(S,ot,Ft,xt):sd(xt)?Fa(S):ks(S,ot,xt,Ft)}),!0;if(!Ft&&!A&&ot.startOffset===0&&ot.endOffset===0)return S.undoManager.transact(()=>{Di(S)}),!0}return!1},wm=(S,A,P)=>{const q=S.getParent(A.parentNode,S.isBlock,P);S.remove(A),q&&S.isEmpty(q)&&S.remove(q)},gu=(S,A)=>{const P=S.dom,q=S.selection.getStart(),ee=Ss(S,q),He=P.getParent(q,P.isBlock,ee);if(He&&P.isEmpty(He)){const xt=Do(S.selection.getRng()),Rt=P.getParent(ym(S,xt,A,ee),"LI",ee);if(Rt){const ot=Es=>ao(["td","th","caption"],hr(Es)),Ft=Es=>Es.dom===ee,Zo=Al(pn.fromDom(Rt),ot,Ft),Fn=Al(pn.fromDom(xt.startContainer),ot,Ft);return xr(Zo,Fn,Wo)?(S.undoManager.transact(()=>{const Es=Rt.parentNode;wm(P,He,ee),cd(P,Es),S.selection.select(Rt,!0),S.selection.collapse(A)}),!0):!1}}return!1},dl=(S,A)=>Tg(S,A)||gu(S,A),ka=S=>{const A=S.selection.getStart(),P=Ss(S,A);return S.dom.getParent(A,"LI,DT,DD",P)||cs(S).length>0},Cm=S=>ka(S)?(S.undoManager.transact(()=>{S.execCommand("Delete"),uu(S.dom,S.getBody())}),!0):!1,xm=(S,A)=>{const P=S.selection;return!fn(S,P.getNode())&&(P.isCollapsed()?dl(S,A):Cm(S))},sp=S=>{S.on("ExecCommand",A=>{const P=A.command.toLowerCase();(P==="delete"||P==="forwarddelete")&&ka(S)&&uu(S.dom,S.getBody())}),S.on("keydown",A=>{A.keyCode===Xr.BACKSPACE?xm(S,!1)&&A.preventDefault():A.keyCode===Xr.DELETE&&xm(S,!0)&&A.preventDefault()})},ul=S=>({backspaceDelete:A=>{xm(S,A)}}),Sm=(S,A)=>{const P=xa(S);P===null||fn(S,P)||S.undoManager.transact(()=>{wn(A.styles)&&S.dom.setStyles(P,A.styles),wn(A.attrs)&&jo(A.attrs,(q,ee)=>S.dom.setAttrib(P,ee,q))})},Ag=S=>{const A=go(oi(S).split("")),P=oo(A,(q,ee)=>{const He=q.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,ee)*He});return Ue(P,(q,ee)=>q+ee,0)},Dg=S=>{if(S--,S<0)return"";{const A=S%26,P=Math.floor(S/26),q=Dg(P),ee=String.fromCharCode("A".charCodeAt(0)+A);return q+ee}},Nv=S=>/^[A-Z]+$/.test(S),Mg=S=>/^[a-z]+$/.test(S),Rv=S=>/^[0-9]+$/.test(S),dd=S=>Rv(S)?2:Nv(S)?0:Mg(S)?1:Ps(S)?3:4,ir=S=>{switch(dd(S)){case 2:return G.some({listStyleType:G.none(),start:S});case 0:return G.some({listStyleType:G.some("upper-alpha"),start:Ag(S).toString()});case 1:return G.some({listStyleType:G.some("lower-alpha"),start:Ag(S).toString()});case 3:return G.some({listStyleType:G.none(),start:""});case 4:return G.none()}},Rn=S=>{const A=parseInt(S.start,10);return Ko(S.listStyleType,"upper-alpha")?Dg(A):Ko(S.listStyleType,"lower-alpha")?Dg(A).toLowerCase():S.start},_s=S=>{const A=xa(S);!rd(A)||fn(S,A)||S.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Rn({start:S.dom.getAttrib(A,"start","1"),listStyleType:G.from(S.dom.getStyle(A,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:P=>{const q=P.getData();ir(q.start).each(ee=>{S.execCommand("mceListUpdate",!1,{attrs:{start:ee.start==="1"?"":ee.start},styles:{"list-style-type":ee.listStyleType.getOr("")}})}),P.close()}})},km=(S,A)=>()=>{const P=xa(S);return Xt(P)&&P.nodeName===A},r1=S=>{S.addCommand("mceListProps",()=>{_s(S)})},Is=S=>{S.on("BeforeExecCommand",A=>{const P=A.command.toLowerCase();P==="indent"?Nn(S):P==="outdent"&&Fa(S)}),S.addCommand("InsertUnorderedList",(A,P)=>{ds(S,"UL",P)}),S.addCommand("InsertOrderedList",(A,P)=>{ds(S,"OL",P)}),S.addCommand("InsertDefinitionList",(A,P)=>{ds(S,"DL",P)}),S.addCommand("RemoveList",()=>{Di(S)}),r1(S),S.addCommand("mceListUpdate",(A,P)=>{wn(P)&&Sm(S,P)}),S.addQueryStateHandler("InsertUnorderedList",km(S,"UL")),S.addQueryStateHandler("InsertOrderedList",km(S,"OL")),S.addQueryStateHandler("InsertDefinitionList",km(S,"DL"))};var _m=tinymce.util.Tools.resolve("tinymce.html.Node");const ud=S=>S.type===3,ml=S=>S.length===0,Gt=S=>{const A=(ee,He)=>{const xt=_m.create("li");xe(ee,Rt=>xt.append(Rt)),He?S.insert(xt,He,!0):S.append(xt)},P=(ee,He)=>ud(He)?[...ee,He]:!ml(ee)&&!ud(He)?(A(ee,He),[]):ee,q=Ue(S.children(),P,[]);ml(q)||A(q)},Vr=S=>{S.on("PreInit",()=>{const{parser:A}=S;A.addNodeFilter("ul,ol",P=>xe(P,Gt))})},Em=S=>{S.on("keydown",A=>{A.keyCode!==Xr.TAB||Xr.metaKeyPressed(A)||S.undoManager.transact(()=>{(A.shiftKey?Fa(S):Nn(S))&&A.preventDefault()})})},Om=S=>{Pr(S)&&Em(S),sp(S)},Tm=(S,A)=>P=>{const q=ee=>{P.setActive(tu(ee.parents,A)),P.setEnabled(!fn(S,ee.element)&&S.selection.isEditable())};return P.setEnabled(S.selection.isEditable()),al(S,q)},s1=S=>{const A=P=>()=>S.execCommand(P);S.hasPlugin("advlist")||(S.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:A("InsertOrderedList"),onSetup:Tm(S,"OL")}),S.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:A("InsertUnorderedList"),onSetup:Tm(S,"UL")}))},hu=(S,A)=>P=>al(S,q=>P.setEnabled(tu(q.parents,A)&&!fn(S,q.element))),Am=S=>{const A={text:"List properties...",icon:"ordered-list",onAction:()=>S.execCommand("mceListProps"),onSetup:hu(S,"OL")};S.ui.registry.addMenuItem("listprops",A),S.ui.registry.addContextMenu("lists",{update:P=>{const q=xa(S,P);return rd(q)?["listprops"]:[]}})};var Ni=()=>{yt.add("lists",S=>(Yd(S),Vr(S),S.hasPlugin("rtc",!0)?r1(S):(Om(S),Is(S)),s1(S),Am(S),ul(S)))};Ni()})();(function(){var yt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Oo=Object.getPrototypeOf,ho=(L,z,Z)=>{var ae;return Z(L,z.prototype)?!0:((ae=L.constructor)===null||ae===void 0?void 0:ae.name)===z.name},Ro=L=>{const z=typeof L;return L===null?"null":z==="object"&&Array.isArray(L)?"array":z==="object"&&ho(L,String,(Z,ae)=>ae.isPrototypeOf(Z))?"string":z},Po=L=>z=>Ro(z)===L,Bo=L=>z=>typeof z===L,wn=L=>z=>L===z,Kt=(L,z)=>sn(L)&&ho(L,z,(Z,ae)=>Oo(Z)===ae),to=Po("string"),sn=Po("object"),Xt=L=>Kt(L,Object),$n=Po("array"),is=wn(null),Hn=Bo("boolean"),Kr=L=>L==null,hn=L=>!Kr(L),vt=Bo("function"),Ns=Bo("number"),Cn=(L,z)=>{if($n(L)){for(let Z=0,ae=L.length;Z<ae;++Z)if(!z(L[Z]))return!1;return!0}return!1},G=()=>{};class Nt{constructor(z,Z){this.tag=z,this.value=Z}static some(z){return new Nt(!0,z)}static none(){return Nt.singletonNone}fold(z,Z){return this.tag?Z(this.value):z()}isSome(){return this.tag}isNone(){return!this.tag}map(z){return this.tag?Nt.some(z(this.value)):Nt.none()}bind(z){return this.tag?z(this.value):Nt.none()}exists(z){return this.tag&&z(this.value)}forall(z){return!this.tag||z(this.value)}filter(z){return!this.tag||z(this.value)?this:Nt.none()}getOr(z){return this.tag?this.value:z}or(z){return this.tag?this:z}getOrThunk(z){return this.tag?this.value:z()}orThunk(z){return this.tag?this:z()}getOrDie(z){if(this.tag)return this.value;throw new Error(z??"Called getOrDie on None")}static from(z){return hn(z)?Nt.some(z):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(z){this.tag&&z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const Ji=Object.keys,ko=Object.hasOwnProperty,re=(L,z)=>{const Z=Ji(L);for(let ae=0,lt=Z.length;ae<lt;ae++){const _t=Z[ae],In=L[_t];z(In,_t)}},ao=L=>(z,Z)=>{L[Z]=z},Gn=(L,z,Z,ae)=>{re(L,(lt,_t)=>{(z(lt,_t)?Z:ae)(lt,_t)})},oo=(L,z)=>{const Z={};return Gn(L,z,ao(Z),G),Z},xe=(L,z)=>ko.call(L,z),J=(L,z)=>xe(L,z)&&L[z]!==void 0&&L[z]!==null,bs=Array.prototype.push,Ue=L=>{const z=[];for(let Z=0,ae=L.length;Z<ae;++Z){if(!$n(L[Z]))throw new Error("Arr.flatten item "+Z+" was not an array, input: "+L);bs.apply(z,L[Z])}return z},De=(L,z)=>z>=0&&z<L.length?Nt.some(L[z]):Nt.none(),E=L=>De(L,0),lo=(L,z)=>{for(let Z=0;Z<L.length;Z++){const ae=z(L[Z],Z);if(ae.isSome())return ae}return Nt.none()};typeof window<"u"||Function("return this;")();const Be=(L,z,Z)=>{if(to(Z)||Hn(Z)||Ns(Z))L.setAttribute(z,Z+"");else throw console.error("Invalid call to Attribute.set. Key ",z,":: Value ",Z,":: Element ",L),new Error("Attribute value was not simple")},go=(L,z,Z)=>{Be(L.dom,z,Z)},Ot=(L,z)=>{L.dom.removeAttribute(z)},Me=(L,z)=>{const Z=(z||document).createElement("div");if(Z.innerHTML=L,!Z.hasChildNodes()||Z.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,L),new Error(ae)}return Ko(Z.childNodes[0])},zo=(L,z)=>{const Z=(z||document).createElement(L);return Ko(Z)},ls=(L,z)=>{const Z=(z||document).createTextNode(L);return Ko(Z)},Ko=L=>{if(L==null)throw new Error("Node cannot be null or undefined");return{dom:L}},xr={fromHtml:Me,fromTag:zo,fromText:ls,fromDom:Ko,fromPoint:(L,z,Z)=>Nt.from(L.dom.elementFromPoint(z,Z)).map(Ko)};var Ne=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ct=tinymce.util.Tools.resolve("tinymce.util.URI");const B=L=>L.length>0,ys=L=>z=>z.options.get(L),qo=L=>{const z=L.options.register;z("image_dimensions",{processor:"boolean",default:!0}),z("image_advtab",{processor:"boolean",default:!1}),z("image_uploadtab",{processor:"boolean",default:!0}),z("image_prepend_url",{processor:"string",default:""}),z("image_class_list",{processor:"object[]"}),z("image_description",{processor:"boolean",default:!0}),z("image_title",{processor:"boolean",default:!1}),z("image_caption",{processor:"boolean",default:!1}),z("image_list",{processor:Z=>{const ae=Z===!1||to(Z)||Cn(Z,sn)||vt(Z);return ae?{value:Z,valid:ae}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Pn=ys("image_dimensions"),Io=ys("image_advtab"),pn=ys("image_uploadtab"),Ut=ys("image_prepend_url"),Wo=ys("image_class_list"),$t=ys("image_description"),Ce=ys("image_title"),el=ys("image_caption"),hr=ys("image_list"),kt=ys("a11y_advanced_options"),El=ys("automatic_uploads"),_n=L=>B(L.options.get("images_upload_url")),od=L=>hn(L.options.get("images_upload_handler")),xn=(L,z)=>Math.max(parseInt(L,10),parseInt(z,10)),qr=L=>new Promise(z=>{const Z=document.createElement("img"),ae=_t=>{Z.onload=Z.onerror=null,Z.parentNode&&Z.parentNode.removeChild(Z),z(_t)};Z.onload=()=>{const _t=xn(Z.width,Z.clientWidth),In=xn(Z.height,Z.clientHeight),Co={width:_t,height:In};ae(Promise.resolve(Co))},Z.onerror=()=>{ae(Promise.reject(`Failed to get image dimensions for: ${L}`))};const lt=Z.style;lt.visibility="hidden",lt.position="fixed",lt.bottom=lt.left="0px",lt.width=lt.height="auto",document.body.appendChild(Z),Z.src=L}),Ol=L=>(L&&(L=L.replace(/px$/,"")),L),Rs=L=>(L.length>0&&/^[0-9]+$/.test(L)&&(L+="px"),L),Kn=L=>{if(L.margin){const z=String(L.margin).split(" ");switch(z.length){case 1:L["margin-top"]=L["margin-top"]||z[0],L["margin-right"]=L["margin-right"]||z[0],L["margin-bottom"]=L["margin-bottom"]||z[0],L["margin-left"]=L["margin-left"]||z[0];break;case 2:L["margin-top"]=L["margin-top"]||z[0],L["margin-right"]=L["margin-right"]||z[1],L["margin-bottom"]=L["margin-bottom"]||z[0],L["margin-left"]=L["margin-left"]||z[1];break;case 3:L["margin-top"]=L["margin-top"]||z[0],L["margin-right"]=L["margin-right"]||z[1],L["margin-bottom"]=L["margin-bottom"]||z[2],L["margin-left"]=L["margin-left"]||z[1];break;case 4:L["margin-top"]=L["margin-top"]||z[0],L["margin-right"]=L["margin-right"]||z[1],L["margin-bottom"]=L["margin-bottom"]||z[2],L["margin-left"]=L["margin-left"]||z[3]}delete L.margin}return L},dn=(L,z)=>{const Z=hr(L);to(Z)?fetch(Z).then(ae=>{ae.ok&&ae.json().then(z)}):vt(Z)?Z(z):z(Z)},Tl=(L,z,Z)=>{const ae=()=>{Z.onload=Z.onerror=null,L.selection&&(L.selection.select(Z),L.nodeChanged())};Z.onload=()=>{!z.width&&!z.height&&Pn(L)&&L.dom.setAttribs(Z,{width:String(Z.clientWidth),height:String(Z.clientHeight)}),ae()},Z.onerror=ae},Bn=L=>new Promise((z,Z)=>{const ae=new FileReader;ae.onload=()=>{z(ae.result)},ae.onerror=()=>{var lt;Z((lt=ae.error)===null||lt===void 0?void 0:lt.message)},ae.readAsDataURL(L)}),an=L=>L.nodeName==="IMG"&&(L.hasAttribute("data-mce-object")||L.hasAttribute("data-mce-placeholder")),Al=(L,z)=>{const Z=L.options.get;return ct.isDomSafe(z,"img",{allow_html_data_urls:Z("allow_html_data_urls"),allow_script_urls:Z("allow_script_urls"),allow_svg_data_urls:Z("allow_svg_data_urls")})},un=Ne.DOM,xi=L=>L.style.marginLeft&&L.style.marginRight&&L.style.marginLeft===L.style.marginRight?Ol(L.style.marginLeft):"",ws=L=>L.style.marginTop&&L.style.marginBottom&&L.style.marginTop===L.style.marginBottom?Ol(L.style.marginTop):"",Ls=L=>L.style.borderWidth?Ol(L.style.borderWidth):"",Si=(L,z)=>{var Z;return L.hasAttribute(z)&&(Z=L.getAttribute(z))!==null&&Z!==void 0?Z:""},pr=L=>L.parentNode!==null&&L.parentNode.nodeName==="FIGURE",ki=(L,z,Z)=>{Z===""||Z===null?L.removeAttribute(z):L.setAttribute(z,Z)},nt=L=>{const z=un.create("figure",{class:"image"});un.insertAfter(z,L),z.appendChild(L),z.appendChild(un.create("figcaption",{contentEditable:"true"},"Caption")),z.contentEditable="false"},wo=L=>{const z=L.parentNode;hn(z)&&(un.insertAfter(L,z),un.remove(z))},Gs=L=>{pr(L)?wo(L):nt(L)},Xr=(L,z)=>{const Z=L.getAttribute("style"),ae=z(Z!==null?Z:"");ae.length>0?(L.setAttribute("style",ae),L.setAttribute("data-mce-style",ae)):L.removeAttribute("style")},pc=(L,z)=>(Z,ae,lt)=>{const _t=Z.style;_t[ae]?(_t[ae]=Rs(lt),Xr(Z,z)):ki(Z,ae,lt)},tl=(L,z)=>L.style[z]?Ol(L.style[z]):Si(L,z),jo=(L,z)=>{const Z=Rs(z);L.style.marginLeft=Z,L.style.marginRight=Z},ol=(L,z)=>{const Z=Rs(z);L.style.marginTop=Z,L.style.marginBottom=Z},Dl=(L,z)=>{const Z=Rs(z);L.style.borderWidth=Z},Xo=(L,z)=>{L.style.borderStyle=z},It=L=>{var z;return(z=L.style.borderStyle)!==null&&z!==void 0?z:""},tr=L=>hn(L)&&L.nodeName==="FIGURE",_i=L=>L.nodeName==="IMG",nd=L=>un.getAttrib(L,"alt").length===0&&un.getAttrib(L,"role")==="presentation",dm=L=>nd(L)?"":Si(L,"alt"),Cs=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Sr=(L,z)=>{var Z;const ae=document.createElement("img");return ki(ae,"style",z.style),(xi(ae)||z.hspace!=="")&&jo(ae,z.hspace),(ws(ae)||z.vspace!=="")&&ol(ae,z.vspace),(Ls(ae)||z.border!=="")&&Dl(ae,z.border),(It(ae)||z.borderStyle!=="")&&Xo(ae,z.borderStyle),L((Z=ae.getAttribute("style"))!==null&&Z!==void 0?Z:"")},Mn=(L,z)=>{const Z=document.createElement("img");if(or(L,{...z,caption:!1},Z),Hs(Z,z.alt,z.isDecorative),z.caption){const ae=un.create("figure",{class:"image"});return ae.appendChild(Z),ae.appendChild(un.create("figcaption",{contentEditable:"true"},"Caption")),ae.contentEditable="false",ae}else return Z},fr=(L,z)=>({src:Si(z,"src"),alt:dm(z),title:Si(z,"title"),width:tl(z,"width"),height:tl(z,"height"),class:Si(z,"class"),style:L(Si(z,"style")),caption:pr(z),hspace:xi(z),vspace:ws(z),border:Ls(z),borderStyle:It(z),isDecorative:nd(z)}),Yr=(L,z,Z,ae,lt)=>{Z[ae]!==z[ae]&&lt(L,ae,String(Z[ae]))},Hs=(L,z,Z)=>{if(Z){un.setAttrib(L,"role","presentation");const ae=xr.fromDom(L);go(ae,"alt","")}else{if(is(z)){const ae=xr.fromDom(L);Ot(ae,"alt")}else{const ae=xr.fromDom(L);go(ae,"alt",z)}un.getAttrib(L,"role")==="presentation"&&un.setAttrib(L,"role","")}},kr=(L,z,Z)=>{(Z.alt!==z.alt||Z.isDecorative!==z.isDecorative)&&Hs(L,Z.alt,Z.isDecorative)},Ao=(L,z)=>(Z,ae,lt)=>{L(Z,lt),Xr(Z,z)},or=(L,z,Z)=>{const ae=fr(L,Z);Yr(Z,ae,z,"caption",(lt,_t,In)=>Gs(lt)),Yr(Z,ae,z,"src",ki),Yr(Z,ae,z,"title",ki),Yr(Z,ae,z,"width",pc("width",L)),Yr(Z,ae,z,"height",pc("height",L)),Yr(Z,ae,z,"class",ki),Yr(Z,ae,z,"style",Ao((lt,_t)=>ki(lt,"style",_t),L)),Yr(Z,ae,z,"hspace",Ao(jo,L)),Yr(Z,ae,z,"vspace",Ao(ol,L)),Yr(Z,ae,z,"border",Ao(Dl,L)),Yr(Z,ae,z,"borderStyle",Ao(Xo,L)),kr(Z,ae,z)},Ia=(L,z)=>{const Z=L.dom.styles.parse(z),ae=Kn(Z),lt=L.dom.styles.parse(L.dom.styles.serialize(ae));return L.dom.styles.serialize(lt)},rd=L=>{const z=L.selection.getNode(),Z=L.dom.getParent(z,"figure.image");return Z?L.dom.select("img",Z)[0]:z&&(z.nodeName!=="IMG"||an(z))?null:z},Ei=(L,z)=>{var Z;const ae=L.dom,lt=oo(L.schema.getTextBlockElements(),(In,Co)=>!L.schema.isValidChild(Co,"figure")),_t=ae.getParent(z.parentNode,In=>J(lt,In.nodeName),L.getBody());return _t&&(Z=ae.split(_t,z))!==null&&Z!==void 0?Z:z},Xe=L=>{const z=rd(L);return z?fr(Z=>Ia(L,Z),z):Cs()},tt=(L,z)=>{const Z=Mn(lt=>Ia(L,lt),z);L.dom.setAttrib(Z,"data-mce-id","__mcenew"),L.focus(),L.selection.setContent(Z.outerHTML);const ae=L.dom.select('*[data-mce-id="__mcenew"]')[0];if(L.dom.setAttrib(ae,"data-mce-id",null),tr(ae)){const lt=Ei(L,ae);L.selection.select(lt)}else L.selection.select(ae)},_r=(L,z)=>{L.dom.setAttrib(z,"src",z.getAttribute("src"))},sd=(L,z)=>{if(z){const Z=L.dom.is(z.parentNode,"figure.image")?z.parentNode:z;L.dom.remove(Z),L.focus(),L.nodeChanged(),L.dom.isEmpty(L.getBody())&&(L.setContent(""),L.selection.setCursorLocation())}},Ml=(L,z)=>{const Z=rd(L);if(Z)if(or(ae=>Ia(L,ae),z,Z),_r(L,Z),tr(Z.parentNode)){const ae=Z.parentNode;Ei(L,ae),L.selection.select(Z.parentNode)}else L.selection.select(Z),Tl(L,z,Z)},Xd=(L,z)=>{const Z=z.src;return{...z,src:Al(L,Z)?Z:""}},Yo=(L,z)=>{const Z=rd(L);if(Z){const ae={...fr(_t=>Ia(L,_t),Z),...z},lt=Xd(L,ae);ae.src?Ml(L,lt):sd(L,Z)}else z.src&&tt(L,{...Cs(),...z})},ad=(L=>(...z)=>{if(z.length===0)throw new Error("Can't merge zero objects");const Z={};for(let ae=0;ae<z.length;ae++){const lt=z[ae];for(const _t in lt)xe(lt,_t)&&(Z[_t]=L(Z[_t],lt[_t]))}return Z})((L,z)=>Xt(L)&&Xt(z)?ad(L,z):z);var Nl=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Rl=tinymce.util.Tools.resolve("tinymce.util.Tools");const Oi=L=>to(L.value)?L.value:"",Yd=L=>to(L.text)?L.text:to(L.title)?L.title:"",Pr=(L,z)=>{const Z=[];return Rl.each(L,ae=>{const lt=Yd(ae);if(ae.menu!==void 0){const _t=Pr(ae.menu,z);Z.push({text:lt,items:_t})}else{const _t=z(ae);Z.push({text:lt,value:_t})}}),Z},$o=(L=Oi)=>z=>z?Nt.from(z).map(Z=>Pr(Z,L)):Nt.none(),Qd=L=>$o(Oi)(L),nl=L=>xe(L,"items"),xs=(L,z)=>lo(L,Z=>nl(Z)?xs(Z.items,z):Z.value===z?Nt.some(Z):Nt.none()),nr={sanitizer:$o,sanitize:Qd,findEntry:(L,z)=>L.bind(Z=>xs(Z,z))},Er={makeTab:L=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ks=L=>{const z=nr.sanitizer(ln=>L.convertURL(ln.value||ln.url||"","src")),Z=new Promise(ln=>{dn(L,Il=>{ln(z(Il).map(Sg=>Ue([[{text:"None",value:""}],Sg])))})}),ae=nr.sanitize(Wo(L)),lt=Io(L),_t=pn(L),In=_n(L),Co=od(L),Bl=Xe(L),Ai=$t(L),qs=Ce(L),fe=Pn(L),Bs=el(L),Xs=kt(L),Ir=El(L),rr=Nt.some(Ut(L)).filter(ln=>to(ln)&&ln.length>0);return Z.then(ln=>({image:Bl,imageList:ln,classList:ae,hasAdvTab:lt,hasUploadTab:_t,hasUploadUrl:In,hasUploadHandler:Co,hasDescription:Ai,hasImageTitle:qs,hasDimensions:fe,hasImageCaption:Bs,prependURL:rr,hasAccessibilityOptions:Xs,automaticUploads:Ir}))},fc=L=>{const z={name:"src",type:"urlinput",filetype:"image",label:"Source"},Z=L.imageList.map(qs=>({name:"images",type:"listbox",label:"Image list",items:qs})),ae={name:"alt",type:"input",label:"Alternative description",enabled:!(L.hasAccessibilityOptions&&L.image.isDecorative)},lt={name:"title",type:"input",label:"Image title"},_t={name:"dimensions",type:"sizeinput"},In={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Co=L.classList.map(qs=>({name:"classes",type:"listbox",label:"Class",items:qs})),Bl={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Ai=qs=>qs?{type:"grid",columns:2}:{type:"panel"};return Ue([[z],Z.toArray(),L.hasAccessibilityOptions&&L.hasDescription?[In]:[],L.hasDescription?[ae]:[],L.hasImageTitle?[lt]:[],L.hasDimensions?[_t]:[],[{...Ai(L.classList.isSome()&&L.hasImageCaption),items:Ue([Co.toArray(),L.hasImageCaption?[Bl]:[]])}]])},vc={makeTab:L=>({title:"General",name:"general",items:fc(L)}),makeItems:fc},ti={makeTab:L=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ll=L=>({prevImage:nr.findEntry(L.imageList,L.image.src),prevAlt:L.image.alt,open:!0}),Do=L=>({src:{value:L.src,meta:{}},images:L.src,alt:L.alt,title:L.title,dimensions:{width:L.width,height:L.height},classes:L.class,caption:L.caption,style:L.style,vspace:L.vspace,border:L.border,hspace:L.hspace,borderstyle:L.borderStyle,fileinput:[],isDecorative:L.isDecorative}),um=(L,z)=>({src:L.src.value,alt:(L.alt===null||L.alt.length===0)&&z?null:L.alt,title:L.title,width:L.dimensions.width,height:L.dimensions.height,class:L.classes,style:L.style,caption:L.caption,hspace:L.hspace,vspace:L.vspace,border:L.border,borderStyle:L.borderstyle,isDecorative:L.isDecorative}),Fo=(L,z)=>/^(?:[a-zA-Z]+:)?\/\//.test(z)?Nt.none():L.prependURL.bind(Z=>z.substring(0,Z.length)!==Z?Nt.some(Z+z):Nt.none()),xa=(L,z)=>{const Z=z.getData();Fo(L,Z.src.value).each(ae=>{z.setData({src:{value:ae,meta:Z.src.meta}})})},Or=(L,z,Z)=>{L.hasDescription&&to(Z.alt)&&(z.alt=Z.alt),L.hasAccessibilityOptions&&(z.isDecorative=Z.isDecorative||z.isDecorative||!1),L.hasImageTitle&&to(Z.title)&&(z.title=Z.title),L.hasDimensions&&(to(Z.width)&&(z.dimensions.width=Z.width),to(Z.height)&&(z.dimensions.height=Z.height)),to(Z.class)&&nr.findEntry(L.classList,Z.class).each(ae=>{z.classes=ae.value}),L.hasImageCaption&&Hn(Z.caption)&&(z.caption=Z.caption),L.hasAdvTab&&(to(Z.style)&&(z.style=Z.style),to(Z.vspace)&&(z.vspace=Z.vspace),to(Z.border)&&(z.border=Z.border),to(Z.hspace)&&(z.hspace=Z.hspace),to(Z.borderstyle)&&(z.borderstyle=Z.borderstyle))},Hl=(L,z)=>{const Z=z.getData(),ae=Z.src.meta;if(ae!==void 0){const lt=ad({},Z);Or(L,lt,ae),z.setData(lt)}},Qr=(L,z,Z,ae)=>{const lt=ae.getData(),_t=lt.src.value,In=lt.src.meta||{};!In.width&&!In.height&&z.hasDimensions&&(B(_t)?L.imageSize(_t).then(Co=>{Z.open&&ae.setData({dimensions:Co})}).catch(Co=>console.error(Co)):ae.setData({dimensions:{width:"",height:""}}))},bc=(L,z,Z)=>{const ae=Z.getData(),lt=nr.findEntry(L.imageList,ae.src.value);z.prevImage=lt,Z.setData({images:lt.map(_t=>_t.value).getOr("")})},cs=(L,z,Z,ae)=>{xa(z,ae),Hl(z,ae),Qr(L,z,Z,ae),bc(z,Z,ae)},mm=(L,z,Z,ae)=>{const lt=ae.getData(),_t=nr.findEntry(z.imageList,lt.images);_t.each(In=>{lt.alt===""||Z.prevImage.map(Co=>Co.text===lt.alt).getOr(!1)?In.value===""?ae.setData({src:In,alt:Z.prevAlt}):ae.setData({src:In,alt:In.text}):ae.setData({src:In})}),Z.prevImage=_t,cs(L,z,Z,ae)},Ss=(L,z,Z,ae)=>{const lt=ae.getData();ae.block("Uploading image"),E(lt.fileinput).fold(()=>{ae.unblock()},_t=>{const In=URL.createObjectURL(_t),Co=()=>{ae.unblock(),URL.revokeObjectURL(In)},Bl=Ai=>{ae.setData({src:{value:Ai,meta:{}}}),ae.showTab("general"),cs(L,z,Z,ae)};Bn(_t).then(Ai=>{const qs=L.createBlobCache(_t,In,Ai);z.automaticUploads?L.uploadImage(qs).then(fe=>{Bl(fe.url),Co()}).catch(fe=>{Co(),L.alertErr(fe)}):(L.addToBlobCache(qs),Bl(qs.blobUri()),ae.unblock())})})},gm=(L,z,Z)=>(ae,lt)=>{lt.name==="src"?cs(L,z,Z,ae):lt.name==="images"?mm(L,z,Z,ae):lt.name==="alt"?Z.prevAlt=ae.getData().alt:lt.name==="fileinput"?Ss(L,z,Z,ae):lt.name==="isDecorative"&&ae.setEnabled("alt",!ae.getData().isDecorative)},Pl=L=>()=>{L.open=!1},Cg=L=>L.hasAdvTab||L.hasUploadUrl||L.hasUploadHandler?{type:"tabpanel",tabs:Ue([[vc.makeTab(L)],L.hasAdvTab?[Er.makeTab(L)]:[],L.hasUploadTab&&(L.hasUploadUrl||L.hasUploadHandler)?[ti.makeTab(L)]:[]])}:{type:"panel",items:vc.makeItems(L)},Sa=(L,z,Z)=>ae=>{const lt=ad(Do(z.image),ae.getData()),_t={...lt,style:Sr(Z.normalizeCss,um(lt,!1))};L.execCommand("mceUpdateImage",!1,um(_t,z.hasAccessibilityOptions)),L.editorUpload.uploadImagesAuto(),ae.close()},rl=L=>z=>Al(L,z)?qr(L.documentBaseURI.toAbsolute(z)).then(Z=>({width:String(Z.width),height:String(Z.height)})):Promise.resolve({width:"",height:""}),Jd=L=>(z,Z,ae)=>{var lt;return L.editorUpload.blobCache.create({blob:z,blobUri:Z,name:(lt=z.name)===null||lt===void 0?void 0:lt.replace(/\.[^\.]+$/,""),filename:z.name,base64:ae.split(",")[1]})},hm=L=>z=>{L.editorUpload.blobCache.add(z)},eu=L=>z=>{L.windowManager.alert(z)},sl=L=>z=>Ia(L,z),tu=L=>z=>L.dom.parseStyle(z),ou=L=>(z,Z)=>L.dom.serializeStyle(z,Z),Jr=L=>z=>Nl(L).upload([z],!1).then(Z=>{var ae;return Z.length===0?Promise.reject("Failed to upload image"):Z[0].status===!1?Promise.reject((ae=Z[0].error)===null||ae===void 0?void 0:ae.message):Z[0]}),fn=L=>{const z={imageSize:rl(L),addToBlobCache:hm(L),createBlobCache:Jd(L),alertErr:eu(L),normalizeCss:sl(L),parseStyle:tu(L),serializeStyle:ou(L),uploadImage:Jr(L)};return{open:()=>{Ks(L).then(Z=>{const ae=Ll(Z);return{title:"Insert/Edit Image",size:"normal",body:Cg(Z),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Do(Z.image),onSubmit:Sa(L,Z,z),onChange:gm(z,Z,ae),onClose:Pl(ae)}}).then(L.windowManager.open)}}},al=L=>{L.addCommand("mceImage",fn(L).open),L.addCommand("mceUpdateImage",(z,Z)=>{L.undoManager.transact(()=>Yo(L,Z))})},nu=L=>{const z=L.attr("class");return hn(z)&&/\bimage\b/.test(z)},Ti=L=>z=>{let Z=z.length;const ae=lt=>{lt.attr("contenteditable",L?"true":null)};for(;Z--;){const lt=z[Z];nu(lt)&&(lt.attr("contenteditable",L?"false":null),Rl.each(lt.getAll("figcaption"),ae))}},oi=L=>{L.on("PreInit",()=>{L.parser.addNodeFilter("figure",Ti(!0)),L.serializer.addNodeFilter("figure",Ti(!1))})},xg=L=>z=>{const Z=()=>{z.setEnabled(L.selection.isEditable())};return L.on("NodeChange",Z),Z(),()=>{L.off("NodeChange",Z)}},Ps=L=>{L.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:fn(L).open,onSetup:z=>{z.setActive(hn(rd(L)));const Z=L.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",z.setActive).unbind,ae=xg(L)(z);return()=>{Z(),ae()}}}),L.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:fn(L).open,onSetup:xg(L)}),L.ui.registry.addContextMenu("image",{update:z=>L.selection.isEditable()&&(tr(z)||_i(z)&&!an(z))?["image"]:[]})};var Br=()=>{yt.add("image",L=>{qo(L),oi(L),Ps(L),al(L)})};Br()})();const Yj=gj({name:"Editor",__name:"index",props:{modelValue:{default:()=>""},placeholder:{default:()=>"请输入"},theme:{default:()=>"light"},language:{default:()=>"zh-Hans"},uploadProps:{default:()=>({})}},emits:["update:modelValue"],setup(yt,{emit:Oo}){const ho=yt,Ro=WW({get:()=>ho.modelValue,set:sn=>{Oo("update:modelValue",sn)}}),Po=KW(),Bo=KW(null),wn=WW(()=>ho.theme==="dark"),Kt=WW(()=>{const sn="//iots-cdnaccelerate.lshenergy.com/static/tinymce/6.7.2";return{language_url:`${sn}/langs/${ho.language}.js`,skin_url:`${sn}/skins/ui/oxide${wn.value?"-dark":""}`,content_css:`${sn}/skins/content/${wn.value?"dark":"default"}/content.min.css`,language:ho.language,placeholder:ho.placeholder,height:500,menubar:!1,branding:!1,plugins:"image advlist lists",toolbar:["undo redo bold italic underline forecolor backcolor lineheight alignleft aligncenter alignright bullist numlist fontsize customImage"],content_style:"body {font-size: 14px;}",font_size_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px",setup:Xt=>{Bo.value=Xt,Xt.ui.registry.addToggleButton("customImage",{icon:"image",onAction:()=>{var $n;($n=Po.value)==null||$n.$el.click()}})}}});function to(sn){var Xt;sn.url&&((Xt=GW==null?void 0:GW.activeEditor)==null||Xt.execCommand("mceInsertContent",!1,`<img src="${sn.url}" />`))}return AL(()=>wn.value,()=>{var sn,Xt;(Xt=(sn=Bo.value)==null?void 0:sn.destroy)==null||Xt.call(sn)}),hj(()=>{GW.init({})}),pj(()=>{var sn,Xt;(Xt=(sn=Bo.value)==null?void 0:sn.destroy)==null||Xt.call(sn)}),(sn,Xt)=>{const $n=Tj,is=Lj;return jW(),$W(Rj,null,{default:aj(()=>[wn.value?(jW(),$W(ij(mj),{key:0,modelValue:Ro.value,"onUpdate:modelValue":Xt[0]||(Xt[0]=Hn=>Ro.value=Hn),class:"editor",init:Kt.value},null,8,["modelValue","init"])):(jW(),$W(ij(mj),{key:1,modelValue:Ro.value,"onUpdate:modelValue":Xt[1]||(Xt[1]=Hn=>Ro.value=Hn),class:"editor",init:Kt.value},null,8,["modelValue","init"])),lj(is,Nj({style:{display:"none"}},sn.uploadProps,{onSuccess:to}),{"upload-button":aj(()=>[lj($n,{ref_key:"myUpload",ref:Po},null,512)]),_:1},16)]),_:1})}}}),s$=Oj(Yj,[["__scopeId","data-v-8c495aa6"]]);export{s$ as default};
