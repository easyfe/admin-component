import{E as pj,B as fj}from"./index-cb78ba23.fb262486.js";import{w as iL,d as tj,a3 as vj,i as O$,h as j$,f as oj,a5 as nj,aA as bj,a6 as yj,$ as G$,l as C$,o as w$,A as S$,B as K$,b as X$,E as k$,G as q$}from"./framework.f715ecba.js";import{J as xj}from"./index-1aa7bce8.46e16019.js";import{U as Cj}from"./index.bd57f7bb.js";import"./index.9be93ac2.js";import"./render-function.5766d6f8.js";var wj=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Sj=function(Ct){return wj.map(function(Mo){return Mo.toLowerCase()}).indexOf(Ct.toLowerCase())!==-1},kj=function(Ct,Mo,ho){Object.keys(Mo).filter(Sj).forEach(function(jo){var Ro=Mo[jo];typeof Ro=="function"&&(jo==="onInit"?Ro(Ct,ho):ho.on(jo.substring(2),function(Zo){return Ro(Zo,ho)}))})},_j=function(Ct,Mo,ho,jo){var Ro=Ct.modelEvents?Ct.modelEvents:null,Zo=Array.isArray(Ro)?Ro.join(" "):Ro;iL(jo,function(kn,Pt){ho&&typeof kn=="string"&&kn!==Pt&&kn!==ho.getContent({format:Ct.outputFormat})&&ho.setContent(kn)}),ho.on(Zo||"change input undo redo",function(){Mo.emit("update:modelValue",ho.getContent({format:Ct.outputFormat}))})},Ej=function(Ct,Mo,ho,jo,Ro,Zo){jo.setContent(Zo()),ho.attrs["onUpdate:modelValue"]&&_j(Mo,ho,jo,Ro),kj(Ct,ho.attrs,jo)},Y$=0,rj=function(Ct){var Mo=Date.now(),ho=Math.floor(Math.random()*1e9);return Y$++,Ct+"_"+ho+Y$+String(Mo)},Oj=function(Ct){return Ct!==null&&Ct.tagName.toLowerCase()==="textarea"},Q$=function(Ct){return typeof Ct>"u"||Ct===""?[]:Array.isArray(Ct)?Ct:Ct.split(" ")},Tj=function(Ct,Mo){return Q$(Ct).concat(Q$(Mo))},Dj=function(Ct){return Ct==null},J$=function(){return{listeners:[],scriptId:rj("tiny-script"),scriptLoaded:!1}},Mj=function(){var Ct=J$(),Mo=function(Ro,Zo,kn,Pt){var Jt=Zo.createElement("script");Jt.referrerPolicy="origin",Jt.type="application/javascript",Jt.id=Ro,Jt.src=kn;var na=function(){Jt.removeEventListener("load",na),Pt()};Jt.addEventListener("load",na),Zo.head&&Zo.head.appendChild(Jt)},ho=function(Ro,Zo,kn){Ct.scriptLoaded?kn():(Ct.listeners.push(kn),Ro.getElementById(Ct.scriptId)||Mo(Ct.scriptId,Ro,Zo,function(){Ct.listeners.forEach(function(Pt){return Pt()}),Ct.scriptLoaded=!0}))},jo=function(){Ct=J$()};return{load:ho,reinitialize:jo}},Aj=Mj(),Rj=function(){return typeof window<"u"?window:global},Nx=function(){var Ct=Rj();return Ct&&Ct.tinymce?Ct.tinymce:null},Bj={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(Ct){return Ct==="html"||Ct==="text"}}},Vp=globalThis&&globalThis.__assign||function(){return Vp=Object.assign||function(Ct){for(var Mo,ho=1,jo=arguments.length;ho<jo;ho++){Mo=arguments[ho];for(var Ro in Mo)Object.prototype.hasOwnProperty.call(Mo,Ro)&&(Ct[Ro]=Mo[Ro])}return Ct},Vp.apply(this,arguments)},Nj=function(Ct,Mo,ho,jo){return Ct(jo||"div",{id:Mo,ref:ho})},Lj=function(Ct,Mo,ho){return Ct("textarea",{id:Mo,visibility:"hidden",ref:ho})},_$={selector:void 0,target:void 0},ej=tj({props:Bj,setup:function(Ct,Mo){var ho=Ct.init?Vp(Vp({},Ct.init),_$):Vp({},_$),jo=vj(Ct),Ro=jo.disabled,Zo=jo.modelValue,kn=jo.tagName,Pt=O$(null),Jt=null,na=Ct.id||rj("tiny-vue"),Ut=Ct.init&&Ct.init.inline||Ct.inline,Ao=!!Mo.attrs["onUpdate:modelValue"],gr=!0,Mn=Ct.initialValue?Ct.initialValue:"",An="",bn=function(_n){return Ao?function(){return Zo!=null&&Zo.value?Zo.value:""}:function(){return _n?Mn:An}},ft=function(){var _n=bn(gr),J=Vp(Vp({},ho),{readonly:Ct.disabled,target:Pt.value,plugins:Tj(ho.plugins,Ct.plugins),toolbar:Ct.toolbar||ho.toolbar,inline:Ut,setup:function(qe){Jt=qe,qe.on("init",function(ul){return Ej(ul,Ct,Mo,qe,Zo,_n)}),typeof ho.setup=="function"&&ho.setup(qe)}});Oj(Pt.value)&&(Pt.value.style.visibility=""),Nx().init(J),gr=!1};iL(Ro,function(_n){var J;Jt!==null&&(typeof((J=Jt.mode)===null||J===void 0?void 0:J.set)=="function"?Jt.mode.set(_n?"readonly":"design"):Jt.setMode(_n?"readonly":"design"))}),iL(kn,function(_n){var J;Ao||(An=Jt.getContent()),(J=Nx())===null||J===void 0||J.remove(Jt),j$(function(){return ft()})}),oj(function(){if(Nx()!==null)ft();else if(Pt.value&&Pt.value.ownerDocument){var _n=Ct.cloudChannel?Ct.cloudChannel:"6",J=Ct.apiKey?Ct.apiKey:"no-api-key",qe=Dj(Ct.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(J,"/tinymce/").concat(_n,"/tinymce.min.js"):Ct.tinymceScriptSrc;Aj.load(Pt.value.ownerDocument,qe,ft)}}),nj(function(){Nx()!==null&&Nx().remove(Jt)}),Ut||(bj(function(){gr||ft()}),yj(function(){var _n;Ao||(An=Jt.getContent()),(_n=Nx())===null||_n===void 0||_n.remove(Jt)}));var Os=function(_n){var J;An=Jt.getContent(),(J=Nx())===null||J===void 0||J.remove(Jt),ho=Vp(Vp(Vp({},ho),_n),_$),j$(function(){return ft()})};return Mo.expose({rerender:Os,getEditor:function(){return Jt}}),function(){return Ut?Nj(G$,na,Pt,Ct.tagName):Lj(G$,na,Pt)}}});function Hj(Ct){return Ct&&Ct.__esModule&&Object.prototype.hasOwnProperty.call(Ct,"default")?Ct.default:Ct}var sj={exports:{}};(function(Ct){(function(){var Mo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var o=typeof e;return o==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":o==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":o},ho=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},jo=function(e,o){var n=Array.prototype.slice.call(e);return n.sort(o)},Ro=function(e,o){return Zo(function(n,s){return e.eq(o(n),o(s))})},Zo=function(e){return{eq:e}},kn=Zo(function(e,o){return e===o}),Pt=kn,Jt=function(e){return Zo(function(o,n){if(o.length!==n.length)return!1;for(var s=o.length,i=0;i<s;i++)if(!e.eq(o[i],n[i]))return!1;return!0})},na=function(e,o){return Ro(Jt(e),function(n){return jo(n,o)})},Ut=function(e){return Zo(function(o,n){var s=Object.keys(o),i=Object.keys(n);if(!na(Pt).eq(s,i))return!1;for(var d=s.length,g=0;g<d;g++){var f=s[g];if(!e.eq(o[f],n[f]))return!1}return!0})},Ao=Zo(function(e,o){if(e===o)return!0;var n=Mo(e),s=Mo(o);return n!==s?!1:ho(n)?e===o:n==="array"?Jt(Ao).eq(e,o):n==="object"?Ut(Ao).eq(e,o):!1});const gr=Object.getPrototypeOf,Mn=(e,o,n)=>{var s;return n(e,o.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===o.name},An=e=>{const o=typeof e;return e===null?"null":o==="object"&&Array.isArray(e)?"array":o==="object"&&Mn(e,String,(n,s)=>s.isPrototypeOf(n))?"string":o},bn=e=>o=>An(o)===e,ft=e=>o=>typeof o===e,Os=e=>o=>e===o,_n=(e,o)=>qe(e)&&Mn(e,o,(n,s)=>gr(n)===s),J=bn("string"),qe=bn("object"),ul=e=>_n(e,Object),Oo=bn("array"),se=Os(null),so=ft("boolean"),Rn=Os(void 0),io=e=>e==null,Oe=e=>!io(e),te=ft("function"),nr=ft("number"),Ge=(e,o)=>{if(Oo(e)){for(let n=0,s=e.length;n<s;++n)if(!o(e[n]))return!1;return!0}return!1},Be=()=>{},E=(e,o)=>(...n)=>e(o.apply(null,n)),ro=(e,o)=>n=>e(o(n)),Pe=e=>()=>e,fo=e=>e,Ot=(e,o)=>e===o;function Le(e,...o){return(...n)=>{const s=o.concat(n);return e.apply(null,s)}}const zo=e=>o=>!e(o),xr=e=>()=>{throw new Error(e)},Xo=e=>e(),lr=e=>{e()},Ie=Pe(!1),at=Pe(!0);class I{constructor(o,n){this.tag=o,this.value=n}static some(o){return new I(!0,o)}static none(){return I.singletonNone}fold(o,n){return this.tag?n(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?I.some(o(this.value)):I.none()}bind(o){return this.tag?o(this.value):I.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:I.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return Oe(o)?I.some(o):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const hs=Array.prototype.slice,qo=Array.prototype.indexOf,Bn=Array.prototype.push,on=(e,o)=>qo.call(e,o),Zp=(e,o)=>{const n=on(e,o);return n===-1?I.none():I.some(n)},It=(e,o)=>on(e,o)>-1,nn=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];if(o(i,n))return!0}return!1},Bt=(e,o)=>{const n=e.length,s=new Array(n);for(let i=0;i<n;i++){const d=e[i];s[i]=o(d,i)}return s},me=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];o(i,n)}},ei=(e,o)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];o(s,n)}},cr=(e,o)=>{const n=[],s=[];for(let i=0,d=e.length;i<d;i++){const g=e[i];(o(g,i)?n:s).push(g)}return{pass:n,fail:s}},Et=(e,o)=>{const n=[];for(let s=0,i=e.length;s<i;s++){const d=e[s];o(d,s)&&n.push(d)}return n},ml=(e,o,n)=>(ei(e,(s,i)=>{n=o(n,s,i)}),n),En=(e,o,n)=>(me(e,(s,i)=>{n=o(n,s,i)}),n),xu=(e,o,n)=>{for(let s=0,i=e.length;s<i;s++){const d=e[s];if(o(d,s))return I.some(d);if(n(d,s))break}return I.none()},On=(e,o)=>xu(e,o,Ie),Ts=(e,o)=>{for(let n=0,s=e.length;n<s;n++){const i=e[n];if(o(i,n))return I.some(n)}return I.none()},jl=e=>{const o=[];for(let n=0,s=e.length;n<s;++n){if(!Oo(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Bn.apply(o,e[n])}return o},Ds=(e,o)=>jl(Bt(e,o)),hr=(e,o)=>{for(let n=0,s=e.length;n<s;++n){const i=e[n];if(o(i,n)!==!0)return!1}return!0},yn=e=>{const o=hs.call(e,0);return o.reverse(),o},ti=(e,o)=>Et(e,n=>!It(o,n)),Xn=(e,o)=>{const n={};for(let s=0,i=e.length;s<i;s++){const d=e[s];n[String(d)]=o(d,s)}return n},Yo=(e,o)=>{const n=hs.call(e,0);return n.sort(o),n},Nc=(e,o)=>o>=0&&o<e.length?I.some(e[o]):I.none(),xn=e=>Nc(e,0),Ia=e=>Nc(e,e.length-1),ps=te(Array.from)?Array.from:e=>hs.call(e),gl=(e,o)=>{for(let n=0;n<e.length;n++){const s=o(e[n],n);if(s.isSome())return s}return I.none()},Si=(e,o)=>{const n=[],s=te(o)?i=>nn(n,d=>o(d,i)):i=>It(n,i);for(let i=0,d=e.length;i<d;i++){const g=e[i];s(g)||n.push(g)}return n},Cr=Object.keys,hl=Object.hasOwnProperty,ot=(e,o)=>{const n=Cr(e);for(let s=0,i=n.length;s<i;s++){const d=n[s],g=e[d];o(g,d)}},bo=(e,o)=>ra(e,(n,s)=>({k:s,v:o(n,s)})),ra=(e,o)=>{const n={};return ot(e,(s,i)=>{const d=o(s,i);n[d.k]=d.v}),n},Ms=e=>(o,n)=>{e[n]=o},ki=(e,o,n,s)=>{ot(e,(i,d)=>{(o(i,d)?n:s)(i,d)})},_i=(e,o)=>{const n={},s={};return ki(e,o,Ms(n),Ms(s)),{t:n,f:s}},Uo=(e,o)=>{const n={};return ki(e,o,Ms(n),Be),n},Pa=(e,o)=>{const n=[];return ot(e,(s,i)=>{n.push(o(s,i))}),n},Gl=e=>Pa(e,fo),Go=(e,o)=>At(e,o)?I.from(e[o]):I.none(),At=(e,o)=>hl.call(e,o),Jr=(e,o)=>At(e,o)&&e[o]!==void 0&&e[o]!==null,pl=(e,o,n=Ao)=>Ut(n).eq(e,o),Lc=e=>{const o={};return me(e,n=>{o[n]={}}),Cr(o)},Ed=e=>e.length!==void 0,es=Array.isArray,Pr=e=>{if(es(e))return e;{const o=[];for(let n=0,s=e.length;n<s;n++)o[n]=e[n];return o}},qn=(e,o,n)=>{if(!e)return!1;if(n=n||e,Ed(e)){for(let s=0,i=e.length;s<i;s++)if(o.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(At(e,s)&&o.call(n,e[s],s,e)===!1)return!1;return!0},wa=(e,o)=>{const n=[];return qn(e,(s,i)=>{n.push(o(s,i,e))}),n},ts=(e,o)=>{const n=[];return qn(e,(s,i)=>{(!o||o(s,i,e))&&n.push(s)}),n},za=(e,o)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===o)return n}return-1},sa=(e,o,n,s)=>{let i=Rn(n)?e[0]:n;for(let d=0;d<e.length;d++)i=o.call(s,i,e[d],d);return i},Ko=(e,o,n)=>{for(let s=0,i=e.length;s<i;s++)if(o.call(n,e[s],s,e))return s;return-1},Ei=e=>e[e.length-1],os=e=>{let o=!1,n;return(...s)=>(o||(o=!0,n=e.apply(null,s)),n)},Cu=(e,o,n,s)=>{const i=e.isiOS()&&/ipad/i.test(n)===!0,d=e.isiOS()&&!i,g=e.isiOS()||e.isAndroid(),f=g||s("(pointer:coarse)"),y=i||!d&&g&&s("(min-device-width:768px)"),k=d||g&&!y,D=o.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,L=!k&&!y&&!D;return{isiPad:Pe(i),isiPhone:Pe(d),isTablet:Pe(y),isPhone:Pe(k),isTouch:Pe(f),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Pe(D),isDesktop:Pe(L)}},Oi=(e,o)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(o))return s}},Ke=(e,o)=>{const n=Oi(e,o);if(!n)return{major:0,minor:0};const s=i=>Number(o.replace(n,"$"+i));return Hc(s(1),s(2))},Qe=(e,o)=>{const n=String(o).toLowerCase();return e.length===0?As():Ke(e,n)},As=()=>Hc(0,0),Hc=(e,o)=>({major:e,minor:o}),fl={nu:Hc,detect:Qe,unknown:As},Sm=(e,o)=>gl(o.brands,n=>{const s=n.brand.toLowerCase();return On(e,i=>{var d;return s===((d=i.brand)===null||d===void 0?void 0:d.toLowerCase())}).map(i=>({current:i.name,version:fl.nu(parseInt(n.version,10),0)}))}),Qo=(e,o)=>{const n=String(o).toLowerCase();return On(e,s=>s.search(n))},Kl=(e,o)=>Qo(e,o).map(n=>{const s=fl.detect(n.versionRegexes,o);return{current:n.name,version:s}}),Up=(e,o)=>Qo(e,o).map(n=>{const s=fl.detect(n.versionRegexes,o);return{current:n.name,version:s}}),Ic=(e,o)=>e.substring(o),Xl=(e,o,n)=>o===""||e.length>=o.length&&e.substr(n,n+o.length)===o,wu=(e,o)=>Bo(e,o)?Ic(e,o.length):e,Yn=(e,o,n=0,s)=>{const i=e.indexOf(o,n);return i!==-1?Rn(s)?!0:i+o.length<=s:!1},Bo=(e,o)=>Xl(e,o,0),Su=(e,o)=>Xl(e,o,e.length-o.length),ql=e=>o=>o.replace(e,""),Ti=ql(/^\s+|\s+$/g),zn=ql(/^\s+/g),rr=ql(/\s+$/g),sr=e=>e.length>0,Yl=e=>!sr(e),oi=(e,o)=>o<=0?"":new Array(o+1).join(e),wr=(e,o=10)=>{const n=parseInt(e,o);return isNaN(n)?I.none():I.some(n)},ni=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,uo=e=>o=>Yn(o,e),Gg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Yn(e,"edge/")&&Yn(e,"chrome")&&Yn(e,"safari")&&Yn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ni],search:e=>Yn(e,"chrome")&&!Yn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Yn(e,"msie")||Yn(e,"trident")},{name:"Opera",versionRegexes:[ni,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:uo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:uo("firefox")},{name:"Safari",versionRegexes:[ni,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Yn(e,"safari")||Yn(e,"mobile/"))&&Yn(e,"applewebkit")}],Vo=[{name:"Windows",search:uo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Yn(e,"iphone")||Yn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:uo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:uo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:uo("linux"),versionRegexes:[]},{name:"Solaris",search:uo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:uo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:uo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Di={browsers:Pe(Gg),oses:Pe(Vo)},pr="Edge",Ql="Chromium",Fn="IE",Pc="Opera",ns="Firefox",Od="Safari",Fs=()=>km({current:void 0,version:fl.unknown()}),km=e=>{const o=e.current,n=e.version,s=i=>()=>o===i;return{current:o,version:n,isEdge:s(pr),isChromium:s(Ql),isIE:s(Fn),isOpera:s(Pc),isFirefox:s(ns),isSafari:s(Od)}},Mi={unknown:Fs,nu:km,edge:Pe(pr),chromium:Pe(Ql),ie:Pe(Fn),opera:Pe(Pc),firefox:Pe(ns),safari:Pe(Od)},_m="Windows",aa="iOS",vl="Android",ku="Linux",Em="macOS",_u="Solaris",Td="FreeBSD",ri="ChromeOS",Om=()=>zr({current:void 0,version:fl.unknown()}),zr=e=>{const o=e.current,n=e.version,s=i=>()=>o===i;return{current:o,version:n,isWindows:s(_m),isiOS:s(aa),isAndroid:s(vl),isMacOS:s(Em),isLinux:s(ku),isSolaris:s(_u),isFreeBSD:s(Td),isChromeOS:s(ri)}},Vn={unknown:Om,nu:zr,windows:Pe(_m),ios:Pe(aa),android:Pe(vl),linux:Pe(ku),macos:Pe(Em),solaris:Pe(_u),freebsd:Pe(Td),chromeos:Pe(ri)},Jl={detect:(e,o,n)=>{const s=Di.browsers(),i=Di.oses(),d=o.bind(y=>Sm(s,y)).orThunk(()=>Kl(s,e)).fold(Mi.unknown,Mi.nu),g=Up(i,e).fold(Vn.unknown,Vn.nu),f=Cu(g,d,e,n);return{browser:d,os:g,deviceType:f}}},Tm=e=>window.matchMedia(e).matches;let Dm=os(()=>Jl.detect(navigator.userAgent,I.from(navigator.userAgentData),Tm));const Fa=()=>Dm(),Dd=navigator.userAgent,fs=Fa(),fr=fs.browser,N=fs.os,V=fs.deviceType,W=Dd.indexOf("Windows Phone")!==-1,ae={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:fr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!fr.isIE(),windowsPhone:W,browser:{current:fr.current,version:fr.version,isChromium:fr.isChromium,isEdge:fr.isEdge,isFirefox:fr.isFirefox,isIE:fr.isIE,isOpera:fr.isOpera,isSafari:fr.isSafari},os:{current:N.current,version:N.version,isAndroid:N.isAndroid,isChromeOS:N.isChromeOS,isFreeBSD:N.isFreeBSD,isiOS:N.isiOS,isLinux:N.isLinux,isMacOS:N.isMacOS,isSolaris:N.isSolaris,isWindows:N.isWindows},deviceType:{isDesktop:V.isDesktop,isiPad:V.isiPad,isiPhone:V.isiPhone,isPhone:V.isPhone,isTablet:V.isTablet,isTouch:V.isTouch,isWebView:V.isWebView}},ut=/^\s*|\s*$/g,Tt=e=>io(e)?"":(""+e).replace(ut,""),Zn=(e,o)=>o?o==="array"&&es(e)?!0:typeof e===o:e!==void 0,vo=(e,o,n={})=>{const s=J(e)?e.split(o||","):e||[];let i=s.length;for(;i--;)n[s[i]]={};return n},zc=At,ia=(e,...o)=>{for(let n=0;n<o.length;n++){const s=o[n];for(const i in s)if(At(s,i)){const d=s[i];d!==void 0&&(e[i]=d)}}return e},Vs=function(e,o,n,s){s=s||this,e&&(n&&(e=e[n]),qn(e,(i,d)=>o.call(s,i,d,n)===!1?!1:(Vs(i,o,n,s),!0)))},ve={trim:Tt,isArray:es,is:Zn,toArray:Pr,makeMap:vo,each:qn,map:wa,grep:ts,inArray:za,hasOwn:zc,extend:ia,walk:Vs,resolve:(e,o=window)=>{const n=e.split(".");for(let s=0,i=n.length;s<i&&(o=o[n[s]],!!o);s++);return o},explode:(e,o)=>Oo(e)?e:e===""?[]:wa(e.split(o||","),Tt),_addCacheSuffix:e=>{const o=ae.cacheSuffix;return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e}},Rs=(e,o,n=Ot)=>e.exists(s=>n(s,o)),Zs=(e,o,n=Ot)=>Qn(e,o,n).getOr(e.isNone()&&o.isNone()),Sr=e=>{const o=[],n=s=>{o.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return o},Qn=(e,o,n)=>e.isSome()&&o.isSome()?I.some(n(e.getOrDie(),o.getOrDie())):I.none(),Wo=(e,o,n,s)=>e.isSome()&&o.isSome()&&n.isSome()?I.some(s(e.getOrDie(),o.getOrDie(),n.getOrDie())):I.none(),bl=(e,o)=>e?I.some(o):I.none(),Mm=typeof window<"u"?window:Function("return this;")(),xo=(e,o)=>{let n=o??Mm;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Va=(e,o)=>{const n=e.split(".");return xo(n,o)},Md=(e,o)=>Va(e,o),vr=(e,o)=>{const n=Md(e,o);if(n==null)throw new Error(e+" not available on this browser");return n},Cn=Object.getPrototypeOf,ec=e=>vr("HTMLElement",e),jv=e=>{const o=Va("ownerDocument.defaultView",e);return qe(e)&&(ec(o).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Cn(e).constructor.name))},Am=8,gn=9,la=11,tc=1,Fr=3,po=e=>e.dom.nodeName.toLowerCase(),Eu=e=>e.dom.nodeType,Kg=e=>o=>Eu(o)===e,Un=e=>Eu(e)===Am||po(e)==="#comment",si=e=>Sa(e)&&jv(e.dom),Sa=Kg(tc),No=Kg(Fr),Rm=Kg(gn),Ad=Kg(la),Bm=e=>o=>Sa(o)&&po(o)===e,Nm=(e,o,n)=>{if(J(n)||so(n)||nr(n))e.setAttribute(o,n+"");else throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Dn=(e,o,n)=>{Nm(e.dom,o,n)},Ai=(e,o)=>{const n=e.dom;ot(o,(s,i)=>{Nm(n,i,s)})},Wn=(e,o)=>{const n=e.dom.getAttribute(o);return n===null?void 0:n},Ri=(e,o)=>I.from(Wn(e,o)),Fc=(e,o)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(o):!1},kr=(e,o)=>{e.dom.removeAttribute(o)},Xg=e=>{const o=e.dom.attributes;return o==null||o.length===0},Vc=e=>En(e.dom.attributes,(o,n)=>(o[n.name]=n.value,o),{}),ka=(e,o)=>{const n=Wn(e,o);return n===void 0||n===""?[]:n.split(" ")},qg=(e,o,n)=>{const s=ka(e,o).concat([n]);return Dn(e,o,s.join(" ")),!0},Wp=(e,o,n)=>{const s=Et(ka(e,o),i=>i!==n);return s.length>0?Dn(e,o,s.join(" ")):kr(e,o),!1},Ou=e=>e.dom.classList!==void 0,Yg=e=>ka(e,"class"),Zc=(e,o)=>qg(e,"class",o),Lm=(e,o)=>Wp(e,"class",o),Us=(e,o)=>It(Yg(e),o)?Lm(e,o):Zc(e,o),Uc=(e,o)=>{Ou(e)?e.dom.classList.add(o):Zc(e,o)},Hm=e=>{(Ou(e)?e.dom.classList:Yg(e)).length===0&&kr(e,"class")},Tu=(e,o)=>{Ou(e)?e.dom.classList.remove(o):Lm(e,o),Hm(e)},Im=(e,o)=>{const n=Ou(e)?e.dom.classList.toggle(o):Us(e,o);return Hm(e),n},Pm=(e,o)=>Ou(e)&&e.dom.classList.contains(o),P1=(e,o)=>{const n=(o||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return Mu(n.childNodes[0])},Du=(e,o)=>{const n=(o||document).createElement(e);return Mu(n)},z1=(e,o)=>{const n=(o||document).createTextNode(e);return Mu(n)},Mu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},X={fromHtml:P1,fromTag:Du,fromText:z1,fromDom:Mu,fromPoint:(e,o,n)=>I.from(e.dom.elementFromPoint(o,n)).map(Mu)},$p=(e,o)=>{const n=[],s=d=>(n.push(d),o(d));let i=o(e);do i=i.bind(s);while(i.isSome());return n},Za=(e,o)=>{const n=e.dom;if(n.nodeType!==tc)return!1;{const s=n;if(s.matches!==void 0)return s.matches(o);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(o);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(o);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},Rd=e=>e.nodeType!==tc&&e.nodeType!==gn&&e.nodeType!==la||e.childElementCount===0,Au=(e,o)=>{const n=o===void 0?document:o.dom;return Rd(n)?[]:Bt(n.querySelectorAll(e),X.fromDom)},Qg=(e,o)=>{const n=o===void 0?document:o.dom;return Rd(n)?I.none():I.from(n.querySelector(e)).map(X.fromDom)},yo=(e,o)=>e.dom===o.dom,oc=(e,o)=>{const n=e.dom,s=o.dom;return n===s?!1:n.contains(s)},Jg=e=>X.fromDom(e.dom.ownerDocument),Bi=e=>Rm(e)?e:Jg(e),Bs=e=>X.fromDom(Bi(e).dom.documentElement),zm=e=>X.fromDom(Bi(e).dom.defaultView),vs=e=>I.from(e.dom.parentNode).map(X.fromDom),yl=e=>I.from(e.dom.parentElement).map(X.fromDom),nc=(e,o)=>{const n=te(o)?o:Ie;let s=e.dom;const i=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const d=s.parentNode,g=X.fromDom(d);if(i.push(g),n(g)===!0)break;s=d}return i},Bd=e=>{const o=n=>Et(n,s=>!yo(e,s));return vs(e).map(Vr).map(o).getOr([])},Wc=e=>I.from(e.dom.previousSibling).map(X.fromDom),Nd=e=>I.from(e.dom.nextSibling).map(X.fromDom),Ld=e=>yn($p(e,Wc)),$c=e=>$p(e,Nd),Vr=e=>Bt(e.dom.childNodes,X.fromDom),_r=(e,o)=>{const n=e.dom.childNodes;return I.from(n[o]).map(X.fromDom)},Ru=e=>_r(e,0),Fm=e=>_r(e,e.dom.childNodes.length-1),Bu=e=>e.dom.childNodes.length,xl=e=>e.dom.hasChildNodes(),ca=e=>{const o=e.dom.head;if(o==null)throw new Error("Head is not available yet");return X.fromDom(o)},Vm=e=>Ad(e)&&Oe(e.dom.host),jp=te(Element.prototype.attachShadow)&&te(Node.prototype.getRootNode),Gp=Pe(jp),Ni=jp?e=>X.fromDom(e.dom.getRootNode()):Bi,Hd=e=>Vm(e)?e:ca(Bi(e)),Kp=e=>Vm(e)?e:X.fromDom(Bi(e).dom.body),F1=e=>{const o=Ni(e);return Vm(o)?I.some(o):I.none()},Gv=e=>X.fromDom(e.dom.host),Zm=e=>{if(Gp()&&Oe(e.target)){const o=X.fromDom(e.target);if(Sa(o)&&Kv(o)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return xn(n)}}return I.from(e.target)},Kv=e=>Oe(e.dom.shadowRoot),rc=e=>{const o=No(e)?e.dom.parentNode:e.dom;if(o==null||o.ownerDocument===null)return!1;const n=o.ownerDocument;return F1(X.fromDom(o)).fold(()=>n.body.contains(o),ro(rc,Gv))};var Jn=(e,o,n,s,i)=>e(n,s)?I.some(n):te(i)&&i(n)?I.none():o(n,s,i);const Nn=(e,o,n)=>{let s=e.dom;const i=te(n)?n:Ie;for(;s.parentNode;){s=s.parentNode;const d=X.fromDom(s);if(o(d))return I.some(d);if(i(d))break}return I.none()},rs=(e,o,n)=>Jn((s,i)=>i(s),Nn,e,o,n),eh=(e,o)=>{const n=e.dom;return n.parentNode?V1(X.fromDom(n.parentNode),s=>!yo(e,s)&&o(s)):I.none()},V1=(e,o)=>{const n=s=>o(X.fromDom(s));return On(e.dom.childNodes,n).map(X.fromDom)},bs=(e,o)=>{const n=s=>{for(let i=0;i<s.childNodes.length;i++){const d=X.fromDom(s.childNodes[i]);if(o(d))return I.some(d);const g=n(s.childNodes[i]);if(g.isSome())return g}return I.none()};return n(e.dom)},Um=(e,o,n)=>Nn(e,s=>Za(s,o),n),Id=(e,o)=>Qg(o,e),Li=(e,o,n)=>Jn((s,i)=>Za(s,i),Um,e,o,n),Wt=e=>Li(e,"[contenteditable]"),Er=(e,o=!1)=>rc(e)?e.dom.isContentEditable:Wt(e).fold(Pe(o),n=>Wm(n)==="true"),Wm=e=>e.dom.contentEditable,$m=e=>e.style!==void 0&&te(e.style.getPropertyValue),th=(e,o,n)=>{if(!J(n))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);$m(e)&&e.style.setProperty(o,n)},Z1=(e,o)=>{$m(e)&&e.style.removeProperty(o)},Nu=(e,o,n)=>{const s=e.dom;th(s,o,n)},Lu=(e,o)=>{const n=e.dom;ot(o,(s,i)=>{th(n,i,s)})},Hi=(e,o)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(o);return s===""&&!rc(e)?Ws(n,o):s},Ws=(e,o)=>$m(e)?e.style.getPropertyValue(o):"",To=(e,o)=>{const n=e.dom,s=Ws(n,o);return I.from(s).filter(i=>i.length>0)},da=e=>{const o={},n=e.dom;if($m(n))for(let s=0;s<n.style.length;s++){const i=n.style.item(s);o[i]=n.style[i]}return o},Zr=(e,o)=>{const n=e.dom;Z1(n,o),Rs(Ri(e,"style").map(Ti),"")&&kr(e,"style")},jm=e=>e.dom.offsetWidth,Ur=(e,o)=>{vs(e).each(n=>{n.dom.insertBefore(o.dom,e.dom)})},sc=(e,o)=>{Nd(e).fold(()=>{vs(e).each(n=>{ao(n,o)})},n=>{Ur(n,o)})},Cl=(e,o)=>{Ru(e).fold(()=>{ao(e,o)},n=>{e.dom.insertBefore(o.dom,n.dom)})},ao=(e,o)=>{e.dom.appendChild(o.dom)},Xp=(e,o)=>{Ur(e,o),ao(o,e)},Ii=(e,o)=>{me(o,(n,s)=>{const i=s===0?e:o[s-1];sc(i,n)})},Pi=(e,o)=>{me(o,n=>{ao(e,n)})},ac=e=>{e.dom.textContent="",me(Vr(e),o=>{$o(o)})},$o=e=>{const o=e.dom;o.parentNode!==null&&o.parentNode.removeChild(o)},qt=e=>{const o=Vr(e);o.length>0&&Ii(e,o),$o(e)},qp=(e,o)=>{const n=(o||document).createElement("div");return n.innerHTML=e,Vr(X.fromDom(n))},oh=e=>Bt(e,X.fromDom),Gm=e=>e.dom.innerHTML,Hu=(e,o)=>{const n=Jg(e).dom,s=X.fromDom(n.createDocumentFragment()),i=qp(o,n);Pi(s,i),ac(e),ao(e,s)},nh=e=>{const o=X.fromTag("div"),n=X.fromDom(e.dom.cloneNode(!0));return ao(o,n),Gm(o)},Xv=(e,o,n,s,i,d,g)=>({target:e,x:o,y:n,stop:s,prevent:i,kill:d,raw:g}),Iu=e=>{const o=X.fromDom(Zm(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),i=E(s,n);return Xv(o,e.clientX,e.clientY,n,s,i,e)},Yp=(e,o)=>n=>{e(n)&&o(Iu(n))},Qp=(e,o,n,s,i)=>{const d=Yp(n,s);return e.dom.addEventListener(o,d,i),{unbind:Le(U1,e,o,d,i)}},qv=(e,o,n,s)=>Qp(e,o,n,s,!1),U1=(e,o,n,s)=>{e.dom.removeEventListener(o,n,s)},wl=(e,o)=>({left:e,top:o,translate:(n,s)=>wl(e+n,o+s)}),zi=wl,S=e=>{const o=e.getBoundingClientRect();return zi(o.left,o.top)},T=(e,o)=>e!==void 0?e:o!==void 0?o:0,H=e=>{const o=e.dom.ownerDocument,n=o.body,s=o.defaultView,i=o.documentElement;if(n===e.dom)return zi(n.offsetLeft,n.offsetTop);const d=T(s==null?void 0:s.pageYOffset,i.scrollTop),g=T(s==null?void 0:s.pageXOffset,i.scrollLeft),f=T(i.clientTop,n.clientTop),y=T(i.clientLeft,n.clientLeft);return Y(e).translate(g-y,d-f)},Y=e=>{const o=e.dom,n=o.ownerDocument.body;return n===o?zi(n.offsetLeft,n.offsetTop):rc(e)?S(o):zi(0,0)},ne=e=>{const o=e!==void 0?e.dom:document,n=o.body.scrollLeft||o.documentElement.scrollLeft,s=o.body.scrollTop||o.documentElement.scrollTop;return zi(n,s)},Ze=(e,o,n)=>{const s=(n!==void 0?n.dom:document).defaultView;s&&s.scrollTo(e,o)},kt=(e,o)=>{Fa().browser.isSafari()&&te(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(o)},zt=e=>{const o=e===void 0?window:e;return Fa().browser.isFirefox()?I.none():I.from(o.visualViewport)},jt=(e,o,n,s)=>({x:e,y:o,width:n,height:s,right:e+n,bottom:o+s}),bt=e=>{const o=e===void 0?window:e,n=o.document,s=ne(X.fromDom(n));return zt(o).fold(()=>{const i=o.document.documentElement,d=i.clientWidth,g=i.clientHeight;return jt(s.left,s.top,d,g)},i=>jt(Math.max(i.pageLeft,s.left),Math.max(i.pageTop,s.top),i.width,i.height))},it=(e,o)=>Et(Vr(e),o),$n=(e,o)=>{let n=[];return me(Vr(e),s=>{o(s)&&(n=n.concat([s])),n=n.concat($n(s,o))}),n},rn=(e,o)=>Au(o,e),jc=(e,o,n)=>Um(e,o,n).isSome();class br{constructor(o,n){this.node=o,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,n,s,i){if(o){if(!i&&o[n])return o[n];if(o!==this.rootNode){let d=o[s];if(d)return d;for(let g=o.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(d=g[s],d)return d}}}findPreviousNode(o,n){if(o){const s=o.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let d=s.lastChild;d;d=d.lastChild)if(!d.lastChild)return d}return s}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const ic=e=>o=>!!o&&o.nodeType===e,ua=e=>!!e&&!Object.getPrototypeOf(e),pt=ic(1),Sl=e=>pt(e)&&si(X.fromDom(e)),ss=e=>pt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Pd=e=>{const o=e.toLowerCase();return n=>Oe(n)&&n.nodeName.toLowerCase()===o},ai=e=>{const o=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return It(o,s)}return!1}},Jp=(e,o)=>{const n=o.toLowerCase().split(" ");return s=>{if(pt(s)){const i=s.ownerDocument.defaultView;if(i)for(let d=0;d<n.length;d++){const g=i.getComputedStyle(s,null);if((g?g.getPropertyValue(e):null)===n[d])return!0}}return!1}},Lx=e=>o=>pt(o)&&o.hasAttribute(e),Hx=(e,o)=>n=>pt(n)&&n.getAttribute(e)===o,Fi=e=>pt(e)&&e.hasAttribute("data-mce-bogus"),Ix=e=>pt(e)&&e.getAttribute("data-mce-bogus")==="all",_a=e=>pt(e)&&e.tagName==="TABLE",Yv=e=>o=>!!(Sl(o)&&(o.contentEditable===e||o.getAttribute("data-mce-contenteditable")===e)),Qv=ai(["textarea","input"]),Ae=ic(3),lc=ic(4),Ea=ic(7),ii=ic(8),yr=ic(9),W1=ic(11),Co=Pd("br"),Ns=Pd("img"),Ua=Yv("true"),xe=Yv("false"),$s=ai(["td","th"]),hk=ai(["td","th","caption"]),dn=ai(["video","audio","object","embed"]),zd=Pd("li"),Jv=Pd("details"),kl=Pd("summary"),ef="\uFEFF",jn=" ",$1=e=>e===ef,li=e=>e.replace(/\uFEFF/g,""),_o=((e,o)=>{const n=i=>{if(!e(i))throw new Error("Can only get "+o+" value of a "+o+" node");return s(i).getOr("")},s=i=>e(i)?I.from(i.dom.nodeValue):I.none();return{get:n,getOption:s,set:(i,d)=>{if(!e(i))throw new Error("Can only set raw "+o+" value of a "+o+" node");i.dom.nodeValue=d}}})(No,"text"),Vi=e=>_o.get(e),Pu=e=>_o.getOption(e),ys=(e,o)=>_o.set(e,o),eb=["td","th"],Km=["thead","tbody","tfoot"],Px=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Oa=["li","dd","dt"],zx=["ul","ol","dl"],ge=["pre","script","textarea","style"],js=e=>{let o;return n=>(o=o||Xn(e,at),At(o,po(n)))},rh=e=>po(e)==="table",Ta=e=>Sa(e)&&po(e)==="br",_l=js(Px),Wr=js(zx),ar=js(Oa),sh=js(Km),cc=js(eb),ah=js(ge),Dt=e=>{const o=[];let n=e.dom;for(;n;)o.push(X.fromDom(n)),n=n.lastChild;return o},El=e=>{const o=rn(e,"br"),n=Et(Dt(e).slice(-1),Ta);o.length===n.length&&me(n,$o)},tf=()=>{const e=X.fromTag("br");return Dn(e,"data-mce-bogus","1"),e},zu=e=>{ac(e),ao(e,tf())},pk=(e,o)=>{Fm(e).each(n=>{Wc(n).each(s=>{o.isBlock(po(e))&&Ta(n)&&o.isBlock(po(s))&&$o(n)})})},$r=ef,ih=$1,jr=li,Xm=e=>e.insertContent($r,{preserve_zwsp:!0}),fk=pt,Zi=Ae,lh=e=>(Zi(e)&&(e=e.parentNode),fk(e)&&e.hasAttribute("data-mce-caret")),Fd=e=>Zi(e)&&ih(e.data),ci=e=>lh(e)||Fd(e),ch=e=>e.firstChild!==e.lastChild||!Co(e.firstChild),tb=(e,o)=>{var n;const s=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode($r),i=e.parentNode;if(o){const d=e.previousSibling;if(Zi(d)){if(ci(d))return d;if(uh(d))return d.splitText(d.data.length-1)}i==null||i.insertBefore(s,e)}else{const d=e.nextSibling;if(Zi(d)){if(ci(d))return d;if(dh(d))return d.splitText(1),d}e.nextSibling?i==null||i.insertBefore(s,e.nextSibling):i==null||i.appendChild(s)}return s},j1=e=>{const o=e.container();return Ae(o)?o.data.charAt(e.offset())===$r||e.isAtStart()&&Fd(o.previousSibling):!1},Fu=e=>{const o=e.container();return Ae(o)?o.data.charAt(e.offset()-1)===$r||e.isAtEnd()&&Fd(o.nextSibling):!1},vk=(e,o,n)=>{var s;const i=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(tf().dom);const d=o.parentNode;return n?d==null||d.insertBefore(i,o):o.nextSibling?d==null||d.insertBefore(i,o.nextSibling):d==null||d.appendChild(i),i},dh=e=>Zi(e)&&e.data[0]===$r,uh=e=>Zi(e)&&e.data[e.data.length-1]===$r,Fx=e=>{var o;const n=e.getElementsByTagName("br"),s=n[n.length-1];Fi(s)&&((o=s.parentNode)===null||o===void 0||o.removeChild(s))},Or=e=>e&&e.hasAttribute("data-mce-caret")?(Fx(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Gc=e=>lh(e.startContainer),mh=Ua,qm=xe,Vx=Co,Wa=Ae,of=ai(["script","style","textarea"]),G1=ai(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ob=ai(["table"]),$a=ci,as=e=>$a(e)?!1:Wa(e)?!of(e.parentNode):G1(e)||Vx(e)||ob(e)||Ui(e),nb=e=>pt(e)&&e.getAttribute("unselectable")==="true",Ui=e=>!nb(e)&&qm(e),bk=(e,o)=>{for(let n=e.parentNode;n&&n!==o;n=n.parentNode){if(Ui(n))return!1;if(mh(n))return!0}return!0},Ym=e=>Ui(e)?!En(ps(e.getElementsByTagName("*")),(o,n)=>o||mh(n),!1):!1,Qm=e=>G1(e)||Ym(e),Vu=(e,o)=>as(e)&&bk(e,o),Zx=/^[ \t\r\n]*$/,di=e=>Zx.test(e),Ux=e=>{for(const o of e)if(!$1(o))return!1;return!0},Wx=e=>" \f	\v".indexOf(e)!==-1,Ln=e=>e===`
`||e==="\r",K1=(e,o)=>o<e.length&&o>=0?Ln(e[o]):!1,ui=(e,o=4,n=!0,s=!0)=>{const i=oi(" ",o),d=e.replace(/\t/g,i);return En(d,(g,f)=>Wx(f)||f===jn?g.pcIsSpace||g.str===""&&n||g.str.length===d.length-1&&s||K1(d,g.str.length+1)?{pcIsSpace:!1,str:g.str+jn}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:Ln(f),str:g.str+f},{pcIsSpace:!1,str:""}).str},Jm=(e,o)=>{const n=X.fromDom(o),s=X.fromDom(e);return jc(s,"pre,code",Le(yo,n))},rb=(e,o)=>Ae(e)&&di(e.data)&&!Jm(e,o),Zu=e=>pt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),ma=(e,o)=>as(e)&&!rb(e,o)||Zu(e)||nf(e),nf=Lx("data-mce-bookmark"),rf=Lx("data-mce-bogus"),yk=Hx("data-mce-bogus","all"),sf=e=>yl(X.fromDom(e)).exists(o=>!Er(o)),eg=(e,o)=>{let n=0;if(ma(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const i=new br(s,e);do{if(o){if(yk(s)){s=i.next(!0);continue}if(rf(s)){s=i.next();continue}}if(Ua(s)&&sf(s))return!1;if(Co(s)){n++,s=i.next();continue}if(ma(s,e))return!1;s=i.next()}while(s);return n<=1}},Hn=(e,o=!0)=>eg(e.dom,o),Kc=e=>e.toLowerCase()==="svg",Uu=e=>Kc(e.nodeName),Xc=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",tg=["svg"],dc=()=>{let e=[];const o=()=>e[e.length-1];return{track:n=>{Uu(n)&&e.push(n);let s=o();return s&&!s.contains(n)&&(e.pop(),s=o()),Xc(s)},current:()=>Xc(o()),reset:()=>{e=[]}}},qc="data-mce-block",og=e=>Et(Cr(e),o=>!/[A-Z]/.test(o)),X1=e=>Bt(og(e),o=>`${o}:`+Bt(tg,n=>`not(${n} ${o})`).join(":")).join(","),af=(e,o)=>Oe(o.querySelector(e))?(o.setAttribute(qc,"true"),o.getAttribute("data-mce-selected")==="inline-boundary"&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(qc),!1),gh=(e,o)=>{const n=X1(e.getTransparentElements()),s=X1(e.getBlockElements());return Et(o.querySelectorAll(n),i=>af(s,i))},sb=(e,o)=>{var n;const s=o?"lastChild":"firstChild";for(let i=e[s];i;i=i[s])if(Hn(X.fromDom(i))){(n=i.parentNode)===null||n===void 0||n.removeChild(i);return}},$x=(e,o)=>{const n=document.createRange(),s=e.parentNode;if(s){n.setStartBefore(e),n.setEndBefore(o);const i=n.extractContents();sb(i,!0),n.setStartAfter(o),n.setEndAfter(e);const d=n.extractContents();sb(d,!1),Hn(X.fromDom(i))||s.insertBefore(i,e),Hn(X.fromDom(o))||s.insertBefore(o,e),Hn(X.fromDom(d))||s.insertBefore(d,e),s.removeChild(e)}},jx=(e,o,n)=>{const s=e.getBlockElements(),i=X.fromDom(o),d=f=>po(f)in s,g=f=>yo(f,i);me(oh(n),f=>{Nn(f,d,g).each(y=>{const k=it(f,D=>d(D)&&!e.isValidChild(po(y),po(D)));if(k.length>0){const D=yl(y);me(k,L=>{Nn(L,d,g).each(P=>{$x(P.dom,L.dom)})}),D.each(L=>gh(e,L.dom))}})})},ab=(e,o,n)=>{me([...n,...ng(e,o)?[o]:[]],s=>me(rn(X.fromDom(s),s.nodeName.toLowerCase()),i=>{q1(e,i.dom)&&qt(i)}))},hh=(e,o)=>{const n=gh(e,o);jx(e,o,n),ab(e,o,n)},Eo=(e,o)=>{if(lf(e,o)){const n=X1(e.getBlockElements());af(n,o)}},St=(e,o,n)=>{const s=d=>yo(d,X.fromDom(o)),i=nc(X.fromDom(n),s);Nc(i,i.length-2).filter(Sa).fold(()=>hh(e,o),d=>hh(e,d.dom))},Yc=e=>e.hasAttribute(qc),ph=(e,o)=>At(e.getTransparentElements(),o),lf=(e,o)=>pt(o)&&ph(e,o.nodeName),ng=(e,o)=>lf(e,o)&&Yc(o),q1=(e,o)=>lf(e,o)&&!Yc(o),Jo=(e,o)=>o.type===1&&ph(e,o.name)&&J(o.attr(qc)),cf=Fa().browser,Gx=e=>On(e,Sa),df=e=>cf.isFirefox()&&po(e)==="table"?Gx(Vr(e)).filter(o=>po(o)==="caption").bind(o=>Gx($c(o)).map(n=>{const s=n.dom.offsetTop,i=o.dom.offsetTop,d=o.dom.offsetHeight;return s<=i?-d:0})).getOr(0):0,Re=(e,o)=>e.children&&It(e.children,o),ib=(e,o,n)=>{let s=0,i=0;const d=e.ownerDocument;if(n=n||e,o){if(n===e&&o.getBoundingClientRect&&Hi(X.fromDom(e),"position")==="static"){const f=o.getBoundingClientRect();return s=f.left+(d.documentElement.scrollLeft||e.scrollLeft)-d.documentElement.clientLeft,i=f.top+(d.documentElement.scrollTop||e.scrollTop)-d.documentElement.clientTop,{x:s,y:i}}let g=o;for(;g&&g!==n&&g.nodeType&&!Re(g,n);){const f=g;s+=f.offsetLeft||0,i+=f.offsetTop||0,g=f.offsetParent}for(g=o.parentNode;g&&g!==n&&g.nodeType&&!Re(g,n);)s-=g.scrollLeft||0,i-=g.scrollTop||0,g=g.parentNode;i+=df(X.fromDom(o))}return{x:s,y:i}},Kx=(e,o={})=>{let n=0;const s={},i=X.fromDom(e),d=Bi(i),g=Z=>{o.referrerPolicy=Z},f=Z=>{o.contentCssCors=Z},y=Z=>{ao(Hd(i),Z)},k=Z=>{const U=Hd(i);Id(U,"#"+Z).each($o)},D=Z=>Go(s,Z).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),L=Z=>new Promise((U,re)=>{let ie;const pe=ve._addCacheSuffix(Z),Se=D(pe);s[pe]=Se,Se.count++;const je=(we,ze)=>{me(we,lr),Se.status=ze,Se.passed=[],Se.failed=[],ie&&(ie.onload=null,ie.onerror=null,ie=null)},Ye=()=>je(Se.passed,2),Ve=()=>je(Se.failed,3);if(U&&Se.passed.push(U),re&&Se.failed.push(re),Se.status===1)return;if(Se.status===2){Ye();return}if(Se.status===3){Ve();return}Se.status=1;const Me=X.fromTag("link",d.dom);Ai(Me,{rel:"stylesheet",type:"text/css",id:Se.id}),o.contentCssCors&&Dn(Me,"crossOrigin","anonymous"),o.referrerPolicy&&Dn(Me,"referrerpolicy",o.referrerPolicy),ie=Me.dom,ie.onload=Ye,ie.onerror=Ve,y(Me),Dn(Me,"href",pe)}),P=(Z,U)=>{const re=D(Z);s[Z]=re,re.count++;const ie=X.fromTag("style",d.dom);Ai(ie,{rel:"stylesheet",type:"text/css",id:re.id}),ie.dom.innerHTML=U,y(ie)},j=Z=>Promise.allSettled(Bt(Z,U=>L(U).then(Pe(U)))).then(U=>{const re=cr(U,ie=>ie.status==="fulfilled");return re.fail.length>0?Promise.reject(Bt(re.fail,ie=>ie.reason)):Bt(re.pass,ie=>ie.value)}),$=Z=>{const U=ve._addCacheSuffix(Z);Go(s,U).each(re=>{--re.count===0&&(delete s[U],k(re.id))})};return{load:L,loadRawCss:P,loadAll:j,unload:$,unloadRawCss:Z=>{Go(s,Z).each(U=>{--U.count===0&&(delete s[Z],k(U.id))})},unloadAll:Z=>{me(Z,U=>{$(U)})},_setReferrerPolicy:g,_setContentCssCors:f}},uf=(()=>{const e=new WeakMap;return{forElement:(o,n)=>{const s=Ni(o).dom;return I.from(e.get(s)).getOrThunk(()=>{const i=Kx(s,n);return e.set(s,i),i})}}})(),xk=e=>e.nodeName.toLowerCase()==="span",rg=(e,o,n)=>Oe(e)&&(ma(e,o)||n.isInline(e.nodeName.toLowerCase())),lb=(e,o,n)=>{const s=new br(e,o).prev(!1),i=new br(e,o).next(!1),d=Rn(s)||rg(s,o,n),g=Rn(i)||rg(i,o,n);return d&&g},Wu=e=>xk(e)&&e.getAttribute("data-mce-type")==="bookmark",Xx=(e,o,n)=>Ae(e)&&e.data.length>0&&lb(e,o,n),$u=e=>pt(e)?e.childNodes.length>0:!1,wn=e=>W1(e)||yr(e),mi=(e,o,n,s)=>{var i;const d=s||o;if(pt(o)&&Wu(o))return o;const g=o.childNodes;for(let f=g.length-1;f>=0;f--)mi(e,g[f],n,d);if(pt(o)){const f=o.childNodes;f.length===1&&Wu(f[0])&&((i=o.parentNode)===null||i===void 0||i.insertBefore(f[0],o))}return!wn(o)&&!ma(o,d)&&!$u(o)&&!Xx(o,d,n)&&e.remove(o),o},Y1=ve.makeMap,gi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Q1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,J1=/[<>&\"\']/g,fh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ck={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Vd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},qx=e=>{const o=X.fromTag("div").dom;return o.innerHTML=e,o.textContent||o.innerText||e},Yx=(e,o)=>{const n={};if(e){const s=e.split(",");o=o||10;for(let i=0;i<s.length;i+=2){const d=String.fromCharCode(parseInt(s[i],o));if(!Vd[d]){const g="&"+s[i+1]+";";n[d]=g,n[g]=d}}return n}else return},Qc=Yx("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),mf=(e,o)=>e.replace(o?gi:Q1,n=>Vd[n]||n),Sk=e=>(""+e).replace(J1,o=>Vd[o]||o),Qx=(e,o)=>e.replace(o?gi:Q1,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Vd[n]||"&#"+n.charCodeAt(0)+";"),vh=(e,o,n)=>{const s=n||Qc;return e.replace(o?gi:Q1,i=>Vd[i]||s[i]||i)},gt={encodeRaw:mf,encodeAllRaw:Sk,encodeNumeric:Qx,encodeNamed:vh,getEncodeFunc:(e,o)=>{const n=Yx(o)||Qc,s=(g,f)=>g.replace(f?gi:Q1,y=>Vd[y]!==void 0?Vd[y]:n[y]!==void 0?n[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),i=(g,f)=>vh(g,f,n),d=Y1(e.replace(/\+/g,","));return d.named&&d.numeric?s:d.named?o?i:vh:d.numeric?Qx:mf},decode:e=>e.replace(fh,(o,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):Ck[n]||String.fromCharCode(n)):wk[o]||Qc[o]||qx(o))},is=(e,o)=>(e=ve.trim(e),e?e.split(o||" "):[]),Jx=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),kk=e=>{const o=/^(~)?(.+)$/;return Ds(is(e,","),n=>{const s=o.exec(n);if(s){const i=s[1]==="~",d=i?"span":"div",g=s[2];return[{inline:i,cloneName:d,name:g}]}else return[]})},ju=e=>{let o,n,s;if(o="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const d="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav "+d,s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(o+=" xml:lang",s=[s,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const i=[n,s].join(" ");return{globalAttributes:o,blockContent:n,phrasingContent:s,flowContent:i}},e0=e=>{const{globalAttributes:o,phrasingContent:n,flowContent:s}=ju(e),i={},d=(y,k,D)=>{i[y]={attributes:Xn(k,Pe({})),attributesOrder:k,children:Xn(D,Pe({}))}},g=(y,k="",D="")=>{const L=is(D),P=is(y);let j=P.length;const $=is([o,k].join(" "));for(;j--;)d(P[j],$.slice(),L)},f=(y,k)=>{const D=is(y),L=is(k);let P=D.length;for(;P--;){const j=i[D[P]];for(let $=0,Z=L.length;$<Z;$++)j.attributes[L[$]]={},j.attributesOrder.push(L[$])}};return e!=="html5-strict"&&(me(is("acronym applet basefont big font strike tt"),y=>{g(y,"",n)}),me(is("center dir isindex noframes"),y=>{g(y,"",s)})),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),g("dd div","",s),g("address dt caption","",e==="html4"?n:s),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),g("blockquote","cite",s),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",s),g("dl","","dt dd"),g("a","href target rel media hreflang type",e==="html4"?n:s),g("q","cite",n),g("ins del","cite datetime",s),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",s),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),g("param","name value"),g("map","name",[s,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",s),g("th","colspan rowspan headers scope abbr",s),g("form","accept-charset action autocomplete enctype method name novalidate target",s),g("fieldset","disabled form name",[s,"legend"].join(" ")),g("label","form for",n),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[s,"li"].join(" ")),g("noscript","",s),e!=="html4"&&(g("wbr"),g("ruby","",[n,"rt rp"].join(" ")),g("figcaption","",s),g("mark rt rp bdi","",n),g("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),g("canvas","width height",s),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[n,"option"].join(" ")),g("article section nav aside main header footer","",s),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[s,"figcaption"].join(" ")),g("time","datetime",n),g("dialog","open",s),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",n),g("progress","value max",n),g("meter","value min max low high optimum",n),g("details","open",[s,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"),d("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&me([i.video,i.audio],y=>{delete y.children.audio,delete y.children.video}),me(is("a form meter progress dfn"),y=>{i[y]&&delete i[y].children[y]}),delete i.caption.children.table,delete i.script,i},cb=e=>e==="-"?"remove":"add",gf=e=>{const o=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ds(is(e,","),n=>{const s=o.exec(n);if(s){const i=s[1],d=i?cb(i):"replace",g=s[2],f=is(s[3],"|");return[{operation:d,name:g,validChildren:f}]}else return[]})},bh=(e,o)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:i,attributesOrder:d}=o;return me(is(e,"|"),g=>{const f=n.exec(g);if(f){const y={},k=f[1],D=f[2].replace(/[\\:]:/g,":"),L=f[3],P=f[4];if(k==="!"&&(o.attributesRequired=o.attributesRequired||[],o.attributesRequired.push(D),y.required=!0),k==="-"){delete i[D],d.splice(ve.inArray(d,D),1);return}if(L&&(L==="="?(o.attributesDefault=o.attributesDefault||[],o.attributesDefault.push({name:D,value:P}),y.defaultValue=P):L==="~"?(o.attributesForced=o.attributesForced||[],o.attributesForced.push({name:D,value:P}),y.forcedValue=P):L==="<"&&(y.validValues=ve.makeMap(P,"?"))),s.test(D)){const j=y;o.attributePatterns=o.attributePatterns||[],j.pattern=Jx(D),o.attributePatterns.push(j)}else i[D]||d.push(D),i[D]=y}})},eC=(e,o)=>{ot(e.attributes,(n,s)=>{o.attributes[s]=n}),o.attributesOrder.push(...e.attributesOrder)},t0=(e,o)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ds(is(o,","),s=>{const i=n.exec(s);if(i){const d=i[1],g=i[2],f=i[3],y=i[4],k=i[5],D={attributes:{},attributesOrder:[]};if(e.each(L=>eC(L,D)),d==="#"?D.paddEmpty=!0:d==="-"&&(D.removeEmpty=!0),y==="!"&&(D.removeEmptyAttrs=!0),k&&bh(k,D),f&&(D.outputName=g),g==="@")if(e.isNone())e=I.some(D);else return[];return[f?{name:g,element:D,aliasName:f}:{name:g,element:D}]}else return[]})},yh={},hi=ve.makeMap,Wi=ve.each,hf=ve.extend,tC=ve.explode,pf=(e,o={})=>{const n=hi(e," ",hi(e.toUpperCase()," "));return hf(n,o)},db=e=>pf("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),sg=(e,o)=>{if(e){const n={};return J(e)&&(e={"*":e}),Wi(e,(s,i)=>{n[i]=n[i.toUpperCase()]=o==="map"?hi(s,/[, ]/):tC(s,/[, ]/)}),n}else return},Jc=(e={})=>{var o;const n={},s={};let i=[];const d={},g={},f=(r,a,l)=>{const u=e[r];if(u)return hi(u,/[, ]/,hi(u.toUpperCase(),/[, ]/));{let h=yh[r];return h||(h=pf(a,l),yh[r]=h),h}},y=(o=e.schema)!==null&&o!==void 0?o:"html5",k=e0(y);e.verify_html===!1&&(e.valid_elements="*[*]");const D=sg(e.valid_styles),L=sg(e.invalid_styles,"map"),P=sg(e.valid_classes,"map"),j=f("whitespace_elements","pre script noscript style textarea video audio iframe object code"),$=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Z=f("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),U=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),re="td th iframe video audio object script code",ie=f("non_empty_elements",re+" pre svg",Z),pe=f("move_caret_before_on_enter_elements",re+" table",Z),Se="h1 h2 h3 h4 h5 h6",je=f("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ye=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",je),Ve=f("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Me=f("transparent_elements","a ins del canvas map"),we=f("wrap_block_elements","pre "+Se);Wi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),r=>{g[r]=new RegExp("</"+r+"[^>]*>","gi")});const ze=r=>{const a=I.from(n["@"]),l=/[*?+]/;me(t0(a,r??""),({name:u,element:h,aliasName:v})=>{if(v&&(n[v]=h),l.test(u)){const x=h;x.pattern=Jx(u),i.push(x)}else n[u]=h})},lt=r=>{i=[],me(Cr(n),a=>{delete n[a]}),ze(r)},ye=r=>{delete yh.text_block_elements,delete yh.block_elements,me(kk(r??""),({inline:a,name:l,cloneName:u})=>{if(s[l]=s[u],d[l]=u,ie[l.toUpperCase()]={},ie[l]={},a||(Ye[l.toUpperCase()]={},Ye[l]={}),!n[l]){let h=n[u];h=hf({},h),delete h.removeEmptyAttrs,delete h.removeEmpty,n[l]=h}ot(s,(h,v)=>{h[u]&&(s[v]=h=hf({},s[v]),h[l]=h[u])})})},rt=r=>{me(gf(r??""),({operation:a,name:l,validChildren:u})=>{const h=a==="replace"?{"#comment":{}}:s[l];me(u,v=>{a==="remove"?delete h[v]:h[v]={}}),s[l]=h})},vt=r=>{const a=n[r];if(a)return a;let l=i.length;for(;l--;){const u=i[l];if(u.pattern.test(r))return u}};e.valid_elements?(lt(e.valid_elements),Wi(k,(r,a)=>{s[a]=r.children})):(Wi(k,(r,a)=>{n[a]={attributes:r.attributes,attributesOrder:r.attributesOrder},s[a]=r.children}),Wi(is("strong/b em/i"),r=>{const a=is(r,"/");n[a[1]].outputName=a[0]}),Wi(Ve,(r,a)=>{n[a]&&(e.padd_empty_block_inline_children&&(n[a].paddInEmptyBlock=!0),n[a].removeEmpty=!0)}),Wi(is("ol ul blockquote a table tbody"),r=>{n[r]&&(n[r].removeEmpty=!0)}),Wi(is("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),r=>{n[r]&&(n[r].paddEmpty=!0)}),Wi(is("span"),r=>{n[r].removeEmptyAttrs=!0})),delete n.svg,ye(e.custom_elements),rt(e.valid_children),ze(e.extended_valid_elements),rt("+ol[ul|ol],+ul[ul|ol]"),Wi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(r,a)=>{n[a]&&(n[a].parentsRequired=is(r))}),e.invalid_elements&&Wi(tC(e.invalid_elements),r=>{n[r]&&delete n[r]}),vt("span")||ze("span[!data-mce-type|*]");const to=Pe(D),So=Pe(L),zs=Pe(P),Ja=Pe(U),ta=Pe(Ye),xi=Pe(je),Fo=Pe(Ve),Dc=Pe(Object.seal(Z)),Gn=Pe($),Rt=Pe(ie),He=Pe(pe),yt=Pe(j),Vt=Pe(Me),mn=Pe(we),co=Pe(Object.seal(g)),ya=(r,a)=>{const l=s[r.toLowerCase()];return!!(l&&l[a.toLowerCase()])},bu=(r,a)=>{const l=vt(r);if(l)if(a){if(l.attributes[a])return!0;const u=l.attributePatterns;if(u){let h=u.length;for(;h--;)if(u[h].pattern.test(a))return!0}}else return!0;return!1},Mc=r=>At(ta(),r),ll=r=>!Bo(r,"#")&&bu(r)&&!Mc(r),Ci=r=>At(mn(),r)||ll(r),t=Pe(d);return{type:y,children:s,elements:n,getValidStyles:to,getValidClasses:zs,getBlockElements:ta,getInvalidStyles:So,getVoidElements:Dc,getTextBlockElements:xi,getTextInlineElements:Fo,getBoolAttrs:Ja,getElementRule:vt,getSelfClosingElements:Gn,getNonEmptyElements:Rt,getMoveCaretBeforeOnEnterElements:He,getWhitespaceElements:yt,getTransparentElements:Vt,getSpecialElements:co,isValidChild:ya,isValid:bu,isBlock:Mc,isInline:ll,isWrapper:Ci,getCustomElements:t,addValidElements:ze,setValidElements:lt,addCustomElements:ye,addValidChildren:rt}},ff=e=>({value:Ol(e)}),Ol=e=>wu(e,"#").toUpperCase(),Da=e=>{const o=e.toString(16);return(o.length===1?"0"+o:o).toUpperCase()},_k=e=>{const o=Da(e.red)+Da(e.green)+Da(e.blue);return ff(o)},Ek=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Ok=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,xh=(e,o,n,s)=>({red:e,green:o,blue:n,alpha:s}),$i=(e,o,n,s)=>{const i=parseInt(e,10),d=parseInt(o,10),g=parseInt(n,10),f=parseFloat(s);return xh(i,d,g,f)},ub=e=>{if(e==="transparent")return I.some(xh(0,0,0,0));const o=Ek.exec(e);if(o!==null)return I.some($i(o[1],o[2],o[3],"1"));const n=Ok.exec(e);return n!==null?I.some($i(n[1],n[2],n[3],n[4])):I.none()},o0=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,vf=e=>ub(e).map(_k).map(o=>"#"+o.value).getOr(e),n0=(e={},o)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,d={};let g,f;const y=ef;o&&(g=o.getValidStyles(),f=o.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let L=0;L<k.length;L++)d[k[L]]=y+L,d[y+L]=k[L];const D={parse:L=>{const P={};let j=!1;const $=e.url_converter,Z=e.url_converter_scope||D,U=(Me,we,ze)=>{const lt=P[Me+"-top"+we];if(!lt)return;const ye=P[Me+"-right"+we];if(!ye)return;const rt=P[Me+"-bottom"+we];if(!rt)return;const vt=P[Me+"-left"+we];if(!vt)return;const to=[lt,ye,rt,vt];let So=to.length-1;for(;So--&&to[So]===to[So+1];);So>-1&&ze||(P[Me+we]=So===-1?to[0]:to.join(" "),delete P[Me+"-top"+we],delete P[Me+"-right"+we],delete P[Me+"-bottom"+we],delete P[Me+"-left"+we])},re=Me=>{const we=P[Me];if(!we)return;const ze=we.indexOf(",")>-1?[we]:we.split(" ");let lt=ze.length;for(;lt--;)if(ze[lt]!==ze[0])return!1;return P[Me]=ze[0],!0},ie=(Me,we,ze,lt)=>{re(we)&&re(ze)&&re(lt)&&(P[Me]=P[we]+" "+P[ze]+" "+P[lt],delete P[we],delete P[ze],delete P[lt])},pe=Me=>(j=!0,d[Me]),Se=(Me,we)=>(j&&(Me=Me.replace(/\uFEFF[0-9]/g,ze=>d[ze])),we||(Me=Me.replace(/\\([\'\";:])/g,"$1")),Me),je=Me=>String.fromCharCode(parseInt(Me.slice(1),16)),Ye=Me=>Me.replace(/\\[0-9a-f]+/gi,je),Ve=(Me,we,ze,lt,ye,rt)=>{if(ye=ye||rt,ye)return ye=Se(ye),"'"+ye.replace(/\'/g,"\\'")+"'";if(we=Se(we||ze||lt||""),!e.allow_script_urls){const vt=we.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(vt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(vt))return""}return $&&(we=$.call(Z,we,"style")),"url('"+we.replace(/\'/g,"\\'")+"')"};if(L){L=L.replace(/[\u0000-\u001F]/g,""),L=L.replace(/\\[\"\';:\uFEFF]/g,pe).replace(/\"[^\"]+\"|\'[^\']+\'/g,we=>we.replace(/[;:]/g,pe));let Me;for(;Me=s.exec(L);){s.lastIndex=Me.index+Me[0].length;let we=Me[1].replace(i,"").toLowerCase(),ze=Me[2].replace(i,"");if(we&&ze){if(we=Ye(we),ze=Ye(ze),we.indexOf(y)!==-1||we.indexOf('"')!==-1||!e.allow_script_urls&&(we==="behavior"||/expression\s*\(|\/\*|\*\//.test(ze)))continue;we==="font-weight"&&ze==="700"?ze="bold":(we==="color"||we==="background-color")&&(ze=ze.toLowerCase()),J(e.force_hex_color)&&e.force_hex_color!=="off"&&ub(ze).each(lt=>{(e.force_hex_color==="always"||lt.alpha===1)&&(ze=vf(o0(lt)))}),ze=ze.replace(n,Ve),P[we]=j?Se(ze,!0):ze}}U("border","",!0),U("border","-width"),U("border","-color"),U("border","-style"),U("padding",""),U("margin",""),ie("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(L,P)=>{let j="";const $=(U,re)=>{const ie=re[U];if(ie)for(let pe=0,Se=ie.length;pe<Se;pe++){const je=ie[pe],Ye=L[je];Ye&&(j+=(j.length>0?" ":"")+je+": "+Ye+";")}},Z=(U,re)=>{if(!f||!re)return!0;let ie=f["*"];return ie&&ie[U]?!1:(ie=f[re],!(ie&&ie[U]))};return P&&g?($("*",g),$(P,g)):ot(L,(U,re)=>{U&&Z(re,P)&&(j+=(j.length>0?" ":"")+re+": "+U+";")}),j}};return D},mb={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gb=e=>e instanceof Event||te(e.initEvent),Ch=e=>e.isDefaultPrevented===at||e.isDefaultPrevented===Ie,r0=e=>io(e.preventDefault)||gb(e),oC=(e,o)=>{const n=o??{};for(const s in e)At(mb,s)||(n[s]=e[s]);return Oe(e.composedPath)&&(n.composedPath=()=>e.composedPath()),Oe(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),Oe(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},s0=(e,o,n,s)=>{var i;const d=oC(o,s);return d.type=e,io(d.target)&&(d.target=(i=d.srcElement)!==null&&i!==void 0?i:n),r0(o)&&(d.preventDefault=()=>{d.defaultPrevented=!0,d.isDefaultPrevented=at,te(o.preventDefault)&&o.preventDefault()},d.stopPropagation=()=>{d.cancelBubble=!0,d.isPropagationStopped=at,te(o.stopPropagation)&&o.stopPropagation()},d.stopImmediatePropagation=()=>{d.isImmediatePropagationStopped=at,d.stopPropagation()},Ch(d)||(d.isDefaultPrevented=d.defaultPrevented===!0?at:Ie,d.isPropagationStopped=d.cancelBubble===!0?at:Ie,d.isImmediatePropagationStopped=Ie)),d},hb="mce-data-",Tk=/^(?:mouse|contextmenu)|click/,pb=(e,o,n,s)=>{e.addEventListener(o,n,s||!1)},wh=(e,o,n,s)=>{e.removeEventListener(o,n,s||!1)},fb=e=>Oe(e)&&Tk.test(e.type),Tl=(e,o)=>{const n=s0(e.type,e,document,o);if(fb(e)&&Rn(e.pageX)&&!Rn(e.clientX)){const s=n.target.ownerDocument||document,i=s.documentElement,d=s.body,g=n;g.pageX=e.clientX+(i&&i.scrollLeft||d&&d.scrollLeft||0)-(i&&i.clientLeft||d&&d.clientLeft||0),g.pageY=e.clientY+(i&&i.scrollTop||d&&d.scrollTop||0)-(i&&i.clientTop||d&&d.clientTop||0)}return n},nC=(e,o,n)=>{const s=e.document,i={type:"ready"};if(n.domLoaded){o(i);return}const d=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,g=()=>{wh(e,"DOMContentLoaded",g),wh(e,"load",g),n.domLoaded||(n.domLoaded=!0,o(i)),e=null};d()?g():pb(e,"DOMContentLoaded",g),n.domLoaded||pb(e,"load",g)};class Gu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=hb+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,n,s,i){const d=this;let g;const f=window,y=P=>{d.executeHandlers(Tl(P||f.event),k)};if(!o||Ae(o)||ii(o))return s;let k;o[d.expando]?k=o[d.expando]:(k=d.count++,o[d.expando]=k,d.events[k]={}),i=i||o;const D=n.split(" ");let L=D.length;for(;L--;){let P=D[L],j=y,$=!1,Z=!1;if(P==="DOMContentLoaded"&&(P="ready"),d.domLoaded&&P==="ready"&&o.readyState==="complete"){s.call(i,Tl({type:P}));continue}!d.hasFocusIn&&(P==="focusin"||P==="focusout")&&($=!0,Z=P==="focusin"?"focus":"blur",j=U=>{const re=Tl(U||f.event);re.type=re.type==="focus"?"focusin":"focusout",d.executeHandlers(re,k)}),g=d.events[k][P],g?P==="ready"&&d.domLoaded?s(Tl({type:P})):g.push({func:s,scope:i}):(d.events[k][P]=g=[{func:s,scope:i}],g.fakeName=Z,g.capture=$,g.nativeHandler=j,P==="ready"?nC(o,j,d):pb(o,Z||P,j,$))}return o=g=null,s}unbind(o,n,s){if(!o||Ae(o)||ii(o))return this;const i=o[this.expando];if(i){let d=this.events[i];if(n){const g=n.split(" ");let f=g.length;for(;f--;){const y=g[f],k=d[y];if(k){if(s){let D=k.length;for(;D--;)if(k[D].func===s){const L=k.nativeHandler,P=k.fakeName,j=k.capture,$=k.slice(0,D).concat(k.slice(D+1));$.nativeHandler=L,$.fakeName=P,$.capture=j,d[y]=$}}(!s||k.length===0)&&(delete d[y],wh(o,k.fakeName||y,k.nativeHandler,k.capture))}}}else ot(d,(g,f)=>{wh(o,g.fakeName||f,g.nativeHandler,g.capture)}),d={};for(const g in d)if(At(d,g))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,n,s){return this.dispatch(o,n,s)}dispatch(o,n,s){if(!o||Ae(o)||ii(o))return this;const i=Tl({type:n,target:o},s);do{const d=o[this.expando];d&&this.executeHandlers(i,d),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||Ae(o)||ii(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const n=o.getElementsByTagName("*");let s=n.length;for(;s--;)o=n[s],o[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,n){const s=this.events[n],i=s&&s[o.type];if(i)for(let d=0,g=i.length;d<g;d++){const f=i[d];if(f&&f.func.call(f.scope,o)===!1&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}Gu.Event=new Gu;const ag=ve.each,bf=ve.grep,a0="data-mce-style",vb=ve.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),yf=(e,o,n)=>{io(n)||n===""?kr(e,o):Dn(e,o,n)},rC=e=>e.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),uc=(e,o)=>{let n=0;if(e)for(let s=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const d=i.nodeType;o&&Ae(i)&&(d===s||!i.data.length)||(n++,s=d)}return n},i0=(e,o)=>{const n=Wn(o,"style"),s=e.serialize(e.parse(n),po(o));yf(o,a0,s)},bb=(e,o)=>nr(e)?At(vb,o)?e+"":e+"px":e,yb=(e,o,n)=>{const s=rC(o);io(n)||n===""?Zr(e,s):Nu(e,s,bb(n,s))},Dk=(e,o,n)=>{const s=o.keep_values,i={set:(g,f,y)=>{const k=X.fromDom(g);te(o.url_converter)&&Oe(f)&&(f=o.url_converter.call(o.url_converter_scope||n(),String(f),y,g));const D="data-mce-"+y;yf(k,D,f),yf(k,y,f)},get:(g,f)=>{const y=X.fromDom(g);return Wn(y,"data-mce-"+f)||Wn(y,f)}},d={style:{set:(g,f)=>{const y=X.fromDom(g);s&&yf(y,a0,f),kr(y,"style"),J(f)&&Lu(y,e.parse(f))},get:g=>{const f=X.fromDom(g),y=Wn(f,a0)||Wn(f,"style");return e.serialize(e.parse(y),po(f))}}};return s&&(d.href=d.src=i),d},Kt=(e,o={})=>{const n={},s=window,i={};let d=0;const g=!0,f=!0,y=uf.forElement(X.fromDom(e),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),k=[],D=o.schema?o.schema:Jc({}),L=n0({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope,force_hex_color:o.force_hex_color},o.schema),P=o.ownEvents?new Gu:Gu.Event,j=D.getBlockElements(),$=K=>J(K)?At(j,K):pt(K)&&(At(j,K.nodeName)||ng(D,K)),Z=K=>K&&e&&J(K)?e.getElementById(K):K,U=K=>{const G=Z(K);return Oe(G)?X.fromDom(G):null},re=(K,G,he="")=>{let Ee;const dt=U(K);if(Oe(dt)&&Sa(dt)){const _e=eo[G];_e&&_e.get?Ee=_e.get(dt.dom,G):Ee=Wn(dt,G)}return Oe(Ee)?Ee:he},ie=K=>{const G=Z(K);return io(G)?[]:G.attributes},pe=(K,G,he)=>{Fo(K,Ee=>{if(pt(Ee)){const dt=X.fromDom(Ee),_e=he===""?null:he,Ue=Wn(dt,G),Je=eo[G];Je&&Je.set?Je.set(dt.dom,_e,G):yf(dt,G,_e),Ue!==_e&&o.onSetAttrib&&o.onSetAttrib({attrElm:dt.dom,attrName:G,attrValue:_e})}})},Se=(K,G)=>K.cloneNode(G),je=()=>o.root_element||e.body,Ye=K=>{const G=bt(K);return{x:G.x,y:G.y,w:G.width,h:G.height}},Ve=(K,G)=>ib(e.body,Z(K),G),Me=(K,G,he)=>{Fo(K,Ee=>{const dt=X.fromDom(Ee);yb(dt,G,he),o.update_styles&&i0(L,dt)})},we=(K,G)=>{Fo(K,he=>{const Ee=X.fromDom(he);ot(G,(dt,_e)=>{yb(Ee,_e,dt)}),o.update_styles&&i0(L,Ee)})},ze=(K,G,he)=>{const Ee=Z(K);if(!(io(Ee)||!Sl(Ee)&&!ss(Ee)))return he?Hi(X.fromDom(Ee),rC(G)):(G=G.replace(/-(\D)/g,(dt,_e)=>_e.toUpperCase()),G==="float"&&(G="cssFloat"),Ee.style?Ee.style[G]:void 0)},lt=K=>{const G=Z(K);if(!G)return{w:0,h:0};let he=ze(G,"width"),Ee=ze(G,"height");return(!he||he.indexOf("px")===-1)&&(he="0"),(!Ee||Ee.indexOf("px")===-1)&&(Ee="0"),{w:parseInt(he,10)||G.offsetWidth||G.clientWidth,h:parseInt(Ee,10)||G.offsetHeight||G.clientHeight}},ye=K=>{const G=Z(K),he=Ve(G),Ee=lt(G);return{x:he.x,y:he.y,w:Ee.w,h:Ee.h}},rt=(K,G)=>{if(!K)return!1;const he=Oo(K)?K:[K];return nn(he,Ee=>Za(X.fromDom(Ee),G))},vt=(K,G,he,Ee)=>{const dt=[];let _e=Z(K);Ee=Ee===void 0;const Ue=he||(je().nodeName!=="BODY"?je().parentNode:null);if(J(G))if(G==="*")G=pt;else{const Je=G;G=xt=>rt(xt,Je)}for(;_e&&!(_e===Ue||io(_e.nodeType)||yr(_e)||W1(_e));){if(!G||G(_e))if(Ee)dt.push(_e);else return[_e];_e=_e.parentNode}return Ee?dt:null},to=(K,G,he)=>{const Ee=vt(K,G,he,!1);return Ee&&Ee.length>0?Ee[0]:null},So=(K,G,he)=>{let Ee=G;if(K){J(G)&&(Ee=dt=>rt(dt,G));for(let dt=K[he];dt;dt=dt[he])if(te(Ee)&&Ee(dt))return dt}return null},zs=(K,G)=>So(K,G,"nextSibling"),Ja=(K,G)=>So(K,G,"previousSibling"),ta=K=>te(K.querySelectorAll),xi=(K,G)=>{var he,Ee;const dt=(Ee=(he=Z(G))!==null&&he!==void 0?he:o.root_element)!==null&&Ee!==void 0?Ee:e;return ta(dt)?ps(dt.querySelectorAll(K)):[]},Fo=function(K,G,he){const Ee=he??this;if(Oo(K)){const dt=[];return ag(K,(_e,Ue)=>{const Je=Z(_e);Je&&dt.push(G.call(Ee,Je,Ue))}),dt}else{const dt=Z(K);return dt?G.call(Ee,dt):!1}},Dc=(K,G)=>{Fo(K,he=>{ot(G,(Ee,dt)=>{pe(he,dt,Ee)})})},Gn=(K,G)=>{Fo(K,he=>{const Ee=X.fromDom(he);Hu(Ee,G)})},Rt=(K,G,he,Ee,dt)=>Fo(K,_e=>{const Ue=J(G)?e.createElement(G):G;return Oe(he)&&Dc(Ue,he),Ee&&(!J(Ee)&&Ee.nodeType?Ue.appendChild(Ee):J(Ee)&&Gn(Ue,Ee)),dt?Ue:_e.appendChild(Ue)}),He=(K,G,he)=>Rt(e.createElement(K),K,G,he,!0),yt=gt.decode,Vt=gt.encodeAllRaw,mn=(K,G,he="")=>{let Ee="<"+K;for(const dt in G)Jr(G,dt)&&(Ee+=" "+dt+'="'+Vt(G[dt])+'"');return Yl(he)&&At(D.getVoidElements(),K)?Ee+" />":Ee+">"+he+"</"+K+">"},co=K=>{const G=e.createElement("div"),he=e.createDocumentFragment();he.appendChild(G),K&&(G.innerHTML=K);let Ee;for(;Ee=G.firstChild;)he.appendChild(Ee);return he.removeChild(G),he},ya=(K,G)=>Fo(K,he=>{const Ee=X.fromDom(he);return G&&me(Vr(Ee),dt=>{No(dt)&&dt.dom.length===0?$o(dt):Ur(Ee,dt)}),$o(Ee),Ee.dom}),bu=K=>Fo(K,G=>{const he=G.attributes;for(let Ee=he.length-1;Ee>=0;Ee--)G.removeAttributeNode(he.item(Ee))}),Mc=K=>L.parse(K),ll=(K,G)=>L.serialize(K,G),Ci=K=>{if(ct!==Kt.DOM&&e===document){if(n[K])return;n[K]=!0}let G=e.getElementById("mceDefaultStyles");if(!G){G=e.createElement("style"),G.id="mceDefaultStyles",G.type="text/css";const he=e.head;he.firstChild?he.insertBefore(G,he.firstChild):he.appendChild(G)}G.styleSheet?G.styleSheet.cssText+=K:G.appendChild(e.createTextNode(K))},t=K=>{K||(K=""),me(K.split(","),G=>{i[G]=!0,y.load(G).catch(Be)})},r=(K,G,he)=>{Fo(K,Ee=>{if(pt(Ee)){const dt=X.fromDom(Ee),_e=G.split(" ");me(_e,Ue=>{Oe(he)?(he?Uc:Tu)(dt,Ue):Im(dt,Ue)})}})},a=(K,G)=>{r(K,G,!0)},l=(K,G)=>{r(K,G,!1)},u=(K,G)=>{const he=U(K),Ee=G.split(" ");return Oe(he)&&hr(Ee,dt=>Pm(he,dt))},h=K=>{Fo(K,G=>Zr(X.fromDom(G),"display"))},v=K=>{Fo(K,G=>Nu(X.fromDom(G),"display","none"))},x=K=>{const G=U(K);return Oe(G)&&Rs(To(G,"display"),"none")},C=K=>(K||"mce_")+d++,_=K=>{const G=U(K);return Oe(G)?pt(G.dom)?G.dom.outerHTML:nh(G):""},M=(K,G)=>{Fo(K,he=>{pt(he)&&(he.outerHTML=G)})},A=(K,G)=>{const he=Z(G);return Fo(K,Ee=>{const dt=he==null?void 0:he.parentNode,_e=he==null?void 0:he.nextSibling;return dt&&(_e?dt.insertBefore(Ee,_e):dt.appendChild(Ee)),Ee})},B=(K,G,he)=>Fo(G,Ee=>{var dt;const _e=Oo(G)?K.cloneNode(!0):K;return he&&ag(bf(Ee.childNodes),Ue=>{_e.appendChild(Ue)}),(dt=Ee.parentNode)===null||dt===void 0||dt.replaceChild(_e,Ee),Ee}),F=(K,G)=>{if(K.nodeName!==G.toUpperCase()){const he=He(G);return ag(ie(K),Ee=>{pe(he,Ee.nodeName,re(K,Ee.nodeName))}),B(he,K,!0),he}else return K},oe=(K,G)=>{let he=K;for(;he;){let Ee=G;for(;Ee&&he!==Ee;)Ee=Ee.parentNode;if(he===Ee)break;he=he.parentNode}return!he&&K.ownerDocument?K.ownerDocument.documentElement:he},ce=K=>{if(pt(K)){const G=K.nodeName.toLowerCase()==="a"&&!re(K,"href")&&re(K,"id");if(re(K,"name")||re(K,"data-mce-bookmark")||G)return!0}return!1},De=(K,G,he)=>{let Ee=0;if(ce(K))return!1;const dt=K.firstChild;if(dt){const _e=new br(dt,K),Ue=D?D.getWhitespaceElements():{},Je=G||(D?D.getNonEmptyElements():null);let xt=dt;do{if(pt(xt)){const no=xt.getAttribute("data-mce-bogus");if(no){xt=_e.next(no==="all");continue}const Do=xt.nodeName.toLowerCase();if(Je&&Je[Do]){if(Do==="br"){Ee++,xt=_e.next();continue}return!1}if(ce(xt))return!1}if(ii(xt)||Ae(xt)&&!di(xt.data)&&(!(he!=null&&he.includeZwsp)||!Ux(xt.data))||Ae(xt)&&xt.parentNode&&Ue[xt.parentNode.nodeName]&&di(xt.data))return!1;xt=_e.next()}while(xt)}return Ee<=1},Q=()=>e.createRange(),ee=(K,G,he)=>{let Ee=Q(),dt,_e;if(K&&G&&K.parentNode&&G.parentNode){const Ue=K.parentNode;return Ee.setStart(Ue,uc(K)),Ee.setEnd(G.parentNode,uc(G)),dt=Ee.extractContents(),Ee=Q(),Ee.setStart(G.parentNode,uc(G)+1),Ee.setEnd(Ue,uc(K)+1),_e=Ee.extractContents(),Ue.insertBefore(mi(ct,dt,D),K),he?Ue.insertBefore(he,K):Ue.insertBefore(G,K),Ue.insertBefore(mi(ct,_e,D),K),ya(K),he||G}else return},fe=(K,G,he,Ee)=>{if(Oo(K)){let dt=K.length;const _e=[];for(;dt--;)_e[dt]=fe(K[dt],G,he,Ee);return _e}else return o.collect&&(K===e||K===s)&&k.push([K,G,he,Ee]),P.bind(K,G,he,Ee||ct)},Ne=(K,G,he)=>{if(Oo(K)){let Ee=K.length;const dt=[];for(;Ee--;)dt[Ee]=Ne(K[Ee],G,he);return dt}else{if(k.length>0&&(K===e||K===s)){let Ee=k.length;for(;Ee--;){const[dt,_e,Ue]=k[Ee];K===dt&&(!G||G===_e)&&(!he||he===Ue)&&P.unbind(dt,_e,Ue)}}return P.unbind(K,G,he)}},be=(K,G,he)=>P.dispatch(K,G,he),Fe=(K,G,he)=>P.dispatch(K,G,he),et=K=>{if(K&&Sl(K)){const G=K.getAttribute("data-mce-contenteditable");return G&&G!=="inherit"?G:K.contentEditable!=="inherit"?K.contentEditable:null}else return null},ct={doc:e,settings:o,win:s,files:i,stdMode:g,boxModel:f,styleSheetLoader:y,boundEvents:k,styles:L,schema:D,events:P,isBlock:$,root:null,clone:Se,getRoot:je,getViewPort:Ye,getRect:ye,getSize:lt,getParent:to,getParents:vt,get:Z,getNext:zs,getPrev:Ja,select:xi,is:rt,add:Rt,create:He,createHTML:mn,createFragment:co,remove:ya,setStyle:Me,getStyle:ze,setStyles:we,removeAllAttribs:bu,setAttrib:pe,setAttribs:Dc,getAttrib:re,getPos:Ve,parseStyle:Mc,serializeStyle:ll,addStyle:Ci,loadCSS:t,addClass:a,removeClass:l,hasClass:u,toggleClass:r,show:h,hide:v,isHidden:x,uniqueId:C,setHTML:Gn,getOuterHTML:_,setOuterHTML:M,decode:yt,encode:Vt,insertAfter:A,replace:B,rename:F,findCommonAncestor:oe,run:Fo,getAttribs:ie,isEmpty:De,createRng:Q,nodeIndex:uc,split:ee,bind:fe,unbind:Ne,fire:Fe,dispatch:be,getContentEditable:et,getContentEditableParent:K=>{const G=je();let he=null;for(let Ee=K;Ee&&Ee!==G&&(he=et(Ee),he===null);Ee=Ee.parentNode);return he},isEditable:K=>{if(Oe(K)){const G=pt(K)?K:K.parentElement;return Oe(G)&&Sl(G)&&Er(X.fromDom(G))}else return!1},destroy:()=>{if(k.length>0){let K=k.length;for(;K--;){const[G,he,Ee]=k[K];P.unbind(G,he,Ee)}}ot(i,(K,G)=>{y.unload(G),delete i[G]})},isChildOf:(K,G)=>K===G||G.contains(K),dumpRng:K=>"startContainer: "+K.startContainer.nodeName+", startOffset: "+K.startOffset+", endContainer: "+K.endContainer.nodeName+", endOffset: "+K.endOffset},eo=Dk(L,o,Pe(ct));return ct};Kt.DOM=Kt(document),Kt.nodeIndex=uc;const sC=Kt.DOM,Tn=0,xb=1,ls=2,er=3;class xs{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((n,s)=>{const i=sC;let d;const g=()=>{i.remove(k),d&&(d.onerror=d.onload=d=null)},f=()=>{g(),n()},y=()=>{g(),s("Failed to load script: "+o)},k=i.uniqueId();d=document.createElement("script"),d.id=k,d.type="text/javascript",d.src=ve._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(d,"referrerpolicy",this.settings.referrerPolicy),d.onload=f,d.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(d)})}isDone(o){return this.states[o]===ls}markDone(o){this.states[o]=ls}add(o){const n=this;return n.queue.push(o),n.states[o]===void 0&&(n.states[o]=Tn),new Promise((s,i)=>{n.scriptLoadedCallbacks[o]||(n.scriptLoadedCallbacks[o]=[]),n.scriptLoadedCallbacks[o].push({resolve:s,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const n=this,s=(y,k)=>{Go(n.scriptLoadedCallbacks,k).each(D=>{me(D,L=>L[y](k))}),delete n.scriptLoadedCallbacks[k]},i=y=>{const k=Et(y,D=>D.status==="rejected");return k.length>0?Promise.reject(Ds(k,({reason:D})=>Oo(D)?D:[D])):Promise.resolve()},d=y=>Promise.allSettled(Bt(y,k=>n.states[k]===ls?(s("resolve",k),Promise.resolve()):n.states[k]===er?(s("reject",k),Promise.reject(k)):(n.states[k]=xb,n.loadScript(k).then(()=>{n.states[k]=ls,s("resolve",k);const D=n.queue;return D.length>0?(n.queue=[],d(D).then(i)):Promise.resolve()},()=>(n.states[k]=er,s("reject",k),Promise.reject(k)))))),g=y=>(n.loading=!0,d(y).then(k=>{n.loading=!1;const D=n.queueLoadedCallbacks.shift();return I.from(D).each(lr),i(k)})),f=Lc(o);return n.loading?new Promise((y,k)=>{n.queueLoadedCallbacks.push(()=>{g(f).then(y,k)})}):g(f)}}xs.ScriptLoader=new xs;const Tr=e=>{let o=e;return{get:()=>o,set:n=>{o=n}}},Mk=(e,o)=>{const n=e.indexOf(o);return n!==-1&&e.indexOf(o,n+1)>n},Ak=e=>qe(e)&&At(e,"raw"),ed=e=>Oo(e)&&e.length>1,cs={},Zd=Tr("en"),Cb=()=>Go(cs,Zd.get()),Dl={getData:()=>bo(cs,e=>({...e})),setCode:e=>{e&&Zd.set(e)},getCode:()=>Zd.get(),add:(e,o)=>{let n=cs[e];n||(cs[e]=n={});const s=Bt(Cr(o),i=>i.toLowerCase());ot(o,(i,d)=>{const g=d.toLowerCase();g!==d&&Mk(s,g)?(At(o,g)||(n[g]=i),n[d]=i):n[g]=i})},translate:e=>{const o=Cb().getOr({}),n=g=>te(g)?Object.prototype.toString.call(g):s(g)?"":""+g,s=g=>g===""||g===null||g===void 0,i=g=>{const f=n(g);return At(o,f)?n(o[f]):Go(o,f.toLowerCase()).map(n).getOr(f)},d=g=>g.replace(/{context:\w+}$/,"");if(s(e))return"";if(Ak(e))return n(e.raw);if(ed(e)){const g=e.slice(1),f=i(e[0]).replace(/\{([0-9]+)\}/g,(y,k)=>At(g,k)?n(g[k]):y);return d(f)}return d(i(e))},isRtl:()=>Cb().bind(e=>Go(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>At(cs,e)},Gs=()=>{const e=[],o={},n={},s=[],i=(Z,U)=>{const re=Et(s,ie=>ie.name===Z&&ie.state===U);me(re,ie=>ie.resolve())},d=Z=>At(o,Z),g=Z=>At(n,Z),f=Z=>{if(n[Z])return n[Z].instance},y=(Z,U)=>{const re=Dl.getCode(),ie=","+(U||"")+",";!re||U&&ie.indexOf(","+re+",")===-1||xs.ScriptLoader.add(o[Z]+"/langs/"+re+".js")},k=(Z,U)=>{Gs.languageLoad!==!1&&(d(Z)?y(Z,U):$(Z,"loaded").then(()=>y(Z,U)))},D=(Z,U)=>(e.push(U),n[Z]={instance:U},i(Z,"added"),U),L=Z=>{delete o[Z],delete n[Z]},P=(Z,U)=>J(U)?J(Z)?{prefix:"",resource:U,suffix:""}:{prefix:Z.prefix,resource:U,suffix:Z.suffix}:U,j=(Z,U)=>{if(o[Z])return Promise.resolve();let re=J(U)?U:U.prefix+U.resource+U.suffix;re.indexOf("/")!==0&&re.indexOf("://")===-1&&(re=Gs.baseURL+"/"+re),o[Z]=re.substring(0,re.lastIndexOf("/"));const ie=()=>(i(Z,"loaded"),Promise.resolve());return n[Z]?ie():xs.ScriptLoader.add(re).then(ie)},$=(Z,U="added")=>U==="added"&&g(Z)||U==="loaded"&&d(Z)?Promise.resolve():new Promise(re=>{s.push({name:Z,state:U,resolve:re})});return{items:e,urls:o,lookup:n,get:f,requireLangPack:k,add:D,remove:L,createUrl:P,load:j,waitFor:$}};Gs.languageLoad=!0,Gs.baseURL="",Gs.PluginManager=Gs(),Gs.ThemeManager=Gs(),Gs.ModelManager=Gs();const aC=e=>{const o=Tr(I.none()),n=()=>o.get().each(e);return{clear:()=>{n(),o.set(I.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(I.some(s))}}},iC=e=>{const o=Tr(I.none()),n=()=>o.get().each(s=>clearInterval(s));return{clear:()=>{n(),o.set(I.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(I.some(setInterval(s,e)))}}},Ku=()=>{const e=aC(Be);return{...e,on:o=>e.get().each(o)}},xf=(e,o)=>{let n=null;return{cancel:()=>{se(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{se(n)&&(n=setTimeout(()=>{n=null,e.apply(null,s)},o))}}},wb=(e,o)=>{let n=null;const s=()=>{se(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...i)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,i)},o)}}},Sh=Pe("mce-annotation"),Xu=Pe("data-mce-annotation"),Ud=Pe("data-mce-annotation-uid"),Cf=Pe("data-mce-annotation-active"),kh=Pe("data-mce-annotation-classes"),_h=Pe("data-mce-annotation-attrs"),l0=e=>o=>yo(o,e),lC=(e,o)=>{const n=e.selection.getRng(),s=X.fromDom(n.startContainer),i=X.fromDom(e.getBody()),d=o.fold(()=>"."+Sh(),f=>`[${Xu()}="${f}"]`),g=_r(s,n.startOffset).getOr(s);return Li(g,d,l0(i)).bind(f=>Ri(f,`${Ud()}`).bind(y=>Ri(f,`${Xu()}`).map(k=>{const D=Eh(e,y);return{uid:y,name:k,elements:D}})))},Rk=e=>Sa(e)&&Pm(e,Sh()),cC=(e,o)=>Fc(e,"data-mce-bogus")||jc(e,'[data-mce-bogus="all"]',l0(o)),Eh=(e,o)=>{const n=X.fromDom(e.getBody()),s=rn(n,`[${Ud()}="${o}"]`);return Et(s,i=>!cC(i,n))},dC=(e,o)=>{const n=X.fromDom(e.getBody()),s=rn(n,`[${Xu()}="${o}"]`),i={};return me(s,d=>{if(!cC(d,n)){const g=Wn(d,Ud()),f=Go(i,g).getOr([]);i[g]=f.concat([d])}}),i},tr=(e,o)=>{const n=Tr({}),s=()=>({listeners:[],previous:Ku()}),i=(D,L)=>{d(D,P=>(L(P),P))},d=(D,L)=>{const P=n.get(),j=Go(P,D).getOrThunk(s),$=L(j);P[D]=$,n.set(P)},g=(D,L,P)=>{i(D,j=>{me(j.listeners,$=>$(!0,D,{uid:L,nodes:Bt(P,Z=>Z.dom)}))})},f=D=>{i(D,L=>{me(L.listeners,P=>P(!1,D))})},y=(D,L)=>{me(Eh(e,D),P=>{L?Dn(P,Cf(),"true"):kr(P,Cf())})},k=wb(()=>{const D=Yo(o.getNames());me(D,L=>{d(L,P=>{const j=P.previous.get();return lC(e,I.some(L)).fold(()=>{j.each($=>{f(L),P.previous.clear(),y($,!1)})},({uid:$,name:Z,elements:U})=>{Rs(j,$)||(j.each(re=>y(re,!1)),g(Z,$,U),P.previous.set($),y($,!0))}),{previous:P.previous,listeners:P.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(D,L)=>{d(D,P=>({previous:P.previous,listeners:P.listeners.concat([L])}))}}},uC=(e,o)=>{const n=Xu(),s=d=>I.from(d.attr(n)).bind(o.lookup),i=d=>{var g,f;d.attr(Ud(),null),d.attr(Xu(),null),d.attr(Cf(),null);const y=I.from(d.attr(_h())).map(P=>P.split(",")).getOr([]),k=I.from(d.attr(kh())).map(P=>P.split(",")).getOr([]);me(y,P=>d.attr(P,null));const D=(f=(g=d.attr("class"))===null||g===void 0?void 0:g.split(" "))!==null&&f!==void 0?f:[],L=ti(D,[Sh()].concat(k));d.attr("class",L.length>0?L.join(" "):null),d.attr(kh(),null),d.attr(_h(),null)};e.serializer.addTempAttr(Cf()),e.serializer.addAttributeFilter(n,d=>{for(const g of d)s(g).each(f=>{f.persistent===!1&&(g.name==="span"?g.unwrap():i(g))})})},mC=()=>{const e={};return{register:(o,n)=>{e[o]={name:o,settings:n}},lookup:o=>Go(e,o).map(n=>n.settings),getNames:()=>Cr(e)}};let gC=0;const qu=e=>{const o=new Date().getTime(),n=Math.floor(Math.random()*1e9);return gC++,e+"_"+n+gC+String(o)},Cs=(e,o)=>{me(o,n=>{Uc(e,n)})},ji=(e,o)=>{me(o,n=>{Tu(e,n)})},c0=(e,o)=>X.fromDom(e.dom.cloneNode(o)),Yu=e=>c0(e,!1),d0=e=>c0(e,!0),Bk=(e,o)=>{const n=X.fromTag(o),s=Vc(e);return Ai(n,s),n},Nk=(e,o)=>{const n=Bk(e,o);sc(e,n);const s=Vr(e);return Pi(n,s),$o(e),n},Sb=(e,o,n=Ie)=>{const s=new br(e,o),i=d=>{let g;do g=s[d]();while(g&&!Ae(g)&&!n(g));return I.from(g).filter(Ae)};return{current:()=>I.from(s.current()).filter(Ae),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},pi=(e,o)=>{const n=o||(i=>e.isBlock(i)||Co(i)||xe(i)),s=(i,d,g,f)=>{if(Ae(i)){const y=f(i,d,i.data);if(y!==-1)return I.some({container:i,offset:y})}return g().bind(y=>s(y.container,y.offset,g,f))};return{backwards:(i,d,g,f)=>{const y=Sb(i,f??e.getRoot(),n);return s(i,d,()=>y.prev().map(k=>({container:k,offset:k.length})),g).getOrNull()},forwards:(i,d,g,f)=>{const y=Sb(i,f??e.getRoot(),n);return s(i,d,()=>y.next().map(k=>({container:k,offset:0})),g).getOrNull()}}},Wd=Math.round,hn=e=>e?{left:Wd(e.left),top:Wd(e.top),bottom:Wd(e.bottom),right:Wd(e.right),width:Wd(e.width),height:Wd(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ml=(e,o)=>(e=hn(e),o||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Oh=(e,o)=>e.left===o.left&&e.top===o.top&&e.bottom===o.bottom&&e.right===o.right,hC=(e,o,n)=>e>=0&&e<=Math.min(o.height,n.height)/2,Th=(e,o)=>{const n=Math.min(o.height/2,e.height/2);return e.bottom-n<o.top?!0:e.top>o.bottom?!1:hC(o.top-e.bottom,e,o)},Dh=(e,o)=>e.top>o.bottom?!0:e.bottom<o.top?!1:hC(o.bottom-e.top,e,o),$d=(e,o,n)=>o>=e.left&&o<=e.right&&n>=e.top&&n<=e.bottom,kb=e=>En(e,(o,n)=>o.fold(()=>I.some(n),s=>{const i=Math.min(n.left,s.left),d=Math.min(n.top,s.top),g=Math.max(n.right,s.right),f=Math.max(n.bottom,s.bottom);return I.some({top:d,right:g,bottom:f,left:i,width:g-i,height:f-d})}),I.none()),ig=(e,o,n)=>{const s=Math.max(Math.min(o,e.left+e.width),e.left),i=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((o-s)*(o-s)+(n-i)*(n-i))},u0=(e,o)=>Math.max(0,Math.min(e.bottom,o.bottom)-Math.max(e.top,o.top)),Lk=(e,o,n)=>Math.min(Math.max(e,o),n),wf=e=>{const o=e.startContainer,n=e.startOffset;return o===e.endContainer&&o.hasChildNodes()&&e.endOffset===n+1?o.childNodes[n]:null},fi=(e,o)=>{if(pt(e)&&e.hasChildNodes()){const n=e.childNodes,s=Lk(o,0,n.length-1);return n[s]}else return e},Mh=(e,o)=>{if(!(o<0&&pt(e)&&e.hasChildNodes()))return fi(e,o)},Hk=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),m0=e=>J(e)&&e.charCodeAt(0)>=768&&Hk.test(e),pC=(...e)=>o=>{for(let n=0;n<e.length;n++)if(e[n](o))return!0;return!1},fC=(...e)=>o=>{for(let n=0;n<e.length;n++)if(!e[n](o))return!1;return!0},g0=pt,Ik=as,vC=Jp("display","block table"),Pk=Jp("float","left right"),Qu=fC(g0,Ik,zo(Pk)),jd=zo(Jp("white-space","pre pre-line pre-wrap")),Gd=Ae,mo=Co,Ma=Kt.nodeIndex,td=Mh,od=e=>e?e.createRange():Kt.DOM.createRng(),en=e=>J(e)&&/[\r\n\t ]/.test(e),h0=e=>!!e.setStart&&!!e.setEnd,Sf=e=>{const o=e.startContainer,n=e.startOffset;if(en(e.toString())&&jd(o.parentNode)&&Ae(o)){const s=o.data;if(en(s[n-1])||en(s[n+1]))return!0}return!1},ws=e=>{const o=e.ownerDocument,n=od(o),s=o.createTextNode(jn),i=e.parentNode;i.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const d=hn(n.getBoundingClientRect());return i.removeChild(s),d},Ju=e=>{const o=e.startContainer,n=e.endContainer,s=e.startOffset,i=e.endOffset;if(o===n&&Ae(n)&&s===0&&i===1){const d=e.cloneRange();return d.setEndAfter(n),Kd(d)}else return null},bC=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Kd=e=>{var o;let n;const s=e.getClientRects();return s.length>0?n=hn(s[0]):n=hn(e.getBoundingClientRect()),!h0(e)&&mo(e)&&bC(n)?ws(e):bC(n)&&h0(e)&&(o=Ju(e))!==null&&o!==void 0?o:n},ds=(e,o)=>{const n=Ml(e,o);return n.width=1,n.right=n.left+1,n},p0=e=>{const o=[],n=g=>{g.height!==0&&(o.length>0&&Oh(g,o[o.length-1])||o.push(g))},s=(g,f)=>{const y=od(g.ownerDocument);if(f<g.data.length){if(m0(g.data[f]))return;if(m0(g.data[f-1])&&(y.setStart(g,f),y.setEnd(g,f+1),!Sf(y))){n(ds(Kd(y),!1));return}}f>0&&(y.setStart(g,f-1),y.setEnd(g,f),Sf(y)||n(ds(Kd(y),!1))),f<g.data.length&&(y.setStart(g,f),y.setEnd(g,f+1),Sf(y)||n(ds(Kd(y),!0)))},i=e.container(),d=e.offset();if(Gd(i))return s(i,d),o;if(g0(i))if(e.isAtEnd()){const g=td(i,d);Gd(g)&&s(g,g.data.length),Qu(g)&&!mo(g)&&n(ds(Kd(g),!1))}else{const g=td(i,d);if(Gd(g)&&s(g,0),Qu(g)&&e.isAtEnd())return n(ds(Kd(g),!1)),o;const f=td(e.container(),e.offset()-1);Qu(f)&&!mo(f)&&(vC(f)||vC(g)||!Qu(g))&&n(ds(Kd(f),!1)),Qu(g)&&n(ds(Kd(g),!0))}return o},Ce=(e,o,n)=>{const s=()=>(Gd(e),o===0),i=()=>Gd(e)?o>=e.data.length:o>=e.childNodes.length,d=()=>{const D=od(e.ownerDocument);return D.setStart(e,o),D.setEnd(e,o),D},g=()=>(n||(n=p0(Ce(e,o))),n),f=()=>g().length>0,y=D=>D&&e===D.container()&&o===D.offset(),k=D=>td(e,D?o-1:o);return{container:Pe(e),offset:Pe(o),toRange:d,getClientRects:g,isVisible:f,isAtStart:s,isAtEnd:i,isEqual:y,getNode:k}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=e=>Ce(e.parentNode,Ma(e)+1),Ce.before=e=>Ce(e.parentNode,Ma(e)),Ce.isAbove=(e,o)=>Qn(xn(o.getClientRects()),Ia(e.getClientRects()),Th).getOr(!1),Ce.isBelow=(e,o)=>Qn(Ia(o.getClientRects()),xn(e.getClientRects()),Dh).getOr(!1),Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?Ae(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const Ah=(e,o)=>{Ae(o)&&o.data.length===0&&e.remove(o)},_b=(e,o,n)=>{o.insertNode(n),Ah(e,n.previousSibling),Ah(e,n.nextSibling)},f0=(e,o,n)=>{const s=I.from(n.firstChild),i=I.from(n.lastChild);o.insertNode(n),s.each(d=>Ah(e,d.previousSibling)),i.each(d=>Ah(e,d.nextSibling))},Rh=(e,o,n)=>{W1(n)?f0(e,o,n):_b(e,o,n)},Al=Ae,Eb=Fi,lg=Kt.nodeIndex,Aa=e=>{const o=e.parentNode;return Eb(o)?Aa(o):o},v0=e=>e?sa(e.childNodes,(o,n)=>(Eb(n)&&n.nodeName!=="BR"?o=o.concat(v0(n)):o.push(n),o),[]):[],Dr=(e,o)=>{let n=e;for(;(n=n.previousSibling)&&Al(n);)o+=n.data.length;return o},yC=e=>o=>e===o,em=e=>{let o,n;o=v0(Aa(e)),n=Ko(o,yC(e),e),o=o.slice(0,n+1);const s=sa(o,(i,d,g)=>(Al(d)&&Al(o[g-1])&&i++,i),0);return o=ts(o,ai([e.nodeName])),n=Ko(o,yC(e),e),n-s},Ks=e=>(Al(e)?"text()":e.nodeName.toLowerCase())+"["+em(e)+"]",kf=(e,o,n)=>{const s=[];for(let i=o.parentNode;i&&i!==e&&!(n&&n(i));i=i.parentNode)s.push(i);return s},Ob=(e,o)=>{let n=[],s=o.container(),i=o.offset(),d;if(Al(s))d=Dr(s,i);else{const f=s.childNodes;i>=f.length?(d="after",i=f.length-1):d="before",s=f[i]}n.push(Ks(s));let g=kf(e,s);return g=ts(g,zo(Fi)),n=n.concat(wa(g,f=>Ks(f))),n.reverse().join("/")+","+d},Tb=(e,o,n)=>{let s=v0(e);return s=ts(s,(i,d)=>!Al(i)||!Al(s[d-1])),s=ts(s,ai([o])),s[n]},Db=(e,o)=>{let n=e,s=0;for(;Al(n);){const i=n.data.length;if(o>=s&&o<=s+i){e=n,o=o-s;break}if(!Al(n.nextSibling)){e=n,o=i;break}s+=i,n=n.nextSibling}return Al(e)&&o>e.data.length&&(o=e.data.length),Ce(e,o)},Mb=(e,o)=>{if(!o)return null;const n=o.split(","),s=n[0].split("/"),i=n.length>1?n[1]:"before",d=sa(s,(g,f)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(f);return y?(y[1]==="text()"&&(y[1]="#text"),Tb(g,y[1],parseInt(y[2],10))):null},e);if(!d)return null;if(!Al(d)&&d.parentNode){let g;return i==="after"?g=lg(d)+1:g=lg(d),Ce(d.parentNode,g)}return Db(d,parseInt(i,10))},b0=xe,zk=(e,o,n)=>{let s=e(o.data.slice(0,n)).length;for(let i=o.previousSibling;i&&Ae(i);i=i.previousSibling)s+=e(i.data).length;return s},us=(e,o,n,s,i)=>{const d=i?s.startContainer:s.endContainer;let g=i?s.startOffset:s.endOffset;const f=[],y=e.getRoot();if(Ae(d))f.push(n?zk(o,d,g):g);else{let k=0;const D=d.childNodes;g>=D.length&&D.length&&(k=1,g=Math.max(0,D.length-1)),f.push(e.nodeIndex(D[g],n)+k)}for(let k=d;k&&k!==y;k=k.parentNode)f.push(e.nodeIndex(k,n));return f},Ss=(e,o,n,s)=>{const i=o.dom,d=us(i,e,n,s,!0),g=o.isForward(),f=Gc(s)?{isFakeCaret:!0}:{};if(o.isCollapsed())return{start:d,forward:g,...f};{const y=us(i,e,n,s,!1);return{start:d,end:y,forward:g,...f}}},ks=(e,o,n)=>{let s=0;return ve.each(e.select(o),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===n)return!1;s++;return}}),s},ga=(e,o)=>{let n=o?e.startContainer:e.endContainer,s=o?e.startOffset:e.endOffset;if(pt(n)&&n.nodeName==="TR"){const i=n.childNodes;n=i[Math.min(o?s:s-1,i.length-1)],n&&(s=o?0:n.childNodes.length,o?e.setStart(n,s):e.setEnd(n,s))}},Ls=e=>(ga(e,!0),ga(e,!1),e),Mr=(e,o)=>{if(pt(e)&&(e=fi(e,o),b0(e)))return e;if(ci(e)){Ae(e)&&lh(e)&&(e=e.parentNode);let n=e.previousSibling;if(b0(n)||(n=e.nextSibling,b0(n)))return n}},Ab=e=>Mr(e.startContainer,e.startOffset)||Mr(e.endContainer,e.endOffset),y0=(e,o,n)=>{const s=n.getNode(),i=n.getRng();if(s.nodeName==="IMG"||b0(s)){const g=s.nodeName;return{name:g,index:ks(n.dom,g,s)}}const d=Ab(i);if(d){const g=d.tagName;return{name:g,index:ks(n.dom,g,d)}}return Ss(e,n,o,i)},xC=e=>{const o=e.getRng();return{start:Ob(e.dom.getRoot(),Ce.fromRangeStart(o)),end:Ob(e.dom.getRoot(),Ce.fromRangeEnd(o)),forward:e.isForward()}},CC=e=>({rng:e.getRng(),forward:e.isForward()}),Rb=(e,o,n)=>{const s={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},Bh=(e,o)=>{const n=e.dom;let s=e.getRng();const i=n.uniqueId(),d=e.isCollapsed(),g=e.getNode(),f=g.nodeName,y=e.isForward();if(f==="IMG")return{name:f,index:ks(n,f,g)};const k=Ls(s.cloneRange());if(!d){k.collapse(!1);const L=Rb(n,i+"_end",o);Rh(n,k,L)}s=Ls(s),s.collapse(!0);const D=Rb(n,i+"_start",o);return Rh(n,s,D),e.moveToBookmark({id:i,keep:!0,forward:y}),{id:i,forward:y}},Bb=(e,o,n=!1)=>o===2?y0(jr,n,e):o===3?xC(e):o?CC(e):Bh(e,!1),_f=Le(y0,fo,!0),wC=e=>{const o=d=>d(e),n=Pe(e),s=()=>i,i={tag:!0,inner:e,fold:(d,g)=>g(e),isValue:at,isError:Ie,map:d=>Ra.value(d(e)),mapError:s,bind:o,exists:o,forall:o,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:d=>{d(e)},toOptional:()=>I.some(e)};return i},SC=e=>{const o=()=>n,n={tag:!1,inner:e,fold:(s,i)=>s(e),isValue:Ie,isError:at,map:o,mapError:s=>Ra.error(s(e)),bind:o,exists:Ie,forall:at,getOr:fo,or:fo,getOrThunk:Xo,orThunk:Xo,getOrDie:xr(String(e)),each:Be,toOptional:I.none};return n},Ra={value:wC,error:SC,fromOption:(e,o)=>e.fold(()=>SC(o),wC)},nd={generate:e=>{if(!Oo(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const o=[],n={};return me(e,(s,i)=>{const d=Cr(s);if(d.length!==1)throw new Error("one and only one name per case");const g=d[0],f=s[g];if(n[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Oo(f))throw new Error("case arguments must be an array");o.push(g),n[g]=(...y)=>{const k=y.length;if(k!==f.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+f.length+" ("+f+"), got "+k);return{fold:(...D)=>{if(D.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+D.length);return D[i].apply(null,y)},match:D=>{const L=Cr(D);if(o.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+`
Actual: `+L.join(","));if(!hr(o,P=>It(L,P)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+o.join(", "));return D[g].apply(null,y)},log:D=>{console.log(D,{constructors:o,constructor:g,params:y})}}}}),n}};nd.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Nb=e=>{const o=[],n=[];return me(e,s=>{s.fold(i=>{o.push(i)},i=>{n.push(i)})}),{errors:o,values:n}},Lb=e=>e.type==="inline-command"||e.type==="inline-format",Hb=e=>e.type==="block-command"||e.type==="block-format",kC=e=>{const o=s=>Ra.error({message:s,pattern:e}),n=(s,i,d)=>{if(e.format!==void 0){let g;if(Oo(e.format)){if(!hr(e.format,J))return o(s+" pattern has non-string items in the `format` array");g=e.format}else if(J(e.format))g=[e.format];else return o(s+" pattern has non-string `format` parameter");return Ra.value(i(g))}else return e.cmd!==void 0?J(e.cmd)?Ra.value(d(e.cmd,e.value)):o(s+" pattern has non-string `cmd` parameter"):o(s+" pattern is missing both `format` and `cmd` parameters")};if(!qe(e))return o("Raw pattern is not an object");if(!J(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!J(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let s=e.start,i=e.end;return i.length===0&&(i=s,s=""),n("Inline",d=>({type:"inline-format",start:s,end:i,format:d}),(d,g)=>({type:"inline-command",start:s,end:i,cmd:d,value:g}))}else return e.replacement!==void 0?J(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Ra.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?o("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,i)=>({type:"block-command",start:e.start,cmd:s,value:i}))},Ib=e=>Et(e,Hb),x0=e=>Et(e,Lb),We=(e,o)=>({inlinePatterns:x0(e),blockPatterns:Ib(e),dynamicPatternsLookup:o}),_C=e=>{const o=Nb(Bt(e,kC));return me(o.errors,n=>console.error(n.message,n.pattern)),o.values},Gr=e=>o=>{const n=e(o);return _C(n)},Ef=Fa().deviceType,Of=Ef.isTouch(),Fk=Kt.DOM,ja=e=>{const o=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return En(o,(n,s)=>{const i=s.split("="),d=i[0],g=i.length>1?i[1]:d;return n[Ti(d)]=Ti(g),n},{})},EC=e=>_n(e,RegExp),tt=e=>o=>o.options.get(e),Tf=e=>J(e)||qe(e),Nh=(e,o="")=>n=>{const s=J(n);if(s)if(n.indexOf("=")!==-1){const i=ja(n);return{value:Go(i,e.id).getOr(o),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},rd=e=>{const o=e.options.register;o("id",{processor:"string",default:e.id}),o("selector",{processor:"string"}),o("target",{processor:"object"}),o("suffix",{processor:"string"}),o("cache_suffix",{processor:"string"}),o("base_url",{processor:"string"}),o("referrer_policy",{processor:"string",default:""}),o("language_load",{processor:"boolean",default:!0}),o("inline",{processor:"boolean",default:!1}),o("iframe_attrs",{processor:"object",default:{}}),o("doctype",{processor:"string",default:"<!DOCTYPE html>"}),o("document_base_url",{processor:"string",default:e.documentBaseUrl}),o("body_id",{processor:Nh(e,"tinymce"),default:"tinymce"}),o("body_class",{processor:Nh(e),default:""}),o("content_security_policy",{processor:"string",default:""}),o("br_in_pre",{processor:"boolean",default:!0}),o("forced_root_block",{processor:n=>{const s=J(n)&&sr(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),o("forced_root_block_attrs",{processor:"object",default:{}}),o("newline_behavior",{processor:n=>{const s=It(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),o("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),o("no_newline_selector",{processor:"string",default:""}),o("keep_styles",{processor:"boolean",default:!0}),o("end_container_on_empty_block",{processor:n=>so(n)?{valid:!0,value:n}:J(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),o("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),o("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),o("font_size_classes",{processor:"string",default:""}),o("automatic_uploads",{processor:"boolean",default:!0}),o("images_reuse_filename",{processor:"boolean",default:!1}),o("images_replace_blob_uris",{processor:"boolean",default:!0}),o("icons",{processor:"string",default:""}),o("icons_url",{processor:"string",default:""}),o("images_upload_url",{processor:"string",default:""}),o("images_upload_base_path",{processor:"string",default:""}),o("images_upload_credentials",{processor:"boolean",default:!1}),o("images_upload_handler",{processor:"function"}),o("language",{processor:"string",default:"en"}),o("language_url",{processor:"string",default:""}),o("entity_encoding",{processor:"string",default:"named"}),o("indent",{processor:"boolean",default:!0}),o("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),o("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),o("indent_use_margin",{processor:"boolean",default:!1}),o("indentation",{processor:"string",default:"40px"}),o("content_css",{processor:n=>{const s=n===!1||J(n)||Ge(n,J);return s?J(n)?{value:Bt(n.split(","),Ti),valid:s}:Oo(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Zb(e)?[]:["default"]}),o("content_style",{processor:"string"}),o("content_css_cors",{processor:"boolean",default:!1}),o("font_css",{processor:n=>{const s=J(n)||Ge(n,J);return s?{value:Oo(n)?n:Bt(n.split(","),Ti),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),o("inline_boundaries",{processor:"boolean",default:!0}),o("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),o("object_resizing",{processor:n=>{const s=so(n)||J(n);return s?n===!1||Ef.isiPhone()||Ef.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!Of}),o("resize_img_proportional",{processor:"boolean",default:!0}),o("event_root",{processor:"object"}),o("service_message",{processor:"string"}),o("theme",{processor:n=>n===!1||J(n)||te(n),default:"silver"}),o("theme_url",{processor:"string"}),o("formats",{processor:"object"}),o("format_empty_lines",{processor:"boolean",default:!1}),o("format_noneditable_selector",{processor:"string",default:""}),o("preview_styles",{processor:n=>{const s=n===!1||J(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),o("custom_ui_selector",{processor:"string",default:""}),o("hidden_input",{processor:"boolean",default:!0}),o("submit_patch",{processor:"boolean",default:!0}),o("encoding",{processor:"string"}),o("add_form_submit_trigger",{processor:"boolean",default:!0}),o("add_unload_trigger",{processor:"boolean",default:!0}),o("custom_undo_redo_levels",{processor:"number",default:0}),o("disable_nodechange",{processor:"boolean",default:!1}),o("readonly",{processor:"boolean",default:!1}),o("editable_root",{processor:"boolean",default:!0}),o("plugins",{processor:"string[]",default:[]}),o("external_plugins",{processor:"object"}),o("forced_plugins",{processor:"string[]"}),o("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),o("model_url",{processor:"string"}),o("block_unsupported_drop",{processor:"boolean",default:!0}),o("visual",{processor:"boolean",default:!0}),o("visual_table_class",{processor:"string",default:"mce-item-table"}),o("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),o("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),o("setup",{processor:"function"}),o("init_instance_callback",{processor:"function"}),o("url_converter",{processor:"function",default:e.convertURL}),o("url_converter_scope",{processor:"object",default:e}),o("urlconverter_callback",{processor:"function"}),o("allow_conditional_comments",{processor:"boolean",default:!1}),o("allow_html_data_urls",{processor:"boolean",default:!1}),o("allow_svg_data_urls",{processor:"boolean"}),o("allow_html_in_named_anchor",{processor:"boolean",default:!1}),o("allow_script_urls",{processor:"boolean",default:!1}),o("allow_unsafe_link_target",{processor:"boolean",default:!1}),o("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),o("fix_list_elements",{processor:"boolean",default:!1}),o("preserve_cdata",{processor:"boolean",default:!1}),o("remove_trailing_brs",{processor:"boolean",default:!0}),o("pad_empty_with_br",{processor:"boolean",default:!1}),o("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),o("element_format",{processor:"string",default:"html"}),o("entities",{processor:"string"}),o("schema",{processor:"string",default:"html5"}),o("convert_urls",{processor:"boolean",default:!0}),o("relative_urls",{processor:"boolean",default:!0}),o("remove_script_host",{processor:"boolean",default:!0}),o("custom_elements",{processor:"string"}),o("extended_valid_elements",{processor:"string"}),o("invalid_elements",{processor:"string"}),o("invalid_styles",{processor:Tf}),o("valid_children",{processor:"string"}),o("valid_classes",{processor:Tf}),o("valid_elements",{processor:"string"}),o("valid_styles",{processor:Tf}),o("verify_html",{processor:"boolean",default:!0}),o("auto_focus",{processor:n=>J(n)||n===!0}),o("browser_spellcheck",{processor:"boolean",default:!1}),o("protect",{processor:"array"}),o("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),o("deprecation_warnings",{processor:"boolean",default:!0}),o("a11y_advanced_options",{processor:"boolean",default:!1}),o("api_key",{processor:"string"}),o("paste_block_drop",{processor:"boolean",default:!1}),o("paste_data_images",{processor:"boolean",default:!0}),o("paste_preprocess",{processor:"function"}),o("paste_postprocess",{processor:"function"}),o("paste_webkit_styles",{processor:"string",default:"none"}),o("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),o("paste_merge_formats",{processor:"boolean",default:!0}),o("smart_paste",{processor:"boolean",default:!0}),o("paste_as_text",{processor:"boolean",default:!1}),o("paste_tab_spaces",{processor:"number",default:4}),o("text_patterns",{processor:n=>Ge(n,qe)||n===!1?{value:_C(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),o("text_patterns_lookup",{processor:n=>te(n)?{value:Gr(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),o("noneditable_class",{processor:"string",default:"mceNonEditable"}),o("editable_class",{processor:"string",default:"mceEditable"}),o("noneditable_regexp",{processor:n=>Ge(n,EC)?{value:n,valid:!0}:EC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),o("table_tab_navigation",{processor:"boolean",default:!0}),o("highlight_on_focus",{processor:"boolean",default:!1}),o("xss_sanitization",{processor:"boolean",default:!0}),o("details_initial_state",{processor:n=>{const s=It(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),o("details_serialized_state",{processor:n=>{const s=It(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),o("init_content_sync",{processor:"boolean",default:!1}),o("newdocument_content",{processor:"string",default:""}),o("force_hex_color",{processor:n=>{const s=["always","rgb_only","off"],i=It(s,n);return i?{value:n,valid:i}:{valid:!1,message:`Must be one of: ${s.join(", ")}.`}},default:"off"}),o("sandbox_iframes",{processor:"boolean",default:!1}),o("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{o("directionality",{processor:"string",default:Dl.isRtl()?"rtl":void 0}),o("placeholder",{processor:"string",default:Fk.getAttrib(e.getElement(),"placeholder")})})},mc=tt("iframe_attrs"),Pb=tt("doctype"),Gi=tt("document_base_url"),Vk=tt("body_id"),OC=tt("body_class"),C0=tt("content_security_policy"),TC=tt("br_in_pre"),Hs=tt("forced_root_block"),cg=tt("forced_root_block_attrs"),Zk=tt("newline_behavior"),DC=tt("br_newline_selector"),Uk=tt("no_newline_selector"),Wk=tt("keep_styles"),$k=tt("end_container_on_empty_block"),MC=tt("automatic_uploads"),AC=tt("images_reuse_filename"),w0=tt("images_replace_blob_uris"),zb=tt("icons"),tm=tt("icons_url"),jk=tt("images_upload_url"),S0=tt("images_upload_base_path"),Gk=tt("images_upload_credentials"),Kk=tt("images_upload_handler"),k0=tt("content_css_cors"),Ar=tt("referrer_policy"),RC=tt("language"),_0=tt("language_url"),BC=tt("indent_use_margin"),dg=tt("indentation"),un=tt("content_css"),NC=tt("content_style"),Xs=tt("font_css"),Fb=tt("directionality"),LC=tt("inline_boundaries_selector"),ug=tt("object_resizing"),Df=tt("resize_img_proportional"),mg=tt("placeholder"),HC=tt("event_root"),Xk=tt("service_message"),Lh=tt("theme"),qk=tt("theme_url"),E0=tt("model"),Vb=tt("model_url"),Mf=tt("inline_boundaries"),Yk=tt("formats"),Qk=tt("preview_styles"),Jk=tt("format_empty_lines"),e3=tt("format_noneditable_selector"),t3=tt("custom_ui_selector"),Zb=tt("inline"),Ub=tt("hidden_input"),Wb=tt("submit_patch"),gg=tt("add_form_submit_trigger"),$b=tt("add_unload_trigger"),IC=tt("custom_undo_redo_levels"),O0=tt("disable_nodechange"),Hh=tt("readonly"),gc=tt("editable_root"),Ih=tt("content_css_cors"),hg=tt("plugins"),jb=tt("external_plugins"),o3=tt("block_unsupported_drop"),Xd=tt("visual"),Gb=tt("visual_table_class"),PC=tt("visual_anchor_class"),qd=tt("iframe_aria_text"),T0=tt("setup"),n3=tt("init_instance_callback"),r3=tt("urlconverter_callback"),s3=tt("auto_focus"),a3=tt("browser_spellcheck"),zC=tt("protect"),i3=tt("paste_block_drop"),D0=tt("paste_data_images"),FC=tt("paste_preprocess"),M0=tt("paste_postprocess"),Kb=tt("newdocument_content"),Xb=tt("paste_webkit_styles"),qb=tt("paste_remove_styles_if_webkit"),VC=tt("paste_merge_formats"),A0=tt("smart_paste"),R0=tt("paste_as_text"),Yb=tt("paste_tab_spaces"),ZC=tt("allow_html_data_urls"),l3=tt("text_patterns"),UC=tt("text_patterns_lookup"),Qb=tt("noneditable_class"),Jb=tt("editable_class"),Af=tt("noneditable_regexp"),c3=tt("preserve_cdata"),d3=tt("highlight_on_focus"),ey=tt("xss_sanitization"),ty=tt("init_content_sync"),u3=e=>e.options.isSet("text_patterns_lookup"),m3=e=>ve.explode(e.options.get("font_size_style_values")),B0=e=>ve.explode(e.options.get("font_size_classes")),g3=e=>e.options.get("encoding")==="xml",WC=e=>ve.explode(e.options.get("images_file_types")),ha=tt("table_tab_navigation"),Ph=tt("details_initial_state"),h3=tt("details_serialized_state"),p3=tt("force_hex_color"),oy=tt("sandbox_iframes"),Rf=pt,$C=Ae,ny=e=>{const o=e.parentNode;o&&o.removeChild(e)},Bf=e=>{const o=jr(e);return{count:e.length-o.length,text:o}},ry=e=>{let o;for(;(o=e.data.lastIndexOf($r))!==-1;)e.deleteData(o,1)},sy=(e,o)=>(Yd(e),o),Nf=(e,o)=>{const n=Bf(e.data.substr(0,o.offset())),s=Bf(e.data.substr(o.offset()));return(n.text+s.text).length>0?(ry(e),Ce(e,o.offset()-n.count)):o},jC=(e,o)=>{const n=o.container(),s=Zp(ps(n.childNodes),e).map(i=>i<o.offset()?Ce(n,o.offset()-1):o).getOr(o);return Yd(e),s},Lf=(e,o)=>$C(e)&&o.container()===e?Nf(e,o):sy(e,o),GC=(e,o)=>o.container()===e.parentNode?jC(e,o):sy(e,o),KC=(e,o)=>Ce.isTextPosition(o)?Lf(e,o):GC(e,o),Yd=e=>{Rf(e)&&ci(e)&&(ch(e)?e.removeAttribute("data-mce-caret"):ny(e)),$C(e)&&(ry(e),e.data.length===0&&ny(e))},Hf=xe,ay=dn,iy=$s,_s="*[contentEditable=false],video,audio,embed,object",XC=(e,o,n)=>{const s=Ml(o.getBoundingClientRect(),n);let i,d;if(e.tagName==="BODY"){const f=e.ownerDocument.documentElement;i=e.scrollLeft||f.scrollLeft,d=e.scrollTop||f.scrollTop}else{const f=e.getBoundingClientRect();i=e.scrollLeft-f.left,d=e.scrollTop-f.top}s.left+=i,s.right+=i,s.top+=d,s.bottom+=d,s.width=1;let g=o.offsetWidth-o.clientWidth;return g>0&&(n&&(g*=-1),s.left+=g,s.right+=g),s},qC=e=>{var o,n;const s=rn(X.fromDom(e),_s);for(let i=0;i<s.length;i++){const d=s[i].dom;let g=d.previousSibling;if(uh(g)){const f=g.data;f.length===1?(o=g.parentNode)===null||o===void 0||o.removeChild(g):g.deleteData(f.length-1,1)}g=d.nextSibling,dh(g)&&(g.data.length===1?(n=g.parentNode)===null||n===void 0||n.removeChild(g):g.deleteData(0,1))}},f3=(e,o,n,s)=>{const i=Ku();let d,g;const f=Hs(e),y=e.dom,k=(P,j)=>{let $;if(D(),iy(j))return null;if(n(j)){const Z=vk(f,j,P),U=XC(o,j,P);y.setStyle(Z,"top",U.top),g=Z;const re=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(re,{...U}),y.add(o,re),i.set({caret:re,element:j,before:P}),P&&y.addClass(re,"mce-visual-caret-before"),L(),$=j.ownerDocument.createRange(),$.setStart(Z,0),$.setEnd(Z,0)}else return g=tb(j,P),$=j.ownerDocument.createRange(),zh(g.nextSibling)?($.setStart(g,0),$.setEnd(g,0)):($.setStart(g,1),$.setEnd(g,1)),$;return $},D=()=>{qC(o),g&&(Yd(g),g=null),i.on(P=>{y.remove(P.caret),i.clear()}),d&&(clearInterval(d),d=void 0)},L=()=>{d=setInterval(()=>{i.on(P=>{s()?y.toggleClass(P.caret,"mce-visual-caret-hidden"):y.addClass(P.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:D,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(P=>{const j=XC(o,P.element,P.before);y.setStyles(P.caret,{...j})})},destroy:()=>clearInterval(d)}},If=()=>ae.browser.isFirefox(),zh=e=>Hf(e)||ay(e),sd=e=>(zh(e)||_a(e)&&If())&&yl(X.fromDom(e)).exists(Er),Fh=Ua,ly=xe,YC=dn,cy=Jp("display","block table table-cell table-caption list-item"),pg=ci,QC=lh,JC=pt,N0=Ae,ew=as,Vh=e=>e>0,om=e=>e<0,nm=(e,o)=>{let n;for(;n=e(o);)if(!QC(n))return n;return null},Qd=(e,o,n,s,i)=>{const d=new br(e,s),g=ly(e)||QC(e);let f;if(om(o)){if(g&&(f=nm(d.prev.bind(d),!0),n(f)))return f;for(;f=nm(d.prev.bind(d),i);)if(n(f))return f}if(Vh(o)){if(g&&(f=nm(d.next.bind(d),!0),n(f)))return f;for(;f=nm(d.next.bind(d),i);)if(n(f))return f}return null},dy=(e,o)=>{const n=i=>Fh(i.dom),s=i=>i.dom===o;return Nn(X.fromDom(e),n,s).map(i=>i.dom).getOr(o)},ad=(e,o)=>{for(;e&&e!==o;){if(cy(e))return e;e=e.parentNode}return null},hc=(e,o,n)=>ad(e.container(),n)===ad(o.container(),n),L0=(e,o)=>{if(!o)return I.none();const n=o.container(),s=o.offset();return JC(n)?I.from(n.childNodes[s+e]):I.none()},uy=(e,o)=>{var n;const s=((n=o.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),s},Pf=(e,o,n)=>ad(o,e)===ad(n,e),my=(e,o,n)=>{const s=e?"previousSibling":"nextSibling";let i=n;for(;i&&i!==o;){let d=i[s];if(d&&pg(d)&&(d=d[s]),ly(d)||YC(d)){if(Pf(o,d,i))return d;break}if(ew(d))break;i=i.parentNode}return null},Zh=Le(uy,!0),pc=Le(uy,!1),gy=(e,o,n)=>{let s;const i=Le(my,!0,o),d=Le(my,!1,o),g=n.startContainer,f=n.startOffset;if(lh(g)){const y=N0(g)?g.parentNode:g,k=y.getAttribute("data-mce-caret");if(k==="before"&&(s=y.nextSibling,sd(s)))return Zh(s);if(k==="after"&&(s=y.previousSibling,sd(s)))return pc(s)}if(!n.collapsed)return n;if(Ae(g)){if(pg(g)){if(e===1){if(s=d(g),s)return Zh(s);if(s=i(g),s)return pc(s)}if(e===-1){if(s=i(g),s)return pc(s);if(s=d(g),s)return Zh(s)}return n}if(uh(g)&&f>=g.data.length-1)return e===1&&(s=d(g),s)?Zh(s):n;if(dh(g)&&f<=1)return e===-1&&(s=i(g),s)?pc(s):n;if(f===g.data.length)return s=d(g),s?Zh(s):n;if(f===0)return s=i(g),s?pc(s):n}return n},tw=(e,o)=>L0(e?0:-1,o).filter(ly),zf=(e,o,n)=>{const s=gy(e,o,n);return e===-1?Ce.fromRangeStart(s):Ce.fromRangeEnd(s)},Uh=e=>I.from(e.getNode()).map(X.fromDom),hy=e=>I.from(e.getNode(!0)).map(X.fromDom),py=(e,o)=>{let n=o;for(;n=e(n);)if(n.isVisible())return n;return n},H0=(e,o)=>{const n=hc(e,o);return!n&&Co(e.getNode())?!0:n};var ms;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ms||(ms={}));const v3=xe,id=Ae,Wh=pt,$h=Co,fg=as,Is=Qm,jh=Vu,Ff=(e,o)=>{const n=[];let s=e;for(;s&&s!==o;)n.push(s),s=s.parentNode;return n},Jd=(e,o)=>e.hasChildNodes()&&o<e.childNodes.length?e.childNodes[o]:null,I0=(e,o)=>{if(Vh(e)){if(fg(o.previousSibling)&&!id(o.previousSibling))return Ce.before(o);if(id(o))return Ce(o,0)}if(om(e)){if(fg(o.nextSibling)&&!id(o.nextSibling))return Ce.after(o);if(id(o))return Ce(o,o.data.length)}return om(e)?$h(o)?Ce.before(o):Ce.after(o):Ce.before(o)},P0=(e,o)=>{const n=o.nextSibling;return n&&fg(n)?id(n)?Ce(n,0):Ce.before(n):Vf(ms.Forwards,Ce.after(o),e)},Vf=(e,o,n)=>{let s,i,d,g;if(!Wh(n)||!o)return null;if(o.isEqual(Ce.after(n))&&n.lastChild){if(g=Ce.after(n.lastChild),om(e)&&fg(n.lastChild)&&Wh(n.lastChild))return $h(n.lastChild)?Ce.before(n.lastChild):g}else g=o;const f=g.container();let y=g.offset();if(id(f)){if(om(e)&&y>0)return Ce(f,--y);if(Vh(e)&&y<f.length)return Ce(f,++y);s=f}else{if(om(e)&&y>0&&(i=Jd(f,y-1),fg(i)))return!Is(i)&&(d=Qd(i,e,jh,i),d)?id(d)?Ce(d,d.data.length):Ce.after(d):id(i)?Ce(i,i.data.length):Ce.before(i);if(Vh(e)&&y<f.childNodes.length&&(i=Jd(f,y),fg(i)))return $h(i)?P0(n,i):!Is(i)&&(d=Qd(i,e,jh,i),d)?id(d)?Ce(d,0):Ce.before(d):id(i)?Ce(i,0):Ce.after(i);s=i||g.getNode()}if(s&&(Vh(e)&&g.isAtEnd()||om(e)&&g.isAtStart())&&(s=Qd(s,e,at,n,!0),jh(s,n)))return I0(e,s);i=s&&Qd(s,e,jh,n);const k=Ei(Et(Ff(f,n),v3));return k&&(!i||!k.contains(i))?(Vh(e)?g=Ce.after(k):g=Ce.before(k),g):i?I0(e,i):null},Ba=e=>({next:o=>Vf(ms.Forwards,o,e),prev:o=>Vf(ms.Backwards,o,e)}),b3=(e,o,n)=>{const s=e?Ce.before(n):Ce.after(n);return Ga(e,o,s)},rm=e=>Co(e)?Ce.before(e):Ce.after(e),sm=e=>Ce.isTextPosition(e)?e.offset()===0:as(e.getNode()),z0=e=>{if(Ce.isTextPosition(e)){const o=e.container();return e.offset()===o.data.length}else return as(e.getNode(!0))},fy=(e,o)=>!Ce.isTextPosition(e)&&!Ce.isTextPosition(o)&&e.getNode()===o.getNode(!0),eu=e=>!Ce.isTextPosition(e)&&Co(e.getNode()),ow=(e,o,n)=>e?!fy(o,n)&&!eu(o)&&z0(o)&&sm(n):!fy(n,o)&&sm(o)&&z0(n),Ga=(e,o,n)=>{const s=Ba(o);return I.from(e?s.next(n):s.prev(n))},tu=(e,o,n)=>Ga(e,o,n).bind(s=>hc(n,s,o)&&ow(e,n,s)?Ga(e,o,s):I.some(s)),Zf=(e,o,n,s)=>tu(e,o,n).bind(i=>s(i)?Zf(e,o,i,s):I.some(i)),Gh=(e,o)=>{const n=e?o.firstChild:o.lastChild;return Ae(n)?I.some(Ce(n,e?0:n.data.length)):n?as(n)?I.some(e?Ce.before(n):rm(n)):b3(e,o,n):I.none()},qs=Le(Ga,!0),Ys=Le(Ga,!1),Qs=Le(Gh,!0),Rl=Le(Gh,!1),Kh="_mce_caret",Ka=e=>pt(e)&&e.id===Kh,am=(e,o)=>{let n=o;for(;n&&n!==e;){if(Ka(n))return n;n=n.parentNode}return null},y3=e=>J(e.start),x3=e=>At(e,"rng"),C3=e=>At(e,"id"),F0=e=>At(e,"name"),vy=e=>ve.isArray(e.start),Uf=e=>!F0(e)&&so(e.forward)?e.forward:!0,nw=(e,o)=>(pt(o)&&e.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),rw=(e,o)=>{const n=I.from(Mb(e.getRoot(),o.start)),s=I.from(Mb(e.getRoot(),o.end));return Qn(n,s,(i,d)=>{const g=e.createRng();return g.setStart(i.container(),i.offset()),g.setEnd(d.container(),d.offset()),{range:g,forward:Uf(o)}})},by=(e,o)=>{var n;const s=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode($r);e.appendChild(s),o.setStart(s,0),o.setEnd(s,0)},w3=e=>!e.hasChildNodes(),lo=(e,o)=>Rl(e).fold(Ie,n=>(o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),!0)),ld=(e,o,n)=>w3(o)&&am(e,o)?(by(o,n),!0):!1,vg=(e,o,n,s)=>{const i=n[o?"start":"end"],d=e.getRoot();if(i){let g=d,f=i[0];for(let y=i.length-1;g&&y>=1;y--){const k=g.childNodes;if(ld(d,g,s))return!0;if(i[y]>k.length-1)return ld(d,g,s)?!0:lo(g,s);g=k[i[y]]}Ae(g)&&(f=Math.min(i[0],g.data.length)),pt(g)&&(f=Math.min(i[0],g.childNodes.length)),o?s.setStart(g,f):s.setEnd(g,f)}return!0},Wf=e=>Ae(e)&&e.data.length>0,yy=(e,o,n)=>{const s=e.get(n.id+"_"+o),i=s==null?void 0:s.parentNode,d=n.keep;if(s&&i){let g,f;if(o==="start"?d?s.hasChildNodes()?(g=s.firstChild,f=1):Wf(s.nextSibling)?(g=s.nextSibling,f=0):Wf(s.previousSibling)?(g=s.previousSibling,f=s.previousSibling.data.length):(g=i,f=e.nodeIndex(s)+1):(g=i,f=e.nodeIndex(s)):d?s.hasChildNodes()?(g=s.firstChild,f=1):Wf(s.previousSibling)?(g=s.previousSibling,f=s.previousSibling.data.length):(g=i,f=e.nodeIndex(s)):(g=i,f=e.nodeIndex(s)),!d){const y=s.previousSibling,k=s.nextSibling;ve.each(ve.grep(s.childNodes),L=>{Ae(L)&&(L.data=L.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(n.id+"_"+o);)e.remove(D,!0);if(Ae(k)&&Ae(y)&&!ae.browser.isOpera()){const L=y.data.length;y.appendData(k.data),e.remove(k),g=y,f=L}}return I.some(Ce(g,f))}else return I.none()},V0=(e,o)=>{const n=e.createRng();return vg(e,!0,o,n)&&vg(e,!1,o,n)?I.some({range:n,forward:Uf(o)}):I.none()},Xh=(e,o)=>{const n=yy(e,"start",o),s=yy(e,"end",o);return Qn(n,s.or(n),(i,d)=>{const g=e.createRng();return g.setStart(nw(e,i.container()),i.offset()),g.setEnd(nw(e,d.container()),d.offset()),{range:g,forward:Uf(o)}})},$f=(e,o)=>I.from(e.select(o.name)[o.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),qh=(e,o)=>{const n=e.dom;if(o){if(vy(o))return V0(n,o);if(y3(o))return rw(n,o);if(C3(o))return Xh(n,o);if(F0(o))return $f(n,o);if(x3(o))return I.some({range:o.rng,forward:Uf(o)})}return I.none()},bg=(e,o,n)=>Bb(e,o,n),S3=(e,o)=>{qh(e,o).each(({range:n,forward:s})=>{e.setRng(n,s)})},Ki=e=>pt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",jf=(e=>o=>e===o)(jn),Yh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,yg=e=>!Yh(e)&&!jf(e)&&!$1(e),xy=e=>{const o=[];if(e)for(let n=0;n<e.rangeCount;n++)o.push(e.getRangeAt(n));return o},sw=e=>Ds(e,o=>{const n=wf(o);return n?[X.fromDom(n)]:[]}),k3=e=>xy(e).length>1,_3=e=>Et(sw(e),cc),E3=e=>rn(e,"td[data-mce-selected],th[data-mce-selected]"),aw=(e,o)=>{const n=E3(o);return n.length>0?n:_3(e)},Qh=e=>aw(xy(e.selection.getSel()),X.fromDom(e.getBody())),cd=(e,o)=>Um(e,"table",o),O3=e=>{const o=e.startContainer,n=e.startOffset;return Ae(o)?n===0?I.some(X.fromDom(o)):I.none():I.from(o.childNodes[n]).map(X.fromDom)},T3=e=>{const o=e.endContainer,n=e.endOffset;return Ae(o)?n===o.data.length?I.some(X.fromDom(o)):I.none():I.from(o.childNodes[n-1]).map(X.fromDom)},iw=e=>Ru(e).fold(Pe([e]),o=>[e].concat(iw(o))),Cy=e=>Fm(e).fold(Pe([e]),o=>po(o)==="br"?Wc(o).map(n=>[e].concat(Cy(n))).getOr([]):[e].concat(Cy(o))),Jh=(e,o)=>Qn(O3(o),T3(o),(n,s)=>{const i=On(iw(e),Le(yo,n)),d=On(Cy(e),Le(yo,s));return i.isSome()&&d.isSome()}).getOr(!1),wy=(e,o,n,s)=>{const i=n,d=new br(n,i),g=Uo(e.schema.getMoveCaretBeforeOnEnterElements(),(y,k)=>!It(["td","th","table"],k.toLowerCase()));let f=n;do{if(Ae(f)&&ve.trim(f.data).length!==0){s?o.setStart(f,0):o.setEnd(f,f.data.length);return}if(g[f.nodeName]){s?o.setStartBefore(f):f.nodeName==="BR"?o.setEndBefore(f):o.setEndAfter(f);return}}while(f=s?d.next():d.prev());i.nodeName==="BODY"&&(s?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},Z0=e=>{const o=e.selection.getSel();return Oe(o)&&o.rangeCount>0},Sy=(e,o)=>{const n=Qh(e);n.length>0?me(n,s=>{const i=s.dom,d=e.dom.createRng();d.setStartBefore(i),d.setEndAfter(i),o(d,!0)}):o(e.selection.getRng(),!1)},nt=(e,o,n)=>{const s=Bh(e,o);n(s),e.moveToBookmark(s)},In=e=>nr(e==null?void 0:e.nodeType),xg=e=>pt(e)&&!Ki(e)&&!Ka(e)&&!Fi(e),Rr=(e,o)=>{if(xg(o)&&!/^(TD|TH)$/.test(o.nodeName)){const n=e.getAttrib(o,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},Xi=(e,o,n)=>{const{selection:s,dom:i}=e,d=s.getNode(),g=xe(d);nt(s,!0,()=>{o()}),g&&xe(d)&&i.isChildOf(d,e.getBody())?e.selection.select(d):n(s.getStart())&&ky(i,s)},ky=(e,o)=>{var n,s;const i=o.getRng(),{startContainer:d,startOffset:g}=i,f=o.getNode();if(!Rr(e,f)&&pt(d)){const y=d.childNodes,k=e.getRoot();let D;if(g<y.length){const L=y[g];D=new br(L,(n=e.getParent(L,e.isBlock))!==null&&n!==void 0?n:k)}else{const L=y[y.length-1];D=new br(L,(s=e.getParent(L,e.isBlock))!==null&&s!==void 0?s:k),D.next(!0)}for(let L=D.current();L;L=D.next()){if(e.getContentEditable(L)==="false")return;if(Ae(L)&&!_y(L)){i.setStart(L,0),o.setRng(i);return}}}},ep=(e,o,n)=>{if(e){const s=o?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(pt(e)||!_y(e))return e}},tp=(e,o)=>!!e.getTextBlockElements()[o.nodeName.toLowerCase()]||ng(e,o),Cg=(e,o,n)=>e.schema.isValidChild(o,n),_y=(e,o=!1)=>{if(Oe(e)&&Ae(e)){const n=o?e.data.replace(/ /g," "):e.data;return di(n)}else return!1},Ey=e=>Oe(e)&&Ae(e)&&e.length===0,D3=(e,o)=>{const n="[data-mce-cef-wrappable]",s=e3(e),i=Yl(s)?n:`${n},${s}`;return Za(X.fromDom(o),i)},Oy=(e,o)=>{const n=e.dom;return xg(o)&&n.getContentEditable(o)==="false"&&D3(e,o)&&n.select('[contenteditable="true"]',o).length===0},im=(e,o)=>te(e)?e(o):(Oe(o)&&(e=e.replace(/%(\w+)/g,(n,s)=>o[s]||n)),e),U0=(e,o)=>(e=e||"",o=o||"",e=""+(e.nodeName||e),o=""+(o.nodeName||o),e.toLowerCase()===o.toLowerCase()),Ty=(e,o)=>{if(io(e))return null;{let n=String(e);return(o==="color"||o==="backgroundColor")&&(n=vf(n)),o==="fontWeight"&&e===700&&(n="bold"),o==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},wg=(e,o,n)=>{const s=e.getStyle(o,n);return Ty(s,n)},dd=(e,o)=>{let n;return e.getParent(o,s=>pt(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Sg=(e,o,n)=>e.getParents(o,n,e.getRoot()),op=(e,o,n)=>{const s=e.formatter.get(o);return Oe(s)&&nn(s,n)},np=(e,o)=>op(e,o,n=>{const s=i=>te(i)||i.length>1&&i.charAt(0)==="%";return nn(["styles","attributes"],i=>Go(n,i).exists(d=>{const g=Oo(d)?d:Gl(d);return nn(g,s)}))}),Dy=(e,o,n)=>{const s=["inline","block","selector","attributes","styles","classes"],i=d=>Uo(d,(g,f)=>nn(s,y=>y===f));return op(e,o,d=>{const g=i(d);return op(e,n,f=>{const y=i(f);return pl(g,y)})})},ud=e=>Jr(e,"block"),rp=e=>ud(e)&&e.wrapper===!0,W0=e=>ud(e)&&e.wrapper!==!0,qi=e=>Jr(e,"selector"),dr=e=>Jr(e,"inline"),M3=e=>qi(e)&&dr(e)&&Rs(Go(e,"mixed"),!0),My=e=>qi(e)&&e.expand!==!1&&!dr(e),lw=e=>{const o=[];let n=e;for(;n;){if(Ae(n)&&n.data!==$r||n.childNodes.length>1)return[];pt(n)&&o.push(n),n=n.firstChild}return o},fc=e=>lw(e).length>0,Ay=e=>Ka(e.dom)&&fc(e.dom),ou=Ki,Kr=Sg,Yi=_y,Qi=tp,$0=e=>Co(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,j0=(e,o)=>{let n=o;for(;n;){if(pt(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:o;n=n.parentNode}return o},cw=(e,o,n,s)=>{const i=o.data;if(e){for(let d=n;d>0;d--)if(s(i.charAt(d-1)))return d}else for(let d=n;d<i.length;d++)if(s(i.charAt(d)))return d;return-1},Ry=(e,o,n)=>cw(e,o,n,s=>jf(s)||Yh(s)),A3=(e,o,n)=>cw(e,o,n,yg),G0=(e,o,n,s,i,d)=>{let g;const f=e.getParent(n,e.isBlock)||o,y=(k,D,L)=>{const P=pi(e),j=i?P.backwards:P.forwards;return I.from(j(k,D,($,Z)=>ou($.parentNode)?-1:(g=$,L(i,$,Z)),f))};return y(n,s,Ry).bind(k=>d?y(k.container,k.offset+(i?-1:0),A3):I.some(k)).orThunk(()=>g?I.some({container:g,offset:i?0:g.length}):I.none())},dw=(e,o,n,s,i)=>{const d=s[i];Ae(s)&&Yl(s.data)&&d&&(s=d);const g=Kr(e,s);for(let f=0;f<g.length;f++)for(let y=0;y<o.length;y++){const k=o[y];if(!(Oe(k.collapsed)&&k.collapsed!==n.collapsed)&&qi(k)&&e.is(g[f],k.selector))return g[f]}return s},K0=(e,o,n,s)=>{var i;let d=n;const g=e.getRoot(),f=o[0];if(ud(f)&&(d=f.wrapper?null:e.getParent(n,f.block,g)),!d){const y=(i=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:g;d=e.getParent(Ae(n)?n.parentNode:n,k=>k!==g&&Qi(e.schema,k),y)}if(d&&ud(f)&&f.wrapper&&(d=Kr(e,d,"ul,ol").reverse()[0]||d),!d)for(d=n;d&&d[s]&&!e.isBlock(d[s])&&(d=d[s],!U0(d,"br")););return d||n},By=(e,o,n,s)=>{const i=n.parentNode;return Oe(n[s])?!1:i===o||io(i)||e.isBlock(i)?!0:By(e,o,i,s)},Gf=(e,o,n,s,i)=>{let d=n;const g=i?"previousSibling":"nextSibling",f=e.getRoot();if(Ae(n)&&!Yi(n)&&(i?s>0:s<n.data.length))return n;for(;d;){if(!o[0].block_expand&&e.isBlock(d))return d;for(let y=d[g];y;y=y[g]){const k=Ae(y)&&!By(e,f,y,g);if(!ou(y)&&!$0(y)&&!Yi(y,k))return d}if(d===f||d.parentNode===f){n=d;break}d=d.parentNode}return n},X0=e=>ou(e.parentNode)||ou(e),md=(e,o,n,s=!1)=>{let{startContainer:i,startOffset:d,endContainer:g,endOffset:f}=o;const y=n[0];return pt(i)&&i.hasChildNodes()&&(i=fi(i,d),Ae(i)&&(d=0)),pt(g)&&g.hasChildNodes()&&(g=fi(g,o.collapsed?f:f-1),Ae(g)&&(f=g.data.length)),i=j0(e,i),g=j0(e,g),X0(i)&&(i=ou(i)?i:i.parentNode,o.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,Ae(i)&&(d=o.collapsed?i.length:0)),X0(g)&&(g=ou(g)?g:g.parentNode,o.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,Ae(g)&&(f=o.collapsed?0:g.length)),o.collapsed&&(G0(e,e.getRoot(),i,d,!0,s).each(({container:k,offset:D})=>{i=k,d=D}),G0(e,e.getRoot(),g,f,!1,s).each(({container:k,offset:D})=>{g=k,f=D})),(dr(y)||y.block_expand)&&((!dr(y)||!Ae(i)||d===0)&&(i=Gf(e,n,i,d,!0)),(!dr(y)||!Ae(g)||f===g.data.length)&&(g=Gf(e,n,g,f,!1))),My(y)&&(i=dw(e,n,o,i,"previousSibling"),g=dw(e,n,o,g,"nextSibling")),(ud(y)||qi(y))&&(i=K0(e,n,i,"previousSibling"),g=K0(e,n,g,"nextSibling"),ud(y)&&(e.isBlock(i)||(i=Gf(e,n,i,d,!0)),e.isBlock(g)||(g=Gf(e,n,g,f,!1)))),pt(i)&&i.parentNode&&(d=e.nodeIndex(i),i=i.parentNode),pt(g)&&g.parentNode&&(f=e.nodeIndex(g)+1,g=g.parentNode),{startContainer:i,startOffset:d,endContainer:g,endOffset:f}},Lo=(e,o,n)=>{var s;const i=o.startOffset,d=fi(o.startContainer,i),g=o.endOffset,f=fi(o.endContainer,g-1),y=U=>{const re=U[0];Ae(re)&&re===d&&i>=re.data.length&&U.splice(0,1);const ie=U[U.length-1];return g===0&&U.length>0&&ie===f&&Ae(ie)&&U.splice(U.length-1,1),U},k=(U,re,ie)=>{const pe=[];for(;U&&U!==ie;U=U[re])pe.push(U);return pe},D=(U,re)=>e.getParent(U,ie=>ie.parentNode===re,re),L=(U,re,ie)=>{const pe=ie?"nextSibling":"previousSibling";for(let Se=U,je=Se.parentNode;Se&&Se!==re;Se=je){je=Se.parentNode;const Ye=k(Se===U?Se:Se[pe],pe);Ye.length&&(ie||Ye.reverse(),n(y(Ye)))}};if(d===f)return n(y([d]));const P=(s=e.findCommonAncestor(d,f))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(d,f))return L(d,P,!0);if(e.isChildOf(f,d))return L(f,P);const j=D(d,P)||d,$=D(f,P)||f;L(d,j,!0);const Z=k(j===d?j:j.nextSibling,"nextSibling",$===f?$.nextSibling:$);Z.length&&n(y(Z)),L(f,$)},lm=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],uw=e=>No(e)&&Vi(e)===$r,mw=(e,o,n,s)=>vs(o).fold(()=>"skipping",i=>s==="br"||uw(o)?"valid":Rk(o)?"existing":Ka(o.dom)?"caret":nn(lm,d=>Za(o,d))?"valid-block":!Cg(e,n,s)||!Cg(e,po(i),n)?"invalid-child":"valid"),gw=(e,o)=>{const n=md(e.dom,o,[{inline:"span"}]);o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),e.selection.setRng(o)},nu=(e,o,n,s,i,d)=>{const{uid:g=o,...f}=n;Uc(e,Sh()),Dn(e,`${Ud()}`,g),Dn(e,`${Xu()}`,s);const{attributes:y={},classes:k=[]}=i(g,f);if(Ai(e,y),Cs(e,k),d){k.length>0&&Dn(e,`${kh()}`,k.join(","));const D=Cr(y);D.length>0&&Dn(e,`${_h()}`,D.join(","))}},sp=e=>{Tu(e,Sh()),kr(e,`${Ud()}`),kr(e,`${Xu()}`),kr(e,`${Cf()}`);const o=Ri(e,`${_h()}`).map(s=>s.split(",")).getOr([]),n=Ri(e,`${kh()}`).map(s=>s.split(",")).getOr([]);me(o,s=>kr(e,s)),ji(e,n),kr(e,`${kh()}`),kr(e,`${_h()}`)},ap=(e,o,n,s,i)=>{const d=X.fromTag("span",e);return nu(d,o,n,s,i,!1),d},R3=(e,o,n,s,i,d)=>{const g=[],f=ap(e.getDoc(),n,d,s,i),y=Ku(),k=()=>{y.clear()},D=()=>y.get().getOrThunk(()=>{const $=Yu(f);return g.push($),y.set($),$}),L=$=>{me($,P)},P=$=>{switch(mw(e,$,"span",po($))){case"invalid-child":{k();const Z=Vr($);L(Z),k();break}case"valid-block":{k(),nu($,n,d,s,i,!0);break}case"valid":{const Z=D();Xp($,Z);break}}},j=$=>{const Z=Bt($,X.fromDom);L(Z)};return Lo(e.dom,o,$=>{k(),j($)}),g},Bl=(e,o,n,s)=>{e.undoManager.transact(()=>{const i=e.selection,d=i.getRng(),g=Qh(e).length>0,f=qu("mce-annotation");if(d.collapsed&&!g&&gw(e,d),i.getRng().collapsed&&!g){const y=ap(e.getDoc(),f,s,o,n.decorate);Hu(y,jn),i.getRng().insertNode(y.dom),i.select(y.dom)}else nt(i,!1,()=>{Sy(e,y=>{R3(e,y,f,o,n.decorate,s)})})})},ru=e=>{const o=mC();uC(e,o);const n=tr(e,o),s=Bm("span"),i=d=>{me(d,g=>{s(g)?qt(g):sp(g)})};return{register:(d,g)=>{o.register(d,g)},annotate:(d,g)=>{o.lookup(d).each(f=>{Bl(e,d,f,g)})},annotationChanged:(d,g)=>{n.addListener(d,g)},remove:d=>{lC(e,I.some(d)).each(({elements:g})=>{const f=e.selection.getBookmark();i(g),e.selection.moveToBookmark(f)})},removeAll:d=>{const g=e.selection.getBookmark();ot(dC(e,d),(f,y)=>{i(f)}),e.selection.moveToBookmark(g)},getAll:d=>{const g=dC(e,d);return bo(g,f=>Bt(f,y=>y.dom))}}},Kf=e=>({getBookmark:Le(bg,e),moveToBookmark:Le(S3,e)});Kf.isBookmarkNode=Ki;const cm=(e,o,n)=>n.collapsed?!1:nn(n.getClientRects(),s=>$d(s,e,o)),B3=(e,o)=>e.dispatch("PreProcess",o),hw=(e,o)=>e.dispatch("PostProcess",o),N3=e=>{e.dispatch("remove")},L3=e=>{e.dispatch("detach")},H3=(e,o)=>{e.dispatch("SwitchMode",{mode:o})},vi=(e,o,n,s,i)=>{e.dispatch("ObjectResizeStart",{target:o,width:n,height:s,origin:i})},Js=(e,o,n,s,i)=>{e.dispatch("ObjectResized",{target:o,width:n,height:s,origin:i})},ip=e=>{e.dispatch("PreInit")},Ny=e=>{e.dispatch("PostRender")},I3=e=>{e.dispatch("Init")},go=(e,o)=>{e.dispatch("PlaceholderToggle",{state:o})},pw=(e,o,n)=>{e.dispatch(o,n)},Ly=(e,o,n,s)=>{e.dispatch("FormatApply",{format:o,node:n,vars:s})},q0=(e,o,n,s)=>{e.dispatch("FormatRemove",{format:o,node:n,vars:s})},P3=(e,o)=>e.dispatch("BeforeSetContent",o),fw=(e,o)=>e.dispatch("SetContent",o),vw=(e,o)=>e.dispatch("BeforeGetContent",o),Hy=(e,o)=>e.dispatch("GetContent",o),z3=(e,o)=>{e.dispatch("AutocompleterStart",o)},F3=(e,o)=>{e.dispatch("AutocompleterUpdate",o)},Iy=e=>{e.dispatch("AutocompleterEnd")},lp=(e,o,n)=>e.dispatch("PastePreProcess",{content:o,internal:n}),bw=(e,o,n)=>e.dispatch("PastePostProcess",{node:o,internal:n}),yw=(e,o)=>e.dispatch("PastePlainTextToggle",{state:o}),V3=(e,o)=>e.dispatch("EditableRootStateChange",{state:o}),ht={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ht.metaKeyPressed(e),metaKeyPressed:e=>ae.os.isMacOS()||ae.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},wt="data-mce-selected",Py="table,img,figure.image,hr,video,span.mce-preview-object,details",zy=Math.abs,Xf=Math.round,kg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Z3=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Y0=(e,o)=>{const n=o.dom,s=o.getDoc(),i=document,d=o.getBody();let g,f,y,k,D,L,P,j,$,Z,U,re,ie,pe,Se,je,Ye;const Ve=He=>Oe(He)&&(Ns(He)||n.is(He,"figure.image")),Me=He=>dn(He)||n.hasClass(He,"mce-preview-object"),we=(He,yt)=>{if(Z3(He)){const Vt=He.touches[0];return Ve(He.target)&&!cm(Vt.clientX,Vt.clientY,yt)}else return Ve(He.target)&&!cm(He.clientX,He.clientY,yt)},ze=He=>{const yt=He.target;we(He,o.selection.getRng())&&!He.isDefaultPrevented()&&o.selection.select(yt)},lt=He=>n.hasClass(He,"mce-preview-object")&&Oe(He.firstElementChild)?[He,He.firstElementChild]:n.is(He,"figure.image")?[He.querySelector("img")]:[He],ye=He=>{const yt=ug(o);return!yt||He.getAttribute("data-mce-resize")==="false"||He===o.getBody()?!1:n.hasClass(He,"mce-preview-object")&&Oe(He.firstElementChild)?Za(X.fromDom(He.firstElementChild),yt):Za(X.fromDom(He),yt)},rt=He=>Me(He)?n.create("img",{src:ae.transparentSrc}):He.cloneNode(!0),vt=(He,yt,Vt)=>{if(Oe(Vt)){const mn=lt(He);me(mn,co=>{co.style[yt]||!o.schema.isValid(co.nodeName.toLowerCase(),yt)?n.setStyle(co,yt,Vt):n.setAttrib(co,yt,""+Vt)})}},to=(He,yt,Vt)=>{vt(He,"width",yt),vt(He,"height",Vt)},So=He=>{let yt,Vt,mn,co,ya;yt=He.screenX-L,Vt=He.screenY-P,pe=yt*k[2]+Z,Se=Vt*k[3]+U,pe=pe<5?5:pe,Se=Se<5?5:Se,(Ve(g)||Me(g))&&Df(o)!==!1?mn=!ht.modifierPressed(He):mn=ht.modifierPressed(He),mn&&(zy(yt)>zy(Vt)?(Se=Xf(pe*re),pe=Xf(Se/re)):(pe=Xf(Se/re),Se=Xf(pe*re))),to(f,pe,Se),co=k.startPos.x+yt,ya=k.startPos.y+Vt,co=co>0?co:0,ya=ya>0?ya:0,n.setStyles(y,{left:co,top:ya,display:"block"}),y.innerHTML=pe+" &times; "+Se,k[2]<0&&f.clientWidth<=pe&&n.setStyle(f,"left",j+(Z-pe)),k[3]<0&&f.clientHeight<=Se&&n.setStyle(f,"top",$+(U-Se)),yt=d.scrollWidth-je,Vt=d.scrollHeight-Ye,yt+Vt!==0&&n.setStyles(y,{left:co-yt,top:ya-Vt}),ie||(vi(o,g,Z,U,"corner-"+k.name),ie=!0)},zs=()=>{const He=ie;ie=!1,He&&(vt(g,"width",pe),vt(g,"height",Se)),n.unbind(s,"mousemove",So),n.unbind(s,"mouseup",zs),i!==s&&(n.unbind(i,"mousemove",So),n.unbind(i,"mouseup",zs)),n.remove(f),n.remove(y),n.remove(D),Ja(g),He&&(Js(o,g,pe,Se,"corner-"+k.name),n.setAttrib(g,"style",n.getAttrib(g,"style"))),o.nodeChanged()},Ja=He=>{Gn();const yt=n.getPos(He,d),Vt=yt.x,mn=yt.y,co=He.getBoundingClientRect(),ya=co.width||co.right-co.left,bu=co.height||co.bottom-co.top;g!==He&&(xi(),g=He,pe=Se=0);const Mc=o.dispatch("ObjectSelected",{target:He});ye(He)&&!Mc.isDefaultPrevented()?ot(kg,(ll,Ci)=>{const t=a=>{const l=lt(g)[0];L=a.screenX,P=a.screenY,Z=l.clientWidth,U=l.clientHeight,re=U/Z,k=ll,k.name=Ci,k.startPos={x:ya*ll[0]+Vt,y:bu*ll[1]+mn},je=d.scrollWidth,Ye=d.scrollHeight,D=n.add(d,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),f=rt(g),n.addClass(f,"mce-clonedresizable"),n.setAttrib(f,"data-mce-bogus","all"),f.contentEditable="false",n.setStyles(f,{left:Vt,top:mn,margin:0}),to(f,ya,bu),f.removeAttribute(wt),d.appendChild(f),n.bind(s,"mousemove",So),n.bind(s,"mouseup",zs),i!==s&&(n.bind(i,"mousemove",So),n.bind(i,"mouseup",zs)),y=n.add(d,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Z+" &times; "+U)};let r=n.get("mceResizeHandle"+Ci);r&&n.remove(r),r=n.add(d,"div",{id:"mceResizeHandle"+Ci,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ci+"-resize; margin:0; padding:0"}),n.bind(r,"mousedown",a=>{a.stopImmediatePropagation(),a.preventDefault(),t(a)}),ll.elm=r,n.setStyles(r,{left:ya*ll[0]+Vt-r.offsetWidth/2,top:bu*ll[1]+mn-r.offsetHeight/2})}):xi(!1)},ta=xf(Ja,0),xi=(He=!0)=>{ta.cancel(),Gn(),g&&He&&g.removeAttribute(wt),ot(kg,(yt,Vt)=>{const mn=n.get("mceResizeHandle"+Vt);mn&&(n.unbind(mn),n.remove(mn))})},Fo=(He,yt)=>n.isChildOf(He,yt),Dc=He=>{if(ie||o.removed||o.composing)return;const yt=He.type==="mousedown"?He.target:e.getNode(),Vt=Li(X.fromDom(yt),Py).map(co=>co.dom).filter(co=>n.isEditable(co.parentElement)||co.nodeName==="IMG"&&n.isEditable(co)).getOrUndefined(),mn=Oe(Vt)?n.getAttrib(Vt,wt,"1"):"1";if(me(n.select(`img[${wt}],hr[${wt}]`),co=>{co.removeAttribute(wt)}),Oe(Vt)&&Fo(Vt,d)&&o.hasFocus()){Rt();const co=e.getStart(!0);if(Fo(co,Vt)&&Fo(e.getEnd(!0),Vt)){n.setAttrib(Vt,wt,mn),ta.throttle(Vt);return}}xi()},Gn=()=>{ot(kg,He=>{He.elm&&(n.unbind(He.elm),delete He.elm)})},Rt=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{Rt(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Dc),o.on("keyup compositionend",He=>{g&&g.nodeName==="TABLE"&&Dc(He)}),o.on("hide blur",xi),o.on("contextmenu longpress",ze,!0)}),o.on("remove",Gn),{isResizable:ye,showResizeRect:Ja,hideResizeRect:xi,updateResizeRect:Dc,destroy:()=>{ta.cancel(),g=f=D=null}}},xw=(e,o)=>{o.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},U3=(e,o)=>{o.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},Q0=(e,o,n)=>{const s=e.document.createRange();return xw(s,o),U3(s,n),s},Fy=(e,o,n,s,i)=>{const d=e.document.createRange();return d.setStart(o.dom,n),d.setEnd(s.dom,i),d},_g=nd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),J0=(e,o,n)=>o(X.fromDom(n.startContainer),n.startOffset,X.fromDom(n.endContainer),n.endOffset),Cw=(e,o)=>o.match({domRange:n=>({ltr:Pe(n),rtl:I.none}),relative:(n,s)=>({ltr:os(()=>Q0(e,n,s)),rtl:os(()=>I.some(Q0(e,s,n)))}),exact:(n,s,i,d)=>({ltr:os(()=>Fy(e,n,s,i,d)),rtl:os(()=>I.some(Fy(e,i,d,n,s)))})}),ww=(e,o)=>{const n=o.ltr();return n.collapsed?o.rtl().filter(s=>s.collapsed===!1).map(s=>_g.rtl(X.fromDom(s.endContainer),s.endOffset,X.fromDom(s.startContainer),s.startOffset)).getOrThunk(()=>J0(e,_g.ltr,n)):J0(e,_g.ltr,n)},W3=(e,o)=>{const n=Cw(e,o);return ww(e,n)};_g.ltr,_g.rtl;const Sw={create:(e,o,n,s)=>({start:e,soffset:o,finish:n,foffset:s})},kw=(e,o,n)=>{var s,i;return I.from((i=(s=e.dom).caretPositionFromPoint)===null||i===void 0?void 0:i.call(s,o,n)).bind(d=>{if(d.offsetNode===null)return I.none();const g=e.dom.createRange();return g.setStart(d.offsetNode,d.offset),g.collapse(),I.some(g)})},$3=(e,o,n)=>{var s,i;return I.from((i=(s=e.dom).caretRangeFromPoint)===null||i===void 0?void 0:i.call(s,o,n))},j3=(()=>document.caretPositionFromPoint?kw:document.caretRangeFromPoint?$3:I.none)(),wo=(e,o,n)=>{const s=X.fromDom(e.document);return j3(s,o,n).map(i=>Sw.create(X.fromDom(i.startContainer),i.startOffset,X.fromDom(i.endContainer),i.endOffset))},Vy=nd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),su=(e,o,n,s)=>e.fold(o,n,s),gd=e=>e.fold(fo,fo,fo),qf=Vy.before,pa=Vy.on,ev=Vy.after,Ji={before:qf,on:pa,after:ev,cata:su,getStart:gd},Eg=nd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cp=e=>Eg.exact(e.start,e.soffset,e.finish,e.foffset),G3=e=>e.match({domRange:o=>X.fromDom(o.startContainer),relative:(o,n)=>Ji.getStart(o),exact:(o,n,s,i)=>o}),K3=Eg.domRange,c=Eg.relative,m=Eg.exact,p=e=>{const o=G3(e);return zm(o)},b=Sw.create,w={domRange:K3,relative:c,exact:m,exactFromRange:cp,getWin:p,range:b},O=(e,o)=>{const n=po(e);return n==="input"?Ji.after(e):It(["br","img"],n)?o===0?Ji.before(e):Ji.after(e):Ji.on(e,o)},R=(e,o)=>{const n=e.fold(Ji.before,O,Ji.after),s=o.fold(Ji.before,O,Ji.after);return w.relative(n,s)},z=(e,o,n,s)=>{const i=O(e,o),d=O(n,s);return w.relative(i,d)},q=e=>e.match({domRange:o=>{const n=X.fromDom(o.startContainer),s=X.fromDom(o.endContainer);return z(n,o.startOffset,s,o.endOffset)},relative:R,exact:z}),ue=(e,o)=>{const n=(o||document).createDocumentFragment();return me(e,s=>{n.appendChild(s.dom)}),X.fromDom(n)},ke=e=>{const o=w.getWin(e).dom,n=(i,d,g,f)=>Fy(o,i,d,g,f),s=q(e);return W3(o,s).match({ltr:n,rtl:n})},Te=(e,o,n)=>wo(e,o,n),st=(e,o,n)=>{const s=zm(X.fromDom(n));return Te(s.dom,e,o).map(i=>{const d=n.createRange();return d.setStart(i.start.dom,i.soffset),d.setEnd(i.finish.dom,i.foffset),d}).getOrUndefined()},$e=(e,o)=>Oe(e)&&Oe(o)&&e.startContainer===o.startContainer&&e.startOffset===o.startOffset&&e.endContainer===o.endContainer&&e.endOffset===o.endOffset,Xe=(e,o,n)=>{let s=e;for(;s&&s!==o;){if(n(s))return s;s=s.parentNode}return null},Nt=(e,o,n)=>Xe(e,o,n)!==null,mt=(e,o,n)=>Nt(e,o,s=>s.nodeName===n),Gt=(e,o)=>ci(e)&&!Nt(e,o,Ka),Xt=(e,o,n)=>{const s=o.parentNode;if(s){const i=new br(o,e.getParent(s,e.isBlock)||e.getRoot());let d;for(;d=i[n?"prev":"next"]();)if(Co(d))return!0}return!1},sn=(e,o)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===o},fa=(e,o)=>{let n=o;for(;n&&n!==e;){if(xe(n))return!0;n=n.parentNode}return!1},Br=(e,o,n,s,i)=>{const d=e.getRoot(),g=e.schema.getNonEmptyElements(),f=i.parentNode;let y,k;if(!f)return I.none();const D=e.getParent(f,e.isBlock)||d;if(s&&Co(i)&&o&&e.isEmpty(D))return I.some(Ce(f,e.nodeIndex(i)));const L=new br(i,D);for(;k=L[s?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||Gt(k,d))return I.none();if(Ae(k)&&k.data.length>0)return mt(k,d,"A")?I.none():I.some(Ce(k,s?k.data.length:0));if(e.isBlock(k)||g[k.nodeName.toLowerCase()])return I.none();y=k}return ii(y)?I.none():n&&y?I.some(Ce(y,0)):I.none()},hd=(e,o,n,s)=>{const i=e.getRoot();let d,g=!1,f=n?s.startContainer:s.endContainer,y=n?s.startOffset:s.endOffset;const k=pt(f)&&y===f.childNodes.length,D=e.schema.getNonEmptyElements();let L=n;if(ci(f))return I.none();if(pt(f)&&y>f.childNodes.length-1&&(L=!1),yr(f)&&(f=i,y=0),f===i){if(L&&(d=f.childNodes[y>0?y-1:0],d&&(ci(d)||D[d.nodeName]||_a(d))))return I.none();if(f.hasChildNodes()){if(y=Math.min(!L&&y>0?y-1:y,f.childNodes.length-1),f=f.childNodes[y],y=Ae(f)&&k?f.data.length:0,!o&&f===i.lastChild&&_a(f)||fa(i,f)||ci(f)||Jv(f))return I.none();if(f.hasChildNodes()&&!_a(f)){d=f;const P=new br(f,i);do{if(xe(d)||ci(d)){g=!1;break}if(Ae(d)&&d.data.length>0){y=L?0:d.data.length,f=d,g=!0;break}if(D[d.nodeName.toLowerCase()]&&!hk(d)){y=e.nodeIndex(d),f=d.parentNode,L||y++,g=!0;break}}while(d=L?P.next():P.prev())}}}return o&&(Ae(f)&&y===0&&Br(e,k,o,!0,f).each(P=>{f=P.container(),y=P.offset(),g=!0}),pt(f)&&(d=f.childNodes[y],d||(d=f.childNodes[y-1]),d&&Co(d)&&!sn(d,"A")&&!Xt(e,d,!1)&&!Xt(e,d,!0)&&Br(e,k,o,!0,d).each(P=>{f=P.container(),y=P.offset(),g=!0}))),L&&!o&&Ae(f)&&y===f.data.length&&Br(e,k,o,!1,f).each(P=>{f=P.container(),y=P.offset(),g=!0}),g&&f?I.some(Ce(f,y)):I.none()},vc=(e,o)=>{const n=o.collapsed,s=o.cloneRange(),i=Ce.fromRangeStart(o);return hd(e,n,!0,s).each(d=>{(!n||!Ce.isAbove(i,d))&&s.setStart(d.container(),d.offset())}),n||hd(e,n,!1,s).each(d=>{s.setEnd(d.container(),d.offset())}),n&&s.collapse(!0),$e(o,s)?I.none():I.some(s)},au=(e,o)=>e.splitText(o),Ho=e=>{let o=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset;if(o===s&&Ae(o)){if(n>0&&n<o.data.length)if(s=au(o,n),o=s.previousSibling,i>n){i=i-n;const d=au(s,i).previousSibling;o=s=d,i=d.data.length,n=0}else i=0}else if(Ae(o)&&n>0&&n<o.data.length&&(o=au(o,n),n=0),Ae(s)&&i>0&&i<s.data.length){const d=au(s,i).previousSibling;s=d,i=d.data.length}return{startContainer:o,startOffset:n,endContainer:s,endOffset:i}},Nr=e=>({walk:(o,n)=>Lo(e,o,n),split:Ho,expand:(o,n={type:"word"})=>{if(n.type==="word"){const s=md(e,o,[{inline:"span"}]),i=e.createRng();return i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),i}return o},normalize:o=>vc(e,o).fold(Ie,n=>(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),!0))});Nr.compareRanges=$e,Nr.getCaretRangeFromPoint=st,Nr.getSelectedNode=wf,Nr.getNode=fi;const Xr=((e,o)=>{const n=(g,f)=>{if(!nr(f)&&!f.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+f);const y=g.dom;$m(y)&&(y.style[e]=f+"px")},s=g=>{const f=o(g);if(f<=0||f===null){const y=Hi(g,e);return parseFloat(y)||0}return f},i=s,d=(g,f)=>En(f,(y,k)=>{const D=Hi(g,k),L=D===void 0?0:parseInt(D,10);return isNaN(L)?y:y+L},0);return{set:n,get:s,getOuter:i,aggregate:d,max:(g,f,y)=>{const k=d(g,y);return f>k?f-k:0}}})("height",e=>{const o=e.dom;return rc(e)?o.getBoundingClientRect().height:o.offsetHeight}),Na=e=>Xr.get(e),Nl=()=>X.fromDom(document),pd=(e,o)=>e.view(o).fold(Pe([]),n=>{const s=e.owner(n),i=pd(e,s);return[n].concat(i)}),La=(e,o)=>{const n=o.owner(e);return pd(o,n)};var tv=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?I.none():I.from((o=e.dom.defaultView)===null||o===void 0?void 0:o.frameElement)).map(X.fromDom)},owner:e=>Bi(e)});const dp=e=>{const o=Nl(),n=ne(o),s=La(e,tv),i=Y(e),d=ml(s,(g,f)=>{const y=Y(f);return{left:g.left+y.left,top:g.top+y.top}},{left:0,top:0});return zi(d.left+i.left+n.left,d.top+i.top+n.top)},Xa=e=>po(e)==="textarea",Ps=(e,o)=>e.dispatch("ScrollIntoView",o).isDefaultPrevented(),_w=(e,o)=>{e.dispatch("AfterScrollIntoView",o)},X3=(e,o)=>{const n=Vr(e);if(n.length===0||Xa(e))return{element:e,offset:o};if(o<n.length&&!Xa(n[o]))return{element:n[o],offset:0};{const s=n[n.length-1];return Xa(s)?{element:e,offset:o}:po(s)==="img"?{element:s,offset:1}:No(s)?{element:s,offset:Vi(s).length}:{element:s,offset:Vr(s).length}}},Zy=(e,o)=>{const n=H(e),s=Na(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:o}},Ew=(e,o)=>{const n=X3(e,o),s=X.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+$r+"</span>");return Ur(n.element,s),Zy(s,()=>$o(s))},Ow=e=>Zy(X.fromDom(e),Be),Yf=(e,o,n,s)=>{lL(e,(i,d)=>Qf(e,o,n,s),n)},Uy=(e,o,n,s,i)=>{const d={elm:s.element.dom,alignToTop:i};if(Ps(e,d))return;const g=ne(o).top;n(e,o,g,s,i),_w(e,d)},Qf=(e,o,n,s)=>{const i=X.fromDom(e.getBody()),d=X.fromDom(e.getDoc());jm(i);const g=Ew(X.fromDom(n.startContainer),n.startOffset);Uy(e,d,o,g,s),g.cleanup()},u5=(e,o,n,s)=>{const i=X.fromDom(e.getDoc());Uy(e,i,n,Ow(o),s)},lL=(e,o,n)=>{const s=n.startContainer,i=n.startOffset,d=n.endContainer,g=n.endOffset;o(X.fromDom(s),X.fromDom(d));const f=e.dom.createRng();f.setStart(s,i),f.setEnd(d,g),e.selection.setRng(n)},q3=(e,o,n,s,i)=>{const d=o.pos;if(s)Ze(d.left,d.top,i);else{const g=d.top-n+o.height;Ze(-e.getBody().getBoundingClientRect().left,g,i)}},m5=(e,o,n,s,i,d)=>{const g=s+n,f=i.pos.top,y=i.bottom,k=y-f>=s;f<n?q3(e,i,s,d!==!1,o):f>g?q3(e,i,s,k?d!==!1:d===!0,o):y>g&&!k&&q3(e,i,s,d===!0,o)},g5=(e,o,n,s,i)=>{const d=zm(o).dom.innerHeight;m5(e,o,n,d,s,i)},h5=(e,o,n,s,i)=>{const d=zm(o).dom.innerHeight;m5(e,o,n,d,s,i);const g=dp(s.element),f=bt(window);g.top<f.y?kt(s.element,i!==!1):g.top>f.bottom&&kt(s.element,i===!0)},cL=(e,o,n)=>Yf(e,g5,o,n),Tw=(e,o,n)=>u5(e,o,g5,n),p5=(e,o,n)=>Yf(e,h5,o,n),dL=(e,o,n)=>u5(e,o,h5,n),f5=(e,o,n)=>{(e.inline?Tw:dL)(e,o,n)},ov=(e,o,n)=>{(e.inline?cL:p5)(e,o,n)},v5=(e,o=!1)=>e.dom.focus({preventScroll:o}),b5=e=>{const o=Ni(e).dom;return e.dom===o.activeElement},Y3=(e=Nl())=>I.from(e.dom.activeElement).map(X.fromDom),uL=e=>Y3(Ni(e)).filter(o=>e.dom.contains(o.dom)),y5=(e,o)=>{const n=No(o)?Vi(o).length:Vr(o).length+1;return e>n?n:e<0?0:e},x5=e=>w.range(e.start,y5(e.soffset,e.start),e.finish,y5(e.foffset,e.finish)),Q3=(e,o)=>!ua(o.dom)&&(oc(e,o)||yo(e,o)),Wy=e=>o=>Q3(e,o.start)&&Q3(e,o.finish),mL=e=>e.inline||ae.browser.isFirefox(),gL=e=>w.range(X.fromDom(e.startContainer),e.startOffset,X.fromDom(e.endContainer),e.endOffset),J3=e=>{const o=e.getSelection();return(!o||o.rangeCount===0?I.none():I.from(o.getRangeAt(0))).map(gL)},hL=e=>{const o=zm(e);return J3(o.dom).filter(Wy(e))},C5=(e,o)=>I.from(o).filter(Wy(e)).map(x5),w5=e=>{const o=document.createRange();try{return o.setStart(e.start.dom,e.soffset),o.setEnd(e.finish.dom,e.foffset),I.some(o)}catch{return I.none()}},Dw=e=>{const o=mL(e)?hL(X.fromDom(e.getBody())):I.none();e.bookmark=o.isSome()?o:e.bookmark},e_=e=>(e.bookmark?e.bookmark:I.none()).bind(o=>C5(X.fromDom(e.getBody()),o)).bind(w5),pL=e=>{e_(e).each(o=>e.selection.setRng(o))},S5={isEditorUIElement:e=>{const o=e.className.toString();return o.indexOf("tox-")!==-1||o.indexOf("mce-")!==-1}},fL=(e,o)=>(nr(o)||(o=0),setTimeout(e,o)),Mw=(e,o)=>(nr(o)||(o=0),setInterval(e,o)),Ll={setEditorTimeout:(e,o,n)=>fL(()=>{e.removed||o()},n),setEditorInterval:(e,o,n)=>{const s=Mw(()=>{e.removed?clearInterval(s):o()},n);return s}},k5=e=>e.type==="nodechange"&&e.selectionChange,_5=(e,o)=>{const n=()=>{o.throttle()};Kt.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Kt.DOM.unbind(document,"mouseup",n)})},E5=(e,o)=>{e.on("mouseup touchend",n=>{o.throttle()})},vL=(e,o)=>{E5(e,o),e.on("keyup NodeChange AfterSetSelectionRange",n=>{k5(n)||Dw(e)})},bL=e=>{const o=xf(()=>{Dw(e)},0);e.on("init",()=>{e.inline&&_5(e,o),vL(e,o)}),e.on("remove",()=>{o.cancel()})};let nv;const t_=Kt.DOM,yL=e=>pt(e)&&S5.isEditorUIElement(e),o_=e=>{const o=e.classList;return o!==void 0?o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"):!1},Aw=(e,o)=>{const n=t3(e);return t_.getParent(o,s=>yL(s)||(n?e.dom.is(s,n):!1))!==null},n_=e=>{try{const o=Ni(X.fromDom(e.getElement()));return Y3(o).fold(()=>document.body,n=>n.dom)}catch{return document.body}},xL=(e,o)=>{const n=o.editor;bL(n);const s=(i,d)=>{if(d3(i)&&i.inline!==!0){const g=X.fromDom(i.getContainer());d(g,"tox-edit-focus")}};n.on("focusin",()=>{const i=e.focusedEditor;o_(n_(n))&&s(n,Uc),i!==n&&(i&&i.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:i}),n.focus(!0))}),n.on("focusout",()=>{Ll.setEditorTimeout(n,()=>{const i=e.focusedEditor;(!o_(n_(n))||i!==n)&&s(n,Tu),!Aw(n,n_(n))&&i===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),nv||(nv=i=>{const d=e.activeEditor;d&&Zm(i).each(g=>{const f=g;f.ownerDocument===document&&f!==document.body&&!Aw(d,f)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},t_.bind(document,"focusin",nv))},CL=(e,o)=>{e.focusedEditor===o.editor&&(e.focusedEditor=null),!e.activeEditor&&nv&&(t_.unbind(document,"focusin",nv),nv=null)},wL=e=>{e.on("AddEditor",Le(xL,e)),e.on("RemoveEditor",Le(CL,e))},SL=(e,o)=>e.dom.getParent(o,n=>e.dom.getContentEditable(n)==="true"),Rw=e=>e.collapsed?I.from(fi(e.startContainer,e.startOffset)).map(X.fromDom):I.none(),O5=(e,o)=>Rw(o).bind(n=>sh(n)?I.some(n):oc(e,n)?I.none():I.some(e)),r_=(e,o)=>{O5(X.fromDom(e.getBody()),o).bind(n=>Qs(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},s_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},kL=e=>b5(e)||uL(e).isSome(),_L=e=>Oe(e.iframeElement)&&b5(X.fromDom(e.iframeElement)),EL=e=>{const o=e.getBody();return o&&kL(X.fromDom(o))},OL=e=>{const o=Ni(X.fromDom(e.getElement()));return Y3(o).filter(n=>!o_(n.dom)&&Aw(e,n.dom)).isSome()},Jf=e=>e.inline?EL(e):_L(e),a_=e=>Jf(e)||OL(e),TL=e=>{const o=e.selection,n=e.getBody();let s=o.getRng();e.quirks.refreshContentEditable(),Oe(e.bookmark)&&!Jf(e)&&e_(e).each(d=>{e.selection.setRng(d),s=d});const i=SL(e,o.getNode());if(i&&e.dom.isChildOf(i,n)){s_(i),r_(e,s),Bw(e);return}e.inline||(ae.browser.isOpera()||s_(n),e.getWin().focus()),(ae.browser.isFirefox()||e.inline)&&(s_(n),r_(e,s)),Bw(e)},Bw=e=>e.editorManager.setActive(e),T5=(e,o)=>{e.removed||(o?Bw(e):TL(e))},D5=(e,o)=>o.collapsed?e.isEditable(o.startContainer):e.isEditable(o.startContainer)&&e.isEditable(o.endContainer),M5=(e,o,n,s,i)=>{const d=n?o.startContainer:o.endContainer,g=n?o.startOffset:o.endOffset;return I.from(d).map(X.fromDom).map(f=>!s||!o.collapsed?_r(f,i(f,g)).getOr(f):f).bind(f=>Sa(f)?I.some(f):vs(f).filter(Sa)).map(f=>f.dom).getOr(e)},A5=(e,o,n=!1)=>M5(e,o,!0,n,(s,i)=>Math.min(Bu(s),i)),R5=(e,o,n=!1)=>M5(e,o,!1,n,(s,i)=>i>0?i-1:i),B5=(e,o)=>{const n=e;for(;e&&Ae(e)&&e.length===0;)e=o?e.nextSibling:e.previousSibling;return e||n},DL=(e,o)=>{if(!o)return e;let n=o.startContainer,s=o.endContainer;const i=o.startOffset,d=o.endOffset;let g=o.commonAncestorContainer;o.collapsed||(n===s&&d-i<2&&n.hasChildNodes()&&(g=n.childNodes[i]),Ae(n)&&Ae(s)&&(n.length===i?n=B5(n.nextSibling,!0):n=n.parentNode,d===0?s=B5(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(g=n)));const f=Ae(g)?g.parentNode:g;return Sl(f)?f:e},ML=(e,o,n,s)=>{const i=[],d=e.getRoot(),g=e.getParent(n||A5(d,o,o.collapsed),e.isBlock),f=e.getParent(s||R5(d,o,o.collapsed),e.isBlock);if(g&&g!==d&&i.push(g),g&&f&&g!==f){let y;const k=new br(g,d);for(;(y=k.next())&&y!==f;)e.isBlock(y)&&i.push(y)}return f&&g!==f&&f!==d&&i.push(f),i},AL=(e,o,n)=>I.from(o).bind(s=>I.from(s.parentNode).map(i=>{const d=e.nodeIndex(s),g=e.createRng();return g.setStart(i,d),g.setEnd(i,d+1),n&&(wy(e,g,s,!0),wy(e,g,s,!1)),g})),i_=(e,o)=>Bt(o,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),RL=e=>po(e)==="img"?1:Pu(e).fold(()=>Vr(e).length,o=>o.length),BL=e=>Pu(e).filter(o=>o.trim().length!==0||o.indexOf(jn)>-1).isSome(),NL=e=>si(e)&&Wn(e,"contenteditable")==="false",LL=["img","br"],N5=e=>BL(e)||It(LL,po(e))||NL(e),HL=e=>bs(e,N5),IL=e=>PL(e,N5),PL=(e,o)=>{const n=s=>{const i=Vr(s);for(let d=i.length-1;d>=0;d--){const g=i[d];if(o(g))return I.some(g);const f=n(g);if(f.isSome())return f}return I.none()};return n(e)},L5="[data-mce-autocompleter]",zL=(e,o)=>{if(l_(X.fromDom(e.getBody())).isNone()){const n=X.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());ao(n,X.fromDom(o.extractContents())),o.insertNode(n.dom),vs(n).each(s=>s.dom.normalize()),IL(n).map(s=>{e.selection.setCursorLocation(s.dom,RL(s))})}},_t=e=>Li(e,L5),l_=e=>Id(e,L5),H5=(e,o)=>l_(o).each(n=>{const s=e.selection.getBookmark();qt(n),e.selection.moveToBookmark(s)}),FL={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},rv=(e,o,n)=>{const s=n?"lastChild":"firstChild",i=n?"prev":"next";if(e[s])return e[s];if(e!==o){let d=e[i];if(d)return d;for(let g=e.parent;g&&g!==o;g=g.parent)if(d=g[i],d)return d}},VL=e=>{var o;const n=(o=e.value)!==null&&o!==void 0?o:"";if(!di(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},I5=e=>{const o=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||o};class qa{static create(o,n){const s=new qa(o,FL[o]||1);return n&&ot(n,(i,d)=>{s.attr(d,i)}),s}constructor(o,n){this.name=o,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(o){const n=this;return o.parent&&o.remove(),n.insert(o,n),n.remove(),n}attr(o,n){const s=this;if(!J(o))return Oe(o)&&ot(o,(d,g)=>{s.attr(g,d)}),s;const i=s.attributes;if(i){if(n!==void 0){if(n===null){if(o in i.map){delete i.map[o];let d=i.length;for(;d--;)if(i[d].name===o)return i.splice(d,1),s}return s}if(o in i.map){let d=i.length;for(;d--;)if(i[d].name===o){i[d].value=n;break}}else i.push({name:o,value:n});return i.map[o]=n,s}return i.map[o]}}clone(){const o=this,n=new qa(o.name,o.type),s=o.attributes;if(s){const i=[];i.map={};for(let d=0,g=s.length;d<g;d++){const f=s[d];f.name!=="id"&&(i[i.length]={name:f.name,value:f.value},i.map[f.name]=f.value)}n.attributes=i}return n.value=o.value,n}wrap(o){const n=this;return n.parent&&(n.parent.insert(o,n),o.append(n)),n}unwrap(){const o=this;for(let n=o.firstChild;n;){const s=n.next;o.insert(n,o,!0),n=s}o.remove()}remove(){const o=this,n=o.parent,s=o.next,i=o.prev;return n&&(n.firstChild===o?(n.firstChild=s,s&&(s.prev=null)):i&&(i.next=s),n.lastChild===o?(n.lastChild=i,i&&(i.next=null)):s&&(s.prev=i),o.parent=o.next=o.prev=null),o}append(o){const n=this;o.parent&&o.remove();const s=n.lastChild;return s?(s.next=o,o.prev=s,n.lastChild=o):n.lastChild=n.firstChild=o,o.parent=n,o}insert(o,n,s){o.parent&&o.remove();const i=n.parent||this;return s?(n===i.firstChild?i.firstChild=o:n.prev&&(n.prev.next=o),o.prev=n.prev,o.next=n,n.prev=o):(n===i.lastChild?i.lastChild=o:n.next&&(n.next.prev=o),o.next=n.next,o.prev=n,n.next=o),o.parent=i,o}getAll(o){const n=this,s=[];for(let i=n.firstChild;i;i=rv(i,n))i.name===o&&s.push(i);return s}children(){const o=this,n=[];for(let s=o.firstChild;s;s=s.next)n.push(s);return n}empty(){const o=this;if(o.firstChild){const n=[];for(let i=o.firstChild;i;i=rv(i,o))n.push(i);let s=n.length;for(;s--;){const i=n[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,n={},s){var i;const d=this;let g=d.firstChild;if(I5(d))return!1;if(g)do{if(g.type===1){if(g.attr("data-mce-bogus"))continue;if(o[g.name]||I5(g))return!1}if(g.type===8||g.type===3&&!VL(g)||g.type===3&&g.parent&&n[g.parent.name]&&di((i=g.value)!==null&&i!==void 0?i:"")||s&&s(g))return!1}while(g=rv(g,d));return!0}walk(o){return rv(this,null,o)}}const ZL=ve.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),P5=e=>J(e.nodeValue)&&e.nodeValue.includes($r),$y=e=>`${e.length===0?"":`${Bt(e,o=>`[${o}]`).join(",")},`}[data-mce-bogus="all"]`,z5=(e,o)=>o.querySelectorAll($y(e)),F5=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,o=>P5(o)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Zt=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,o=>{if(P5(o)){const n=o.parentNode;return n&&At(ZL,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),UL=e=>F5(e).nextNode()!==null,Yt=e=>Zt(e).nextNode()!==null,V5=(e,o)=>o.querySelector($y(e))!==null,WL=(e,o)=>{me(z5(e,o),n=>{const s=X.fromDom(n);Wn(s,"data-mce-bogus")==="all"?$o(s):me(e,i=>{Fc(s,i)&&kr(s,i)})})},Z5=e=>{let o=e.nextNode();for(;o!==null;)o.nodeValue=null,o=e.nextNode()},$L=E(Z5,F5),Lt=E(Z5,Zt),U5=(e,o)=>{const n=[{condition:Le(V5,o),action:Le(WL,o)},{condition:UL,action:$L},{condition:Yt,action:Lt}];let s=e,i=!1;return me(n,({condition:d,action:g})=>{d(s)&&(i||(s=e.cloneNode(!0),i=!0),g(s))}),s},W5=e=>{const o=rn(e,"[data-mce-bogus]");me(o,n=>{Wn(n,"data-mce-bogus")==="all"?$o(n):Ta(n)?(Ur(n,X.fromText(ef)),$o(n)):qt(n)})},$5=e=>{const o=rn(e,"input");me(o,n=>{kr(n,"name")})},jy=(e,o)=>{const n=Hs(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return o.replace(s,"")},j5=(e,o)=>{const n=e.getDoc(),s=Ni(X.fromDom(e.getBody())),i=X.fromTag("div",n);Dn(i,"data-mce-bogus","all"),Lu(i,{position:"fixed",left:"-9999999px",top:"0"}),Hu(i,o.innerHTML),W5(i),$5(i);const d=Kp(s);ao(d,i);const g=jr(i.dom.innerText);return $o(i),g},jL=(e,o,n)=>{let s;return o.format==="raw"?s=ve.trim(jr(U5(n,e.serializer.getTempAttrs()).innerHTML)):o.format==="text"?s=j5(e,n):o.format==="tree"?s=e.serializer.serialize(n,o):s=jy(e,e.serializer.serialize(n,o)),o.format!=="text"&&!ah(X.fromDom(n))&&J(s)?ve.trim(s):s},GL=(e,o)=>I.from(e.getBody()).fold(Pe(o.format==="tree"?new qa("body",11):""),n=>jL(e,o,n)),G5=ve.makeMap,c_=e=>{const o=[];e=e||{};const n=e.indent,s=G5(e.indent_before||""),i=G5(e.indent_after||""),d=gt.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format!=="xhtml";return{start:(f,y,k)=>{if(n&&s[f]&&o.length>0){const D=o[o.length-1];D.length>0&&D!==`
`&&o.push(`
`)}if(o.push("<",f),y)for(let D=0,L=y.length;D<L;D++){const P=y[D];o.push(" ",P.name,'="',d(P.value,!0),'"')}if(!k||g?o[o.length]=">":o[o.length]=" />",k&&n&&i[f]&&o.length>0){const D=o[o.length-1];D.length>0&&D!==`
`&&o.push(`
`)}},end:f=>{let y;o.push("</",f,">"),n&&i[f]&&o.length>0&&(y=o[o.length-1],y.length>0&&y!==`
`&&o.push(`
`))},text:(f,y)=>{f.length>0&&(o[o.length]=y?f:d(f))},cdata:f=>{o.push("<![CDATA[",f,"]]>")},comment:f=>{o.push("<!--",f,"-->")},pi:(f,y)=>{y?o.push("<?",f," ",d(y),"?>"):o.push("<?",f,"?>"),n&&o.push(`
`)},doctype:f=>{o.push("<!DOCTYPE",f,">",n?`
`:"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},up=(e={},o=Jc())=>{const n=c_(e);return e.validate="validate"in e?e.validate:!0,{serialize:s=>{const i=e.validate,d={3:f=>{var y;n.text((y=f.value)!==null&&y!==void 0?y:"",f.raw)},8:f=>{var y;n.comment((y=f.value)!==null&&y!==void 0?y:"")},7:f=>{n.pi(f.name,f.value)},10:f=>{var y;n.doctype((y=f.value)!==null&&y!==void 0?y:"")},4:f=>{var y;n.cdata((y=f.value)!==null&&y!==void 0?y:"")},11:f=>{let y=f;if(y=y.firstChild)do g(y);while(y=y.next)}};n.reset();const g=f=>{var y;const k=d[f.type];if(k)k(f);else{const D=f.name,L=D in o.getVoidElements();let P=f.attributes;if(i&&P&&P.length>1){const j=[];j.map={};const $=o.getElementRule(f.name);if($){for(let Z=0,U=$.attributesOrder.length;Z<U;Z++){const re=$.attributesOrder[Z];if(re in P.map){const ie=P.map[re];j.map[re]=ie,j.push({name:re,value:ie})}}for(let Z=0,U=P.length;Z<U;Z++){const re=P[Z].name;if(!(re in j.map)){const ie=P.map[re];j.map[re]=ie,j.push({name:re,value:ie})}}P=j}}if(n.start(D,P,L),Kc(D))J(f.value)&&n.text(f.value,!0),n.end(D);else if(!L){let j=f.firstChild;if(j){(D==="pre"||D==="textarea")&&j.type===3&&((y=j.value)===null||y===void 0?void 0:y[0])===`
`&&n.text(`
`,!0);do g(j);while(j=j.next)}n.end(D)}}};return s.type===1&&!e.inner?g(s):s.type===3?d[3](s):d[11](s),n.getContent()}}},K5=new Set;me(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{K5.add(e)});const X5=["font","text-decoration","text-emphasis"],d_=(e,o)=>Cr(e.parseStyle(e.getAttrib(o,"style"))),KL=e=>K5.has(e),q5=(e,o)=>hr(d_(e,o),n=>!KL(n)),XL=e=>Et(e,o=>nn(X5,n=>Bo(o,n))),oo=(e,o,n)=>{const s=d_(e,o),i=d_(e,n),d=g=>{var f,y;const k=(f=e.getStyle(o,g))!==null&&f!==void 0?f:"",D=(y=e.getStyle(n,g))!==null&&y!==void 0?y:"";return sr(k)&&sr(D)&&k!==D};return nn(s,g=>{const f=y=>nn(y,k=>k===g);if(!f(i)&&f(X5)){const y=XL(i);return nn(y,d)}else return d(g)})},u_=(e,o,n)=>I.from(n.container()).filter(Ae).exists(s=>{const i=e?0:-1;return o(s.data.charAt(n.offset()+i))}),sv=Le(u_,!0,Yh),Nw=Le(u_,!1,Yh),Y5=e=>{const o=e.container();return Ae(o)&&(o.data.length===0||ih(o.data)&&Kf.isBookmarkNode(o.parentNode))},Og=(e,o)=>n=>L0(e?0:-1,n).filter(o).isSome(),m_=e=>Ns(e)&&Hi(X.fromDom(e),"display")==="block",g_=e=>xe(e)&&!Ix(e),qL=Og(!0,m_),Q5=Og(!1,m_),Gy=Og(!0,dn),Ky=Og(!1,dn),J5=Og(!0,_a),eM=Og(!1,_a),mp=Og(!0,g_),gp=Og(!1,g_),YL=e=>e.slice(0,-1),QL=(e,o,n)=>oc(o,e)?YL(nc(e,s=>n(s)||yo(s,o))):[],Lw=(e,o)=>QL(e,o,Ie),iu=(e,o)=>[e].concat(Lw(e,o)),h_=(e,o,n)=>Zf(e,o,n,Y5),JL=e=>o=>e.isBlock(po(o)),tM=(e,o,n)=>On(iu(X.fromDom(o.container()),e),JL(n)),oM=(e,o,n,s)=>h_(e,o.dom,n).forall(i=>tM(o,n,s).fold(()=>!hc(i,n,o.dom),d=>!hc(i,n,o.dom)&&oc(d,X.fromDom(i.container())))),nM=(e,o,n,s)=>tM(o,n,s).fold(()=>h_(e,o.dom,n).forall(i=>!hc(i,n,o.dom)),i=>h_(e,i.dom,n).isNone()),p_=Le(nM,!1),rM=Le(nM,!0),eH=Le(oM,!1),sM=Le(oM,!0),tH=e=>Uh(e).exists(Ta),Hw=(e,o,n,s)=>{const i=Et(iu(X.fromDom(n.container()),o),g=>s.isBlock(po(g))),d=xn(i).getOr(o);return Ga(e,d.dom,n).filter(tH)},Tg=(e,o,n)=>Uh(o).exists(Ta)||Hw(!0,e,o,n).isSome(),f_=(e,o,n)=>hy(o).exists(Ta)||Hw(!1,e,o,n).isSome(),aM=Le(Hw,!1),oH=Le(Hw,!0),iM=e=>Ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),v_=(e,o,n)=>{const s=Et(iu(X.fromDom(o.container()),e),i=>n.isBlock(po(i)));return xn(s).getOr(e)},b_=(e,o,n)=>iM(o)?Nw(o):Nw(o)||Ys(v_(e,o,n).dom,o).exists(Nw),y_=(e,o,n)=>iM(o)?sv(o):sv(o)||qs(v_(e,o,n).dom,o).exists(sv),lM=e=>It(["pre","pre-wrap"],e),va=e=>Uh(e).bind(o=>rs(o,Sa)).exists(o=>lM(Hi(o,"white-space"))),nH=(e,o)=>Ys(e.dom,o).isNone(),rH=(e,o)=>qs(e.dom,o).isNone(),sH=(e,o,n)=>nH(e,o)||rH(e,o)||p_(e,o,n)||rM(e,o,n)||f_(e,o,n)||Tg(e,o,n),aH=e=>Oe(e)&&xe(e)&&cy(e),cM=(e,o)=>n=>aH(new br(n,e)[o]()),e1=(e,o)=>{const n=qs(e.dom,o).getOr(o),s=cM(e.dom,"next");return o.isAtEnd()&&(s(o.container())||s(n.container()))},iH=(e,o)=>{const n=Ys(e.dom,o).getOr(o),s=cM(e.dom,"prev");return o.isAtStart()&&(s(o.container())||s(n.container()))},dM=(e,o,n)=>va(o)?!1:sH(e,o,n)||b_(e,o,n)||y_(e,o,n),pn=(e,o,n)=>va(o)?!1:p_(e,o,n)||eH(e,o,n)||f_(e,o,n)||b_(e,o,n)||iH(e,o),Iw=e=>{const o=e.container(),n=e.offset();return Ae(o)&&n<o.data.length?Ce(o,n+1):e},Lr=(e,o,n)=>va(o)?!1:rM(e,o,n)||sM(e,o,n)||Tg(e,o,n)||y_(e,o,n)||e1(e,o),x_=(e,o,n)=>pn(e,o,n)||Lr(e,Iw(o),n),uM=(e,o)=>jf(e.charAt(o)),dm=(e,o)=>Yh(e.charAt(o)),Io=e=>{const o=e.container();return Ae(o)&&Yn(o.data,jn)},mM=e=>{const o=e.split("");return Bt(o,(n,s)=>jf(n)&&s>0&&s<o.length-1&&yg(o[s-1])&&yg(o[s+1])?" ":n).join("")},C_=(e,o,n,s)=>{const i=o.data,d=Ce(o,0);return!n&&uM(i,0)&&!x_(e,d,s)?(o.data=" "+i.slice(1),!0):n&&dm(i,0)&&pn(e,d,s)?(o.data=jn+i.slice(1),!0):!1},lH=e=>{const o=e.data,n=mM(o);return n!==o?(e.data=n,!0):!1},gM=(e,o,n,s)=>{const i=o.data,d=Ce(o,i.length-1);return!n&&uM(i,i.length-1)&&!x_(e,d,s)?(o.data=i.slice(0,-1)+" ",!0):n&&dm(i,i.length-1)&&Lr(e,d,s)?(o.data=i.slice(0,-1)+jn,!0):!1},cH=(e,o,n)=>{const s=o.container();if(!Ae(s))return I.none();if(Io(o)){const i=C_(e,s,!1,n)||lH(s)||gM(e,s,!1,n);return bl(i,o)}else if(x_(e,o,n)){const i=C_(e,s,!0,n)||gM(e,s,!0,n);return bl(i,o)}else return I.none()},el=e=>{const o=X.fromDom(e.getBody());e.selection.isCollapsed()&&cH(o,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},bc=(e,o,n,s)=>{if(n===0)return;const i=X.fromDom(e),d=Nn(i,k=>s.isBlock(po(k))).getOr(i),g=e.data.slice(o,o+n),f=o+n>=e.data.length&&Lr(d,Ce(e,e.data.length),s),y=o===0&&pn(d,Ce(e,0),s);e.replaceData(o,n,ui(g,4,y,f))},Xy=(e,o,n)=>{const s=e.data.slice(o),i=s.length-zn(s).length;bc(e,o,i,n)},qy=(e,o,n)=>{const s=e.data.slice(0,o),i=s.length-rr(s).length;bc(e,o-i,i,n)},Yy=(e,o,n,s,i=!0)=>{const d=rr(e.data).length,g=i?e:o,f=i?o:e;return i?g.appendData(f.data):g.insertData(0,f.data),$o(X.fromDom(f)),s&&Xy(g,d,n),g},Pw=(e,o)=>{const n=e.container(),s=e.offset();return!Ce.isTextPosition(e)&&n===o.parentNode&&s>Ce.before(o).offset()},hM=(e,o)=>Pw(o,e)?Ce(o.container(),o.offset()-1):o,Qy=e=>Ae(e)?Ce(e,0):Ce.before(e),zw=e=>Ae(e)?Ce(e,e.data.length):Ce.after(e),Fw=e=>as(e.previousSibling)?I.some(zw(e.previousSibling)):e.previousSibling?Rl(e.previousSibling):I.none(),w_=e=>as(e.nextSibling)?I.some(Qy(e.nextSibling)):e.nextSibling?Qs(e.nextSibling):I.none(),Jy=(e,o)=>I.from(o.previousSibling?o.previousSibling:o.parentNode).bind(n=>Ys(e,Ce.before(n))).orThunk(()=>qs(e,Ce.after(o))),dH=(e,o)=>qs(e,Ce.after(o)).orThunk(()=>Ys(e,Ce.before(o))),uH=(e,o)=>Fw(o).orThunk(()=>w_(o)).orThunk(()=>Jy(e,o)),lu=(e,o)=>w_(o).orThunk(()=>Fw(o)).orThunk(()=>dH(e,o)),tl=(e,o,n)=>e?lu(o,n):uH(o,n),e2=(e,o,n)=>tl(e,o,n).map(Le(hM,n)),Hl=(e,o,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),o)})},mH=e=>o=>o.dom===e,an=(e,o)=>o&&At(e.schema.getBlockElements(),po(o)),gH=(e,o)=>{if(Hn(e)){const n=X.fromHtml('<br data-mce-bogus="1">');return o?me(Vr(e),s=>{Ay(s)||$o(s)}):ac(e),ao(e,n),I.some(Ce.before(n.dom))}else return I.none()},t1=(e,o,n,s)=>{const i=Wc(e).filter(No),d=Nd(e).filter(No);return $o(e),Wo(i,d,o,(g,f,y)=>{const k=g.dom,D=f.dom,L=k.data.length;return Yy(k,D,n,s),y.container()===D?Ce(k,L):y}).orThunk(()=>(s&&(i.each(g=>qy(g.dom,g.dom.length,n)),d.each(g=>Xy(g.dom,0,n))),o))},t2=(e,o)=>At(e.schema.getTextInlineElements(),po(o)),hp=(e,o,n,s=!0,i=!1)=>{const d=e2(o,e.getBody(),n.dom),g=Nn(n,Le(an,e),mH(e.getBody())),f=t1(n,d,e.schema,t2(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):g.bind(y=>gH(y,i)).fold(()=>{s&&Hl(e,o,f)},y=>{s&&Hl(e,o,I.some(y))})},S_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,k_=e=>S_.test(e),o1=(e,o)=>Za(X.fromDom(o),LC(e))&&!ng(e.schema,o)&&e.dom.isEditable(o),Vw=e=>{var o;return Kt.DOM.getStyle(e,"direction",!0)==="rtl"||k_((o=e.textContent)!==null&&o!==void 0?o:"")},hH=(e,o,n)=>Et(Kt.DOM.getParents(n.container(),"*",o),e),Dg=(e,o,n)=>{const s=hH(e,o,n);return I.from(s[s.length-1])},pM=(e,o,n)=>{const s=ad(o,e),i=ad(n,e);return Oe(s)&&s===i},__=e=>j1(e)||Fu(e),Il=(e,o)=>{const n=o.container(),s=o.offset();return e?Fd(n)?Ae(n.nextSibling)?Ce(n.nextSibling,0):Ce.after(n):j1(o)?Ce(n,s+1):o:Fd(n)?Ae(n.previousSibling)?Ce(n.previousSibling,n.previousSibling.data.length):Ce.before(n):Fu(o)?Ce(n,s-1):o},o2=Le(Il,!0),fM=Le(Il,!1),vM=(e,o)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(o),e.off("beforeinput input",n)},pH=e=>{e.execCommand("delete")},E_=e=>vM(e,"Delete"),fH=e=>vM(e,"ForwardDelete"),bM=e=>o=>Rs(vs(o),e,yo),vH=e=>_l(e)||ar(e),Zw=(e,o)=>oc(e,o)?rs(o,vH,bM(e)):I.none(),Uw=(e,o=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!o})},yM=(e,o,n)=>Qn(Qs(n),Rl(n),(s,i)=>{const d=Il(!0,s),g=Il(!1,i),f=Il(!1,o);return e?qs(n,f).exists(y=>y.isEqual(g)&&o.isEqual(d)):Ys(n,f).exists(y=>y.isEqual(d)&&o.isEqual(g))}).getOr(!0),O_=e=>(Un(e)?Wc(e):Fm(e)).bind(O_).orThunk(()=>I.some(e)),av=(e,o,n,s=!0)=>{var i;o.deleteContents();const d=O_(n).getOr(n),g=X.fromDom((i=e.dom.getParent(d.dom,e.dom.isBlock))!==null&&i!==void 0?i:n.dom);if(g.dom===e.getBody()?Uw(e,s):Hn(g)&&(zu(g),s&&e.selection.setCursorLocation(g.dom,0)),!yo(n,g)){const f=Rs(vs(g),n)?[]:Bd(g);me(f.concat(Vr(n)),y=>{!yo(y,g)&&!oc(y,g)&&Hn(y)&&$o(y)})}},bH=(e,o,n)=>Nn(e,o,n).isSome(),yH=(e,o)=>eh(e,o).isSome(),T_=(e,o)=>bs(e,o).isSome(),xH=e=>o=>yo(e,o),Ww=e=>rn(e,"td,th"),ol=(e,o)=>cd(X.fromDom(e),o),CH=e=>Qn(e.startTable,e.endTable,(o,n)=>{const s=T_(o,d=>yo(d,n)),i=T_(n,d=>yo(d,o));return!s&&!i?e:{...e,startTable:s?I.none():e.startTable,endTable:i?I.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),xM=e=>CH(e),D_=(e,o)=>{const n=ol(e.startContainer,o),s=ol(e.endContainer,o),i=n.isSome(),d=s.isSome(),g=Qn(n,s,yo).getOr(!1);return xM({startTable:n,endTable:s,isStartInTable:i,isEndInTable:d,isSameTable:g,isMultiTable:!g&&i&&d})},n2=(e,o)=>({start:e,end:o}),CM=(e,o,n)=>({rng:e,table:o,cells:n}),iv=nd.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),$w=(e,o)=>Li(X.fromDom(e),"td,th",o),wM=e=>!yo(e.start,e.end),jw=(e,o)=>cd(e.start,o).bind(n=>cd(e.end,o).bind(s=>bl(yo(n,s),n))),SM=(e,o)=>!wM(e)&&jw(e,o).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),fd=(e,o)=>{const n=$w(e.startContainer,o),s=$w(e.endContainer,o);return Qn(n,s,n2)},wH=e=>o=>cd(o,e).bind(n=>Ia(Ww(n)).map(s=>n2(o,s))),SH=e=>o=>cd(o,e).bind(n=>xn(Ww(n)).map(s=>n2(s,o))),r2=e=>o=>jw(o,e).map(n=>CM(o,n,Ww(n))),kM=(e,o,n,s)=>{if(n.collapsed||!e.forall(wM))return I.none();if(o.isSameTable){const i=e.bind(r2(s));return I.some({start:i,end:i})}else{const i=$w(n.startContainer,s),d=$w(n.endContainer,s),g=i.bind(wH(s)).bind(r2(s)),f=d.bind(SH(s)).bind(r2(s));return I.some({start:g,end:f})}},n1=(e,o)=>Ts(e,n=>yo(n,o)),M_=e=>Qn(n1(e.cells,e.rng.start),n1(e.cells,e.rng.end),(o,n)=>e.cells.slice(o,n+1)),lv=(e,o,n)=>e.exists(s=>SM(s,n)&&Jh(s.start,o)),Pl=(e,o)=>{const{startTable:n,endTable:s}=o,i=e.cloneRange();return n.each(d=>i.setStartAfter(d.dom)),s.each(d=>i.setEndBefore(d.dom)),i},s2=(e,o,n,s)=>kM(e,o,n,s).bind(({start:i,end:d})=>i.or(d)).bind(i=>{const{isSameTable:d}=o,g=M_(i).getOr([]);if(d&&i.cells.length===g.length)return I.some(iv.fullTable(i.table));if(g.length>0){if(d)return I.some(iv.partialTable(g,I.none()));{const f=Pl(n,o);return I.some(iv.partialTable(g,I.some({...o,rng:f})))}}else return I.none()}),tn=(e,o,n,s)=>kM(e,o,n,s).bind(({start:i,end:d})=>{const g=i.bind(M_).getOr([]),f=d.bind(M_).getOr([]);if(g.length>0&&f.length>0){const y=Pl(n,o);return I.some(iv.multiTable(g,f,y))}else return I.none()}),a2=(e,o)=>{const n=xH(e),s=fd(o,n),i=D_(o,n);return lv(s,o,n)?s.map(d=>iv.singleCellTable(o,d.start)):i.isMultiTable?tn(s,i,o,n):s2(s,i,o,n)},A_=e=>me(e,o=>{kr(o,"contenteditable"),zu(o)}),_M=(e,o)=>I.from(e.dom.getParent(o,e.dom.isBlock)).map(X.fromDom),R_=(e,o,n)=>{n.each(s=>{o?$o(s):(zu(s),e.selection.setCursorLocation(s.dom,0))})},i2=(e,o,n,s)=>{const i=n.cloneRange();s?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),l2(e,i,o,!1).each(d=>d())},Gw=e=>{const o=Qh(e),n=X.fromDom(e.selection.getNode());$s(n.dom)&&Hn(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),o.length>1&&nn(o,s=>yo(s,n))&&Dn(n,"data-mce-selected","1")},Kw=(e,o,n)=>I.some(()=>{const s=e.selection.getRng(),i=n.bind(({rng:d,isStartInTable:g})=>{const f=_M(e,g?d.endContainer:d.startContainer);d.deleteContents(),R_(e,g,f.filter(Hn));const y=g?o[0]:o[o.length-1];return i2(e,y,s,g),Hn(y)?I.none():I.some(g?o.slice(1):o.slice(0,-1))}).getOr(o);A_(i),Gw(e)}),Xw=(e,o,n,s)=>I.some(()=>{const i=e.selection.getRng(),d=o[0],g=n[n.length-1];i2(e,d,i,!0),i2(e,g,i,!1);const f=Hn(d)?o:o.slice(1),y=Hn(g)?n:n.slice(0,-1);A_(f.concat(y)),s.deleteContents(),Gw(e)}),l2=(e,o,n,s=!0)=>I.some(()=>{av(e,o,n,s)}),EM=(e,o)=>I.some(()=>hp(e,!1,o)),OM=(e,o,n)=>a2(o,n).bind(s=>s.fold(Le(l2,e),Le(EM,e),Le(Kw,e),Le(Xw,e))),TM=(e,o)=>Yw(e,o),DM=(e,o,n,s)=>qw(o,s).fold(()=>OM(e,o,n),i=>TM(e,i)),MM=(e,o,n)=>{const s=X.fromDom(e.getBody()),i=e.selection.getRng();return n.length!==0?Kw(e,n,I.none()):DM(e,s,i,o)},r1=(e,o)=>On(iu(o,e),cc),qw=(e,o)=>On(iu(o,e),Bm("caption")),B_=(e,o,n,s,i)=>tu(n,e.getBody(),i).bind(d=>r1(o,X.fromDom(d.getNode())).bind(g=>yo(g,s)?I.none():I.some(Be))),Yw=(e,o)=>I.some(()=>{zu(o),e.selection.setCursorLocation(o.dom,0)}),kH=(e,o,n,s)=>Qs(e.dom).bind(i=>Rl(e.dom).map(d=>o?n.isEqual(i)&&s.isEqual(d):n.isEqual(d)&&s.isEqual(i))).getOr(!0),AM=(e,o)=>Yw(e,o),RM=(e,o,n)=>qw(e,X.fromDom(n.getNode())).fold(()=>I.some(Be),s=>bl(!yo(s,o),Be)),BM=(e,o,n,s,i)=>tu(n,e.getBody(),i).fold(()=>I.some(Be),d=>kH(s,n,i,d)?AM(e,s):RM(o,s,d)),Qw=(e,o,n,s)=>{const i=Ce.fromRangeStart(e.selection.getRng());return r1(n,s).bind(d=>Hn(d)?Yw(e,d):B_(e,n,o,d,i))},NM=(e,o,n,s)=>{const i=Ce.fromRangeStart(e.selection.getRng());return Hn(s)?Yw(e,s):BM(e,n,o,s,i)},N_=(e,o)=>e?J5(o):eM(o),LM=(e,o)=>{const n=Ce.fromRangeStart(e.selection.getRng());return N_(o,n)||Ga(o,e.getBody(),n).exists(s=>N_(o,s))},HM=(e,o,n)=>{const s=X.fromDom(e.getBody());return qw(s,n).fold(()=>Qw(e,o,s,n).orThunk(()=>bl(LM(e,o),Be)),i=>NM(e,o,s,i))},Jw=(e,o)=>{const n=X.fromDom(e.selection.getStart(!0)),s=Qh(e);return e.selection.isCollapsed()&&s.length===0?HM(e,o,n):MM(e,n,s)},pp=(e,o)=>{let n=o;for(;n&&n!==e;){if(Ua(n)||xe(n))return n;n=n.parentNode}return null},IM=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],PM=ve.each,eS=e=>{const o=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(d,g)=>{if(d.nodeName!==g.nodeName||d.nodeType!==g.nodeType)return!1;const f=k=>{const D={};return PM(o.getAttribs(k),L=>{const P=L.nodeName.toLowerCase();P!=="style"&&!i(P)&&(D[P]=o.getAttrib(k,P))}),D},y=(k,D)=>{for(const L in k)if(At(k,L)){const P=D[L];if(Rn(P)||k[L]!==P)return!1;delete D[L]}for(const L in D)if(At(D,L))return!1;return!0};return pt(d)&&pt(g)&&(!y(f(d),f(g))||!y(o.parseStyle(o.getAttrib(d,"style")),o.parseStyle(o.getAttrib(g,"style"))))?!1:!Ki(d)&&!Ki(g)},i=d=>nn(IM,g=>Bo(d,g))||n.has(d);return{compare:s,isAttributeInternal:i}},L_=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),H_=e=>e.name==="summary",zM=(e,o)=>{let n=e;for(;n=n.walk();)o(n)},I_=(e,o,n,s)=>{const i=n.name;for(let d=0,g=e.length;d<g;d++){const f=e[d];if(f.name===i){const y=s.nodes[i];y?y.nodes.push(n):s.nodes[i]={filter:f,nodes:[n]}}}if(n.attributes)for(let d=0,g=o.length;d<g;d++){const f=o[d],y=f.name;if(y in n.attributes.map){const k=s.attributes[y];k?k.nodes.push(n):s.attributes[y]={filter:f,nodes:[n]}}}},FM=(e,o,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&zM(n,i=>{I_(e,o,i,s)}),s},P_=(e,o)=>{const n=(s,i)=>{ot(s,d=>{const g=ps(d.nodes);me(d.filter.callbacks,f=>{for(let y=g.length-1;y>=0;y--){const k=g[y];(!(i?k.attr(d.filter.name)!==void 0:k.name===d.filter.name)||io(k.parent))&&g.splice(y,1)}g.length>0&&f(g,d.filter.name,o)})})};n(e.nodes,!1),n(e.attributes,!0)},z_=(e,o,n,s={})=>{const i=FM(e,o,n);P_(i,s)},tS=(e,o,n,s)=>{if((e.pad_empty_with_br||o.insert)&&n(s)){const i=new qa("br",1);o.insert&&i.attr("data-mce-bogus","1"),s.empty().append(i)}else s.empty().append(new qa("#text",3)).value=jn},F_=e=>{var o;return c2(e,"#text")&&((o=e==null?void 0:e.firstChild)===null||o===void 0?void 0:o.value)===jn},c2=(e,o)=>{const n=e==null?void 0:e.firstChild;return Oe(n)&&n===e.lastChild&&n.name===o},oS=(e,o)=>{const n=e.getElementRule(o.name);return(n==null?void 0:n.paddEmpty)===!0},fp=(e,o,n,s)=>s.isEmpty(o,n,i=>oS(e,i)),VM=(e,o)=>Oe(e)&&(o(e)||e.name==="br"),nS=e=>{let o;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(o=n)}return I.from(o)},d2=(e,o,n=e.parent)=>{if(o.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const i of s)n&&!o.isValidChild(n.name,i.name)&&d2(i,o,n);e.unwrap()}},s1=(e,o,n,s=Be)=>{const i=o.getTextBlockElements(),d=o.getNonEmptyElements(),g=o.getWhitespaceElements(),f=ve.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,k=D=>D!==n&&!f[D.name];for(let D=0;D<e.length;D++){const L=e[D];let P,j,$;if(!L.parent||y.has(L))continue;if(i[L.name]&&L.parent.name==="li"){let U=L.next;for(;U&&i[U.name];)U.name="li",y.add(U),L.parent.insert(U,L.parent),U=U.next;L.unwrap();continue}const Z=[L];for(P=L.parent;P&&!o.isValidChild(P.name,L.name)&&k(P);P=P.parent)Z.push(P);if(P&&Z.length>1)if(rS(o,L,P))d2(L,o);else{Z.reverse(),j=Z[0].clone(),s(j);let U=j;for(let re=0;re<Z.length-1;re++){o.isValidChild(U.name,Z[re].name)&&re>0?($=Z[re].clone(),s($),U.append($)):$=U;for(let ie=Z[re].firstChild;ie&&ie!==Z[re+1];){const pe=ie.next;$.append(ie),ie=pe}U=$}fp(o,d,g,j)?P.insert(L,Z[0],!0):(P.insert(j,Z[0],!0),P.insert(L,j)),P=Z[0],(fp(o,d,g,P)||c2(P,"br"))&&P.empty().remove()}else if(L.parent){if(L.name==="li"){let U=L.prev;if(U&&(U.name==="ul"||U.name==="ol")){U.append(L);continue}if(U=L.next,U&&(U.name==="ul"||U.name==="ol")&&U.firstChild){U.insert(L,U.firstChild,!0);continue}const re=new qa("ul",1);s(re),L.wrap(re);continue}if(o.isValidChild(L.parent.name,"div")&&o.isValidChild("div",L.name)){const U=new qa("div",1);s(U),L.wrap(U)}else d2(L,o)}}},V_=(e,o)=>{let n=e;for(;n;){if(n.name===o)return!0;n=n.parent}return!1},rS=(e,o,n=o.parent)=>n?e.children[o.name]&&!e.isValidChild(n.name,o.name)||o.name==="a"&&V_(n,"a")?!0:H_(n)&&L_(o)?!((n==null?void 0:n.firstChild)===o&&(n==null?void 0:n.lastChild)===o):!1:!1,cv=(e,o,n,s)=>{const i=document.createRange();return i.setStart(e,o),i.setEnd(n,s),i},Z_=e=>{const o=Ce.fromRangeStart(e),n=Ce.fromRangeEnd(e),s=e.commonAncestorContainer;return Ga(!1,s,n).map(i=>!hc(o,n,s)&&hc(o,i,s)?cv(o.container(),o.offset(),i.container(),i.offset()):e).getOr(e)},u2=e=>e.collapsed?e:Z_(e),m2=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,vp=e=>e.name==="br"||e.value===jn,ZM=(e,o)=>e.getBlockElements()[o.name]&&m2(o)&&vp(o.firstChild),_H=(e,o)=>{const n=e.getNonEmptyElements();return Oe(o)&&(o.isEmpty(n)||ZM(e,o))},UM=(e,o)=>{let n=o.firstChild,s=o.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),_H(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},WM=e=>{var o,n;const s=e.firstChild,i=e.lastChild;return s&&s.nodeName==="META"&&((o=s.parentNode)===null||o===void 0||o.removeChild(s)),i&&i.id==="mce_marker"&&((n=i.parentNode)===null||n===void 0||n.removeChild(i)),e},EH=(e,o,n)=>{const s=o.serialize(n),i=e.createFragment(s);return WM(i)},OH=e=>{var o;return Et((o=e==null?void 0:e.childNodes)!==null&&o!==void 0?o:[],n=>n.nodeName==="LI")},U_=e=>e.data===jn||Co(e),cu=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&U_(e.firstChild),W_=e=>!e.firstChild||cu(e),sS=e=>e.length>0&&W_(e[e.length-1])?e.slice(0,-1):e,g2=(e,o)=>{const n=e.getParent(o,e.isBlock);return n&&n.nodeName==="LI"?n:null},TH=(e,o)=>!!g2(e,o),$M=(e,o)=>{const n=o.cloneRange(),s=o.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},DH=(e,o)=>{const n=Ce.before(e),s=Ba(o).next(n);return s?s.toRange():null},$_=(e,o)=>{const n=Ce.after(e),s=Ba(o).prev(n);return s?s.toRange():null},j_=(e,o,n,s)=>{const i=$M(e,s),d=e.parentNode;return d&&(d.insertBefore(i[0],e),ve.each(o,g=>{d.insertBefore(g,e)}),d.insertBefore(i[1],e),d.removeChild(e)),$_(o[o.length-1],n)},MH=(e,o,n)=>{const s=e.parentNode;return s&&ve.each(o,i=>{s.insertBefore(i,e)}),DH(e,n)},jM=(e,o,n,s)=>(s.insertAfter(o.reverse(),e),$_(o[0],n)),AH=(e,o,n,s)=>{const i=EH(o,e,s),d=g2(o,n.startContainer),g=sS(OH(i.firstChild)),f=1,y=2,k=o.getRoot(),D=L=>{const P=Ce.fromRangeStart(n),j=Ba(o.getRoot()),$=L===f?j.prev(P):j.next(P),Z=$==null?void 0:$.getNode();return Z?g2(o,Z)!==d:!0};return d?D(f)?MH(d,g,k):D(y)?jM(d,g,k,o):j_(d,g,k,n):null},h2=["pre"],GM=(e,o,n,s)=>{var i;const d=o.firstChild,g=o.lastChild,f=g.attr("data-mce-type")==="bookmark"?g.prev:g,y=d===f,k=It(h2,d.name);if(y&&k){const D=d.attr("contenteditable")!=="false",L=((i=e.getParent(n,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===d.name,P=I.from(pp(s,n)).forall(Ua);return D&&L&&P}else return!1},G_=$s,KM=(e,o,n)=>{if(Oe(n)){const s=e.getParent(o.endContainer,G_);return n===s&&Jh(X.fromDom(n),o)}else return!1},RH=(e,o,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(o),n);else{const i=n.firstChild,d=n.lastChild;!i||i===d&&i.nodeName==="BR"?e.dom.setHTML(n,o):e.selection.setContent(o,{no_events:!0})}},BH=(e,o,n)=>{I.from(e.getParent(o,"td,th")).map(X.fromDom).each(s=>pk(s,n))},NH=(e,o)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(o){const i=e.getBody(),d=eS(e);ve.each(s.select("*[data-mce-fragment]"),g=>{if(Oe(n[g.nodeName.toLowerCase()])&&q5(s,g)){for(let f=g.parentElement;Oe(f)&&f!==i&&!oo(s,g,f);f=f.parentElement)if(d.compare(f,g)){s.remove(g,!0);break}}})}},LH=e=>{let o=e;for(;o=o.walk();)o.type===1&&o.attr("data-mce-fragment","1")},HH=e=>{ve.each(e.getElementsByTagName("*"),o=>{o.removeAttribute("data-mce-fragment")})},XM=e=>!!e.getAttribute("data-mce-fragment"),IH=(e,o)=>Oe(o)&&!e.schema.getVoidElements()[o.nodeName],K_=(e,o)=>{var n,s,i;let d;const g=e.dom,f=e.selection;if(!o)return;f.scrollIntoView(o);const y=pp(e.getBody(),o);if(y&&g.getContentEditable(y)==="false"){g.remove(o),f.select(y);return}let k=g.createRng();const D=o.previousSibling;if(Ae(D)){k.setStart(D,(s=(n=D.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const j=o.nextSibling;Ae(j)&&(D.appendData(j.data),(i=j.parentNode)===null||i===void 0||i.removeChild(j))}else k.setStartBefore(o),k.setEndBefore(o);const L=j=>{let $=Ce.fromRangeStart(j);return $=Ba(e.getBody()).next($),$==null?void 0:$.toRange()},P=g.getParent(o,g.isBlock);if(g.remove(o),P&&g.isEmpty(P)){const j=G_(P);ac(X.fromDom(P)),k.setStart(P,0),k.setEnd(P,0),!j&&!XM(P)&&(d=L(k))?(k=d,g.remove(P)):g.add(P,g.create("br",j?{}:{"data-mce-bogus":"1"}))}f.setRng(k)},a1=e=>{const o=e.dom,n=u2(e.selection.getRng());e.selection.setRng(n);const s=o.getParent(n.startContainer,G_);KM(o,n,s)?l2(e,n,X.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&Ae(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},PH=e=>{for(let o=e;o;o=o.walk())if(o.attr("id")==="mce_marker")return I.some(o);return I.none()},zH=(e,o,n)=>{var s;return nn(n.children(),L_)&&((s=e.getParent(o,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},aS=(e,o,n)=>{var s,i;const d=e.selection,g=e.dom,f=e.parser,y=n.merge,k=up({validate:!0},e.schema),D='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(o=jr(o)),o.indexOf("{$caret}")===-1&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,D);let L=d.getRng();const P=L.startContainer,j=e.getBody();P===j&&d.isCollapsed()&&g.isBlock(j.firstChild)&&IH(e,j.firstChild)&&g.isEmpty(j.firstChild)&&(L=g.createRng(),L.setStart(j.firstChild,0),L.setEnd(j.firstChild,0),d.setRng(L)),d.isCollapsed()||a1(e);const $=d.getNode(),Z={context:$.nodeName.toLowerCase(),data:n.data,insert:!0},U=f.parse(o,Z);if(n.paste===!0&&UM(e.schema,U)&&TH(g,$))return L=AH(k,g,d.getRng(),U),L&&d.setRng(L),o;n.paste===!0&&GM(g,U,$,e.getBody())&&((s=U.firstChild)===null||s===void 0||s.unwrap()),LH(U);let re=U.lastChild;if(re&&re.attr("id")==="mce_marker"){const ie=re;for(re=re.prev;re;re=re.walk(!0))if(re.type===3||!g.isBlock(re.name)){re.parent&&e.schema.isValidChild(re.parent.name,"span")&&re.parent.insert(ie,re,re.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer($),!Z.invalid&&!zH(g,$,U))o=k.serialize(U),RH(e,o,$);else{e.selection.setContent(D);let ie=d.getNode(),pe;const Se=e.getBody();for(yr(ie)?ie=pe=Se:pe=ie;pe&&pe!==Se;)ie=pe,pe=pe.parentNode;o=ie===Se?Se.innerHTML:g.getOuterHTML(ie);const je=f.parse(o),Ye=PH(je),Ve=Ye.bind(nS).getOr(je);Ye.each(lt=>lt.replace(U));const Me=U.children(),we=(i=U.parent)!==null&&i!==void 0?i:je;U.unwrap();const ze=Et(Me,lt=>rS(e.schema,lt,we));s1(ze,e.schema,Ve),z_(f.getNodeFilters(),f.getAttributeFilters(),je),o=k.serialize(je),ie===Se?g.setHTML(Se,o):g.setOuterHTML(ie,o)}return NH(e,y),K_(e,g.get("mce_marker")),HH(e.getBody()),BH(g,d.getStart(),e.schema),St(e.schema,e.getBody(),d.getStart()),o},p2=e=>e instanceof qa,qM=e=>{Jf(e)&&Qs(e.getBody()).each(o=>{const n=o.getNode(),s=_a(n)?Qs(n).getOr(o):o;e.selection.setRng(s.toRange())})},X_=(e,o,n)=>{e.dom.setHTML(e.getBody(),o),n!==!0&&qM(e)},YM=(e,o,n,s)=>{if(n=jr(n),n.length===0||/^\s+$/.test(n)){const i='<br data-mce-bogus="1">';o.nodeName==="TABLE"?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(o.nodeName)&&(n="<li>"+i+"</li>");const d=Hs(e);return e.schema.isValidChild(o.nodeName.toLowerCase(),d.toLowerCase())?(n=i,n=e.dom.createHTML(d,cg(e),n)):n||(n=i),X_(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=up({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const i=ah(X.fromDom(o))?n:ve.trim(n);return X_(e,i,s.no_selection),{content:i,html:i}}},FH=(e,o,n,s)=>{z_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const i=up({validate:!1},e.schema).serialize(n),d=jr(ah(X.fromDom(o))?i:ve.trim(i));return X_(e,d,s.no_selection),{content:n,html:d}},i1=(e,o,n)=>I.from(e.getBody()).map(s=>p2(o)?FH(e,s,o,n):YM(e,s,o,n)).getOr({content:o,html:p2(n.content)?"":n.content}),q_=e=>te(e)?e:Ie,QM=(e,o,n)=>{let s=e.dom;const i=q_(n);for(;s.parentNode;){s=s.parentNode;const d=X.fromDom(s),g=o(d);if(g.isSome())return g;if(i(d))break}return I.none()},iS=(e,o,n)=>{const s=o(e),i=q_(n);return s.orThunk(()=>i(e)?I.none():QM(e,o,i))},dv=U0,Y_=(e,o,n)=>{const s=e.formatter.get(n);if(s)for(let i=0;i<s.length;i++){const d=s[i];if(qi(d)&&d.inherit===!1&&e.dom.is(o,d.selector))return!0}return!1},Q_=(e,o,n,s,i)=>{const d=e.dom.getRoot();if(o===d)return!1;const g=e.dom.getParent(o,f=>Y_(e,f,n)?!0:f.parentNode===d||!!um(e,f,n,s,!0));return!!um(e,g,n,s,i)},f2=(e,o,n)=>dr(n)&&dv(o,n.inline)||ud(n)&&dv(o,n.block)?!0:qi(n)?pt(o)&&e.is(o,n.selector):!1,JM=(e,o,n,s,i,d)=>{const g=n[s],f=s==="attributes";if(te(n.onmatch))return n.onmatch(o,n,s);if(g){if(Ed(g)){for(let y=0;y<g.length;y++)if(f?e.getAttrib(o,g[y]):wg(e,o,g[y]))return!0}else for(const y in g)if(At(g,y)){const k=f?e.getAttrib(o,y):wg(e,o,y),D=im(g[y],d),L=io(k)||Yl(k);if(L&&io(D))continue;if(i&&L&&!n.exact||(!i||n.exact)&&!dv(k,Ty(D,y)))return!1}}return!0},um=(e,o,n,s,i)=>{const d=e.formatter.get(n),g=e.dom;if(d&&pt(o))for(let f=0;f<d.length;f++){const y=d[f];if(f2(e.dom,o,y)&&JM(g,o,y,"attributes",i,s)&&JM(g,o,y,"styles",i,s)){const k=y.classes;if(k){for(let D=0;D<k.length;D++)if(!e.dom.hasClass(o,im(k[D],s)))return}return y}}},uv=(e,o,n,s,i)=>{if(s)return Q_(e,s,o,n,i);if(s=e.selection.getNode(),Q_(e,s,o,n,i))return!0;const d=e.selection.getStart();return!!(d!==s&&Q_(e,d,o,n,i))},eA=(e,o,n)=>{const s=[],i={},d=e.selection.getStart();return e.dom.getParent(d,g=>{for(let f=0;f<o.length;f++){const y=o[f];!i[y]&&um(e,g,y,n)&&(i[y]=!0,s.push(y))}},e.dom.getRoot()),s},J_=(e,o)=>{const n=i=>yo(i,X.fromDom(e.getBody())),s=(i,d)=>um(e,i.dom,d)?I.some(d):I.none();return I.from(e.selection.getStart(!0)).bind(i=>iS(X.fromDom(i),d=>gl(o,g=>s(d,g)),n)).getOrNull()},VH=(e,o)=>{const n=e.formatter.get(o),s=e.dom;if(n&&e.selection.isEditable()){const i=e.selection.getStart(),d=Sg(s,i);for(let g=n.length-1;g>=0;g--){const f=n[g];if(!qi(f))return!0;for(let y=d.length-1;y>=0;y--)if(s.is(d[y],f.selector))return!0}}return!1},ZH=(e,o,n)=>En(n,(s,i)=>{const d=np(e,i);return e.formatter.matchNode(o,i,{},d)?s.concat([i]):s},[]),mv=$r,eE=(e,o)=>e.importNode(o,!0),tE=e=>{if(e){const o=new br(e,e);for(let n=o.current();n;n=o.next())if(Ae(n))return n}return null},oE=e=>{const o=X.fromTag("span");return Ai(o,{id:Kh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ao(o,X.fromText(mv)),o},UH=e=>{const o=tE(e);return o&&o.data.charAt(0)===mv&&o.deleteData(0,1),o},nE=(e,o,n)=>{const s=e.dom,i=e.selection;if(fc(o))hp(e,!1,X.fromDom(o),n,!0);else{const d=i.getRng(),g=s.getParent(o,s.isBlock),f=d.startContainer,y=d.startOffset,k=d.endContainer,D=d.endOffset,L=UH(o);s.remove(o,!0),f===L&&y>0&&d.setStart(L,y-1),k===L&&D>0&&d.setEnd(L,D-1),g&&s.isEmpty(g)&&zu(X.fromDom(g)),i.setRng(d)}},gv=(e,o,n)=>{const s=e.dom,i=e.selection;if(o)nE(e,o,n);else if(o=am(e.getBody(),i.getStart()),!o)for(;o=s.get(Kh);)nE(e,o,n)},Mg=(e,o,n)=>{var s,i;const d=e.dom,g=d.getParent(n,Le(tp,e.schema));g&&d.isEmpty(g)?(s=n.parentNode)===null||s===void 0||s.replaceChild(o,n):(El(X.fromDom(n)),d.isEmpty(n)?(i=n.parentNode)===null||i===void 0||i.replaceChild(o,n):d.insertAfter(o,n))},tA=(e,o)=>(e.appendChild(o),o),lS=(e,o)=>{var n;const s=ml(e,(d,g)=>tA(d,g.cloneNode(!1)),o),i=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return tA(s,i.createTextNode(mv))},ur=(e,o,n,s,i,d)=>{const g=e.formatter,f=e.dom,y=Et(Cr(g.get()),D=>D!==s&&!Yn(D,"removeformat")),k=ZH(e,n,y);if(Et(k,D=>!Dy(e,D,s)).length>0){const D=n.cloneNode(!1);return f.add(o,D),g.remove(s,i,D,d),f.remove(D),I.some(D)}else return I.none()},rE=(e,o,n)=>{let s;const i=e.selection,d=e.formatter.get(o);if(!d)return;const g=i.getRng();let f=g.startOffset;const y=g.startContainer.nodeValue;s=am(e.getBody(),i.getStart());const k=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&f>0&&f<y.length&&k.test(y.charAt(f))&&k.test(y.charAt(f-1))){const D=i.getBookmark();g.collapse(!0);let L=md(e.dom,g,d);L=Ho(L),e.formatter.apply(o,n,L),i.moveToBookmark(D)}else{let D=s?tE(s):null;(!s||(D==null?void 0:D.data)!==mv)&&(s=eE(e.getDoc(),oE(!0).dom),D=s.firstChild,g.insertNode(s),f=1),e.formatter.apply(o,n,s),i.setCursorLocation(D,f)}},sE=(e,o,n,s)=>{const i=e.dom,d=e.selection;let g=!1;const f=e.formatter.get(o);if(!f)return;const y=d.getRng(),k=y.startContainer,D=y.startOffset;let L=k;Ae(k)&&(D!==k.data.length&&(g=!0),L=L.parentNode);const P=[];let j;for(;L;){if(um(e,L,o,n,s)){j=L;break}L.nextSibling&&(g=!0),P.push(L),L=L.parentNode}if(j)if(g){const $=d.getBookmark();y.collapse(!0);let Z=md(i,y,f,!0);Z=Ho(Z),e.formatter.remove(o,n,Z,s),d.moveToBookmark($)}else{const $=am(e.getBody(),j),Z=Oe($)?i.getParents(j.parentNode,at,$):[],U=oE(!1).dom;Mg(e,U,$??j);const re=ur(e,U,j,o,n,s),ie=lS([...P,...re.toArray(),...Z],U);$&&nE(e,$,Oe($)),d.setCursorLocation(ie,1),i.isEmpty(j)&&i.remove(j)}},Ag=(e,o,n)=>{const s=e.selection,i=e.getBody();gv(e,null,n),(o===8||o===46)&&s.isCollapsed()&&s.getStart().innerHTML===mv&&gv(e,am(i,s.getStart()),!0),(o===37||o===39)&&gv(e,am(i,s.getStart()),!0)},oA=e=>Ae(e)&&Su(e.data,jn),nA=e=>{e.on("mouseup keydown",o=>{Ag(e,o.keyCode,oA(e.selection.getRng().endContainer))})},hv=e=>{const o=oE(!1),n=lS(e,o.dom);return{caretContainer:o,caretPosition:Ce(n,0)}},rA=(e,o)=>{const{caretContainer:n,caretPosition:s}=hv(o);return Ur(X.fromDom(e),n),$o(X.fromDom(e)),s},WH=(e,o)=>{const{caretContainer:n,caretPosition:s}=hv(o);return e.insertNode(n.dom),s},l1=(e,o)=>{if(Ka(o.dom))return!1;const n=e.schema.getTextInlineElements();return At(n,po(o))&&!Ka(o.dom)&&!Fi(o.dom)},v2={},bp=ai(["pre"]),$H=(e,o)=>{v2[e]||(v2[e]=[]),v2[e].push(o)},yp=(e,o)=>{At(v2,e)&&me(v2[e],n=>{n(o)})};$H("pre",e=>{const o=e.selection.getRng(),n=i=>d=>{const g=d.previousSibling;return bp(g)&&It(i,g)},s=(i,d)=>{const g=X.fromDom(d),f=Bi(g).dom;$o(g),Pi(X.fromDom(i),[X.fromTag("br",f),X.fromTag("br",f),...Vr(g)])};if(!o.collapsed){const i=e.selection.getSelectedBlocks(),d=Et(Et(i,bp),n(i));me(d,g=>{s(g.previousSibling,g)})}});const zl=["fontWeight","fontStyle","color","fontSize","fontFamily"],cS=e=>qe(e.styles)&&nn(Cr(e.styles),o=>It(zl,o)),aE=e=>On(e,o=>dr(o)&&o.inline==="span"&&cS(o)),sA=(e,o)=>{const n=e.get(o);return Oo(n)?aE(n):I.none()},aA=(e,o)=>Ys(o,Ce.fromRangeStart(e)).isNone(),b2=(e,o)=>qs(o,Ce.fromRangeEnd(e)).exists(n=>!Co(n.getNode())||qs(o,n).isSome())===!1,iA=e=>o=>zd(o)&&e.isEditable(o),vd=e=>{const o=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(o.length===1)return aA(n,o[0])&&b2(n,o[0])?o:[];{const s=xn(o).filter(g=>aA(n,g)).toArray(),i=Ia(o).filter(g=>b2(n,g)).toArray(),d=o.slice(1,-1);return s.concat(d).concat(i)}},dS=e=>Et(vd(e),iA(e.dom)),iE=e=>Et(e.getSelectedBlocks(),iA(e.dom)),y2=ve.each,x2=e=>pt(e)&&!Ki(e)&&!Ka(e)&&!Fi(e),xp=(e,o)=>{for(let n=e;n;n=n[o]){if(Ae(n)&&sr(n.data))return e;if(pt(n)&&!Ki(n))return n}return e},uS=(e,o,n)=>{const s=eS(e),i=Sl(o)&&e.dom.isEditable(o),d=Sl(n)&&e.dom.isEditable(n);if(i&&d){const g=xp(o,"previousSibling"),f=xp(n,"nextSibling");if(s.compare(g,f)){for(let y=g.nextSibling;y&&y!==f;){const k=y;y=y.nextSibling,g.appendChild(k)}return e.dom.remove(f),ve.each(ve.grep(f.childNodes),y=>{g.appendChild(y)}),g}}return n},lA=(e,o,n,s)=>{var i;if(s&&o.merge_siblings!==!1){const d=(i=uS(e,ep(s),s))!==null&&i!==void 0?i:s;uS(e,d,ep(d,!0))}},cA=(e,o,n)=>{if(o.clear_child_styles){const s=o.links?"*:not(a)":"*";y2(e.select(s,n),i=>{x2(i)&&e.isEditable(i)&&y2(o.styles,(d,g)=>{e.setStyle(i,g,"")})})}},lE=(e,o,n)=>{y2(e.childNodes,s=>{x2(s)&&(o(s)&&n(s),s.hasChildNodes()&&lE(s,o,n))})},jH=(e,o)=>{o.nodeName==="SPAN"&&e.getAttribs(o).length===0&&e.remove(o,!0)},dA=(e,o)=>n=>!!(n&&wg(e,n,o)),uA=(e,o,n)=>s=>{e.setStyle(s,o,n),s.getAttribute("style")===""&&s.removeAttribute("style"),jH(e,s)},mm=nd.generate([{keep:[]},{rename:["name"]},{removed:[]}]),GH=/^(src|href|style)$/,mS=ve.each,pv=U0,KH=e=>/^(TR|TH|TD)$/.test(e.nodeName),cE=(e,o,n)=>e.isChildOf(o,n)&&o!==n&&!e.isBlock(n),dE=(e,o,n)=>{let s=o[n?"startContainer":"endContainer"],i=o[n?"startOffset":"endOffset"];if(pt(s)){const d=s.childNodes.length-1;!n&&i&&i--,s=s.childNodes[i>d?d:i]}return Ae(s)&&n&&i>=s.data.length&&(s=new br(s,e.getBody()).next()||s),Ae(s)&&!n&&i===0&&(s=new br(s,e.getBody()).prev()||s),s},mA=(e,o)=>{const n=o?"firstChild":"lastChild",s=e[n];return KH(e)&&s?e.nodeName==="TR"&&s[n]||s:e},uE=(e,o,n,s)=>{var i;const d=e.create(n,s);return(i=o.parentNode)===null||i===void 0||i.insertBefore(d,o),d.appendChild(o),d},gA=(e,o,n,s,i)=>{const d=X.fromDom(o),g=X.fromDom(e.create(s,i)),f=n?$c(d):Ld(d);return Pi(g,f),n?(Ur(d,g),Cl(g,d)):(sc(d,g),ao(g,d)),g.dom},XH=(e,o)=>o.links&&e.nodeName==="A",hA=(e,o,n)=>{const s=o.parentNode;let i;const d=e.dom,g=Hs(e);ud(n)&&s===d.getRoot()&&(!n.list_block||!pv(o,n.list_block))&&me(ps(o.childNodes),f=>{Cg(e,g,f.nodeName.toLowerCase())?i?i.appendChild(f):(i=uE(d,f,g),d.setAttribs(i,cg(e))):i=null}),!(M3(n)&&!pv(n.inline,o))&&d.remove(o,!0)},pA=(e,o,n)=>nr(e)?{name:o,value:null}:{name:e,value:im(o,n)},fA=(e,o)=>{e.getAttrib(o,"style")===""&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},vA=(e,o,n,s,i)=>{let d=!1;mS(n.styles,(g,f)=>{const{name:y,value:k}=pA(f,g,s),D=Ty(k,y);(n.remove_similar||se(k)||!pt(i)||pv(wg(e,i,y),D))&&e.setStyle(o,y,""),d=!0}),d&&fA(e,o)},qH=(e,o,n)=>{o==="removeformat"?me(iE(e.selection),s=>{me(zl,i=>e.dom.setStyle(s,i,"")),fA(e.dom,s)}):sA(e.formatter,o).each(s=>{me(iE(e.selection),i=>vA(e.dom,i,s,n,null))})},bA=(e,o,n,s,i)=>{const d=e.dom,g=eS(e),f=e.schema;if(dr(o)&&ph(f,o.inline)&&ng(f,s)&&s.parentElement===e.getBody())return hA(e,s,o),mm.removed();if(!o.ceFalseOverride&&s&&d.getContentEditableParent(s)==="false"||s&&!f2(d,s,o)&&!XH(s,o))return mm.keep();const y=s,k=o.preserve_attributes;if(dr(o)&&o.remove==="all"&&Oo(k)){const D=Et(d.getAttribs(y),L=>It(k,L.name.toLowerCase()));if(d.removeAllAttribs(y),me(D,L=>d.setAttrib(y,L.name,L.value)),D.length>0)return mm.rename("span")}if(o.remove!=="all"){vA(d,y,o,n,i),mS(o.attributes,(L,P)=>{const{name:j,value:$}=pA(P,L,n);if(o.remove_similar||se($)||!pt(i)||pv(d.getAttrib(i,j),$)){if(j==="class"){const Z=d.getAttrib(y,j);if(Z){let U="";if(me(Z.split(/\s+/),re=>{/mce\-\w+/.test(re)&&(U+=(U?" ":"")+re)}),U){d.setAttrib(y,j,U);return}}}if(GH.test(j)&&y.removeAttribute("data-mce-"+j),j==="style"&&ai(["li"])(y)&&d.getStyle(y,"list-style-type")==="none"){y.removeAttribute(j),d.setStyle(y,"list-style-type","none");return}j==="class"&&y.removeAttribute("className"),y.removeAttribute(j)}}),mS(o.classes,L=>{L=im(L,n),(!pt(i)||d.hasClass(i,L))&&d.removeClass(y,L)});const D=d.getAttribs(y);for(let L=0;L<D.length;L++){const P=D[L].nodeName;if(!g.isAttributeInternal(P))return mm.keep()}}return o.remove!=="none"?(hA(e,y,o),mm.removed()):mm.keep()},YH=(e,o,n,s,i)=>{let d;return o.parentNode&&me(Sg(e.dom,o.parentNode).reverse(),g=>{if(!d&&pt(g)&&g.id!=="_start"&&g.id!=="_end"){const f=um(e,g,n,s,i);f&&f.split!==!1&&(d=g)}}),d},QH=(e,o,n,s)=>bA(e,o,n,s,s).fold(Pe(s),i=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,i)),Pe(null)),JH=(e,o,n,s,i,d,g,f)=>{var y,k;let D,L;const P=e.dom;if(n){const j=n.parentNode;for(let $=s.parentNode;$&&$!==j;$=$.parentNode){let Z=P.clone($,!1);for(let U=0;U<o.length&&(Z=QH(e,o[U],f,Z),Z!==null);U++);Z&&(D&&Z.appendChild(D),L||(L=Z),D=Z)}d&&(!g.mixed||!P.isBlock(n))&&(s=(y=P.split(n,s))!==null&&y!==void 0?y:s),D&&L&&((k=i.parentNode)===null||k===void 0||k.insertBefore(D,i),L.appendChild(i),dr(g)&&lA(e,g,f,D))}return s},yA=(e,o,n,s,i)=>{const d=e.formatter.get(o),g=d[0],f=e.dom,y=e.selection,k=Z=>{const U=YH(e,Z,o,n,i);return JH(e,d,U,Z,Z,!0,g,n)},D=Z=>Ki(Z)&&pt(Z)&&(Z.id==="_start"||Z.id==="_end"),L=Z=>nn(d,U=>gm(e,U,n,Z,Z)),P=Z=>{const U=ps(Z.childNodes),re=L(Z)||nn(d,pe=>f2(f,Z,pe)),ie=Z.parentNode;if(!re&&Oe(ie)&&My(g)&&L(ie),g.deep&&U.length)for(let pe=0;pe<U.length;pe++)P(U[pe]);me(["underline","line-through","overline"],pe=>{pt(Z)&&e.dom.getStyle(Z,"text-decoration")===pe&&Z.parentNode&&dd(f,Z.parentNode)===pe&&gm(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:pe}},void 0,Z)})},j=Z=>{const U=f.get(Z?"_start":"_end");if(U){let re=U[Z?"firstChild":"lastChild"];return D(re)&&(re=re[Z?"firstChild":"lastChild"]),Ae(re)&&re.data.length===0&&(re=Z?U.previousSibling||U.nextSibling:U.nextSibling||U.previousSibling),f.remove(U,!0),re}else return null},$=Z=>{let U,re,ie=md(f,Z,d,Z.collapsed);if(g.split){if(ie=Ho(ie),U=dE(e,ie,!0),re=dE(e,ie),U!==re){if(U=mA(U,!0),re=mA(re,!1),cE(f,U,re)){const Se=I.from(U.firstChild).getOr(U);k(gA(f,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(cE(f,re,U)){const Se=I.from(re.lastChild).getOr(re);k(gA(f,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}U=uE(f,U,"span",{id:"_start","data-mce-type":"bookmark"}),re=uE(f,re,"span",{id:"_end","data-mce-type":"bookmark"});const pe=f.createRng();pe.setStartAfter(U),pe.setEndBefore(re),Lo(f,pe,Se=>{me(Se,je=>{!Ki(je)&&!Ki(je.parentNode)&&k(je)})}),k(U),k(re),U=j(!0),re=j()}else U=re=k(U);ie.startContainer=U.parentNode?U.parentNode:U,ie.startOffset=f.nodeIndex(U),ie.endContainer=re.parentNode?re.parentNode:re,ie.endOffset=f.nodeIndex(re)+1}Lo(f,ie,pe=>{me(pe,P)})};if(s){if(In(s)){const Z=f.createRng();Z.setStartBefore(s),Z.setEndAfter(s),$(Z)}else $(s);q0(e,o,s,n);return}!y.isCollapsed()||!dr(g)||Qh(e).length?(Xi(e,()=>Sy(e,$),Z=>dr(g)&&uv(e,o,n,Z)),e.nodeChanged()):sE(e,o,n,i),qH(e,o,n),q0(e,o,s,n)},xA=(e,o,n,s,i)=>{(s||e.selection.isEditable())&&yA(e,o,n,s,i)},gm=(e,o,n,s,i)=>bA(e,o,n,s,i).fold(Ie,d=>(e.dom.rename(s,d),!0),at),CA=ve.each,eI=(e,o,n,s)=>{const i=d=>{if(Sl(d)&&pt(d.parentNode)&&e.isEditable(d)){const g=dd(e,d.parentNode);e.getStyle(d,"color")&&g?e.setStyle(d,"text-decoration",g):e.getStyle(d,"text-decoration")===g&&e.setStyle(d,"text-decoration",null)}};o.styles&&(o.styles.color||o.styles.textDecoration)&&(ve.walk(s,i,"childNodes"),i(s))},tI=(e,o,n,s)=>{if(o.styles&&o.styles.backgroundColor){const i=dA(e,"fontSize");lE(s,d=>i(d)&&e.isEditable(d),uA(e,"backgroundColor",im(o.styles.backgroundColor,n)))}},oI=(e,o,n,s)=>{if(dr(o)&&(o.inline==="sub"||o.inline==="sup")){const i=dA(e,"fontSize");lE(s,g=>i(g)&&e.isEditable(g),uA(e,"fontSize",""));const d=Et(e.select(o.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(d,!0)}},wA=(e,o,n,s)=>{CA(o,i=>{dr(i)&&CA(e.dom.select(i.inline,s),d=>{x2(d)&&gm(e,i,n,d,i.exact?d:null)}),cA(e.dom,i,s)})},nI=(e,o,n,s,i)=>{const d=i.parentNode;um(e,d,n,s)&&gm(e,o,s,i)||o.merge_with_parents&&d&&e.dom.getParent(d,g=>um(e,g,n,s)?(gm(e,o,s,i),!0):!1)},gS=ve.each,rI=(e,o,n,s)=>{if(Jk(e)&&dr(o)&&n.parentNode){const i=db(e.schema),d=yH(X.fromDom(n),g=>Ka(g.dom));return Jr(i,s)&&Hn(X.fromDom(n.parentNode),!1)&&!d}else return!1},SA=(e,o,n,s)=>{if(gS(n.styles,(i,d)=>{e.setStyle(o,d,im(i,s))}),n.styles){const i=e.getAttrib(o,"style");i&&e.setAttrib(o,"data-mce-style",i)}},sI=(e,o,n,s)=>{const i=e.formatter.get(o),d=i[0],g=!s&&e.selection.isCollapsed(),f=e.dom,y=e.selection,k=($,Z=d)=>{te(Z.onformat)&&Z.onformat($,Z,n,s),SA(f,$,Z,n),gS(Z.attributes,(U,re)=>{f.setAttrib($,re,im(U,n))}),gS(Z.classes,U=>{const re=im(U,n);f.hasClass($,re)||f.addClass($,re)})},D=($,Z)=>{let U=!1;return gS($,re=>qi(re)?f.getContentEditable(Z)==="false"&&!re.ceFalseOverride||Oe(re.collapsed)&&re.collapsed!==g?!0:f.is(Z,re.selector)&&!Ka(Z)?(k(Z,re),U=!0,!1):!0:!1),U},L=$=>{if(J($)){const Z=f.create($);return k(Z),Z}else return null},P=($,Z,U)=>{const re=[];let ie=!0;const pe=d.inline||d.block,Se=L(pe),je=Me=>rp(d)&&um(e,Me,o,n),Ye=(Me,we,ze)=>{const lt=W0(d)&&tp(e.schema,Me)&&Cg(e,we,pe);return ze&&lt},Ve=(Me,we,ze,lt)=>{const ye=Me.nodeName.toLowerCase(),rt=Cg(e,pe,ye)&&Cg(e,we,pe),vt=!U&&Ae(Me)&&ih(Me.data),to=Ka(Me),So=!dr(d)||!$.isBlock(Me);return(ze||lt)&&rt&&!vt&&!to&&So};Lo($,Z,Me=>{let we;const ze=lt=>{let ye=!1,rt=ie,vt=!1;const to=lt.parentNode,So=to.nodeName.toLowerCase(),zs=$.getContentEditable(lt);Oe(zs)&&(rt=ie,ie=zs==="true",ye=!0,vt=Oy(e,lt));const Ja=ie&&!ye;if(Co(lt)&&!rI(e,d,lt,So)){we=null,ud(d)&&$.remove(lt);return}if(je(lt)){we=null;return}if(Ye(lt,So,Ja)){const ta=$.rename(lt,pe);k(ta),re.push(ta),we=null;return}if(qi(d)){let ta=D(i,lt);if(!ta&&Oe(to)&&My(d)&&(ta=D(i,to)),!dr(d)||ta){we=null;return}}Oe(Se)&&Ve(lt,So,Ja,vt)?(we||(we=$.clone(Se,!1),to.insertBefore(we,lt),re.push(we)),vt&&ye&&(ie=rt),we.appendChild(lt)):(we=null,me(ps(lt.childNodes),ze),ye&&(ie=rt),we=null)};me(Me,ze)}),d.links===!0&&me(re,Me=>{const we=ze=>{ze.nodeName==="A"&&k(ze,d),me(ps(ze.childNodes),we)};we(Me)}),me(re,Me=>{const we=ye=>{let rt=0;return me(ye.childNodes,vt=>{!Ey(vt)&&!Ki(vt)&&rt++}),rt},ze=ye=>On(ye.childNodes,xg).filter(rt=>$.getContentEditable(rt)!=="false"&&f2($,rt,d)).map(rt=>{const vt=$.clone(rt,!1);return k(vt),$.replace(vt,ye,!0),$.remove(rt,!0),vt}).getOr(ye),lt=we(Me);if((re.length>1||!$.isBlock(Me))&&lt===0){$.remove(Me,!0);return}(dr(d)||ud(d)&&d.wrapper)&&(!d.exact&&lt===1&&(Me=ze(Me)),wA(e,i,n,Me),nI(e,d,o,n,Me),tI($,d,n,Me),eI($,d,n,Me),oI($,d,n,Me),lA(e,d,n,Me))})},j=In(s)?s:y.getNode();if(f.getContentEditable(j)==="false"&&!Oy(e,j)){s=j,D(i,s),Ly(e,o,s,n);return}if(d){if(s)if(In(s)){if(!D(i,s)){const $=f.createRng();$.setStartBefore(s),$.setEndAfter(s),P(f,md(f,$,i),!0)}}else P(f,s,!0);else!g||!dr(d)||Qh(e).length?(y.setRng(u2(y.getRng())),Xi(e,()=>{Sy(e,($,Z)=>{const U=Z?$:md(f,$,i);P(f,U,!1)})},at),e.nodeChanged()):rE(e,o,n),sA(e.formatter,o).each($=>{me(dS(e.selection),Z=>SA(f,Z,$,n))});yp(o,e)}Ly(e,o,s,n)},kA=(e,o,n,s)=>{(s||e.selection.isEditable())&&sI(e,o,n,s)},_A=e=>At(e,"vars"),aI=(e,o)=>{e.set({}),o.on("NodeChange",n=>{mE(o,n.element,e.get())}),o.on("FormatApply FormatRemove",n=>{const s=I.from(n.node).map(i=>In(i)?i:i.startContainer).bind(i=>pt(i)?I.some(i):I.from(i.parentElement)).getOrThunk(()=>EA(o));mE(o,s,e.get())})},EA=e=>e.selection.getStart(),OA=(e,o,n,s,i)=>xu(o,d=>{const g=e.formatter.matchNode(d,n,i??{},s);return!Rn(g)},d=>Y_(e,d,n)?!0:s?!1:Oe(e.formatter.matchNode(d,n,i,!0))),hS=(e,o)=>{const n=o??EA(e);return Et(Sg(e.dom,n),s=>pt(s)&&!Fi(s))},mE=(e,o,n)=>{const s=hS(e,o);ot(n,(i,d)=>{const g=f=>{const y=OA(e,s,d,f.similar,_A(f)?f.vars:void 0),k=y.isSome();if(f.state.get()!==k){f.state.set(k);const D=y.getOr(o);_A(f)?f.callback(k,{node:D,format:d,parents:s}):me(f.callbacks,L=>L(k,{node:D,format:d,parents:s}))}};me([i.withSimilar,i.withoutSimilar],g),me(i.withVars,g)})},C2=(e,o,n,s,i,d)=>{const g=o.get();me(n.split(","),f=>{const y=Go(g,f).getOrThunk(()=>{const D={withSimilar:{state:Tr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Tr(!1),similar:!1,callbacks:[]},withVars:[]};return g[f]=D,D}),k=()=>{const D=hS(e);return OA(e,D,f,i,d).isSome()};if(Rn(d)){const D=i?y.withSimilar:y.withoutSimilar;D.callbacks.push(s),D.callbacks.length===1&&D.state.set(k())}else y.withVars.push({state:Tr(k()),similar:i,vars:d,callback:s})}),o.set(g)},TA=(e,o,n)=>{const s=e.get();me(o.split(","),i=>Go(s,i).each(d=>{s[i]={withSimilar:{...d.withSimilar,callbacks:Et(d.withSimilar.callbacks,g=>g!==n)},withoutSimilar:{...d.withoutSimilar,callbacks:Et(d.withoutSimilar.callbacks,g=>g!==n)},withVars:Et(d.withVars,g=>g.callback!==n)}})),e.set(s)},w2=(e,o,n,s,i,d)=>(C2(e,o,n,s,i,d),{unbind:()=>TA(o,n,s)}),S2=(e,o,n,s)=>{const i=e.formatter.get(o);i&&(uv(e,o,n,s)&&(!("toggle"in i[0])||i[0].toggle)?xA(e,o,n,s):kA(e,o,n,s))},gE=ve.explode,DA=()=>{const e={};return{addFilter:(o,n)=>{me(gE(o),s=>{At(e,s)||(e[s]={name:s,callbacks:[]}),e[s].callbacks.push(n)})},getFilters:()=>Gl(e),removeFilter:(o,n)=>{me(gE(o),s=>{if(At(e,s))if(Oe(n)){const i=e[s],d=Et(i.callbacks,g=>g!==n);d.length>0?i.callbacks=d:delete e[s]}else delete e[s]})}}},iI=(e,o)=>{me(o,n=>{e.attr(n,null)})},lI=(e,o,n)=>{e.addNodeFilter("font",s=>{me(s,i=>{const d=o.parse(i.attr("style")),g=i.attr("color"),f=i.attr("face"),y=i.attr("size");g&&(d.color=g),f&&(d["font-family"]=f),y&&wr(y).each(k=>{d["font-size"]=n[k-1]}),i.name="span",i.attr("style",o.serialize(d)),iI(i,["color","face","size"])})})},cI=(e,o,n)=>{e.addNodeFilter("strike",s=>{const i=o.type!=="html4";me(s,d=>{if(i)d.name="s";else{const g=n.parse(d.attr("style"));g["text-decoration"]="line-through",d.name="span",d.attr("style",n.serialize(g))}})})},MA=(e,o,n)=>{var s;const i=n0();o.convert_fonts_to_spans&&lI(e,i,ve.explode((s=o.font_size_legacy_values)!==null&&s!==void 0?s:"")),cI(e,n,i)},dI=(e,o,n)=>{o.inline_styles&&MA(e,o,n)},hE=(e,o,n)=>{o.addNodeFilter("br",(s,i,d)=>{const g=ve.extend({},n.getBlockElements()),f=n.getNonEmptyElements(),y=n.getWhitespaceElements();g.body=1;const k=D=>D.name in g||Jo(n,D);for(let D=0,L=s.length;D<L;D++){let P=s[D],j=P.parent;if(j&&k(j)&&P===j.lastChild){let $=P.prev;for(;$;){const Z=$.name;if(Z!=="span"||$.attr("data-mce-type")!=="bookmark"){Z==="br"&&(P=null);break}$=$.prev}if(P&&(P.remove(),fp(n,f,y,j))){const Z=n.getElementRule(j.name);Z&&(Z.removeEmpty?j.remove():Z.paddEmpty&&tS(e,d,k,j))}}else{let $=P;for(;j&&j.firstChild===$&&j.lastChild===$&&($=j,!g[j.name]);)j=j.parent;if($===j){const Z=new qa("#text",3);Z.value=jn,P.replace(Z)}}}})},uI=e=>fetch(e).then(o=>o.ok?o.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),pS=e=>{const o=/([a-z0-9+\/=\s]+)/i.exec(e);return o?o[1]:""},fS=e=>{const[o,...n]=e.split(","),s=n.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const d=i[2]===";base64",g=d?pS(s):decodeURIComponent(s);return I.some({type:i[1],data:g,base64Encoded:d})}else return I.none()},Hr=(e,o,n=!0)=>{let s=o;if(n)try{s=atob(o)}catch{return I.none()}const i=new Uint8Array(s.length);for(let d=0;d<i.length;d++)i[d]=s.charCodeAt(d);return I.some(new Blob([i],{type:e}))},bd=e=>new Promise((o,n)=>{fS(e).bind(({type:s,data:i,base64Encoded:d})=>Hr(s,i,d)).fold(()=>n("Invalid data URI"),o)}),vS=e=>Bo(e,"blob:")?uI(e):Bo(e,"data:")?bd(e):Promise.reject("Unknown URI format"),Rg=e=>new Promise((o,n)=>{const s=new FileReader;s.onloadend=()=>{o(s.result)},s.onerror=()=>{var i;n((i=s.error)===null||i===void 0?void 0:i.message)},s.readAsDataURL(e)});let Cp=0;const mI=e=>(e||"blobid")+Cp++,AA=(e,o,n)=>fS(e).bind(({data:s,type:i,base64Encoded:d})=>{if(o&&!d)return I.none();{const g=d?s:btoa(s);return n(g,i)}}),c1=(e,o,n)=>{const s=e.create(mI(),o,n);return e.add(s),s},d1=(e,o,n=!1)=>AA(o,n,(s,i)=>I.from(e.getByData(s,i)).orThunk(()=>Hr(i,s).map(d=>c1(e,d,s)))),fv=(e,o)=>{const n=()=>Promise.reject("Invalid data URI");if(Bo(o,"blob:")){const s=e.getByUri(o);return Oe(s)?Promise.resolve(s):vS(o).then(i=>Rg(i).then(d=>AA(d,!1,g=>I.some(c1(e,i,g))).getOrThunk(n)))}else return Bo(o,"data:")?d1(e,o).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},RA=e=>Oe(e.attr("data-mce-bogus")),pE=e=>e.attr("src")===ae.transparentSrc||Oe(e.attr("data-mce-placeholder")),BA=(e,o)=>{const{blob_cache:n}=o;if(n){const s=i=>{const d=i.attr("src");pE(i)||RA(i)||io(d)||d1(n,d,!0).each(g=>{i.attr("src",g.blobUri())})};e.addAttributeFilter("src",i=>me(i,s))}},bS=(e,o)=>Bo(e,`${o}/`),gI=(e,o,n,s,i)=>{let d;Rn(e)?d="iframe":bS(e,"image")?d="img":bS(e,"video")?d="video":bS(e,"audio")?d="audio":d="iframe";const g=new qa(d,1);return g.attr(d==="audio"?{src:o}:{src:o,width:n,height:s}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&i&&g.attr("sandbox",""),g},hI=(e,o)=>{const n=e.schema;o.remove_trailing_brs&&hE(o,e,n),e.addAttributeFilter("href",i=>{let d=i.length;const g=y=>y.split(" ").filter(k=>k.length>0).concat(["noopener"]).sort().join(" "),f=y=>{const k=y?ve.trim(y):"";return/\b(noopener)\b/g.test(k)?k:g(k)};if(!o.allow_unsafe_link_target)for(;d--;){const y=i[d];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",f(y.attr("rel")))}}),o.allow_html_in_named_anchor||e.addAttributeFilter("id,name",i=>{let d=i.length,g,f,y,k;for(;d--;)if(k=i[d],k.name==="a"&&k.firstChild&&!k.attr("href"))for(y=k.parent,g=k.lastChild;g&&y;)f=g.prev,y.insert(g,k),g=f}),o.fix_list_elements&&e.addNodeFilter("ul,ol",i=>{let d=i.length,g,f;for(;d--;)if(g=i[d],f=g.parent,f&&(f.name==="ul"||f.name==="ol"))if(g.prev&&g.prev.name==="li")g.prev.append(g);else{const y=new qa("li",1);y.attr("style","list-style-type: none"),g.wrap(y)}});const s=n.getValidClasses();o.validate&&s&&e.addAttributeFilter("class",i=>{var d;let g=i.length;for(;g--;){const f=i[g],y=(d=f.attr("class"))!==null&&d!==void 0?d:"",k=ve.explode(y," ");let D="";for(let L=0;L<k.length;L++){const P=k[L];let j=!1,$=s["*"];$&&$[P]&&(j=!0),$=s[f.name],!j&&$&&$[P]&&(j=!0),j&&(D&&(D+=" "),D+=P)}D.length||(D=null),f.attr("class",D)}}),BA(e,o),o.convert_unsafe_embeds&&e.addNodeFilter("object,embed",i=>me(i,d=>{d.replace(gI(d.attr("type"),d.name==="object"?d.attr("data"):d.attr("src"),d.attr("width"),d.attr("height"),o.sandbox_iframes))})),o.sandbox_iframes&&e.addNodeFilter("iframe",i=>me(i,d=>d.attr("sandbox","")))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:fE,setPrototypeOf:NA,isFrozen:pI,getPrototypeOf:fI,getOwnPropertyDescriptor:vI}=Object;let{freeze:nl,seal:yc,create:LA}=Object,{apply:u1,construct:yS}=typeof Reflect<"u"&&Reflect;nl||(nl=function(e){return e}),yc||(yc=function(e){return e}),u1||(u1=function(e,o,n){return e.apply(o,n)}),yS||(yS=function(e,o){return new e(...o)});const xS=xc(Array.prototype.forEach),vE=xc(Array.prototype.pop),k2=xc(Array.prototype.push),_2=xc(String.prototype.toLowerCase),bE=xc(String.prototype.toString),HA=xc(String.prototype.match),vv=xc(String.prototype.replace),IA=xc(String.prototype.indexOf),PA=xc(String.prototype.trim),yd=xc(Object.prototype.hasOwnProperty),bi=xc(RegExp.prototype.test),bv=bI(TypeError);function xc(e){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return u1(e,o,s)}}function bI(e){return function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return yS(e,n)}}function ln(e,o){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_2;NA&&NA(e,null);let s=o.length;for(;s--;){let i=o[s];if(typeof i=="string"){const d=n(i);d!==i&&(pI(o)||(o[s]=d),i=d)}e[i]=!0}return e}function yE(e){for(let o=0;o<e.length;o++)yd(e,o)||(e[o]=null);return e}function du(e){const o=LA(null);for(const[n,s]of fE(e))yd(e,n)&&(Array.isArray(s)?o[n]=yE(s):s&&typeof s=="object"&&s.constructor===Object?o[n]=du(s):o[n]=s);return o}function yv(e,o){for(;e!==null;){const s=vI(e,o);if(s){if(s.get)return xc(s.get);if(typeof s.value=="function")return xc(s.value)}e=fI(e)}function n(){return null}return n}const xE=nl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xv=nl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),CE=nl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yI=nl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hm=nl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wE=nl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SE=nl(["#text"]),Cv=nl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),CS=nl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wS=nl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),E2=nl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zA=yc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xI=yc(/<%[\w\W]*|[\w\W]*%>/gm),CI=yc(/\${[\w\W]*}/gm),wI=yc(/^data-[\-\w.\u00B7-\uFFFF]/),kE=yc(/^aria-[\-\w]+$/),FA=yc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),VA=yc(/^(?:\w+script|data):/i),SI=yc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ZA=yc(/^html$/i),kI=yc(/^[a-z][.\w]*(-[.\w]+)+$/i);var UA=Object.freeze({__proto__:null,MUSTACHE_EXPR:zA,ERB_EXPR:xI,TMPLIT_EXPR:CI,DATA_ATTR:wI,ARIA_ATTR:kE,IS_ALLOWED_URI:FA,IS_SCRIPT_OR_DATA:VA,ATTR_WHITESPACE:SI,DOCTYPE_NAME:ZA,CUSTOM_ELEMENT:kI});const O2={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},_I=function(){return typeof window>"u"?null:window},EI=function(e,o){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";o&&o.hasAttribute(s)&&(n=o.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function WA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_I();const o=le=>WA(le);if(o.version="3.1.7",o.removed=[],!e||!e.document||e.document.nodeType!==O2.document)return o.isSupported=!1,o;let{document:n}=e;const s=n,i=s.currentScript,{DocumentFragment:d,HTMLTemplateElement:g,Node:f,Element:y,NodeFilter:k,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:L,DOMParser:P,trustedTypes:j}=e,$=y.prototype,Z=yv($,"cloneNode"),U=yv($,"remove"),re=yv($,"nextSibling"),ie=yv($,"childNodes"),pe=yv($,"parentNode");if(typeof g=="function"){const le=n.createElement("template");le.content&&le.content.ownerDocument&&(n=le.content.ownerDocument)}let Se,je="";const{implementation:Ye,createNodeIterator:Ve,createDocumentFragment:Me,getElementsByTagName:we}=n,{importNode:ze}=s;let lt={};o.isSupported=typeof fE=="function"&&typeof pe=="function"&&Ye&&Ye.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ye,ERB_EXPR:rt,TMPLIT_EXPR:vt,DATA_ATTR:to,ARIA_ATTR:So,IS_SCRIPT_OR_DATA:zs,ATTR_WHITESPACE:Ja,CUSTOM_ELEMENT:ta}=UA;let{IS_ALLOWED_URI:xi}=UA,Fo=null;const Dc=ln({},[...xE,...xv,...CE,...hm,...SE]);let Gn=null;const Rt=ln({},[...Cv,...CS,...wS,...E2]);let He=Object.seal(LA(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,Vt=null,mn=!0,co=!0,ya=!1,bu=!0,Mc=!1,ll=!0,Ci=!1,t=!1,r=!1,a=!1,l=!1,u=!1,h=!0,v=!1;const x="user-content-";let C=!0,_=!1,M={},A=null;const B=ln({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let F=null;const oe=ln({},["audio","video","img","source","image","track"]);let ce=null;const De=ln({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let Ne=fe,be=!1,Fe=null;const et=ln({},[Q,ee,fe],bE);let ct=null;const eo=["application/xhtml+xml","text/html"],K="text/html";let G=null,he=null;const Ee=n.createElement("form"),dt=function(le){return le instanceof RegExp||le instanceof Function},_e=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(he&&he===le)){if((!le||typeof le!="object")&&(le={}),le=du(le),ct=eo.indexOf(le.PARSER_MEDIA_TYPE)===-1?K:le.PARSER_MEDIA_TYPE,G=ct==="application/xhtml+xml"?bE:_2,Fo=yd(le,"ALLOWED_TAGS")?ln({},le.ALLOWED_TAGS,G):Dc,Gn=yd(le,"ALLOWED_ATTR")?ln({},le.ALLOWED_ATTR,G):Rt,Fe=yd(le,"ALLOWED_NAMESPACES")?ln({},le.ALLOWED_NAMESPACES,bE):et,ce=yd(le,"ADD_URI_SAFE_ATTR")?ln(du(De),le.ADD_URI_SAFE_ATTR,G):De,F=yd(le,"ADD_DATA_URI_TAGS")?ln(du(oe),le.ADD_DATA_URI_TAGS,G):oe,A=yd(le,"FORBID_CONTENTS")?ln({},le.FORBID_CONTENTS,G):B,yt=yd(le,"FORBID_TAGS")?ln({},le.FORBID_TAGS,G):{},Vt=yd(le,"FORBID_ATTR")?ln({},le.FORBID_ATTR,G):{},M=yd(le,"USE_PROFILES")?le.USE_PROFILES:!1,mn=le.ALLOW_ARIA_ATTR!==!1,co=le.ALLOW_DATA_ATTR!==!1,ya=le.ALLOW_UNKNOWN_PROTOCOLS||!1,bu=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Mc=le.SAFE_FOR_TEMPLATES||!1,ll=le.SAFE_FOR_XML!==!1,Ci=le.WHOLE_DOCUMENT||!1,a=le.RETURN_DOM||!1,l=le.RETURN_DOM_FRAGMENT||!1,u=le.RETURN_TRUSTED_TYPE||!1,r=le.FORCE_BODY||!1,h=le.SANITIZE_DOM!==!1,v=le.SANITIZE_NAMED_PROPS||!1,C=le.KEEP_CONTENT!==!1,_=le.IN_PLACE||!1,xi=le.ALLOWED_URI_REGEXP||FA,Ne=le.NAMESPACE||fe,He=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&dt(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(He.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&dt(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(He.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(He.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mc&&(co=!1),l&&(a=!0),M&&(Fo=ln({},SE),Gn=[],M.html===!0&&(ln(Fo,xE),ln(Gn,Cv)),M.svg===!0&&(ln(Fo,xv),ln(Gn,CS),ln(Gn,E2)),M.svgFilters===!0&&(ln(Fo,CE),ln(Gn,CS),ln(Gn,E2)),M.mathMl===!0&&(ln(Fo,hm),ln(Gn,wS),ln(Gn,E2))),le.ADD_TAGS&&(Fo===Dc&&(Fo=du(Fo)),ln(Fo,le.ADD_TAGS,G)),le.ADD_ATTR&&(Gn===Rt&&(Gn=du(Gn)),ln(Gn,le.ADD_ATTR,G)),le.ADD_URI_SAFE_ATTR&&ln(ce,le.ADD_URI_SAFE_ATTR,G),le.FORBID_CONTENTS&&(A===B&&(A=du(A)),ln(A,le.FORBID_CONTENTS,G)),C&&(Fo["#text"]=!0),Ci&&ln(Fo,["html","head","body"]),Fo.table&&(ln(Fo,["tbody"]),delete yt.tbody),le.TRUSTED_TYPES_POLICY){if(typeof le.TRUSTED_TYPES_POLICY.createHTML!="function")throw bv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=le.TRUSTED_TYPES_POLICY,je=Se.createHTML("")}else Se===void 0&&(Se=EI(j,i)),Se!==null&&typeof je=="string"&&(je=Se.createHTML(""));nl&&nl(le),he=le}},Ue=ln({},["mi","mo","mn","ms","mtext"]),Je=ln({},["annotation-xml"]),xt=ln({},["title","style","font","a","script"]),no=ln({},[...xv,...CE,...yI]),Do=ln({},[...hm,...wE]),ko=function(le){let $t=pe(le);(!$t||!$t.tagName)&&($t={namespaceURI:Ne,tagName:"template"});const Mt=_2(le.tagName),Sn=_2($t.tagName);return Fe[le.namespaceURI]?le.namespaceURI===ee?$t.namespaceURI===fe?Mt==="svg":$t.namespaceURI===Q?Mt==="svg"&&(Sn==="annotation-xml"||Ue[Sn]):!!no[Mt]:le.namespaceURI===Q?$t.namespaceURI===fe?Mt==="math":$t.namespaceURI===ee?Mt==="math"&&Je[Sn]:!!Do[Mt]:le.namespaceURI===fe?$t.namespaceURI===ee&&!Je[Sn]||$t.namespaceURI===Q&&!Ue[Sn]?!1:!Do[Mt]&&(xt[Mt]||!no[Mt]):!!(ct==="application/xhtml+xml"&&Fe[le.namespaceURI]):!1},fn=function(le){k2(o.removed,{element:le});try{pe(le).removeChild(le)}catch{U(le)}},vn=function(le,$t){try{k2(o.removed,{attribute:$t.getAttributeNode(le),from:$t})}catch{k2(o.removed,{attribute:null,from:$t})}if($t.removeAttribute(le),le==="is"&&!Gn[le])if(a||l)try{fn($t)}catch{}else try{$t.setAttribute(le,"")}catch{}},Ac=function(le){let $t=null,Mt=null;if(r)le="<remove></remove>"+le;else{const Qr=HA(le,/^[\r\n\t ]+/);Mt=Qr&&Qr[0]}ct==="application/xhtml+xml"&&Ne===fe&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");const Sn=Se?Se.createHTML(le):le;if(Ne===fe)try{$t=new P().parseFromString(Sn,ct)}catch{}if(!$t||!$t.documentElement){$t=Ye.createDocument(Ne,"template",null);try{$t.documentElement.innerHTML=be?je:Sn}catch{}}const oa=$t.body||$t.documentElement;return le&&Mt&&oa.insertBefore(n.createTextNode(Mt),oa.childNodes[0]||null),Ne===fe?we.call($t,Ci?"html":"body")[0]:Ci?$t.documentElement:oa},Kn=function(le){return Ve.call(le.ownerDocument||le,le,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},Rc=function(le){return le instanceof L&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof D)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},yu=function(le){return typeof f=="function"&&le instanceof f},$l=function(le,$t,Mt){lt[le]&&xS(lt[le],Sn=>{Sn.call(o,$t,Mt,he)})},zp=function(le){let $t=null;if($l("beforeSanitizeElements",le,null),Rc(le))return fn(le),!0;const Mt=G(le.nodeName);if($l("uponSanitizeElement",le,{tagName:Mt,allowedTags:Fo}),le.hasChildNodes()&&!yu(le.firstElementChild)&&bi(/<[/\w]/g,le.innerHTML)&&bi(/<[/\w]/g,le.textContent)||le.nodeType===O2.progressingInstruction||ll&&le.nodeType===O2.comment&&bi(/<[/\w]/g,le.data))return fn(le),!0;if(!Fo[Mt]||yt[Mt]){if(!yt[Mt]&&Ax(Mt)&&(He.tagNameCheck instanceof RegExp&&bi(He.tagNameCheck,Mt)||He.tagNameCheck instanceof Function&&He.tagNameCheck(Mt)))return!1;if(C&&!A[Mt]){const Sn=pe(le)||le.parentNode,oa=ie(le)||le.childNodes;if(oa&&Sn){const Qr=oa.length;for(let xm=Qr-1;xm>=0;--xm){const Bc=Z(oa[xm],!0);Bc.__removalCount=(le.__removalCount||0)+1,Sn.insertBefore(Bc,re(le))}}}return fn(le),!0}return le instanceof y&&!ko(le)||(Mt==="noscript"||Mt==="noembed"||Mt==="noframes")&&bi(/<\/no(script|embed|frames)/i,le.innerHTML)?(fn(le),!0):(Mc&&le.nodeType===O2.text&&($t=le.textContent,xS([ye,rt,vt],Sn=>{$t=vv($t,Sn," ")}),le.textContent!==$t&&(k2(o.removed,{element:le.cloneNode()}),le.textContent=$t)),$l("afterSanitizeElements",le,null),!1)},Mx=function(le,$t,Mt){if(h&&($t==="id"||$t==="name")&&(Mt in n||Mt in Ee))return!1;if(!(co&&!Vt[$t]&&bi(to,$t))&&!(mn&&bi(So,$t))){if(!Gn[$t]||Vt[$t]){if(!(Ax(le)&&(He.tagNameCheck instanceof RegExp&&bi(He.tagNameCheck,le)||He.tagNameCheck instanceof Function&&He.tagNameCheck(le))&&(He.attributeNameCheck instanceof RegExp&&bi(He.attributeNameCheck,$t)||He.attributeNameCheck instanceof Function&&He.attributeNameCheck($t))||$t==="is"&&He.allowCustomizedBuiltInElements&&(He.tagNameCheck instanceof RegExp&&bi(He.tagNameCheck,Mt)||He.tagNameCheck instanceof Function&&He.tagNameCheck(Mt))))return!1}else if(!ce[$t]&&!bi(xi,vv(Mt,Ja,""))&&!(($t==="src"||$t==="xlink:href"||$t==="href")&&le!=="script"&&IA(Mt,"data:")===0&&F[le])&&!(ya&&!bi(zs,vv(Mt,Ja,"")))&&Mt)return!1}return!0},Ax=function(le){return le!=="annotation-xml"&&HA(le,ta)},jg=function(le){$l("beforeSanitizeAttributes",le,null);const{attributes:$t}=le;if(!$t)return;const Mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Gn};let Sn=$t.length;for(;Sn--;){const oa=$t[Sn],{name:Qr,namespaceURI:xm,value:Bc}=oa,Cm=G(Qr);let xa=Qr==="value"?Bc:PA(Bc);const Rx=xa;if(Mt.attrName=Cm,Mt.attrValue=xa,Mt.keepAttr=!0,Mt.forceKeepAttr=void 0,$l("uponSanitizeAttribute",le,Mt),xa=Mt.attrValue,Mt.forceKeepAttr)continue;if(!Mt.keepAttr){vn(Qr,le);continue}if(!bu&&bi(/\/>/i,xa)){vn(Qr,le);continue}Mc&&xS([ye,rt,vt],$v=>{xa=vv(xa,$v," ")});const N1=G(le.nodeName);if(!Mx(N1,Cm,xa)){vn(Qr,le);continue}if(v&&(Cm==="id"||Cm==="name")&&(vn(Qr,le),xa=x+xa),ll&&bi(/((--!?|])>)|<\/(style|title)/i,xa)){vn(Qr,le);continue}if(Se&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!xm)switch(j.getAttributeType(N1,Cm)){case"TrustedHTML":{xa=Se.createHTML(xa);break}case"TrustedScriptURL":{xa=Se.createScriptURL(xa);break}}if(xa!==Rx)try{xm?le.setAttributeNS(xm,Qr,xa):le.setAttribute(Qr,xa),Rc(le)?fn(le):vE(o.removed)}catch{}}$l("afterSanitizeAttributes",le,null)},l5=function le($t){let Mt=null;const Sn=Kn($t);for($l("beforeSanitizeShadowDOM",$t,null);Mt=Sn.nextNode();)$l("uponSanitizeShadowNode",Mt,null),!zp(Mt)&&(Mt.content instanceof d&&le(Mt.content),jg(Mt));$l("afterSanitizeShadowDOM",$t,null)};return o.sanitize=function(le){let $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mt=null,Sn=null,oa=null,Qr=null;if(be=!le,be&&(le="<!-->"),typeof le!="string"&&!yu(le))if(typeof le.toString=="function"){if(le=le.toString(),typeof le!="string")throw bv("dirty is not a string, aborting")}else throw bv("toString is not a function");if(!o.isSupported)return le;if(t||_e($t),o.removed=[],typeof le=="string"&&(_=!1),_){if(le.nodeName){const Cm=G(le.nodeName);if(!Fo[Cm]||yt[Cm])throw bv("root node is forbidden and cannot be sanitized in-place")}}else if(le instanceof f)Mt=Ac("<!---->"),Sn=Mt.ownerDocument.importNode(le,!0),Sn.nodeType===O2.element&&Sn.nodeName==="BODY"||Sn.nodeName==="HTML"?Mt=Sn:Mt.appendChild(Sn);else{if(!a&&!Mc&&!Ci&&le.indexOf("<")===-1)return Se&&u?Se.createHTML(le):le;if(Mt=Ac(le),!Mt)return a?null:u?je:""}Mt&&r&&fn(Mt.firstChild);const xm=Kn(_?le:Mt);for(;oa=xm.nextNode();)zp(oa)||(oa.content instanceof d&&l5(oa.content),jg(oa));if(_)return le;if(a){if(l)for(Qr=Me.call(Mt.ownerDocument);Mt.firstChild;)Qr.appendChild(Mt.firstChild);else Qr=Mt;return(Gn.shadowroot||Gn.shadowrootmode)&&(Qr=ze.call(s,Qr,!0)),Qr}let Bc=Ci?Mt.outerHTML:Mt.innerHTML;return Ci&&Fo["!doctype"]&&Mt.ownerDocument&&Mt.ownerDocument.doctype&&Mt.ownerDocument.doctype.name&&bi(ZA,Mt.ownerDocument.doctype.name)&&(Bc="<!DOCTYPE "+Mt.ownerDocument.doctype.name+`>
`+Bc),Mc&&xS([ye,rt,vt],Cm=>{Bc=vv(Bc,Cm," ")}),Se&&u?Se.createHTML(Bc):Bc},o.setConfig=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_e(le),t=!0},o.clearConfig=function(){he=null,t=!1},o.isValidAttribute=function(le,$t,Mt){he||_e({});const Sn=G(le),oa=G($t);return Mx(Sn,oa,Mt)},o.addHook=function(le,$t){typeof $t=="function"&&(lt[le]=lt[le]||[],k2(lt[le],$t))},o.removeHook=function(le){if(lt[le])return vE(lt[le])},o.removeHooks=function(le){lt[le]&&(lt[le]=[])},o.removeAllHooks=function(){lt={}},o}var $A=WA();const T2=ve.each,Ha=ve.trim,OI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],SS={ftp:21,http:80,https:443,mailto:25},m1=["img","video"],jA=(e,o)=>Oe(e)?!e:Oe(o)?!It(m1,o):!0,rl=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},wp=(e,o,n)=>{const s=rl(o).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?jA(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class Cc{static parseDataUri(o){let n;const s=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(s[0]);return i&&(n=i[1]),{type:n,data:s[1]}}static isDomSafe(o,n,s={}){if(s.allow_script_urls)return!0;{const i=gt.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!wp(s,i,n)}}static getDocumentBaseUrl(o){var n;let s;return o.protocol.indexOf("http")!==0&&o.protocol!=="file:"?s=(n=o.href)!==null&&n!==void 0?n:"":s=o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(o,n={}){this.path="",this.directory="",o=Ha(o),this.settings=n;const s=n.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o)){i.source=o;return}const d=o.indexOf("//")===0;if(o.indexOf("/")===0&&!d&&(o=(s&&s.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const f=s?s.path:new Cc(document.location.href).directory;if((s==null?void 0:s.protocol)==="")o="//mce_host"+i.toAbsPath(f,o);else{const y=/([^#?]*)([#?]?.*)/.exec(o);y&&(o=(s&&s.protocol||"http")+"://mce_host"+i.toAbsPath(f,y[1])+y[2])}}o=o.replace(/@@/g,"(mce_at)");const g=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);g&&T2(OI,(f,y)=>{let k=g[y];k&&(k=k.replace(/\(mce_at\)/g,"@@")),i[f]=k}),s&&(i.protocol||(i.protocol=s.protocol),i.userInfo||(i.userInfo=s.userInfo),!i.port&&i.host==="mce_host"&&(i.port=s.port),(!i.host||i.host==="mce_host")&&(i.host=s.host),i.source=""),d&&(i.protocol="")}setPath(o){const n=/^(.*?)\/?(\w+)?$/.exec(o);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(o){if(o==="./")return o;const n=new Cc(o,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),i=n.getURI();if(s===i||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===i)return s;let d=this.toRelPath(this.path,n.path);return n.query&&(d+="?"+n.query),n.anchor&&(d+="#"+n.anchor),d}toAbsolute(o,n){const s=new Cc(o,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const n=this.protocol?SS[this.protocol]:null;if(n&&(this.port||n)==(o.port||n))return!0}return!1}toRelPath(o,n){let s=0,i="",d,g;const f=o.substring(0,o.lastIndexOf("/")).split("/"),y=n.split("/");if(f.length>=y.length){for(d=0,g=f.length;d<g;d++)if(d>=y.length||f[d]!==y[d]){s=d+1;break}}if(f.length<y.length){for(d=0,g=y.length;d<g;d++)if(d>=f.length||f[d]!==y[d]){s=d+1;break}}if(s===1)return n;for(d=0,g=f.length-(s-1);d<g;d++)i+="../";for(d=s-1,g=y.length;d<g;d++)d!==s-1?i+="/"+y[d]:i+=y[d];return i}toAbsPath(o,n){let s=0;const i=/\/$/.test(n)?"/":"",d=o.split("/"),g=n.split("/"),f=[];T2(d,L=>{L&&f.push(L)});const y=[];for(let L=g.length-1;L>=0;L--)if(!(g[L].length===0||g[L]===".")){if(g[L]===".."){s++;continue}if(s>0){s--;continue}y.push(g[L])}const k=f.length-s;let D;return k<=0?D=yn(y).join("/"):D=f.slice(0,k).join("/")+"/"+yn(y).join("/"),D.indexOf("/")!==0&&(D="/"+D),i&&D.lastIndexOf("/")!==D.length-1&&(D+=i),D}getURI(o=!1){let n;return(!this.source||o)&&(n="",o||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const TI=ve.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),kS="data-mce-type";let GA=0;const _E=(e,o,n,s,i)=>{var d,g,f,y;const k=o.validate,D=n.getSpecialElements();e.nodeType===Am&&!o.allow_conditional_comments&&/^\[if/i.test((d=e.nodeValue)!==null&&d!==void 0?d:"")&&(e.nodeValue=" "+e.nodeValue);const L=(g=i==null?void 0:i.tagName)!==null&&g!==void 0?g:e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){Oe(i)&&(i.allowedTags[L]=!0);return}if(e.nodeType!==tc||L==="body")return;const P=X.fromDom(e),j=Fc(P,kS),$=Wn(P,"data-mce-bogus");if(!j&&J($)){$==="all"?$o(P):qt(P);return}const Z=n.getElementRule(L);if(k&&!Z){At(D,L)?$o(P):qt(P);return}else Oe(i)&&(i.allowedTags[L]=!0);if(k&&Z&&!j){if(me((f=Z.attributesForced)!==null&&f!==void 0?f:[],U=>{Dn(P,U.name,U.value==="{$uid}"?`mce_${GA++}`:U.value)}),me((y=Z.attributesDefault)!==null&&y!==void 0?y:[],U=>{Fc(P,U.name)||Dn(P,U.name,U.value==="{$uid}"?`mce_${GA++}`:U.value)}),Z.attributesRequired&&!nn(Z.attributesRequired,U=>Fc(P,U))){qt(P);return}if(Z.removeEmptyAttrs&&Xg(P)){qt(P);return}Z.outputName&&Z.outputName!==L&&Nk(P,Z.outputName)}},D2=(e,o,n,s,i)=>{const d=e.tagName.toLowerCase(),{attrName:g,attrValue:f}=i;i.keepAttr=_S(o,n,s,d,g,f),i.keepAttr?(i.allowedAttributes[g]=!0,EE(g,n)&&(i.attrValue=g),o.allow_svg_data_urls&&Bo(f,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):KA(e,g)&&(i.forceKeepAttr=!0)},_S=(e,o,n,s,i,d)=>n!=="html"&&!Kc(s)?!0:!(i in TI&&wp(e,d,s))&&(!e.validate||o.isValid(s,i)||Bo(i,"data-")||Bo(i,"aria-")),KA=(e,o)=>e.hasAttribute(kS)&&(o==="id"||o==="class"||o==="style"),EE=(e,o)=>e in o.getBoolAttrs(),DI=(e,o,n,s)=>{const{attributes:i}=e;for(let d=i.length-1;d>=0;d--){const g=i[d],f=g.name,y=g.value;!_S(o,n,s,e.tagName.toLowerCase(),f,y)&&!KA(e,f)?e.removeAttribute(f):EE(f,n)&&e.setAttribute(f,f)}},OE=(e,o,n)=>{const s=$A();return s.addHook("uponSanitizeElement",(i,d)=>{_E(i,e,o,n.track(i),d)}),s.addHook("uponSanitizeAttribute",(i,d)=>{D2(i,e,o,n.current(),d)}),s},TE=(e,o)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return n.PARSER_MEDIA_TYPE=o,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},MI=e=>{const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};return $A().sanitize(e,n),e.innerHTML},AI=(e,o)=>{const n=dc();if(e.sanitize){const s=OE(e,o,n);return{sanitizeHtmlElement:(i,d)=>{s.sanitize(i,TE(e,d)),s.removed=[],n.reset()},sanitizeNamespaceElement:MI}}else return{sanitizeHtmlElement:(s,i)=>{const d=document.createNodeIterator(s,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let g;for(;g=d.nextNode();){const f=n.track(g);_E(g,e,o,f),pt(g)&&DI(g,e,o,f)}n.reset()},sanitizeNamespaceElement:Be}},uu=ve.makeMap,ES=ve.extend,XA=(e,o,n,s)=>{const i=e.name,d=i in n&&i!=="title"&&i!=="textarea"&&i!=="noscript",g=o.childNodes;for(let f=0,y=g.length;f<y;f++){const k=g[f],D=new qa(k.nodeName.toLowerCase(),k.nodeType);if(pt(k)){const L=k.attributes;for(let P=0,j=L.length;P<j;P++){const $=L[P];D.attr($.name,$.value)}Kc(D.name)&&(s(k),D.value=k.innerHTML)}else Ae(k)?(D.value=k.data,d&&(D.raw=!0)):(ii(k)||lc(k)||Ea(k))&&(D.value=k.data);Kc(D.name)||XA(D,k,n,s),e.append(D)}},OS=(e,o,n)=>{const s=[];for(let i=e,d=i;i;d=i,i=i.walk()){const g=i;me(o,f=>f(g)),io(g.parent)&&g!==e?i=d:s.push(g)}for(let i=s.length-1;i>=0;i--){const d=s[i];me(n,g=>g(d))}},DE=(e,o,n,s)=>{const i=n.validate,d=o.getNonEmptyElements(),g=o.getWhitespaceElements(),f=ES(uu("script,style,head,html,body,title,meta,param"),o.getBlockElements()),y=db(o),k=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/,P=U=>{let re=U.parent;for(;Oe(re);){if(re.name in g)return!0;re=re.parent}return!1},j=U=>{let re=U;for(;Oe(re);){if(re.name in y)return fp(o,d,g,re);re=re.parent}return!1},$=U=>U.name in f||Jo(o,U)||Kc(U.name)&&U.parent===e,Z=(U,re)=>{const ie=re?U.prev:U.next;return Oe(ie)||io(U.parent)?!1:$(U.parent)&&(U.parent!==e||s.isRootContent===!0)};return[U=>{var re;if(U.type===3&&!P(U)){let ie=(re=U.value)!==null&&re!==void 0?re:"";ie=ie.replace(k," "),(VM(U.prev,$)||Z(U,!0))&&(ie=ie.replace(D,"")),ie.length===0?U.remove():U.value=ie}},U=>{var re;if(U.type===1){const ie=o.getElementRule(U.name);if(i&&ie){const pe=fp(o,d,g,U);ie.paddInEmptyBlock&&pe&&j(U)?tS(n,s,$,U):ie.removeEmpty&&pe?$(U)?U.remove():U.unwrap():ie.paddEmpty&&(pe||F_(U))&&tS(n,s,$,U)}}else if(U.type===3&&!P(U)){let ie=(re=U.value)!==null&&re!==void 0?re:"";(U.next&&$(U.next)||Z(U,!1))&&(ie=ie.replace(L,"")),ie.length===0?U.remove():U.value=ie}}]},qA=(e,o)=>{var n;const s=(n=o.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},g1=(e={},o=Jc())=>{const n=DA(),s=DA(),i={validate:!0,root_name:"body",sanitize:!0,...e},d=new DOMParser,g=AI(i,o),f=(ie,pe,Se="html")=>{const je=Se==="xhtml"?"application/xhtml+xml":"text/html",Ye=At(o.getSpecialElements(),pe.toLowerCase()),Ve=Ye?`<${pe}>${ie}</${pe}>`:ie,Me=Se==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ve}</body></html>`:`<body>${Ve}</body>`,we=d.parseFromString(Me,je).body;return g.sanitizeHtmlElement(we,je),Ye?we.firstChild:we},y=n.addFilter,k=n.getFilters,D=n.removeFilter,L=s.addFilter,P=s.getFilters,j=s.removeFilter,$=(ie,pe)=>{rS(o,ie)&&pe.push(ie)},Z=(ie,pe)=>{const Se=J(pe.attr(kS)),je=pe.type===1&&!At(ie,pe.name)&&!Jo(o,pe)&&!Kc(pe.name);return pe.type===3||je&&!Se},U=(ie,pe)=>{const Se=ES(uu("script,style,head,html,body,title,meta,param"),o.getBlockElements()),je=/^[ \t\r\n]+/,Ye=/[ \t\r\n]+$/;let Ve=ie.firstChild,Me=null;const we=ze=>{var lt,ye;ze&&(Ve=ze.firstChild,Ve&&Ve.type===3&&(Ve.value=(lt=Ve.value)===null||lt===void 0?void 0:lt.replace(je,"")),Ve=ze.lastChild,Ve&&Ve.type===3&&(Ve.value=(ye=Ve.value)===null||ye===void 0?void 0:ye.replace(Ye,"")))};if(o.isValidChild(ie.name,pe.toLowerCase())){for(;Ve;){const ze=Ve.next;Z(Se,Ve)?(Me||(Me=new qa(pe,1),Me.attr(i.forced_root_block_attrs),ie.insert(Me,Ve)),Me.append(Ve)):(we(Me),Me=null),Ve=ze}we(Me)}},re={schema:o,addAttributeFilter:L,getAttributeFilters:P,removeAttributeFilter:j,addNodeFilter:y,getNodeFilters:k,removeNodeFilter:D,parse:(ie,pe={})=>{var Se;const je=i.validate,Ye=(Se=pe.context)!==null&&Se!==void 0?Se:i.root_name,Ve=f(ie,Ye,pe.format);hh(o,Ve);const Me=new qa(Ye,11);XA(Me,Ve,o.getSpecialElements(),g.sanitizeNamespaceElement),Ve.innerHTML="";const[we,ze]=DE(Me,o,i,pe),lt=[],ye=je?So=>$(So,lt):Be,rt={nodes:{},attributes:{}},vt=So=>I_(k(),P(),So,rt);if(OS(Me,[we,vt],[ze,ye]),lt.reverse(),je&&lt.length>0)if(pe.context){const{pass:So,fail:zs}=cr(lt,Ja=>Ja.parent===Me);s1(zs,o,Me,vt),pe.invalid=So.length>0}else s1(lt,o,Me,vt);const to=qA(i,pe);return to&&(Me.name==="body"||pe.isRootContent)&&U(Me,to),pe.invalid||P_(rt,pe),Me}};return hI(re,i),dI(re,i,o),re},YA=e=>p2(e)?up({validate:!1}).serialize(e):e,QA=(e,o,n)=>{const s=YA(e),i=o(s);if(i.isDefaultPrevented())return i;if(p2(e))if(i.content!==s){const d=g1({validate:!1,forced_root_block:!1,...n}).parse(i.content,{context:e.name});return{...i,content:d}}else return{...i,content:e};else return i},JA=(e,o)=>{if(o.no_events)return Ra.value(o);{const n=vw(e,o);return n.isDefaultPrevented()?Ra.error(Hy(e,{content:"",...n}).content):Ra.value(n)}},eR=(e,o,n)=>n.no_events?o:QA(o,s=>Hy(e,{...n,content:s}),{sanitize:ey(e),sandbox_iframes:oy(e)}).content,ME=(e,o)=>{if(o.no_events)return Ra.value(o);{const n=QA(o.content,s=>P3(e,{...o,content:s}),{sanitize:ey(e),sandbox_iframes:oy(e)});return n.isDefaultPrevented()?(fw(e,n),Ra.error(void 0)):Ra.value(n)}},AE=(e,o,n)=>{n.no_events||fw(e,{...n,content:o})},TS=(e,o,n)=>({element:e,width:o,rows:n}),tR=(e,o)=>({element:e,cells:o}),RI=(e,o)=>({x:e,y:o}),oR=(e,o)=>Ri(e,o).bind(wr).getOr(1),nR=(e,o,n,s,i)=>{const d=oR(i,"rowspan"),g=oR(i,"colspan"),f=e.rows;for(let y=n;y<n+d;y++){f[y]||(f[y]=tR(d0(s),[]));for(let k=o;k<o+g;k++){const D=f[y].cells;D[k]=y===n&&k===o?i:Yu(i)}}},RE=(e,o,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[o]},BE=(e,o,n)=>{for(;RE(e,o,n);)o++;return o},NE=e=>En(e,(o,n)=>n.cells.length>o?n.cells.length:o,0),DS=(e,o)=>{const n=e.rows;for(let s=0;s<n.length;s++){const i=n[s].cells;for(let d=0;d<i.length;d++)if(yo(i[d],o))return I.some(RI(d,s))}return I.none()},LE=(e,o,n,s,i)=>{const d=[],g=e.rows;for(let f=n;f<=i;f++){const y=g[f].cells,k=o<s?y.slice(o,s+1):y.slice(s,o+1);d.push(tR(g[f].element,k))}return d},rR=(e,o,n)=>{const s=o.x,i=o.y,d=n.x,g=n.y,f=i<g?LE(e,s,i,d,g):LE(e,s,g,d,i);return TS(e.element,NE(f),f)},HE=(e,o)=>{const n=Yu(e.element),s=X.fromTag("tbody");return Pi(s,o),ao(n,s),n},sR=e=>Bt(e.rows,o=>{const n=Bt(o.cells,i=>{const d=d0(i);return kr(d,"colspan"),kr(d,"rowspan"),d}),s=Yu(o.element);return Pi(s,n),s}),aR=e=>{const o=TS(Yu(e),0,[]);return me(rn(e,"tr"),(n,s)=>{me(rn(n,"td,th"),(i,d)=>{nR(o,BE(o,d,s),s,n,i)})}),TS(o.element,NE(o.rows),o.rows)},iR=e=>HE(e,sR(e)),BI=(e,o,n)=>DS(e,o).bind(s=>DS(e,n).map(i=>rR(e,s,i))),IE=e=>On(e,o=>po(o)==="ul"||po(o)==="ol"),NI=(e,o)=>On(e,n=>po(n)==="li"&&Jh(n,o)).fold(Pe([]),n=>IE(e).map(s=>{const i=X.fromTag(po(s)),d=Uo(da(s),(g,f)=>Bo(f,"list-style"));return Lu(i,d),[X.fromTag("li"),i]}).getOr([])),MS=(e,o)=>{const n=En(o,(s,i)=>(ao(i,s),i),e);return o.length>0?ue([n]):n},LI=e=>ar(e)?vs(e).filter(Wr).fold(Pe([]),o=>[e,o]):Wr(e)?[e]:[],HI=(e,o,n)=>{const s=X.fromDom(o.commonAncestorContainer),i=iu(s,e),d=Et(i,y=>n.isWrapper(po(y))),g=NI(i,o),f=d.concat(g.length?g:LI(s));return Bt(f,Yu)},lR=()=>ue([]),cR=(e,o,n)=>MS(X.fromDom(o.cloneContents()),HI(e,o,n)),dR=(e,o)=>Um(o,"table",Le(yo,e)),II=(e,o)=>dR(e,o[0]).bind(n=>{const s=o[0],i=o[o.length-1],d=aR(n);return BI(d,s,i).map(g=>ue([iR(g)]))}).getOrThunk(lR),PI=(e,o,n)=>o.length>0&&o[0].collapsed?lR():cR(e,o[0],n),zI=(e,o,n)=>{const s=aw(o,e);return s.length>0?II(e,s):PI(e,o,n)},AS=(e,o)=>o>=0&&o<e.length&&Yh(e.charAt(o)),uR=e=>jr(e.innerText),mR=e=>e.map(o=>o.nodeName).getOr("div").toLowerCase(),FI=e=>I.from(e.selection.getRng()).map(o=>{var n;const s=I.from(e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),d=mR(s),g=X.fromDom(o.cloneContents());W5(g),$5(g);const f=e.dom.add(i,d,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},g.dom),y=uR(f),k=jr((n=f.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(f),AS(k,0)||AS(k,k.length-1)){const D=s.getOr(i),L=uR(D),P=L.indexOf(y);if(P===-1)return y;{const j=AS(L,P-1),$=AS(L,P+y.length);return(j?" ":"")+y+($?" ":"")}}else return y}).getOr(""),VI=(e,o)=>{const n=e.selection.getRng(),s=e.dom.create("body"),i=e.selection.getSel(),d=i_(e,xy(i)),g=o.contextual?zI(X.fromDom(e.getBody()),d,e.schema).dom:n.cloneContents();return g&&s.appendChild(g),e.selection.serializer.serialize(s,o)},ZI=(e,o)=>{if(o.format==="text")return FI(e);{const n=VI(e,o);return o.format==="tree"?n:e.selection.isCollapsed()?"":n}},UI=(e,o)=>({...e,format:o,get:!0,selection:!0,getInner:!0}),WI=(e,o,n={})=>{const s=UI(n,o);return JA(e,s).fold(fo,i=>{const d=ZI(e,i);return eR(e,d,i)})},PE=0,gR=1,zE=2,$I=(e,o)=>{const n=e.length+o.length+2,s=new Array(n),i=new Array(n),d=(D,L,P)=>({start:D,end:L,diag:P}),g=(D,L,P,j,$)=>{const Z=y(D,L,P,j);if(Z===null||Z.start===L&&Z.diag===L-j||Z.end===D&&Z.diag===D-P){let U=D,re=P;for(;U<L||re<j;)U<L&&re<j&&e[U]===o[re]?($.push([PE,e[U]]),++U,++re):L-D>j-P?($.push([zE,e[U]]),++U):($.push([gR,o[re]]),++re)}else{g(D,Z.start,P,Z.start-Z.diag,$);for(let U=Z.start;U<Z.end;++U)$.push([PE,e[U]]);g(Z.end,L,Z.end-Z.diag,j,$)}},f=(D,L,P,j)=>{let $=D;for(;$-L<j&&$<P&&e[$]===o[$-L];)++$;return d(D,$,L)},y=(D,L,P,j)=>{const $=L-D,Z=j-P;if($===0||Z===0)return null;const U=$-Z,re=Z+$,ie=(re%2===0?re:re+1)/2;s[1+ie]=D,i[1+ie]=L+1;let pe,Se,je,Ye,Ve;for(pe=0;pe<=ie;++pe){for(Se=-pe;Se<=pe;Se+=2){for(je=Se+ie,Se===-pe||Se!==pe&&s[je-1]<s[je+1]?s[je]=s[je+1]:s[je]=s[je-1]+1,Ye=s[je],Ve=Ye-D+P-Se;Ye<L&&Ve<j&&e[Ye]===o[Ve];)s[je]=++Ye,++Ve;if(U%2!==0&&U-pe<=Se&&Se<=U+pe&&i[je-U]<=s[je])return f(i[je-U],Se+D-P,L,j)}for(Se=U-pe;Se<=U+pe;Se+=2){for(je=Se+ie-U,Se===U-pe||Se!==U+pe&&i[je+1]<=i[je-1]?i[je]=i[je+1]-1:i[je]=i[je-1],Ye=i[je]-1,Ve=Ye-D+P-Se;Ye>=D&&Ve>=P&&e[Ye]===o[Ve];)i[je]=Ye--,Ve--;if(U%2===0&&-pe<=Se&&Se<=pe&&i[je]<=s[je+U])return f(i[je],Se+D-P,L,j)}}return null},k=[];return g(0,e.length,0,o.length,k),k},FE=e=>pt(e)?e.outerHTML:Ae(e)?gt.encodeRaw(e.data,!1):ii(e)?"<!--"+e.data+"-->":"",jI=e=>{let o;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);o=n.firstChild;)s.appendChild(o);return s},GI=(e,o,n)=>{const s=jI(o);if(e.hasChildNodes()&&n<e.childNodes.length){const i=e.childNodes[n];e.insertBefore(s,i)}else e.appendChild(s)},KI=(e,o)=>{if(e.hasChildNodes()&&o<e.childNodes.length){const n=e.childNodes[o];e.removeChild(n)}},XI=(e,o)=>{let n=0;me(e,s=>{s[0]===PE?n++:s[0]===gR?(GI(o,s[1],n),n++):s[0]===zE&&KI(o,n)})},qI=(e,o)=>Et(Bt(ps(e.childNodes),o?E(jr,FE):FE),n=>n.length>0),YI=(e,o)=>{const n=Bt(ps(o.childNodes),FE);return XI($I(n,e),o),o},or=os(()=>document.implementation.createHTMLDocument("undo")),VE=e=>e.querySelector("iframe")!==null,QI=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),JI=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Bg=e=>{const o=e.serializer.getTempAttrs(),n=U5(e.getBody(),o);return VE(n)?QI(qI(n,!0)):JI(jr(n.innerHTML))},Es=(e,o,n)=>{const s=n?o.beforeBookmark:o.bookmark;o.type==="fragmented"?YI(o.fragments,e.getBody()):e.setContent(o.content,{format:"raw",no_selection:Oe(s)&&vy(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},RS=e=>e.type==="fragmented"?e.fragments.join(""):e.content,ZE=e=>{const o=X.fromTag("body",or());return Hu(o,RS(e)),me(rn(o,"*[data-mce-bogus]"),qt),Gm(o)},hR=(e,o)=>RS(e)===RS(o),eP=(e,o)=>ZE(e)===ZE(o),UE=(e,o)=>!e||!o?!1:hR(e,o)?!0:eP(e,o),wv=e=>e.get()===0,BS=(e,o,n)=>{wv(n)&&(e.typing=o)},NS=(e,o)=>{e.typing&&(BS(e,!1,o),e.add())},tP=e=>{e.typing&&(e.typing=!1,e.add())},pR=(e,o,n)=>{wv(o)&&n.set(_f(e.selection))},fR=(e,o,n,s,i,d,g)=>{const f=Bg(e),y=ve.extend(d||{},f);if(!wv(s)||e.removed)return null;const k=o.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:k,originalEvent:g}).isDefaultPrevented()||k&&UE(k,y))return null;o.data[n.get()]&&i.get().each(P=>{o.data[n.get()].beforeBookmark=P});const D=IC(e);if(D&&o.data.length>D){for(let P=0;P<o.data.length-1;P++)o.data[P]=o.data[P+1];o.data.length--,n.set(o.data.length)}y.bookmark=_f(e.selection),n.get()<o.data.length-1&&(o.data.length=n.get()+1),o.data.push(y),n.set(o.data.length-1);const L={level:y,lastLevel:k,originalEvent:g};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",L),e.dispatch("change",L)):e.dispatch("AddUndo",L),y},WE=(e,o,n)=>{o.data=[],n.set(0),o.typing=!1,e.dispatch("ClearUndos")},vR=(e,o,n,s,i)=>{if(o.transact(s)){const d=o.data[n.get()].bookmark,g=o.data[n.get()-1];Es(e,g,!0),o.transact(i)&&(o.data[n.get()-1].beforeBookmark=d)}},$E=(e,o,n)=>{let s;return o.get()<n.length-1&&(o.set(o.get()+1),s=n[o.get()],Es(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},oP=(e,o,n,s)=>{let i;return o.typing&&(o.add(),o.typing=!1,BS(o,!1,n)),s.get()>0&&(s.set(s.get()-1),i=o.data[s.get()],Es(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},nP=e=>{e.clear(),e.add()},rP=(e,o,n)=>n.get()>0||o.typing&&o.data[0]&&!UE(Bg(e),o.data[0]),wc=(e,o)=>o.get()<e.data.length-1&&!e.typing,sP=(e,o,n)=>(NS(e,o),e.beforeChange(),e.ignore(n),e.add()),aP=(e,o)=>{try{e.set(e.get()+1),o()}finally{e.set(e.get()-1)}},iP=(e,o)=>{const n=e.dom,s=Oe(o)?o:e.getBody();me(n.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const d=Gb(e),g=n.getAttrib(i,"border");(!g||g==="0")&&e.hasVisual?n.addClass(i,d):n.removeClass(i,d);break;case"A":if(!n.getAttrib(i,"href")){const f=n.getAttrib(i,"name")||i.id,y=PC(e);f&&e.hasVisual?n.addClass(i,y):n.removeClass(i,y)}break}}),e.dispatch("VisualAid",{element:o,hasVisual:e.hasVisual})},bR=e=>({init:{bindEvents:Be},undoManager:{beforeChange:(o,n)=>pR(e,o,n),add:(o,n,s,i,d,g)=>fR(e,o,n,s,i,d,g),undo:(o,n,s)=>oP(e,o,n,s),redo:(o,n)=>$E(e,o,n),clear:(o,n)=>WE(e,o,n),reset:o=>nP(o),hasUndo:(o,n)=>rP(e,o,n),hasRedo:(o,n)=>wc(o,n),transact:(o,n,s)=>sP(o,n,s),ignore:(o,n)=>aP(o,n),extra:(o,n,s,i)=>vR(e,o,n,s,i)},formatter:{match:(o,n,s,i)=>uv(e,o,n,s,i),matchAll:(o,n)=>eA(e,o,n),matchNode:(o,n,s,i)=>um(e,o,n,s,i),canApply:o=>VH(e,o),closest:o=>J_(e,o),apply:(o,n,s)=>kA(e,o,n,s),remove:(o,n,s,i)=>xA(e,o,n,s,i),toggle:(o,n,s)=>S2(e,o,n,s),formatChanged:(o,n,s,i,d)=>w2(e,o,n,s,i,d)},editor:{getContent:o=>GL(e,o),setContent:(o,n)=>i1(e,o,n),insertContent:(o,n)=>aS(e,o,n),addVisual:o=>iP(e,o)},selection:{getContent:(o,n)=>WI(e,o,n)},autocompleter:{addDecoration:o=>zL(e,o),removeDecoration:()=>H5(e,X.fromDom(e.getBody()))},raw:{getModel:()=>I.none()}}),lP=e=>{const o=k=>qe(k)?k:{},{init:n,undoManager:s,formatter:i,editor:d,selection:g,autocompleter:f,raw:y}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(k,D,L)=>s.transact(L),ignore:(k,D)=>s.ignore(D),extra:(k,D,L,P)=>s.extra(L,P)},formatter:{match:(k,D,L,P)=>i.match(k,o(D),P),matchAll:i.matchAll,matchNode:i.matchNode,canApply:k=>i.canApply(k),closest:k=>i.closest(k),apply:(k,D,L)=>i.apply(k,o(D)),remove:(k,D,L,P)=>i.remove(k,o(D)),toggle:(k,D,L)=>i.toggle(k,o(D)),formatChanged:(k,D,L,P,j)=>i.formatChanged(D,L,P,j)},editor:{getContent:k=>d.getContent(k),setContent:(k,D)=>({content:d.setContent(k,D),html:""}),insertContent:(k,D)=>(d.insertContent(k),""),addVisual:d.addVisual},selection:{getContent:(k,D)=>g.getContent(D)},autocompleter:{addDecoration:f.addDecoration,removeDecoration:f.removeDecoration},raw:{getModel:()=>I.some(y.getRawModel())}}},yR=()=>{const e=Pe(null),o=Pe("");return{init:{bindEvents:Be},undoManager:{beforeChange:Be,add:e,undo:e,redo:e,clear:Be,reset:Be,hasUndo:Ie,hasRedo:Ie,transact:e,ignore:Be,extra:Be},formatter:{match:Ie,matchAll:Pe([]),matchNode:Pe(void 0),canApply:Ie,closest:o,apply:Be,remove:Be,toggle:Be,formatChanged:Pe({unbind:Be})},editor:{getContent:o,setContent:Pe({content:"",html:""}),insertContent:Pe(""),addVisual:Be},selection:{getContent:o},autocompleter:{addDecoration:Be,removeDecoration:Be},raw:{getModel:Pe(I.none())}}},pm=e=>At(e.plugins,"rtc"),cP=e=>Go(e.plugins,"rtc").bind(o=>I.from(o.setup)),dP=e=>{const o=e;return cP(e).fold(()=>(o.rtcInstance=bR(e),I.none()),n=>(o.rtcInstance=yR(),I.some(()=>n().then(s=>(o.rtcInstance=lP(s),s.rtc.isRemote)))))},Sv=e=>e.rtcInstance?e.rtcInstance:bR(e),Ir=e=>{const o=e.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},uP=(e,o,n)=>{Ir(e).undoManager.beforeChange(o,n)},xR=(e,o,n,s,i,d,g)=>Ir(e).undoManager.add(o,n,s,i,d,g),jE=(e,o,n,s)=>Ir(e).undoManager.undo(o,n,s),mP=(e,o,n)=>Ir(e).undoManager.redo(o,n),gP=(e,o,n)=>{Ir(e).undoManager.clear(o,n)},hP=(e,o)=>{Ir(e).undoManager.reset(o)},pP=(e,o,n)=>Ir(e).undoManager.hasUndo(o,n),CR=(e,o,n)=>Ir(e).undoManager.hasRedo(o,n),wR=(e,o,n,s)=>Ir(e).undoManager.transact(o,n,s),fP=(e,o,n)=>{Ir(e).undoManager.ignore(o,n)},h1=(e,o,n,s,i)=>{Ir(e).undoManager.extra(o,n,s,i)},kv=(e,o,n,s,i)=>Ir(e).formatter.match(o,n,s,i),M2=(e,o,n)=>Ir(e).formatter.matchAll(o,n),SR=(e,o,n,s,i)=>Ir(e).formatter.matchNode(o,n,s,i),kR=(e,o)=>Ir(e).formatter.canApply(o),vP=(e,o)=>Ir(e).formatter.closest(o),_R=(e,o,n,s)=>{Ir(e).formatter.apply(o,n,s)},bP=(e,o,n,s,i)=>{Ir(e).formatter.remove(o,n,s,i)},yP=(e,o,n,s)=>{Ir(e).formatter.toggle(o,n,s)},xP=(e,o,n,s,i,d)=>Ir(e).formatter.formatChanged(o,n,s,i,d),CP=(e,o)=>Sv(e).editor.getContent(o),ER=(e,o,n)=>Sv(e).editor.setContent(o,n),wP=(e,o,n)=>Sv(e).editor.insertContent(o,n),SP=(e,o,n)=>Ir(e).selection.getContent(o,n),A2=(e,o)=>Ir(e).editor.addVisual(o),GE=e=>Ir(e).init.bindEvents(),OR=(e,o)=>Ir(e).autocompleter.addDecoration(o),kP=e=>Ir(e).autocompleter.removeDecoration(),_P=(e,o={})=>{const n=o.format?o.format:"html";return SP(e,n,o)},TR=e=>e.dom.length===0?($o(e),I.none()):I.some(e),DR=(e,o)=>e.filter(n=>Kf.isBookmarkNode(n.dom)).bind(o?Nd:Wc),EP=(e,o,n,s,i)=>{const d=e.dom,g=o.dom,f=s?d.length:g.length;s?(Yy(d,g,i,!1,!s),n.setStart(g,f)):(Yy(g,d,i,!1,!s),n.setEnd(g,f))},OP=(e,o,n)=>{vs(e).each(s=>{const i=e.dom;o&&pn(s,Ce(i,0),n)?Xy(i,0,n):!o&&Lr(s,Ce(i,i.length),n)&&qy(i,i.length,n)})},MR=(e,o,n,s,i)=>{e.bind(d=>((s?qy:Xy)(d.dom,s?d.dom.length:0,i),o.filter(No).map(g=>EP(d,g,n,s,i)))).orThunk(()=>DR(o,s).or(o).filter(No).map(d=>OP(d,s,i)))},TP=(e,o,n)=>{const s=I.from(o.firstChild).map(X.fromDom),i=I.from(o.lastChild).map(X.fromDom);e.deleteContents(),e.insertNode(o);const d=s.bind(Wc).filter(No).bind(TR),g=i.bind(Nd).filter(No).bind(TR);MR(d,s,e,!0,n),MR(g,i,e,!1,n),e.collapse(!1)},mu=(e,o)=>({format:"html",...e,set:!0,selection:!0,content:o}),KE=(e,o)=>{if(o.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),i=s?{context:s.nodeName.toLowerCase()}:{},d=e.parser.parse(o.content,{forced_root_block:!1,...i,...o});return up({validate:!1},e.schema).serialize(d)}else return o.content},DP=(e,o,n={})=>{const s=mu(n,o);ME(e,s).each(i=>{const d=KE(e,i),g=e.selection.getRng();TP(g,g.createContextualFragment(d),e.schema),e.selection.setRng(g),ov(e,g),AE(e,d,i)})},AR=(e,o,n)=>{if(At(e,o)){const s=Et(e[o],i=>i!==n);s.length===0?delete e[o]:e[o]=s}};var MP=(e,o)=>{let n,s;const i=(f,y)=>On(y,k=>e.is(k,f)),d=f=>e.getParents(f,void 0,e.getRoot()),g=()=>{n={},s={},o.on("NodeChange",f=>{const y=f.element,k=d(y),D={};ot(n,(L,P)=>{i(P,k).each(j=>{s[P]||(me(L,$=>{$(!0,{node:j,selector:P,parents:k})}),s[P]=L),D[P]=L})}),ot(s,(L,P)=>{D[P]||(delete s[P],me(L,j=>{j(!1,{node:y,selector:P,parents:k})}))})})};return{selectorChangedWithUnbind:(f,y)=>(n||g(),n[f]||(n[f]=[]),n[f].push(y),i(f,d(o.selection.getStart())).each(()=>{s[f]=n[f]}),{unbind:()=>{AR(n,f,y),AR(s,f,y)}})}};const RR=e=>!!(e&&e.ownerDocument)&&oc(X.fromDom(e.ownerDocument),X.fromDom(e)),Po=e=>e?RR(e.startContainer)&&RR(e.endContainer):!1,BR=(e,o,n,s)=>{let i,d;const{selectorChangedWithUnbind:g}=MP(e,s),f=(ye,rt)=>{const vt=e.createRng();Oe(ye)&&Oe(rt)?(vt.setStart(ye,rt),vt.setEnd(ye,rt),Se(vt),re(!1)):(wy(e,vt,s.getBody(),!0),Se(vt))},y=ye=>_P(s,ye),k=(ye,rt)=>DP(s,ye,rt),D=ye=>A5(s.getBody(),pe(),ye),L=ye=>R5(s.getBody(),pe(),ye),P=(ye,rt)=>ze.getBookmark(ye,rt),j=ye=>ze.moveToBookmark(ye),$=(ye,rt)=>(AL(e,ye,rt).each(Se),ye),Z=()=>{const ye=pe(),rt=ie();return!ye||ye.item?!1:ye.compareEndPoints?ye.compareEndPoints("StartToEnd",ye)===0:!rt||ye.collapsed},U=()=>{const ye=pe(),rt=s.getBody().querySelectorAll('[data-mce-selected="1"]');return rt.length>0?hr(rt,vt=>e.isEditable(vt.parentElement)):D5(e,ye)},re=ye=>{const rt=pe();rt.collapse(!!ye),Se(rt)},ie=()=>o.getSelection?o.getSelection():o.document.selection,pe=()=>{let ye;const rt=(to,So,zs)=>{try{return So.compareBoundaryPoints(to,zs)}catch{return-1}},vt=o.document;if(Oe(s.bookmark)&&!Jf(s)){const to=e_(s);if(to.isSome())return to.map(So=>i_(s,[So])[0]).getOr(vt.createRange())}try{const to=ie();to&&!ua(to.anchorNode)&&(to.rangeCount>0?ye=to.getRangeAt(0):ye=vt.createRange(),ye=i_(s,[ye])[0])}catch{}if(ye||(ye=vt.createRange()),yr(ye.startContainer)&&ye.collapsed){const to=e.getRoot();ye.setStart(to,0),ye.setEnd(to,0)}return i&&d&&(rt(ye.START_TO_START,ye,i)===0&&rt(ye.END_TO_END,ye,i)===0?ye=d:(i=null,d=null)),ye},Se=(ye,rt)=>{if(!Po(ye))return;const vt=ie();if(ye=s.dispatch("SetSelectionRange",{range:ye,forward:rt}).range,vt){d=ye;try{vt.removeAllRanges(),vt.addRange(ye)}catch{}rt===!1&&vt.extend&&(vt.collapse(ye.endContainer,ye.endOffset),vt.extend(ye.startContainer,ye.startOffset)),i=vt.rangeCount>0?vt.getRangeAt(0):null}if(!ye.collapsed&&ye.startContainer===ye.endContainer&&vt!=null&&vt.setBaseAndExtent&&ye.endOffset-ye.startOffset<2&&ye.startContainer.hasChildNodes()){const to=ye.startContainer.childNodes[ye.startOffset];to&&to.nodeName==="IMG"&&(vt.setBaseAndExtent(ye.startContainer,ye.startOffset,ye.endContainer,ye.endOffset),(vt.anchorNode!==ye.startContainer||vt.focusNode!==ye.endContainer)&&vt.setBaseAndExtent(to,0,to,1))}s.dispatch("AfterSetSelectionRange",{range:ye,forward:rt})},je=ye=>(k(e.getOuterHTML(ye)),ye),Ye=()=>DL(s.getBody(),pe()),Ve=(ye,rt)=>ML(e,pe(),ye,rt),Me=()=>{const ye=ie(),rt=ye==null?void 0:ye.anchorNode,vt=ye==null?void 0:ye.focusNode;if(!ye||!rt||!vt||ua(rt)||ua(vt))return!0;const to=e.createRng(),So=e.createRng();try{to.setStart(rt,ye.anchorOffset),to.collapse(!0),So.setStart(vt,ye.focusOffset),So.collapse(!0)}catch{return!0}return to.compareBoundaryPoints(to.START_TO_START,So)<=0},we={dom:e,win:o,serializer:n,editor:s,expand:(ye={type:"word"})=>Se(Nr(e).expand(pe(),ye)),collapse:re,setCursorLocation:f,getContent:y,setContent:k,getBookmark:P,moveToBookmark:j,select:$,isCollapsed:Z,isEditable:U,isForward:Me,setNode:je,getNode:Ye,getSel:ie,setRng:Se,getRng:pe,getStart:D,getEnd:L,getSelectedBlocks:Ve,normalize:()=>{const ye=pe(),rt=ie();if(!k3(rt)&&Z0(s)){const vt=vc(e,ye);return vt.each(to=>{Se(to,Me())}),vt.getOr(ye)}return ye},selectorChanged:(ye,rt)=>(g(ye,rt),we),selectorChangedWithUnbind:g,getScrollContainer:()=>{let ye,rt=e.getRoot();for(;rt&&rt.nodeName!=="BODY";){if(rt.scrollHeight>rt.clientHeight){ye=rt;break}rt=rt.parentNode}return ye},scrollIntoView:(ye,rt)=>{Oe(ye)?f5(s,ye,rt):ov(s,pe(),rt)},placeCaretAt:(ye,rt)=>Se(st(ye,rt,s.getDoc())),getBoundingClientRect:()=>{const ye=pe();return ye.collapsed?Ce.fromRangeStart(ye).getClientRects()[0]:ye.getBoundingClientRect()},destroy:()=>{o=i=d=null,lt.destroy()}},ze=Kf(we),lt=Y0(we,s);return we.bookmarkManager=ze,we.controlSelection=lt,we},AP=(e,o,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,i)=>{let d=s.length;for(;d--;){const g=s[d];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(i,null)}}),e.addAttributeFilter("src,href,style",(s,i)=>{const d="data-mce-"+i,g=o.url_converter,f=o.url_converter_scope;let y=s.length;for(;y--;){const k=s[y];let D=k.attr(d);D!==void 0?(k.attr(i,D.length>0?D:null),k.attr(d,null)):(D=k.attr(i),i==="style"?D=n.serializeStyle(n.parseStyle(D),k.name):g&&(D=g.call(f,D,i,k.name)),k.attr(i,D.length>0?D:null))}}),e.addAttributeFilter("class",s=>{let i=s.length;for(;i--;){const d=s[i];let g=d.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),d.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",(s,i,d)=>{let g=s.length;for(;g--;){const f=s[g];f.attr("data-mce-type")==="bookmark"&&!d.cleanup&&(I.from(f.firstChild).exists(y=>{var k;return!ih((k=y.value)!==null&&k!==void 0?k:"")})?f.unwrap():f.remove())}}),e.addNodeFilter("script,style",(s,i)=>{var d;const g=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=s.length;for(;f--;){const y=s[f],k=y.firstChild,D=(d=k==null?void 0:k.value)!==null&&d!==void 0?d:"";if(i==="script"){const L=y.attr("type");L&&y.attr("type",L==="mce-no/type"?null:L.replace(/^mce\-/,"")),o.element_format==="xhtml"&&k&&D.length>0&&(k.value=`// <![CDATA[
`+g(D)+`
// ]]>`)}else o.element_format==="xhtml"&&k&&D.length>0&&(k.value=`<!--
`+g(D)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let i=s.length;for(;i--;){const d=s[i],g=d.value;o.preserve_cdata&&(g==null?void 0:g.indexOf("[CDATA["))===0?(d.name="#cdata",d.type=4,d.value=n.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):(g==null?void 0:g.indexOf("mce:protected "))===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(g).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,i)=>{let d=s.length;for(;d--;){const g=s[d];g.type===7?g.remove():g.type===1&&i==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{me(s,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,i)=>{let d=s.length;for(;d--;)s[d].attr(i,null)}),o.remove_trailing_brs&&hE(o,e,e.schema)},Pn=e=>{const o=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(o(n)){const s=n.prev;o(s)&&(n.remove(),s.remove())}},RP=(e,o,n)=>{let s;const i=e.dom;let d=o.cloneNode(!0);const g=document.implementation;if(g.createHTMLDocument){const f=g.createHTMLDocument("");ve.each(d.nodeName==="BODY"?d.childNodes:[d],y=>{f.body.appendChild(f.importNode(y,!0))}),d.nodeName!=="BODY"?d=f.body.firstChild:d=f.body,s=i.doc,i.doc=f}return B3(e,{...n,node:d}),s&&(i.doc=s),d},R2=(e,o)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!o.no_events,BP=(e,o,n)=>R2(e,n)?RP(e,o,n):o,NP=(e,o,n)=>{ve.inArray(o,n)===-1&&(e.addAttributeFilter(n,(s,i)=>{let d=s.length;for(;d--;)s[d].attr(i,null)}),o.push(n))},LP=(e,o,n)=>!o.no_events&&e?hw(e,{...o,content:n}).content:n,NR=(e,o,n)=>{const s=jr(n.getInner?o.innerHTML:e.getOuterHTML(o));return n.selection||ah(X.fromDom(o))?s:ve.trim(s)},Sp=(e,o,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,i=e.parse(o,s);return Pn(i),i},sl=(e,o,n)=>up(e,o).serialize(n),B2=(e,o,n,s,i)=>{const d=sl(o,n,s);return LP(e,i,d)},kp=(e,o)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=o&&o.dom?o.dom:Kt.DOM,d=o&&o.schema?o.schema:Jc(s),g=g1(s,d);AP(g,s,i);const f=(y,k={})=>{const D={format:"html",...k},L=BP(o,y,D),P=NR(i,L,D),j=Sp(g,P,D);return D.format==="tree"?j:B2(o,s,d,j,D)};return{schema:d,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:f,addRules:d.addValidElements,setRules:d.setValidElements,addTempAttr:Le(NP,g,n),getTempAttrs:Pe(n),getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters,removeNodeFilter:g.removeNodeFilter,removeAttributeFilter:g.removeAttributeFilter}},gu=(e,o)=>{const n=kp(e,o);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},N2="html",XE=(e,o)=>({...e,format:o,get:!0,getInner:!0}),qE=(e,o={})=>{const n=o.format?o.format:N2,s=XE(o,n);return JA(e,s).fold(fo,i=>{const d=CP(e,i);return eR(e,d,i)})},LR="html",HR=(e,o)=>({format:LR,...e,set:!0,content:o}),YE=(e,o,n={})=>{const s=HR(n,o);return ME(e,s).map(i=>{const d=ER(e,i.content,i);return AE(e,d.html,i),d.content}).getOr(o)},HP="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),IR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),PR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),QE=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],JE=(e,o)=>{const n=Et(o,s=>At(e,s));return Yo(n)},eO=e=>{const o=JE(e,HP),n=e.forced_root_block;return(n===!1||n==="")&&o.push("forced_root_block (false only)"),Yo(o)},IP=e=>JE(e,IR),zR=(e,o)=>{const n=ve.makeMap(e.plugins," "),s=Et(o,i=>At(n,i));return Yo(s)},PP=e=>zR(e,PR),fm=e=>zR(e,QE.map(o=>o.name)),zP=(e,o)=>{const n=eO(e),s=PP(o),i=s.length>0,d=n.length>0,g=o.theme==="mobile";if(i||d||g){const f=`
- `,y=g?`

Themes:${f}mobile`:"",k=i?`

Plugins:${f}${s.join(f)}`:"",D=d?`

Options:${f}${n.join(f)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+k+D)}},L2=e=>On(QE,o=>o.name===e).fold(()=>e,o=>o.replacedWith?`${e}, replaced by ${o.replacedWith}`:e),FP=(e,o)=>{const n=IP(e),s=fm(o),i=s.length>0,d=n.length>0;if(i||d){const g=`
- `,f=i?`

Plugins:${g}${s.map(L2).join(g)}`:"",y=d?`

Options:${g}${n.join(g)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+f+y)}},FR=(e,o)=>{zP(e,o),FP(e,o)},H2=Kt.DOM,VR=e=>{H2.setStyle(e.id,"display",e.orgDisplay)},LS=e=>I.from(e).each(o=>o.destroy()),VP=e=>{const o=e;o.contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null;const n=e.selection;if(n){const s=n.dom;o.selection=n.win=n.dom=s.doc=null}},_p=e=>{const o=e.formElement;o&&(o._mceOldSubmit&&(o.submit=o._mceOldSubmit,delete o._mceOldSubmit),H2.unbind(o,"submit reset",e.formEventDelegate))},ZP=e=>{if(!e.removed){const{_selectionOverrides:o,editorUpload:n}=e,s=e.getBody(),i=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(i==null?void 0:i.nextSibling)&&H2.remove(i.nextSibling),N3(e),e.editorManager.remove(e),!e.inline&&s&&VR(e),L3(e),H2.remove(e.getContainer()),LS(o),LS(n),e.destroy()}},UP=(e,o)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!o&&!e.removed){e.remove();return}o||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),LS(n),LS(s)),_p(e),VP(e),e.destroyed=!0}},HS=(()=>{const e={};return{add:(o,n)=>{e[o]=n},get:o=>e[o]?e[o]:{icons:{}},has:o=>At(e,o)}})(),_v=Gs.ModelManager,ZR=(e,o)=>o.dom[e],UR=(e,o)=>parseInt(Hi(o,e),10),WP=Le(ZR,"clientWidth"),$P=Le(ZR,"clientHeight"),jP=Le(UR,"margin-top"),IS=Le(UR,"margin-left"),GP=e=>e.dom.getBoundingClientRect(),KP=(e,o,n)=>{const s=WP(e),i=$P(e);return o>=0&&n>=0&&o<=s&&n<=i},I2=(e,o,n,s)=>{const i=GP(o),d=e?i.left+o.dom.clientLeft+IS(o):0,g=e?i.top+o.dom.clientTop+jP(o):0,f=n-d,y=s-g;return{x:f,y}},XP=(e,o,n)=>{const s=X.fromDom(e.getBody()),i=e.inline?s:Bs(s),d=I2(e.inline,i,o,n);return KP(i,d.x,d.y)},tO=e=>I.from(e).map(X.fromDom),qP=e=>{const o=e.inline?e.getBody():e.getContentAreaContainer();return tO(o).map(rc).getOr(!1)};var YP=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const WR=e=>{const o=[],n=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():YP()},s=()=>I.from(o[0]),i=(L,P)=>L.type===P.type&&L.text===P.text&&!L.progressBar&&!L.timeout&&!P.progressBar&&!P.timeout,d=()=>{me(o,L=>{L.reposition()})},g=L=>{o.push(L)},f=L=>{Ts(o,P=>P===L).each(P=>{o.splice(P,1)})},y=(L,P=!0)=>e.removed||!qP(e)?{}:(P&&e.dispatch("BeforeOpenNotification",{notification:L}),On(o,j=>i(n().getArgs(j),L)).getOrThunk(()=>{e.editorManager.setActive(e);const j=n().open(L,()=>{f(j),d(),a_(e)&&s().fold(()=>e.focus(),$=>v5(X.fromDom($.getEl())))});return g(j),d(),e.dispatch("OpenNotification",{notification:{...j}}),j})),k=()=>{s().each(L=>{n().close(L),f(L),d()})},D=Pe(o);return(L=>{L.on("SkinLoaded",()=>{const P=Xk(L);P&&y({text:P,type:"warning",timeout:0},!1),d()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(d)}),L.on("remove",()=>{me(o.slice(),P=>{n().close(P)})})})(e),{open:y,close:k,getNotifications:D}},Ev=Gs.PluginManager,Sc=Gs.ThemeManager;var p1=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const P2=e=>{let o=[];const n=()=>{const Z=e.theme;return Z&&Z.getWindowManagerImpl?Z.getWindowManagerImpl():p1()},s=(Z,U)=>(...re)=>U?U.apply(Z,re):void 0,i=Z=>{e.dispatch("OpenWindow",{dialog:Z})},d=Z=>{e.dispatch("CloseWindow",{dialog:Z})},g=Z=>{o.push(Z),i(Z)},f=Z=>{d(Z),o=Et(o,U=>U!==Z),o.length===0&&e.focus()},y=()=>I.from(o[o.length-1]),k=Z=>{e.editorManager.setActive(e),Dw(e),e.ui.show();const U=Z();return g(U),U},D=(Z,U)=>k(()=>n().open(Z,U,f)),L=Z=>k(()=>n().openUrl(Z,f)),P=(Z,U,re)=>{const ie=n();ie.alert(Z,s(re||ie,U))},j=(Z,U,re)=>{const ie=n();ie.confirm(Z,s(re||ie,U))},$=()=>{y().each(Z=>{n().close(Z),f(Z)})};return e.on("remove",()=>{me(o,Z=>{n().close(Z)})}),{open:D,openUrl:L,alert:P,confirm:j,close:$}},z2=(e,o)=>{e.notificationManager.open({type:"error",text:o})},vm=(e,o)=>{e._skinLoaded?z2(e,o):e.on("SkinLoaded",()=>{z2(e,o)})},f1=(e,o)=>{vm(e,Dl.translate(["Failed to upload image: {0}",o]))},Ep=(e,o,n)=>{pw(e,o,{message:n}),console.error(n)},Op=(e,o,n)=>n?`Failed to load ${e}: ${n} from url ${o}`:`Failed to load ${e} url: ${o}`,$R=(e,o,n)=>{Ep(e,"PluginLoadError",Op("plugin",o,n))},oO=(e,o,n)=>{Ep(e,"IconsLoadError",Op("icons",o,n))},nO=(e,o,n)=>{Ep(e,"LanguageLoadError",Op("language",o,n))},jR=(e,o,n)=>{Ep(e,"ThemeLoadError",Op("theme",o,n))},GR=(e,o,n)=>{Ep(e,"ModelLoadError",Op("model",o,n))},Ov=(e,o,n)=>{const s=Dl.translate(["Failed to initialize plugin: {0}",o]);pw(e,"PluginLoadError",{message:s}),F2(s,n),vm(e,s)},F2=(e,...o)=>{const n=window.console;n&&(n.error?n.error(e,...o):n.log(e,...o))},KR=e=>/^[a-z0-9\-]+$/i.test(e),PS=e=>"content/"+e+"/content.css",zS=e=>tinymce.Resource.has(PS(e)),XR=e=>rO(e,un(e)),qR=e=>rO(e,Xs(e)),rO=(e,o)=>{const n=e.editorManager.baseURL+"/skins/content",s=`content${e.editorManager.suffix}.css`;return Bt(o,i=>zS(i)?i:KR(i)&&!e.inline?`${n}/${i}/${s}`:e.documentBaseURI.toAbsolute(i))},YR=e=>{e.contentCSS=e.contentCSS.concat(XR(e),qR(e))},Ng=e=>e?ps(e.getElementsByTagName("img")):[],Tp=(e,o)=>{const n={};return{findAll:(s,i=at)=>{const d=Et(Ng(s),f=>{const y=f.src;return f.hasAttribute("data-mce-bogus")||f.hasAttribute("data-mce-placeholder")||!y||y===ae.transparentSrc?!1:Bo(y,"blob:")?!e.isUploaded(y)&&i(f):Bo(y,"data:")?i(f):!1}),g=Bt(d,f=>{const y=f.src;if(At(n,y))return n[y].then(k=>J(k)?k:{image:f,blobInfo:k.blobInfo});{const k=fv(o,y).then(D=>(delete n[y],{image:f,blobInfo:D})).catch(D=>(delete n[y],D));return n[y]=k,k}});return Promise.all(g)}}},kc=()=>{let e={};const o=(s,i)=>({status:s,resultUri:i}),n=s=>s in e;return{hasBlobUri:n,getResultUri:s=>{const i=e[s];return i?i.resultUri:null},isPending:s=>n(s)?e[s].status===1:!1,isUploaded:s=>n(s)?e[s].status===2:!1,markPending:s=>{e[s]=o(1,null)},markUploaded:(s,i)=>{e[s]=o(2,i)},removeFailed:s=>{delete e[s]},destroy:()=>{e={}}}};let QP=0;const JP=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},ez=e=>e+QP+++JP(),tz=()=>{let e=[];const o=f=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[f.toLowerCase()]||"dat",n=(f,y,k,D,L)=>{if(J(f))return s({id:f,name:D,filename:L,blob:y,base64:k});if(qe(f))return s(f);throw new Error("Unknown input type")},s=f=>{if(!f.blob||!f.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const y=f.id||ez("blobid"),k=f.name||y,D=f.blob;return{id:Pe(y),name:Pe(k),filename:Pe(f.filename||k+"."+o(D.type)),blob:Pe(D),base64:Pe(f.base64),blobUri:Pe(f.blobUri||URL.createObjectURL(D)),uri:Pe(f.uri)}},i=f=>{g(f.id())||e.push(f)},d=f=>On(e,f).getOrUndefined(),g=f=>d(y=>y.id()===f);return{create:n,add:i,get:g,getByUri:f=>d(y=>y.blobUri()===f),getByData:(f,y)=>d(k=>k.base64()===f&&k.blob().type===y),findFirst:d,removeByUri:f=>{e=Et(e,y=>y.blobUri()===f?(URL.revokeObjectURL(y.blobUri()),!1):!0)},destroy:()=>{me(e,f=>{URL.revokeObjectURL(f.blobUri())}),e=[]}}},oz=(e,o)=>{const n={},s=($,Z)=>$?$.replace(/\/$/,"")+"/"+Z.replace(/^\//,""):Z,i=($,Z)=>new Promise((U,re)=>{const ie=new XMLHttpRequest;ie.open("POST",o.url),ie.withCredentials=o.credentials,ie.upload.onprogress=Se=>{Z(Se.loaded/Se.total*100)},ie.onerror=()=>{re("Image upload failed due to a XHR Transport error. Code: "+ie.status)},ie.onload=()=>{if(ie.status<200||ie.status>=300){re("HTTP Error: "+ie.status);return}const Se=JSON.parse(ie.responseText);if(!Se||!J(Se.location)){re("Invalid JSON: "+ie.responseText);return}U(s(o.basePath,Se.location))};const pe=new FormData;pe.append("file",$.blob(),$.filename()),ie.send(pe)}),d=te(o.handler)?o.handler:i,g=()=>new Promise($=>{$([])}),f=($,Z)=>({url:Z,blobInfo:$,status:!0}),y=($,Z)=>({url:"",blobInfo:$,status:!1,error:Z}),k=($,Z)=>{ve.each(n[$],U=>{U(Z)}),delete n[$]},D=($,Z,U)=>(e.markPending($.blobUri()),new Promise(re=>{let ie,pe;try{const Se=()=>{ie&&(ie.close(),pe=Be)},je=Ve=>{Se(),e.markUploaded($.blobUri(),Ve),k($.blobUri(),f($,Ve)),re(f($,Ve))},Ye=Ve=>{Se(),e.removeFailed($.blobUri()),k($.blobUri(),y($,Ve)),re(y($,Ve))};pe=Ve=>{Ve<0||Ve>100||I.from(ie).orThunk(()=>I.from(U).map(Xo)).each(Me=>{ie=Me,Me.progressBar.value(Ve)})},Z($,pe).then(je,Ve=>{Ye(J(Ve)?{message:Ve}:Ve)})}catch(Se){re(y($,Se))}})),L=$=>$===i,P=$=>{const Z=$.blobUri();return new Promise(U=>{n[Z]=n[Z]||[],n[Z].push(U)})},j=($,Z)=>($=ve.grep($,U=>!e.isUploaded(U.blobUri())),Promise.all(ve.map($,U=>e.isPending(U.blobUri())?P(U):D(U,d,Z))));return{upload:($,Z)=>!o.url&&L(d)?g():j($,Z)}},QR=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),JR=(e,o)=>oz(o,{url:jk(e),basePath:S0(e),credentials:Gk(e),handler:Kk(e)}),nz=e=>{const o=kc(),n=JR(e,o);return{upload:(s,i=!0)=>n.upload(s,i?QR(e):void 0)}},rz=(e,o)=>e.dom.isEmpty(o.dom)&&Oe(e.schema.getTextBlockElements()[po(o)]),sz=e=>o=>{rz(e,o)&&ao(o,X.fromHtml('<br data-mce-bogus="1" />'))},az=e=>{const o=tz();let n,s;const i=kc(),d=[],g=pe=>Se=>e.selection?pe(Se):[],f=pe=>pe+(pe.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(pe,Se,je)=>{let Ye=0;do Ye=pe.indexOf(Se,Ye),Ye!==-1&&(pe=pe.substring(0,Ye)+je+pe.substr(Ye+Se.length),Ye+=je.length-Se.length+1);while(Ye!==-1);return pe},k=(pe,Se,je)=>{const Ye=`src="${je}"${je===ae.transparentSrc?' data-mce-placeholder="1"':""}`;return pe=y(pe,`src="${Se}"`,Ye),pe=y(pe,'data-mce-src="'+Se+'"','data-mce-src="'+je+'"'),pe},D=(pe,Se)=>{me(e.undoManager.data,je=>{je.type==="fragmented"?je.fragments=Bt(je.fragments,Ye=>k(Ye,pe,Se)):je.content=k(je.content,pe,Se)})},L=(pe,Se)=>{const je=e.convertURL(Se,"src");D(pe.src,Se),Ai(X.fromDom(pe),{src:AC(e)?f(Se):Se,"data-mce-src":je})},P=()=>(n||(n=JR(e,i)),U().then(g(pe=>{const Se=Bt(pe,je=>je.blobInfo);return n.upload(Se,QR(e)).then(g(je=>{const Ye=[];let Ve=!1;const Me=Bt(je,(we,ze)=>{const{blobInfo:lt,image:ye}=pe[ze];let rt=!1;return we.status&&w0(e)?(we.url&&!Yn(ye.src,we.url)&&(Ve=!0),o.removeByUri(ye.src),pm(e)||L(ye,we.url)):we.error&&(we.error.remove&&(D(ye.src,ae.transparentSrc),Ye.push(ye),rt=!0),f1(e,we.error.message)),{element:ye,status:we.status,uploadUri:we.url,blobInfo:lt,removed:rt}});return Ye.length>0&&!pm(e)?e.undoManager.transact(()=>{me(oh(Ye),we=>{const ze=vs(we);$o(we),ze.each(sz(e)),o.removeByUri(we.dom.src)})}):Ve&&e.undoManager.dispatchChange(),Me}))}))),j=()=>MC(e)?P():Promise.resolve([]),$=pe=>hr(d,Se=>Se(pe)),Z=pe=>{d.push(pe)},U=()=>(s||(s=Tp(i,o)),s.findAll(e.getBody(),$).then(g(pe=>{const Se=Et(pe,je=>J(je)?(vm(e,je),!1):je.uriType!=="blob");return pm(e)||me(Se,je=>{D(je.image.src,je.blobInfo.blobUri()),je.image.src=je.blobInfo.blobUri(),je.image.removeAttribute("data-mce-src")}),Se}))),re=()=>{o.destroy(),i.destroy(),s=n=null},ie=pe=>pe.replace(/src="(blob:[^"]+)"/g,(Se,je)=>{const Ye=i.getResultUri(je);if(Ye)return'src="'+Ye+'"';let Ve=o.getByUri(je);return Ve||(Ve=En(e.editorManager.get(),(Me,we)=>Me||we.editorUpload&&we.editorUpload.blobCache.getByUri(je),void 0)),Ve?'src="data:'+Ve.blob().type+";base64,"+Ve.base64()+'"':Se});return e.on("SetContent",()=>{MC(e)?j():U()}),e.on("RawSaveContent",pe=>{pe.content=ie(pe.content)}),e.on("GetContent",pe=>{pe.source_view||pe.format==="raw"||pe.format==="tree"||(pe.content=ie(pe.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",pe=>{me(pe,Se=>{const je=Se.attr("src");if(!je||o.getByUri(je))return;const Ye=i.getResultUri(je);Ye&&Se.attr("src",Ye)})})}),{blobCache:o,addFilter:Z,uploadImages:P,uploadImagesAuto:j,scanForImages:U,destroy:re}},iz=e=>{const o=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{o.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{o.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},d={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[g,i,d]:[i,g,d]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,d,g)=>pt(i)&&i.hasAttribute("href"),onformat:(i,d,g)=>{ve.each(g,(f,y)=>{o.setAttrib(i,y,f)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var d;return(d=i==null?void 0:i.customValue)!==null&&d!==void 0?d:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ve.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{s[i]={block:i,remove:"all"}}),s},FS={remove_similar:!0,inherit:!1},Dp={selector:"td,th",...FS},e6={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Dp},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Dp},tablecellbordercolor:{styles:{borderColor:"%value"},...Dp},tablecellclass:{classes:["%value"],...Dp},tableclass:{selector:"table",classes:["%value"],...FS},tablecellborderstyle:{styles:{borderStyle:"%value"},...Dp},tablecellborderwidth:{styles:{borderWidth:"%value"},...Dp}},lz=Pe(e6),cz=e=>{const o={},n=g=>Oe(g)?o[g]:o,s=g=>At(o,g),i=(g,f)=>{g&&(J(g)?(Oo(f)||(f=[f]),me(f,y=>{Rn(y.deep)&&(y.deep=!qi(y)),Rn(y.split)&&(y.split=!qi(y)||dr(y)),Rn(y.remove)&&qi(y)&&!dr(y)&&(y.remove="none"),qi(y)&&dr(y)&&(y.mixed=!0,y.block_expand=!0),J(y.classes)&&(y.classes=y.classes.split(/\s+/))}),o[g]=f):ot(g,(y,k)=>{i(k,y)}))},d=g=>(g&&o[g]&&delete o[g],o);return i(iz(e)),i(lz()),i(Yk(e)),{get:n,has:s,register:i,unregister:d}},V2=ve.each,Fl=Kt.DOM,Z2=e=>Oe(e)&&qe(e),sO=(e,o)=>{const n=o&&o.schema||Jc({}),s=(y,k)=>{k.classes.length>0&&Fl.addClass(y,k.classes.join(" ")),Fl.setAttribs(y,k.attrs)},i=y=>{const k=J(y)?{name:y,classes:[],attrs:{}}:y,D=Fl.create(k.name);return s(D,k),D},d=(y,k)=>{const D=n.getElementRule(y.nodeName.toLowerCase()),L=D==null?void 0:D.parentsRequired;return L&&L.length?k&&It(L,k)?k:L[0]:!1},g=(y,k,D)=>{let L;const P=k[0],j=Z2(P)?P.name:void 0,$=d(y,j);if($)j===$?(L=P,k=k.slice(1)):L=$;else if(P)L=P,k=k.slice(1);else if(!D)return y;const Z=L?i(L):Fl.create("div");Z.appendChild(y),D&&ve.each(D,re=>{const ie=i(re);Z.insertBefore(ie,y)});const U=Z2(L)?L.siblings:void 0;return g(Z,k,U)},f=Fl.create("div");if(e.length>0){const y=e[0],k=i(y),D=Z2(y)?y.siblings:void 0;f.appendChild(g(k,e.slice(1),D))}return f},t6=e=>{e=ve.trim(e);let o="div";const n={name:o,classes:[],attrs:{},selector:e};return e!=="*"&&(o=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,i,d,g,f)=>{switch(i){case"#":n.attrs.id=d;break;case".":n.classes.push(d);break;case":":ve.inArray("checked disabled enabled read-only required".split(" "),d)!==-1&&(n.attrs[d]=d);break}if(g==="["){const y=f.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(n.attrs[y[1]]=y[2])}return""})),n.name=o||"div",n},aO=e=>J(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ve.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),o=>{const n=ve.map(o.split(/(?:~\+|~|\+)/),t6),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],dz=(e,o)=>{let n="",s=Qk(e);if(s==="")return"";const i=P=>J(P)?P.replace(/%(\w+)/g,""):"",d=(P,j)=>Fl.getStyle(j??e.getBody(),P,!0);if(J(o)){const P=e.formatter.get(o);if(!P)return"";o=P[0]}if("preview"in o){const P=o.preview;if(P===!1)return"";s=P||s}let g=o.block||o.inline||"span",f;const y=aO(o.selector);y.length>0?(y[0].name||(y[0].name=g),g=o.selector,f=sO(y,e)):f=sO([g],e);const k=Fl.select(g,f)[0]||f.firstChild;V2(o.styles,(P,j)=>{const $=i(P);$&&Fl.setStyle(k,j,$)}),V2(o.attributes,(P,j)=>{const $=i(P);$&&Fl.setAttrib(k,j,$)}),V2(o.classes,P=>{const j=i(P);Fl.hasClass(k,j)||Fl.addClass(k,j)}),e.dispatch("PreviewFormats"),Fl.setStyles(f,{position:"absolute",left:-65535}),e.getBody().appendChild(f);const D=d("fontSize"),L=/px$/.test(D)?parseInt(D,10):0;return V2(s.split(" "),P=>{let j=d(P,k);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=d(P),vf(j).toLowerCase()==="#ffffff"))&&!(P==="color"&&vf(j).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(j)){if(L===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*L+"px"}P==="border"&&j&&(n+="padding:0 2px;"),n+=P+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),Fl.remove(f),n},uz=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)e.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},hu=e=>{const o=cz(e),n=Tr({});return uz(e),nA(e),pm(e)||aI(n,e),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(s,i,d)=>{_R(e,s,i,d)},remove:(s,i,d,g)=>{bP(e,s,i,d,g)},toggle:(s,i,d)=>{yP(e,s,i,d)},match:(s,i,d,g)=>kv(e,s,i,d,g),closest:s=>vP(e,s),matchAll:(s,i)=>M2(e,s,i),matchNode:(s,i,d,g)=>SR(e,s,i,d,g),canApply:s=>kR(e,s),formatChanged:(s,i,d,g)=>xP(e,n,s,i,d,g),getCssText:Le(dz,e)}},_c=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},VS=(e,o,n)=>{const s=Tr(!1),i=y=>{BS(o,!1,n),o.add({},y)};e.on("init",()=>{o.add()}),e.on("BeforeExecCommand",y=>{const k=y.command;_c(k)||(NS(o,n),o.beforeChange())}),e.on("ExecCommand",y=>{const k=y.command;_c(k)||i(y)}),e.on("ObjectResizeStart cut",()=>{o.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",y=>{const k=y.keyCode;if(y.isDefaultPrevented())return;const D=ae.os.isMacOS()&&y.key==="Meta";(k>=33&&k<=36||k>=37&&k<=40||k===45||y.ctrlKey||D)&&(i(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),s.get()&&o.typing&&!UE(Bg(e),o.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const k=y.keyCode;if(y.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){o.typing&&i(y);return}const D=y.ctrlKey&&!y.altKey||y.metaKey;if((k<16||k>20)&&k!==224&&k!==91&&!o.typing&&!D){o.beforeChange(),BS(o,!0,n),o.add({},y),s.set(!0);return}(ae.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&o.beforeChange()}),e.on("mousedown",y=>{o.typing&&i(y)});const d=y=>y.inputType==="insertReplacementText",g=y=>y.inputType==="insertText"&&y.data===null,f=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(d(y)||g(y)||f(y))&&i(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},o6=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},U2=e=>{const o=Ku(),n=Tr(0),s=Tr(0),i={data:[],typing:!1,beforeChange:()=>{uP(e,n,o)},add:(d,g)=>xR(e,i,s,n,o,d,g),dispatchChange:()=>{e.setDirty(!0);const d=Bg(e);d.bookmark=_f(e.selection),e.dispatch("change",{level:d,lastLevel:Nc(i.data,s.get()).getOrUndefined()})},undo:()=>jE(e,i,n,s),redo:()=>mP(e,s,i.data),clear:()=>{gP(e,i,s)},reset:()=>{hP(e,i)},hasUndo:()=>pP(e,i,s),hasRedo:()=>CR(e,i,s),transact:d=>wR(e,i,n,d),ignore:d=>{fP(e,n,d)},extra:(d,g)=>{h1(e,i,s,d,g)}};return pm(e)||VS(e,i,n),o6(e),i},n6=[9,27,ht.HOME,ht.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ht.DOWN,ht.UP,ht.LEFT,ht.RIGHT].concat(ae.browser.isFirefox()?[224]:[]),iO="data-mce-placeholder",lO=e=>e.type==="keydown"||e.type==="keyup",cO=e=>{const o=e.keyCode;return o===ht.BACKSPACE||o===ht.DELETE},r6=e=>{if(lO(e)){const o=e.keyCode;return!cO(e)&&(ht.metaKeyPressed(e)||e.altKey||o>=112&&o<=123||It(n6,o))}else return!1},s6=e=>lO(e)&&!(cO(e)||e.type==="keyup"&&e.keyCode===229),ZS=(e,o,n)=>{if(Hn(X.fromDom(o),!1)){const s=o.firstElementChild;return s?e.getStyle(o.firstElementChild,"padding-left")||e.getStyle(o.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},dO=e=>{var o;const n=e.dom,s=Hs(e),i=(o=mg(e))!==null&&o!==void 0?o:"",d=(g,f)=>{if(r6(g))return;const y=e.getBody(),k=s6(g)?!1:ZS(n,y,s);(n.getAttrib(y,iO)!==""!==k||f)&&(n.setAttrib(y,iO,k?i:null),n.setAttrib(y,"aria-placeholder",k?i:null),go(e,k),e.on(k?"keydown":"keyup",d),e.off(k?"keyup":"keydown",d))};sr(i)&&e.on("init",g=>{d(g,!0),e.on("change SetContent ExecCommand",d),e.on("paste",f=>Ll.setEditorTimeout(e,()=>d(f)))})},mz=(e,o)=>({block:e,position:o}),gz=(e,o)=>({from:e,to:o}),uO=(e,o)=>{const n=X.fromDom(e),s=X.fromDom(o.container());return Zw(n,s).map(i=>mz(i,o))},hz=e=>!yo(e.from.block,e.to.block),mO=(e,o)=>rs(o,n=>cc(n)||Ua(n.dom),n=>yo(n,e)).filter(Sa).getOr(e),pz=(e,o)=>{const n=X.fromDom(e);return yo(mO(n,o.from.block),mO(n,o.to.block))},fz=e=>xe(e.from.block.dom)===!1&&xe(e.to.block.dom)===!1,gO=e=>{const o=n=>_l(n)||Yc(n.dom);return o(e.from.block)&&o(e.to.block)},vz=(e,o,n)=>Co(n.position.getNode())&&!Hn(n.block)?Gh(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Ga(o,e,s).bind(i=>uO(e,i)):I.some(n)).getOr(n):n,bz=(e,o,n)=>{const s=uO(e,Ce.fromRangeStart(n)),i=s.bind(d=>Ga(o,e,d.position).bind(g=>uO(e,g).map(f=>vz(e,o,f))));return Qn(s,i,gz).filter(d=>hz(d)&&pz(e,d)&&fz(d)&&gO(d))},yz=(e,o,n)=>n.collapsed?bz(e,o,n):I.none(),xz=(e,o)=>{const n=Vr(e);return Ts(n,s=>o.isBlock(po(s))).fold(Pe(n),s=>n.slice(0,s))},a6=(e,o)=>{const n=xz(e,o);return me(n,$o),n},i6=(e,o)=>{const n=iu(o,e);return On(n.reverse(),s=>Hn(s)).each($o)},Cz=e=>Et(Ld(e),o=>!Hn(o)).length===0,US=(e,o,n,s,i)=>{if(Hn(n))return zu(n),Qs(n.dom);Cz(i)&&Hn(o)&&Ur(i,X.fromTag("br"));const d=Ys(n.dom,Ce.before(i.dom));return me(a6(o,s),g=>{Ur(i,g)}),i6(e,o),d},hO=(e,o)=>e.isInline(po(o)),wz=(e,o,n,s)=>{if(Hn(n)){if(Hn(o)){const d=ml((g=>{const f=(y,k)=>Ru(y).fold(()=>k,D=>hO(s,D)?f(D,k.concat(Yu(D))):k);return f(g,[])})(n),(g,f)=>(Xp(g,f),f),tf());ac(o),ao(o,d)}return $o(n),Qs(o.dom)}const i=Rl(n.dom);return me(a6(o,s),d=>{ao(n,d)}),i6(e,o),i},Sz=(e,o)=>{const n=iu(o,e);return I.from(n[n.length-1])},kz=(e,o)=>oc(o,e)?Sz(o,e):I.none(),l6=(e,o)=>{Gh(e,o.dom).bind(n=>I.from(n.getNode())).map(X.fromDom).filter(Ta).each($o)},pO=(e,o,n,s)=>(l6(!0,o),l6(!1,n),kz(o,n).fold(Le(wz,e,o,n,s),Le(US,e,o,n,s))),c6=(e,o,n,s,i)=>o?pO(e,s,n,i):pO(e,n,s,i),fO=(e,o)=>{const n=X.fromDom(e.getBody());return yz(n.dom,o,e.selection.getRng()).map(s=>()=>{c6(n,o,s.from.block,s.to.block,e.schema).each(i=>{e.selection.setRng(i.toRange())})})},vO=(e,o,n)=>{const s=o.getRng();return Qn(Zw(e,X.fromDom(s.startContainer)),Zw(e,X.fromDom(s.endContainer)),(i,d)=>yo(i,d)?I.none():I.some(()=>{s.deleteContents(),c6(e,!0,i,d,n).each(g=>{o.setRng(g.toRange())})})).getOr(I.none())},d6=(e,o)=>{const n=X.fromDom(o),s=Le(yo,e);return Nn(n,cc,s).isSome()},_z=(e,o)=>d6(e,o.startContainer)||d6(e,o.endContainer),Ez=(e,o)=>{const n=Ys(e.dom,Ce.fromRangeStart(o)).isNone(),s=qs(e.dom,Ce.fromRangeEnd(o)).isNone();return!_z(e,o)&&n&&s},Oz=e=>I.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Tz=e=>{const o=X.fromDom(e.getBody()),n=e.selection.getRng();return Ez(o,n)?Oz(e):vO(o,e.selection,e.schema)},bO=(e,o)=>e.selection.isCollapsed()?I.none():Tz(e),Lg=(e,o,n,s,i)=>I.from(o._selectionOverrides.showCaret(e,n,s,i)),WS=e=>{const o=e.ownerDocument.createRange();return o.selectNode(e),o},Mp=(e,o)=>e.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?I.none():I.some(WS(o)),Dz=(e,o,n)=>{const s=gy(1,e.getBody(),o),i=Ce.fromRangeStart(s),d=i.getNode();if(zh(d))return Lg(1,e,d,!i.isAtEnd(),!1);const g=i.getNode(!0);if(zh(g))return Lg(1,e,g,!1,!1);const f=pp(e.dom.getRoot(),i.getNode());return zh(f)?Lg(1,e,f,!1,n):I.none()},yO=(e,o,n)=>o.collapsed?Dz(e,o,n).getOr(o):o,$S=e=>mp(e)||Gy(e),Mz=e=>gp(e)||Ky(e),Az=(e,o)=>{Ae(o)&&o.data.length===0&&e.remove(o)},u6=(e,o,n,s,i,d)=>{Lg(s,e,d.getNode(!i),i,!0).each(g=>{if(o.collapsed){const f=o.cloneRange();i?f.setEnd(g.startContainer,g.startOffset):f.setStart(g.endContainer,g.endOffset),f.deleteContents()}else o.deleteContents();e.selection.setRng(g)}),Az(e.dom,n)},Rz=(e,o)=>{const n=e.selection.getRng();if(!Ae(n.commonAncestorContainer))return I.none();const s=o?ms.Forwards:ms.Backwards,i=Ba(e.getBody()),d=Le(py,o?i.next:i.prev),g=o?$S:Mz,f=zf(s,e.getBody(),n),y=d(f),k=y&&Il(o,y);if(!k||!H0(f,k))return I.none();if(g(k))return I.some(()=>u6(e,n,f.getNode(),s,o,k));const D=d(k);return D&&g(D)&&H0(k,D)?I.some(()=>u6(e,n,f.getNode(),s,o,D)):I.none()},xO=(e,o)=>Rz(e,o),CO=(e,o)=>{const n=e.getBody();return o?Qs(n).filter(mp):Rl(n).filter(gp)},wO=e=>{const o=e.selection.getRng();return!o.collapsed&&(CO(e,!0).exists(n=>n.isEqual(Ce.fromRangeStart(o)))||CO(e,!1).exists(n=>n.isEqual(Ce.fromRangeEnd(o))))},Bz=e=>Oe(e)&&(cc(X.fromDom(e))||ar(X.fromDom(e))),Ec=nd.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Nz=(e,o)=>{const n=o.getNode(!e),s=e?"after":"before";return pt(n)&&n.getAttribute("data-mce-caret")===s},Lz=(e,o,n,s,i)=>{const d=g=>i.isInline(g.nodeName.toLowerCase())&&!hc(n,s,e);return tw(!o,n).fold(()=>tw(o,s).fold(Ie,d),d)},xd=(e,o,n,s)=>{const i=s.getNode(!o);return Zw(X.fromDom(e),X.fromDom(n.getNode())).map(d=>Hn(d)?Ec.remove(d.dom):Ec.moveToElement(i)).orThunk(()=>I.some(Ec.moveToElement(i)))},jS=(e,o,n,s)=>Ga(o,e,n).bind(i=>Bz(i.getNode())||Lz(e,o,n,i,s)?I.none():o&&xe(i.getNode())||!o&&xe(i.getNode(!0))?xd(e,o,n,i):o&&gp(n)||!o&&mp(n)?I.some(Ec.moveToPosition(i)):I.none()),m6=(e,o)=>io(o)?I.none():e&&xe(o.nextSibling)?I.some(Ec.moveToElement(o.nextSibling)):!e&&xe(o.previousSibling)?I.some(Ec.moveToElement(o.previousSibling)):I.none(),g6=(e,o,n)=>n.fold(s=>I.some(Ec.remove(s)),s=>I.some(Ec.moveToElement(s)),s=>hc(o,s,e)?I.none():I.some(Ec.moveToPosition(s))),Hz=(e,o,n,s)=>Nz(o,n)?m6(o,n.getNode(!o)).orThunk(()=>jS(e,o,n,s)):jS(e,o,n,s).bind(i=>g6(e,n,i)),h6=(e,o,n,s)=>{const i=gy(o?1:-1,e,n),d=Ce.fromRangeStart(i),g=X.fromDom(e);return!o&&gp(d)?I.some(Ec.remove(d.getNode(!0))):o&&mp(d)?I.some(Ec.remove(d.getNode())):!o&&mp(d)&&f_(g,d,s)?aM(g,d,s).map(f=>Ec.remove(f.getNode())):o&&gp(d)&&Tg(g,d,s)?oH(g,d,s).map(f=>Ec.remove(f.getNode())):Hz(e,o,d,s)},Iz=(e,o)=>n=>(e._selectionOverrides.hideFakeCaret(),hp(e,o,X.fromDom(n)),!0),p6=(e,o)=>n=>{const s=o?Ce.before(n):Ce.after(n);return e.selection.setRng(s.toRange()),!0},Pz=e=>o=>(e.selection.setRng(o.toRange()),!0),f6=(e,o)=>I.from(pp(e.getBody(),o)),zz=(e,o)=>{const n=e.selection.getNode();return f6(e,n).filter(xe).fold(()=>h6(e.getBody(),o,e.selection.getRng(),e.schema).map(s=>()=>s.fold(Iz(e,o),p6(e,o),Pz(e))),()=>I.some(Be))},Tv=e=>{me(rn(e,".mce-offscreen-selection"),$o)},v6=(e,o)=>{const n=e.selection.getNode();return xe(n)&&!$s(n)?f6(e,n.parentNode).filter(xe).fold(()=>I.some(()=>{Tv(X.fromDom(e.getBody())),hp(e,o,X.fromDom(e.selection.getNode())),Uw(e)}),()=>I.some(Be)):wO(e)?I.some(()=>{av(e,e.selection.getRng(),X.fromDom(e.getBody()))}):I.none()},SO=e=>{const o=e.dom,n=e.selection,s=pp(e.getBody(),n.getNode());if(Ua(s)&&o.isBlock(s)&&o.isEmpty(s)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(s,""),s.appendChild(i),n.setRng(Ce.before(i).toRange())}return!0},GS=(e,o)=>e.selection.isCollapsed()?zz(e,o):v6(e,o),kO=(e,o)=>{const n=Ce.fromRangeStart(e.selection.getRng());return Ga(o,e.getBody(),n).filter(s=>o?qL(s):Q5(s)).bind(s=>L0(o?0:-1,s)).map(s=>()=>e.selection.select(s))},_O=(e,o)=>e.selection.isCollapsed()?kO(e,o):I.none(),Dv=Ae,b6=e=>Dv(e)&&e.data[0]===$r,Oc=e=>Dv(e)&&e.data[e.data.length-1]===$r,y6=e=>{var o;return((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode($r)},Fz=e=>{var o;if(Dv(e.previousSibling))return Oc(e.previousSibling)||e.previousSibling.appendData($r),e.previousSibling;if(Dv(e))return b6(e)||e.insertData(0,$r),e;{const n=y6(e);return(o=e.parentNode)===null||o===void 0||o.insertBefore(n,e),n}},v1=e=>{var o,n;if(Dv(e.nextSibling))return b6(e.nextSibling)||e.nextSibling.insertData(0,$r),e.nextSibling;if(Dv(e))return Oc(e)||e.appendData($r),e;{const s=y6(e);return e.nextSibling?(o=e.parentNode)===null||o===void 0||o.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},W2=(e,o)=>e?Fz(o):v1(o),Vz=Le(W2,!0),KS=Le(W2,!1),x6=(e,o)=>Ae(e.container())?W2(o,e.container()):W2(o,e.getNode()),C6=(e,o)=>{const n=o.get();return n&&e.container()===n&&Fd(n)},EO=(e,o)=>o.fold(n=>{Yd(e.get());const s=Vz(n);return e.set(s),I.some(Ce(s,s.length-1))},n=>Qs(n).map(s=>{if(C6(s,e)){const i=e.get();return Ce(i,1)}else{Yd(e.get());const i=x6(s,!0);return e.set(i),Ce(i,1)}}),n=>Rl(n).map(s=>{if(C6(s,e)){const i=e.get();return Ce(i,i.length-1)}else{Yd(e.get());const i=x6(s,!1);return e.set(i),Ce(i,i.length-1)}}),n=>{Yd(e.get());const s=KS(n);return e.set(s),I.some(Ce(s,1))}),w6=(e,o)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,o);if(s.isSome())return s}return I.none()},Ya=nd.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),S6=(e,o)=>ad(o,e)||e,Hg=(e,o,n)=>{const s=o2(n),i=S6(o,s.container());return Dg(e,i,s).fold(()=>qs(i,s).bind(Le(Dg,e,i)).map(d=>Ya.before(d)),I.none)},Zz=(e,o)=>am(e,o)===null,k6=(e,o,n)=>Dg(e,o,n).filter(Le(Zz,o)),Uz=(e,o,n)=>{const s=fM(n);return k6(e,o,s).bind(i=>Ys(i,s).isNone()?I.some(Ya.start(i)):I.none())},Wz=(e,o,n)=>{const s=o2(n);return k6(e,o,s).bind(i=>qs(i,s).isNone()?I.some(Ya.end(i)):I.none())},$z=(e,o,n)=>{const s=fM(n),i=S6(o,s.container());return Dg(e,i,s).fold(()=>Ys(i,s).bind(Le(Dg,e,i)).map(d=>Ya.after(d)),I.none)},XS=e=>!Vw($2(e)),Cd=(e,o,n)=>w6([Hg,Uz,Wz,$z],[e,o,n]).filter(XS),$2=e=>e.fold(fo,fo,fo,fo),OO=e=>e.fold(Pe("before"),Pe("start"),Pe("end"),Pe("after")),j2=e=>e.fold(Ya.before,Ya.before,Ya.after,Ya.after),qS=e=>e.fold(Ya.start,Ya.start,Ya.end,Ya.end),jz=(e,o)=>OO(e)===OO(o)&&$2(e)===$2(o),G2=(e,o,n,s,i,d)=>Qn(Dg(o,n,s),Dg(o,n,i),(g,f)=>g!==f&&pM(n,g,f)?Ya.after(e?g:f):d).getOr(d),YS=(e,o)=>e.fold(at,n=>!jz(n,o)),_6=(e,o,n,s,i)=>{const d=Il(e,i);return Ga(e,n,d).map(Le(Il,e)).fold(()=>s.map(j2),g=>Cd(o,n,g).map(Le(G2,e,o,n,d,g)).filter(Le(YS,s))).filter(XS)},E6=(e,o)=>e?o.fold(E(I.some,Ya.start),I.none,E(I.some,Ya.after),I.none):o.fold(I.none,E(I.some,Ya.before),I.none,E(I.some,Ya.end)),O6=(e,o,n,s)=>{const i=Il(e,s),d=Cd(o,n,i);return Cd(o,n,i).bind(Le(E6,e)).orThunk(()=>_6(e,o,n,d,s))},T6=e=>te(e.selection.getSel().modify),K2=(e,o,n)=>{const s=e?1:-1;return o.setRng(Ce(n.container(),n.offset()+s).toRange()),o.getSel().modify("move",e?"forward":"backward","word"),!0},TO=(e,o)=>{const n=o.selection.getRng(),s=e?Ce.fromRangeEnd(n):Ce.fromRangeStart(n);return T6(o)?e&&j1(s)?K2(!0,o.selection,s):!e&&Fu(s)?K2(!1,o.selection,s):!1:!1};var Vl;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Vl||(Vl={}));const QS=(e,o)=>e===ms.Backwards?yn(o):o,D6=(e,o,n)=>e===ms.Forwards?o.next(n):o.prev(n),Gz=(e,o,n,s)=>Co(s.getNode(o===ms.Forwards))?Vl.Br:hc(n,s)===!1?Vl.Block:Vl.Wrap,M6=(e,o,n,s)=>{const i=Ba(n);let d=s;const g=[];for(;d;){const f=D6(o,i,d);if(!f)break;if(Co(f.getNode(!1)))return o===ms.Forwards?{positions:QS(o,g).concat([f]),breakType:Vl.Br,breakAt:I.some(f)}:{positions:QS(o,g),breakType:Vl.Br,breakAt:I.some(f)};if(!f.isVisible()){d=f;continue}if(e(d,f)){const y=Gz(n,o,d,f);return{positions:QS(o,g),breakType:y,breakAt:I.some(f)}}g.push(f),d=f}return{positions:QS(o,g),breakType:Vl.Eol,breakAt:I.none()}},DO=(e,o,n,s)=>o(n,s).breakAt.map(i=>{const d=o(n,i).positions;return e===ms.Backwards?d.concat(i):[i].concat(d)}).getOr([]),MO=(e,o)=>En(e,(n,s)=>n.fold(()=>I.some(s),i=>Qn(xn(i.getClientRects()),xn(s.getClientRects()),(d,g)=>{const f=Math.abs(o-d.left);return Math.abs(o-g.left)<=f?s:i}).or(n)),I.none()),X2=(e,o)=>xn(o.getClientRects()).bind(n=>MO(e,n.left)),q2=Le(M6,Ce.isAbove,-1),Y2=Le(M6,Ce.isBelow,1),A6=Le(DO,-1,q2),R6=Le(DO,1,Y2),B6=(e,o)=>q2(e,o).breakAt.isNone(),N6=(e,o)=>Y2(e,o).breakAt.isNone(),Kz=e=>Qs(e).map(o=>[o].concat(Y2(e,o).positions)).getOr([]),Xz=e=>Rl(e).map(o=>q2(e,o).positions.concat(o)).getOr([]),L6=(e,o)=>X2(A6(e,o),o),qz=(e,o)=>X2(R6(e,o),o),b1=xe,AO=(e,o)=>Math.abs(e.left-o),JS=(e,o)=>Math.abs(e.right-o),H6=e=>Jr(e,"node"),e4=(e,o)=>sa(e,(n,s)=>{const i=Math.min(AO(n,o),JS(n,o)),d=Math.min(AO(s,o),JS(s,o));return d===i&&H6(s)&&b1(s.node)||d<i?s:n}),Ap=e=>{const o=n=>Bt(n,s=>{const i=hn(s);return i.node=e,i});if(pt(e))return o(e.getClientRects());if(Ae(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),o(n.getClientRects())}else return[]},RO=e=>Ds(e,Ap);var Qa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Qa||(Qa={}));const y1=(e,o,n,s)=>{let i=s;for(;i=Qd(i,e,Vu,o);)if(n(i))return},t4=(e,o,n,s,i,d)=>{let g=0;const f=[],y=L=>{let P=RO([L]);e===-1&&(P=P.reverse());for(let j=0;j<P.length;j++){const $=P[j];if(!n($,k)){if(f.length>0&&o($,Ei(f))&&g++,$.line=g,i($))return!0;f.push($)}}return!1},k=Ei(d.getClientRects());if(!k)return f;const D=d.getNode();return D&&(y(D),y1(e,s,y,D)),f},Yz=(e,o)=>o.line>e,I6=(e,o)=>o.line===e,Qz=Le(t4,Qa.Up,Th,Dh),Jz=Le(t4,Qa.Down,Dh,Th),P6=e=>Ei(e.getClientRects()),eF=(e,o,n,s)=>{const i=Ba(o);let d,g,f,y;const k=[];let D=0;e===1?(d=i.next,g=Dh,f=Th,y=Ce.after(s)):(d=i.prev,g=Th,f=Dh,y=Ce.before(s));const L=P6(y);do{if(!y.isVisible())continue;const P=P6(y);if(f(P,L))continue;k.length>0&&g(P,Ei(k))&&D++;const j=hn(P);if(j.position=y,j.line=D,n(j))return k;k.push(j)}while(y=d(y));return k},z6=e=>o=>Yz(e,o),o4=e=>o=>I6(e,o),Ig=(e,o)=>{e.selection.setRng(o),ov(e,e.selection.getRng())},F6=(e,o,n)=>I.some(yO(e,o,n)),x1=(e,o,n,s,i,d)=>{const g=o===ms.Forwards,f=Ba(e.getBody()),y=Le(py,g?f.next:f.prev),k=g?s:i;if(!n.collapsed){const $=wf(n);if(d($))return Lg(o,e,$,o===ms.Backwards,!1);if(wO(e)){const Z=n.cloneRange();return Z.collapse(o===ms.Backwards),I.from(Z)}}const D=zf(o,e.getBody(),n);if(k(D))return Mp(e,D.getNode(!g));let L=y(D);const P=Gc(n);if(L)L=Il(g,L);else return P?I.some(n):I.none();if(k(L))return Lg(o,e,L.getNode(!g),g,!1);const j=y(L);return j&&k(j)&&H0(L,j)?Lg(o,e,j.getNode(!g),g,!1):P?F6(e,L.toRange(),!1):I.none()},n4=(e,o,n,s,i,d)=>{const g=zf(o,e.getBody(),n),f=Ei(g.getClientRects()),y=o===Qa.Down,k=e.getBody();if(!f)return I.none();if(wO(e)){const Z=y?Ce.fromRangeEnd(n):Ce.fromRangeStart(n);return(y?qz:L6)(k,Z).orThunk(()=>I.from(Z)).map(U=>U.toRange())}const D=(y?Jz:Qz)(k,z6(1),g),L=Et(D,o4(1)),P=f.left,j=e4(L,P);if(j&&d(j.node)){const Z=Math.abs(P-j.left),U=Math.abs(P-j.right);return Lg(o,e,j.node,Z<U,!1)}let $;if(s(g)?$=g.getNode():i(g)?$=g.getNode(!0):$=wf(n),$){const Z=eF(o,k,z6(1),$);let U=e4(Et(Z,o4(1)),P);if(U||(U=Ei(Et(Z,o4(0))),U))return F6(e,U.position.toRange(),!1)}return L.length===0?r4(e,y).filter(y?i:s).map(Z=>yO(e,Z.toRange(),!1)):I.none()},r4=(e,o)=>{const n=e.selection.getRng(),s=o?Ce.fromRangeEnd(n):Ce.fromRangeStart(n),i=dy(s.container(),e.getBody());if(o){const d=Y2(i,s);return Ia(d.positions)}else{const d=q2(i,s);return xn(d.positions)}},BO=(e,o,n)=>r4(e,o).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Mv=(e,o)=>{const n=e.dom.createRng();n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),e.selection.setRng(n)},V6=(e,o)=>{e?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},Z6=(e,o,n)=>EO(o,n).map(s=>(Mv(e,s),n)),tF=(e,o,n)=>{const s=Ce.fromRangeStart(e);if(e.collapsed)return s;{const i=Ce.fromRangeEnd(e);return n?Ys(o,i).getOr(i):qs(o,s).getOr(s)}},oF=(e,o,n)=>{const s=e.getBody(),i=tF(e.selection.getRng(),s,n),d=Le(o1,e);return O6(n,d,s,i).bind(g=>Z6(e,o,g))},nF=(e,o,n)=>{const s=Bt(rn(X.fromDom(o.getRoot()),'*[data-mce-selected="inline-boundary"]'),g=>g.dom),i=Et(s,e),d=Et(n,e);me(ti(i,d),Le(V6,!1)),me(ti(d,i),Le(V6,!0))},rF=(e,o)=>{const n=o.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(s)&&!__(s)&&(Mv(e,KC(n,s)),o.set(null))}},sF=(e,o,n,s)=>{if(o.selection.isCollapsed()){const i=Et(s,e);me(i,d=>{const g=Ce.fromRangeStart(o.selection.getRng());Cd(e,o.getBody(),g).bind(f=>Z6(o,n,f))})}},NO=(e,o,n)=>Mf(e)?oF(e,o,n).isSome():!1,U6=(e,o,n)=>Mf(o)?TO(e,o):!1,aF=e=>{const o=Tr(null),n=Le(o1,e);return e.on("NodeChange",s=>{Mf(e)&&(nF(n,e.dom,s.parents),rF(e,o),sF(n,e,o,s.parents))}),o},Zl=Le(U6,!0),iF=Le(U6,!1),Av=(e,o,n)=>{if(Mf(e)){const s=r4(e,o).getOrThunk(()=>{const i=e.selection.getRng();return o?Ce.fromRangeEnd(i):Ce.fromRangeStart(i)});return Cd(Le(o1,e),e.getBody(),s).exists(i=>{const d=j2(i);return EO(n,d).exists(g=>(Mv(e,g),!0))})}else return!1},W6=(e,o)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(o.container(),o.offset()),n},LO=e=>Qn(Qs(e),Rl(e),(o,n)=>{const s=Il(!0,o),i=Il(!1,n);return qs(e,s).forall(d=>d.isEqual(i))}).getOr(!0),$6=(e,o)=>n=>EO(o,n).map(s=>()=>Mv(e,s)),j6=(e,o,n,s)=>{const i=e.getBody(),d=Le(o1,e);e.undoManager.ignore(()=>{e.selection.setRng(W6(n,s)),E_(e),Cd(d,i,Ce.fromRangeStart(e.selection.getRng())).map(qS).bind($6(e,o)).each(lr)}),e.nodeChanged()},lF=(e,o)=>ad(o,e)||e,cF=(e,o,n,s)=>{const i=lF(e.getBody(),s.container()),d=Le(o1,e),g=Cd(d,i,s);return g.bind(f=>n?f.fold(Pe(I.some(qS(f))),I.none,Pe(I.some(j2(f))),I.none):f.fold(I.none,Pe(I.some(j2(f))),I.none,Pe(I.some(qS(f))))).map($6(e,o)).getOrThunk(()=>{const f=tu(n,i,s),y=f.bind(k=>Cd(d,i,k));return Qn(g,y,()=>Dg(d,i,s).bind(k=>LO(k)?I.some(()=>{hp(e,n,X.fromDom(k))}):I.none())).getOrThunk(()=>y.bind(()=>f.map(k=>()=>{n?j6(e,o,s,k):j6(e,o,k,s)})))})},HO=(e,o,n)=>{if(e.selection.isCollapsed()&&Mf(e)){const s=Ce.fromRangeStart(e.selection.getRng());return cF(e,o,n,s)}return I.none()},G6=e=>Bu(e)>1,K6=(e,o)=>{const n=X.fromDom(e.getBody()),s=X.fromDom(e.selection.getStart()),i=iu(s,n);return Ts(i,o).fold(Pe(i),d=>i.slice(0,d))},dF=e=>Bu(e)===1,Q2=e=>K6(e,o=>e.schema.isBlock(po(o))||G6(o)),Pg=e=>K6(e,o=>e.schema.isBlock(po(o))),Rp=(e,o)=>{const n=Le(l1,e);return Ds(o,s=>n(s)?[s.dom]:[])},J2=e=>{const o=Pg(e);return Rp(e,o)},IO=(e,o,n,s)=>{const i=Rp(o,s);if(i.length===0)hp(o,e,n);else{const d=rA(n.dom,i);o.selection.setRng(d.toRange())}},PO=(e,o)=>{const n=Et(Q2(e),dF);return Ia(n).bind(s=>{const i=Ce.fromRangeStart(e.selection.getRng());return yM(o,i,s.dom)&&!Ay(s)?I.some(()=>IO(o,e,s,n)):I.none()})},X6=(e,o)=>{const n=o.parentElement;return Co(o)&&!se(n)&&e.dom.isEmpty(n)},uF=e=>Ay(X.fromDom(e)),zO=(e,o)=>{const n=e.selection.getStart(),s=X6(e,n)||uF(n)?rA(n,o):WH(e.selection.getRng(),o);e.selection.setRng(s.toRange())},q6=(e,o)=>{const n=ti(o,J2(e));n.length>0&&zO(e,n)},Y6=e=>Ae(e.startContainer),mF=e=>e.startOffset===0&&Y6(e),gF=(e,o)=>{const n=o.startContainer.parentElement;return!se(n)&&l1(e,X.fromDom(n))},hF=e=>{const o=e.startContainer.parentNode,n=e.endContainer.parentNode;return!se(o)&&!se(n)&&o.isEqualNode(n)},pF=e=>{const o=e.endContainer;return e.endOffset===(Ae(o)?o.length:o.childNodes.length)},fF=e=>hF(e)&&pF(e),Q6=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),J6=e=>fF(e)||Q6(e),vF=e=>{const o=e.selection.getRng();return mF(o)&&gF(e,o)&&J6(o)},bF=e=>{if(vF(e)){const o=J2(e);return I.some(()=>{E_(e),q6(e,o)})}else return I.none()},FO=(e,o)=>e.selection.isCollapsed()?PO(e,o):bF(e),yF=(e,o)=>bH(e,n=>Ka(n.dom),n=>o.isBlock(po(n))),al=e=>yF(X.fromDom(e.selection.getStart()),e.schema),eB=e=>{const o=e.selection.getRng();return o.collapsed&&(Y6(o)||e.dom.isEmpty(o.startContainer))&&!al(e)},zg=e=>(eB(e)&&zO(e,[]),!0),VO=(e,o,n)=>Oe(n)?I.some(()=>{e._selectionOverrides.hideFakeCaret(),hp(e,o,X.fromDom(n))}):I.none(),tB=(e,o)=>{const n=o?Gy:Ky,s=o?ms.Forwards:ms.Backwards,i=zf(s,e.getBody(),e.selection.getRng());return n(i)?VO(e,o,i.getNode(!o)):I.from(Il(o,i)).filter(d=>n(d)&&H0(i,d)).bind(d=>VO(e,o,d.getNode(!o)))},oB=(e,o)=>{const n=e.selection.getNode();return dn(n)?VO(e,o,n):I.none()},ex=(e,o)=>e.selection.isCollapsed()?tB(e,o):oB(e,o),xF=e=>rs(e,o=>Ua(o.dom)||xe(o.dom)).exists(o=>Ua(o.dom)),ZO=e=>wr(e??"").getOr(0),UO=(e,o)=>{const n=e||rh(o)?"margin":"padding",s=Hi(o,"direction")==="rtl"?"-right":"-left";return n+s},CF=(e,o,n,s,i,d)=>{const g=UO(n,X.fromDom(d)),f=ZO(e.getStyle(d,g));if(o==="outdent"){const y=Math.max(0,f-s);e.setStyle(d,g,y?y+i:"")}else{const y=f+s+i;e.setStyle(d,g,y)}},wF=(e,o)=>hr(o,n=>{const s=UO(BC(e),n),i=To(n,s).map(ZO).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&i>0}),nB=e=>{const o=rB(e);return!e.mode.isReadOnly()&&(o.length>1||wF(e,o))},s4=e=>Wr(e)||ar(e),SF=e=>vs(e).exists(s4),rB=e=>Et(oh(e.selection.getSelectedBlocks()),o=>!s4(o)&&!SF(o)&&xF(o)),sB=(e,o)=>{var n,s;const{dom:i}=e,d=dg(e),g=(s=(n=/[a-z%]+$/i.exec(d))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",f=ZO(d),y=BC(e);me(rB(e),k=>{CF(i,o,y,f,g,k.dom)})},aB=e=>sB(e,"indent"),iB=e=>sB(e,"outdent"),lB=e=>{if(e.selection.isCollapsed()&&nB(e)){const o=e.dom,n=e.selection.getRng(),s=Ce.fromRangeStart(n),i=o.getParent(n.startContainer,o.isBlock);if(i!==null&&p_(X.fromDom(i),s,e.schema))return I.some(()=>iB(e))}return I.none()},cB=(e,o,n)=>gl([lB,GS,xO,(s,i)=>HO(s,o,i),fO,Jw,_O,ex,bO,FO],s=>s(e,n)).filter(s=>e.selection.isEditable()),WO=(e,o)=>{cB(e,o,!1).fold(()=>{e.selection.isEditable()&&(E_(e),Uw(e))},lr)},a4=(e,o)=>{cB(e,o,!0).fold(()=>{e.selection.isEditable()&&fH(e)},lr)},dB=(e,o)=>{e.addCommand("delete",()=>{WO(e,o)}),e.addCommand("forwardDelete",()=>{a4(e,o)})},$O=5,kF=400,uB=e=>e.touches===void 0||e.touches.length!==1?I.none():I.some(e.touches[0]),jO=(e,o)=>{const n=Math.abs(e.clientX-o.x),s=Math.abs(e.clientY-o.y);return n>$O||s>$O},_F=e=>{const o=Ku(),n=Tr(!1),s=wb(i=>{e.dispatch("longpress",{...i,type:"longpress"}),n.set(!0)},kF);e.on("touchstart",i=>{uB(i).each(d=>{s.cancel();const g={x:d.clientX,y:d.clientY,target:i.target};s.throttle(i),n.set(!1),o.set(g)})},!0),e.on("touchmove",i=>{s.cancel(),uB(i).each(d=>{o.on(g=>{jO(d,g)&&(o.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{s.cancel(),i.type!=="touchcancel"&&o.get().filter(d=>d.target.isEqualNode(i.target)).each(()=>{n.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},GO=(e,o)=>At(e,o.nodeName),EF=(e,o)=>Ae(o)?!0:pt(o)?!GO(e.getBlockElements(),o)&&!Ki(o)&&!ng(e,o)&&!Uu(o):!1,OF=(e,o,n)=>nn(Lw(X.fromDom(n),X.fromDom(o)),s=>GO(e,s.dom)),wd=(e,o)=>{if(Ae(o)){if(o.data.length===0)return!0;if(/^\s+$/.test(o.data))return!o.nextSibling||GO(e,o.nextSibling)||Uu(o.nextSibling)}return!1},KO=e=>e.dom.create(Hs(e),cg(e)),mB=e=>{const o=e.dom,n=e.selection,s=e.schema,i=s.getBlockElements(),d=n.getStart(),g=e.getBody();let f,y,k=!1;const D=Hs(e);if(!d||!pt(d))return;const L=g.nodeName.toLowerCase();if(!s.isValidChild(L,D.toLowerCase())||OF(i,g,d))return;const P=n.getRng(),{startContainer:j,startOffset:$,endContainer:Z,endOffset:U}=P,re=Jf(e);let ie=g.firstChild;for(;ie;)if(pt(ie)&&Eo(s,ie),EF(s,ie)){if(wd(i,ie)){y=ie,ie=ie.nextSibling,o.remove(y);continue}f||(f=KO(e),g.insertBefore(f,ie),k=!0),y=ie,ie=ie.nextSibling,f.appendChild(y)}else f=null,ie=ie.nextSibling;k&&re&&(P.setStart(j,$),P.setEnd(Z,U),n.setRng(P),e.nodeChanged())},gB=(e,o,n)=>{const s=X.fromDom(KO(e)),i=tf();ao(s,i),n(o,s);const d=document.createRange();return d.setStartBefore(i.dom),d.setEndBefore(i.dom),d},i4=e=>{e.on("NodeChange",Le(mB,e))},hB=e=>o=>(" "+o.attr("class")+" ").indexOf(e)!==-1,XO=(e,o,n)=>function(s){const i=arguments,d=i[i.length-2],g=d>0?o.charAt(d-1):"";if(g==='"')return s;if(g===">"){const f=o.lastIndexOf("<",d);if(f!==-1&&o.substring(f,d).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},pB=(e,o,n)=>{let s=o.length,i=n.content;if(n.format!=="raw"){for(;s--;)i=i.replace(o[s],XO(e,i,Qb(e)));n.content=i}},fB=(e,o)=>hr(e,n=>{const s=o.match(n);return s!==null&&s[0].length===o.length}),vB=e=>{const o="contenteditable",n=" "+ve.trim(Jb(e))+" ",s=" "+ve.trim(Qb(e))+" ",i=hB(n),d=hB(s),g=Af(e);g.length>0&&e.on("BeforeSetContent",f=>{pB(e,g,f)}),e.parser.addAttributeFilter("class",f=>{let y=f.length;for(;y--;){const k=f[y];i(k)?k.attr(o,"true"):d(k)&&k.attr(o,"false")}}),e.serializer.addAttributeFilter(o,f=>{let y=f.length;for(;y--;){const k=f[y];if(!i(k)&&!d(k))continue;const D=k.attr("data-mce-content");g.length>0&&D?fB(g,D)?(k.name="#text",k.type=3,k.raw=!0,k.value=D):k.remove():k.attr(o,null)}})},TF=e=>Id(X.fromDom(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull(),bB=(e,o)=>{o.hasAttribute("data-mce-caret")&&(Or(o),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(o))},DF=(e,o)=>{const n=TF(e);if(n){if(o.type==="compositionstart"){o.preventDefault(),o.stopPropagation(),bB(e,n);return}ch(n)&&(bB(e,n),e.undoManager.add())}},MF=e=>{e.on("keyup compositionstart",Le(DF,e))},tx=xe,AF=(e,o,n)=>x1(o,e,n,mp,gp,tx),RF=(e,o,n)=>n4(o,e,n,s=>mp(s)||J5(s),s=>gp(s)||eM(s),tx),BF=e=>{const o=e.dom.create(Hs(e));return o.innerHTML='<br data-mce-bogus="1">',o},l4=(e,o,n)=>{const s=Ba(e.getBody()),i=Le(py,o===1?s.next:s.prev);if(n.collapsed){const d=e.dom.getParent(n.startContainer,"PRE");if(!d)return;if(!i(Ce.fromRangeStart(n))){const g=X.fromDom(BF(e));o===1?sc(X.fromDom(d),g):Ur(X.fromDom(d),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},NF=(e,o)=>{const n=o?ms.Forwards:ms.Backwards,s=e.selection.getRng();return AF(n,e,s).orThunk(()=>(l4(e,n,s),I.none()))},LF=(e,o)=>{const n=o?1:-1,s=e.selection.getRng();return RF(n,e,s).orThunk(()=>(l4(e,n,s),I.none()))},yB=(e,o)=>{const n=o?e.getEnd(!0):e.getStart(!0);return Vw(n)?!o:o},xB=(e,o)=>NF(e,yB(e.selection,o)).exists(n=>(Ig(e,n),!0)),CB=(e,o)=>LF(e,o).exists(n=>(Ig(e,n),!0)),wB=(e,o)=>BO(e,o,o?gp:mp),c4=(e,o)=>CO(e,!o).map(n=>{const s=n.toRange(),i=e.selection.getRng();return o?s.setStart(i.startContainer,i.startOffset):s.setEnd(i.endContainer,i.endOffset),s}).exists(n=>(Ig(e,n),!0)),HF=e=>It(["figcaption"],po(e)),IF=(e,o,n)=>{const s=Le(yo,o);return rs(X.fromDom(e.container()),i=>n.isBlock(po(i)),s).filter(HF)},qO=(e,o,n)=>o?N6(e.dom,n):B6(e.dom,n),PF=(e,o)=>{const n=X.fromDom(e.getBody()),s=Ce.fromRangeStart(e.selection.getRng());return IF(s,n,e.schema).exists(()=>{if(qO(n,o,s)){const i=gB(e,n,o?ao:Cl);return e.selection.setRng(i),!0}else return!1})},YO=(e,o)=>e.selection.isCollapsed()?PF(e,o):!1,zF=(e,o,n)=>{const s=e.selection.getRng(),i=Ce.fromRangeStart(s);return e.getBody().firstChild===o&&B6(n,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},FF=(e,o)=>{const n=e.selection.getRng(),s=Ce.fromRangeStart(n);return e.getBody().lastChild===o&&N6(o,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},VF=(e,o)=>o?I.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>FF(e,n)).getOr(!1):I.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>I.from(e.dom.getParent(n,"details")).map(s=>zF(e,s,n))).getOr(!1),SB=(e,o)=>VF(e,o),kB={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ZF=e=>Bt(e,o=>({...kB,...o})),qr=e=>Bt(e,o=>({...kB,...o})),_B=(e,o)=>o.keyCode===e.keyCode&&o.shiftKey===e.shiftKey&&o.altKey===e.altKey&&o.ctrlKey===e.ctrlKey&&o.metaKey===e.metaKey,UF=(e,o)=>Ds(ZF(e),n=>_B(n,o)?[n]:[]),WF=(e,o)=>Ds(qr(e),n=>_B(n,o)?[n]:[]),Ft=(e,...o)=>()=>e.apply(null,o),C1=(e,o)=>On(UF(e,o),n=>n.action()),QO=(e,o)=>gl(WF(e,o),n=>n.action()),Fg=(e,o)=>{const n=o?ms.Forwards:ms.Backwards,s=e.selection.getRng();return x1(e,n,s,Gy,Ky,dn).exists(i=>(Ig(e,i),!0))},d4=(e,o)=>{const n=o?1:-1,s=e.selection.getRng();return n4(e,n,s,Gy,Ky,dn).exists(i=>(Ig(e,i),!0))},JO=(e,o)=>BO(e,o,o?Ky:Gy),u4=nd.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),w1={...u4,none:e=>u4.none(e)},eT=(e,o)=>tT(e,o,at),tT=(e,o,n)=>Ds(Vr(e),s=>Za(s,o)?n(s)?[s]:[]:tT(s,o,n)),m4=(e,o,n=Ie)=>{if(n(o))return I.none();if(It(e,po(o)))return I.some(o);const s=i=>Za(i,"table")||n(i);return Um(o,e.join(","),s)},g4=(e,o)=>m4(["td","th"],e,o),ox=e=>eT(e,"th,td"),Rv=(e,o)=>Li(e,"table",o),Ul=(e,o,n,s,i=at)=>{const d=s===1;if(!d&&n<=0)return w1.first(e[0]);if(d&&n>=e.length-1)return w1.last(e[e.length-1]);{const g=n+s,f=e[g];return i(f)?w1.middle(o,f):Ul(e,o,g,s,i)}},Bv=(e,o)=>Rv(e,o).bind(n=>{const s=ox(n);return Ts(s,i=>yo(e,i)).map(i=>({index:i,all:s}))}),EB=(e,o,n)=>Bv(e,n).fold(()=>w1.none(e),s=>Ul(s.all,e,s.index,1,o)),OB=(e,o,n)=>Bv(e,n).fold(()=>w1.none(),s=>Ul(s.all,e,s.index,-1,o)),$F=(e,o)=>({left:e.left-o,top:e.top-o,right:e.right+o*2,bottom:e.bottom+o*2,width:e.width+o,height:e.height+o}),TB=(e,o)=>Ds(o,n=>{const s=$F(hn(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),jF=(e,o,n)=>En(e,(s,i)=>s.fold(()=>I.some(i),d=>{const g=Math.sqrt(Math.abs(d.x-o)+Math.abs(d.y-n)),f=Math.sqrt(Math.abs(i.x-o)+Math.abs(i.y-n));return I.some(f<g?i:d)}),I.none()),DB=(e,o,n,s,i)=>{const d=rn(X.fromDom(n),"td,th,caption").map(f=>f.dom),g=Et(TB(e,d),f=>o(f,i));return jF(g,s,i).map(f=>f.cell)},nx=e=>e.bottom,GF=e=>e.top,KF=(e,o)=>e.y<o,XF=(e,o)=>e.y>o,qF=Le(DB,nx,KF),YF=Le(DB,GF,XF),QF=(e,o)=>xn(o.getClientRects()).bind(n=>qF(e,n.left,n.top)).bind(n=>X2(Xz(n),o)),JF=(e,o)=>Ia(o.getClientRects()).bind(n=>YF(e,n.left,n.top)).bind(n=>X2(Kz(n),o)),e9=(e,o,n)=>n.breakAt.exists(s=>e(o,s).breakAt.isSome()),t9=e=>e.breakType===Vl.Wrap&&e.positions.length===0,o9=e=>e.breakType===Vl.Br&&e.positions.length===1,MB=(e,o,n)=>{const s=e(o,n);return t9(s)||!Co(n.getNode())&&o9(s)?!e9(e,o,s):s.breakAt.isNone()},n9=Le(MB,q2),r9=Le(MB,Y2),s9=(e,o,n)=>{const s=Ce.fromRangeStart(o);return Gh(!e,n).exists(i=>i.isEqual(s))},AB=(e,o,n,s)=>{const i=e.selection.getRng(),d=o?1:-1;return If()&&s9(o,i,n)?(Lg(d,e,n,!o,!1).each(g=>{Ig(e,g)}),!0):!1},RB=(e,o,n)=>QF(o,n).orThunk(()=>xn(n.getClientRects()).bind(s=>MO(A6(e,Ce.before(o)),s.left))).getOr(Ce.before(o)),BB=(e,o,n)=>JF(o,n).orThunk(()=>xn(n.getClientRects()).bind(s=>MO(R6(e,Ce.after(o)),s.left))).getOr(Ce.after(o)),a9=(e,o)=>{const n=o.getNode(e);return _a(n)?I.some(n):I.none()},i9=(e,o,n)=>{o.undoManager.transact(()=>{const s=e?sc:Ur,i=gB(o,X.fromDom(n),s);Ig(o,i)})},NB=(e,o,n)=>{const s=a9(!!o,n),i=o===!1;s.fold(()=>Ig(e,n.toRange()),d=>Gh(i,e.getBody()).filter(g=>g.isEqual(n)).fold(()=>Ig(e,n.toRange()),g=>i9(o,e,d)))},l9=(e,o,n,s)=>{const i=e.selection.getRng(),d=Ce.fromRangeStart(i),g=e.getBody();if(!o&&n9(s,d)){const f=RB(g,n,d);return NB(e,o,f),!0}else if(o&&r9(s,d)){const f=BB(g,n,d);return NB(e,o,f),!0}else return!1},oT=(e,o,n)=>I.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>I.from(e.dom.getParent(s,"table")).map(i=>n(e,o,i,s))).getOr(!1),LB=(e,o)=>oT(e,o,AB),h4=(e,o)=>oT(e,o,l9),c9=e=>{const o=w.exact(e,0,e,0);return ke(o)},nT=(e,o,n)=>n.fold(I.none,I.none,(s,i)=>HL(i).map(d=>c9(d)),s=>(e.execCommand("mceTableInsertRowAfter"),rT(e,o,s))),rT=(e,o,n)=>nT(e,o,EB(n,Er)),d9=(e,o,n)=>nT(e,o,OB(n,Er)),HB=(e,o)=>{const n=["table","li","dl"],s=X.fromDom(e.getBody()),i=f=>{const y=po(f);return yo(f,s)||It(n,y)},d=e.selection.getRng(),g=X.fromDom(o?d.endContainer:d.startContainer);return g4(g,i).map(f=>(Rv(f,i).each(y=>{e.model.table.clearSelectedCells(y.dom)}),e.selection.collapse(!o),(o?rT:d9)(e,i,f).each(y=>{e.selection.setRng(y)}),!0)).getOr(!1)},u9=(e,o,n)=>{const s=ae.os.isMacOS()||ae.os.isiOS();C1([{keyCode:ht.RIGHT,action:Ft(xB,e,!0)},{keyCode:ht.LEFT,action:Ft(xB,e,!1)},{keyCode:ht.UP,action:Ft(CB,e,!1)},{keyCode:ht.DOWN,action:Ft(CB,e,!0)},...s?[{keyCode:ht.UP,action:Ft(c4,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ht.DOWN,action:Ft(c4,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ht.RIGHT,action:Ft(LB,e,!0)},{keyCode:ht.LEFT,action:Ft(LB,e,!1)},{keyCode:ht.UP,action:Ft(h4,e,!1)},{keyCode:ht.DOWN,action:Ft(h4,e,!0)},{keyCode:ht.UP,action:Ft(h4,e,!1)},{keyCode:ht.UP,action:Ft(SB,e,!1)},{keyCode:ht.DOWN,action:Ft(SB,e,!0)},{keyCode:ht.RIGHT,action:Ft(Fg,e,!0)},{keyCode:ht.LEFT,action:Ft(Fg,e,!1)},{keyCode:ht.UP,action:Ft(d4,e,!1)},{keyCode:ht.DOWN,action:Ft(d4,e,!0)},{keyCode:ht.RIGHT,action:Ft(NO,e,o,!0)},{keyCode:ht.LEFT,action:Ft(NO,e,o,!1)},{keyCode:ht.RIGHT,ctrlKey:!s,altKey:s,action:Ft(Zl,e,o)},{keyCode:ht.LEFT,ctrlKey:!s,altKey:s,action:Ft(iF,e,o)},{keyCode:ht.UP,action:Ft(YO,e,!1)},{keyCode:ht.DOWN,action:Ft(YO,e,!0)}],n).each(i=>{n.preventDefault()})},IB=(e,o)=>{e.on("keydown",n=>{n.isDefaultPrevented()||u9(e,o,n)})},pu=(e,o)=>({container:e,offset:o}),p4=Kt.DOM,rx=e=>o=>e===o?-1:0,m9=e=>o=>e.isBlock(o)||It(["BR","IMG","HR","INPUT"],o.nodeName)||e.getContentEditable(o)==="false",sT=(e,o,n)=>{if(Ae(e)&&o>=0)return I.some(pu(e,o));{const s=pi(p4);return I.from(s.backwards(e,o,rx(e),n)).map(i=>pu(i.container,i.container.data.length))}},PB=(e,o,n)=>{if(Ae(e)&&o>=e.length)return I.some(pu(e,o));{const s=pi(p4);return I.from(s.forwards(e,o,rx(e),n)).map(i=>pu(i.container,0))}},aT=(e,o,n)=>{if(!Ae(e))return I.none();const s=e.data;if(o>=0&&o<=s.length)return I.some(pu(e,o));{const i=pi(p4);return I.from(i.backwards(e,o,rx(e),n)).bind(d=>{const g=d.container.data;return aT(d.container,o+g.length,n)})}},zB=(e,o,n)=>{if(!Ae(e))return I.none();const s=e.data;if(o<=s.length)return I.some(pu(e,o));{const i=pi(p4);return I.from(i.forwards(e,o,rx(e),n)).bind(d=>zB(d.container,o-s.length,n))}},iT=(e,o,n,s,i)=>{const d=pi(e,m9(e));return I.from(d.backwards(o,n,s,i))},FB=e=>e.collapsed&&Ae(e.startContainer),lT=e=>jr(e.toString().replace(/\u00A0/g," ")),VB=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,cT=(e,o)=>e.substring(o.length),g9=(e,o,n)=>{let s;const i=n.charAt(0);for(s=o-1;s>=0;s--){const d=e.charAt(s);if(VB(d))return I.none();if(i===d&&Yn(e,n,s,o))break}return I.some(s)},h9=(e,o,n,s=0)=>{if(!FB(o))return I.none();const i={text:"",offset:0},d=(f,y,k)=>(i.text=k+i.text,i.offset+=y,g9(i.text,i.offset,n).getOr(y)),g=e.getParent(o.startContainer,e.isBlock)||e.getRoot();return iT(e,o.startContainer,o.startOffset,d,g).bind(f=>{const y=o.cloneRange();if(y.setStart(f.container,f.offset),y.setEnd(o.endContainer,o.endOffset),y.collapsed)return I.none();const k=lT(y);return k.lastIndexOf(n)!==0||cT(k,n).length<s?I.none():I.some({text:cT(k,n),range:y,trigger:n})})},ZB=(e,o,n,s=0)=>_t(X.fromDom(o.startContainer)).fold(()=>h9(e,o,n,s),i=>{const d=e.createRng();d.selectNode(i.dom);const g=lT(d);return I.some({range:d,text:cT(g,n),trigger:n})}),p9=e=>e.nodeType===Fr,f9=e=>e.nodeType===tc,UB=e=>{if(p9(e))return pu(e,e.data.length);{const o=e.childNodes;return o.length>0?UB(o[o.length-1]):pu(e,o.length)}},WB=(e,o)=>{const n=e.childNodes;return n.length>0&&o<n.length?WB(n[o],0):n.length>0&&f9(e)&&n.length===o?UB(n[n.length-1]):pu(e,o)},f4=(e,o)=>{var n;const s=(n=e.getParent(o.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return iT(e,o.container,o.offset,(i,d)=>d===0?-1:d,s).filter(i=>{const d=i.container.data.charAt(i.offset-1);return!VB(d)}).isSome()},$B=e=>o=>{const n=WB(o.startContainer,o.startOffset);return!f4(e,n)},jB=(e,o,n)=>gl(n.triggers,s=>ZB(e,o,s)),v9=(e,o)=>{const n=o(),s=e.selection.getRng();return jB(e.dom,s,n).bind(i=>dT(e,o,i))},dT=(e,o,n,s={})=>{var i;const d=o(),g=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",f=Et(d.lookupByTrigger(n.trigger),k=>n.text.length>=k.minChars&&k.matches.getOrThunk(()=>$B(e.dom))(n.range,g,n.text));if(f.length===0)return I.none();const y=Promise.all(Bt(f,k=>k.fetch(n.text,k.maxResults,s).then(D=>({matchText:n.text,items:D,columns:k.columns,onAction:k.onAction,highlightOn:k.highlightOn}))));return I.some({lookupData:y,context:n})};var Sd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Sd||(Sd={}));const uT=(e,o,n)=>e.stype===Sd.Error?o(e.serror):n(e.svalue),b9=e=>{const o=[],n=[];return me(e,s=>{uT(s,i=>n.push(i),i=>o.push(i))}),{values:o,errors:n}},y9=(e,o)=>e.stype===Sd.Error?{stype:Sd.Error,serror:o(e.serror)}:e,GB=(e,o)=>e.stype===Sd.Value?{stype:Sd.Value,svalue:o(e.svalue)}:e,x9=(e,o)=>e.stype===Sd.Value?o(e.svalue):e,mT=(e,o)=>e.stype===Sd.Error?o(e.serror):e,KB=e=>({stype:Sd.Value,svalue:e}),XB=e=>({stype:Sd.Error,serror:e}),ea={fromResult:e=>e.fold(XB,KB),toResult:e=>uT(e,Ra.error,Ra.value),svalue:KB,partition:b9,serror:XB,bind:x9,bindError:mT,map:GB,mapError:y9,fold:uT},v4=e=>qe(e)&&Cr(e).length>100?" removed due to size":JSON.stringify(e,null,2),C9=e=>{const o=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Pe("... (only showing first ten failures)")}]):e;return Bt(o,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},b4=(e,o)=>ea.serror([{path:e,getErrorInfo:o}]),w9=(e,o,n)=>b4(e,()=>'Could not find valid *required* value for "'+o+'" in '+v4(n)),S9=(e,o)=>b4(e,()=>'Choice schema did not contain choice key: "'+o+'"'),k9=(e,o,n)=>b4(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+v4(o)),gs=(e,o)=>b4(e,Pe(o)),bm=(e,o,n,s)=>Go(n,s).fold(()=>k9(e,n,s),i=>i.extract(e.concat(["branch: "+s]),o)),_9=(e,o)=>({extract:(n,s)=>Go(s,e).fold(()=>S9(n,e),i=>bm(n,s,o,i)),toString:()=>"chooseOn("+e+"). Possible values: "+Cr(o)}),E9=(e,o)=>o,O9=(e,o)=>ul(e)&&ul(o)?y4(e,o):o,qB=e=>(...o)=>{if(o.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<o.length;s++){const i=o[s];for(const d in i)At(i,d)&&(n[d]=e(n[d],i[d]))}return n},y4=qB(O9),YB=qB(E9),S1=()=>({tag:"required",process:{}}),T9=e=>({tag:"defaultedThunk",process:e}),QB=e=>T9(Pe(e)),fu=()=>({tag:"option",process:{}}),D9=(e,o)=>e.length>0?ea.svalue(y4(o,YB.apply(void 0,e))):ea.svalue(o),JB=e=>E(ea.serror,jl)(e),e8={consolidateObj:(e,o)=>{const n=ea.partition(e);return n.errors.length>0?JB(n.errors):D9(n.values,o)},consolidateArr:e=>{const o=ea.partition(e);return o.errors.length>0?JB(o.errors):ea.svalue(o.values)}},M9=(e,o,n,s)=>({tag:"field",key:e,newKey:o,presence:n,prop:s}),gT=(e,o)=>({tag:"custom",newKey:e,instantiator:o}),hT=(e,o,n)=>{switch(e.tag){case"field":return o(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},pT=e=>{const o=(s,i)=>ea.bindError(e(i),d=>gs(s,d)),n=Pe("val");return{extract:o,toString:n}},A9=pT(ea.svalue),R9=(e,o,n,s)=>Go(o,n).fold(()=>w9(e,n,o),s),fT=(e,o,n,s)=>{const i=Go(e,o).getOrThunk(()=>n(e));return s(i)},t8=(e,o,n)=>n(Go(e,o)),vT=(e,o,n,s)=>{const i=Go(e,o).map(d=>d===!0?n(e):d);return s(i)},bT=(e,o,n,s,i)=>{const d=f=>i.extract(o.concat([s]),f),g=f=>f.fold(()=>ea.svalue(I.none()),y=>{const k=i.extract(o.concat([s]),y);return ea.map(k,I.some)});switch(e.tag){case"required":return R9(o,n,s,d);case"defaultedThunk":return fT(n,s,e.process,d);case"option":return t8(n,s,g);case"defaultedOptionThunk":return vT(n,s,e.process,g);case"mergeWithThunk":return fT(n,s,Pe({}),f=>{const y=y4(e.process(n),f);return d(y)})}},yT=(e,o,n)=>{const s={},i=[];for(const d of n)hT(d,(g,f,y,k)=>{const D=bT(y,e,o,g,k);ea.fold(D,L=>{i.push(...L)},L=>{s[f]=L})},(g,f)=>{s[g]=f(o)});return i.length>0?ea.serror(i):ea.svalue(s)},xT=e=>({extract:(o,n)=>yT(o,n,e),toString:()=>`obj{
`+Bt(e,o=>hT(o,(n,s,i,d)=>n+" -> "+d.toString(),(n,s)=>"state("+n+")")).join(`
`)+"}"}),o8=e=>({extract:(o,n)=>{const s=Bt(n,(i,d)=>e.extract(o.concat(["["+d+"]"]),i));return e8.consolidateArr(s)},toString:()=>"array("+e.toString()+")"}),B9=e=>pT(o=>e(o).fold(ea.serror,ea.svalue)),N9=(e,o,n)=>{const s=o.extract([e],n);return ea.mapError(s,i=>({input:n,errors:i}))},CT=(e,o,n)=>ea.toResult(N9(e,o,n)),n8=e=>`Errors: 
`+C9(e.errors).join(`
`)+`

Input object: `+v4(e.input),r8=(e,o)=>_9(e,bo(o,xT)),s8=Pe(A9),x4=(e,o)=>pT(n=>{const s=typeof n;return e(n)?ea.svalue(n):ea.serror(`Expected type: ${o} but got: ${s}`)}),wT=x4(nr,"number"),C4=x4(J,"string"),L9=x4(so,"boolean"),ST=x4(te,"function"),sx=M9,a8=gT,i8=e=>B9(o=>It(e,o)?Ra.value(o):Ra.error(`Unsupported value: "${o}", choose one of "${e.join(", ")}".`)),w4=(e,o)=>sx(e,e,S1(),o),kT=e=>w4(e,C4),_T=e=>w4(e,ST),H9=(e,o)=>sx(e,e,S1(),o8(o)),ET=(e,o)=>sx(e,e,fu(),o),S4=e=>ET(e,C4),k4=e=>ET(e,ST),l8=(e,o)=>sx(e,e,QB(o),s8()),k1=(e,o,n)=>sx(e,e,QB(o),n),c8=(e,o)=>k1(e,o,wT),I9=(e,o)=>k1(e,o,C4),d8=(e,o,n)=>k1(e,o,i8(n)),OT=(e,o)=>k1(e,o,L9),TT=(e,o)=>k1(e,o,ST),P9=(e,o,n)=>k1(e,o,o8(n)),ir=kT("type"),DT=_T("fetch"),kd=_T("onAction"),u8=TT("onSetup",()=>Be),m8=S4("text"),z9=S4("icon"),_4=S4("tooltip"),MT=S4("label"),g8=OT("active",!1),h8=OT("enabled",!0),p8=OT("primary",!1),F9=e=>l8("columns",e),ax=e=>I9("type",e),V9=xT([ir,kT("trigger"),c8("minChars",1),F9(1),c8("maxResults",10),k4("matches"),DT,kd,P9("highlightOn",[],C4)]),Z9=e=>CT("Autocompleter",V9,{trigger:e.ch,...e}),E4=[h8,_4,z9,m8,u8],f8=[g8].concat(E4),U9=[TT("predicate",Ie),d8("scope","node",["node","editor"]),d8("position","selection",["node","selection","line"])],W9=E4.concat([ax("contextformbutton"),p8,kd,a8("original",fo)]),$9=f8.concat([ax("contextformbutton"),p8,kd,a8("original",fo)]),j9=E4.concat([ax("contextformbutton")]),v8=f8.concat([ax("contextformtogglebutton")]),b8=r8("type",{contextformbutton:W9,contextformtogglebutton:$9});xT([ax("contextform"),TT("initValue",Pe("")),MT,H9("commands",b8),ET("launch",r8("type",{contextformbutton:j9,contextformtogglebutton:v8}))].concat(U9));const G9=e=>{const o=e.ui.registry.getAll().popups,n=bo(o,d=>Z9(d).fold(g=>{throw new Error(n8(g))},fo)),s=Lc(Pa(n,d=>d.trigger)),i=Gl(n);return{dataset:n,triggers:s,lookupByTrigger:d=>Et(i,g=>g.trigger===d)}},K9=(e,o)=>{const n=wb(o.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const i=s.which;i===8?n.throttle():i===27&&o.cancelIfNecessary()}),e.on("remove",n.cancel)},AT=e=>{const o=Ku(),n=Tr(!1),s=o.isSet,i=()=>{s()&&(kP(e),Iy(e),n.set(!1),o.clear())},d=k=>{s()||(OR(e,k.range),o.set({trigger:k.trigger,matchLength:k.text.length}))},g=os(()=>G9(e)),f=k=>o.get().map(D=>ZB(e.dom,e.selection.getRng(),D.trigger).bind(L=>dT(e,g,L,k))).getOrThunk(()=>v9(e,g)),y=k=>{f(k).fold(i,D=>{d(D.context),D.lookupData.then(L=>{o.get().map(P=>{const j=D.context;P.trigger===j.trigger&&(j.text.length-P.matchLength>=10?i():(o.set({...P,matchLength:j.text.length}),n.get()?F3(e,{lookupData:L}):(n.set(!0),z3(e,{lookupData:L}))))})})})};e.addCommand("mceAutocompleterReload",(k,D)=>{const L=qe(D)?D.fetchOptions:{};y(L)}),e.addCommand("mceAutocompleterClose",i),K9(e,{cancelIfNecessary:i,load:y})},X9=Fa().browser.isSafari(),y8=e=>zu(X.fromDom(e)),x8=(e,o)=>{var n;return e.startOffset===0&&e.endOffset===((n=o.textContent)===null||n===void 0?void 0:n.length)},ix=(e,o)=>I.from(e.getParent(o.container(),"details")),C8=(e,o)=>ix(e,o).isSome(),w8=(e,o)=>{const n=I.from(e.getParent(o.startContainer,"details")),s=I.from(e.getParent(o.endContainer,"details"));if(n.isSome()||s.isSome()){const i=n.bind(d=>I.from(e.select("summary",d)[0]));return I.some({startSummary:i,startDetails:n,endDetails:s})}else return I.none()},q9=(e,o)=>Qs(o).exists(n=>n.isEqual(e)),Y9=(e,o)=>Rl(o).exists(n=>Co(n.getNode())&&Ys(o,n).exists(s=>s.isEqual(e))||n.isEqual(e)),ba=(e,o)=>o.startSummary.exists(n=>q9(e,n)),Q9=(e,o)=>o.startSummary.exists(n=>Y9(e,n)),J9=(e,o)=>o.startDetails.exists(n=>Ys(n,e).forall(s=>o.startSummary.exists(i=>!i.contains(e.container())&&i.contains(s.container())))),eV=(e,o,n)=>n.startDetails.exists(s=>qs(e,o).forall(i=>!s.contains(i.container()))),S8=(e,o)=>{const n=o.getNode();Rn(n)||e.selection.setCursorLocation(n,o.offset())},k8=(e,o,n)=>{const s=e.dom.getParent(o.container(),"details");if(s&&!s.open){const i=e.dom.select("summary",s)[0];i&&(n?Qs(i):Rl(i)).each(d=>S8(e,d))}else S8(e,o)},tV=(e,o)=>{const n=f=>f.contains(e.startContainer),s=f=>f.contains(e.endContainer),i=o.startSummary.exists(n),d=o.startSummary.exists(s),g=o.startDetails.forall(f=>o.endDetails.forall(y=>f!==y));return(i||d)&&!(i&&d)||g},_8=(e,o,n)=>{const{dom:s,selection:i}=e,d=e.getBody();if(n==="character"){const g=Ce.fromRangeStart(i.getRng()),f=s.getParent(g.container(),s.isBlock),y=ix(s,g),k=f&&s.isEmpty(f),D=se(f==null?void 0:f.previousSibling),L=se(f==null?void 0:f.nextSibling);return k&&(o?L:D)&&tu(!o,d,g).exists(P=>C8(s,P)&&!Zs(y,ix(s,P)))?!0:tu(o,d,g).fold(Ie,P=>{const j=ix(s,P);if(C8(s,P)&&!Zs(y,j)){if(o||k8(e,P,!1),f&&k){if(o&&D||!o&&L)return!0;k8(e,P,o),e.dom.remove(f)}return!0}else return!1})}else return!1},O4=(e,o,n,s)=>{const i=e.selection.getRng(),d=Ce.fromRangeStart(i),g=e.getBody();return s==="selection"?tV(i,o):n?Q9(d,o)||eV(g,d,o):ba(d,o)||J9(d,o)},oV=(e,o,n)=>w8(e.dom,e.selection.getRng()).fold(()=>_8(e,o,n),s=>O4(e,s,o,n)||_8(e,o,n)),nV=(e,o,n)=>{const s=e.selection,i=s.getNode(),d=s.getRng(),g=Ce.fromRangeStart(d);return kl(i)?(n==="selection"&&x8(d,i)||yM(o,g,i)?y8(i):e.undoManager.transact(()=>{const f=s.getSel();let{anchorNode:y,anchorOffset:k,focusNode:D,focusOffset:L}=f??{};const P=()=>{Oe(y)&&Oe(k)&&Oe(D)&&Oe(L)&&(f==null||f.setBaseAndExtent(y,k,D,L))},j=()=>{y=f==null?void 0:f.anchorNode,k=f==null?void 0:f.anchorOffset,D=f==null?void 0:f.focusNode,L=f==null?void 0:f.focusOffset},$=(U,re)=>{me(U.childNodes,ie=>{In(ie)&&re.appendChild(ie)})},Z=e.dom.create("span",{"data-mce-bogus":"1"});$(i,Z),i.appendChild(Z),P(),(n==="word"||n==="line")&&(f==null||f.modify("extend",o?"right":"left",n)),!s.isCollapsed()&&x8(s.getRng(),Z)?y8(i):(e.execCommand(o?"ForwardDelete":"Delete"),j(),$(Z,i),P()),e.dom.remove(Z)}),!0):!1},Vg=(e,o,n)=>oV(e,o,n)||X9&&nV(e,o,n)?I.some(Be):I.none(),T4=e=>(o,n,s={})=>{const i=o.getBody(),d={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Be,inputType:n},g=oC(new InputEvent(e));return o.dispatch(e,{...g,...d,...s})},lx=T4("input"),D4=T4("beforeinput"),E8=Fa(),O8=E8.os,_d=O8.isMacOS()||O8.isiOS(),rV=E8.browser.isFirefox(),T8=(e,o,n)=>{const s=n.keyCode===ht.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),d=i?"character":"selection",g=f=>i?f?"word":"line":"selection";QO([{keyCode:ht.BACKSPACE,action:Ft(lB,e)},{keyCode:ht.BACKSPACE,action:Ft(GS,e,!1)},{keyCode:ht.DELETE,action:Ft(GS,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(xO,e,!1)},{keyCode:ht.DELETE,action:Ft(xO,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(HO,e,o,!1)},{keyCode:ht.DELETE,action:Ft(HO,e,o,!0)},{keyCode:ht.BACKSPACE,action:Ft(Jw,e,!1)},{keyCode:ht.DELETE,action:Ft(Jw,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(Vg,e,!1,d)},{keyCode:ht.DELETE,action:Ft(Vg,e,!0,d)},..._d?[{keyCode:ht.BACKSPACE,altKey:!0,action:Ft(Vg,e,!1,g(!0))},{keyCode:ht.DELETE,altKey:!0,action:Ft(Vg,e,!0,g(!0))},{keyCode:ht.BACKSPACE,metaKey:!0,action:Ft(Vg,e,!1,g(!1))}]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Ft(Vg,e,!1,g(!0))},{keyCode:ht.DELETE,ctrlKey:!0,action:Ft(Vg,e,!0,g(!0))}],{keyCode:ht.BACKSPACE,action:Ft(_O,e,!1)},{keyCode:ht.DELETE,action:Ft(_O,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(ex,e,!1)},{keyCode:ht.DELETE,action:Ft(ex,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(bO,e,!1)},{keyCode:ht.DELETE,action:Ft(bO,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(fO,e,!1)},{keyCode:ht.DELETE,action:Ft(fO,e,!0)},{keyCode:ht.BACKSPACE,action:Ft(FO,e,!1)},{keyCode:ht.DELETE,action:Ft(FO,e,!0)}],n).filter(f=>e.selection.isEditable()).each(f=>{n.preventDefault(),D4(e,s).isDefaultPrevented()||(f(),lx(e,s))})},sV=(e,o,n)=>C1([{keyCode:ht.BACKSPACE,action:Ft(SO,e)},{keyCode:ht.DELETE,action:Ft(SO,e)},..._d?[{keyCode:ht.BACKSPACE,altKey:!0,action:Ft(zg,e)},{keyCode:ht.DELETE,altKey:!0,action:Ft(zg,e)},...n?[{keyCode:rV?224:91,action:Ft(zg,e)}]:[]]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Ft(zg,e)},{keyCode:ht.DELETE,ctrlKey:!0,action:Ft(zg,e)}]],o),aV=(e,o)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===ht.BACKSPACE,s.isDefaultPrevented()||T8(e,o,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||sV(e,s,n),n=!1})},iV=e=>{for(;e;){if(pt(e)||Ae(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Nv=(e,o)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const d=iV(o.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&o.insertBefore(n.doc.createTextNode(jn),o.firstChild)}const i=n.createRng();if(o.normalize(),o.hasChildNodes()){const d=new br(o,o);let g=o,f;for(;f=d.current();){if(Ae(f)){i.setStart(f,0),i.setEnd(f,0);break}if(s[f.nodeName.toLowerCase()]){i.setStartBefore(f),i.setEndBefore(f);break}g=f,f=d.next()}f||(i.setStart(g,0),i.setEnd(g,0))}else Co(o)?o.nextSibling&&n.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));e.selection.setRng(i),ov(e,i)},cx=(e,o)=>{const n=e.getRoot();let s,i=o;for(;i!==n&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){s=i;break}i=i.parentNode}return i!==n?s:n},RT=e=>I.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),lV=e=>RT(e).fold(Pe(""),o=>o.nodeName.toUpperCase()),BT=e=>RT(e).filter(o=>ar(X.fromDom(o))).isSome(),M4=e=>{e.innerHTML='<br data-mce-bogus="1">'},A4=(e,o,n)=>{const s=e.dom;I.from(n.style).map(s.parseStyle).each(y=>{const k={...da(X.fromDom(o)),...y};s.setStyles(o,k)});const i=I.from(n.class).map(y=>y.split(/\s+/)),d=I.from(o.className).map(y=>Et(y.split(/\s+/),k=>k!==""));Qn(i,d,(y,k)=>{const D=Et(k,P=>!It(y,P)),L=[...y,...D];s.setAttrib(o,"class",L.join(" "))});const g=["style","class"],f=Uo(n,(y,k)=>!It(g,k));s.setAttribs(o,f)},dx=(e,o)=>{if(Hs(e).toLowerCase()===o.tagName.toLowerCase()){const n=cg(e);A4(e,o,n)}},D8=(e,o,n,s,i=!0,d,g)=>{const f=e.dom,y=e.schema,k=Hs(e),D=n?n.nodeName.toUpperCase():"";let L=o;const P=y.getTextInlineElements();let j;d||D==="TABLE"||D==="HR"?j=f.create(d||k,g||{}):j=n.cloneNode(!1);let $=j;if(!i)f.setAttrib(j,"style",null),f.setAttrib(j,"class",null);else do if(P[L.nodeName]){if(Ka(L)||Ki(L))continue;const Z=L.cloneNode(!1);f.setAttrib(Z,"id",""),j.hasChildNodes()?(Z.appendChild(j.firstChild),j.appendChild(Z)):($=Z,j.appendChild(Z))}while((L=L.parentNode)&&L!==s);return dx(e,j),M4($),j},cV=(e,o)=>e.dom.getParent(o,Jv),dV=(e,o,n)=>{let s=o;for(;s&&s!==e&&se(s.nextSibling);){const i=s.parentElement;if(!i||!n(i))return Jv(i);s=i}return!1},uV=(e,o,n)=>!o&&n.nodeName.toLowerCase()===Hs(e)&&e.dom.isEmpty(n)&&dV(e.getBody(),n,s=>At(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),M8=(e,o,n)=>{var s,i,d;const g=o(Hs(e)),f=cV(e,n);f&&(e.dom.insertAfter(g,f),Nv(e,g),((d=(i=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||i===void 0?void 0:i.length)!==null&&d!==void 0?d:0)>1&&e.dom.remove(n))},mV=(e,o)=>e.firstChild&&e.firstChild.nodeName===o,A8=e=>{var o;return((o=e.parentNode)===null||o===void 0?void 0:o.firstChild)===e},NT=(e,o)=>{const n=e==null?void 0:e.parentNode;return Oe(n)&&n.nodeName===o},R8=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),LT=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),HT=e=>R8(e)&&R8(e.parentNode),R4=e=>{const o=e.parentNode;return LT(o)?o:e},B4=(e,o,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!pt(s);)s=s[n?"nextSibling":"previousSibling"];return s===o},ux=e=>En(Pa(da(X.fromDom(e)),(o,n)=>`${n}: ${o};`),(o,n)=>o+n,""),gV=(e,o,n,s,i)=>{const d=e.dom,g=e.selection.getRng(),f=n.parentNode;if(n===e.getBody()||!f)return;HT(n)&&(i="LI");const y=LT(s)?ux(s):void 0;let k=LT(s)&&y?o(i,{style:ux(s)}):o(i);if(B4(n,s,!0)&&B4(n,s,!1))if(NT(n,"LI")){const D=R4(n);d.insertAfter(k,D),A8(n)?d.remove(D):d.remove(n)}else d.replace(k,n);else if(B4(n,s,!0))NT(n,"LI")?(d.insertAfter(k,R4(n)),k.appendChild(d.doc.createTextNode(" ")),k.appendChild(n)):f.insertBefore(k,n),d.remove(s);else if(B4(n,s,!1))d.insertAfter(k,R4(n)),d.remove(s);else{n=R4(n);const D=g.cloneRange();D.setStartAfter(s),D.setEndAfter(n);const L=D.extractContents();if(i==="LI"&&mV(L,"LI")){const P=Et(Bt(k.children,X.fromDom),zo(Bm("br")));k=L.firstChild,d.insertAfter(L,n),me(P,j=>Cl(X.fromDom(k),j)),y&&k.setAttribute("style",y)}else d.insertAfter(L,n),d.insertAfter(k,n);d.remove(s)}Nv(e,k)},IT=e=>{me($n(X.fromDom(e),No),o=>{const n=o.dom;n.nodeValue=jr(n.data)})},PT=(e,o)=>{const n=e.dom.getParent(o,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},B8=(e,o)=>o&&o.nodeName==="A"&&e.isEmpty(o),zT=(e,o)=>e.nodeName===o||e.previousSibling&&e.previousSibling.nodeName===o,ym=(e,o)=>Oe(o)&&e.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&e.isEditable(o.parentNode)&&e.getContentEditable(o)!=="false",hV=(e,o,n)=>{var s;const i=[];if(!n)return;let d=n;for(;d=d.firstChild;){if(e.isBlock(d))return;pt(d)&&!o[d.nodeName.toLowerCase()]&&i.push(d)}let g=i.length;for(;g--;)d=i[g],(!d.hasChildNodes()||d.firstChild===d.lastChild&&((s=d.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||B8(e,d))&&e.remove(d)},FT=(e,o,n)=>Ae(o)?e?n===1&&o.data.charAt(n-1)===$r?0:n:n===o.data.length-1&&o.data.charAt(n)===$r?o.data.length:n:n,pV=e=>{const o=e.cloneRange();return o.setStart(e.startContainer,FT(!0,e.startContainer,e.startOffset)),o.setEnd(e.endContainer,FT(!1,e.endContainer,e.endOffset)),o},N4=e=>{let o=e;do Ae(o)&&(o.data=o.data.replace(/^[\r\n]+/,"")),o=o.firstChild;while(o)},N8=(e,o,n,s,i)=>{var d,g;const f=e.dom,y=(d=cx(f,s))!==null&&d!==void 0?d:f.getRoot();let k=f.getParent(s,f.isBlock);if(!k||!ym(f,k)){if(k=k||y,!k.hasChildNodes()){const j=f.create(o);return dx(e,j),k.appendChild(j),n.setStart(j,0),n.setEnd(j,0),j}let D=s;for(;D&&D.parentNode!==k;)D=D.parentNode;let L;for(;D&&!f.isBlock(D);)L=D,D=D.previousSibling;const P=(g=L==null?void 0:L.parentElement)===null||g===void 0?void 0:g.nodeName;if(L&&P&&e.schema.isValidChild(P,o.toLowerCase())){const j=L.parentNode,$=f.create(o);for(dx(e,$),j.insertBefore($,L),D=L;D&&!f.isBlock(D);){const Z=D.nextSibling;$.appendChild(D),D=Z}n.setStart(s,i),n.setEnd(s,i)}}return s},L8=(e,o)=>{o.normalize();const n=o.lastChild;(!n||pt(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(o,"br")},fV=(e,o)=>{const n=$k(e);return io(o)?!1:J(n)?It(ve.explode(n),o.nodeName.toLowerCase()):n},VT={insert:(e,o)=>{let n,s,i,d,g=!1;const f=e.dom,y=e.schema,k=y.getNonEmptyElements(),D=e.selection.getRng(),L=Hs(e),P=X.fromDom(D.startContainer),j=_r(P,D.startOffset),$=j.exists(ze=>si(ze)&&!Er(ze)),Z=D.collapsed&&$,U=(ze,lt)=>D8(e,n,Ye,je,Wk(e),ze,lt),re=ze=>{const lt=FT(ze,n,s);if(Ae(n)&&(ze?lt>0:lt<n.data.length))return!1;if(n.parentNode===Ye&&g&&!ze||ze&&pt(n)&&n===Ye.firstChild)return!0;if(zT(n,"TABLE")||zT(n,"HR"))return g&&!ze||!g&&ze;const ye=new br(n,Ye);Ae(n)&&(ze&&lt===0?ye.prev():!ze&&lt===n.data.length&&ye.next());let rt;for(;rt=ye.current();){if(pt(rt)){if(!rt.getAttribute("data-mce-bogus")){const vt=rt.nodeName.toLowerCase();if(k[vt]&&vt!=="br")return!1}}else if(Ae(rt)&&!di(rt.data))return!1;ze?ye.prev():ye.next()}return!0},ie=()=>{let ze;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Ve!=="HGROUP"?ze=U(L):ze=U(),fV(e,d)&&ym(f,d)&&f.isEmpty(Ye,void 0,{includeZwsp:!0})?ze=f.split(d,Ye):f.insertAfter(ze,Ye),Nv(e,ze),ze};vc(f,D).each(ze=>{D.setStart(ze.startContainer,ze.startOffset),D.setEnd(ze.endContainer,ze.endOffset)}),n=D.startContainer,s=D.startOffset;const pe=!!(o&&o.shiftKey),Se=!!(o&&o.ctrlKey);pt(n)&&n.hasChildNodes()&&!Z&&(g=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,g&&Ae(n)?s=n.data.length:s=0);const je=cx(f,n);if(!je||PT(e,n))return;pe||(n=N8(e,L,D,n,s));let Ye=f.getParent(n,f.isBlock)||f.getRoot();d=Oe(Ye==null?void 0:Ye.parentNode)?f.getParent(Ye.parentNode,f.isBlock):null,i=Ye?Ye.nodeName.toUpperCase():"";const Ve=d?d.nodeName.toUpperCase():"";if(Ve==="LI"&&!Se){const ze=d;Ye=ze,d=ze.parentNode,i=Ve}if(pt(d)&&uV(e,pe,Ye))return M8(e,U,Ye);if(/^(LI|DT|DD)$/.test(i)&&pt(d)&&f.isEmpty(Ye)){gV(e,U,d,Ye,L);return}if(!Z&&(Ye===e.getBody()||!ym(f,Ye)))return;const Me=Ye.parentNode;let we;if(Z)we=U(L),j.fold(()=>{ao(P,X.fromDom(we))},ze=>{Ur(ze,X.fromDom(we))}),e.selection.setCursorLocation(we,0);else if(lh(Ye))we=Or(Ye),f.isEmpty(Ye)&&M4(Ye),dx(e,we),Nv(e,we);else if(re(!1))we=ie();else if(re(!0)&&Me){we=Me.insertBefore(U(),Ye);const ze=xl(X.fromDom(D.startContainer))&&D.collapsed;Nv(e,zT(Ye,"HR")||ze?we:Ye)}else{const ze=pV(D).cloneRange();ze.setEndAfter(Ye);const lt=ze.extractContents();IT(lt),N4(lt),we=lt.firstChild,f.insertAfter(lt,Ye),hV(f,k,we),L8(f,Ye),f.isEmpty(Ye)&&M4(Ye),we.normalize(),f.isEmpty(we)?(f.remove(we),ie()):(dx(e,we),Nv(e,we))}f.setAttrib(we,"id",""),e.dispatch("NewBlock",{newBlock:we})},fakeEventName:"insertParagraph"},vV=(e,o,n)=>{const s=new br(o,n);let i;const d=e.getNonEmptyElements();for(;i=s.next();)if(d[i.nodeName.toLowerCase()]||Ae(i)&&i.length>0)return!0;return!1},H8=(e,o,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),e.selection.setRng(s),ov(e,s)},bV=(e,o)=>{const n=e.selection,s=e.dom,i=n.getRng();let d,g=!1;vc(s,i).each(j=>{i.setStart(j.startContainer,j.startOffset),i.setEnd(j.endContainer,j.endOffset)});let f=i.startOffset,y=i.startContainer;if(pt(y)&&y.hasChildNodes()){const j=f>y.childNodes.length-1;y=y.childNodes[Math.min(f,y.childNodes.length-1)]||y,j&&Ae(y)?f=y.data.length:f=0}let k=s.getParent(y,s.isBlock);const D=k&&k.parentNode?s.getParent(k.parentNode,s.isBlock):null,L=D?D.nodeName.toUpperCase():"",P=!!(o&&o.ctrlKey);L==="LI"&&!P&&(k=D),Ae(y)&&f>=y.data.length&&(vV(e.schema,y,k||s.getRoot())||(d=s.create("br"),i.insertNode(d),i.setStartAfter(d),i.setEndAfter(d),g=!0)),d=s.create("br"),Rh(s,i,d),H8(e,d,g),e.undoManager.add()},I8=(e,o)=>{const n=X.fromTag("br");Ur(X.fromDom(o),n),e.undoManager.add()},ZT=(e,o)=>{UT(e.getBody(),o)||sc(X.fromDom(o),X.fromTag("br"));const n=X.fromTag("br");sc(X.fromDom(o),n),H8(e,n.dom,!1),e.undoManager.add()},yV=e=>Co(e.getNode()),UT=(e,o)=>yV(Ce.after(o))?!0:qs(e,Ce.after(o)).map(n=>Co(n.getNode())).getOr(!1),WT=e=>e&&e.nodeName==="A"&&"href"in e,L4=e=>e.fold(Ie,WT,WT,Ie),P8=e=>{const o=Le(o1,e),n=Ce.fromRangeStart(e.selection.getRng());return Cd(o,e.getBody(),n).filter(L4)},z8=(e,o)=>{o.fold(Be,Le(I8,e),Le(ZT,e),Be)},F8={insert:(e,o)=>{const n=P8(e);n.isSome()?n.each(Le(z8,e)):bV(e,o)},fakeEventName:"insertLineBreak"},V8=(e,o)=>RT(e).filter(n=>o.length>0&&Za(X.fromDom(n),o)).isSome(),H4=e=>V8(e,DC(e)),Z8=e=>V8(e,Uk(e)),Wl=nd.generate([{br:[]},{block:[]},{none:[]}]),xV=(e,o)=>Z8(e),$T=e=>(o,n)=>BT(o)===e,U8=(e,o)=>(n,s)=>lV(n)===e.toUpperCase()===o,CV=e=>{const o=cx(e.dom,e.selection.getStart());return io(o)},mx=e=>U8("pre",e),wV=()=>U8("summary",!0),I4=e=>(o,n)=>TC(o)===e,W8=(e,o)=>H4(e),P4=(e,o)=>o,$8=e=>{const o=Hs(e),n=cx(e.dom,e.selection.getStart());return Oe(n)&&e.schema.isValidChild(n.nodeName,o)},SV=e=>{const o=e.selection.getRng(),n=X.fromDom(o.startContainer),s=_r(n,o.startOffset).map(i=>si(i)&&!Er(i));return o.collapsed&&s.getOr(!0)},Tc=(e,o)=>(n,s)=>En(e,(i,d)=>i&&d(n,s),!0)?I.some(o):I.none(),kV=(e,o)=>w6([Tc([xV],Wl.none()),Tc([mx(!0),CV],Wl.none()),Tc([wV()],Wl.br()),Tc([mx(!0),I4(!1),P4],Wl.br()),Tc([mx(!0),I4(!1)],Wl.block()),Tc([mx(!0),I4(!0),P4],Wl.block()),Tc([mx(!0),I4(!0)],Wl.br()),Tc([$T(!0),P4],Wl.br()),Tc([$T(!0)],Wl.block()),Tc([W8],Wl.br()),Tc([P4],Wl.br()),Tc([$8],Wl.block()),Tc([SV],Wl.block())],[e,!!(o&&o.shiftKey)]).getOr(Wl.none()),z4=(e,o,n)=>{o.selection.isCollapsed()||pH(o),!(Oe(n)&&D4(o,e.fakeEventName).isDefaultPrevented())&&(e.insert(o,n),Oe(n)&&lx(o,e.fakeEventName))},j8=(e,o)=>{const n=()=>z4(F8,e,o),s=()=>z4(VT,e,o),i=kV(e,o);switch(Zk(e)){case"linebreak":i.fold(n,n,Be);break;case"block":i.fold(s,s,Be);break;case"invert":i.fold(s,n,Be);break;default:i.fold(n,s,Be);break}},_1=Fa(),_V=_1.os.isiOS()&&_1.browser.isSafari(),G8=(e,o)=>{o.isDefaultPrevented()||(o.preventDefault(),tP(e.undoManager),e.undoManager.transact(()=>{j8(e,o)}))},K8=e=>{if(!e.collapsed)return!1;const o=e.startContainer;if(Ae(o)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=o.data.charAt(e.startOffset-1);return n.test(s)}else return!1},EV=e=>{let o=I.none();const n=i=>{o=I.some(i.selection.getBookmark()),i.undoManager.add()},s=(i,d)=>{i.undoManager.undo(),o.fold(Be,g=>i.selection.moveToBookmark(g)),G8(i,d),o=I.none()};e.on("keydown",i=>{i.keyCode===ht.ENTER&&(_V&&K8(e.selection.getRng())?n(e):G8(e,i))}),e.on("keyup",i=>{i.keyCode===ht.ENTER&&o.each(()=>s(e,i))})},OV=(e,o,n)=>{const s=ae.os.isMacOS()||ae.os.isiOS();C1([{keyCode:ht.END,action:Ft(wB,e,!0)},{keyCode:ht.HOME,action:Ft(wB,e,!1)},...s?[]:[{keyCode:ht.HOME,action:Ft(c4,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ht.END,action:Ft(c4,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ht.END,action:Ft(JO,e,!0)},{keyCode:ht.HOME,action:Ft(JO,e,!1)},{keyCode:ht.END,action:Ft(Av,e,!0,o)},{keyCode:ht.HOME,action:Ft(Av,e,!1,o)}],n).each(i=>{n.preventDefault()})},TV=(e,o)=>{e.on("keydown",n=>{n.isDefaultPrevented()||OV(e,o,n)})},X8=e=>{e.on("input",o=>{o.isComposing||el(e)})},DV=Fa(),MV=(e,o,n)=>{C1([{keyCode:ht.PAGE_UP,action:Ft(Av,e,!1,o)},{keyCode:ht.PAGE_DOWN,action:Ft(Av,e,!0,o)}],n)},gx=e=>e.stopImmediatePropagation(),q8=e=>e.keyCode===ht.PAGE_UP||e.keyCode===ht.PAGE_DOWN,Y8=(e,o,n)=>{n&&!e.get()?o.on("NodeChange",gx,!0):!n&&e.get()&&o.off("NodeChange",gx),e.set(n)},AV=(e,o)=>{if(DV.os.isMacOS())return;const n=Tr(!1);e.on("keydown",s=>{q8(s)&&Y8(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||MV(e,o,s),q8(s)&&n.get()&&(Y8(n,e,!1),e.nodeChanged())})},RV=e=>{e.on("beforeinput",o=>{(!e.selection.isEditable()||nn(o.getTargetRanges(),n=>!D5(e.dom,n)))&&o.preventDefault()})},Q8=(e,o)=>{const n=o.container(),s=o.offset();return Ae(n)?(n.insertData(s,e),I.some(Ce(n,s+e.length))):Uh(o).map(i=>{const d=X.fromText(e);return o.isAtEnd()?sc(i,d):Ur(i,d),Ce(d.dom,e.length)})},J8=Le(Q8,jn),e7=Le(Q8," "),BV=(e,o,n)=>dM(e,o,n)?J8(o):e7(o),NV=e=>o=>o.fold(n=>Ys(e.dom,Ce.before(n)),n=>Qs(n),n=>Rl(n),n=>qs(e.dom,Ce.after(n))),LV=(e,o,n)=>s=>dM(e,s,n)?J8(o):e7(o),t7=e=>o=>{e.selection.setRng(o.toRange()),e.nodeChanged()},HV=(e,o)=>e.isEditable(e.getParent(o,"summary")),IV=e=>{const o=Ce.fromRangeStart(e.selection.getRng()),n=X.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=Le(o1,e),i=Ce.fromRangeStart(e.selection.getRng());return Cd(s,e.getBody(),i).bind(NV(n)).map(d=>()=>LV(n,o,e.schema)(d).each(t7(e)))}else return I.none()},cn=e=>{const o=()=>{const n=X.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=Ce.fromRangeStart(e.selection.getRng());BV(n,s,e.schema).each(t7(e))};return bl(ae.browser.isFirefox()&&e.selection.isEditable()&&HV(e.dom,e.selection.getRng().startContainer),o)},PV=(e,o)=>{QO([{keyCode:ht.SPACEBAR,action:Ft(IV,e)},{keyCode:ht.SPACEBAR,action:Ft(cn,e)}],o).each(n=>{o.preventDefault(),D4(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),lx(e,"insertText",{data:" "}))})},o7=e=>{e.on("keydown",o=>{o.isDefaultPrevented()||PV(e,o)})},zV=e=>ha(e)?[{keyCode:ht.TAB,action:Ft(HB,e,!0)},{keyCode:ht.TAB,shiftKey:!0,action:Ft(HB,e,!1)}]:[],jT=(e,o)=>{C1([...zV(e)],o).each(n=>{o.preventDefault()})},n7=e=>{e.on("keydown",o=>{o.isDefaultPrevented()||jT(e,o)})},FV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),AT(e),pm(e))return Tr(null);{const o=aF(e);return RV(e),MF(e),IB(e,o),aV(e,o),EV(e),o7(e),X8(e),n7(e),TV(e,o),AV(e,o),o}};class VV{constructor(o){this.lastPath=[],this.editor=o;let n;const s=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const d=o.selection.getRng(),g={startContainer:d.startContainer,startOffset:d.startOffset,endContainer:d.endContainer,endOffset:d.endOffset};(i.type==="nodechange"||!$e(g,n))&&o.dispatch("SelectionChange"),n=g}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&Z0(o)&&!s.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&Z0(o)&&(o.selection.getNode().nodeName==="IMG"?Ll.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!O0(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();s=n.getStart(!0)||i,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,i))&&(s=i);const d=[];this.editor.dom.getParent(s,g=>g===i?!0:(d.push(g),!1)),this.editor.dispatch("NodeChange",{...o,element:s,parents:d})}}isSameElementPath(o){let n;const s=this.editor,i=yn(s.dom.getParents(o,at,s.getBody()));if(i.length===this.lastPath.length){for(n=i.length;n>=0&&i[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const GT=qu("image"),KT=e=>{const o=e;return I.from(o[GT])},ZV=(e,o)=>{const n=e;n[GT]=o},XT=qu("event"),UV=e=>{const o=e;return I.from(o[XT])},hx=e=>o=>{const n=o;n[XT]=e},WV=(e,o)=>hx(o)(e),r7=hx(0),Lv=hx(2),$V=hx(1),Hv=(e=>o=>{const n=o;return I.from(n[XT]).exists(s=>s===e)})(0),px=()=>Object.freeze({length:0,item:e=>null}),qT=qu("mode"),jV=e=>{const o=e;return I.from(o[qT])},Zg=e=>o=>{const n=o;n[qT]=e},s7=(e,o)=>Zg(o)(e),F4=Zg(0),YT=Zg(2),a7=Zg(1),QT=e=>o=>{const n=o;return I.from(n[qT]).exists(s=>s===e)},Bp=QT(0),JT=QT(1),GV=(e,o)=>({...o,get length(){return o.length},add:(n,s)=>{if(Bp(e))if(J(n)){if(!Rn(s))return o.add(n,s)}else return o.add(n);return null},remove:n=>{Bp(e)&&o.remove(n)},clear:()=>{Bp(e)&&o.clear()}}),KV=["none","copy","link","move"],i7=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],eD=()=>{const e=new window.DataTransfer;let o="move",n="all";const s={get dropEffect(){return o},set dropEffect(i){It(KV,i)&&(o=i)},get effectAllowed(){return n},set effectAllowed(i){Hv(s)&&It(i7,i)&&(n=i)},get items(){return GV(s,e.items)},get files(){return JT(s)?px():e.files},get types(){return e.types},setDragImage:(i,d,g)=>{Bp(s)&&(ZV(s,{image:i,x:d,y:g}),e.setDragImage(i,d,g))},getData:i=>JT(s)?"":e.getData(i),setData:(i,d)=>{Bp(s)&&e.setData(i,d)},clearData:i=>{Bp(s)&&e.clearData(i)}};return F4(s),s},l7=e=>{const o=eD(),n=jV(e);return YT(e),r7(o),o.dropEffect=e.dropEffect,o.effectAllowed=e.effectAllowed,KT(e).each(s=>o.setDragImage(s.image,s.x,s.y)),me(e.types,s=>{s!=="Files"&&o.setData(s,e.getData(s))}),me(e.files,s=>o.items.add(s)),UV(e).each(s=>{WV(o,s)}),n.each(s=>{s7(e,s),s7(o,s)}),o},tD=e=>{const o=e.getData("text/html");return o===""?I.none():I.some(o)},oD=(e,o)=>e.setData("text/html",o),c7="x-tinymce/html",V4=Pe(c7),nD="<!-- "+c7+" -->",d7=e=>nD+e,rD=e=>e.replace(nD,""),u7=e=>e.indexOf(nD)!==-1,m7=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),g7=(e,o)=>{let n="<"+e;const s=Pa(o,(i,d)=>d+'="'+gt.encodeAllRaw(i)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},XV=(e,o,n)=>{const s=e.split(/\n\n/),i=g7(o,n),d="</"+o+">",g=Bt(s,y=>y.split(/\n/).join("<br />")),f=y=>i+y+d;return g.length===1?g[0]:Bt(g,f).join("")},sD="%MCEPASTEBIN%",qV=(e,o)=>{const{dom:n,selection:s}=e,i=e.getBody();o.set(s.getRng());const d=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},sD);ae.browser.isFirefox()&&n.setStyle(d,"left",n.getStyle(i,"direction",!0)==="rtl"?65535:-65535),n.bind(d,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),d.focus(),s.select(d,!0)},YV=(e,o)=>{const n=e.dom;if(aD(e)){let s;const i=o.get();for(;s=aD(e);)n.remove(s),n.unbind(s);i&&e.selection.setRng(i)}o.set(null)},aD=e=>e.dom.get("mcepastebin"),QV=e=>Oe(e)&&e.id==="mcepastebin",JV=e=>{const o=e.dom,n=(g,f)=>{g.appendChild(f),o.remove(f,!0)},[s,...i]=Et(e.getBody().childNodes,QV);me(i,g=>{n(s,g)});const d=o.select("div[id=mcepastebin]",s);for(let g=d.length-1;g>=0;g--){const f=o.create("div");s.insertBefore(f,d[g]),n(f,d[g])}return s?s.innerHTML:""},fx=e=>e===sD,eZ=e=>{const o=Tr(null);return{create:()=>qV(e,o),remove:()=>YV(e,o),getEl:()=>aD(e),getHtml:()=>JV(e),getLastRng:o.get}},iD=(e,o)=>(ve.each(o,n=>{_n(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),tZ=e=>{const o=Jc(),n=g1({},o);let s="";const i=o.getVoidElements(),d=ve.makeMap("script noscript style textarea video audio iframe object"," "),g=o.getBlockElements(),f=y=>{const k=y.name,D=y;if(k==="br"){s+=`
`;return}if(k!=="wbr"){if(i[k]&&(s+=" "),d[k]){s+=" ";return}if(y.type===3&&(s+=y.value),!(y.name in o.getVoidElements())){let L=y.firstChild;if(L)do f(L);while(L=L.next)}g[k]&&D.next&&(s+=`
`,k==="p"&&(s+=`
`))}};return e=iD(e,[/<!\[[^\]]+\]>/g]),f(n.parse(e)),s},h7=e=>(e=iD(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,n,s)=>!n&&!s?" ":jn],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),p7=e=>{let o=0;return()=>e+o++},f7=e=>{const o=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ve.hasOwn(n,o)?"image/"+n[o]:"image/"+o},oZ=(e,o)=>{const n=g1({sanitize:ey(e),sandbox_iframes:oy(e)},e.schema);n.addNodeFilter("meta",i=>{ve.each(i,d=>{d.remove()})});const s=n.parse(o,{forced_root_block:!1,isRootContent:!0});return up({validate:!0},e.schema).serialize(s)},v7=(e,o)=>({content:e,cancelled:o}),nZ=(e,o,n)=>{const s=e.dom.create("div",{style:"display:none"},o),i=bw(e,s,n);return v7(i.node.innerHTML,i.isDefaultPrevented())},rZ=(e,o,n)=>{const s=lp(e,o,n),i=oZ(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?nZ(e,i,n):v7(i,s.isDefaultPrevented())},sZ=(e,o,n)=>rZ(e,o,n),Z4=(e,o)=>(e.insertContent(o,{merge:VC(e),paste:!0}),!0),lD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),aZ=(e,o)=>lD(o)&&nn(WC(e),n=>Su(o.toLowerCase(),`.${n.toLowerCase()}`)),iZ=(e,o,n)=>(e.undoManager.extra(()=>{n(e,o)},()=>{e.insertContent('<img src="'+o+'">')}),!0),lZ=(e,o,n)=>(e.undoManager.extra(()=>{n(e,o)},()=>{e.execCommand("mceInsertLink",!1,o)}),!0),cZ=(e,o,n)=>!e.selection.isCollapsed()&&lD(o)?lZ(e,o,n):!1,dZ=(e,o,n)=>aZ(e,o)?iZ(e,o,n):!1,uZ=(e,o)=>{ve.each([cZ,dZ,Z4],n=>!n(e,o,Z4))},mZ=(e,o,n)=>{n||!A0(e)?Z4(e,o):uZ(e,o)},b7=p7("mceclip"),y7=e=>{const o=eD();return oD(o,e),YT(o),o},x7=(e,o,n,s,i)=>{const d=sZ(e,o,n);if(!d.cancelled){const g=d.content,f=()=>mZ(e,g,s);i?D4(e,"insertFromPaste",{dataTransfer:y7(g)}).isDefaultPrevented()||(f(),lx(e,"insertFromPaste")):f()}},U4=(e,o,n,s)=>{const i=n||u7(o);x7(e,rD(o),i,!1,s)},cD=(e,o,n)=>{const s=e.dom.encode(o).replace(/\r\n/g,`
`),i=ui(s,Yb(e)),d=XV(i,Hs(e),cg(e));x7(e,d,!1,!0,n)},C7=e=>{const o={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{o[s]=e.getData(s)}catch{o[s]=""}}return o},Np=(e,o)=>o in e&&e[o].length>0,w7=e=>Np(e,"text/html")||Np(e,"text/plain"),gZ=(e,o)=>{const n=o.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(n)?e.dom.encode(n[1]):void 0},W4=(e,o,n,s)=>{const i=b7(),d=AC(e)&&Oe(n.name),g=d?gZ(e,n.name):i,f=d?n.name:void 0,y=o.create(i,n,s,g,f);return o.add(y),y},S7=(e,o)=>{fS(o.uri).each(({data:n,type:s,base64Encoded:i})=>{const d=i?n:btoa(n),g=o.file,f=e.editorUpload.blobCache,y=f.getByData(d,s),k=y??W4(e,f,g,d);U4(e,`<img src="${k.blobUri()}">`,!1,!0)})},hZ=e=>e.type==="paste",k7=e=>Promise.all(Bt(e,o=>Rg(o).then(n=>({file:o,uri:n})))),_7=e=>{const o=WC(e);return n=>Bo(n.type,"image/")&&nn(o,s=>f7(s)===n.type)},dD=(e,o)=>{const n=o.items?Ds(ps(o.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],s=o.files?ps(o.files):[];return Et(n.length>0?n:s,_7(e))},E7=(e,o,n)=>{const s=hZ(o)?o.clipboardData:o.dataTransfer;if(D0(e)&&s){const i=dD(e,s);if(i.length>0)return o.preventDefault(),k7(i).then(d=>{n&&e.selection.setRng(n),me(d,g=>{S7(e,g)})}),!0}return!1},O7=e=>{var o,n;return ae.os.isAndroid()&&((n=(o=e.clipboardData)===null||o===void 0?void 0:o.items)===null||n===void 0?void 0:n.length)===0},pZ=e=>ht.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,$4=(e,o,n,s,i)=>{let d=h7(n);const g=Np(o,V4())||u7(n),f=!g&&m7(d),y=lD(d);(fx(d)||!d.length||f&&!y)&&(s=!0),(s||y)&&(Np(o,"text/plain")&&f?d=o["text/plain"]:d=tZ(d)),!fx(d)&&(s?cD(e,d,i):U4(e,d,g,i))},fZ=(e,o,n)=>{let s;const i=()=>o.getLastRng()||e.selection.getRng();e.on("keydown",d=>{pZ(d)&&!d.isDefaultPrevented()&&(s=d.shiftKey&&d.keyCode===86)}),e.on("paste",d=>{if(d.isDefaultPrevented()||O7(d))return;const g=n.get()==="text"||s;s=!1;const f=C7(d.clipboardData);!w7(f)&&E7(e,d,i())||(Np(f,"text/html")?(d.preventDefault(),$4(e,f,f["text/html"],g,!0)):Np(f,"text/plain")&&Np(f,"text/uri-list")?(d.preventDefault(),$4(e,f,f["text/plain"],g,!0)):(o.create(),Ll.setEditorTimeout(e,()=>{const y=o.getHtml();o.remove(),$4(e,f,y,g,!1)},0)))})},T7=e=>{const o=i=>Bo(i,"webkit-fake-url"),n=i=>Bo(i,"data:"),s=i=>{var d;return((d=i.data)===null||d===void 0?void 0:d.paste)===!0};e.parser.addNodeFilter("img",(i,d,g)=>{if(!D0(e)&&s(g))for(const f of i){const y=f.attr("src");J(y)&&!f.attr("data-mce-object")&&y!==ae.transparentSrc&&(o(y)||!ZC(e)&&n(y))&&f.remove()}})},vZ=(e,o,n)=>{fZ(e,o,n),T7(e)},bZ=(e,o)=>{o.get()==="text"?(o.set("html"),yw(e,!1)):(o.set("text"),yw(e,!0)),e.focus()},yZ=(e,o)=>{e.addCommand("mceTogglePlainTextPaste",()=>{bZ(e,o)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&U4(e,s.html,s.internal,!1),s.text&&cD(e,s.text,!1)})},vx=(e,o,n)=>{if(e)try{return e.clearData(),e.setData("text/html",o),e.setData("text/plain",n),e.setData(V4(),o),!0}catch{return!1}else return!1},D7=(e,o,n,s)=>{vx(e.clipboardData,o.html,o.text)?(e.preventDefault(),s()):n(o.html,s)},M7=e=>(o,n)=>{const{dom:s,selection:i}=e,d=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),g=s.create("div",{contenteditable:"true"},o);s.setStyles(d,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),d.appendChild(g),s.add(e.getBody(),d);const f=i.getRng();g.focus();const y=s.createRng();y.selectNodeContents(g),i.setRng(y),Ll.setEditorTimeout(e,()=>{i.setRng(f),s.remove(d),n()},0)},uD=e=>({html:d7(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),xZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),A7=e=>!e.selection.isCollapsed()||xZ(e),CZ=e=>o=>{!o.isDefaultPrevented()&&A7(e)&&e.selection.isEditable()&&D7(o,uD(e),M7(e),()=>{if(ae.browser.isChromium()||ae.browser.isFirefox()){const n=e.selection.getRng();Ll.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},wZ=e=>o=>{!o.isDefaultPrevented()&&A7(e)&&D7(o,uD(e),M7(e),Be)},SZ=e=>{e.on("cut",CZ(e)),e.on("copy",wZ(e))},bx=(e,o)=>{var n,s;return Nr.getCaretRangeFromPoint((n=o.clientX)!==null&&n!==void 0?n:0,(s=o.clientY)!==null&&s!==void 0?s:0,e.getDoc())},R7=e=>{const o=e["text/plain"];return o?o.indexOf("file://")===0:!1},mD=(e,o)=>{e.focus(),o&&e.selection.setRng(o)},kZ=e=>nn(e.files,o=>/^image\//.test(o.type)),_Z=(e,o,n,s)=>{const i=e.getParent(n,d=>ng(o,d));if(!se(e.getParent(n,"summary")))return!0;if(i&&At(s,"text/html")){const d=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!se(d.querySelector(i.nodeName.toLowerCase()))}else return!1},EZ=e=>{e.on("input",o=>{const n=s=>se(s.querySelector("summary"));if(o.inputType==="deleteByDrag"){const s=Et(e.dom.select("details"),n);me(s,i=>{Co(i.firstChild)&&i.firstChild.remove();const d=e.dom.create("summary");d.appendChild(tf().dom),i.prepend(d)})}})},OZ=(e,o)=>{i3(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),D0(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&kZ(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=bx(e,n);if(io(s))return;const i=C7(n.dataTransfer),d=Np(i,V4());if((!w7(i)||R7(i))&&E7(e,n,s))return;const g=i[V4()],f=g||i["text/html"]||i["text/plain"],y=_Z(e.dom,e.schema,s.startContainer,i),k=o.get();k&&!y||f&&(n.preventDefault(),Ll.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(g||k&&y)&&e.execCommand("Delete"),mD(e,s);const D=h7(f);i["text/html"]?U4(e,D,d,!0):cD(e,D,!0)})}))}),e.on("dragstart",n=>{o.set(!0)}),e.on("dragover dragend",n=>{D0(e)&&!o.get()&&(n.preventDefault(),mD(e,bx(e,n))),n.type==="dragend"&&o.set(!1)}),EZ(e)},gD=e=>{const o=i=>d=>{i(e,d)},n=FC(e);te(n)&&e.on("PastePreProcess",o(n));const s=M0(e);te(s)&&e.on("PastePostProcess",o(s))},hD=(e,o)=>{e.on("PastePreProcess",n=>{n.content=o(e,n.content,n.internal)})},j4=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,B7=e=>ve.trim(e).replace(j4,vf).toLowerCase(),TZ=(e,o,n)=>{const s=Xb(e);if(n||s==="all"||!qb(e))return o;const i=s?s.split(/[, ]/):[];if(i&&s!=="none"){const d=e.dom,g=e.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(f,y,k,D)=>{const L=d.parseStyle(d.decode(k)),P={};for(let $=0;$<i.length;$++){const Z=L[i[$]];let U=Z,re=d.getStyle(g,i[$],!0);/color/.test(i[$])&&(U=B7(U),re=B7(re)),re!==U&&(P[i[$]]=Z)}const j=d.serializeStyle(P,"span");return j?y+' style="'+j+'"'+D:y+D})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o=o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(d,g,f,y)=>g+' style="'+f+'"'+y),o},N7=e=>{(ae.browser.isChromium()||ae.browser.isSafari())&&hD(e,TZ)},DZ=e=>{const o=Tr(!1),n=Tr(R0(e)?"text":"html"),s=eZ(e);N7(e),yZ(e,n),gD(e),e.on("PreInit",()=>{SZ(e),OZ(e,o),vZ(e,s,n)})},pD=e=>{e.on("click",o=>{e.dom.getParent(o.target,"details")&&o.preventDefault()})},L7=e=>{e.parser.addNodeFilter("details",o=>{const n=Ph(e);me(o,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",o=>{const n=h3(e);me(o,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},MZ=e=>{pD(e),L7(e)},AZ=Co,fD=Ae,RZ=e=>xe(e.dom),BZ=e=>Ua(e.dom),H7=e=>o=>yo(X.fromDom(e),o),NZ=(e,o,n)=>rs(X.fromDom(e),s=>BZ(s)||n.isBlock(po(s)),H7(o)).getOr(X.fromDom(o)).dom,vD=(e,o)=>rs(X.fromDom(e),RZ,H7(o)),I7=(e,o,n)=>{const s=new br(e,o),i=n?s.next.bind(s):s.prev.bind(s);let d=e;for(let g=n?e:i();g&&!AZ(g);g=i())as(g)&&(d=g);return d},P7=(e,o,n)=>{const s=Ce.fromRangeStart(e).getNode(),i=NZ(s,o,n),d=I7(s,i,!1),g=I7(s,i,!0),f=document.createRange();return vD(d,i).fold(()=>{fD(d)?f.setStart(d,0):f.setStartBefore(d)},y=>f.setStartBefore(y.dom)),vD(g,i).fold(()=>{fD(g)?f.setEnd(g,g.data.length):f.setEndAfter(g)},y=>f.setEndAfter(y.dom)),f},LZ=e=>{const o=P7(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(u2(o))},HZ=e=>{e.on("mousedown",o=>{o.detail>=3&&(o.preventDefault(),LZ(e))})};var Iv;(function(e){e.Before="before",e.After="after"})(Iv||(Iv={}));const IZ=(e,o)=>Math.abs(e.left-o),PZ=(e,o)=>Math.abs(e.right-o),z7=(e,o)=>e>=o.top&&e<=o.bottom,zZ=(e,o)=>e.top<o.bottom&&e.bottom>o.top,F7=(e,o)=>{const n=u0(e,o)/Math.min(e.height,o.height);return zZ(e,o)&&n>.5},FZ=(e,o)=>{const n=Et(e,s=>z7(o,s));return kb(n).fold(()=>[[],e],s=>{const{pass:i,fail:d}=cr(e,g=>F7(g,s));return[i,d]})},bD=(e,o)=>({node:e.node,position:IZ(e,o)<PZ(e,o)?Iv.Before:Iv.After}),VZ=(e,o,n)=>o>e.left&&o<e.right?0:Math.min(Math.abs(e.left-o),Math.abs(e.right-o)),yD=(e,o,n,s)=>{const i=L=>as(L.node)?I.some(L):pt(L.node)?yD(ps(L.node.childNodes),o,n,!1):I.none(),d=(L,P,j)=>i(P).filter($=>Math.abs(j(L,o,n)-j($,o,n))<2&&Ae($.node)),g=(L,P)=>{const j=Yo(L,($,Z)=>P($,o,n)-P(Z,o,n));return gl(j,i).map($=>s&&!Ae($.node)&&j.length>1?d($,j[1],P).getOr($):$)},[f,y]=FZ(RO(e),n),{pass:k,fail:D}=cr(y,L=>L.top<n);return g(f,VZ).orThunk(()=>g(D,ig)).orThunk(()=>g(k,ig))},ZZ=(e,o,n,s)=>{const i=(d,g)=>{const f=k=>pt(k)&&k.classList.contains("mce-drag-container"),y=Et(d.dom.childNodes,zo(f));return g.fold(()=>yD(y,n,s,!0),k=>{const D=Et(y,L=>L!==k.dom);return yD(D,n,s,!0)}).orThunk(()=>(yo(d,e)?I.none():yl(d)).bind(k=>i(k,I.some(d))))};return i(o,I.none())},V7=(e,o,n)=>{const s=X.fromDom(e),i=Bi(s),d=X.fromPoint(i,o,n).filter(g=>oc(s,g)).getOr(s);return ZZ(s,d,o,n)},yx=(e,o,n)=>V7(e,o,n).filter(s=>sd(s.node)).map(s=>bD(s,o)),xD=e=>{var o,n;const s=e.getBoundingClientRect(),i=e.ownerDocument,d=i.documentElement,g=i.defaultView;return{top:s.top+((o=g==null?void 0:g.scrollY)!==null&&o!==void 0?o:0)-d.clientTop,left:s.left+((n=g==null?void 0:g.scrollX)!==null&&n!==void 0?n:0)-d.clientLeft}},Z7=e=>e.inline?xD(e.getBody()):{left:0,top:0},UZ=e=>{const o=e.getBody();return e.inline?{left:o.scrollLeft,top:o.scrollTop}:{left:0,top:0}},WZ=e=>{const o=e.getBody(),n=e.getDoc().documentElement,s={left:o.scrollLeft,top:o.scrollTop},i={left:o.scrollLeft||n.scrollLeft,top:o.scrollTop||n.scrollTop};return e.inline?s:i},U7=(e,o)=>{if(o.target.ownerDocument!==e.getDoc()){const n=xD(e.getContentAreaContainer()),s=WZ(e);return{left:o.pageX-n.left+s.left,top:o.pageY-n.top+s.top}}return{left:o.pageX,top:o.pageY}},$Z=(e,o,n)=>({pageX:n.left-e.left+o.left,pageY:n.top-e.top+o.top}),jZ=(e,o)=>$Z(Z7(e),UZ(e),U7(e,o)),W7=e=>({target:e,srcElement:e}),CD=(e,o,n,s)=>({...o,dataTransfer:s,type:e,...W7(n)}),GZ=(e,o,n)=>{const s=xr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:Be,stopImmediatePropagation:Be,stopPropagation:Be,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...W7(o)}},KZ=(e,o)=>{const n=l7(e);return o==="dragstart"?(r7(n),F4(n)):o==="drop"?(Lv(n),YT(n)):($V(n),a7(n)),n},XZ=(e,o,n,s)=>{const i=KZ(n,e);return Rn(s)?GZ(e,o,i):CD(e,s,o,i)},G4=32,qZ=100,K4=8,xx=16,wD=xe,SD=pC(wD,Ua),kD=(e,o,n)=>wD(n)&&n!==o&&e.isEditable(n.parentElement),YZ=(e,o,n)=>io(o)||o===n||e.dom.isChildOf(o,n)?!1:e.dom.isEditable(o),_D=(e,o,n,s)=>{const i=e.dom,d=o.cloneNode(!0);i.setStyles(d,{width:n,height:s}),i.setAttrib(d,"data-mce-selected",null);const g=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),i.setStyles(d,{margin:0,boxSizing:"border-box"}),g.appendChild(d),g},QZ=(e,o)=>{e.parentNode!==o&&o.appendChild(e)},X4=(e,o)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+o,behavior:"smooth"})},ED=X4("left",-G4),$7=X4("left",G4),j7=X4("top",-G4),G7=X4("top",G4),JZ=(e,o,n,s,i,d,g,f,y,k,D,L)=>{let P=0,j=0;e.style.left=o.pageX+"px",e.style.top=o.pageY+"px",o.pageX+n>i&&(P=o.pageX+n-i),o.pageY+s>d&&(j=o.pageY+s-d),e.style.width=n-P+"px",e.style.height=s-j+"px";const $=y.clientHeight,Z=y.clientWidth,U=g+y.getBoundingClientRect().top,re=f+y.getBoundingClientRect().left;D.on(ie=>{ie.intervalId.clear(),ie.dragging&&L&&(g+K4>=$?ie.intervalId.set(G7(k)):g-K4<=0?ie.intervalId.set(j7(k)):f+K4>=Z?ie.intervalId.set($7(k)):f-K4<=0?ie.intervalId.set(ED(k)):U+xx>=window.innerHeight?ie.intervalId.set(G7(window)):U-xx<=0?ie.intervalId.set(j7(window)):re+xx>=window.innerWidth?ie.intervalId.set($7(window)):re-xx<=0&&ie.intervalId.set(ED(window)))})},K7=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},eU=(e,o)=>{const n=e.getParent(o.parentNode,e.isBlock);K7(o),n&&n!==e.getRoot()&&e.isEmpty(n)&&zu(X.fromDom(n))},tU=e=>e.button===0,X7=(e,o)=>({pageX:o.pageX-e.relX,pageY:o.pageY+5}),oU=(e,o)=>n=>{if(tU(n)){const s=On(o.dom.getParents(n.target),SD).getOr(null);if(Oe(s)&&kD(o.dom,o.getBody(),s)){const i=o.dom.getPos(s),d=o.getBody(),g=o.getDoc().documentElement;e.set({element:s,dataTransfer:eD(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(o.inline?d.scrollWidth:g.offsetWidth)-2,maxY:(o.inline?d.scrollHeight:g.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:s.offsetWidth,height:s.offsetHeight,ghost:_D(o,s,s.offsetWidth,s.offsetHeight),intervalId:iC(qZ)})}}},OD=(e,o,n)=>{e._selectionOverrides.hideFakeCaret(),yx(e.getBody(),o,n).fold(()=>e.selection.placeCaretAt(o,n),s=>{const i=e._selectionOverrides.showCaret(1,s.node,s.position===Iv.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(o,n)})},Cx=(e,o,n,s,i)=>{o==="dragstart"&&oD(s,e.dom.getOuterHTML(n));const d=XZ(o,n,s,i);return e.dispatch(o,d)},nU=(e,o)=>{const n=xf((i,d)=>OD(o,i,d),0);o.on("remove",n.cancel);const s=e;return i=>e.on(d=>{const g=Math.max(Math.abs(i.screenX-d.screenX),Math.abs(i.screenY-d.screenY));if(!d.dragging&&g>10){const f=Cx(o,"dragstart",d.element,d.dataTransfer,i);if(Oe(f.dataTransfer)&&(d.dataTransfer=f.dataTransfer),f.isDefaultPrevented())return;d.dragging=!0,o.focus()}if(d.dragging){const f=i.currentTarget===o.getDoc().documentElement,y=X7(d,jZ(o,i));QZ(d.ghost,o.getBody()),JZ(d.ghost,y,d.width,d.height,d.maxX,d.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),s,f),n.throttle(i.clientX,i.clientY)}})},rU=e=>{const o=e.getSel();if(Oe(o)){const n=o.getRangeAt(0).startContainer;return Ae(n)?n.parentNode:n}else return null},sU=(e,o)=>n=>{e.on(s=>{var i;if(s.intervalId.clear(),s.dragging){if(YZ(o,rU(o.selection),s.element)){const d=(i=o.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&i!==void 0?i:o.getBody();Cx(o,"drop",d,s.dataTransfer,n).isDefaultPrevented()||o.undoManager.transact(()=>{eU(o.dom,s.element),tD(s.dataTransfer).each(g=>o.insertContent(g)),o._selectionOverrides.hideFakeCaret()})}Cx(o,"dragend",o.getBody(),s.dataTransfer,n)}}),wx(e)},q7=(e,o,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Cx(o,"dragend",s.element,s.dataTransfer),i=>Cx(o,"dragend",s.element,s.dataTransfer,i))}),wx(e)},aU=(e,o)=>n=>q7(e,o,I.some(n)),wx=e=>{e.on(o=>{o.intervalId.clear(),K7(o.ghost)}),e.clear()},iU=e=>{const o=Ku(),n=Kt.DOM,s=document,i=oU(o,e),d=nU(o,e),g=sU(o,e),f=aU(o,e);e.on("mousedown",i),e.on("mousemove",d),e.on("mouseup",g),n.bind(s,"mousemove",d),n.bind(s,"mouseup",f),e.on("remove",()=>{n.unbind(s,"mousemove",d),n.unbind(s,"mouseup",f)}),e.on("keydown",y=>{y.keyCode===ht.ESC&&q7(o,e,I.none())})},lU=e=>{const o=i=>{if(!i.isDefaultPrevented()){const d=i.dataTransfer;d&&(It(d.types,"Files")||d.files.length>0)&&(i.preventDefault(),i.type==="drop"&&vm(e,"Dropped file type is not supported"))}},n=i=>{Aw(e,i.target)&&o(i)},s=()=>{const i=Kt.DOM,d=e.dom,g=document,f=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];me(y,k=>{i.bind(g,k,n),d.bind(f,k,o)}),e.on("remove",()=>{me(y,k=>{i.unbind(g,k,n),d.unbind(f,k,o)})})};e.on("init",()=>{Ll.setEditorTimeout(e,s,0)})},cU=e=>{iU(e),o3(e)&&lU(e)},dU=e=>{const o=xf(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=yO(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{o.throttle()}),e.on("blur",()=>{o.cancel()})},uU=e=>{e.on("init",()=>{e.on("focusin",o=>{const n=o.target;if(dn(n)){const s=pp(e.getBody(),n),i=xe(s)?s:n;e.selection.getNode()!==i&&Mp(e,i).each(d=>e.selection.setRng(d))}})})},Sx=xe,Y7=(e,o)=>pp(e.getBody(),o),mU=e=>{const o=e.selection,n=e.dom,s=e.getBody(),i=f3(e,s,n.isBlock,()=>Jf(e)),d="sel-"+n.uniqueId(),g="data-mce-selected";let f;const y=Ve=>Oe(Ve)&&n.hasClass(Ve,"mce-offscreen-selection"),k=Ve=>Ve!==s&&(Sx(Ve)||dn(Ve))&&n.isChildOf(Ve,s)&&n.isEditable(Ve.parentNode),D=Ve=>{Ve&&o.setRng(Ve)},L=(Ve,Me,we,ze=!0)=>e.dispatch("ShowCaret",{target:Me,direction:Ve,before:we}).isDefaultPrevented()?null:(ze&&o.scrollIntoView(Me,Ve===-1),i.show(we,Me)),P=Ve=>{Ve.hasAttribute("data-mce-caret")&&(Or(Ve),o.scrollIntoView(Ve))},j=()=>{e.on("click",Me=>{n.isEditable(Me.target)||(Me.preventDefault(),e.focus())}),e.on("blur NewBlock",Se),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Me=>{const we=Me.target,ze=Y7(e,we);Sx(ze)?(Me.preventDefault(),Mp(e,ze).each(pe)):k(we)&&Mp(e,we).each(pe)},!0),e.on("mousedown",Me=>{const we=Me.target;if(we!==s&&we.nodeName!=="HTML"&&!n.isChildOf(we,s)||!XP(e,Me.clientX,Me.clientY))return;Se(),Ye();const ze=Y7(e,we);Sx(ze)?(Me.preventDefault(),Mp(e,ze).each(pe)):yx(s,Me.clientX,Me.clientY).each(lt=>{Me.preventDefault();const ye=L(1,lt.node,lt.position===Iv.Before,!1);D(ye),Sl(ze)?ze.focus():e.getBody().focus()})}),e.on("keypress",Me=>{ht.modifierPressed(Me)||Sx(o.getNode())&&Me.preventDefault()}),e.on("GetSelectionRange",Me=>{let we=Me.range;if(f){if(!f.parentNode){f=null;return}we=we.cloneRange(),we.selectNode(f),Me.range=we}}),e.on("SetSelectionRange",Me=>{Me.range=U(Me.range);const we=pe(Me.range,Me.forward);we&&(Me.range=we)});const Ve=Me=>pt(Me)&&Me.id==="mcepastebin";e.on("AfterSetSelectionRange",Me=>{const we=Me.range,ze=we.startContainer.parentElement;!Z(we)&&!Ve(ze)&&Ye(),y(ze)||Se()}),cU(e),dU(e),uU(e)},$=Ve=>ci(Ve)||dh(Ve)||uh(Ve),Z=Ve=>$(Ve.startContainer)||$(Ve.endContainer),U=Ve=>{const Me=e.schema.getVoidElements(),we=n.createRng(),ze=Ve.startContainer,lt=Ve.startOffset,ye=Ve.endContainer,rt=Ve.endOffset;return At(Me,ze.nodeName.toLowerCase())?lt===0?we.setStartBefore(ze):we.setStartAfter(ze):we.setStart(ze,lt),At(Me,ye.nodeName.toLowerCase())?rt===0?we.setEndBefore(ye):we.setEndAfter(ye):we.setEnd(ye,rt),we},re=(Ve,Me)=>{const we=X.fromDom(e.getBody()),ze=e.getDoc(),lt=Id(we,"#"+d).getOrThunk(()=>{const vt=X.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ze);return Dn(vt,"id",d),ao(we,vt),vt}),ye=n.createRng();ac(lt),Pi(lt,[X.fromText(jn,ze),X.fromDom(Me),X.fromText(jn,ze)]),ye.setStart(lt.dom.firstChild,1),ye.setEnd(lt.dom.lastChild,0),Lu(lt,{top:n.getPos(Ve,e.getBody()).y+"px"}),v5(lt);const rt=o.getSel();return rt&&(rt.removeAllRanges(),rt.addRange(ye)),ye},ie=Ve=>{const Me=Ve.cloneNode(!0),we=e.dispatch("ObjectSelected",{target:Ve,targetClone:Me});if(we.isDefaultPrevented())return null;const ze=re(Ve,we.targetClone),lt=X.fromDom(Ve);return me(rn(X.fromDom(e.getBody()),`*[${g}]`),ye=>{yo(lt,ye)||kr(ye,g)}),n.getAttrib(Ve,g)||Ve.setAttribute(g,"1"),f=Ve,Ye(),ze},pe=(Ve,Me)=>{if(!Ve)return null;if(Ve.collapsed){if(!Z(Ve)){const ye=Me?1:-1,rt=zf(ye,s,Ve),vt=rt.getNode(!Me);if(Oe(vt)){if(sd(vt))return L(ye,vt,Me?!rt.isAtEnd():!1,!1);if(Fd(vt)&&xe(vt.nextSibling)){const So=n.createRng();return So.setStart(vt,0),So.setEnd(vt,0),So}}const to=rt.getNode(Me);if(Oe(to)){if(sd(to))return L(ye,to,Me?!1:!rt.isAtEnd(),!1);if(Fd(to)&&xe(to.previousSibling)){const So=n.createRng();return So.setStart(to,1),So.setEnd(to,1),So}}}return null}let we=Ve.startContainer,ze=Ve.startOffset;const lt=Ve.endOffset;if(Ae(we)&&ze===0&&Sx(we.parentNode)&&(we=we.parentNode,ze=n.nodeIndex(we),we=we.parentNode),!pt(we))return null;if(lt===ze+1&&we===Ve.endContainer){const ye=we.childNodes[ze];if(k(ye))return ie(ye)}return null},Se=()=>{f&&f.removeAttribute(g),Id(X.fromDom(e.getBody()),"#"+d).each($o),f=null},je=()=>{i.destroy(),f=null},Ye=()=>{i.hide()};return pm(e)||j(),{showCaret:L,showBlockCaretContainer:P,hideFakeCaret:Ye,destroy:je}},gU=(e,o)=>{let n=o;for(let s=e.previousSibling;Ae(s);s=s.previousSibling)n+=s.data.length;return n},TD=(e,o,n,s,i)=>{if(Ae(n)&&(s<0||s>n.data.length))return[];const d=i&&Ae(n)?[gU(n,s)]:[s];let g=n;for(;g!==o&&g.parentNode;)d.push(e.nodeIndex(g,i)),g=g.parentNode;return g===o?d.reverse():[]},DD=(e,o,n,s,i,d,g=!1)=>{const f=TD(e,o,n,s,g),y=TD(e,o,i,d,g);return{start:f,end:y}},MD=(e,o)=>{const n=o.slice(),s=n.pop();return nr(s)?En(n,(i,d)=>i.bind(g=>I.from(g.childNodes[d])),I.some(e)).bind(i=>Ae(i)&&(s<0||s>i.data.length)?I.none():I.some({node:i,offset:s})):I.none()},Q7=(e,o)=>MD(e,o.start).bind(({node:n,offset:s})=>MD(e,o.end).map(({node:i,offset:d})=>{const g=document.createRange();return g.setStart(n,s),g.setEnd(i,d),g})),hU=(e,o,n,s=!1)=>DD(e,o,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),E1=(e,o,n)=>{if(o&&e.isEmpty(o)&&!n(o)){const s=o.parentNode;e.remove(o,Ae(o.firstChild)&&di(o.firstChild.data)),E1(e,s,n)}},Lp=(e,o,n,s=!0)=>{const i=o.startContainer.parentNode,d=o.endContainer.parentNode;o.deleteContents(),s&&!n(o.startContainer)&&(Ae(o.startContainer)&&o.startContainer.data.length===0&&e.remove(o.startContainer),Ae(o.endContainer)&&o.endContainer.data.length===0&&e.remove(o.endContainer),E1(e,i,n),i!==d&&E1(e,d,n))},AD=(e,o)=>I.from(e.dom.getParent(o.startContainer,e.dom.isBlock)),RD=(e,o,n)=>{const s=e.dynamicPatternsLookup({text:n,block:o});return{...e,blockPatterns:Ib(s).concat(e.blockPatterns),inlinePatterns:x0(s).concat(e.inlinePatterns)}},J7=(e,o,n,s)=>{const i=e.createRng();return i.setStart(o,0),i.setEnd(n,s),i.toString()},pU=e=>/^\s[^\s]/.test(e),eN=(e,o,n)=>{PB(o,0,o).each(s=>{const i=s.container;zB(i,n.start.length,o).each(f=>{const y=e.createRng();y.setStart(i,0),y.setEnd(f.container,f.offset),Lp(e,y,k=>k===o)});const d=X.fromDom(i),g=Vi(d);pU(g)&&ys(d,g.slice(1))})},fU=(e,o)=>{const n=e.dom,s=o.pattern,i=Q7(n.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,f)=>{const y=f.get(g);return Oo(y)&&xn(y).exists(k=>At(k,"block"))};return AD(e,i).each(g=>{s.type==="block-format"?d(s.format,e.formatter)&&e.undoManager.transact(()=>{eN(e.dom,g,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{eN(e.dom,g,s),e.execCommand(s.cmd,!1,s.value)})}),!0},tN=e=>Yo(e,(o,n)=>n.start.length-o.start.length),vU=(e,o)=>{const n=tN(e),s=o.replace(jn," ");return On(n,i=>o.indexOf(i.start)===0||s.indexOf(i.start)===0)},oN=(e,o,n,s)=>{var i;const d=e.dom,g=Hs(e);if(!d.is(o,g))return[];const f=(i=o.textContent)!==null&&i!==void 0?i:"";return vU(n.blockPatterns,f).map(y=>ve.trim(f).length===y.start.length?[]:[{pattern:y,range:DD(d,d.getRoot(),o,0,o,0,s)}]).getOr([])},bU=(e,o)=>{if(o.length===0)return;const n=e.selection.getBookmark();me(o,s=>fU(e,s)),e.selection.moveToBookmark(n)},nN=(e,o)=>e.create("span",{"data-mce-type":"bookmark",id:o}),q4=(e,o)=>{const n=e.createRng();return n.setStartAfter(o.start),n.setEndBefore(o.end),n},rN=(e,o,n)=>{const s=Q7(e.getRoot(),n).getOrDie("Unable to resolve path range"),i=s.startContainer,d=s.endContainer,g=s.endOffset===0?d:d.splitText(s.endOffset),f=s.startOffset===0?i:i.splitText(s.startOffset),y=f.parentNode,k=g.parentNode;return{prefix:o,end:k.insertBefore(nN(e,o+"-end"),g),start:y.insertBefore(nN(e,o+"-start"),f)}},sN=(e,o,n)=>{E1(e,e.get(o.prefix+"-end"),n),E1(e,e.get(o.prefix+"-start"),n)},BD=e=>e.start.length===0,yU=e=>(o,n)=>{const s=o.data.substring(0,n),i=s.lastIndexOf(e.charAt(e.length-1)),d=s.lastIndexOf(e);return d!==-1?d+e.length:i!==-1?i+1:-1},aN=(e,o,n,s)=>{const i=o.start;return iT(e,s.container,s.offset,yU(i),n).bind(d=>{var g,f;const y=(f=(g=n.textContent)===null||g===void 0?void 0:g.indexOf(i))!==null&&f!==void 0?f:-1;if(y!==-1&&d.offset>=y+i.length){const k=e.createRng();return k.setStart(d.container,d.offset-i.length),k.setEnd(d.container,d.offset),I.some(k)}else{const k=d.offset-i.length;return aT(d.container,k,n).map(D=>{const L=e.createRng();return L.setStart(D.container,D.offset),L.setEnd(d.container,d.offset),L}).filter(D=>D.toString()===i).orThunk(()=>aN(e,o,n,pu(d.container,0)))}})},xU=(e,o,n,s,i,d=!1)=>{if(o.start.length===0&&!d){const g=e.createRng();return g.setStart(n,s),g.setEnd(n,s),I.some(g)}return sT(n,s,i).bind(g=>aN(e,o,i,g).bind(f=>{var y;return d&&(f.endContainer===g.container&&f.endOffset===g.offset||g.offset===0&&((y=f.endContainer.textContent)===null||y===void 0?void 0:y.length)===f.endOffset)?I.none():I.some(f)}))},iN=(e,o,n,s)=>{const i=e.dom,d=i.getRoot(),g=n.pattern,f=n.position.container,y=n.position.offset;return aT(f,y-n.pattern.end.length,o).bind(k=>{const D=DD(i,d,k.container,k.offset,f,y,s);if(BD(g))return I.some({matches:[{pattern:g,startRng:D,endRng:D}],position:k});{const L=Pv(e,n.remainingPatterns,k.container,k.offset,o,s),P=L.getOr({matches:[],position:k}),j=P.position;return xU(i,g,j.container,j.offset,o,L.isNone()).map($=>{const Z=hU(i,d,$,s);return{matches:P.matches.concat([{pattern:g,startRng:Z,endRng:D}]),position:pu($.startContainer,$.startOffset)}})}})},Pv=(e,o,n,s,i,d)=>{const g=e.dom;return sT(n,s,g.getRoot()).bind(f=>{const y=J7(g,i,n,s);for(let k=0;k<o.length;k++){const D=o[k];if(!Su(y,D.end))continue;const L=o.slice();L.splice(k,1);const P=iN(e,i,{pattern:D,remainingPatterns:L,position:f},d);if(P.isNone()&&s>0)return Pv(e,o,n,s-1,i,d);if(P.isSome())return P}return I.none()})},ND=(e,o,n)=>{e.selection.setRng(n),o.type==="inline-format"?me(o.format,s=>{e.formatter.apply(s)}):e.execCommand(o.cmd,!1,o.value)},lN=(e,o,n,s)=>{const i=q4(e.dom,n);Lp(e.dom,i,s),ND(e,o,i)},CU=(e,o,n,s,i)=>{const d=e.dom,g=q4(d,s),f=q4(d,n);Lp(d,f,i),Lp(d,g,i);const y={prefix:n.prefix,start:n.end,end:s.start},k=q4(d,y);ND(e,o,k)},wU=(e,o)=>{const n=qu("mce_textpattern"),s=ml(o,(i,d)=>{const g=rN(e,n+`_end${i.length}`,d.endRng);return i.concat([{...d,endMarker:g}])},[]);return ml(s,(i,d)=>{const g=s.length-i.length-1,f=BD(d.pattern)?d.endMarker:rN(e,n+`_start${g}`,d.startRng);return i.concat([{...d,startMarker:f}])},[])},SU=e=>Yo(e,(o,n)=>n.end.length-o.end.length),cN=(e,o)=>{const n=hr(e,s=>nn(o,i=>s.pattern.start===i.pattern.start&&s.pattern.end===i.pattern.end));return e.length===o.length?n?e:o:e.length>o.length?e:o},LD=(e,o,n,s,i,d)=>{const g=Pv(e,i.inlinePatterns,n,s,o,d).fold(()=>[],y=>y.matches),f=Pv(e,SU(i.inlinePatterns),n,s,o,d).fold(()=>[],y=>y.matches);return cN(g,f)},dN=(e,o)=>{if(o.length===0)return;const n=e.dom,s=e.selection.getBookmark(),i=wU(n,o);me(i,d=>{const g=n.getParent(d.startMarker.start,n.isBlock),f=y=>y===g;BD(d.pattern)?lN(e,d.pattern,d.endMarker,f):CU(e,d.pattern,d.startMarker,d.endMarker,f),sN(n,d.endMarker,f),sN(n,d.startMarker,f)}),e.selection.moveToBookmark(s)},kU=(e,o)=>{const n=e.selection.getRng();return AD(e,n).map(s=>{var i;const d=Math.max(0,n.startOffset),g=RD(o,s,(i=s.textContent)!==null&&i!==void 0?i:""),f=LD(e,s,n.startContainer,d,g,!0),y=oN(e,s,g,!0);return y.length>0||f.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Xm(e),dN(e,f),bU(e,y);const k=e.selection.getRng(),D=sT(k.startContainer,k.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),D.each(L=>{const P=L.container;P.data.charAt(L.offset-1)===ef&&(P.deleteData(L.offset-1,1),E1(e.dom,P.parentNode,j=>j===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},HD=(e,o)=>{const n=e.selection.getRng();AD(e,n).map(s=>{const i=Math.max(0,n.startOffset-1),d=J7(e.dom,s,n.startContainer,i),g=RD(o,s,d),f=LD(e,s,n.startContainer,i,g,!1);f.length>0&&e.undoManager.transact(()=>{dN(e,f)})})},kx=(e,o,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],o))return!0;return!1},Y4=(e,o)=>kx(e,o,(n,s)=>n===s.keyCode&&!ht.modifierPressed(s)),Ug=(e,o)=>kx(e,o,(n,s)=>n.charCodeAt(0)===s.charCode),Q4=e=>{const o=[",",".",";",":","!","?"],n=[32],s=()=>We(l3(e),UC(e)),i=()=>u3(e);e.on("keydown",g=>{if(g.keyCode===13&&!ht.modifierPressed(g)&&e.selection.isCollapsed()){const f=s();(f.inlinePatterns.length>0||f.blockPatterns.length>0||i())&&kU(e,f)&&g.preventDefault()}},!0);const d=()=>{if(e.selection.isCollapsed()){const g=s();(g.inlinePatterns.length>0||i())&&HD(e,g)}};e.on("keyup",g=>{Y4(n,g)&&d()}),e.on("keypress",g=>{Ug(o,g)&&Ll.setEditorTimeout(e,d)})},zv=e=>{Q4(e)},uN=e=>{const o=ve.each,n=ht.BACKSPACE,s=ht.DELETE,i=e.dom,d=e.selection,g=e.parser,f=ae.browser,y=f.isFirefox(),k=f.isChromium()||f.isSafari(),D=ae.deviceType.isiPhone()||ae.deviceType.isiPad(),L=ae.os.isMacOS()||ae.os.isiOS(),P=(Rt,He)=>{try{e.getDoc().execCommand(Rt,!1,String(He))}catch{}},j=Rt=>Rt.isDefaultPrevented(),$=()=>{const Rt=yt=>{const Vt=i.create("body"),mn=yt.cloneContents();return Vt.appendChild(mn),d.serializer.serialize(Vt,{format:"html"})},He=yt=>{const Vt=Rt(yt),mn=i.createRng();mn.selectNode(e.getBody());const co=Rt(mn);return Vt===co};e.on("keydown",yt=>{const Vt=yt.keyCode;if(!j(yt)&&(Vt===s||Vt===n)&&e.selection.isEditable()){const mn=e.selection.isCollapsed(),co=e.getBody();if(mn&&!Hn(X.fromDom(co))||!mn&&!He(e.selection.getRng()))return;yt.preventDefault(),e.setContent(""),co.firstChild&&i.isBlock(co.firstChild)?e.selection.setCursorLocation(co.firstChild,0):e.selection.setCursorLocation(co,0),e.nodeChanged()}})},Z=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},U=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Rt=>{let He;if(Rt.target===e.getDoc().documentElement)if(He=d.getRng(),e.getBody().focus(),Rt.type==="mousedown"){if(ci(He.startContainer))return;d.placeCaretAt(Rt.clientX,Rt.clientY)}else d.setRng(He)})},re=()=>{e.on("keydown",Rt=>{if(!j(Rt)&&Rt.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(d.isCollapsed()&&d.getRng().startOffset===0){const He=d.getNode(),yt=He.previousSibling;if(He.nodeName==="HR"){i.remove(He),Rt.preventDefault();return}yt&&yt.nodeName&&yt.nodeName.toLowerCase()==="hr"&&(i.remove(yt),Rt.preventDefault())}}})},ie=()=>{Range.prototype.getClientRects||e.on("mousedown",Rt=>{if(!j(Rt)&&Rt.target.nodeName==="HTML"){const He=e.getBody();He.blur(),Ll.setEditorTimeout(e,()=>{He.focus()})}})},pe=()=>{const Rt=PC(e);e.on("click",He=>{const yt=He.target;/^(IMG|HR)$/.test(yt.nodeName)&&i.isEditable(yt)&&(He.preventDefault(),e.selection.select(yt),e.nodeChanged()),yt.nodeName==="A"&&i.hasClass(yt,Rt)&&yt.childNodes.length===0&&i.isEditable(yt.parentNode)&&(He.preventDefault(),d.select(yt))})},Se=()=>{const Rt=()=>{const yt=i.getAttribs(d.getStart().cloneNode(!1));return()=>{const Vt=d.getStart();Vt!==e.getBody()&&(i.setAttrib(Vt,"style",null),o(yt,mn=>{Vt.setAttributeNode(mn.cloneNode(!0))}))}},He=()=>!d.isCollapsed()&&i.getParent(d.getStart(),i.isBlock)!==i.getParent(d.getEnd(),i.isBlock);e.on("keypress",yt=>{let Vt;return!j(yt)&&(yt.keyCode===8||yt.keyCode===46)&&He()?(Vt=Rt(),e.getDoc().execCommand("delete",!1),Vt(),yt.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",yt=>{if(!j(yt)&&He()){const Vt=Rt();Ll.setEditorTimeout(e,()=>{Vt()})}})},je=()=>{e.on("keydown",Rt=>{if(!j(Rt)&&Rt.keyCode===n&&d.isCollapsed()&&d.getRng().startOffset===0){const He=d.getNode().previousSibling;if(He&&He.nodeName&&He.nodeName.toLowerCase()==="table")return Rt.preventDefault(),!1}return!0})},Ye=()=>{e.on("keydown",Rt=>{if(j(Rt)||Rt.keyCode!==ht.BACKSPACE)return;let He=d.getRng();const yt=He.startContainer,Vt=He.startOffset,mn=i.getRoot();let co=yt;if(!(!He.collapsed||Vt!==0)){for(;co.parentNode&&co.parentNode.firstChild===co&&co.parentNode!==mn;)co=co.parentNode;co.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,co),He=i.createRng(),He.setStart(yt,0),He.setEnd(yt,0),d.setRng(He))}})},Ve=()=>{const Rt=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),ug(e)||P("enableObjectResizing",!1)};Hh(e)||e.on("BeforeExecCommand mousedown",Rt)},Me=()=>{const Rt=()=>{o(i.select("a:not([data-mce-block])"),He=>{var yt;let Vt=He.parentNode;const mn=i.getRoot();if((Vt==null?void 0:Vt.lastChild)===He){for(;Vt&&!i.isBlock(Vt);){if(((yt=Vt.parentNode)===null||yt===void 0?void 0:yt.lastChild)!==Vt||Vt===mn)return;Vt=Vt.parentNode}i.add(Vt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",He=>{(He.type==="setcontent"||He.command==="mceInsertLink")&&Rt()})},we=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",Hs(e))})},ze=Rt=>{const He=Rt.getBody(),yt=Rt.selection.getRng();return yt.startContainer===yt.endContainer&&yt.startContainer===He&&yt.startOffset===0&&yt.endOffset===He.childNodes.length},lt=()=>{e.on("keyup focusin mouseup",Rt=>{!ht.modifierPressed(Rt)&&!ze(e)&&d.normalize()},!0)},ye=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},rt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},vt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Rt=>{let He;Rt.target.nodeName==="HTML"&&(He=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(He),e.selection.normalize(),e.nodeChanged())}))},to=()=>{L&&e.on("keydown",Rt=>{ht.metaKeyPressed(Rt)&&!Rt.shiftKey&&(Rt.keyCode===37||Rt.keyCode===39)&&(Rt.preventDefault(),e.selection.getSel().modify("move",Rt.keyCode===37?"backward":"forward","lineboundary"))})},So=()=>{e.on("click",Rt=>{let He=Rt.target;do if(He.tagName==="A"){Rt.preventDefault();return}while(He=He.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},zs=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Rt=>{Rt.preventDefault()})})},Ja=()=>{g.addNodeFilter("br",Rt=>{let He=Rt.length;for(;He--;)Rt[He].attr("class")==="Apple-interchange-newline"&&Rt[He].remove()})},ta=Be,xi=()=>{if(!y||e.removed)return!1;const Rt=e.selection.getSel();return!Rt||!Rt.rangeCount||Rt.rangeCount===0},Fo=()=>{k&&(U(),pe(),zs(),Z(),D&&(rt(),vt(),So())),y&&(ie(),Ve(),ye(),to())},Dc=()=>{e.on("drop",Rt=>{var He;const yt=(He=Rt.dataTransfer)===null||He===void 0?void 0:He.getData("text/html");J(yt)&&/^<img[^>]*>$/.test(yt)&&e.dispatch("dragend",new window.DragEvent("dragend",Rt))})},Gn=()=>{Ye(),$(),ae.windowsPhone||lt(),k&&(U(),pe(),we(),zs(),je(),Ja(),D?(rt(),vt(),So()):Z()),y&&(re(),ie(),Se(),Ve(),Me(),ye(),to(),je(),Dc())};return pm(e)?Fo():Gn(),{refreshContentEditable:ta,isHidden:xi}},ID=Kt.DOM,_U=(e,o)=>{const n=X.fromDom(e.getBody()),s=Hd(Ni(n)),i=X.fromTag("style");Dn(i,"type","text/css"),ao(i,X.fromText(o)),ao(s,i),e.on("remove",()=>{$o(i)})},mN=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,PD=e=>Uo(e,o=>Rn(o)===!1),J4=e=>{const o=e.options.get,n=e.editorUpload.blobCache;return PD({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_unsafe_embeds:o("convert_unsafe_embeds"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:mN(e),sandbox_iframes:o("sandbox_iframes"),sanitize:o("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},_x=e=>{const o=e.options.get;return PD({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},Hp=e=>{const o=e.options.get;return{...J4(e),..._x(e),...PD({remove_trailing_brs:o("remove_trailing_brs"),pad_empty_with_br:o("pad_empty_with_br"),url_converter:o("url_converter"),url_converter_scope:o("url_converter_scope"),element_format:o("element_format"),entities:o("entities"),entity_encoding:o("entity_encoding"),indent:o("indent"),indent_after:o("indent_after"),indent_before:o("indent_before")})}},O1=e=>{const o=g1(J4(e),e.schema);return o.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const i=e.dom,d="data-mce-"+s;let g=n.length;for(;g--;){const f=n[g];let y=f.attr(s);if(y&&!f.attr(d)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;s==="style"?(y=i.serializeStyle(i.parseStyle(y),f.name),y.length||(y=null),f.attr(d,y),f.attr(s,y)):s==="tabindex"?(f.attr(d,y),f.attr(s,null)):f.attr(d,e.convertURL(y,s,f.name))}}}),o.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const i=n[s],d=i.attr("type")||"no/type";d.indexOf("mce-")!==0&&i.attr("type","mce-"+d)}}),c3(e)&&o.addNodeFilter("#cdata",n=>{var s;let i=n.length;for(;i--;){const d=n[i];d.type=8,d.name="#comment",d.value="[CDATA["+e.dom.encode((s=d.value)!==null&&s!==void 0?s:"")+"]]"}}),o.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const i=e.schema.getNonEmptyElements();for(;s--;){const d=n[s];d.isEmpty(i)&&d.getAll("br").length===0&&d.append(new qa("br",1))}}),o},gN=e=>{const o=s3(e);o&&Ll.setEditorTimeout(e,()=>{let n;o===!0?n=e:n=e.editorManager.get(o),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},EU=e=>{const o=e.dom.getRoot();!e.inline&&(!Z0(e)||e.selection.getStart(!0)===o)&&Qs(o).each(n=>{const s=n.getNode(),i=_a(s)?Qs(s).getOr(n):n;e.selection.setRng(i.toRange())})},OU=e=>{e.bindPendingEventDelegates(),e.initialized=!0,I3(e),e.focus(!0),EU(e),e.nodeChanged({initial:!0});const o=n3(e);te(o)&&o.call(e,e),gN(e)},zD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,TU=(e,o,n)=>{const{pass:s,fail:i}=cr(o,g=>tinymce.Resource.has(PS(g))),d=[...s.map(g=>{const f=tinymce.Resource.get(PS(g));return J(f)?Promise.resolve(zD(e).loadRawCss(g,f)):Promise.resolve()}),zD(e).loadAll(i)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(n)])},hN=e=>{const o=zD(e),n=Xs(e),s=e.contentCSS,i=()=>{o.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},d=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let y="";ve.each(e.contentStyles,k=>{y+=k+`\r
`}),e.dom.addStyle(y)}const g=Promise.all(TU(e,s,n)).then(d).catch(d),f=NC(e);return f&&_U(e,f),g},DU=e=>{const o=e.getDoc(),n=e.getBody();ip(e),a3(e)||(o.body.spellcheck=!1,ID.setAttrib(n,"spellcheck","false")),e.quirks=uN(e),Ny(e);const s=Fb(e);s!==void 0&&(n.dir=s);const i=zC(e);i&&e.on("BeforeSetContent",d=>{ve.each(i,g=>{d.content=d.content.replace(g,f=>"<!--mce:protected "+escape(f)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",d=>{e.composing=d.type==="compositionstart"})},pN=e=>{pm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},FD=e=>{e.removed!==!0&&(pN(e),OU(e))},MU=e=>{let o=!1;const n=setTimeout(()=>{o||e.setProgressState(!0)},500);return()=>{clearTimeout(n),o=!0,e.setProgressState(!1)}},fN=e=>{const o=e.getElement();let n=e.getDoc();e.inline&&(ID.addClass(o,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=o,e.contentAreaContainer=o);const s=e.getBody();s.disabled=!0,e.readonly=Hh(e),e._editableRoot=gc(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&ID.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=az(e),e.schema=Jc(_x(e)),e.dom=Kt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:k0(e),referrerPolicy:Ar(e),onSetAttrib:g=>{e.dispatch("SetAttrib",g)},force_hex_color:p3(e)}),e.parser=O1(e),e.serializer=gu(Hp(e),e),e.selection=BR(e.dom,e.getWin(),e.serializer,e),e.annotator=ru(e),e.formatter=hu(e),e.undoManager=U2(e),e._nodeChangeDispatcher=new VV(e),e._selectionOverrides=mU(e),_F(e),MZ(e),vB(e),pm(e)||(HZ(e),zv(e));const i=FV(e);dB(e,i),i4(e),dO(e),DZ(e);const d=dP(e);DU(e),d.fold(()=>{const g=MU(e);hN(e).then(()=>{FD(e),g()})},g=>{e.setProgressState(!0),hN(e).then(()=>{g().then(f=>{e.setProgressState(!1),FD(e),GE(e)},f=>{e.notificationManager.open({type:"error",text:String(f)}),FD(e),GE(e)})})})},AU=at,VD=(e,o,n)=>qv(e,o,AU,n),ZD=Kt.DOM,RU=(e,o,n,s)=>{const i=X.fromTag("iframe");return s.each(d=>Dn(i,"tabindex",d)),Ai(i,n),Ai(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),Uc(i,"tox-edit-area__iframe"),i},vN=e=>{let o=Pb(e)+"<html><head>";Gi(e)!==e.documentBaseUrl&&(o+='<base href="'+e.documentBaseURI.getURI()+'" />'),o+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Vk(e),s=OC(e),i=e.translate(qd(e));return C0(e)&&(o+='<meta http-equiv="Content-Security-Policy" content="'+C0(e)+'" />'),o+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,o},BU=(e,o)=>{const n=e.translate("Rich Text Area"),s=Ri(X.fromDom(e.getElement()),"tabindex").bind(wr),i=RU(e.id,n,mc(e),s).dom;i.onload=()=>{i.onload=null,e.dispatch("load")},e.contentAreaContainer=o.iframeContainer,e.iframeElement=i,e.iframeHTML=vN(e),ZD.add(o.iframeContainer,i)},bN=e=>{const o=e.iframeElement,n=()=>{e.contentDocument=o.contentDocument,fN(e)};if(ty(e)||ae.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=VD(X.fromDom(o),"load",()=>{s.unbind(),n()});o.srcdoc=e.iframeHTML}},NU=(e,o)=>{BU(e,o),o.editorContainer&&(o.editorContainer.style.display=e.orgDisplay,e.hidden=ZD.isHidden(o.editorContainer)),e.getElement().style.display="none",ZD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,bN(e)},ek=Kt.DOM,LU=(e,o,n)=>{const s=Ev.get(n),i=Ev.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=ve.trim(n),s&&ve.inArray(o,n)===-1){if(e.plugins[n])return;try{const d=s(e,i)||{};e.plugins[n]=d,te(d.init)&&(d.init(e,i),o.push(n))}catch(d){Ov(e,n,d)}}},HU=e=>e.replace(/^\-/,""),IU=e=>{const o=[];me(hg(e),n=>{LU(e,o,HU(n))})},PU=e=>{const o=ve.trim(zb(e)),n=e.ui.registry.getAll().icons,s={...HS.get("default").icons,...HS.get(o).icons};ot(s,(i,d)=>{At(n,d)||e.ui.registry.addIcon(d,i)})},yN=e=>{const o=Lh(e);if(J(o)){const n=Sc.get(o);e.theme=n(e,Sc.urls[o])||{},te(e.theme.init)&&e.theme.init(e,Sc.urls[o]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},UD=e=>{const o=E0(e),n=_v.get(o);e.model=n(e,_v.urls[o])},xN=e=>{const o=e.theme.renderUI;return o?o():$D(e)},WD=e=>{const o=e.getElement(),n=Lh(e)(e,o);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:o.offsetHeight,n},CN=(e,o)=>({editorContainer:e,iframeContainer:o,api:{}}),zU=e=>{const o=ek.create("div");return ek.insertAfter(o,e),CN(o,o)},$D=e=>{const o=e.getElement();return e.inline?CN(null):zU(o)},FU=e=>{const o=e.getElement();return e.orgDisplay=o.style.display,J(Lh(e))?xN(e):te(Lh(e))?WD(e):$D(e)},VU=(e,o)=>{const n={show:I.from(o.show).getOr(Be),hide:I.from(o.hide).getOr(Be),isEnabled:I.from(o.isEnabled).getOr(at),setEnabled:s=>{e.mode.isReadOnly()||I.from(o.setEnabled).each(i=>i(s))}};e.ui={...e.ui,...n}},ZU=async e=>{e.dispatch("ScriptsLoaded"),PU(e),yN(e),UD(e),IU(e);const o=await FU(e);VU(e,I.from(o.api).getOr({})),e.editorContainer=o.editorContainer,YR(e),e.inline?fN(e):NU(e,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},Ip=Kt.DOM,jD=e=>e.charAt(0)==="-",UU=(e,o)=>{const n=RC(o),s=_0(o);if(!Dl.hasCode(n)&&n!=="en"){const i=sr(s)?s:`${o.editorManager.baseURL}/langs/${n}.js`;e.add(i).catch(()=>{nO(o,i,n)})}},WU=(e,o)=>{const n=Lh(e);if(J(n)&&!jD(n)&&!At(Sc.urls,n)){const s=qk(e),i=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${o}.js`;Sc.load(n,i).catch(()=>{jR(e,i,n)})}},$U=(e,o)=>{const n=E0(e);if(n!=="plugin"&&!At(_v.urls,n)){const s=Vb(e),i=J(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${o}.js`;_v.load(n,i).catch(()=>{GR(e,i,n)})}},jU=e=>I.from(tm(e)).filter(sr).map(o=>({url:o,name:I.none()})),wN=(e,o,n)=>I.from(o).filter(s=>sr(s)&&!HS.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:I.some(s)})),T1=(e,o,n)=>{const s=wN(o,"default",n),i=jU(o).orThunk(()=>wN(o,zb(o),""));me(Sr([s,i]),d=>{e.add(d.url).catch(()=>{oO(o,d.url,d.name.getOrUndefined())})})},GD=(e,o)=>{const n=(s,i)=>{Ev.load(s,i).catch(()=>{$R(e,i,s)})};ot(jb(e),(s,i)=>{n(i,s),e.options.set("plugins",hg(e).concat(i))}),me(hg(e),s=>{s=ve.trim(s),s&&!Ev.urls[s]&&!jD(s)&&n(s,`plugins/${s}/plugin${o}.js`)})},tk=e=>{const o=Lh(e);return!J(o)||Oe(Sc.get(o))},SN=e=>{const o=E0(e);return Oe(_v.get(o))},kN=(e,o)=>{const n=xs.ScriptLoader,s=()=>{!e.removed&&tk(e)&&SN(e)&&ZU(e)};WU(e,o),$U(e,o),UU(n,e),T1(n,e,o),GD(e,o),n.loadQueue().then(s,s)},_N=(e,o)=>uf.forElement(e,{contentCssCors:Ih(o),referrerPolicy:Ar(o)}),GU=e=>{const o=e.id;Dl.setCode(RC(e));const n=()=>{Ip.unbind(window,"ready",n),e.render()};if(!Gu.Event.domLoaded){Ip.bind(window,"ready",n);return}if(!e.getElement())return;const s=X.fromDom(e.getElement()),i=Vc(s);e.on("remove",()=>{ei(s.dom.attributes,g=>kr(s,g.name)),Ai(s,i)}),e.ui.styleSheetLoader=_N(s,e),Zb(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const d=e.getElement().form||Ip.getParent(o,"form");d&&(e.formElement=d,Ub(e)&&!Qv(e.getElement())&&(Ip.insertAfter(Ip.create("input",{type:"hidden",name:o}),o),e.hasHiddenInput=!0),e.formEventDelegate=g=>{e.dispatch(g.type,g)},Ip.bind(d,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Wb(e)&&!d.submit.nodeType&&!d.submit.length&&!d._mceOldSubmit&&(d._mceOldSubmit=d.submit,d.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),d._mceOldSubmit(d)))),e.windowManager=P2(e),e.notificationManager=WR(e),g3(e)&&e.on("GetContent",g=>{g.save&&(g.content=Ip.encode(g.content))}),gg(e)&&e.on("submit",()=>{e.initialized&&e.save()}),$b(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),kN(e,e.suffix)},KU=(e,o)=>{e._editableRoot!==o&&(e._editableRoot=o,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),V3(e,o))},XU=e=>e._editableRoot,qU=(e,o)=>({sections:Pe(e),options:Pe(o)}),Wg=Fa().deviceType,EN=Wg.isPhone(),ON=Wg.isTablet(),Ex=e=>{if(io(e))return[];{const o=Oo(e)?e:e.split(/[ ,]/),n=Bt(o,Ti);return Et(n,sr)}},ok=(e,o)=>{const n=_i(o,(s,i)=>It(e,i));return qU(n.t,n.f)},YU=(e,o,n={})=>{const s=e.sections(),i=Go(s,o).getOr({});return ve.extend({},n,i)},KD=(e,o)=>At(e.sections(),o),QU=(e,o)=>KD(e,o)?e.sections()[o]:{},TN=(e,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Go(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),JU=(e,o)=>{var n;const s=(n=o.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?ve.extend({},e.external_plugins,s):s},eW=(e,o)=>[...Ex(e),...Ex(o)],tW=(e,o,n,s)=>e&&KD(o,"mobile")?s:n,XD=(e,o,n,s)=>{const i=Ex(n.forced_plugins),d=Ex(s.plugins),g=QU(o,"mobile"),f=g.plugins?Ex(g.plugins):d,y=tW(e,o,d,f),k=eW(i,y);return ve.extend(s,{forced_plugins:i,plugins:k})},oW=(e,o)=>e&&KD(o,"mobile"),nW=(e,o,n,s,i)=>{var d;const g=e?{mobile:TN((d=i.mobile)!==null&&d!==void 0?d:{},o)}:{},f=ok(["mobile"],y4(g,i)),y=ve.extend(n,s,f.options(),oW(e,f)?YU(f,"mobile"):{},{external_plugins:JU(s,f.options())});return XD(e,f,s,y)},Yr=(e,o)=>nW(EN||ON,EN,o,e,o),rW=(e,o)=>A2(e,o),sW=e=>{const o=(s,i)=>{e.formatter.toggle(s,i),e.nodeChanged()},n=s=>()=>{me("left,center,right,justify".split(","),i=>{s!==i&&e.formatter.remove("align"+i)}),s!=="none"&&o("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},qD=e=>{const o=n=>()=>{const s=e.selection,i=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return nn(i,d=>Oe(e.formatter.matchNode(d,n)))};e.editorCommands.addCommands({JustifyLeft:o("alignleft"),JustifyCenter:o("aligncenter"),JustifyRight:o("alignright"),JustifyFull:o("alignjustify")},"state")},DN=e=>{sW(e),qD(e)},YD=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":o=>{const n=e.getDoc();let s;try{n.execCommand(o)}catch{s=!0}if(o==="paste"&&!n.queryCommandEnabled(o)&&(s=!0),s||!n.queryCommandSupported(o)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ae.os.isMacOS()||ae.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},aW=(e,o,n,s)=>{const i=X.fromDom(e.getRoot());return pn(i,Ce.fromRangeStart(o),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),Lr(i,Ce.fromRangeEnd(o),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},iW=e=>{if(typeof e!="string"){const o=ve.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:o}}return{content:e,details:{}}},lW=(e,o)=>{const n=e.selection,s=e.dom;return/^ | $/.test(o)?aW(s,n.getRng(),o,e.schema):o},nk=(e,o)=>{if(e.selection.isEditable()){const{content:n,details:s}=iW(o);ME(e,{...s,content:lW(e,n),format:"html",set:!1,selection:!0}).each(i=>{const d=wP(e,i.content,s);AE(e,d,i),e.addVisual()})}},cW=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const o=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(o)},insertImage:(o,n,s)=>{nk(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(o,n,s)=>{nk(e,e.dom.encode(s))},insertHTML:(o,n,s)=>{nk(e,s)},mceInsertContent:(o,n,s)=>{nk(e,s)},mceSetContent:(o,n,s)=>{e.setContent(s)},mceReplaceContent:(o,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Kb(e))}})},dW={"font-size":"size","font-family":"face"},uW=Bm("font"),mW=(e,o,n)=>{const s=d=>To(d,e).orThunk(()=>uW(d)?Go(dW,e).bind(g=>Ri(d,g)):I.none()),i=d=>yo(X.fromDom(o),d);return iS(X.fromDom(n),d=>s(d),i)},Fv=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),vu=(e,o)=>I.from(Kt.DOM.getStyle(o,e,!0)),MN=e=>(o,n)=>I.from(n).map(X.fromDom).filter(Sa).bind(s=>mW(e,o,s.dom).or(vu(e,s.dom))).getOr(""),gW=MN("font-size"),hW=E(Fv,MN("font-family")),pW=e=>Qs(e.getBody()).bind(o=>{const n=o.container();return I.from(Ae(n)?n.parentNode:n)}),fW=e=>I.from(e.selection.getRng()).bind(o=>{const n=e.getBody();return o.startContainer===n&&o.startOffset===0?I.none():I.from(e.selection.getStart(!0))}),vW=(e,o)=>fW(e).orThunk(Le(pW,e)).map(X.fromDom).filter(Sa).bind(o),QD=(e,o)=>vW(e,ro(I.some,o)),AN=(e,o)=>{if(/^[0-9.]+$/.test(o)){const n=parseInt(o,10);if(n>=1&&n<=7){const s=m3(e),i=B0(e);return i.length>0?i[n-1]||o:s[n-1]||o}else return o}else return o},bW=e=>{const o=e.split(/\s*,\s*/);return Bt(o,n=>n.indexOf(" ")!==-1&&!(Bo(n,'"')||Bo(n,"'"))?`'${n}'`:n).join(",")},yW=(e,o)=>{const n=AN(e,o);e.formatter.toggle("fontname",{value:bW(n)}),e.nodeChanged()},xW=e=>QD(e,o=>hW(e.getBody(),o.dom)).getOr(""),CW=(e,o)=>{e.formatter.toggle("fontsize",{value:AN(e,o)}),e.nodeChanged()},wW=e=>QD(e,o=>gW(e.getBody(),o.dom)).getOr(""),SW=e=>QD(e,o=>{const n=X.fromDom(e.getBody()),s=iS(o,d=>To(d,"line-height"),Le(yo,n)),i=()=>{const d=parseFloat(Hi(o,"line-height")),g=parseFloat(Hi(o,"font-size"));return String(d/g)};return s.getOrThunk(i)}).getOr(""),kW=(e,o)=>{e.formatter.toggle("lineheight",{value:String(o)}),e.nodeChanged()},_W=e=>{const o=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{o(n)},"ForeColor,HiliteColor":(n,s,i)=>{o(n,{value:i})},BackColor:(n,s,i)=>{o("hilitecolor",{value:i})},FontName:(n,s,i)=>{yW(e,i)},FontSize:(n,s,i)=>{CW(e,i)},LineHeight:(n,s,i)=>{kW(e,i)},Lang:(n,s,i)=>{var d;o(n,{value:i.code,customValue:(d=i.customCode)!==null&&d!==void 0?d:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(n,s,i)=>{o(J(i)?i:"p")},mceToggleFormat:(n,s,i)=>{o(i)}})},EW=e=>{const o=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>o(n),mceBlockQuote:()=>o("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>xW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>wW(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>SW(e))},OW=e=>{_W(e),EW(e)},TW=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},DW=e=>{e.editorCommands.addCommands({Indent:()=>{aB(e)},Outdent:()=>{iB(e)}}),e.editorCommands.addCommands({Outdent:()=>nB(e)},"state")},MW=e=>{const o=(n,s,i)=>{const d=J(i)?{href:i}:i,g=e.dom.getParent(e.selection.getNode(),"a");qe(d)&&J(d.href)&&(d.href=d.href.replace(/ /g,"%20"),(!g||!d.href)&&e.formatter.remove("link"),d.href&&e.formatter.apply("link",d,g))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:o,createLink:o})},AW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{e.getDoc().execCommand(o);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(i)}}}})},RW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(o==="insertunorderedlist"&&n.tagName==="UL"||o==="insertorderedlist"&&n.tagName==="OL")}},"state")},BW=e=>{AW(e),RW(e)},NW=(e,o,n,s)=>{const i=e.dom,d=f=>i.isBlock(f)&&f.parentElement===n,g=d(o)?o:i.getParent(s,d,n);return I.from(g).map(X.fromDom)},RN=(e,o)=>{const n=e.dom,s=e.selection.getRng(),i=o?e.selection.getStart():e.selection.getEnd(),d=o?s.startContainer:s.endContainer,g=cx(n,d);if(!g||!g.isContentEditable)return;const f=o?Ur:sc,y=Hs(e);NW(e,i,g,d).each(k=>{const D=D8(e,d,k.dom,g,!1,y);f(k,X.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),lx(e,"insertParagraph")})},LW=e=>RN(e,!0),HW=e=>RN(e,!1),IW=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{LW(e)},InsertNewBlockAfter:()=>{HW(e)}})},PW=e=>{e.editorCommands.addCommands({insertParagraph:()=>{z4(VT,e)},mceInsertNewLine:(o,n,s)=>{j8(e,s)},InsertLineBreak:(o,n,s)=>{z4(F8,e)}})},zW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(o,n,s)=>{let i=0;e.dom.getParent(e.selection.getNode(),d=>pt(d)&&i++===s?(e.selection.select(d),!1):!0,e.getBody())},mceSelectNode:(o,n,s)=>{e.selection.select(s)},selectAll:()=>{const o=e.dom.getParent(e.selection.getStart(),Ua);if(o){const n=e.dom.createRng();n.selectNodeContents(o),e.selection.setRng(n)}}})},BN=e=>{e.editorCommands.addCommands({mceRemoveNode:(o,n,s)=>{const i=s??e.selection.getNode();if(i!==e.getBody()){const d=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(d)}},mcePrint:()=>{e.getWin().print()},mceFocus:(o,n,s)=>{T5(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},FW=e=>{DN(e),YD(e),TW(e),zW(e),cW(e),MW(e),DW(e),IW(e),PW(e),BW(e),OW(e),BN(e)},VW=["toggleview"],NN=e=>It(VW,e.toLowerCase());class LN{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,n=!1,s,i){const d=this.editor,g=o.toLowerCase(),f=i==null?void 0:i.skip_focus;if(d.removed||(g!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(g)&&!f?d.focus():pL(d)),d.dispatch("BeforeExecCommand",{command:o,ui:n,value:s}).isDefaultPrevented()))return!1;const y=this.commands.exec[g];return te(y)?(y(g,n,s),d.dispatch("ExecCommand",{command:o,ui:n,value:s}),!0):!1}queryCommandState(o){if(!NN(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=o.toLowerCase(),s=this.commands.state[n];return te(s)?s(n):!1}queryCommandValue(o){if(!NN(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=o.toLowerCase(),s=this.commands.value[n];return te(s)?s(n):""}addCommands(o,n="exec"){const s=this.commands;ot(o,(i,d)=>{me(d.toLowerCase().split(","),g=>{s[n][g]=i})})}addCommand(o,n,s){const i=o.toLowerCase();this.commands.exec[i]=(d,g,f)=>n.call(s??this.editor,g,f)}queryCommandSupported(o){const n=o.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(o,n,s){this.commands.state[o.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(o,n,s){this.commands.value[o.toLowerCase()]=()=>n.call(s??this.editor)}}const D1="data-mce-contenteditable",ZW=(e,o,n)=>{Pm(e,o)&&!n?Tu(e,o):n&&Uc(e,o)},JD=(e,o,n)=>{try{e.getDoc().execCommand(o,!1,String(n))}catch{}},rk=(e,o)=>{e.dom.contentEditable=o?"true":"false"},HN=e=>{me(rn(e,'*[contenteditable="true"]'),o=>{Dn(o,D1,"true"),rk(o,!1)})},UW=e=>{me(rn(e,`*[${D1}="true"]`),o=>{kr(o,D1),rk(o,!0)})},WW=e=>{I.from(e.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})},$W=e=>{e.selection.setRng(e.selection.getRng())},jW=(e,o)=>{const n=X.fromDom(e.getBody());ZW(n,"mce-content-readonly",o),o?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),WW(e),e.readonly=!0,rk(n,!1),HN(n)):(e.readonly=!1,e.hasEditableRoot()&&rk(n,!0),UW(n),JD(e,"StyleWithCSS",!1),JD(e,"enableInlineTableEditing",!1),JD(e,"enableObjectResizing",!1),a_(e)&&e.focus(),$W(e),e.nodeChanged())},M1=e=>e.readonly,IN=e=>{e.parser.addAttributeFilter("contenteditable",o=>{M1(e)&&me(o,n=>{n.attr(D1,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(D1,o=>{M1(e)&&me(o,n=>{n.attr("contenteditable",n.attr(D1))})}),e.serializer.addTempAttr(D1)},GW=e=>{e.serializer?IN(e):e.on("PreInit",()=>{IN(e)})},KW=e=>e.type==="click",PN=["copy"],zN=e=>It(PN,e.type),XW=(e,o)=>Li(o,"a",n=>yo(n,X.fromDom(e.getBody()))).bind(n=>Ri(n,"href")),FN=(e,o)=>{if(KW(o)&&!ht.metaKeyPressed(o)){const n=X.fromDom(o.target);XW(e,n).each(s=>{if(o.preventDefault(),/^#/.test(s)){const i=e.dom.select(`${s},[name="${wu(s,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else zN(o)&&e.dispatch(o.type,o)},qW=e=>{e.on("ShowCaret",o=>{M1(e)&&o.preventDefault()}),e.on("ObjectSelected",o=>{M1(e)&&o.preventDefault()})},YW=ve.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class e5{static isNative(o){return!!YW[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ie}fire(o,n){return this.dispatch(o,n)}dispatch(o,n){const s=o.toLowerCase(),i=s0(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const d=this.bindings[s];if(d)for(let g=0,f=d.length;g<f;g++){const y=d[g];if(!y.removed){if(y.once&&this.off(s,y.func),i.isImmediatePropagationStopped())return i;if(y.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(o,n,s,i){if(n===!1&&(n=Ie),n){const d={func:n,removed:!1};i&&ve.extend(d,i);const g=o.toLowerCase().split(" ");let f=g.length;for(;f--;){const y=g[f];let k=this.bindings[y];k||(k=[],this.toggleEvent(y,!0)),s?k=[d,...k]:k=[...k,d],this.bindings[y]=k}}return this}off(o,n){if(o){const s=o.toLowerCase().split(" ");let i=s.length;for(;i--;){const d=s[i];let g=this.bindings[d];if(!d)return ot(this.bindings,(f,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(g){if(!n)g.length=0;else{const f=cr(g,y=>y.func===n);g=f.fail,this.bindings[d]=g,me(f.pass,y=>{y.removed=!0})}g.length||(this.toggleEvent(o,!1),delete this.bindings[d])}}}else ot(this.bindings,(s,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,n,s){return this.on(o,n,s,{once:!0})}has(o){o=o.toLowerCase();const n=this.bindings[o];return!(!n||n.length===0)}}const Ox=e=>(e._eventDispatcher||(e._eventDispatcher=new e5({scope:e,toggleEvent:(o,n)=>{e5.isNative(o)&&e.toggleNativeEvent&&e.toggleNativeEvent(o,n)}})),e._eventDispatcher),t5={fire(e,o,n){return this.dispatch(e,o,n)},dispatch(e,o,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return s0(e.toLowerCase(),o??{},s);const i=Ox(s).dispatch(e,o);if(n!==!1&&s.parent){let d=s.parent();for(;d&&!i.isPropagationStopped();)d.dispatch(e,i,!1),d=d.parent?d.parent():void 0}return i},on(e,o,n){return Ox(this).on(e,o,n)},off(e,o){return Ox(this).off(e,o)},once(e,o){return Ox(this).once(e,o)},hasEventListeners(e){return Ox(this).has(e)}},sk=Kt.DOM;let $g;const Vv=(e,o)=>{if(o==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return e.getDoc().documentElement;const n=HC(e);return n?(e.eventRoot||(e.eventRoot=sk.select(n)[0]),e.eventRoot):e.getBody()},QW=e=>!e.hidden&&!M1(e),o5=(e,o,n)=>{QW(e)?e.dispatch(o,n):M1(e)&&FN(e,n)},VN=(e,o)=>{if(e.delegates||(e.delegates={}),e.delegates[o]||e.removed)return;const n=Vv(e,o);if(HC(e)){if($g||($g={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||$g&&(ot($g,(i,d)=>{e.dom.unbind(Vv(e,d))}),$g=null)})),$g[o])return;const s=i=>{const d=i.target,g=e.editorManager.get();let f=g.length;for(;f--;){const y=g[f].getBody();(y===d||sk.isChildOf(d,y))&&o5(g[f],o,i)}};$g[o]=s,sk.bind(n,o,s)}else{const s=i=>{o5(e,o,i)};sk.bind(n,o,s),e.delegates[o]=s}},ZN={...t5,bindPendingEventDelegates(){const e=this;ve.each(e._pendingNativeEvents,o=>{VN(e,o)})},toggleNativeEvent(e,o){const n=this;e==="focus"||e==="blur"||n.removed||(o?n.initialized?VN(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Vv(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,o=e.getBody(),n=e.dom;e.delegates&&(ot(e.delegates,(s,i)=>{e.dom.unbind(Vv(e,i),i,s)}),delete e.delegates),!e.inline&&o&&n&&(o.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(o),n.unbind(e.getContainer()))}},JW=e=>J(e)?{value:e.split(/[ ,]/),valid:!0}:Ge(e,J)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},e$=e=>{const o=(()=>{switch(e){case"array":return Oo;case"boolean":return so;case"function":return te;case"number":return nr;case"object":return qe;case"string":return J;case"string[]":return JW;case"object[]":return n=>Ge(n,qe);case"regexp":return n=>_n(n,RegExp);default:return at}})();return n=>n5(n,o,`The value must be a ${e}.`)},t$=e=>J(e.processor),UN=(e,o)=>{const n=Yl(o.message)?"":`. ${o.message}`;return e+n},WN=e=>e.valid,n5=(e,o,n="")=>{const s=o(e);return so(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},o$=(e,o,n)=>{if(!Rn(o)){const s=n5(o,n);if(WN(s))return s.value;console.error(UN(`Invalid default value passed for the "${e}" option`,s))}},n$=(e,o)=>{const n={},s={},i=(f,y,k)=>{const D=n5(y,k);return WN(D)?(s[f]=D.value,!0):(console.warn(UN(`Invalid value passed for the ${f} option`,D)),!1)},d=(f,y)=>{const k=t$(y)?e$(y.processor):y.processor,D=o$(f,y.default,k);n[f]={...y,default:D,processor:k},Go(s,f).orThunk(()=>Go(o,f)).each(L=>i(f,L,k))},g=f=>At(n,f);return{register:d,isRegistered:g,get:f=>Go(s,f).orThunk(()=>Go(n,f).map(y=>y.default)).getOrUndefined(),set:(f,y)=>{if(g(f)){const k=n[f];return k.immutable?(console.error(`"${f}" is an immutable option and cannot be updated`),!1):i(f,y,k.processor)}else return console.warn(`"${f}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:f=>{const y=g(f);return y&&delete s[f],y},isSet:f=>At(s,f)}},r5=["design","readonly"],$N=(e,o,n,s)=>{const i=n[o.get()],d=n[s];try{d.activate()}catch(g){console.error(`problem while activating editor mode ${s}:`,g);return}i.deactivate(),i.editorReadOnly!==d.editorReadOnly&&jW(e,d.editorReadOnly),o.set(s),H3(e,s)},r$=(e,o,n,s)=>{if(s!==n.get()){if(!At(o,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?$N(e,n,o,s):e.on("init",()=>$N(e,n,o,s))}},s$=(e,o,n)=>{if(It(r5,o))throw new Error(`Cannot override default mode ${o}`);return{...e,[o]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${o}:`,s)}}}}},a$=e=>{const o=Tr("design"),n=Tr({design:{activate:Be,deactivate:Be,editorReadOnly:!1},readonly:{activate:Be,deactivate:Be,editorReadOnly:!0}});return GW(e),qW(e),{isReadOnly:()=>M1(e),set:s=>r$(e,n.get(),o,s),get:()=>o.get(),register:(s,i)=>{n.set(s$(n.get(),s,i))}}},s5=ve.each,ak=ve.explode,A1={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},jN=ve.makeMap("alt,ctrl,shift,meta,access"),i$=e=>e in jN,l$=e=>{const o={},n=ae.os.isMacOS()||ae.os.isiOS();s5(ak(e.toLowerCase(),"+"),d=>{i$(d)?o[d]=!0:/^[0-9]{2,}$/.test(d)?o.keyCode=parseInt(d,10):(o.charCode=d.charCodeAt(0),o.keyCode=A1[d]||d.toUpperCase().charCodeAt(0))});const s=[o.keyCode];let i;for(i in jN)o[i]?s.push(i):o[i]=!1;return o.id=s.join(","),o.access&&(o.alt=!0,n?o.ctrl=!0:o.shift=!0),o.meta&&(n?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class GN{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const n=this;o.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(s5(n.shortcuts,i=>{n.matchShortcut(s,i)&&(n.pendingPatterns=i.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(i))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(o,n,s,i){const d=this,g=d.normalizeCommandFunc(s);return s5(ak(ve.trim(o)),f=>{const y=d.createShortcut(f,n,g,i);d.shortcuts[y.id]=y}),!0}remove(o){const n=this.createShortcut(o);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(o){const n=this,s=o;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:ve.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(o,n,s,i){const d=ve.map(ak(o,">"),l$);return d[d.length-1]=ve.extend(d[d.length-1],{func:s,scope:i||this.editor}),ve.extend(d[0],{desc:this.editor.translate(n),subpatterns:d.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return o.type==="keydown"&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,n){return!n||n.ctrl!==o.ctrlKey||n.meta!==o.metaKey||n.alt!==o.altKey||n.shift!==o.shiftKey?!1:o.keyCode===n.keyCode||o.charCode&&o.charCode===n.charCode?(o.preventDefault(),!0):!1}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const il=()=>{const e={},o={},n={},s={},i={},d={},g={},f={},y=(D,L)=>(P,j)=>{D[P.toLowerCase()]={...j,type:L}},k=(D,L)=>s[D.toLowerCase()]=L;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(o,"menuitem"),addNestedMenuItem:y(o,"nestedmenuitem"),addToggleMenuItem:y(o,"togglemenuitem"),addAutocompleter:y(n,"autocompleter"),addContextMenu:y(i,"contextmenu"),addContextToolbar:y(d,"contexttoolbar"),addContextForm:y(d,"contextform"),addSidebar:y(g,"sidebar"),addView:y(f,"views"),addIcon:k,getAll:()=>({buttons:e,menuItems:o,icons:s,popups:n,contextMenus:i,contextToolbars:d,sidebars:g,views:f})}},KN=()=>{const e=il();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},R1=Kt.DOM,XN=ve.extend,c$=ve.each;class ik{constructor(o,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,XN(this,ZN);const i=this;this.id=o,this.hidden=!1;const d=Yr(s.defaultOptions,n);this.options=n$(i,d),rd(i);const g=this.options.get;g("deprecation_warnings")&&FR(n,d);const f=g("suffix");f&&(s.suffix=f),this.suffix=s.suffix;const y=g("base_url");y&&s._setBaseUrl(y),this.baseUri=s.baseURI;const k=Ar(i);k&&(xs.ScriptLoader._setReferrerPolicy(k),Kt.DOM.styleSheetLoader._setReferrerPolicy(k));const D=Ih(i);Oe(D)&&Kt.DOM.styleSheetLoader._setContentCssCors(D),Gs.languageLoad=g("language_load"),Gs.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new Cc(Gi(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Zb(i),this.hasVisual=Xd(i),this.shortcuts=new GN(this),this.editorCommands=new LN(this),FW(this);const L=g("cache_suffix");L&&(ae.cacheSuffix=L.replace(/^[\?\&]+/,"")),this.ui={registry:KN(),styleSheetLoader:void 0,show:Be,hide:Be,setEnabled:Be,isEnabled:at},this.mode=a$(i),s.dispatch("SetupEditor",{editor:this});const P=T0(i);te(P)&&P.call(i,i)}render(){GU(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return Jf(this)}translate(o){return Dl.translate(o)}getParam(o,n,s){const i=this.options;return i.isRegistered(o)||(Oe(s)?i.register(o,{processor:s,default:n}):i.register(o,{processor:at,default:n})),!i.isSet(o)&&!Rn(n)?n:i.get(o)}hasPlugin(o,n){return It(hg(this),o)?n?Ev.get(o)!==void 0:!0:!1}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,n,s){this.editorCommands.addCommand(o,n,s)}addQueryStateHandler(o,n,s){this.editorCommands.addQueryStateHandler(o,n,s)}addQueryValueHandler(o,n,s){this.editorCommands.addQueryValueHandler(o,n,s)}addShortcut(o,n,s,i){this.shortcuts.add(o,n,s,i)}execCommand(o,n,s,i){return this.editorCommands.execCommand(o,n,s,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":(R1.show(o.getContainer()),R1.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):(R1.hide(o.getContainer()),R1.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,n){this.dispatch("ProgressState",{state:o,time:n})}load(o={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const i={...o,load:!0},d=Qv(s)?s.value:s.innerHTML,g=n.setContent(d,i);return i.no_events||n.dispatch("LoadContent",{...i,element:s}),g}else return""}save(o={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const i={...o,save:!0,element:s};let d=n.getContent(i);const g={...i,content:d};if(g.no_events||n.dispatch("SaveContent",g),g.format==="raw"&&n.dispatch("RawSaveContent",g),d=g.content,Qv(s))s.value=d;else{(o.is_removing||!n.inline)&&(s.innerHTML=d);const f=R1.getParent(n.id,"form");f&&c$(f.elements,y=>y.name===n.id?(y.value=d,!1):!0)}return g.element=i.element=s=null,g.set_dirty!==!1&&n.setDirty(!1),d}setContent(o,n){return YE(this,o,n)}getContent(o){return qE(this,o)}insertContent(o,n){n&&(o=XN({content:o},n)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){o===void 0?YE(this,this.startContent,{format:"raw"}):YE(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const n=!this.isNotDirty;this.isNotDirty=!o,o&&o!==n&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||R1.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=R1.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const n=o.iframeElement;n&&(o.contentWindow=n.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const n=o.getWin();n&&(o.contentDocument=n.document)}return o.contentDocument}getBody(){var o,n;const s=this.getDoc();return(n=(o=this.bodyElement)!==null&&o!==void 0?o:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(o,n,s){const i=this,d=i.options.get,g=r3(i);if(te(g))return g.call(i,o,s,!0,n);if(!d("convert_urls")||s==="link"||qe(s)&&s.nodeName==="LINK"||o.indexOf("file:")===0||o.length===0)return o;const f=new Cc(o);return f.protocol!=="http"&&f.protocol!=="https"&&f.protocol!==""?o:d("relative_urls")?i.documentBaseURI.toRelative(o):(o=i.documentBaseURI.toAbsolute(o,d("remove_script_host")),o)}addVisual(o){rW(this,o)}setEditableRoot(o){KU(this,o)}hasEditableRoot(){return XU(this)}remove(){ZP(this)}destroy(o){UP(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Zv=Kt.DOM,lk=ve.each;let qN=!1,Tx,yi=[];const ck=e=>{const o=e.type;lk(Pp.get(),n=>{switch(o){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},YN=e=>{if(e!==qN){const o=Kt.DOM;e?(o.bind(window,"resize",ck),o.bind(window,"scroll",ck)):(o.unbind(window,"resize",ck),o.unbind(window,"scroll",ck)),qN=e}},QN=e=>{const o=yi;return yi=Et(yi,n=>e!==n),Pp.activeEditor===e&&(Pp.activeEditor=yi.length>0?yi[0]:null),Pp.focusedEditor===e&&(Pp.focusedEditor=null),o.length!==yi.length},d$=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(QN(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},u$=document.compatMode!=="CSS1Compat",Pp={...t5,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.5",releaseDate:"TBD",i18n:Dl,activeEditor:null,focusedEditor:null,setup(){const e=this;let o="",n="",s=Cc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,n=i.suffix;else{const d=document.getElementsByTagName("script");for(let g=0;g<d.length;g++){const f=d[g].src||"";if(f==="")continue;const y=f.substring(f.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(f)){y.indexOf(".min")!==-1&&(n=".min"),o=f.substring(0,f.lastIndexOf("/"));break}}if(!o&&document.currentScript){const g=document.currentScript.src;g.indexOf(".min")!==-1&&(n=".min"),o=g.substring(0,g.lastIndexOf("/"))}}e.baseURL=new Cc(s).toAbsolute(o),e.documentBaseURL=s,e.baseURI=new Cc(e.baseURL),e.suffix=n,wL(e)},overrideDefaults(e){const o=e.base_url;o&&this._setBaseUrl(o);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&ot(s,(i,d)=>{Gs.PluginManager.urls[d]=i})},init(e){const o=this;let n;const s=ve.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(D,L)=>D.inline&&L.tagName.toLowerCase()in s,d=D=>{let L=D.id;return L||(L=Go(D,"name").filter(P=>!Zv.get(P)).getOrThunk(Zv.uniqueId),D.setAttribute("id",L)),L},g=D=>{const L=e[D];if(L)return L.apply(o,[])},f=D=>ae.browser.isIE()||ae.browser.isEdge()?(F2("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):u$?(F2("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):J(D.selector)?Zv.select(D.selector):Oe(D.target)?[D.target]:[];let y=D=>{n=D};const k=()=>{let D=0;const L=[];let P;const j=($,Z,U)=>{const re=new ik($,Z,o);L.push(re),re.on("init",()=>{++D===P.length&&y(L)}),re.targetElm=re.targetElm||U,re.render()};Zv.unbind(window,"ready",k),g("onpageload"),P=Si(f(e)),ve.each(P,$=>{d$(o.get($.id))}),P=ve.grep(P,$=>!o.get($.id)),P.length===0?y([]):lk(P,$=>{i(e,$)?F2("Could not initialize inline editor on invalid inline target element",$):j(d($),e,$)})};return Zv.bind(window,"ready",k),new Promise(D=>{n?D(n):y=L=>{D(L)}})},get(e){return arguments.length===0?yi.slice(0):J(e)?On(yi,o=>o.id===e).getOr(null):nr(e)&&yi[e]?yi[e]:null},add(e){const o=this,n=o.get(e.id);return n===e||(n===null&&yi.push(e),YN(!0),o.activeEditor=e,o.dispatch("AddEditor",{editor:e}),Tx||(Tx=s=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return s.preventDefault(),s.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",Tx))),e},createEditor(e,o){return this.add(new ik(e,o,this))},remove(e){const o=this;let n;if(!e){for(let s=yi.length-1;s>=0;s--)o.remove(yi[s]);return}if(J(e)){lk(Zv.select(e),s=>{n=o.get(s.id),n&&o.remove(n)});return}return n=e,se(o.get(n.id))?null:(QN(n)&&o.dispatch("RemoveEditor",{editor:n}),yi.length===0&&window.removeEventListener("beforeunload",Tx),n.remove(),YN(yi.length>0),n)},execCommand(e,o,n){var s;const i=this,d=qe(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!i.get(d)){const g=n.options;new ik(d,g,i).render()}return!0}case"mceRemoveEditor":{const g=i.get(d);return g&&g.remove(),!0}case"mceToggleEditor":{const g=i.get(d);return g?(g.isHidden()?g.show():g.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,o,n):!1},triggerSave:()=>{lk(yi,e=>{e.save()})},addI18n:(e,o)=>{Dl.add(e,o)},translate:e=>Dl.translate(e),setActive(e){const o=this.activeEditor;this.activeEditor!==e&&(o&&o.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:o})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Cc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Cc(this.baseURL)}};Pp.setup();const Uv=(()=>{const e=Ku(),o=d=>({items:d,types:Cr(d),getType:g=>Go(d,g).getOrUndefined()}),n=d=>{e.set(d)},s=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:o,write:n,read:s,clear:i}})(),JN=Math.min,Wv=Math.max,dk=Math.round,eL=(e,o,n)=>{let s=o.x,i=o.y;const d=e.w,g=e.h,f=o.w,y=o.h,k=(n||"").split("");return k[0]==="b"&&(i+=y),k[1]==="r"&&(s+=f),k[0]==="c"&&(i+=dk(y/2)),k[1]==="c"&&(s+=dk(f/2)),k[3]==="b"&&(i-=g),k[4]==="r"&&(s-=d),k[3]==="c"&&(i-=dk(g/2)),k[4]==="c"&&(s-=dk(d/2)),B1(s,i,d,g)},tL=(e,o,n,s)=>{for(let i=0;i<s.length;i++){const d=eL(e,o,s[i]);if(d.x>=n.x&&d.x+d.w<=n.w+n.x&&d.y>=n.y&&d.y+d.h<=n.h+n.y)return s[i]}return null},uk=(e,o,n)=>B1(e.x-o,e.y-n,e.w+o*2,e.h+n*2),a5=(e,o)=>{const n=Wv(e.x,o.x),s=Wv(e.y,o.y),i=JN(e.x+e.w,o.x+o.w),d=JN(e.y+e.h,o.y+o.h);return i-n<0||d-s<0?null:B1(n,s,i-n,d-s)},m$=(e,o,n)=>{let s=e.x,i=e.y,d=e.x+e.w,g=e.y+e.h;const f=o.x+o.w,y=o.y+o.h,k=Wv(0,o.x-s),D=Wv(0,o.y-i),L=Wv(0,d-f),P=Wv(0,g-y);return s+=k,i+=D,n&&(d+=k,g+=D,s-=L,i-=P),d-=L,g-=P,B1(s,i,d-s,g-i)},B1=(e,o,n,s)=>({x:e,y:o,w:n,h:s}),oL={inflate:uk,relativePosition:eL,findBestRelativePosition:tL,intersect:a5,clamp:m$,create:B1,fromClientRect:e=>B1(e.left,e.top,e.width,e.height)},g$=(e,o,n=1e3)=>{let s=!1,i=null;const d=y=>(...k)=>{s||(s=!0,i!==null&&(clearTimeout(i),i=null),y.apply(null,k))},g=d(e),f=d(o);return{start:(...y)=>{!s&&i===null&&(i=setTimeout(()=>f.apply(null,y),n))},resolve:g,reject:f}},nL=(()=>{const e={},o={},n={};return{load:(s,i)=>{const d=`Script at URL "${i}" failed to load`,g=`Script at URL "${i}" did not call \`tinymce.Resource.add('${s}', data)\` within 1 second`;if(e[s]!==void 0)return e[s];{const f=new Promise((y,k)=>{const D=g$(y,k);o[s]=D.resolve,xs.ScriptLoader.loadScript(i).then(()=>D.start(g),()=>D.reject(d))});return e[s]=f,f}},add:(s,i)=>{o[s]!==void 0&&(o[s](i),delete o[s]),e[s]=Promise.resolve(i),n[s]=i},has:s=>s in n,get:s=>n[s],unload:s=>{delete e[s]}}})(),h$=()=>(()=>{let e={},o=[];const n={getItem:s=>e[s]||null,setItem:(s,i)=>{o.push(s),e[s]=String(i)},key:s=>o[s],removeItem:s=>{o=o.filter(i=>i===s),delete e[s]},clear:()=>{o=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>o.length,configurable:!1,enumerable:!1}),n})();let Dx;try{const e="__storage_test__";Dx=window.localStorage,Dx.setItem(e,e),Dx.removeItem(e)}catch{Dx=h$()}var p$=Dx;const f$={geom:{Rect:oL},util:{Delay:Ll,Tools:ve,VK:ht,URI:Cc,EventDispatcher:e5,Observable:t5,I18n:Dl,LocalStorage:p$,ImageUploader:nz},dom:{EventUtils:Gu,TreeWalker:br,TextSeeker:pi,DOMUtils:Kt,ScriptLoader:xs,RangeUtils:Nr,Serializer:gu,StyleSheetLoader:Kx,ControlSelection:Y0,BookmarkManager:Kf,Selection:BR,Event:Gu.Event},html:{Styles:n0,Entities:gt,Node:qa,Schema:Jc,DomParser:g1,Writer:c_,Serializer:up},Env:ae,AddOnManager:Gs,Annotator:ru,Formatter:hu,UndoManager:U2,EditorCommands:LN,WindowManager:P2,NotificationManager:WR,EditorObservable:ZN,Shortcuts:GN,Editor:ik,FocusManager:S5,EditorManager:Pp,DOM:Kt.DOM,ScriptLoader:xs.ScriptLoader,PluginManager:Ev,ThemeManager:Sc,ModelManager:_v,IconManager:HS,Resource:nL,FakeClipboard:Uv,trim:ve.trim,isArray:ve.isArray,is:ve.is,toArray:ve.toArray,makeMap:ve.makeMap,each:ve.each,map:ve.map,grep:ve.grep,inArray:ve.inArray,extend:ve.extend,walk:ve.walk,resolve:ve.resolve,explode:ve.explode,_addCacheSuffix:ve._addCacheSuffix},i5=ve.extend(Pp,f$),rL=e=>{try{Ct.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(i5),rL(i5)})()})(sj);var Ij=sj.exports;const E$=Hj(Ij);(function(){var Ct=tinymce.util.Tools.resolve("tinymce.ModelManager");const Mo=(c,m,p)=>{var b;return p(c,m.prototype)?!0:((b=c.constructor)===null||b===void 0?void 0:b.name)===m.name},ho=c=>{const m=typeof c;return c===null?"null":m==="object"&&Array.isArray(c)?"array":m==="object"&&Mo(c,String,(p,b)=>b.isPrototypeOf(p))?"string":m},jo=c=>m=>ho(m)===c,Ro=c=>m=>typeof m===c,Zo=c=>m=>c===m,kn=jo("string"),Pt=jo("object"),Jt=jo("array"),na=Zo(null),Ut=Ro("boolean"),Ao=Zo(void 0),gr=c=>c==null,Mn=c=>!gr(c),An=Ro("function"),bn=Ro("number"),ft=()=>{},Os=(c,m)=>(...p)=>c(m.apply(null,p)),_n=(c,m)=>p=>c(m(p)),J=c=>()=>c,qe=c=>c,ul=(c,m)=>c===m;function Oo(c,...m){return(...p)=>{const b=m.concat(p);return c.apply(null,b)}}const se=c=>m=>!c(m),so=c=>()=>{throw new Error(c)},Rn=c=>c(),io=J(!1),Oe=J(!0);class te{constructor(m,p){this.tag=m,this.value=p}static some(m){return new te(!0,m)}static none(){return te.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?te.some(m(this.value)):te.none()}bind(m){return this.tag?m(this.value):te.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:te.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Mn(m)?te.some(m):te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}te.singletonNone=new te(!1);const nr=Array.prototype.slice,Ge=Array.prototype.indexOf,Be=Array.prototype.push,E=(c,m)=>Ge.call(c,m),ro=(c,m)=>E(c,m)>-1,Pe=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const w=c[p];if(m(w,p))return!0}return!1},fo=(c,m)=>{const p=[];for(let b=0;b<c;b++)p.push(m(b));return p},Ot=(c,m)=>{const p=c.length,b=new Array(p);for(let w=0;w<p;w++){const O=c[w];b[w]=m(O,w)}return b},Le=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const w=c[p];m(w,p)}},zo=(c,m)=>{for(let p=c.length-1;p>=0;p--){const b=c[p];m(b,p)}},xr=(c,m)=>{const p=[],b=[];for(let w=0,O=c.length;w<O;w++){const R=c[w];(m(R,w)?p:b).push(R)}return{pass:p,fail:b}},Xo=(c,m)=>{const p=[];for(let b=0,w=c.length;b<w;b++){const O=c[b];m(O,b)&&p.push(O)}return p},lr=(c,m,p)=>(zo(c,(b,w)=>{p=m(p,b,w)}),p),Ie=(c,m,p)=>(Le(c,(b,w)=>{p=m(p,b,w)}),p),at=(c,m,p)=>{for(let b=0,w=c.length;b<w;b++){const O=c[b];if(m(O,b))return te.some(O);if(p(O,b))break}return te.none()},I=(c,m)=>at(c,m,io),hs=(c,m)=>{for(let p=0,b=c.length;p<b;p++){const w=c[p];if(m(w,p))return te.some(p)}return te.none()},qo=c=>{const m=[];for(let p=0,b=c.length;p<b;++p){if(!Jt(c[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+c);Be.apply(m,c[p])}return m},Bn=(c,m)=>qo(Ot(c,m)),on=(c,m)=>{for(let p=0,b=c.length;p<b;++p){const w=c[p];if(m(w,p)!==!0)return!1}return!0},Zp=c=>{const m=nr.call(c,0);return m.reverse(),m},It=(c,m)=>{const p={};for(let b=0,w=c.length;b<w;b++){const O=c[b];p[String(O)]=m(O,b)}return p},nn=(c,m)=>{const p=nr.call(c,0);return p.sort(m),p},Bt=(c,m)=>m>=0&&m<c.length?te.some(c[m]):te.none(),me=c=>Bt(c,0),ei=c=>Bt(c,c.length-1),cr=(c,m)=>{for(let p=0;p<c.length;p++){const b=m(c[p],p);if(b.isSome())return b}return te.none()},Et=Object.keys,ml=Object.hasOwnProperty,En=(c,m)=>{const p=Et(c);for(let b=0,w=p.length;b<w;b++){const O=p[b],R=c[O];m(R,O)}},xu=(c,m)=>On(c,(p,b)=>({k:b,v:m(p,b)})),On=(c,m)=>{const p={};return En(c,(b,w)=>{const O=m(b,w);p[O.k]=O.v}),p},Ts=c=>(m,p)=>{c[p]=m},jl=(c,m,p,b)=>{En(c,(w,O)=>{(m(w,O)?p:b)(w,O)})},Ds=(c,m)=>{const p={};return jl(c,m,Ts(p),ft),p},hr=(c,m)=>{const p=[];return En(c,(b,w)=>{p.push(m(b,w))}),p},yn=c=>hr(c,qe),ti=(c,m)=>Xn(c,m)?te.from(c[m]):te.none(),Xn=(c,m)=>ml.call(c,m),Yo=(c,m)=>Xn(c,m)&&c[m]!==void 0&&c[m]!==null,Nc=c=>{for(const m in c)if(ml.call(c,m))return!1;return!0},xn=typeof window<"u"?window:Function("return this;")(),Ia=(c,m)=>{let p=m??xn;for(let b=0;b<c.length&&p!==void 0&&p!==null;++b)p=p[c[b]];return p},ps=(c,m)=>{const p=c.split(".");return Ia(p,m)},gl=(c,m)=>ps(c,m),Si=(c,m)=>{const p=gl(c,m);if(p==null)throw new Error(c+" not available on this browser");return p},Cr=Object.getPrototypeOf,hl=c=>Si("HTMLElement",c),ot=c=>{const m=ps("ownerDocument.defaultView",c);return Pt(c)&&(hl(m).prototype.isPrototypeOf(c)||/^HTML\w*Element$/.test(Cr(c).constructor.name))},bo=8,ra=9,Ms=11,ki=1,_i=3,Uo=c=>c.dom.nodeName.toLowerCase(),Pa=c=>c.dom.nodeType,Gl=c=>m=>Pa(m)===c,Go=c=>Pa(c)===bo||Uo(c)==="#comment",At=c=>Jr(c)&&ot(c.dom),Jr=Gl(ki),pl=Gl(_i),Lc=Gl(ra),Ed=Gl(Ms),es=c=>m=>Jr(m)&&Uo(m)===c,Pr=(c,m,p)=>{if(kn(p)||Ut(p)||bn(p))c.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",c),new Error("Attribute value was not simple")},qn=(c,m,p)=>{Pr(c.dom,m,p)},wa=(c,m)=>{const p=c.dom;En(m,(b,w)=>{Pr(p,w,b)})},ts=(c,m)=>{En(m,(p,b)=>{p.fold(()=>{Ko(c,b)},w=>{Pr(c.dom,b,w)})})},za=(c,m)=>{const p=c.dom.getAttribute(m);return p===null?void 0:p},sa=(c,m)=>te.from(za(c,m)),Ko=(c,m)=>{c.dom.removeAttribute(m)},Ei=c=>Ie(c.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),os=(c,m)=>{const p=(m||document).createElement("div");if(p.innerHTML=c,!p.hasChildNodes()||p.childNodes.length>1){const b="HTML does not have a single root node";throw console.error(b,c),new Error(b)}return Ke(p.childNodes[0])},Cu=(c,m)=>{const p=(m||document).createElement(c);return Ke(p)},Oi=(c,m)=>{const p=(m||document).createTextNode(c);return Ke(p)},Ke=c=>{if(c==null)throw new Error("Node cannot be null or undefined");return{dom:c}},Qe={fromHtml:os,fromTag:Cu,fromText:Oi,fromDom:Ke,fromPoint:(c,m,p)=>te.from(c.dom.elementFromPoint(m,p)).map(Ke)},As=(c,m)=>{const p=c.dom;if(p.nodeType!==ki)return!1;{const b=p;if(b.matches!==void 0)return b.matches(m);if(b.msMatchesSelector!==void 0)return b.msMatchesSelector(m);if(b.webkitMatchesSelector!==void 0)return b.webkitMatchesSelector(m);if(b.mozMatchesSelector!==void 0)return b.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Hc=c=>c.nodeType!==ki&&c.nodeType!==ra&&c.nodeType!==Ms||c.childElementCount===0,fl=(c,m)=>{const p=m===void 0?document:m.dom;return Hc(p)?[]:Ot(p.querySelectorAll(c),Qe.fromDom)},Sm=(c,m)=>{const p=m===void 0?document:m.dom;return Hc(p)?te.none():te.from(p.querySelector(c)).map(Qe.fromDom)},Qo=(c,m)=>c.dom===m.dom,Kl=(c,m)=>{const p=c.dom,b=m.dom;return p===b?!1:p.contains(b)},Up=As,Ic=c=>Qe.fromDom(c.dom.ownerDocument),Xl=c=>Lc(c)?c:Ic(c),wu=c=>Qe.fromDom(Xl(c).dom.documentElement),Yn=c=>Qe.fromDom(Xl(c).dom.defaultView),Bo=c=>te.from(c.dom.parentNode).map(Qe.fromDom),Su=c=>te.from(c.dom.parentElement).map(Qe.fromDom),ql=(c,m)=>{const p=An(m)?m:io;let b=c.dom;const w=[];for(;b.parentNode!==null&&b.parentNode!==void 0;){const O=b.parentNode,R=Qe.fromDom(O);if(w.push(R),p(R)===!0)break;b=O}return w},Ti=c=>te.from(c.dom.previousSibling).map(Qe.fromDom),zn=c=>te.from(c.dom.nextSibling).map(Qe.fromDom),rr=c=>Ot(c.dom.childNodes,Qe.fromDom),sr=(c,m)=>{const p=c.dom.childNodes;return te.from(p[m]).map(Qe.fromDom)},Yl=c=>sr(c,0),oi=(c,m)=>{Bo(c).each(p=>{p.dom.insertBefore(m.dom,c.dom)})},wr=(c,m)=>{zn(c).fold(()=>{Bo(c).each(p=>{uo(p,m)})},p=>{oi(p,m)})},ni=(c,m)=>{Yl(c).fold(()=>{uo(c,m)},p=>{c.dom.insertBefore(m.dom,p.dom)})},uo=(c,m)=>{c.dom.appendChild(m.dom)},Gg=(c,m,p)=>{sr(c,p).fold(()=>{uo(c,m)},b=>{oi(b,m)})},Vo=(c,m)=>{oi(c,m),uo(m,c)},Di=(c,m)=>{Le(m,(p,b)=>{const w=b===0?c:m[b-1];wr(w,p)})},pr=(c,m)=>{Le(m,p=>{uo(c,p)})},Ql=c=>{c.dom.textContent="",Le(rr(c),m=>{Fn(m)})},Fn=c=>{const m=c.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Pc=c=>{const m=rr(c);m.length>0&&Di(c,m),Fn(c)},ns=(c,m)=>Qe.fromDom(c.dom.cloneNode(m)),Od=c=>ns(c,!1),Fs=c=>ns(c,!0),km=(c,m)=>{const p=Qe.fromTag(m),b=Ei(c);return wa(p,b),p},Mi=(c,m)=>{const p=km(c,m),b=rr(Fs(c));return pr(p,b),p},_m=(c,m)=>{const p=km(c,m);wr(c,p);const b=rr(c);return pr(p,b),Fn(c),p},aa=["tfoot","thead","tbody","colgroup"],vl=c=>ro(aa,c),ku=(c,m)=>({rows:c,columns:m}),Em=(c,m)=>({row:c,column:m}),_u=(c,m,p)=>({element:c,rowspan:m,colspan:p}),Td=(c,m,p,b)=>({element:c,rowspan:m,colspan:p,isNew:b}),ri=(c,m,p,b,w,O)=>({element:c,rowspan:m,colspan:p,row:b,column:w,isLocked:O}),Om=(c,m,p)=>({element:c,cells:m,section:p}),zr=(c,m,p,b)=>({element:c,cells:m,section:p,isNew:b}),Vn=(c,m,p)=>({element:c,isNew:m,isLocked:p}),Jl=(c,m,p,b)=>({element:c,cells:m,section:p,isNew:b}),Tm=(c,m,p,b)=>({startRow:c,startCol:m,finishRow:p,finishCol:b}),Dm=(c,m,p)=>({element:c,colspan:m,column:p}),Fa=(c,m)=>({element:c,columns:m}),Dd=c=>Ed(c)&&Mn(c.dom.host),fs=An(Element.prototype.attachShadow)&&An(Node.prototype.getRootNode),fr=J(fs),N=fs?c=>Qe.fromDom(c.dom.getRootNode()):Xl,V=c=>{const m=N(c);return Dd(m)?te.some(m):te.none()},W=c=>Qe.fromDom(c.dom.host),ae=c=>{if(fr()&&Mn(c.target)){const m=Qe.fromDom(c.target);if(Jr(m)&&ut(m)&&c.composed&&c.composedPath){const p=c.composedPath();if(p)return me(p)}}return te.from(c.target)},ut=c=>Mn(c.dom.shadowRoot),Tt=c=>{const m=pl(c)?c.dom.parentNode:c.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return V(Qe.fromDom(m)).fold(()=>p.body.contains(m),_n(Tt,W))},Zn=()=>vo(Qe.fromDom(document)),vo=c=>{const m=c.dom.body;if(m==null)throw new Error("Body is not available yet");return Qe.fromDom(m)},zc=(c,m,p)=>Xo(ql(c,p),m),ia=(c,m)=>Xo(rr(c),m),Vs=(c,m)=>{let p=[];return Le(rr(c),b=>{m(b)&&(p=p.concat([b])),p=p.concat(Vs(b,m))}),p},ve=(c,m,p)=>zc(c,b=>As(b,m),p),Rs=(c,m)=>ia(c,p=>As(p,m)),Zs=(c,m)=>fl(m,c);var Sr=(c,m,p,b,w)=>c(p,b)?te.some(p):An(w)&&w(p)?te.none():m(p,b,w);const Qn=(c,m,p)=>{let b=c.dom;const w=An(p)?p:io;for(;b.parentNode;){b=b.parentNode;const O=Qe.fromDom(b);if(m(O))return te.some(O);if(w(O))break}return te.none()},Wo=(c,m,p)=>Sr((b,w)=>w(b),Qn,c,m,p),bl=(c,m)=>{const p=b=>m(Qe.fromDom(b));return I(c.dom.childNodes,p).map(Qe.fromDom)},Mm=(c,m)=>{const p=b=>{for(let w=0;w<b.childNodes.length;w++){const O=Qe.fromDom(b.childNodes[w]);if(m(O))return te.some(O);const R=p(b.childNodes[w]);if(R.isSome())return R}return te.none()};return p(c.dom)},xo=(c,m,p)=>Qn(c,b=>As(b,m),p),Va=(c,m)=>bl(c,p=>As(p,m)),Md=(c,m)=>Sm(m,c),vr=(c,m,p)=>Sr((b,w)=>As(b,w),xo,c,m,p),Cn=(c,m,p=ul)=>c.exists(b=>p(b,m)),ec=c=>{const m=[],p=b=>{m.push(b)};for(let b=0;b<c.length;b++)c[b].each(p);return m},jv=(c,m)=>c!=null?m(c):te.none(),Am=(c,m)=>c?te.some(m):te.none(),gn=(c,m,p)=>m===""||c.length>=m.length&&c.substr(p,p+m.length)===m,la=(c,m,p=0,b)=>{const w=c.indexOf(m,p);return w!==-1?Ao(b)?!0:w+m.length<=b:!1},tc=(c,m)=>gn(c,m,0),Fr=(c,m)=>gn(c,m,c.length-m.length),po=(c=>m=>m.replace(c,""))(/^\s+|\s+$/g),Eu=c=>c.length>0,Kg=c=>{const m=parseFloat(c);return isNaN(m)?te.none():te.some(m)},Un=c=>c.style!==void 0&&An(c.style.getPropertyValue),si=(c,m,p)=>{if(!kn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",c),new Error("CSS value must be a string: "+p);Un(c)&&c.style.setProperty(m,p)},Sa=(c,m)=>{Un(c)&&c.style.removeProperty(m)},No=(c,m,p)=>{const b=c.dom;si(b,m,p)},Rm=(c,m)=>{const p=c.dom;En(m,(b,w)=>{si(p,w,b)})},Ad=(c,m)=>{const p=c.dom,b=window.getComputedStyle(p).getPropertyValue(m);return b===""&&!Tt(c)?Bm(p,m):b},Bm=(c,m)=>Un(c)?c.style.getPropertyValue(m):"",Nm=(c,m)=>{const p=c.dom,b=Bm(p,m);return te.from(b).filter(w=>w.length>0)},Dn=(c,m)=>{const p=c.dom;Sa(p,m),Cn(sa(c,"style").map(po),"")&&Ko(c,"style")},Ai=(c,m)=>{const p=c.dom,b=m.dom;Un(p)&&Un(b)&&(b.style.cssText=p.style.cssText)},Wn=(c,m,p=0)=>sa(c,m).map(b=>parseInt(b,10)).getOr(p),Ri=(c,m)=>Wn(c,m,1),Fc=c=>es("col")(c)?Wn(c,"span",1)>1:Ri(c,"colspan")>1,kr=c=>Ri(c,"rowspan")>1,Xg=(c,m)=>parseInt(Ad(c,m),10),Vc=J(10),ka=J(10),qg=(c,m)=>Wp(c,m,Oe),Wp=(c,m,p)=>Bn(rr(c),b=>As(b,m)?p(b)?[b]:[]:Wp(b,m,p)),Ou=(c,m,p=io)=>{if(p(m))return te.none();if(ro(c,Uo(m)))return te.some(m);const b=w=>As(w,"table")||p(w);return xo(m,c.join(","),b)},Yg=(c,m)=>Ou(["td","th"],c,m),Zc=c=>qg(c,"th,td"),Lm=c=>As(c,"colgroup")?Rs(c,"col"):Bn(Hm(c),m=>Rs(m,"col")),Us=(c,m)=>vr(c,"table",m),Uc=c=>qg(c,"tr"),Hm=c=>Us(c).fold(J([]),m=>Rs(m,"colgroup")),Tu=(c,m)=>Ot(c,p=>{if(Uo(p)==="colgroup"){const b=Ot(Lm(p),w=>{const O=Wn(w,"span",1);return _u(w,1,O)});return Om(p,b,"colgroup")}else{const b=Ot(Zc(p),w=>{const O=Wn(w,"rowspan",1),R=Wn(w,"colspan",1);return _u(w,O,R)});return Om(p,b,m(p))}}),Im=c=>Bo(c).map(m=>{const p=Uo(m);return vl(p)?p:"tbody"}).getOr("tbody"),Pm=c=>{const m=Uc(c),p=[...Hm(c),...m];return Tu(p,Im)},P1=(c,m)=>Tu(c,()=>m),Du=c=>{let m=!1,p;return(...b)=>(m||(m=!0,p=c.apply(null,b)),p)},z1=(c,m,p,b)=>{const w=c.isiOS()&&/ipad/i.test(p)===!0,O=c.isiOS()&&!w,R=c.isiOS()||c.isAndroid(),z=R||b("(pointer:coarse)"),q=w||!O&&R&&b("(min-device-width:768px)"),ue=O||R&&!q,ke=m.isSafari()&&c.isiOS()&&/safari/i.test(p)===!1,Te=!ue&&!q&&!ke;return{isiPad:J(w),isiPhone:J(O),isTablet:J(q),isPhone:J(ue),isTouch:J(z),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:J(ke),isDesktop:J(Te)}},Mu=(c,m)=>{for(let p=0;p<c.length;p++){const b=c[p];if(b.test(m))return b}},X=(c,m)=>{const p=Mu(c,m);if(!p)return{major:0,minor:0};const b=w=>Number(m.replace(p,"$"+w));return Rd(b(1),b(2))},$p=(c,m)=>{const p=String(m).toLowerCase();return c.length===0?Za():X(c,p)},Za=()=>Rd(0,0),Rd=(c,m)=>({major:c,minor:m}),Au={nu:Rd,detect:$p,unknown:Za},Qg=(c,m)=>cr(m.brands,p=>{const b=p.brand.toLowerCase();return I(c,w=>{var O;return b===((O=w.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(w=>({current:w.name,version:Au.nu(parseInt(p.version,10),0)}))}),yo=(c,m)=>{const p=String(m).toLowerCase();return I(c,b=>b.search(p))},oc=(c,m)=>yo(c,m).map(p=>{const b=Au.detect(p.versionRegexes,m);return{current:p.name,version:b}}),Jg=(c,m)=>yo(c,m).map(p=>{const b=Au.detect(p.versionRegexes,m);return{current:p.name,version:b}}),Bi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Bs=c=>m=>la(m,c),zm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:c=>la(c,"edge/")&&la(c,"chrome")&&la(c,"safari")&&la(c,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bi],search:c=>la(c,"chrome")&&!la(c,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:c=>la(c,"msie")||la(c,"trident")},{name:"Opera",versionRegexes:[Bi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Bs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Bs("firefox")},{name:"Safari",versionRegexes:[Bi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:c=>(la(c,"safari")||la(c,"mobile/"))&&la(c,"applewebkit")}],vs=[{name:"Windows",search:Bs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:c=>la(c,"iphone")||la(c,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Bs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Bs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Bs("linux"),versionRegexes:[]},{name:"Solaris",search:Bs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Bs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Bs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yl={browsers:J(zm),oses:J(vs)},nc="Edge",Bd="Chromium",Wc="IE",Nd="Opera",Ld="Firefox",$c="Safari",Vr=()=>_r({current:void 0,version:Au.unknown()}),_r=c=>{const m=c.current,p=c.version,b=w=>()=>m===w;return{current:m,version:p,isEdge:b(nc),isChromium:b(Bd),isIE:b(Wc),isOpera:b(Nd),isFirefox:b(Ld),isSafari:b($c)}},Ru={unknown:Vr,nu:_r,edge:J(nc),chromium:J(Bd),ie:J(Wc),opera:J(Nd),firefox:J(Ld),safari:J($c)},Fm="Windows",Bu="iOS",xl="Android",ca="Linux",Vm="macOS",jp="Solaris",Gp="FreeBSD",Ni="ChromeOS",Hd=()=>Kp({current:void 0,version:Au.unknown()}),Kp=c=>{const m=c.current,p=c.version,b=w=>()=>m===w;return{current:m,version:p,isWindows:b(Fm),isiOS:b(Bu),isAndroid:b(xl),isMacOS:b(Vm),isLinux:b(ca),isSolaris:b(jp),isFreeBSD:b(Gp),isChromeOS:b(Ni)}},F1={unknown:Hd,nu:Kp,windows:J(Fm),ios:J(Bu),android:J(xl),linux:J(ca),macos:J(Vm),solaris:J(jp),freebsd:J(Gp),chromeos:J(Ni)},Gv={detect:(c,m,p)=>{const b=yl.browsers(),w=yl.oses(),O=m.bind(q=>Qg(b,q)).orThunk(()=>oc(b,c)).fold(Ru.unknown,Ru.nu),R=Jg(w,c).fold(F1.unknown,F1.nu),z=z1(R,O,c,p);return{browser:O,os:R,deviceType:z}}},Zm=c=>window.matchMedia(c).matches;let Kv=Du(()=>Gv.detect(navigator.userAgent,te.from(navigator.userAgentData),Zm));const rc=()=>Kv(),Jn=(c,m)=>{const p=(R,z)=>{if(!bn(z)&&!z.match(/^[0-9]+$/))throw new Error(c+".set accepts only positive integer values. Value was "+z);const q=R.dom;Un(q)&&(q.style[c]=z+"px")},b=R=>{const z=m(R);if(z<=0||z===null){const q=Ad(R,c);return parseFloat(q)||0}return z},w=b,O=(R,z)=>Ie(z,(q,ue)=>{const ke=Ad(R,ue),Te=ke===void 0?0:parseInt(ke,10);return isNaN(Te)?q:q+Te},0);return{set:p,get:b,getOuter:w,aggregate:O,max:(R,z,q)=>{const ue=O(R,q);return z>ue?z-ue:0}}},Nn=(c,m)=>Kg(c).getOr(m),rs=(c,m,p)=>Nn(Ad(c,m),p),eh=(c,m,p,b)=>{const w=rs(c,`padding-${p}`,0),O=rs(c,`padding-${b}`,0),R=rs(c,`border-${p}-width`,0),z=rs(c,`border-${b}-width`,0);return m-w-O-R-z},V1=(c,m)=>{const p=c.dom,b=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?b:eh(c,b,"left","right")},bs=c=>rs(c,"height",c.dom.offsetHeight),Um=c=>rs(c,"width",c.dom.offsetWidth),Id=c=>V1(c,"content-box"),Li=Jn("width",c=>c.dom.offsetWidth),Wt=c=>Li.get(c),Er=c=>Li.getOuter(c),Wm=Id,$m=Um,th=(c,m,p)=>{const b=c.cells,w=b.slice(0,m),O=b.slice(m),R=w.concat(p).concat(O);return Lu(c,R)},Z1=(c,m,p)=>th(c,m,[p]),Nu=(c,m,p)=>{const b=c.cells;b[m]=p},Lu=(c,m)=>Jl(c.element,m,c.section,c.isNew),Hi=(c,m)=>{const p=c.cells,b=Ot(p,m);return Jl(c.element,b,c.section,c.isNew)},Ws=(c,m)=>c.cells[m],To=(c,m)=>Ws(c,m).element,da=c=>c.cells.length,Zr=c=>{const m=xr(c,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},jm=(c,m,p)=>{const b=Ot(c.cells,p);return Jl(m(c.element),b,c.section,!0)},Ur="data-snooker-locked-cols",sc=c=>sa(c,Ur).bind(m=>te.from(m.match(/\d+/g))).map(m=>It(m,Oe)),Cl=c=>{const m=Ie(Zr(c).rows,(b,w)=>(Le(w.cells,(O,R)=>{O.isLocked&&(b[R]=!0)}),b),{}),p=hr(m,(b,w)=>parseInt(w,10));return nn(p)},ao=(c,m)=>c+","+m,Xp=(c,m,p)=>te.from(c.access[ao(m,p)]),Ii=(c,m,p)=>{const b=Pi(c,w=>p(m,w.element));return b.length>0?te.some(b[0]):te.none()},Pi=(c,m)=>{const p=Bn(c.all,b=>b.cells);return Xo(p,m)},ac=c=>{const m={};let p=0;return Le(c.cells,b=>{const w=b.colspan;fo(w,O=>{const R=p+O;m[R]=Dm(b.element,w,R)}),p+=w}),m},$o=c=>{const m={},p=[],b=me(c).map(Te=>Te.element).bind(Us).bind(sc).getOr({});let w=0,O=0,R=0;const{pass:z,fail:q}=xr(c,Te=>Te.section==="colgroup");Le(q,Te=>{const st=[];Le(Te.cells,$e=>{let Xe=0;for(;m[ao(R,Xe)]!==void 0;)Xe++;const Nt=Yo(b,Xe.toString()),mt=ri($e.element,$e.rowspan,$e.colspan,R,Xe,Nt);for(let Gt=0;Gt<$e.colspan;Gt++)for(let Xt=0;Xt<$e.rowspan;Xt++){const sn=R+Xt,fa=Xe+Gt,Br=ao(sn,fa);m[Br]=mt,O=Math.max(O,fa+1)}st.push(mt)}),w++,p.push(Om(Te.element,st,Te.section)),R++});const{columns:ue,colgroups:ke}=ei(z).map(Te=>{const st=ac(Te);return{colgroups:[Fa(Te.element,yn(st))],columns:st}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ku(w,O),access:m,all:p,columns:ue,colgroups:ke}},qt={fromTable:c=>{const m=Pm(c);return $o(m)},generate:$o,getAt:Xp,findItem:Ii,filterItems:Pi,justCells:c=>Bn(c.all,m=>m.cells),justColumns:c=>yn(c.columns),hasColumns:c=>Et(c.columns).length>0,getColumnAt:(c,m)=>te.from(c.columns[m])},qp=(c,m=Oe)=>{const p=c.grid,b=fo(p.columns,qe),w=fo(p.rows,qe);return Ot(b,O=>oh(()=>Bn(w,R=>qt.getAt(c,R,O).filter(z=>z.column===O).toArray()),R=>R.colspan===1&&m(R.element),()=>qt.getAt(c,0,O)))},oh=(c,m,p)=>{const b=c();return I(b,m).orThunk(()=>te.from(b[0]).orThunk(p)).map(w=>w.element)},Gm=c=>{const m=c.grid,p=fo(m.rows,qe),b=fo(m.columns,qe);return Ot(p,w=>oh(()=>Bn(b,O=>qt.getAt(c,w,O).filter(R=>R.row===w).fold(J([]),R=>[R])),O=>O.rowspan===1,()=>qt.getAt(c,w,0)))},Hu=(c,m)=>{if(m<0||m>=c.length-1)return te.none();const p=c[m].fold(()=>{const w=Zp(c.slice(0,m));return cr(w,(O,R)=>O.map(z=>({value:z,delta:R+1})))},w=>te.some({value:w,delta:0})),b=c[m+1].fold(()=>{const w=c.slice(m+1);return cr(w,(O,R)=>O.map(z=>({value:z,delta:R+1})))},w=>te.some({value:w,delta:1}));return p.bind(w=>b.map(O=>{const R=O.delta+w.delta;return Math.abs(O.value-w.value)/R}))},nh=(c,m)=>p=>Xv(p)==="rtl"?m:c,Xv=c=>Ad(c,"direction")==="rtl"?"rtl":"ltr",Iu=Jn("height",c=>{const m=c.dom;return Tt(c)?m.getBoundingClientRect().height:m.offsetHeight}),Yp=c=>Iu.get(c),Qp=c=>Iu.getOuter(c),qv=bs,U1=(c,m)=>({left:c,top:m,translate:(p,b)=>U1(c+p,m+b)}),wl=U1,zi=c=>{const m=c.getBoundingClientRect();return wl(m.left,m.top)},S=(c,m)=>c!==void 0?c:m!==void 0?m:0,T=c=>{const m=c.dom.ownerDocument,p=m.body,b=m.defaultView,w=m.documentElement;if(p===c.dom)return wl(p.offsetLeft,p.offsetTop);const O=S(b==null?void 0:b.pageYOffset,w.scrollTop),R=S(b==null?void 0:b.pageXOffset,w.scrollLeft),z=S(w.clientTop,p.clientTop),q=S(w.clientLeft,p.clientLeft);return H(c).translate(R-q,O-z)},H=c=>{const m=c.dom,p=m.ownerDocument.body;return p===m?wl(p.offsetLeft,p.offsetTop):Tt(c)?zi(m):wl(0,0)},Y=(c,m)=>({row:c,y:m}),ne=(c,m)=>({col:c,x:m}),Ze=c=>T(c).left+Er(c),kt=c=>T(c).left,zt=(c,m)=>ne(c,kt(m)),jt=(c,m)=>ne(c,Ze(m)),bt=c=>T(c).top,it=(c,m)=>Y(c,bt(m)),$n=(c,m)=>Y(c,bt(m)+Qp(m)),rn=(c,m,p)=>{if(p.length===0)return[];const b=Ot(p.slice(1),(O,R)=>O.map(z=>c(R,z))),w=p[p.length-1].map(O=>m(p.length-1,O));return b.concat([w])},jc=c=>-c,br={delta:qe,positions:c=>rn(it,$n,c),edge:bt},ic=nh({delta:qe,edge:kt,positions:c=>rn(zt,jt,c)},{delta:jc,edge:Ze,positions:c=>rn(jt,zt,c)}),ua={delta:(c,m)=>ic(m).delta(c,m),positions:(c,m)=>ic(m).positions(c,m),edge:c=>ic(c).edge(c)},pt={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Sl=(()=>{const c="[0-9]+",m="[eE]"+("[+-]?"+c),p="\\.",b=O=>`(?:${O})?`,w=`[+-]?(?:${["Infinity",c+p+b(c)+b(m),p+c+b(m),c+b(m)].join("|")})`;return new RegExp(`^(${w})(.*)$`)})(),ss=(c,m)=>Pe(m,p=>Pe(pt[p],b=>c===b)),Pd=(c,m)=>te.from(Sl.exec(c)).bind(p=>{const b=Number(p[1]),w=p[2];return ss(w,m)?te.some({value:b,unit:w}):te.none()}),ai=/(\d+(\.\d+)?)%/,Jp=/(\d+(\.\d+)?)px|em/,Lx=es("col"),Hx=(c,m,p)=>{const b=Su(c).getOrThunk(()=>vo(Ic(c)));return m(c)/p(b)*100},Fi=(c,m)=>{No(c,"width",m+"px")},Ix=(c,m)=>{No(c,"width",m+"%")},_a=(c,m)=>{No(c,"height",m+"px")},Yv=c=>qv(c)+"px",Qv=(c,m,p,b)=>{const w=Us(c).map(O=>{const R=p(O);return Math.floor(m/100*R)}).getOr(m);return b(c,w),w},Ae=(c,m,p,b)=>{const w=parseFloat(c);return Fr(c,"%")&&Uo(m)!=="table"?Qv(m,w,p,b):w},lc=c=>{const m=Yv(c);return m?Ae(m,c,Yp,_a):Yp(c)},Ea=(c,m,p)=>{const b=p(c),w=Ri(c,m);return b/w},ii=(c,m)=>Nm(c,m).orThunk(()=>sa(c,m).map(p=>p+"px")),yr=c=>ii(c,"width"),W1=c=>ii(c,"height"),Co=c=>Hx(c,Wt,Wm),Ns=c=>Lx(c)?Wt(c):$m(c),Ua=c=>Ea(c,"rowspan",lc),xe=c=>yr(c).bind(m=>Pd(m,["fixed","relative","empty"])),$s=(c,m,p)=>{No(c,"width",m+p)},hk=c=>Wt(c)+"px",dn=c=>Hx(c,Wt,Wm)+"%",zd=c=>yr(c).exists(m=>ai.test(m)),Jv=c=>yr(c).exists(m=>Jp.test(m)),kl=c=>yr(c).isNone(),ef=J(ai),jn=es("col"),$1=c=>yr(c).getOrThunk(()=>Ns(c)+"px"),li=c=>W1(c).getOrThunk(()=>Ua(c)+"px"),_o=c=>Ot(qt.justColumns(c),m=>te.from(m.element)),Vi=c=>{const m=rc().browser,p=m.isChromium()||m.isFirefox();return jn(c)?p:!0},Pu=(c,m,p,b,w,O)=>c.filter(b).fold(()=>O(Hu(p,m)),R=>w(R)),ys=(c,m,p,b)=>{const w=qp(c),O=qt.hasColumns(c)?_o(c):w,R=[te.some(ua.edge(m))].concat(Ot(ua.positions(w,m),q=>q.map(ue=>ue.x))),z=se(Fc);return Ot(O,(q,ue)=>Pu(q,ue,R,z,ke=>{if(Vi(ke))return p(ke);{const Te=jv(w[ue],qe);return Pu(Te,ue,R,z,st=>b(te.some(Wt(st))),b)}},b))},eb=c=>c.map(m=>m+"px").getOr(""),Km=(c,m)=>ys(c,m,$1,eb),Px=(c,m,p)=>ys(c,m,Co,b=>b.fold(()=>p.minCellWidth(),w=>w/p.pixelWidth()*100)),Oa=(c,m,p)=>ys(c,m,Ns,b=>b.getOrThunk(p.minCellWidth)),zx=(c,m,p,b,w)=>{const O=Gm(c),R=[te.some(p.edge(m))].concat(Ot(p.positions(O,m),z=>z.map(q=>q.y)));return Ot(O,(z,q)=>Pu(z,q,R,se(kr),b,w))},ge=(c,m,p)=>zx(c,m,p,Ua,b=>b.getOrThunk(ka)),js=(c,m,p)=>zx(c,m,p,li,eb),rh=(c,m)=>()=>Tt(c)?m(c):parseFloat(Nm(c,"width").getOr("0")),Ta=c=>{const m=rh(c,Wt),p=J(0);return{width:m,pixelWidth:m,getWidths:(b,w)=>Oa(b,c,w),getCellDelta:p,singleColumnWidth:J([0]),minCellWidth:p,setElementWidth:ft,adjustTableWidth:ft,isRelative:!0,label:"none"}},_l=c=>{const m=rh(c,b=>parseFloat(dn(b))),p=rh(c,Wt);return{width:m,pixelWidth:p,getWidths:(b,w)=>Px(b,c,w),getCellDelta:b=>b/p()*100,singleColumnWidth:(b,w)=>[100-b],minCellWidth:()=>Vc()/p()*100,setElementWidth:Ix,adjustTableWidth:b=>{const w=m(),O=b/100*w,R=w+O;Ix(c,R)},isRelative:!0,label:"percent"}},Wr=c=>{const m=rh(c,Wt);return{width:m,pixelWidth:m,getWidths:(p,b)=>Oa(p,c,b),getCellDelta:qe,singleColumnWidth:(p,b)=>[Math.max(Vc(),p+b)-p],minCellWidth:Vc,setElementWidth:Fi,adjustTableWidth:p=>{const b=m()+p;Fi(c,b)},isRelative:!1,label:"pixel"}},ar=(c,m)=>ef().exec(m)!==null?_l(c):Wr(c),sh={getTableSize:c=>yr(c).fold(()=>Ta(c),m=>ar(c,m)),pixelSize:Wr,percentageSize:_l,noneSize:Ta},cc=(c,m,p,b,w,O)=>({minRow:c,minCol:m,maxRow:p,maxCol:b,allCells:w,selectedCells:O}),ah=(c,m)=>{const p=c.grid.columns;let b=c.grid.rows,w=p,O=0,R=0;const z=[],q=[];return En(c.access,ue=>{if(z.push(ue),m(ue)){q.push(ue);const ke=ue.row,Te=ke+ue.rowspan-1,st=ue.column,$e=st+ue.colspan-1;ke<b?b=ke:Te>O&&(O=Te),st<w?w=st:$e>R&&(R=$e)}}),cc(b,w,O,R,z,q)},Dt=(c,m,p)=>{const b=c[p].element,w=Qe.fromTag("td");uo(w,Qe.fromTag("br")),(m?uo:ni)(b,w)},El=(c,m,p,b)=>{const w=Xo(c,z=>z.section!=="colgroup"),O=m.grid.columns,R=m.grid.rows;for(let z=0;z<R;z++){let q=!1;for(let ue=0;ue<O;ue++)z<p.minRow||z>p.maxRow||ue<p.minCol||ue>p.maxCol||(qt.getAt(m,z,ue).filter(b).isNone()?Dt(w,q,z):q=!0)}},tf=(c,m,p,b)=>{En(p.columns,O=>{(O.column<m.minCol||O.column>m.maxCol)&&Fn(O.element)});const w=Xo(qg(c,"tr"),O=>O.dom.childElementCount===0);Le(w,Fn),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Le(qg(c,"th,td"),O=>{Ko(O,"rowspan"),Ko(O,"colspan")}),Ko(c,Ur),Ko(c,"data-snooker-col-series"),sh.getTableSize(c).adjustTableWidth(b)},zu=(c,m,p,b)=>{if(b.minCol===0&&m.grid.columns===b.maxCol+1)return 0;const w=Oa(m,c,p),O=Ie(w,(z,q)=>z+q,0),R=Ie(w.slice(b.minCol,b.maxCol+1),(z,q)=>z+q,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(R)},pk=(c,m)=>{const p=st=>As(st.element,m),b=Fs(c),w=Pm(b),O=sh.getTableSize(c),R=qt.generate(w),z=ah(R,p),q="th:not("+m+"),td:not("+m+")",ue=Wp(b,"th,td",st=>As(st,q));Le(ue,Fn),El(w,R,z,p);const ke=qt.fromTable(c),Te=zu(c,ke,O,z);return tf(b,z,R,Te),b},$r=" ",ih=((c,m)=>{const p=w=>{if(!c(w))throw new Error("Can only get "+m+" value of a "+m+" node");return b(w).getOr("")},b=w=>c(w)?te.from(w.dom.nodeValue):te.none();return{get:p,getOption:b,set:(w,O)=>{if(!c(w))throw new Error("Can only set raw "+m+" value of a "+m+" node");w.dom.nodeValue=O}}})(pl,"text"),jr=c=>ih.get(c),Xm=c=>ih.getOption(c),fk=(c,m)=>ih.set(c,m),Zi=c=>Uo(c)==="img"?1:Xm(c).fold(()=>rr(c).length,m=>m.length),lh=c=>Xm(c).filter(m=>m.trim().length!==0||m.indexOf($r)>-1).isSome(),Fd=c=>At(c)&&za(c,"contenteditable")==="false",ci=["img","br"],ch=c=>lh(c)||ro(ci,Uo(c))||Fd(c),tb=c=>Mm(c,ch),j1=c=>Fu(c,ch),Fu=(c,m)=>{const p=b=>{const w=rr(b);for(let O=w.length-1;O>=0;O--){const R=w[O];if(m(R))return te.some(R);const z=p(R);if(z.isSome())return z}return te.none()};return p(c)},vk={scope:["row","col"]},dh=c=>()=>{const m=Qe.fromTag("td",c.dom);return uo(m,Qe.fromTag("br",c.dom)),m},uh=c=>()=>Qe.fromTag("col",c.dom),Fx=c=>()=>Qe.fromTag("colgroup",c.dom),Or=c=>()=>Qe.fromTag("tr",c.dom),Gc=(c,m,p)=>{const b=Mi(c,m);return En(p,(w,O)=>{w===null?Ko(b,O):qn(b,O,w)}),b},mh=c=>c,qm=(c,m,p)=>tb(c).map(b=>{const w=p.join(","),O=ve(b,w,R=>Qo(R,c));return lr(O,(R,z)=>{const q=Od(z);return uo(R,q),q},m)}).getOr(m),Vx=(c,m)=>{En(vk,(p,b)=>sa(c,b).filter(w=>ro(p,w)).each(w=>qn(m,b,w)))},Wa=(c,m,p)=>{const b=(O,R)=>{Ai(O.element,R),Dn(R,"height"),O.colspan!==1&&Dn(R,"width")},w=O=>{const R=Qe.fromTag(Uo(O.element),m.dom),z=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),q=z.length>0?qm(O.element,R,z):R;return uo(q,Qe.fromTag("br")),b(O,R),Vx(O.element,R),c(O.element,R),R};return{col:O=>{const R=Qe.fromTag(Uo(O.element),m.dom);return b(O,R),c(O.element,R),R},colgroup:Fx(m),row:Or(m),cell:w,replace:Gc,colGap:uh(m),gap:dh(m)}},of=c=>({col:uh(c),colgroup:Fx(c),row:Or(c),cell:dh(c),replace:mh,colGap:uh(c),gap:dh(c)}),G1=(c,m)=>{const p=(m||document).createElement("div");return p.innerHTML=c,rr(Qe.fromDom(p))},ob=c=>Ot(c,Qe.fromDom),$a=c=>m=>m.options.get(c),as="100%",nb=c=>{var m;const p=c.dom,b=(m=p.getParent(c.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:c.getBody();return Wm(Qe.fromDom(b))+"px"},Ui=(c,m)=>Jm(c)||!Zu(c)?m:ui(c)?{...m,width:nb(c)}:{...m,width:as},bk=(c,m)=>Jm(c)||Zu(c)?m:ui(c)?{...m,width:nb(c)}:{...m,width:as},Ym=c=>{const m=c.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const b=ro(["section","cells","sectionCells","auto"],p);return b?{value:p,valid:b}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const b=ro(["preservetable","resizetable"],p);return b?{value:p,valid:b}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Qm=c=>te.from(c.options.get("table_clone_elements")),Vu=c=>{const m=c.options.get("object_resizing");return ro(m.split(","),"table")},Zx=$a("table_header_type"),di=$a("table_column_resizing"),Ux=c=>di(c)==="preservetable",Wx=c=>di(c)==="resizetable",Ln=$a("table_sizing_mode"),K1=c=>Ln(c)==="relative",ui=c=>Ln(c)==="fixed",Jm=c=>Ln(c)==="responsive",rb=$a("table_resize_bars"),Zu=$a("table_style_by_css"),ma=$a("table_merge_content_on_paste"),nf=c=>{const m=c.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:bk(c,p)},rf=c=>{const m=c.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Ui(c,p)},yk=$a("table_use_colgroups"),sf=c=>vr(c,"[contenteditable]"),eg=(c,m=!1)=>Tt(c)?c.dom.isContentEditable:sf(c).fold(J(m),p=>Hn(p)==="true"),Hn=c=>c.dom.contentEditable,Kc=c=>Qe.fromDom(c.getBody()),Uu=c=>m=>Qo(m,Kc(c)),Xc=c=>{Ko(c,"data-mce-style");const m=p=>Ko(p,"data-mce-style");Le(Zc(c),m),Le(Lm(c),m),Le(Uc(c),m)},tg=c=>Qe.fromDom(c.selection.getStart()),dc=c=>c.getBoundingClientRect().width,qc=c=>c.getBoundingClientRect().height,og=(c,m)=>{const p=c.dom.getStyle(m,"width")||c.dom.getAttrib(m,"width");return te.from(p).filter(Eu)},X1=c=>/^(\d+(\.\d+)?)%$/.test(c),af=c=>/^(\d+(\.\d+)?)px$/.test(c),gh=c=>Wo(c,es("table")).exists(eg),sb=(c,m)=>{const p=m.column,b=m.column+m.colspan-1,w=m.row,O=m.row+m.rowspan-1;return p<=c.finishCol&&b>=c.startCol&&w<=c.finishRow&&O>=c.startRow},$x=(c,m)=>m.column>=c.startCol&&m.column+m.colspan-1<=c.finishCol&&m.row>=c.startRow&&m.row+m.rowspan-1<=c.finishRow,jx=(c,m)=>{let p=!0;const b=Oo($x,m);for(let w=m.startRow;w<=m.finishRow;w++)for(let O=m.startCol;O<=m.finishCol;O++)p=p&&qt.getAt(c,w,O).exists(b);return p?te.some(m):te.none()},ab=(c,m)=>Tm(Math.min(c.row,m.row),Math.min(c.column,m.column),Math.max(c.row+c.rowspan-1,m.row+m.rowspan-1),Math.max(c.column+c.colspan-1,m.column+m.colspan-1)),hh=(c,m,p)=>{const b=qt.findItem(c,m,Qo),w=qt.findItem(c,p,Qo);return b.bind(O=>w.map(R=>ab(O,R)))},Eo=(c,m,p)=>hh(c,m,p).bind(b=>jx(c,b)),St=(c,m,p,b)=>qt.findItem(c,m,Qo).bind(w=>{const O=p>0?w.row+w.rowspan-1:w.row,R=b>0?w.column+w.colspan-1:w.column;return qt.getAt(c,O+p,R+b).map(z=>z.element)}),Yc=(c,m,p)=>hh(c,m,p).map(b=>{const w=qt.filterItems(c,Oo(sb,b));return Ot(w,O=>O.element)}),ph=(c,m)=>{const p=(b,w)=>Kl(w,b);return qt.findItem(c,m,p).map(b=>b.element)},lf=(c,m,p)=>Us(c).bind(b=>{const w=cf(b);return St(w,c,m,p)}),ng=(c,m,p)=>{const b=cf(c);return Yc(b,m,p)},q1=(c,m,p,b,w)=>{const O=cf(c),R=Qo(c,p)?te.some(m):ph(O,m),z=Qo(c,w)?te.some(b):ph(O,b);return R.bind(q=>z.bind(ue=>Yc(O,q,ue)))},Jo=(c,m,p)=>{const b=cf(c);return Eo(b,m,p)},cf=qt.fromTable;var Gx=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],df=()=>{const c=ue=>Qe.fromDom(ue.dom.cloneNode(!1)),m=ue=>Xl(ue).dom,p=ue=>Jr(ue)?Uo(ue)==="body"?!0:ro(Gx,Uo(ue)):!1,b=ue=>Jr(ue)?ro(["br","img","hr","input"],Uo(ue)):!1,w=ue=>Jr(ue)&&za(ue,"contenteditable")==="false",O=(ue,ke)=>ue.dom.compareDocumentPosition(ke.dom),R=(ue,ke)=>{const Te=Ei(ue);wa(ke,Te)},z=ue=>{const ke=Uo(ue);return ro(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ke)},q=ue=>Jr(ue)?sa(ue,"lang"):te.none();return{up:J({selector:xo,closest:vr,predicate:Qn,all:ql}),down:J({selector:Zs,predicate:Vs}),styles:J({get:Ad,getRaw:Nm,set:No,remove:Dn}),attrs:J({get:za,set:qn,remove:Ko,copyTo:R}),insert:J({before:oi,after:wr,afterAll:Di,append:uo,appendAll:pr,prepend:ni,wrap:Vo}),remove:J({unwrap:Pc,remove:Fn}),create:J({nu:Qe.fromTag,clone:c,text:Qe.fromText}),query:J({comparePosition:O,prevSibling:Ti,nextSibling:zn}),property:J({children:rr,name:Uo,parent:Bo,document:m,isText:pl,isComment:Go,isElement:Jr,isSpecial:z,getLanguage:q,getText:jr,setText:fk,isBoundary:p,isEmptyTag:b,isNonEditable:w}),eq:Qo,is:Up}};const Re=(c,m,p,b)=>{const w=p[0],O=p.slice(1);return b(c,m,w,O)},ib=(c,m,p)=>p.length>0?Re(c,m,p,Kx):te.none(),Kx=(c,m,p,b)=>{const w=m(c,p);return lr(b,(O,R)=>{const z=m(c,R);return uf(c,O,z)},w)},uf=(c,m,p)=>m.bind(b=>p.filter(Oo(c.eq,b))),xk=(c,m)=>Oo(c.eq,m),rg=(c,m,p,b=io)=>{const w=[m].concat(c.up().all(m)),O=[p].concat(c.up().all(p)),R=ke=>hs(ke,b).fold(()=>ke,Te=>ke.slice(0,Te+1)),z=R(w),q=R(O),ue=I(z,ke=>Pe(q,xk(c,ke)));return{firstpath:z,secondpath:q,shared:ue}},lb=ib,Wu=rg,Xx=df(),$u=(c,m)=>lb(Xx,(p,b)=>c(b),m),wn=(c,m,p)=>Wu(Xx,c,m,p),mi=c=>xo(c,"table"),Y1=(c,m,p)=>{const b=w=>O=>p!==void 0&&p(O)||Qo(O,w);return Qo(c,m)?te.some({boxes:te.some([c]),start:c,finish:m}):mi(c).bind(w=>mi(m).bind(O=>{if(Qo(w,O))return te.some({boxes:ng(w,c,m),start:c,finish:m});if(Kl(w,O)){const R=ve(m,"td,th",b(w)),z=R.length>0?R[R.length-1]:m;return te.some({boxes:q1(w,c,w,m,O),start:c,finish:z})}else if(Kl(O,w)){const R=ve(c,"td,th",b(O)),z=R.length>0?R[R.length-1]:c;return te.some({boxes:q1(O,c,w,m,O),start:c,finish:z})}else return wn(c,m).shared.bind(R=>vr(R,"table",p).bind(z=>{const q=ve(m,"td,th",b(z)),ue=q.length>0?q[q.length-1]:m,ke=ve(c,"td,th",b(z)),Te=ke.length>0?ke[ke.length-1]:c;return te.some({boxes:q1(z,c,w,m,O),start:Te,finish:ue})}))}))},gi=(c,m)=>{const p=Zs(c,m);return p.length>0?te.some(p):te.none()},Q1=(c,m)=>I(c,p=>As(p,m)),J1=(c,m,p)=>Md(c,m).bind(b=>Md(c,p).bind(w=>$u(mi,[b,w]).map(O=>({first:b,last:w,table:O})))),fh=(c,m)=>xo(c,"table").bind(p=>Md(p,m).bind(b=>Y1(b,c).bind(w=>w.boxes.map(O=>({boxes:O,start:w.start,finish:w.finish}))))),Ck=(c,m,p,b,w)=>Q1(c,w).bind(O=>lf(O,m,p).bind(R=>fh(R,b))),Vd=(c,m)=>gi(c,m),wk=(c,m,p)=>J1(c,m,p).bind(b=>{const w=q=>Qo(c,q),O="thead,tfoot,tbody,table",R=xo(b.first,O,w),z=xo(b.last,O,w);return R.bind(q=>z.bind(ue=>Qo(q,ue)?Jo(b.table,b.first,b.last):te.none()))}),qx=qe,Yx=c=>{const m=(b,w)=>sa(b,w).exists(O=>parseInt(O,10)>1),p=b=>m(b,"rowspan")||m(b,"colspan");return c.length>0&&on(c,p)?te.some(c):te.none()},Qc=(c,m,p)=>m.length<=1?te.none():wk(c,p.firstSelectedSelector,p.lastSelectedSelector).map(b=>({bounds:b,cells:m})),mf="data-mce-selected",Sk="td["+mf+"],th["+mf+"]",Qx="["+mf+"]",vh="data-mce-first-selected",gt="td["+vh+"],th["+vh+"]",is="data-mce-last-selected",Jx="td["+is+"],th["+is+"]",kk=Qx,ju={selected:mf,selectedSelector:Sk,firstSelected:vh,firstSelectedSelector:gt,lastSelected:is,lastSelectedSelector:Jx},e0=(c,m,p)=>({element:p,mergable:Qc(m,c,ju),unmergable:Yx(c),selection:qx(c)}),cb=(c,m,p)=>({element:c,clipboard:m,generators:p}),gf=(c,m,p,b)=>({selection:qx(c),clipboard:p,generators:b}),bh=c=>Us(c).bind(m=>Vd(m,ju.firstSelectedSelector)).fold(J(c),m=>m[0]),eC=c=>(m,p)=>{const b=Uo(m),w=b==="col"||b==="colgroup"?bh(m):m;return vr(w,c,p)},t0=eC("th,td,caption"),yh=eC("th,td"),hi=c=>ob(c.model.table.getSelectedCells()),Wi=c=>Xo(hi(c),m=>As(m,ju.selectedSelector)),hf=c=>Us(c[0]).map(m=>{const p=pk(m,kk);return Xc(p),[p]}),tC=(c,m)=>Ot(m,p=>c.selection.serializer.serialize(p.dom,{})).join(""),pf=c=>Ot(c,m=>m.dom.innerText).join(""),db=(c,m)=>{c.on("BeforeGetContent",p=>{const b=w=>{p.preventDefault(),hf(w).each(O=>{p.content=p.format==="text"?pf(O):tC(c,O)})};if(p.selection===!0){const w=Wi(c);w.length>=1&&b(w)}}),c.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const b=hi(c);me(b).each(w=>{Us(w).each(O=>{const R=Xo(G1(p.content),q=>Uo(q)!=="meta"),z=es("table");if(ma(c)&&R.length===1&&z(R[0])){p.preventDefault();const q=Qe.fromDom(c.getDoc()),ue=of(q),ke=cb(w,R[0],ue);m.pasteCells(O,ke).each(()=>{c.focus()})}})})}})},sg=(c,m)=>({element:c,offset:m}),Jc=(c,m,p)=>c.property().isText(m)&&c.property().getText(m).trim().length===0||c.property().isComment(m)?p(m).bind(b=>Jc(c,b,p).orThunk(()=>te.some(b))):te.none(),ff=(c,m)=>c.property().isText(m)?c.property().getText(m).length:c.property().children(m).length,Ol=(c,m)=>{const p=Jc(c,m,c.query().prevSibling).getOr(m);if(c.property().isText(p))return sg(p,ff(c,p));const b=c.property().children(p);return b.length>0?Ol(c,b[b.length-1]):sg(p,ff(c,p))},Da=Ol,_k=df(),Ek=c=>Da(_k,c),Ok=(c,m)=>{Fc(c)||xe(c).each(p=>{const b=p.value/2;$s(c,b,p.unit),$s(m,b,p.unit)})},xh=c=>Ot(c,J(0)),$i=(c,m,p,b,w)=>w(c.slice(0,m)).concat(b).concat(w(c.slice(p))),ub=c=>(m,p,b,w)=>{if(c(b)){const O=Math.max(w,m[p]-Math.abs(b)),R=Math.abs(O-m[p]);return b>=0?R:-R}else return b},o0=ub(c=>c<0),vf=ub(Oe),n0=()=>{const c=(b,w,O,R,z)=>{const q=o0(b,w,R,z);return $i(b,w,O+1,[q,0],xh)},m=(b,w,O,R)=>{const z=(100+O)/100,q=Math.max(R,(b[w]+O)/z);return Ot(b,(ue,ke)=>(ke===w?q:ue/z)-ue)},p=(b,w,O,R,z,q)=>q?m(b,w,R,z):c(b,w,O,R,z);return{resizeTable:(b,w)=>b(w),clampTableDelta:o0,calcLeftEdgeDeltas:p,calcMiddleDeltas:(b,w,O,R,z,q,ue)=>p(b,O,R,z,q,ue),calcRightEdgeDeltas:(b,w,O,R,z,q)=>{if(q)return m(b,O,R,z);{const ue=o0(b,O,R,z);return xh(b.slice(0,O)).concat([ue])}},calcRedestributedWidths:(b,w,O,R)=>{if(R){const z=(w+O)/w,q=Ot(b,ue=>ue/z);return{delta:z*100-100,newSizes:q}}else return{delta:O,newSizes:b}}}},mb=()=>{const c=(m,p,b,w,O)=>{const R=w>=0?b:p,z=vf(m,R,w,O);return $i(m,p,b+1,[z,-z],xh)};return{resizeTable:(m,p,b)=>{b&&m(p)},clampTableDelta:(m,p,b,w,O)=>{if(O){if(b>=0)return b;{const R=Ie(m,(z,q)=>z+q-w,0);return Math.max(-R,b)}}else return o0(m,p,b,w)},calcLeftEdgeDeltas:c,calcMiddleDeltas:(m,p,b,w,O,R)=>c(m,b,w,O,R),calcRightEdgeDeltas:(m,p,b,w,O,R)=>{if(R)return xh(m);{const z=w/m.length;return Ot(m,J(z))}},calcRedestributedWidths:(m,p,b,w)=>({delta:0,newSizes:m})}},gb=c=>qt.fromTable(c).grid,Ch=es("th"),r0=c=>on(c,m=>Ch(m.element)),oC=(c,m)=>c&&m?"sectionCells":c?"section":"cells",s0=c=>{const m=c.section==="thead",p=Cn(hb(c.cells),"th");return c.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:oC(m,p)}:{type:"body"}},hb=c=>{const m=Xo(c,p=>Ch(p.element));return m.length===0?te.some("td"):m.length===c.length?te.some("th"):te.none()},Tk=c=>{const m=Ot(c,w=>s0(w).type),p=ro(m,"header"),b=ro(m,"footer");if(!p&&!b)return te.some("body");{const w=ro(m,"body");return p&&!w&&!b?te.some("header"):!p&&!w&&b?te.some("footer"):te.none()}},pb=c=>cr(c.all,m=>{const p=s0(m);return p.type==="header"?te.from(p.subType):te.none()}),wh=(c,m,p)=>Vn(p(c.element,m),!0,c.isLocked),fb=(c,m)=>c.section!==m?Jl(c.element,c.cells,m,c.isNew):c,Tl=()=>({transformRow:fb,transformCell:(c,m,p)=>{const b=p(c.element,m),w=Uo(b)!=="td"?_m(b,"td"):b;return Vn(w,c.isNew,c.isLocked)}}),nC=()=>({transformRow:fb,transformCell:wh}),Gu=()=>({transformRow:(c,m)=>fb(c,m==="thead"?"tbody":m),transformCell:wh}),ag={getTableSectionType:(c,m)=>{const p=qt.fromTable(c);switch(pb(p).getOr(m)){case"section":return Tl();case"sectionCells":return nC();case"cells":return Gu()}},section:Tl,sectionCells:nC,cells:Gu,fallback:()=>({transformRow:qe,transformCell:wh})},bf=(c,m,p,b)=>{p===b?Ko(c,m):qn(c,m,p)},a0=(c,m,p)=>{ei(Rs(c,m)).fold(()=>ni(c,p),b=>wr(b,p))},vb=(c,m)=>{const p=Va(c,m).getOrThunk(()=>{const b=Qe.fromTag(m,Ic(c).dom);return m==="thead"?a0(c,"caption,colgroup",b):m==="colgroup"?a0(c,"caption",b):uo(c,b),b});return Ql(p),p},yf=(c,m)=>{const p=[],b=[],w=$e=>Ot($e,Xe=>{Xe.isNew&&p.push(Xe.element);const Nt=Xe.element;return Ql(Nt),Le(Xe.cells,mt=>{mt.isNew&&b.push(mt.element),bf(mt.element,"colspan",mt.colspan,1),bf(mt.element,"rowspan",mt.rowspan,1),uo(Nt,mt.element)}),Nt}),O=$e=>Bn($e,Xe=>Ot(Xe.cells,Nt=>(bf(Nt.element,"span",Nt.colspan,1),Nt.element))),R=($e,Xe)=>{const Nt=vb(c,Xe),mt=(Xe==="colgroup"?O:w)($e);pr(Nt,mt)},z=$e=>{Va(c,$e).each(Fn)},q=($e,Xe)=>{$e.length>0?R($e,Xe):z(Xe)},ue=[],ke=[],Te=[],st=[];return Le(m,$e=>{switch($e.section){case"thead":ue.push($e);break;case"tbody":ke.push($e);break;case"tfoot":Te.push($e);break;case"colgroup":st.push($e);break}}),q(st,"colgroup"),q(ue,"thead"),q(ke,"tbody"),q(Te,"tfoot"),{newRows:p,newCells:b}},rC=c=>Ot(c,m=>{const p=Od(m.element);return Le(m.cells,b=>{const w=Fs(b.element);bf(w,"colspan",b.colspan,1),bf(w,"rowspan",b.rowspan,1),uo(p,w)}),p}),uc=(c,m)=>Ot(c,p=>Ws(p,m)),i0=(c,m)=>c[m],bb=(c,m)=>{if(c.length===0)return 0;const p=c[0];return hs(c,b=>!m(p.element,b.element)).getOr(c.length)},yb=(c,m,p,b)=>{const w=i0(c,m),O=w.section==="colgroup",R=bb(w.cells.slice(p),b),z=O?1:bb(uc(c.slice(m),p),b);return{colspan:R,rowspan:z}},Dk=(c,m)=>{const p=Ot(c,w=>Ot(w.cells,io)),b=(w,O,R,z)=>{for(let q=w;q<w+R;q++)for(let ue=O;ue<O+z;ue++)p[q][ue]=!0};return Ot(c,(w,O)=>{const R=Bn(w.cells,(z,q)=>{if(p[O][q]===!1){const ue=yb(c,O,q,m);return b(O,q,ue.rowspan,ue.colspan),[Td(z.element,ue.rowspan,ue.colspan,z.isNew)]}else return[]});return zr(w.element,R,w.section,w.isNew)})},Kt=(c,m,p)=>{const b=[];Le(c.colgroups,w=>{const O=[];for(let R=0;R<c.grid.columns;R++){const z=qt.getColumnAt(c,R).map(q=>Vn(q.element,p,!1)).getOrThunk(()=>Vn(m.colGap(),!0,!1));O.push(z)}b.push(Jl(w.element,O,"colgroup",p))});for(let w=0;w<c.grid.rows;w++){const O=[];for(let q=0;q<c.grid.columns;q++){const ue=qt.getAt(c,w,q).map(ke=>Vn(ke.element,p,ke.isLocked)).getOrThunk(()=>Vn(m.gap(),!0,!1));O.push(ue)}const R=c.all[w],z=Jl(R.element,O,R.section,p);b.push(z)}return b},sC=(c,m)=>Kt(c,m,!1),Tn=c=>Dk(c,Qo),xb=(c,m)=>cr(c.all,p=>I(p.cells,b=>Qo(m,b.element))),ls=(c,m,p)=>{const b=Ot(m.selection,O=>Yg(O).bind(R=>xb(c,R)).filter(p)),w=ec(b);return Am(w.length>0,w)},er=(c,m,p,b,w)=>(O,R,z,q)=>{const ue=qt.fromTable(O),ke=te.from(q==null?void 0:q.section).getOrThunk(ag.fallback);return m(ue,R).map(Te=>{const st=sC(ue,z),$e=c(st,Te,Qo,w(z),ke),Xe=Cl($e.grid),Nt=Tn($e.grid);return{info:Te,grid:Nt,cursor:$e.cursor,lockedColumns:Xe}}).bind(Te=>{const st=yf(O,Te.grid),$e=te.from(q==null?void 0:q.sizing).getOrThunk(()=>sh.getTableSize(O)),Xe=te.from(q==null?void 0:q.resize).getOrThunk(mb);return p(O,Te.grid,Te.info,{sizing:$e,resize:Xe,section:ke}),b(O),Ko(O,Ur),Te.lockedColumns.length>0&&qn(O,Ur,Te.lockedColumns.join(",")),te.some({cursor:Te.cursor,newRows:st.newRows,newCells:st.newCells})})},xs=(c,m)=>Yg(m.element).bind(p=>xb(c,p).map(b=>({...b,generators:m.generators,clipboard:m.clipboard}))),Tr=(c,m)=>ls(c,m,Oe).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Mk=(c,m)=>m.mergable,Ak=(c,m)=>m.unmergable,ed=(c,m)=>ls(c,m,Oe),cs=(c,m)=>ls(c,m,p=>!p.isLocked),Zd=(c,m)=>xb(c,m).exists(p=>!p.isLocked),Cb=(c,m)=>on(m,p=>Zd(c,p)),Dl=(c,m)=>Mk(c,m).filter(p=>Cb(c,p.cells)),Gs=(c,m)=>Ak(c,m).filter(p=>Cb(c,p)),aC=(c,m,p,b)=>{const w=Zr(c).rows;if(w.length===0)return c;for(let O=m.startRow;O<=m.finishRow;O++)for(let R=m.startCol;R<=m.finishCol;R++){const z=w[O],q=Ws(z,R).isLocked;Nu(z,R,Vn(b(),!1,q))}return c},iC=(c,m,p,b)=>{const w=Zr(c).rows;let O=!0;for(let R=0;R<w.length;R++)for(let z=0;z<da(w[0]);z++){const q=w[R],ue=Ws(q,z),ke=ue.element,Te=p(ke,m);Te&&!O?Nu(q,z,Vn(b(),!0,ue.isLocked)):Te&&(O=!1)}return c},Ku=(c,m)=>Ie(c,(p,b)=>Pe(p,w=>m(w.element,b.element))?p:p.concat([b]),[]),xf=(c,m,p,b)=>(m>0&&m<c[0].cells.length&&Le(c,w=>{const O=w.cells[m-1];let R=0;const z=b();for(;w.cells.length>m+R&&p(O.element,w.cells[m+R].element);)Nu(w,m+R,Vn(z,!0,w.cells[m+R].isLocked)),R++}),c),wb=(c,m,p,b)=>{const w=Zr(c).rows;if(m>0&&m<w.length){const O=w[m-1].cells,R=Ku(O,p);Le(R,z=>{let q=te.none();for(let ue=m;ue<w.length;ue++)for(let ke=0;ke<da(w[0]);ke++){const Te=w[ue],st=Ws(Te,ke);p(st.element,z.element)&&(q.isNone()&&(q=te.some(b())),q.each($e=>{Nu(Te,ke,Vn($e,!0,st.isLocked))}))}})}return c},Sh=c=>{const m=O=>O(c),p=J(c),b=()=>w,w={tag:!0,inner:c,fold:(O,R)=>R(c),isValue:Oe,isError:io,map:O=>Ud.value(O(c)),mapError:b,bind:m,exists:m,forall:m,getOr:p,or:b,getOrThunk:p,orThunk:b,getOrDie:p,each:O=>{O(c)},toOptional:()=>te.some(c)};return w},Xu=c=>{const m=()=>p,p={tag:!1,inner:c,fold:(b,w)=>b(c),isValue:io,isError:Oe,map:m,mapError:b=>Ud.error(b(c)),bind:m,exists:io,forall:Oe,getOr:qe,or:qe,getOrThunk:Rn,orThunk:Rn,getOrDie:so(String(c)),each:ft,toOptional:te.none};return p},Ud={value:Sh,error:Xu,fromOption:(c,m)=>c.fold(()=>Xu(m),Sh)},Cf=(c,m,p)=>{if(c.row>=m.length||c.column>da(m[0]))return Ud.error("invalid start address out of table bounds, row: "+c.row+", column: "+c.column);const b=m.slice(c.row),w=b[0].cells.slice(c.column),O=da(p[0]),R=p.length;return Ud.value({rowDelta:b.length-R,colDelta:w.length-O})},kh=(c,m)=>{const p=da(c[0]),b=da(m[0]);return{rowDelta:0,colDelta:p-b}},_h=(c,m)=>{const p=c.length,b=m.length;return{rowDelta:p-b,colDelta:0}},l0=(c,m,p,b)=>{const w=m.section==="colgroup"?p.col:p.cell;return fo(c,O=>Vn(w(),!0,b(O)))},lC=(c,m,p,b)=>{const w=c[c.length-1];return c.concat(fo(m,()=>{const O=w.section==="colgroup"?p.colgroup:p.row,R=jm(w,O,qe),z=l0(R.cells.length,R,p,q=>Xn(b,q.toString()));return Lu(R,z)}))},Rk=(c,m,p,b)=>Ot(c,w=>{const O=l0(m,w,p,io);return th(w,b,O)}),cC=(c,m,p)=>Ot(c,b=>Ie(p,(w,O)=>{const R=l0(1,b,m,Oe)[0];return Z1(w,O,R)},b)),Eh=(c,m,p)=>{const b=m.colDelta<0?Rk:qe,w=m.rowDelta<0?lC:qe,O=Cl(c),R=da(c[0]),z=Pe(O,ke=>ke===R-1),q=b(c,Math.abs(m.colDelta),p,z?R-1:R),ue=Cl(q);return w(q,Math.abs(m.rowDelta),p,It(ue,Oe))},dC=(c,m,p,b)=>{const w=Ws(c[m],p),O=Oo(b,w.element),R=c[m];return c.length>1&&da(R)>1&&(p>0&&O(To(R,p-1))||p<R.cells.length-1&&O(To(R,p+1))||m>0&&O(To(c[m-1],p))||m<c.length-1&&O(To(c[m+1],p)))},tr=(c,m,p,b,w,O)=>{const R=c.row,z=c.column,q=p.length,ue=da(p[0]),ke=R+q,Te=z+ue+O.length,st=It(O,Oe);for(let $e=R;$e<ke;$e++){let Xe=0;for(let Nt=z;Nt<Te;Nt++){if(st[Nt]){Xe++;continue}dC(m,$e,Nt,w)&&iC(m,To(m[$e],Nt),w,b.cell);const mt=Nt-z-Xe,Gt=Ws(p[$e-R],mt),Xt=Gt.element,sn=b.replace(Xt);Nu(m[$e],Nt,Vn(sn,!0,Gt.isLocked))}}return m},uC=(c,m,p)=>{const b=da(m[0]),w=Zr(m).cols.length+c.row,O=fo(b-c.column,z=>z+c.column),R=I(O,z=>on(p,q=>q!==z)).getOr(b-1);return{row:w,column:R}},mC=(c,m,p)=>Xo(p,b=>b>=c.column&&b<=da(m[0])+c.column),gC=(c,m,p,b,w)=>{const O=Cl(m),R=uC(c,m,O),z=Zr(p).rows,q=mC(R,z,O);return Cf(R,m,z).map(ue=>{const ke={...ue,colDelta:ue.colDelta-q.length},Te=Eh(m,ke,b),st=Cl(Te),$e=mC(R,z,st);return tr(R,Te,z,b,w,$e)})},qu=(c,m,p,b,w)=>{xf(m,c,w,b.cell);const O=_h(p,m),R=Eh(p,O,b),z=_h(m,R),q=Eh(m,z,b);return Ot(q,(ue,ke)=>th(ue,c,R[ke].cells))},Cs=(c,m,p,b,w)=>{wb(m,c,w,b.cell);const O=Cl(m),R=kh(m,p),z={...R,colDelta:R.colDelta-O.length},q=Eh(m,z,b),{cols:ue,rows:ke}=Zr(q),Te=Cl(q),st=kh(p,m),$e={...st,colDelta:st.colDelta+Te.length},Xe=cC(p,b,Te),Nt=Eh(Xe,$e,b);return[...ue,...ke.slice(0,c),...Nt,...ke.slice(c,ke.length)]},ji=(c,m,p,b)=>jm(c,w=>b(w,p),m),c0=(c,m,p,b,w)=>{const{rows:O,cols:R}=Zr(c),z=O.slice(0,m),q=O.slice(m),ue=ji(O[p],(ke,Te)=>m>0&&m<O.length&&b(To(O[m-1],Te),To(O[m],Te))?Ws(O[m],Te):Vn(w(ke.element,b),!0,ke.isLocked),b,w);return[...R,...z,ue,...q]},Yu=(c,m,p,b,w,O,R)=>{if(p==="colgroup"||!b){const z=Ws(c,w);return Vn(R(z.element,O),!0,!1)}else return Ws(c,m)},d0=(c,m,p,b,w)=>Ot(c,O=>{const R=m>0&&m<da(O)&&b(To(O,m-1),To(O,m)),z=Yu(O,m,O.section,R,p,b,w);return Z1(O,m,z)}),Bk=(c,m)=>Bn(c,p=>{const b=p.cells,w=lr(m,(O,R)=>R>=0&&R<O.length?O.slice(0,R).concat(O.slice(R+1)):O,b);return w.length>0?[Jl(p.element,w,p.section,p.isNew)]:[]}),Nk=(c,m,p)=>{const{rows:b,cols:w}=Zr(c);return[...w,...b.slice(0,m),...b.slice(p+1)]},Sb=(c,m,p,b)=>To(c[m],p)!==void 0&&m>0&&b(To(c[m-1],p),To(c[m],p)),pi=(c,m,p)=>m>0&&p(To(c,m-1),To(c,m)),Wd=(c,m,p,b)=>Sb(c,m,p,b)||pi(c[m],p,b),hn=(c,m)=>on(m,qe)&&r0(c.cells)?Oe:(p,b,w)=>!(Uo(p.element)==="th"&&m[w]),Ml=(c,m)=>on(m,qe)&&r0(c)?Oe:(p,b,w)=>!(Uo(p.element)==="th"&&m[b]),Oh=(c,m,p,b)=>{const w=R=>R==="row"?kr(m):Fc(m),O=R=>w(R)?`${R}group`:R;return c?Ch(m)?O(p):null:b&&Ch(m)?O(p==="row"?"col":"row"):null},hC=(c,m)=>(p,b,w)=>te.some(Oh(c,p.element,"col",m[w])),Th=(c,m)=>(p,b)=>te.some(Oh(c,p.element,"row",m[b])),Dh=(c,m,p)=>Vn(p(c.element,m),!0,c.isLocked),$d=(c,m,p,b,w,O,R)=>{const z=q=>Pe(m,ue=>p(q.element,ue.element));return Ot(c,(q,ue)=>Hi(q,(ke,Te)=>{if(z(ke)){const st=R(ke,ue,Te)?w(ke,p,b):ke;return O(st,ue,Te).each($e=>{ts(st.element,{scope:te.from($e)})}),st}else return ke}))},kb=(c,m,p)=>Bn(c,(b,w)=>Wd(c,w,m,p)?[]:[Ws(b,m)]),ig=(c,m,p)=>{const b=c[m];return Bn(b.cells,(w,O)=>Wd(c,m,O,p)?[]:[w])},u0=(c,m,p,b,w)=>{const O=Zr(c).rows,R=Bn(m,ke=>kb(O,ke,b)),z=Ot(O,ke=>r0(ke.cells)),q=Ml(R,z),ue=Th(p,z);return $d(c,R,b,w,Dh,ue,q)},Lk=(c,m,p,b,w,O,R)=>{const{cols:z,rows:q}=Zr(c),ue=q[m[0]],ke=Bn(m,mt=>ig(q,mt,w)),Te=Ot(ue.cells,(mt,Gt)=>r0(kb(q,Gt,w))),st=[...q];Le(m,mt=>{st[mt]=R.transformRow(q[mt],p)});const $e=[...z,...st],Xe=hn(ue,Te),Nt=hC(b,Te);return $d($e,ke,w,O,R.transformCell,Nt,Xe)},wf=(c,m,p,b)=>{const w=Zr(c).rows,O=Ot(m,R=>Ws(w[R.row],R.column));return $d(c,O,p,b,Dh,te.none,Oe)},fi={generate:c=>{if(!Jt(c))throw new Error("cases must be an array");if(c.length===0)throw new Error("there must be at least one case");const m=[],p={};return Le(c,(b,w)=>{const O=Et(b);if(O.length!==1)throw new Error("one and only one name per case");const R=O[0],z=b[R];if(p[R]!==void 0)throw new Error("duplicate key detected:"+R);if(R==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Jt(z))throw new Error("case arguments must be an array");m.push(R),p[R]=(...q)=>{const ue=q.length;if(ue!==z.length)throw new Error("Wrong number of arguments to case "+R+". Expected "+z.length+" ("+z+"), got "+ue);return{fold:(...ke)=>{if(ke.length!==c.length)throw new Error("Wrong number of arguments to fold. Expected "+c.length+", got "+ke.length);return ke[w].apply(null,q)},match:ke=>{const Te=Et(ke);if(m.length!==Te.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Te.join(","));if(!on(m,st=>ro(Te,st)))throw new Error("Not all branches were specified when using match. Specified: "+Te.join(", ")+`
Required: `+m.join(", "));return ke[R].apply(null,q)},log:ke=>{console.log(ke,{constructors:m,constructor:R,params:q})}}}}),p}},Mh={...fi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Hk=(c,m)=>c.length===0?Mh.none():c.length===1?Mh.only(0):m===0?Mh.left(0,1):m===c.length-1?Mh.right(m-1,m):m>0&&m<c.length-1?Mh.middle(m-1,m,m+1):Mh.none(),m0=(c,m,p,b,w)=>{const O=c.slice(0),R=Hk(c,m),z=J(Ot(O,J(0))),q=st=>b.singleColumnWidth(O[st],p),ue=(st,$e)=>w.calcLeftEdgeDeltas(O,st,$e,p,b.minCellWidth(),b.isRelative),ke=(st,$e,Xe)=>w.calcMiddleDeltas(O,st,$e,Xe,p,b.minCellWidth(),b.isRelative),Te=(st,$e)=>w.calcRightEdgeDeltas(O,st,$e,p,b.minCellWidth(),b.isRelative);return R.fold(z,q,ue,ke,Te)},pC=(c,m,p)=>{let b=0;for(let w=c;w<m;w++)b+=p[w]!==void 0?p[w]:0;return b},fC=(c,m)=>{const p=qt.justCells(c);return Ot(p,b=>{const w=pC(b.column,b.column+b.colspan,m);return{element:b.element,width:w,colspan:b.colspan}})},g0=(c,m)=>{const p=qt.justColumns(c);return Ot(p,(b,w)=>({element:b.element,width:m[w],colspan:b.colspan}))},Ik=(c,m)=>{const p=qt.justCells(c);return Ot(p,b=>{const w=pC(b.row,b.row+b.rowspan,m);return{element:b.element,height:w,rowspan:b.rowspan}})},vC=(c,m)=>Ot(c.all,(p,b)=>({element:p.element,height:m[b]})),Pk=c=>lr(c,(m,p)=>m+p,0),Qu=(c,m)=>qt.hasColumns(c)?g0(c,m):fC(c,m),jd=(c,m,p)=>{const b=Qu(c,m);Le(b,w=>{p.setElementWidth(w.element,w.width)})},Gd=(c,m,p,b,w)=>{const O=qt.fromTable(c),R=w.getCellDelta(m),z=w.getWidths(O,w),q=p===O.grid.columns-1,ue=b.clampTableDelta(z,p,R,w.minCellWidth(),q),ke=m0(z,p,ue,w,b),Te=Ot(ke,(st,$e)=>st+z[$e]);jd(O,Te,w),b.resizeTable(w.adjustTableWidth,ue,q)},mo=(c,m,p,b)=>{const w=qt.fromTable(c),O=ge(w,c,b),R=Ot(O,(ke,Te)=>p===Te?Math.max(m+ke,ka()):ke),z=Ik(w,R),q=vC(w,R);Le(q,ke=>{_a(ke.element,ke.height)}),Le(z,ke=>{_a(ke.element,ke.height)});const ue=Pk(R);_a(c,ue)},Ma=(c,m,p,b,w)=>{const O=qt.generate(m),R=b.getWidths(O,b),z=b.pixelWidth(),{newSizes:q,delta:ue}=w.calcRedestributedWidths(R,z,p.pixelDelta,b.isRelative);jd(O,q,b),b.adjustTableWidth(ue)},td=(c,m,p,b)=>{const w=qt.generate(m),O=b.getWidths(w,b);jd(w,O,b)},od=c=>Ie(c,(m,p)=>Pe(m,b=>b.column===p.column)?m:m.concat([p]),[]).sort((m,p)=>m.column-p.column),en=es("col"),h0=es("colgroup"),Sf=c=>Uo(c)==="tr"||h0(c),ws=c=>{const m=Wn(c,"colspan",1),p=Wn(c,"rowspan",1);return{element:c,colspan:m,rowspan:p}},Ju=(c,m=ws)=>{const p=R=>en(R.element)?c.col(R):c.cell(R),b=R=>h0(R.element)?c.colgroup(R):c.row(R),w=R=>{if(Sf(R))return b({element:R});{const z=R,q=p(m(z));return O=te.some({item:z,replacement:q}),q}};let O=te.none();return{getOrInit:(R,z)=>O.fold(()=>w(R),q=>z(R,q.item)?q.replacement:w(R))}},bC=c=>m=>{const p=[],b=(O,R)=>I(p,z=>R(z.item,O)),w=O=>{const R=c==="td"?{scope:null}:{},z=m.replace(O,c,R);return p.push({item:O,sub:z}),z};return{replaceOrInit:(O,R)=>{if(Sf(O)||en(O))return O;{const z=O;return b(z,R).fold(()=>w(z),q=>R(O,q.item)?q.sub:w(z))}}}},Kd=c=>sa(c,"scope").map(m=>m.substr(0,3)),ds={modification:Ju,transform:bC,merging:c=>({unmerge:m=>{const p=Kd(m);return p.each(b=>qn(m,"scope",b)),()=>{const b=c.cell({element:m,colspan:1,rowspan:1});return Dn(b,"width"),Dn(m,"width"),p.each(w=>qn(b,"scope",w)),b}},merge:m=>{const p=()=>{const b=ec(Ot(m,Kd));if(b.length===0)return te.none();{const w=b[0],O=["row","col"];return Pe(b,R=>R!==w&&ro(O,R))?te.none():te.from(w)}};return Dn(m[0],"width"),p().fold(()=>Ko(m[0],"scope"),b=>qn(m[0],"scope",b+"group")),J(m[0])}})},p0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ce=(c,m)=>{const p=c.property().name(m);return ro(["ol","ul"],p)},Ah=(c,m)=>{const p=c.property().name(m);return ro(p0,p)},_b=(c,m)=>ro(["br","img","hr","input"],c.property().name(m)),f0=df(),Rh=c=>Ah(f0,c),Al=c=>Ce(f0,c),Eb=c=>_b(f0,c),lg=c=>{const m=es("br"),p=z=>on(z,q=>m(q)||pl(q)&&jr(q).trim().length===0),b=z=>Uo(z)==="li"||Qn(z,Al).isSome(),w=z=>zn(z).map(q=>Rh(q)?!0:Eb(q)?Uo(q)!=="img":!1).getOr(!1),O=z=>j1(z).bind(q=>{const ue=w(q);return Bo(q).map(ke=>ue===!0||b(ke)||m(q)||Rh(ke)&&!Qo(z,ke)?[]:[Qe.fromTag("br")])}).getOr([]),R=(()=>{const z=Bn(c,q=>{const ue=rr(q);return p(ue)?[]:ue.concat(O(q))});return z.length===0?[Qe.fromTag("br")]:z})();Ql(c[0]),pr(c[0],R)},Aa=c=>eg(c,!0),v0=c=>{Zc(c).length===0&&Fn(c)},Dr=(c,m)=>({grid:c,cursor:m}),yC=c=>cr(c,m=>cr(m.cells,p=>{const b=p.element;return Am(Aa(b),b)})),em=(c,m,p)=>{var b,w;const O=Zr(c).rows;return te.from((w=(b=O[m])===null||b===void 0?void 0:b.cells[p])===null||w===void 0?void 0:w.element).filter(Aa).orThunk(()=>yC(O))},Ks=(c,m,p)=>{const b=em(c,m,p);return Dr(c,b)},kf=c=>Ie(c,(m,p)=>Pe(m,b=>b.row===p.row)?m:m.concat([p]),[]).sort((m,p)=>m.row-p.row),Ob=(c,m,p,b)=>{const w=m[0].row,O=kf(m),R=lr(O,(z,q)=>({grid:c0(z.grid,w,q.row+z.delta,p,b.getOrInit),delta:z.delta+1}),{grid:c,delta:0}).grid;return Ks(R,w,m[0].column)},Tb=(c,m,p,b)=>{const w=kf(m),O=w[w.length-1],R=O.row+O.rowspan,z=lr(w,(q,ue)=>c0(q,R,ue.row,p,b.getOrInit),c);return Ks(z,R,m[0].column)},Db=(c,m,p,b)=>{const w=m.details,O=od(w),R=O[0].column,z=lr(O,(q,ue)=>({grid:d0(q.grid,R,ue.column+q.delta,p,b.getOrInit),delta:q.delta+1}),{grid:c,delta:0}).grid;return Ks(z,w[0].row,R)},Mb=(c,m,p,b)=>{const w=m.details,O=w[w.length-1],R=O.column+O.colspan,z=od(w),q=lr(z,(ue,ke)=>d0(ue,R,ke.column,p,b.getOrInit),c);return Ks(q,w[0].row,R)},b0=(c,m,p,b)=>{const w=od(m),O=Ot(w,z=>z.column),R=u0(c,O,!0,p,b.replaceOrInit);return Ks(R,m[0].row,m[0].column)},zk=(c,m,p,b)=>{const w=wf(c,m,p,b.replaceOrInit);return Ks(w,m[0].row,m[0].column)},us=(c,m,p,b)=>{const w=od(m),O=Ot(w,z=>z.column),R=u0(c,O,!1,p,b.replaceOrInit);return Ks(R,m[0].row,m[0].column)},Ss=(c,m,p,b)=>{const w=wf(c,m,p,b.replaceOrInit);return Ks(w,m[0].row,m[0].column)},ks=(c,m)=>(p,b,w,O,R)=>{const z=kf(b),q=Ot(z,ke=>ke.row),ue=Lk(p,q,c,m,w,O.replaceOrInit,R);return Ks(ue,b[0].row,b[0].column)},ga=ks("thead",!0),Ls=ks("tbody",!1),Mr=ks("tfoot",!1),Ab=(c,m,p,b)=>{const w=od(m.details),O=Bk(c,Ot(w,z=>z.column)),R=O.length>0?O[0].cells.length-1:0;return Ks(O,w[0].row,Math.min(w[0].column,R))},y0=(c,m,p,b)=>{const w=kf(m),O=Nk(c,w[0].row,w[w.length-1].row),R=O.length>0?O.length-1:0;return Ks(O,Math.min(m[0].row,R),m[0].column)},xC=(c,m,p,b)=>{const w=m.cells;lg(w);const O=aC(c,m.bounds,p,b.merge(w));return Dr(O,te.from(w[0]))},CC=(c,m,p,b)=>{const w=lr(m,(O,R)=>iC(O,R,p,b.unmerge(R)),c);return Dr(w,te.from(m[0]))},Rb=(c,m,p,b)=>{const w=((R,z)=>{const q=qt.fromTable(R);return Kt(q,z,!0)})(m.clipboard,m.generators),O=Em(m.row,m.column);return gC(O,c,w,m.generators,p).fold(()=>Dr(c,te.some(m.element)),R=>Ks(R,m.row,m.column))},Bh=(c,m,p)=>{const b=P1(c,p.section),w=qt.generate(b);return Kt(w,m,!0)},Bb=(c,m,p,b)=>{const w=Zr(c).rows,O=m.cells[0].column,R=w[m.cells[0].row],z=Bh(m.clipboard,m.generators,R),q=qu(O,c,z,m.generators,p);return Ks(q,m.cells[0].row,m.cells[0].column)},_f=(c,m,p,b)=>{const w=Zr(c).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,R=w[m.cells[0].row],z=Bh(m.clipboard,m.generators,R),q=qu(O,c,z,m.generators,p);return Ks(q,m.cells[0].row,m.cells[0].column)},wC=(c,m,p,b)=>{const w=Zr(c).rows,O=m.cells[0].row,R=w[O],z=Bh(m.clipboard,m.generators,R),q=Cs(O,c,z,m.generators,p);return Ks(q,m.cells[0].row,m.cells[0].column)},SC=(c,m,p,b)=>{const w=Zr(c).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,R=w[m.cells[0].row],z=Bh(m.clipboard,m.generators,R),q=Cs(O,c,z,m.generators,p);return Ks(q,m.cells[0].row,m.cells[0].column)},Ra=(c,m)=>{const p=qt.fromTable(c);return ed(p,m).bind(b=>{const w=b[b.length-1],O=b[0].column,R=w.column+w.colspan,z=qo(Ot(p.all,q=>Xo(q.cells,ue=>ue.column>=O&&ue.column<R)));return hb(z)}).getOr("")},nd=(c,m)=>{const p=qt.fromTable(c);return ed(p,m).bind(hb).getOr("")},Nb=(c,m)=>{const p=qt.fromTable(c);return ed(p,m).bind(b=>{const w=b[b.length-1],O=b[0].row,R=w.row+w.rowspan,z=p.all.slice(O,R);return Tk(z)}).getOr("")},Lb=(c,m,p,b)=>td(c,m,p,b.sizing),Hb=(c,m,p,b)=>Ma(c,m,p,b.sizing,b.resize),kC=(c,m)=>Pe(m,p=>p.column===0&&p.isLocked),Ib=(c,m)=>Pe(m,p=>p.column+p.colspan>=c.grid.columns&&p.isLocked),x0=(c,m)=>{const p=qp(c),b=od(m);return Ie(b,(w,O)=>{const R=p[O.column].map(Er).getOr(0);return w+R},0)},We=c=>(m,p)=>ed(m,p).filter(b=>!(c?kC:Ib)(m,b)).map(b=>({details:b,pixelDelta:x0(m,b)})),_C=(c,m)=>cs(c,m).map(p=>({details:p,pixelDelta:-x0(c,p)})),Gr=c=>(m,p)=>Tr(m,p).filter(b=>!(c?kC:Ib)(m,b.cells)),Ef=ds.transform("th"),Of=ds.transform("td"),Fk=er(Ob,ed,ft,ft,ds.modification),ja=er(Tb,ed,ft,ft,ds.modification),EC=er(Db,We(!0),Hb,ft,ds.modification),tt=er(Mb,We(!1),Hb,ft,ds.modification),Tf=er(Ab,_C,Hb,v0,ds.modification),Nh=er(y0,ed,ft,v0,ds.modification),rd=er(b0,cs,ft,ft,Ef),mc=er(us,cs,ft,ft,Of),Pb=er(ga,cs,ft,ft,Ef),Gi=er(Ls,cs,ft,ft,Of),Vk=er(Mr,cs,ft,ft,Of),OC=er(zk,cs,ft,ft,Ef),C0=er(Ss,cs,ft,ft,Of),TC=er(xC,Dl,Lb,ft,ds.merging),Hs=er(CC,Gs,Lb,ft,ds.merging),cg=er(Rb,xs,Lb,ft,ds.modification),Zk=er(Bb,Gr(!0),ft,ft,ds.modification),DC=er(_f,Gr(!1),ft,ft,ds.modification),Uk=er(wC,Tr,ft,ft,ds.modification),Wk=er(SC,Tr,ft,ft,ds.modification),$k=Ra,MC=nd,AC=Nb,w0=(c,m)=>c.dispatch("NewRow",{node:m}),zb=(c,m)=>c.dispatch("NewCell",{node:m}),tm=(c,m,p)=>{c.dispatch("TableModified",{...p,table:m})},jk=(c,m,p,b,w)=>{c.dispatch("TableSelectionChange",{cells:m,start:p,finish:b,otherCells:w})},S0=c=>{c.dispatch("TableSelectionClear")},Gk=(c,m,p,b,w)=>{c.dispatch("ObjectResizeStart",{target:m,width:p,height:b,origin:w})},Kk=(c,m,p,b,w)=>{c.dispatch("ObjectResized",{target:m,width:p,height:b,origin:w})},k0={structure:!1,style:!0},Ar={structure:!0,style:!1},RC={structure:!0,style:!0},_0=(c,m)=>K1(c)?sh.percentageSize(m):ui(c)?sh.pixelSize(m):sh.getTableSize(m),BC=(c,m,p)=>{const b=La=>Uo(Kc(La))==="table",w=La=>!b(c)||gb(La).rows>1,O=La=>!b(c)||gb(La).columns>1,R=Qm(c),z=Wx(c)?ft:Ok,q=La=>{switch(Zx(c)){case"section":return ag.section();case"sectionCells":return ag.sectionCells();case"cells":return ag.cells();default:return ag.getTableSectionType(La,"section")}},ue=(La,tv)=>tv.cursor.fold(()=>{const dp=Zc(La);return me(dp).filter(Tt).map(Xa=>{p.clearSelectedCells(La.dom);const Ps=c.dom.createRng();return Ps.selectNode(Xa.dom),c.selection.setRng(Ps),qn(Xa,"data-mce-selected","1"),Ps})},dp=>{const Xa=Ek(dp),Ps=c.dom.createRng();return Ps.setStart(Xa.element.dom,Xa.offset),Ps.setEnd(Xa.element.dom,Xa.offset),c.selection.setRng(Ps),p.clearSelectedCells(La.dom),te.some(Ps)}),ke=(La,tv,dp,Xa)=>(Ps,_w,X3=!1)=>{Xc(Ps);const Zy=Qe.fromDom(c.getDoc()),Ew=Wa(dp,Zy,R),Ow={sizing:_0(c,Ps),resize:Wx(c)?n0():mb(),section:q(Ps)};return tv(Ps)?La(Ps,_w,Ew,Ow).bind(Yf=>{m.refresh(Ps.dom),Le(Yf.newRows,Qf=>{w0(c,Qf.dom)}),Le(Yf.newCells,Qf=>{zb(c,Qf.dom)});const Uy=ue(Ps,Yf);return Tt(Ps)&&(Xc(Ps),X3||tm(c,Ps.dom,Xa)),Uy.map(Qf=>({rng:Qf,effect:Xa}))}):te.none()},Te=ke(Nh,w,ft,Ar),st=ke(Tf,O,ft,Ar),$e=ke(Fk,Oe,ft,Ar),Xe=ke(ja,Oe,ft,Ar),Nt=ke(EC,Oe,z,Ar),mt=ke(tt,Oe,z,Ar),Gt=ke(TC,Oe,ft,Ar),Xt=ke(Hs,Oe,ft,Ar),sn=ke(Zk,Oe,ft,Ar),fa=ke(DC,Oe,ft,Ar),Br=ke(Uk,Oe,ft,Ar),hd=ke(Wk,Oe,ft,Ar),vc=ke(cg,Oe,ft,RC),au=ke(OC,Oe,ft,Ar),Ho=ke(C0,Oe,ft,Ar),Nr=ke(rd,Oe,ft,Ar),Xr=ke(mc,Oe,ft,Ar),Na=ke(Pb,Oe,ft,Ar),Nl=ke(Gi,Oe,ft,Ar),pd=ke(Vk,Oe,ft,Ar);return{deleteRow:Te,deleteColumn:st,insertRowsBefore:$e,insertRowsAfter:Xe,insertColumnsBefore:Nt,insertColumnsAfter:mt,mergeCells:Gt,unmergeCells:Xt,pasteColsBefore:sn,pasteColsAfter:fa,pasteRowsBefore:Br,pasteRowsAfter:hd,pasteCells:vc,makeCellsHeader:au,unmakeCellsHeader:Ho,makeColumnsHeader:Nr,unmakeColumnsHeader:Xr,makeRowsHeader:Na,makeRowsBody:Nl,makeRowsFooter:pd,getTableRowType:AC,getTableCellType:MC,getTableColType:$k}},dg=(c,m,p)=>{const b=Wn(c,m,1);p===1||b<=1?Ko(c,m):qn(c,m,Math.min(p,b))},un=(c,m)=>p=>{const b=p.column+p.colspan-1,w=p.column;return b>=c&&w<m},NC=(c,m,p)=>{if(qt.hasColumns(c)){const b=Xo(qt.justColumns(c),un(m,p)),w=Ot(b,R=>{const z=Fs(R.element);return dg(z,"span",p-m),z}),O=Qe.fromTag("colgroup");return pr(O,w),[O]}else return[]},Xs=(c,m,p)=>Ot(c.all,b=>{const w=Xo(b.cells,un(m,p)),O=Ot(w,z=>{const q=Fs(z.element);return dg(q,"colspan",p-m),q}),R=Qe.fromTag("tr");return pr(R,O),R}),Fb=(c,m)=>{const p=qt.fromTable(c);return cs(p,m).map(b=>{const w=b[b.length-1],O=b[0].column,R=w.column+w.colspan,z=NC(p,O,R),q=Xs(p,O,R);return[...z,...q]})},LC=(c,m,p)=>{const b=qt.fromTable(c);return ed(b,m).bind(w=>{const O=Kt(b,p,!1),R=Zr(O).rows.slice(w[0].row,w[w.length-1].row+w[w.length-1].rowspan),z=Bn(R,ue=>{const ke=Xo(ue.cells,Te=>!Te.isLocked);return ke.length>0?[{...ue,cells:ke}]:[]}),q=Tn(z);return Am(q.length>0,q)}).map(w=>rC(w))},ug=fi.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Df=(c,m,p)=>{const b=p.substring(0,p.length-c.length),w=parseFloat(b);return b===w.toString()?m(w):ug.invalid(p)},mg={...ug,from:c=>Fr(c,"%")?Df("%",ug.percent,c):Fr(c,"px")?Df("px",ug.pixels,c):ug.invalid(c)},HC=(c,m)=>Ot(c,p=>mg.from(p).fold(()=>p,b=>b/m*100+"%",b=>b+"%")),Xk=(c,m,p)=>{const b=p/m;return Ot(c,w=>mg.from(w).fold(()=>w,O=>O*b+"px",O=>O/100*p+"px"))},Lh=(c,m)=>{const p=c.fold(()=>J(""),b=>{const w=b/m;return J(w+"px")},()=>{const b=100/m;return J(b+"%")});return fo(m,p)},qk=(c,m,p)=>c.fold(()=>m,b=>Xk(m,p,b),b=>HC(m,p)),E0=(c,m,p)=>{const b=mg.from(p),w=on(c,O=>O==="0px")?Lh(b,c.length):qk(b,c,m);return Qk(w)},Vb=(c,m)=>c.length===0?m:lr(c,(p,b)=>mg.from(b).fold(J(0),qe,qe)+p,0),Mf=(c,m)=>{const p=Math.floor(c);return{value:p+m,remainder:c-p}},Yk=(c,m)=>mg.from(c).fold(J(c),p=>p+m+"px",p=>p+m+"%"),Qk=c=>{if(c.length===0)return c;const m=lr(c,(b,w)=>{const O=mg.from(w).fold(()=>({value:w,remainder:0}),R=>Mf(R,"px"),R=>({value:R+"%",remainder:0}));return{output:[O.value].concat(b.output),remainder:b.remainder+O.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Yk(p[p.length-1],Math.round(m.remainder))])},Jk=mg.from,e3=(c,m,p)=>{Le(m,b=>{const w=c.slice(b.column,b.colspan+b.column),O=Vb(w,Vc());No(b.element,"width",O+p)})},t3=(c,m,p)=>{Le(m,(b,w)=>{const O=Vb([c[w]],Vc());No(b.element,"width",O+p)})},Zb=(c,m,p,b)=>{Le(p,w=>{const O=c.slice(w.row,w.rowspan+w.row),R=Vb(O,ka());No(w.element,"height",R+b)}),Le(m,(w,O)=>{No(w.element,"height",c[O])})},Ub=c=>Jk(c).fold(J("px"),J("px"),J("%")),Wb=(c,m,p)=>{const b=qt.fromTable(c),w=b.all,O=qt.justCells(b),R=qt.justColumns(b);m.each(z=>{const q=Ub(z),ue=Wt(c),ke=Km(b,c),Te=E0(ke,ue,z);qt.hasColumns(b)?t3(Te,R,q):e3(Te,O,q),No(c,"width",z)}),p.each(z=>{const q=Ub(z),ue=Yp(c),ke=js(b,c,br),Te=E0(ke,ue,z);Zb(Te,w,O,q),No(c,"height",z)})},gg=zd,$b=Jv,IC=kl,O0=c=>{Ko(c,"width")},Hh=c=>{const m=dn(c);Wb(c,te.some(m),te.none()),O0(c)},gc=c=>{const m=hk(c);Wb(c,te.some(m),te.none()),O0(c)},Ih=c=>{Dn(c,"width");const m=Lm(c),p=m.length>0?m:Zc(c);Le(p,b=>{Dn(b,"width"),O0(b)}),O0(c)},hg={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},jb=()=>Qe.fromTag("th"),o3=()=>Qe.fromTag("td"),Xd=()=>Qe.fromTag("col"),Gb=(c,m,p,b)=>{const w=Qe.fromTag("tr");for(let O=0;O<c;O++){const R=b<m||O<p?jb():o3();O<p&&qn(R,"scope","row"),b<m&&qn(R,"scope","col"),uo(R,Qe.fromTag("br")),uo(w,R)}return w},PC=c=>{const m=Qe.fromTag("colgroup");return fo(c,()=>uo(m,Xd())),m},qd=(c,m,p,b)=>fo(c,w=>Gb(m,p,b,w)),T0=(c,m,p,b,w,O=hg)=>{const R=Qe.fromTag("table"),z=w!=="cells";Rm(R,O.styles),wa(R,O.attributes),O.colGroups&&uo(R,PC(m));const q=Math.min(c,p);if(z&&p>0){const st=Qe.fromTag("thead");uo(R,st);const $e=qd(p,m,w==="sectionCells"?q:0,b);pr(st,$e)}const ue=Qe.fromTag("tbody");uo(R,ue);const ke=z?c-q:c,Te=qd(ke,m,z?0:p,b);return pr(ue,Te),R},n3=c=>c.dom.innerHTML,r3=c=>{const m=Qe.fromTag("div"),p=Qe.fromDom(c.dom.cloneNode(!0));return uo(m,p),n3(m)},s3=(c,m)=>{c.selection.select(m.dom,!0),c.selection.collapse(!0)},a3=(c,m)=>{Md(m,"td,th").each(Oo(s3,c))},zC=(c,m)=>{Le(Zs(m,"tr"),p=>{w0(c,p.dom),Le(Zs(p,"th,td"),b=>{zb(c,b.dom)})})},i3=c=>kn(c)&&c.indexOf("%")!==-1,D0=(c,m,p,b,w)=>{const O=rf(c),R={styles:O,attributes:nf(c),colGroups:yk(c)};return c.undoManager.ignore(()=>{const z=T0(p,m,w,b,Zx(c),R);qn(z,"data-mce-id","__mce");const q=r3(z);c.insertContent(q),c.addVisual()}),Md(Kc(c),'table[data-mce-id="__mce"]').map(z=>(ui(c)?gc(z):Jm(c)?Ih(z):(K1(c)||i3(O.width))&&Hh(z),Xc(z),Ko(z,"data-mce-id"),zC(c,z),a3(c,z),z.dom)).getOrNull()},FC=(c,m,p,b={})=>{const w=O=>bn(O)&&O>0;if(w(m)&&w(p)){const O=b.headerRows||0,R=b.headerColumns||0;return D0(c,p,m,R,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var M0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Kb="x-tinymce/dom-table-",Xb=Kb+"rows",qb=Kb+"columns",VC=c=>{const m=M0.FakeClipboardItem(c);M0.write([m])},A0=c=>{var m;const p=(m=M0.read())!==null&&m!==void 0?m:[];return cr(p,b=>te.from(b.getType(c)))},R0=c=>{A0(c).isSome()&&M0.clear()},Yb=c=>{c.fold(l3,m=>VC({[Xb]:m}))},ZC=()=>A0(Xb),l3=()=>R0(Xb),UC=c=>{c.fold(Jb,m=>VC({[qb]:m}))},Qb=()=>A0(qb),Jb=()=>R0(qb),Af=c=>t0(tg(c),Uu(c)).filter(gh),c3=c=>yh(tg(c),Uu(c)).filter(gh),d3=(c,m)=>{const p=Uu(c),b=()=>Af(c).each(mt=>{Us(mt,p).filter(se(p)).each(Gt=>{const Xt=Qe.fromText("");if(wr(Gt,Xt),Fn(Gt),c.dom.isEmpty(c.getBody()))c.setContent(""),c.selection.setCursorLocation();else{const sn=c.dom.createRng();sn.setStart(Xt.dom,0),sn.setEnd(Xt.dom,0),c.selection.setRng(sn),c.nodeChanged()}})}),w=mt=>Af(c).each(Gt=>{Jm(c)||ui(c)||K1(c)||Us(Gt,p).each(Xt=>{mt==="relative"&&!gg(Xt)?Hh(Xt):mt==="fixed"&&!$b(Xt)?gc(Xt):mt==="responsive"&&!IC(Xt)&&Ih(Xt),Xc(Xt),tm(c,Xt.dom,Ar)})}),O=mt=>Us(mt,p),R=mt=>c3(c).bind(Gt=>O(Gt).map(Xt=>mt(Xt,Gt))),z=(mt,Gt)=>{R(Xt=>{c.formatter.toggle("tableclass",{value:Gt},Xt.dom),tm(c,Xt.dom,k0)})},q=(mt,Gt)=>{R(Xt=>{const sn=hi(c),fa=on(sn,Br=>c.formatter.match("tablecellclass",{value:Gt},Br.dom))?c.formatter.remove:c.formatter.apply;Le(sn,Br=>fa("tablecellclass",{value:Gt},Br.dom)),tm(c,Xt.dom,k0)})},ue=()=>{Af(c).each(mt=>{Us(mt,p).each(Gt=>{Va(Gt,"caption").fold(()=>{const Xt=Qe.fromTag("caption");uo(Xt,Qe.fromText("Caption")),Gg(Gt,Xt,0),c.selection.setCursorLocation(Xt.dom,0)},Xt=>{es("caption")(mt)&&Sm("td",Gt).each(sn=>c.selection.setCursorLocation(sn.dom,0)),Fn(Xt)}),tm(c,Gt.dom,Ar)})})},ke=mt=>{c.focus()},Te=(mt,Gt=!1)=>R((Xt,sn)=>{const fa=e0(hi(c),Xt,sn);mt(Xt,fa,Gt).each(ke)}),st=()=>R((mt,Gt)=>{const Xt=e0(hi(c),mt,Gt),sn=Wa(ft,Qe.fromDom(c.getDoc()),te.none());return LC(mt,Xt,sn)}),$e=()=>R((mt,Gt)=>{const Xt=e0(hi(c),mt,Gt);return Fb(mt,Xt)}),Xe=(mt,Gt)=>Gt().each(Xt=>{const sn=Ot(Xt,fa=>Fs(fa));R((fa,Br)=>{const hd=of(Qe.fromDom(c.getDoc())),vc=gf(hi(c),Br,sn,hd);mt(fa,vc).each(ke)})}),Nt=mt=>(Gt,Xt)=>ti(Xt,"type").each(sn=>{Te(mt(sn),Xt.no_events)});En({mceTableSplitCells:()=>Te(m.unmergeCells),mceTableMergeCells:()=>Te(m.mergeCells),mceTableInsertRowBefore:()=>Te(m.insertRowsBefore),mceTableInsertRowAfter:()=>Te(m.insertRowsAfter),mceTableInsertColBefore:()=>Te(m.insertColumnsBefore),mceTableInsertColAfter:()=>Te(m.insertColumnsAfter),mceTableDeleteCol:()=>Te(m.deleteColumn),mceTableDeleteRow:()=>Te(m.deleteRow),mceTableCutCol:()=>$e().each(mt=>{UC(mt),Te(m.deleteColumn)}),mceTableCutRow:()=>st().each(mt=>{Yb(mt),Te(m.deleteRow)}),mceTableCopyCol:()=>$e().each(mt=>UC(mt)),mceTableCopyRow:()=>st().each(mt=>Yb(mt)),mceTablePasteColBefore:()=>Xe(m.pasteColsBefore,Qb),mceTablePasteColAfter:()=>Xe(m.pasteColsAfter,Qb),mceTablePasteRowBefore:()=>Xe(m.pasteRowsBefore,ZC),mceTablePasteRowAfter:()=>Xe(m.pasteRowsAfter,ZC),mceTableDelete:b,mceTableCellToggleClass:q,mceTableToggleClass:z,mceTableToggleCaption:ue,mceTableSizingMode:(mt,Gt)=>w(Gt),mceTableCellType:Nt(mt=>mt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Nt(mt=>mt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Nt(mt=>{switch(mt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(mt,Gt)=>c.addCommand(Gt,mt)),c.addCommand("mceInsertTable",(mt,Gt)=>{FC(c,Gt.rows,Gt.columns,Gt.options)}),c.addCommand("mceTableApplyCellStyle",(mt,Gt)=>{const Xt=Br=>"tablecell"+Br.toLowerCase().replace("-","");if(!Pt(Gt))return;const sn=Xo(hi(c),gh);if(sn.length===0)return;const fa=Ds(Gt,(Br,hd)=>c.formatter.has(Xt(hd))&&kn(Br));Nc(fa)||(En(fa,(Br,hd)=>{const vc=Xt(hd);Le(sn,au=>{Br===""?c.formatter.remove(vc,{value:null},au.dom,!0):c.formatter.apply(vc,{value:Br},au.dom)})}),O(sn[0]).each(Br=>tm(c,Br.dom,k0)))})},ey=(c,m)=>{const p=Uu(c),b=w=>yh(tg(c)).bind(O=>Us(O,p).map(R=>{const z=e0(hi(c),R,O);return w(R,z)})).getOr("");En({mceTableRowType:()=>b(m.getTableRowType),mceTableCellType:()=>b(m.getTableCellType),mceTableColType:()=>b(m.getTableColType)},(w,O)=>c.addQueryValueHandler(O,w))},ty=fi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),u3=(c,m,p,b)=>c.fold(m,p,b),m3=c=>c.fold(qe,qe,qe),B0=ty.before,g3=ty.on,WC=ty.after,ha={before:B0,on:g3,after:WC,cata:u3,getStart:m3},Ph={create:(c,m)=>({selection:c,kill:m})},h3=(c,m)=>{const p=c.document.createRange();return p.selectNode(m.dom),p},p3=(c,m)=>{const p=c.document.createRange();return oy(p,m),p},oy=(c,m)=>c.selectNodeContents(m.dom),Rf=(c,m)=>{m.fold(p=>{c.setStartBefore(p.dom)},(p,b)=>{c.setStart(p.dom,b)},p=>{c.setStartAfter(p.dom)})},$C=(c,m)=>{m.fold(p=>{c.setEndBefore(p.dom)},(p,b)=>{c.setEnd(p.dom,b)},p=>{c.setEndAfter(p.dom)})},ny=(c,m,p)=>{const b=c.document.createRange();return Rf(b,m),$C(b,p),b},Bf=(c,m,p,b,w)=>{const O=c.document.createRange();return O.setStart(m.dom,p),O.setEnd(b.dom,w),O},ry=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:c.width,height:c.height}),sy=c=>{const m=c.getClientRects(),p=m.length>0?m[0]:c.getBoundingClientRect();return p.width>0||p.height>0?te.some(p).map(ry):te.none()},Nf=fi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jC=(c,m,p)=>m(Qe.fromDom(p.startContainer),p.startOffset,Qe.fromDom(p.endContainer),p.endOffset),Lf=(c,m)=>m.match({domRange:p=>({ltr:J(p),rtl:te.none}),relative:(p,b)=>({ltr:Du(()=>ny(c,p,b)),rtl:Du(()=>te.some(ny(c,b,p)))}),exact:(p,b,w,O)=>({ltr:Du(()=>Bf(c,p,b,w,O)),rtl:Du(()=>te.some(Bf(c,w,O,p,b)))})}),GC=(c,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(b=>b.collapsed===!1).map(b=>Nf.rtl(Qe.fromDom(b.endContainer),b.endOffset,Qe.fromDom(b.startContainer),b.startOffset)).getOrThunk(()=>jC(c,Nf.ltr,p)):jC(c,Nf.ltr,p)},KC=(c,m)=>{const p=Lf(c,m);return GC(c,p)},Yd=(c,m)=>KC(c,m).match({ltr:(p,b,w,O)=>{const R=c.document.createRange();return R.setStart(p.dom,b),R.setEnd(w.dom,O),R},rtl:(p,b,w,O)=>{const R=c.document.createRange();return R.setStart(w.dom,O),R.setEnd(p.dom,b),R}});Nf.ltr,Nf.rtl;const Hf={create:(c,m,p,b)=>({start:c,soffset:m,finish:p,foffset:b})},ay={create:(c,m,p,b)=>({start:ha.on(c,m),finish:ha.on(p,b)})},iy=(c,m)=>{const p=Yd(c,m);return Hf.create(Qe.fromDom(p.startContainer),p.startOffset,Qe.fromDom(p.endContainer),p.endOffset)},_s=ay.create,XC=(c,m,p,b,w,O,R)=>Qo(p,w)&&b===O?te.none():vr(p,"td,th",m).bind(z=>vr(w,"td,th",m).bind(q=>qC(c,m,z,q,R))),qC=(c,m,p,b,w)=>Qo(p,b)?te.none():Y1(p,b,m).bind(O=>{const R=O.boxes.getOr([]);return R.length>1?(w(c,R,O.start,O.finish),te.some(Ph.create(te.some(_s(p,0,p,Zi(p))),!0))):te.none()}),f3=(c,m,p,b,w)=>{const O=R=>(w.clearBeforeUpdate(p),w.selectRange(p,R.boxes,R.start,R.finish),R.boxes);return Ck(b,c,m,w.firstSelectedSelector,w.lastSelectedSelector).map(O)},If=(c,m)=>({item:c,mode:m}),zh=(c,m,p,b=sd)=>c.property().parent(m).map(w=>If(w,b)),sd=(c,m,p,b=Fh)=>p.sibling(c,m).map(w=>If(w,b)),Fh=(c,m,p,b=Fh)=>{const w=c.property().children(m);return p.first(w).map(O=>If(O,b))},ly=[{current:zh,next:sd,fallback:te.none()},{current:sd,next:Fh,fallback:te.some(zh)},{current:Fh,next:Fh,fallback:te.some(sd)}],YC=(c,m,p,b,w=ly)=>I(w,O=>O.current===p).bind(O=>O.current(c,m,b,O.next).orThunk(()=>O.fallback.bind(R=>YC(c,m,R,b)))),cy={left:()=>({sibling:(c,m)=>c.query().prevSibling(m),first:c=>c.length>0?te.some(c[c.length-1]):te.none()}),right:()=>({sibling:(c,m)=>c.query().nextSibling(m),first:c=>c.length>0?te.some(c[0]):te.none()})},pg=(c,m,p,b,w,O)=>YC(c,m,b,w).bind(R=>O(R.item)?te.none():p(R.item)?te.some(R.item):pg(c,R.item,p,R.mode,w,O)),QC=(c,m,p,b)=>pg(c,m,p,sd,cy.left(),b),JC=(c,m,p,b)=>pg(c,m,p,sd,cy.right(),b),N0=c=>m=>c.property().children(m).length===0,ew=(c,m,p)=>om(c,m,N0(c),p),Vh=(c,m,p)=>nm(c,m,N0(c),p),om=QC,nm=JC,Qd=df(),dy=(c,m)=>ew(Qd,c,m),ad=(c,m)=>Vh(Qd,c,m),hc=(c,m,p)=>om(Qd,c,m,p),L0=(c,m,p)=>nm(Qd,c,m,p),uy=(c,m,p)=>Qn(c,m,p).isSome(),Pf=fi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),my=(c,m,p)=>{const b=c.getRect(m),w=c.getRect(p);return w.right>b.left&&w.left<b.right},Zh=c=>vr(c,"tr"),pc={...Pf,verify:(c,m,p,b,w,O,R)=>vr(b,"td,th",R).bind(z=>vr(m,"td,th",R).map(q=>Qo(z,q)?Qo(b,z)&&Zi(z)===w?O(q):Pf.none("in same cell"):$u(Zh,[z,q]).fold(()=>my(c,q,z)?Pf.success():O(q),ue=>O(q)))).getOr(Pf.none("default")),cata:(c,m,p,b,w)=>c.fold(m,p,b,w)},gy=(c,m,p,b)=>({parent:c,children:m,element:p,index:b}),tw=c=>Bo(c).bind(m=>{const p=rr(m);return zf(p,c).map(b=>gy(m,p,c,b))}),zf=(c,m)=>hs(c,Oo(Qo,m)),Uh=es("br"),hy=(c,m,p)=>m(c,p).bind(b=>pl(b)&&jr(b).trim().length===0?hy(b,m,p):te.some(b)),py=(c,m,p)=>p.traverse(m).orThunk(()=>hy(m,p.gather,c)).map(p.relative),H0=(c,m)=>sr(c,m).filter(Uh).orThunk(()=>sr(c,m-1).filter(Uh)),ms=(c,m,p,b)=>H0(m,p).bind(w=>b.traverse(w).fold(()=>hy(w,b.gather,c).map(b.relative),O=>tw(O).map(R=>ha.on(R.parent,R.index)))),v3=(c,m,p,b)=>(Uh(m)?py(c,m,b):ms(c,m,p,b)).map(w=>({start:w,finish:w})),id=c=>pc.cata(c,m=>te.none(),()=>te.none(),m=>te.some(sg(m,0)),m=>te.some(sg(m,Zi(m)))),Wh=(c,m)=>({left:c.left,top:c.top+m,right:c.right,bottom:c.bottom+m}),$h=(c,m)=>({left:c.left,top:c.top-m,right:c.right,bottom:c.bottom-m}),fg=(c,m,p)=>({left:c.left+m,top:c.top+p,right:c.right+m,bottom:c.bottom+p}),Is=c=>c.top,jh=c=>c.bottom,Ff=(c,m,p)=>p>=0&&p<Zi(m)?c.getRangedRect(m,p,m,p+1):p>0?c.getRangedRect(m,p-1,m,p):te.none(),Jd=c=>({left:c.left,top:c.top,right:c.right,bottom:c.bottom}),I0=(c,m)=>te.some(c.getRect(m)),P0=(c,m,p)=>Jr(m)?I0(c,m).map(Jd):pl(m)?Ff(c,m,p).map(Jd):te.none(),Vf=(c,m)=>Jr(m)?I0(c,m).map(Jd):pl(m)?c.getRangedRect(m,0,m,Zi(m)).map(Jd):te.none(),Ba=5,b3=100,rm=fi.generate([{none:[]},{retry:["caret"]}]),sm=(c,m)=>c.left<m.left||Math.abs(m.right-c.left)<1||c.left>m.right,z0=(c,m,p)=>Wo(m,Rh).fold(io,b=>Vf(c,b).exists(w=>sm(p,w))),fy=(c,m,p,b,w)=>{const O=Wh(w,Ba);return Math.abs(p.bottom-b.bottom)<1||p.top>w.bottom?rm.retry(O):p.top===w.bottom?rm.retry(Wh(w,1)):z0(c,m,w)?rm.retry(fg(O,Ba,0)):rm.none()},eu={point:Is,adjuster:(c,m,p,b,w)=>{const O=$h(w,Ba);return Math.abs(p.top-b.top)<1||p.bottom<w.top?rm.retry(O):p.bottom===w.top?rm.retry($h(w,1)):z0(c,m,w)?rm.retry(fg(O,Ba,0)):rm.none()},move:$h,gather:dy},ow={point:jh,adjuster:fy,move:Wh,gather:ad},Ga=(c,m,p)=>c.elementFromPoint(m,p).filter(b=>Uo(b)==="table").isSome(),tu=(c,m,p,b,w)=>Zf(c,m,p,m.move(b,Ba),w),Zf=(c,m,p,b,w)=>w===0?te.some(b):Ga(c,b.left,m.point(b))?tu(c,m,p,b,w-1):c.situsFromPoint(b.left,m.point(b)).bind(O=>O.start.fold(te.none,R=>Vf(c,R).bind(z=>m.adjuster(c,R,z,p,b).fold(te.none,q=>Zf(c,m,p,q,w-1))).orThunk(()=>te.some(b)),te.none)),Gh=(c,m,p)=>c.point(m)>p.getInnerHeight()?te.some(c.point(m)-p.getInnerHeight()):c.point(m)<0?te.some(-c.point(m)):te.none(),qs=(c,m,p)=>{const b=c.move(p,Ba),w=Zf(m,c,p,b,b3).getOr(b);return Gh(c,w,m).fold(()=>m.situsFromPoint(w.left,c.point(w)),O=>(m.scrollBy(0,O),m.situsFromPoint(w.left,c.point(w)-O)))},Ys={tryUp:Oo(qs,eu),tryDown:Oo(qs,ow),getJumpSize:J(Ba)},Qs=20,Rl=(c,m,p)=>c.getSelection().bind(b=>v3(m,b.finish,b.foffset,p).fold(()=>te.some(sg(b.finish,b.foffset)),w=>{const O=c.fromSitus(w),R=pc.verify(c,b.finish,b.foffset,O.finish,O.foffset,p.failure,m);return id(R)})),Kh=(c,m,p,b,w,O)=>O===0?te.none():y3(c,m,p,b,w).bind(R=>{const z=c.fromSitus(R),q=pc.verify(c,p,b,z.finish,z.foffset,w.failure,m);return pc.cata(q,()=>te.none(),()=>te.some(R),ue=>Qo(p,ue)&&b===0?Ka(c,p,b,$h,w):Kh(c,m,ue,0,w,O-1),ue=>Qo(p,ue)&&b===Zi(ue)?Ka(c,p,b,Wh,w):Kh(c,m,ue,Zi(ue),w,O-1))}),Ka=(c,m,p,b,w)=>P0(c,m,p).bind(O=>am(c,w,b(O,Ys.getJumpSize()))),am=(c,m,p)=>{const b=rc().browser;return b.isChromium()||b.isSafari()||b.isFirefox()?m.retry(c,p):te.none()},y3=(c,m,p,b,w)=>P0(c,p,b).bind(O=>am(c,w,O)),x3=(c,m,p)=>Rl(c,m,p).bind(b=>Kh(c,m,b.element,b.offset,p,Qs).map(c.fromSitus)),C3=(c,m)=>uy(c,p=>Bo(p).exists(b=>Qo(b,m))),F0=(c,m,p,b,w)=>vr(b,"td,th",m).bind(O=>vr(O,"table",m).bind(R=>C3(w,R)?x3(c,m,p).bind(z=>vr(z.finish,"td,th",m).map(q=>({start:O,finish:q,range:z}))):te.none())),vy=(c,m,p,b,w,O)=>O(b,m).orThunk(()=>F0(c,m,p,b,w).map(R=>{const z=R.range;return Ph.create(te.some(_s(z.start,z.soffset,z.finish,z.foffset)),!0)})),Uf=(c,m)=>vr(c,"tr",m).bind(p=>vr(p,"table",m).bind(b=>{const w=Zs(b,"tr");return Qo(p,w[0])?hc(b,O=>j1(O).isSome(),m).map(O=>{const R=Zi(O);return Ph.create(te.some(_s(O,R,O,R)),!0)}):te.none()})),nw=(c,m)=>vr(c,"tr",m).bind(p=>vr(p,"table",m).bind(b=>{const w=Zs(b,"tr");return Qo(p,w[w.length-1])?L0(b,O=>tb(O).isSome(),m).map(O=>Ph.create(te.some(_s(O,0,O,0)),!0)):te.none()})),rw=(c,m,p,b,w,O,R)=>F0(c,p,b,w,O).bind(z=>qC(m,p,z.start,z.finish,R)),by=c=>{let m=c;return{get:()=>m,set:p=>{m=p}}},w3=c=>{const m=by(te.none()),p=()=>m.get().each(c);return{clear:()=>{p(),m.set(te.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:b=>{p(),m.set(te.some(b))}}},lo=()=>{const c=w3(ft);return{...c,on:m=>c.get().each(m)}},ld=(c,m)=>vr(c,"td,th",m),vg=c=>Su(c).exists(eg),Wf=(c,m,p,b)=>{const w=lo(),O=w.clear,R=z=>{w.on(q=>{b.clearBeforeUpdate(m),ld(z.target,p).each(ue=>{Y1(q,ue,p).each(ke=>{const Te=ke.boxes.getOr([]);if(Te.length===1){const st=Te[0],$e=Hn(st)==="false",Xe=Cn(sf(z.target),st,Qo);$e&&Xe&&(b.selectRange(m,Te,st,st),c.selectContents(st))}else Te.length>1&&(b.selectRange(m,Te,ke.start,ke.finish),c.selectContents(ue))})})})};return{clearstate:O,mousedown:z=>{b.clear(m),ld(z.target,p).filter(vg).each(w.set)},mouseover:z=>{R(z)},mouseup:z=>{R(z),O()}}},yy={traverse:zn,gather:ad,relative:ha.before,retry:Ys.tryDown,failure:pc.failedDown},V0={traverse:Ti,gather:dy,relative:ha.before,retry:Ys.tryUp,failure:pc.failedUp},Xh=c=>m=>m===c,$f=Xh(38),qh=Xh(40),bg=c=>c>=37&&c<=40,S3={isBackward:Xh(37),isForward:Xh(39)},Ki={isBackward:Xh(39),isForward:Xh(37)},jf=c=>{const m=c!==void 0?c.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,b=m.body.scrollTop||m.documentElement.scrollTop;return wl(p,b)},Yh=(c,m,p)=>{const b=(p!==void 0?p.dom:document).defaultView;b&&b.scrollBy(c,m)},yg=fi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xy=c=>yg.exact(c.start,c.soffset,c.finish,c.foffset),sw=c=>c.match({domRange:m=>Qe.fromDom(m.startContainer),relative:(m,p)=>ha.getStart(m),exact:(m,p,b,w)=>m}),k3=yg.domRange,_3=yg.relative,E3=yg.exact,aw=c=>{const m=sw(c);return Yn(m)},Qh=Hf.create,cd={domRange:k3,relative:_3,exact:E3,exactFromRange:xy,getWin:aw,range:Qh},O3=(c,m,p)=>{var b,w;return te.from((w=(b=c.dom).caretPositionFromPoint)===null||w===void 0?void 0:w.call(b,m,p)).bind(O=>{if(O.offsetNode===null)return te.none();const R=c.dom.createRange();return R.setStart(O.offsetNode,O.offset),R.collapse(),te.some(R)})},T3=(c,m,p)=>{var b,w;return te.from((w=(b=c.dom).caretRangeFromPoint)===null||w===void 0?void 0:w.call(b,m,p))},iw=(()=>document.caretPositionFromPoint?O3:document.caretRangeFromPoint?T3:te.none)(),Cy=(c,m,p)=>{const b=Qe.fromDom(c.document);return iw(b,m,p).map(w=>Hf.create(Qe.fromDom(w.startContainer),w.startOffset,Qe.fromDom(w.endContainer),w.endOffset))},Jh=(c,m)=>{const p=Uo(c);return p==="input"?ha.after(c):ro(["br","img"],p)?m===0?ha.before(c):ha.after(c):ha.on(c,m)},wy=(c,m)=>{const p=c.fold(ha.before,Jh,ha.after),b=m.fold(ha.before,Jh,ha.after);return cd.relative(p,b)},Z0=(c,m,p,b)=>{const w=Jh(c,m),O=Jh(p,b);return cd.relative(w,O)},Sy=(c,m,p,b)=>{const w=Ic(c).dom.createRange();return w.setStart(c.dom,m),w.setEnd(p.dom,b),w},nt=(c,m,p,b)=>{const w=Sy(c,m,p,b),O=Qo(c,p)&&m===b;return w.collapsed&&!O},In=c=>te.from(c.getSelection()),xg=(c,m)=>{In(c).each(p=>{p.removeAllRanges(),p.addRange(m)})},Rr=(c,m,p,b,w)=>{const O=Bf(c,m,p,b,w);xg(c,O)},Xi=(c,m,p,b,w,O)=>{m.collapse(p.dom,b),m.extend(w.dom,O)},ky=(c,m)=>KC(c,m).match({ltr:(p,b,w,O)=>{Rr(c,p,b,w,O)},rtl:(p,b,w,O)=>{In(c).each(R=>{if(R.setBaseAndExtent)R.setBaseAndExtent(p.dom,b,w.dom,O);else if(R.extend)try{Xi(c,R,p,b,w,O)}catch{Rr(c,w,O,p,b)}else Rr(c,w,O,p,b)})}}),ep=(c,m,p,b,w)=>{const O=Z0(m,p,b,w);ky(c,O)},tp=(c,m,p)=>{const b=wy(m,p);ky(c,b)},Cg=c=>{if(c.rangeCount>0){const m=c.getRangeAt(0),p=c.getRangeAt(c.rangeCount-1);return te.some(Hf.create(Qe.fromDom(m.startContainer),m.startOffset,Qe.fromDom(p.endContainer),p.endOffset))}else return te.none()},_y=c=>{if(c.anchorNode===null||c.focusNode===null)return Cg(c);{const m=Qe.fromDom(c.anchorNode),p=Qe.fromDom(c.focusNode);return nt(m,c.anchorOffset,p,c.focusOffset)?te.some(Hf.create(m,c.anchorOffset,p,c.focusOffset)):Cg(c)}},Ey=(c,m,p=!0)=>{const b=(p?p3:h3)(c,m);xg(c,b)},D3=c=>In(c).filter(m=>m.rangeCount>0).bind(_y),Oy=c=>D3(c).map(m=>cd.exact(m.start,m.soffset,m.finish,m.foffset)),im=(c,m)=>{const p=Yd(c,m);return sy(p)},U0=(c,m,p)=>Cy(c,m,p),Ty=c=>{In(c).each(m=>m.removeAllRanges())},wg=c=>({elementFromPoint:(m,p)=>Qe.fromPoint(Qe.fromDom(c.document),m,p),getRect:m=>m.dom.getBoundingClientRect(),getRangedRect:(m,p,b,w)=>{const O=cd.exact(m,p,b,w);return im(c,O)},getSelection:()=>Oy(c).map(m=>iy(c,m)),fromSitus:m=>{const p=cd.relative(m.start,m.finish);return iy(c,p)},situsFromPoint:(m,p)=>U0(c,m,p).map(b=>ay.create(b.start,b.soffset,b.finish,b.foffset)),clearSelection:()=>{Ty(c)},collapseSelection:(m=!1)=>{Oy(c).each(p=>p.fold(b=>b.collapse(m),(b,w)=>{const O=m?b:w;tp(c,O,O)},(b,w,O,R)=>{const z=m?b:O,q=m?w:R;ep(c,z,q,z,q)}))},setSelection:m=>{ep(c,m.start,m.soffset,m.finish,m.foffset)},setRelativeSelection:(m,p)=>{tp(c,m,p)},selectNode:m=>{Ey(c,m,!1)},selectContents:m=>{Ey(c,m)},getInnerHeight:()=>c.innerHeight,getScrollY:()=>jf(Qe.fromDom(c.document)).top,scrollBy:(m,p)=>{Yh(m,p,Qe.fromDom(c.document))}}),dd=(c,m)=>({rows:c,cols:m}),Sg=(c,m,p,b)=>{const w=wg(c),O=Wf(w,m,p,b);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},op=c=>Wo(c,At).exists(eg),np=(c,m)=>op(c)||op(m),Dy=(c,m,p,b)=>{const w=wg(c),O=()=>(b.clear(m),te.none());return{keydown:(R,z,q,ue,ke,Te)=>{const st=R.raw,$e=st.which,Xe=st.shiftKey===!0;return gi(m,b.selectedSelector).fold(()=>(bg($e)&&!Xe&&b.clearBeforeUpdate(m),bg($e)&&Xe&&!np(z,ue)?te.none:qh($e)&&Xe?Oo(rw,w,m,p,yy,ue,z,b.selectRange):$f($e)&&Xe?Oo(rw,w,m,p,V0,ue,z,b.selectRange):qh($e)?Oo(vy,w,p,yy,ue,z,nw):$f($e)?Oo(vy,w,p,V0,ue,z,Uf):te.none),Nt=>{const mt=Gt=>()=>cr(Gt,Xt=>f3(Xt.rows,Xt.cols,m,Nt,b)).fold(()=>J1(m,b.firstSelectedSelector,b.lastSelectedSelector).map(Xt=>{const sn=qh($e)||Te.isForward($e)?ha.after:ha.before;return w.setRelativeSelection(ha.on(Xt.first,0),sn(Xt.table)),b.clear(m),Ph.create(te.none(),!0)}),Xt=>te.some(Ph.create(te.none(),!0)));return bg($e)&&Xe&&!np(z,ue)?te.none:qh($e)&&Xe?mt([dd(1,0)]):$f($e)&&Xe?mt([dd(-1,0)]):Te.isBackward($e)&&Xe?mt([dd(0,-1),dd(-1,0)]):Te.isForward($e)&&Xe?mt([dd(0,1),dd(1,0)]):bg($e)&&!Xe?O:te.none})()},keyup:(R,z,q,ue,ke)=>gi(m,b.selectedSelector).fold(()=>{const Te=R.raw,st=Te.which;return Te.shiftKey===!0&&bg(st)&&np(z,ue)?XC(m,p,z,q,ue,ke,b.selectRange):te.none()},te.none)}},ud=(c,m,p,b)=>{const w=wg(c);return(O,R)=>{b.clearBeforeUpdate(m),Y1(O,R,p).each(z=>{const q=z.boxes.getOr([]);b.selectRange(m,q,z.start,z.finish),w.selectContents(R),w.collapseSelection()})}},rp=(c,m)=>{const p=za(c,m);return p===void 0||p===""?[]:p.split(" ")},W0=(c,m,p)=>{const b=rp(c,m).concat([p]);return qn(c,m,b.join(" ")),!0},qi=(c,m,p)=>{const b=Xo(rp(c,m),w=>w!==p);return b.length>0?qn(c,m,b.join(" ")):Ko(c,m),!1},dr=c=>c.dom.classList!==void 0,M3=c=>rp(c,"class"),My=(c,m)=>W0(c,"class",m),lw=(c,m)=>qi(c,"class",m),fc=(c,m)=>{dr(c)?c.dom.classList.add(m):My(c,m)},Ay=c=>{(dr(c)?c.dom.classList:M3(c)).length===0&&Ko(c,"class")},ou=(c,m)=>{dr(c)?c.dom.classList.remove(m):lw(c,m),Ay(c)},Kr=(c,m)=>dr(c)&&c.dom.classList.contains(m),Yi=(c,m)=>{Le(m,p=>{ou(c,p)})},Qi=c=>m=>{fc(m,c)},$0=c=>m=>{Yi(m,c)},j0={byClass:c=>{const m=Qi(c.selected),p=$0([c.selected,c.lastSelected,c.firstSelected]),b=w=>{const O=Zs(w,c.selectedSelector);Le(O,p)};return{clearBeforeUpdate:b,clear:b,selectRange:(w,O,R,z)=>{b(w),Le(O,m),fc(R,c.firstSelected),fc(z,c.lastSelected)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}},byAttr:(c,m,p)=>{const b=z=>{Ko(z,c.selected),Ko(z,c.firstSelected),Ko(z,c.lastSelected)},w=z=>{qn(z,c.selected,"1")},O=z=>{R(z),p()},R=z=>{const q=Zs(z,`${c.selectedSelector},${c.firstSelectedSelector},${c.lastSelectedSelector}`);Le(q,b)};return{clearBeforeUpdate:R,clear:O,selectRange:(z,q,ue,ke)=>{O(z),Le(q,w),qn(ue,c.firstSelected,"1"),qn(ke,c.lastSelected,"1"),m(q,ue,ke)},selectedSelector:c.selectedSelector,firstSelectedSelector:c.firstSelectedSelector,lastSelectedSelector:c.lastSelectedSelector}}},cw=(c,m,p,b)=>{switch(c.tag){case"none":return m();case"single":return b(c.element);case"multiple":return p(c.elements)}},Ry=()=>({tag:"none"}),A3=c=>({tag:"multiple",elements:c}),G0=c=>({tag:"single",element:c}),dw=(c,m,p)=>({get:()=>Vd(c(),p).fold(()=>m().fold(Ry,G0),A3)}),K0=(c,m)=>{const p=c.slice(0,m[m.length-1].row+1),b=Tn(p);return Bn(b,w=>{const O=w.cells.slice(0,m[m.length-1].column+1);return Ot(O,R=>R.element)})},By=(c,m)=>{const p=c.slice(m[0].row+m[0].rowspan-1,c.length),b=Tn(p);return Bn(b,w=>{const O=w.cells.slice(m[0].column+m[0].colspan-1,w.cells.length);return Ot(O,R=>R.element)})},Gf=(c,m,p)=>{const b=qt.fromTable(c);return ed(b,m).map(w=>{const O=Kt(b,p,!1),{rows:R}=Zr(O),z=K0(R,w),q=By(R,w);return{upOrLeftCells:z,downOrRightCells:q}})},X0=(c,m,p,b,w,O,R)=>({target:c,x:m,y:p,stop:b,prevent:w,kill:O,raw:R}),md=c=>{const m=Qe.fromDom(ae(c).getOr(c.target)),p=()=>c.stopPropagation(),b=()=>c.preventDefault(),w=Os(b,p);return X0(m,c.clientX,c.clientY,p,b,w,c)},Lo=(c,m)=>p=>{c(p)&&m(md(p))},lm=(c,m,p,b,w)=>{const O=Lo(p,b);return c.dom.addEventListener(m,O,w),{unbind:Oo(mw,c,m,O,w)}},uw=(c,m,p,b)=>lm(c,m,p,b,!1),mw=(c,m,p,b)=>{c.dom.removeEventListener(m,p,b)},gw=Oe,nu=(c,m,p)=>uw(c,m,gw,p),sp=md,ap=c=>!Kr(Qe.fromDom(c.target),"ephox-snooker-resizer-bar"),R3=(c,m)=>{const p=dw(()=>Qe.fromDom(c.getBody()),()=>yh(tg(c),Uu(c)),ju.selectedSelector),b=(R,z,q)=>{Us(z).each(ue=>{const ke=Qm(c),Te=Wa(ft,Qe.fromDom(c.getDoc()),ke),st=hi(c),$e=Gf(ue,{selection:st},Te);jk(c,R,z,q,$e)})},w=()=>S0(c),O=j0.byAttr(ju,b,w);return c.on("init",R=>{const z=c.getWin(),q=Kc(c),ue=Uu(c),ke=()=>{const Ho=c.selection,Nr=Qe.fromDom(Ho.getStart()),Xr=Qe.fromDom(Ho.getEnd());$u(Us,[Nr,Xr]).fold(()=>O.clear(q),ft)},Te=Sg(z,q,ue,O),st=Dy(z,q,ue,O),$e=ud(z,q,ue,O),Xe=Ho=>Ho.raw.shiftKey===!0;c.on("TableSelectorChange",Ho=>$e(Ho.start,Ho.finish));const Nt=(Ho,Nr)=>{Xe(Ho)&&(Nr.kill&&Ho.kill(),Nr.selection.each(Xr=>{const Na=cd.relative(Xr.start,Xr.finish),Nl=Yd(z,Na);c.selection.setRng(Nl)}))},mt=Ho=>{const Nr=sp(Ho);if(Nr.raw.shiftKey&&bg(Nr.raw.which)){const Xr=c.selection.getRng(),Na=Qe.fromDom(Xr.startContainer),Nl=Qe.fromDom(Xr.endContainer);st.keyup(Nr,Na,Xr.startOffset,Nl,Xr.endOffset).each(pd=>{Nt(Nr,pd)})}},Gt=Ho=>{const Nr=sp(Ho);m.hide();const Xr=c.selection.getRng(),Na=Qe.fromDom(Xr.startContainer),Nl=Qe.fromDom(Xr.endContainer),pd=nh(S3,Ki)(Qe.fromDom(c.selection.getStart()));st.keydown(Nr,Na,Xr.startOffset,Nl,Xr.endOffset,pd).each(La=>{Nt(Nr,La)}),m.show()},Xt=Ho=>Ho.button===0,sn=Ho=>Ho.buttons===void 0?!0:(Ho.buttons&1)!==0,fa=Ho=>{Te.clearstate()},Br=Ho=>{Xt(Ho)&&ap(Ho)&&Te.mousedown(sp(Ho))},hd=Ho=>{sn(Ho)&&ap(Ho)&&Te.mouseover(sp(Ho))},vc=Ho=>{Xt(Ho)&&ap(Ho)&&Te.mouseup(sp(Ho))},au=(()=>{const Ho=by(Qe.fromDom(q)),Nr=by(0);return{touchEnd:Xr=>{const Na=Qe.fromDom(Xr.target);if(es("td")(Na)||es("th")(Na)){const Nl=Ho.get(),pd=Nr.get();Qo(Nl,Na)&&Xr.timeStamp-pd<300&&(Xr.preventDefault(),$e(Na,Na))}Ho.set(Na),Nr.set(Xr.timeStamp)}}})();c.on("dragstart",fa),c.on("mousedown",Br),c.on("mouseover",hd),c.on("mouseup",vc),c.on("touchend",au.touchEnd),c.on("keyup",mt),c.on("keydown",Gt),c.on("NodeChange",ke)}),c.on("PreInit",()=>{c.serializer.addTempAttr(ju.firstSelected),c.serializer.addTempAttr(ju.lastSelected)}),{getSelectedCells:()=>cw(p.get(),J([]),R=>Ot(R,z=>z.dom),R=>[R.dom]),clearSelectedCells:R=>O.clear(Qe.fromDom(R))}},Bl=c=>{let m=[];return{bind:p=>{if(p===void 0)throw new Error("Event bind error: undefined handler");m.push(p)},unbind:p=>{m=Xo(m,b=>b!==p)},trigger:(...p)=>{const b={};Le(c,(w,O)=>{b[w]=p[O]}),Le(m,w=>{w(b)})}}},ru=c=>{const m=xu(c,b=>({bind:b.bind,unbind:b.unbind})),p=xu(c,b=>b.trigger);return{registry:m,trigger:p}},Kf=(c,m)=>{let p=null;const b=()=>{na(p)||(clearTimeout(p),p=null)};return{cancel:b,throttle:(...w)=>{b(),p=setTimeout(()=>{p=null,c.apply(null,w)},m)}}},cm=c=>c.slice(0).sort(),B3=(c,m)=>{throw new Error("All required keys ("+cm(c).join(", ")+") were not specified. Specified keys were: "+cm(m).join(", ")+".")},hw=c=>{throw new Error("Unsupported keys for object: "+cm(c).join(", "))},N3=(c,m)=>{if(!Jt(m))throw new Error("The "+c+" fields must be an array. Was: "+m+".");Le(m,p=>{if(!kn(p))throw new Error("The value "+p+" in the "+c+" fields was not a string.")})},L3=(c,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+cm(c).join(", ")+") were not.")},H3=c=>{const m=cm(c);I(m,(p,b)=>b<m.length-1&&p===m[b+1]).each(p=>{throw new Error("The field: "+p+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},vi=(c,m)=>Js(c,m,{validate:An,label:"function"}),Js=(c,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return N3("required",m),H3(m),b=>{const w=Et(b);on(m,R=>ro(w,R))||B3(m,w),c(m,w);const O=Xo(m,R=>!p.validate(b[R],R));return O.length>0&&L3(O,p.label),b}},ip=(c,m)=>{const p=Xo(m,b=>!ro(c,b));p.length>0&&hw(p)},Ny=c=>vi(ip,c),I3=Ny(["compare","extract","mutate","sink"]),go=Ny(["element","start","stop","destroy"]),pw=Ny(["forceDrop","drop","move","delayDrop"]),Ly=()=>{let c=te.none();const m=()=>{c=te.none()},p=(O,R)=>{const z=c.map(q=>O.compare(q,R));return c=te.some(R),z},b=(O,R)=>{R.extract(O).each(z=>{p(R,z).each(q=>{w.trigger.move(q)})})},w=ru({move:Bl(["info"])});return{onEvent:b,reset:m,events:w.registry}},q0=()=>{const c=ru({move:Bl(["info"])});return{onEvent:ft,reset:ft,events:c.registry}},P3=()=>{const c=q0(),m=Ly();let p=c;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=c},isOn:()=>p===m,onEvent:(b,w)=>{p.onEvent(b,w)},events:m.events}},fw=(c,m,p)=>{let b=!1;const w=ru({start:Bl([]),stop:Bl([])}),O=P3(),R=()=>{Xe.stop(),O.isOn()&&(O.off(),w.trigger.stop())},z=Kf(R,200),q=mt=>{Xe.start(mt),O.on(),w.trigger.start()},ue=mt=>{z.cancel(),O.onEvent(mt,m)};O.events.move.bind(mt=>{m.mutate(c,mt.info)});const ke=()=>{b=!0},Te=()=>{b=!1},st=()=>b,$e=mt=>(...Gt)=>{b&&mt.apply(null,Gt)},Xe=m.sink(pw({forceDrop:R,drop:$e(R),move:$e(ue),delayDrop:$e(z.throttle)}),p),Nt=()=>{Xe.destroy()};return{element:Xe.element,go:q,on:ke,off:Te,isActive:st,destroy:Nt,events:w.registry}},vw=c=>{const m=c.replace(/\./g,"-");return{resolve:p=>m+"-"+p}},Hy=vw("ephox-dragster").resolve,z3=c=>{const m={layerClass:Hy("blocker"),...c},p=Qe.fromTag("div");return qn(p,"role","presentation"),Rm(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),fc(p,Hy("blocker")),fc(p,m.layerClass),{element:J(p),destroy:()=>{Fn(p)}}};var F3=I3({compare:(c,m)=>wl(m.left-c.left,m.top-c.top),extract:c=>te.some(wl(c.x,c.y)),sink:(c,m)=>{const p=z3(m),b=nu(p.element(),"mousedown",c.forceDrop),w=nu(p.element(),"mouseup",c.drop),O=nu(p.element(),"mousemove",c.move),R=nu(p.element(),"mouseout",c.delayDrop),z=()=>{p.destroy(),w.unbind(),O.unbind(),R.unbind(),b.unbind()},q=ke=>{uo(ke,p.element())},ue=()=>{Fn(p.element())};return go({element:p.element,start:q,stop:ue,destroy:z})},mutate:(c,m)=>{c.mutate(m.left,m.top)}});const Iy=(c,m={})=>{var p;const b=(p=m.mode)!==null&&p!==void 0?p:F3;return fw(c,b,m)},lp=vw("ephox-snooker").resolve,bw=()=>{const c=ru({drag:Bl(["xDelta","yDelta"])});return{mutate:(m,p)=>{c.trigger.drag(m,p)},events:c.registry}},yw=()=>{const c=ru({drag:Bl(["xDelta","yDelta","target"])});let m=te.none();const p=bw();return p.events.drag.bind(b=>{m.each(w=>{c.trigger.drag(b.xDelta,b.yDelta,w)})}),{assign:b=>{m=te.some(b)},get:()=>m,mutate:p.mutate,events:c.registry}},V3=(c,m,p,b,w)=>{const O=Qe.fromTag("div");return Rm(O,{position:"absolute",left:m-b/2+"px",top:p+"px",height:w+"px",width:b+"px"}),wa(O,{"data-column":c,role:"presentation"}),O},ht=(c,m,p,b,w)=>{const O=Qe.fromTag("div");return Rm(O,{position:"absolute",left:m+"px",top:p-w/2+"px",height:w+"px",width:b+"px"}),wa(O,{"data-row":c,role:"presentation"}),O},wt=lp("resizer-bar"),Py=lp("resizer-rows"),zy=lp("resizer-cols"),Xf=7,kg=(c,m)=>Bn(c.all,(p,b)=>m(p.element)?[b]:[]),Z3=(c,m)=>{const p=[];return fo(c.grid.columns,b=>{qt.getColumnAt(c,b).map(w=>w.element).forall(m)&&p.push(b)}),Xo(p,b=>{const w=qt.filterItems(c,O=>O.column===b);return on(w,O=>m(O.element))})},Y0=c=>{const m=Zs(c.parent(),"."+wt);Le(m,Fn)},xw=(c,m,p)=>{const b=c.origin();Le(m,w=>{w.each(O=>{const R=p(b,O);fc(R,wt),uo(c.parent(),R)})})},U3=(c,m,p,b)=>{xw(c,m,(w,O)=>{const R=V3(O.col,O.x-w.left,p.top-w.top,Xf,b);return fc(R,zy),R})},Q0=(c,m,p,b)=>{xw(c,m,(w,O)=>{const R=ht(O.row,p.left-w.left,O.y-w.top,b,Xf);return fc(R,Py),R})},Fy=(c,m,p,b,w)=>{const O=T(p),R=m.isResizable,z=b.length>0?br.positions(b,p):[],q=z.length>0?kg(c,R):[],ue=Xo(z,($e,Xe)=>Pe(q,Nt=>Xe===Nt));Q0(m,ue,O,Er(p));const ke=w.length>0?ua.positions(w,p):[],Te=ke.length>0?Z3(c,R):[],st=Xo(ke,($e,Xe)=>Pe(Te,Nt=>Xe===Nt));U3(m,st,O,Qp(p))},_g=(c,m)=>{if(Y0(c),c.isResizable(m)){const p=qt.fromTable(m),b=Gm(p),w=qp(p);Fy(p,c,m,b,w)}},J0=(c,m)=>{const p=Zs(c.parent(),"."+wt);Le(p,m)},Cw=c=>{J0(c,m=>{No(m,"display","none")})},ww=c=>{J0(c,m=>{No(m,"display","block")})},W3=c=>Kr(c,Py),Sw=c=>Kr(c,zy),kw=lp("resizer-bar-dragging"),$3=c=>{const m=yw(),p=Iy(m,{});let b=te.none();const w=(Xe,Nt)=>te.from(za(Xe,Nt));m.events.drag.bind(Xe=>{w(Xe.target,"data-row").each(Nt=>{const mt=Xg(Xe.target,"top");No(Xe.target,"top",mt+Xe.yDelta+"px")}),w(Xe.target,"data-column").each(Nt=>{const mt=Xg(Xe.target,"left");No(Xe.target,"left",mt+Xe.xDelta+"px")})});const O=(Xe,Nt)=>{const mt=Xg(Xe,Nt),Gt=Wn(Xe,"data-initial-"+Nt,0);return mt-Gt};p.events.stop.bind(()=>{m.get().each(Xe=>{b.each(Nt=>{w(Xe,"data-row").each(mt=>{const Gt=O(Xe,"top");Ko(Xe,"data-initial-top"),$e.trigger.adjustHeight(Nt,Gt,parseInt(mt,10))}),w(Xe,"data-column").each(mt=>{const Gt=O(Xe,"left");Ko(Xe,"data-initial-left"),$e.trigger.adjustWidth(Nt,Gt,parseInt(mt,10))}),_g(c,Nt)})})});const R=(Xe,Nt)=>{$e.trigger.startAdjust(),m.assign(Xe),qn(Xe,"data-initial-"+Nt,Xg(Xe,Nt)),fc(Xe,kw),No(Xe,"opacity","0.2"),p.go(c.parent())},z=nu(c.parent(),"mousedown",Xe=>{W3(Xe.target)&&R(Xe.target,"top"),Sw(Xe.target)&&R(Xe.target,"left")}),q=Xe=>Qo(Xe,c.view()),ue=Xe=>vr(Xe,"table",q).filter(eg),ke=nu(c.view(),"mouseover",Xe=>{ue(Xe.target).fold(()=>{Tt(Xe.target)&&Y0(c)},Nt=>{p.isActive()&&(b=te.some(Nt),_g(c,Nt))})}),Te=()=>{z.unbind(),ke.unbind(),p.destroy(),Y0(c)},st=Xe=>{_g(c,Xe)},$e=ru({adjustHeight:Bl(["table","delta","row"]),adjustWidth:Bl(["table","delta","column"]),startAdjust:Bl([])});return{destroy:Te,refresh:st,on:p.on,off:p.off,hideBars:Oo(Cw,c),showBars:Oo(ww,c),events:$e.registry}},j3={create:(c,m,p)=>{const b=br,w=ua,O=$3(c),R=ru({beforeResize:Bl(["table","type"]),afterResize:Bl(["table","type"]),startDrag:Bl([])});return O.events.adjustHeight.bind(z=>{const q=z.table;R.trigger.beforeResize(q,"row");const ue=b.delta(z.delta,q);mo(q,ue,z.row,b),R.trigger.afterResize(q,"row")}),O.events.startAdjust.bind(z=>{R.trigger.startDrag()}),O.events.adjustWidth.bind(z=>{const q=z.table;R.trigger.beforeResize(q,"col");const ue=w.delta(z.delta,q),ke=p(q);Gd(q,ue,z.column,m,ke),R.trigger.afterResize(q,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:R.registry}}},wo={only:(c,m)=>{const p=Lc(c)?wu(c):c;return{parent:J(p),view:J(c),origin:J(wl(0,0)),isResizable:m}},detached:(c,m,p)=>{const b=()=>T(m);return{parent:J(m),view:J(c),origin:b,isResizable:p}},body:(c,m,p)=>({parent:J(m),view:J(c),origin:J(wl(0,0)),isResizable:p})},Vy=()=>{const c=Qe.fromTag("div");return Rm(c,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),uo(Zn(),c),c},su=(c,m)=>c.inline?wo.body(Qe.fromDom(c.getBody()),Vy(),m):wo.only(Qe.fromDom(c.getDoc()),m),gd=(c,m)=>{c.inline&&Fn(m.parent())},qf=c=>Mn(c)&&c.nodeName==="TABLE",pa="bar-",ev=c=>za(c,"data-mce-resize")!=="false",Ji=c=>{const m=qt.fromTable(c);qt.hasColumns(m)||Le(Zc(c),p=>{const b=Ad(p,"width");No(p,"width",b),Ko(p,"width")})},Eg=c=>{const m=lo(),p=lo(),b=lo();let w,O;const R=Te=>_0(c,Te),z=()=>Ux(c)?mb():n0(),q=Te=>gb(Te).columns,ue=(Te,st,$e)=>{const Xe=Fr(st,"e");if(O===""&&Hh(Te),$e!==w&&O!==""){No(Te,"width",O);const Nt=z(),mt=R(Te),Gt=Ux(c)||Xe?q(Te)-1:0;Gd(Te,$e-w,Gt,Nt,mt)}else if(X1(O)){const Nt=parseFloat(O.replace("%","")),mt=$e*Nt/w;No(Te,"width",mt+"%")}af(O)&&Ji(Te)},ke=()=>{p.on(Te=>{Te.destroy()}),b.on(Te=>{gd(c,Te)})};return c.on("init",()=>{const Te=su(c,ev);if(b.set(Te),Vu(c)&&rb(c)){const st=z(),$e=j3.create(Te,st,R);$e.on(),$e.events.startDrag.bind(Xe=>{m.set(c.selection.getRng())}),$e.events.beforeResize.bind(Xe=>{const Nt=Xe.table.dom;Gk(c,Nt,dc(Nt),qc(Nt),pa+Xe.type)}),$e.events.afterResize.bind(Xe=>{const Nt=Xe.table,mt=Nt.dom;Xc(Nt),m.on(Gt=>{c.selection.setRng(Gt),c.focus()}),Kk(c,mt,dc(mt),qc(mt),pa+Xe.type),c.undoManager.add()}),p.set($e)}}),c.on("ObjectResizeStart",Te=>{const st=Te.target;if(qf(st)){const $e=Qe.fromDom(st);Le(c.dom.select(".mce-clonedresizable"),Xe=>{c.dom.addClass(Xe,"mce-"+di(c)+"-columns")}),!$b($e)&&ui(c)?gc($e):!gg($e)&&K1(c)&&Hh($e),IC($e)&&tc(Te.origin,pa)&&Hh($e),w=Te.width,O=Jm(c)?"":og(c,st).getOr("")}}),c.on("ObjectResized",Te=>{const st=Te.target;if(qf(st)){const $e=Qe.fromDom(st),Xe=Te.origin;tc(Xe,"corner-")&&ue($e,Xe,Te.width),Xc($e),tm(c,$e.dom,k0)}}),c.on("SwitchMode",()=>{p.on(Te=>{c.mode.isReadOnly()?Te.hideBars():Te.showBars()})}),c.on("dragstart dragend",Te=>{p.on(st=>{Te.type==="dragstart"?(st.hideBars(),st.off()):(st.on(),st.showBars())})}),c.on("remove",()=>{ke()}),{refresh:Te=>{p.on(st=>st.refreshBars(Qe.fromDom(Te)))},hide:()=>{p.on(Te=>Te.hideBars())},show:()=>{p.on(Te=>Te.showBars())}}},cp=c=>{Ym(c);const m=Eg(c),p=R3(c,m),b=BC(c,m,p);return d3(c,b),ey(c,b),db(c,b),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},G3=c=>({table:cp(c)});var K3=()=>{Ct.add("dom",G3)};K3()})();(function(){const Ct=Object.getPrototypeOf,Mo=(t,r,a)=>{var l;return a(t,r.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===r.name},ho=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&Mo(t,String,(a,l)=>l.isPrototypeOf(a))?"string":r},jo=t=>r=>ho(r)===t,Ro=t=>r=>typeof r===t,Zo=t=>r=>t===r,kn=(t,r)=>Jt(t)&&Mo(t,r,(a,l)=>Ct(a)===l),Pt=jo("string"),Jt=jo("object"),na=t=>kn(t,Object),Ut=jo("array"),Ao=Zo(null),gr=Ro("boolean"),Mn=Zo(void 0),An=t=>t==null,bn=t=>!An(t),ft=Ro("function"),Os=Ro("number"),_n=(t,r)=>{if(Ut(t)){for(let a=0,l=t.length;a<l;++a)if(!r(t[a]))return!1;return!0}return!1},J=()=>{},qe=t=>()=>t(),ul=(t,r)=>(...a)=>t(r.apply(null,a)),Oo=(t,r)=>a=>t(r(a)),se=t=>()=>t,so=t=>t,Rn=(t,r)=>t===r;function io(t,...r){return(...a)=>{const l=r.concat(a);return t.apply(null,l)}}const Oe=t=>r=>!t(r),te=t=>()=>{throw new Error(t)},nr=t=>t(),Ge=se(!1),Be=se(!0);class E{constructor(r,a){this.tag=r,this.value=a}static some(r){return new E(!0,r)}static none(){return E.singletonNone}fold(r,a){return this.tag?a(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?E.some(r(this.value)):E.none()}bind(r){return this.tag?r(this.value):E.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:E.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return bn(r)?E.some(r):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const ro=Array.prototype.slice,Pe=Array.prototype.indexOf,fo=Array.prototype.push,Ot=(t,r)=>Pe.call(t,r),Le=(t,r)=>{const a=Ot(t,r);return a===-1?E.none():E.some(a)},zo=(t,r)=>Ot(t,r)>-1,xr=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(r(u,a))return!0}return!1},Xo=(t,r)=>{const a=[];for(let l=0;l<t;l++)a.push(r(l));return a},lr=(t,r)=>{const a=[];for(let l=0;l<t.length;l+=r){const u=ro.call(t,l,l+r);a.push(u)}return a},Ie=(t,r)=>{const a=t.length,l=new Array(a);for(let u=0;u<a;u++){const h=t[u];l[u]=r(h,u)}return l},at=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];r(u,a)}},I=(t,r)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];r(l,a)}},hs=(t,r)=>{const a=[],l=[];for(let u=0,h=t.length;u<h;u++){const v=t[u];(r(v,u)?a:l).push(v)}return{pass:a,fail:l}},qo=(t,r)=>{const a=[];for(let l=0,u=t.length;l<u;l++){const h=t[l];r(h,l)&&a.push(h)}return a},Bn=(t,r,a)=>(I(t,(l,u)=>{a=r(a,l,u)}),a),on=(t,r,a)=>(at(t,(l,u)=>{a=r(a,l,u)}),a),Zp=(t,r,a)=>{for(let l=0,u=t.length;l<u;l++){const h=t[l];if(r(h,l))return E.some(h);if(a(h,l))break}return E.none()},It=(t,r)=>Zp(t,r,Ge),nn=(t,r)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(r(u,a))return E.some(a)}return E.none()},Bt=t=>{const r=[];for(let a=0,l=t.length;a<l;++a){if(!Ut(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);fo.apply(r,t[a])}return r},me=(t,r)=>Bt(Ie(t,r)),ei=(t,r)=>{for(let a=0,l=t.length;a<l;++a){const u=t[a];if(r(u,a)!==!0)return!1}return!0},cr=t=>{const r=ro.call(t,0);return r.reverse(),r},Et=(t,r)=>qo(t,a=>!zo(r,a)),ml=(t,r)=>{const a={};for(let l=0,u=t.length;l<u;l++){const h=t[l];a[String(h)]=r(h,l)}return a},En=t=>[t],xu=(t,r)=>{const a=ro.call(t,0);return a.sort(r),a},On=(t,r)=>r>=0&&r<t.length?E.some(t[r]):E.none(),Ts=t=>On(t,0),jl=t=>On(t,t.length-1),Ds=ft(Array.from)?Array.from:t=>ro.call(t),hr=(t,r)=>{for(let a=0;a<t.length;a++){const l=r(t[a],a);if(l.isSome())return l}return E.none()},yn=Object.keys,ti=Object.hasOwnProperty,Xn=(t,r)=>{const a=yn(t);for(let l=0,u=a.length;l<u;l++){const h=a[l],v=t[h];r(v,h)}},Yo=(t,r)=>Nc(t,(a,l)=>({k:l,v:r(a,l)})),Nc=(t,r)=>{const a={};return Xn(t,(l,u)=>{const h=r(l,u);a[h.k]=h.v}),a},xn=t=>(r,a)=>{t[a]=r},Ia=(t,r,a,l)=>{Xn(t,(u,h)=>{(r(u,h)?a:l)(u,h)})},ps=(t,r)=>{const a={},l={};return Ia(t,r,xn(a),xn(l)),{t:a,f:l}},gl=(t,r)=>{const a={};return Ia(t,r,xn(a),J),a},Si=(t,r)=>{const a=[];return Xn(t,(l,u)=>{a.push(r(l,u))}),a},Cr=(t,r)=>{const a=yn(t);for(let l=0,u=a.length;l<u;l++){const h=a[l],v=t[h];if(r(v,h,t))return E.some(v)}return E.none()},hl=t=>Si(t,so),ot=(t,r)=>bo(t,r)?E.from(t[r]):E.none(),bo=(t,r)=>ti.call(t,r),ra=(t,r)=>bo(t,r)&&t[r]!==void 0&&t[r]!==null,Ms=(t,r,a=Rn)=>t.exists(l=>a(l,r)),ki=(t,r,a=Rn)=>Pa(t,r,a).getOr(t.isNone()&&r.isNone()),_i=t=>{const r=[],a=l=>{r.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return r},Uo=t=>{const r=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())r.push(l.getOrDie());else return E.none()}return E.some(r)},Pa=(t,r,a)=>t.isSome()&&r.isSome()?E.some(a(t.getOrDie(),r.getOrDie())):E.none(),Gl=(t,r,a,l)=>t.isSome()&&r.isSome()&&a.isSome()?E.some(l(t.getOrDie(),r.getOrDie(),a.getOrDie())):E.none(),Go=(t,r)=>t!=null?E.some(r(t)):E.none(),At=(t,r)=>t?E.some(r):E.none(),Jr=(t,r)=>t+r,pl=(t,r)=>t.substring(r),Lc=(t,r,a)=>r===""||t.length>=r.length&&t.substr(a,a+r.length)===r,Ed=(t,r)=>qn(t,r)?pl(t,r.length):t,es=(t,r)=>wa(t,r)?t:Jr(t,r),Pr=(t,r,a=0,l)=>{const u=t.indexOf(r,a);return u!==-1?Mn(l)?!0:u+r.length<=l:!1},qn=(t,r)=>Lc(t,r,0),wa=(t,r)=>Lc(t,r,t.length-r.length),ts=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),za=t=>t.length>0,sa=t=>!za(t),Ko=t=>t.style!==void 0&&ft(t.style.getPropertyValue),Ei=(t,r)=>{const a=(r||document).createElement("div");if(a.innerHTML=t,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,t),new Error(l)}return Oi(a.childNodes[0])},os=(t,r)=>{const a=(r||document).createElement(t);return Oi(a)},Cu=(t,r)=>{const a=(r||document).createTextNode(t);return Oi(a)},Oi=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ke={fromHtml:Ei,fromTag:os,fromText:Cu,fromDom:Oi,fromPoint:(t,r,a)=>E.from(t.dom.elementFromPoint(r,a)).map(Oi)},Qe=typeof window<"u"?window:Function("return this;")(),As=(t,r)=>{let a=r??Qe;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},Hc=(t,r)=>{const a=t.split(".");return As(a,r)},fl=(t,r)=>Hc(t,r),Sm=(t,r)=>{const a=fl(t,r);if(a==null)throw new Error(t+" not available on this browser");return a},Qo=Object.getPrototypeOf,Kl=t=>Sm("HTMLElement",t),Up=t=>{const r=Hc("ownerDocument.defaultView",t);return Jt(t)&&(Kl(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Qo(t).constructor.name))},Ic=9,Xl=11,wu=1,Yn=3,Bo=t=>t.dom.nodeName.toLowerCase(),Su=t=>t.dom.nodeType,ql=t=>r=>Su(r)===t,Ti=t=>zn(t)&&Up(t.dom),zn=ql(wu),rr=ql(Yn),sr=ql(Ic),Yl=ql(Xl),oi=t=>r=>zn(r)&&Bo(r)===t,wr=(t,r)=>{const a=t.dom;if(a.nodeType!==wu)return!1;{const l=a;if(l.matches!==void 0)return l.matches(r);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(r);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(r);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},ni=t=>t.nodeType!==wu&&t.nodeType!==Ic&&t.nodeType!==Xl||t.childElementCount===0,uo=(t,r)=>{const a=r===void 0?document:r.dom;return ni(a)?[]:Ie(a.querySelectorAll(t),Ke.fromDom)},Gg=(t,r)=>{const a=r===void 0?document:r.dom;return ni(a)?E.none():E.from(a.querySelector(t)).map(Ke.fromDom)},Vo=(t,r)=>t.dom===r.dom,Di=(t,r)=>{const a=t.dom,l=r.dom;return a===l?!1:a.contains(l)},pr=t=>Ke.fromDom(t.dom.ownerDocument),Ql=t=>sr(t)?t:pr(t),Fn=t=>Ke.fromDom(Ql(t).dom.documentElement),Pc=t=>Ke.fromDom(Ql(t).dom.defaultView),ns=t=>E.from(t.dom.parentNode).map(Ke.fromDom),Od=t=>ns(t),Fs=t=>E.from(t.dom.parentElement).map(Ke.fromDom),km=(t,r)=>{const a=ft(r)?r:Ge;let l=t.dom;const u=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const h=l.parentNode,v=Ke.fromDom(h);if(u.push(v),a(v)===!0)break;l=h}return u},Mi=t=>E.from(t.dom.offsetParent).map(Ke.fromDom),_m=t=>E.from(t.dom.nextSibling).map(Ke.fromDom),aa=t=>Ie(t.dom.childNodes,Ke.fromDom),vl=(t,r)=>{const a=t.dom.childNodes;return E.from(a[r]).map(Ke.fromDom)},ku=t=>vl(t,0),Em=(t,r)=>({element:t,offset:r}),_u=(t,r)=>{const a=aa(t);return a.length>0&&r<a.length?Em(a[r],0):Em(t,r)},Td=t=>Yl(t)&&bn(t.dom.host),ri=ft(Element.prototype.attachShadow)&&ft(Node.prototype.getRootNode),Om=se(ri),zr=ri?t=>Ke.fromDom(t.dom.getRootNode()):Ql,Vn=t=>Td(t)?t:Ke.fromDom(Ql(t).dom.body),Jl=t=>Tm(t).isSome(),Tm=t=>{const r=zr(t);return Td(r)?E.some(r):E.none()},Dm=t=>Ke.fromDom(t.dom.host),Fa=t=>{if(Om()&&bn(t.target)){const r=Ke.fromDom(t.target);if(zn(r)&&Dd(r)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ts(a)}}return E.from(t.target)},Dd=t=>bn(t.dom.shadowRoot),fs=t=>{const r=rr(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const a=r.ownerDocument;return Tm(Ke.fromDom(r)).fold(()=>a.body.contains(r),Oo(fs,Dm))},fr=()=>N(Ke.fromDom(document)),N=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Ke.fromDom(r)},V=(t,r,a)=>{if(Pt(a)||gr(a)||Os(a))t.setAttribute(r,a+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},W=(t,r,a)=>{V(t.dom,r,a)},ae=(t,r)=>{const a=t.dom;Xn(r,(l,u)=>{V(a,u,l)})},ut=(t,r)=>{const a=t.dom.getAttribute(r);return a===null?void 0:a},Tt=(t,r)=>E.from(ut(t,r)),Zn=(t,r)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(r):!1},vo=(t,r)=>{t.dom.removeAttribute(r)},zc=t=>on(t.dom.attributes,(r,a)=>(r[a.name]=a.value,r),{}),ia=(t,r,a)=>{if(!Pt(a))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ko(t)&&t.style.setProperty(r,a)},Vs=(t,r)=>{Ko(t)&&t.style.removeProperty(r)},ve=(t,r,a)=>{const l=t.dom;ia(l,r,a)},Rs=(t,r)=>{const a=t.dom;Xn(r,(l,u)=>{ia(a,u,l)})},Zs=(t,r)=>{const a=t.dom;Xn(r,(l,u)=>{l.fold(()=>{Vs(a,u)},h=>{ia(a,u,h)})})},Sr=(t,r)=>{const a=t.dom,l=window.getComputedStyle(a).getPropertyValue(r);return l===""&&!fs(t)?Qn(a,r):l},Qn=(t,r)=>Ko(t)?t.style.getPropertyValue(r):"",Wo=(t,r)=>{const a=t.dom,l=Qn(a,r);return E.from(l).filter(u=>u.length>0)},bl=t=>{const r={},a=t.dom;if(Ko(a))for(let l=0;l<a.style.length;l++){const u=a.style.item(l);r[u]=a.style[u]}return r},Mm=(t,r,a)=>{const l=Ke.fromTag(t);return ve(l,r,a),Wo(l,r).isSome()},xo=(t,r)=>{const a=t.dom;Vs(a,r),Ms(Tt(t,"style").map(ts),"")&&vo(t,"style")},Va=t=>t.dom.offsetWidth,Md=(t,r)=>{const a=(v,x)=>{if(!Os(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const C=v.dom;Ko(C)&&(C.style[t]=x+"px")},l=v=>{const x=r(v);if(x<=0||x===null){const C=Sr(v,t);return parseFloat(C)||0}return x},u=l,h=(v,x)=>on(x,(C,_)=>{const M=Sr(v,_),A=M===void 0?0:parseInt(M,10);return isNaN(A)?C:C+A},0);return{set:a,get:l,getOuter:u,aggregate:h,max:(v,x,C)=>{const _=h(v,C);return x>_?x-_:0}}},vr=Md("height",t=>{const r=t.dom;return fs(t)?r.getBoundingClientRect().height:r.offsetHeight}),Cn=t=>vr.get(t),ec=t=>vr.getOuter(t),jv=(t,r)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=vr.max(t,r,a);ve(t,"max-height",l+"px")},Am=(t,r)=>({left:t,top:r,translate:(a,l)=>Am(t+a,r+l)}),gn=Am,la=t=>{const r=t.getBoundingClientRect();return gn(r.left,r.top)},tc=(t,r)=>t!==void 0?t:r!==void 0?r:0,Fr=t=>{const r=t.dom.ownerDocument,a=r.body,l=r.defaultView,u=r.documentElement;if(a===t.dom)return gn(a.offsetLeft,a.offsetTop);const h=tc(l==null?void 0:l.pageYOffset,u.scrollTop),v=tc(l==null?void 0:l.pageXOffset,u.scrollLeft),x=tc(u.clientTop,a.clientTop),C=tc(u.clientLeft,a.clientLeft);return po(t).translate(v-C,h-x)},po=t=>{const r=t.dom,a=r.ownerDocument.body;return a===r?gn(a.offsetLeft,a.offsetTop):fs(t)?la(r):gn(0,0)},Eu=Md("width",t=>t.dom.offsetWidth),Kg=(t,r)=>Eu.set(t,r),Un=t=>Eu.get(t),si=t=>Eu.getOuter(t),Sa=(t,r)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Eu.max(t,r,a);ve(t,"max-width",l+"px")},No=t=>{let r=!1,a;return(...l)=>(r||(r=!0,a=t.apply(null,l)),a)},Rm=(t,r,a,l)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!u,v=t.isiOS()||t.isAndroid(),x=v||l("(pointer:coarse)"),C=u||!h&&v&&l("(min-device-width:768px)"),_=h||v&&!C,M=r.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,A=!_&&!C&&!M;return{isiPad:se(u),isiPhone:se(h),isTablet:se(C),isPhone:se(_),isTouch:se(x),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:se(M),isDesktop:se(A)}},Ad=(t,r)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(r))return l}},Bm=(t,r)=>{const a=Ad(t,r);if(!a)return{major:0,minor:0};const l=u=>Number(r.replace(a,"$"+u));return Ai(l(1),l(2))},Nm=(t,r)=>{const a=String(r).toLowerCase();return t.length===0?Dn():Bm(t,a)},Dn=()=>Ai(0,0),Ai=(t,r)=>({major:t,minor:r}),Wn={nu:Ai,detect:Nm,unknown:Dn},Ri=(t,r)=>hr(r.brands,a=>{const l=a.brand.toLowerCase();return It(t,u=>{var h;return l===((h=u.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(u=>({current:u.name,version:Wn.nu(parseInt(a.version,10),0)}))}),Fc=(t,r)=>{const a=String(r).toLowerCase();return It(t,l=>l.search(a))},kr=(t,r)=>Fc(t,r).map(a=>{const l=Wn.detect(a.versionRegexes,r);return{current:a.name,version:l}}),Xg=(t,r)=>Fc(t,r).map(a=>{const l=Wn.detect(a.versionRegexes,r);return{current:a.name,version:l}}),Vc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ka=t=>r=>Pr(r,t),qg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Pr(t,"edge/")&&Pr(t,"chrome")&&Pr(t,"safari")&&Pr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Vc],search:t=>Pr(t,"chrome")&&!Pr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Pr(t,"msie")||Pr(t,"trident")},{name:"Opera",versionRegexes:[Vc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ka("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ka("firefox")},{name:"Safari",versionRegexes:[Vc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Pr(t,"safari")||Pr(t,"mobile/"))&&Pr(t,"applewebkit")}],Wp=[{name:"Windows",search:ka("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Pr(t,"iphone")||Pr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ka("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ka("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ka("linux"),versionRegexes:[]},{name:"Solaris",search:ka("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ka("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ka("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ou={browsers:se(qg),oses:se(Wp)},Yg="Edge",Zc="Chromium",Lm="IE",Us="Opera",Uc="Firefox",Hm="Safari",Tu=()=>Im({current:void 0,version:Wn.unknown()}),Im=t=>{const r=t.current,a=t.version,l=u=>()=>r===u;return{current:r,version:a,isEdge:l(Yg),isChromium:l(Zc),isIE:l(Lm),isOpera:l(Us),isFirefox:l(Uc),isSafari:l(Hm)}},Pm={unknown:Tu,nu:Im,edge:se(Yg),chromium:se(Zc),ie:se(Lm),opera:se(Us),firefox:se(Uc),safari:se(Hm)},P1="Windows",Du="iOS",z1="Android",Mu="Linux",X="macOS",$p="Solaris",Za="FreeBSD",Rd="ChromeOS",Au=()=>Qg({current:void 0,version:Wn.unknown()}),Qg=t=>{const r=t.current,a=t.version,l=u=>()=>r===u;return{current:r,version:a,isWindows:l(P1),isiOS:l(Du),isAndroid:l(z1),isMacOS:l(X),isLinux:l(Mu),isSolaris:l($p),isFreeBSD:l(Za),isChromeOS:l(Rd)}},yo={unknown:Au,nu:Qg,windows:se(P1),ios:se(Du),android:se(z1),linux:se(Mu),macos:se(X),solaris:se($p),freebsd:se(Za),chromeos:se(Rd)},oc={detect:(t,r,a)=>{const l=Ou.browsers(),u=Ou.oses(),h=r.bind(C=>Ri(l,C)).orThunk(()=>kr(l,t)).fold(Pm.unknown,Pm.nu),v=Xg(u,t).fold(yo.unknown,yo.nu),x=Rm(v,h,t,a);return{browser:h,os:v,deviceType:x}}},Jg=t=>window.matchMedia(t).matches;let Bi=No(()=>oc.detect(navigator.userAgent,E.from(navigator.userAgentData),Jg));const Bs=()=>Bi(),zm=(t,r,a,l,u,h,v)=>({target:t,x:r,y:a,stop:l,prevent:u,kill:h,raw:v}),vs=t=>{const r=Ke.fromDom(Fa(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),u=ul(l,a);return zm(r,t.clientX,t.clientY,a,l,u,t)},yl=(t,r)=>a=>{t(a)&&r(vs(a))},nc=(t,r,a,l,u)=>{const h=yl(a,l);return t.dom.addEventListener(r,h,u),{unbind:io(Nd,t,r,h,u)}},Bd=(t,r,a,l)=>nc(t,r,a,l,!1),Wc=(t,r,a,l)=>nc(t,r,a,l,!0),Nd=(t,r,a,l)=>{t.dom.removeEventListener(r,a,l)},Ld=(t,r)=>{ns(t).each(a=>{a.dom.insertBefore(r.dom,t.dom)})},$c=(t,r)=>{_m(t).fold(()=>{ns(t).each(a=>{_r(a,r)})},a=>{Ld(a,r)})},Vr=(t,r)=>{ku(t).fold(()=>{_r(t,r)},a=>{t.dom.insertBefore(r.dom,a.dom)})},_r=(t,r)=>{t.dom.appendChild(r.dom)},Ru=(t,r,a)=>{vl(t,a).fold(()=>{_r(t,r)},l=>{Ld(l,r)})},Fm=(t,r)=>{at(r,a=>{_r(t,a)})},Bu=t=>{t.dom.textContent="",at(aa(t),r=>{xl(r)})},xl=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},ca=t=>{const r=t!==void 0?t.dom:document,a=r.body.scrollLeft||r.documentElement.scrollLeft,l=r.body.scrollTop||r.documentElement.scrollTop;return gn(a,l)},Vm=(t,r,a)=>{const l=(a!==void 0?a.dom:document).defaultView;l&&l.scrollTo(t,r)},jp=t=>{const r=t===void 0?window:t;return Bs().browser.isFirefox()?E.none():E.from(r.visualViewport)},Gp=(t,r,a,l)=>({x:t,y:r,width:a,height:l,right:t+a,bottom:r+l}),Ni=t=>{const r=t===void 0?window:t,a=r.document,l=ca(Ke.fromDom(a));return jp(r).fold(()=>{const u=r.document.documentElement,h=u.clientWidth,v=u.clientHeight;return Gp(l.left,l.top,h,v)},u=>Gp(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height))},Hd=()=>Ke.fromDom(document),Kp=(t,r)=>t.view(r).fold(se([]),a=>{const l=t.owner(a),u=Kp(t,l);return[a].concat(u)}),F1=(t,r)=>{const a=r.owner(t),l=Kp(r,a);return E.some(l)};var Gv=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?E.none():E.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(Ke.fromDom)},owner:t=>pr(t)});const Zm=t=>{const r=Hd(),a=ca(r);return F1(t,Gv).fold(io(Fr,t),l=>{const u=po(t),h=Bn(l,(v,x)=>{const C=po(x);return{left:v.left+C.left,top:v.top+C.top}},{left:0,top:0});return gn(h.left+u.left+a.left,h.top+u.top+a.top)})},Kv=(t,r,a)=>({point:t,width:r,height:a}),rc=(t,r,a,l)=>({x:t,y:r,width:a,height:l}),Jn=(t,r,a,l)=>({x:t,y:r,width:a,height:l,right:t+a,bottom:r+l}),Nn=t=>{const r=Fr(t),a=si(t),l=ec(t);return Jn(r.left,r.top,a,l)},rs=t=>{const r=Zm(t),a=si(t),l=ec(t);return Jn(r.left,r.top,a,l)},eh=(t,r)=>{const a=Math.max(t.x,r.x),l=Math.max(t.y,r.y),u=Math.min(t.right,r.right),h=Math.min(t.bottom,r.bottom),v=u-a,x=h-l;return Jn(a,l,v,x)},V1=(t,r)=>on(r,(a,l)=>eh(a,l),t),bs=()=>Ni(window);var Um=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Id=t=>{const r=h=>h(t),a=se(t),l=()=>u,u={tag:!0,inner:t,fold:(h,v)=>v(t),isValue:Be,isError:Ge,map:h=>Wt.value(h(t)),mapError:l,bind:r,exists:r,forall:r,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:h=>{h(t)},toOptional:()=>E.some(t)};return u},Li=t=>{const r=()=>a,a={tag:!1,inner:t,fold:(l,u)=>l(t),isValue:Ge,isError:Be,map:r,mapError:l=>Wt.error(l(t)),bind:r,exists:Ge,forall:Be,getOr:so,or:so,getOrThunk:nr,orThunk:nr,getOrDie:te(String(t)),each:J,toOptional:E.none};return a},Wt={value:Id,error:Li,fromOption:(t,r)=>t.fold(()=>Li(r),Id)};var Er;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Er||(Er={}));const Wm=(t,r,a)=>t.stype===Er.Error?r(t.serror):a(t.svalue),$m=t=>{const r=[],a=[];return at(t,l=>{Wm(l,u=>a.push(u),u=>r.push(u))}),{values:r,errors:a}},th=(t,r)=>t.stype===Er.Error?{stype:Er.Error,serror:r(t.serror)}:t,Z1=(t,r)=>t.stype===Er.Value?{stype:Er.Value,svalue:r(t.svalue)}:t,Nu=(t,r)=>t.stype===Er.Value?r(t.svalue):t,Lu=(t,r)=>t.stype===Er.Error?r(t.serror):t,Hi=t=>({stype:Er.Value,svalue:t}),Ws=t=>({stype:Er.Error,serror:t}),To={fromResult:t=>t.fold(Ws,Hi),toResult:t=>Wm(t,Wt.error,Wt.value),svalue:Hi,partition:$m,serror:Ws,bind:Nu,bindError:Lu,map:Z1,mapError:th,fold:Wm},da=(t,r,a,l)=>({tag:"field",key:t,newKey:r,presence:a,prop:l}),Zr=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),jm=(t,r,a)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Ur=(t,r)=>r,sc=(t,r)=>na(t)&&na(r)?ao(t,r):r,Cl=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<r.length;l++){const u=r[l];for(const h in u)bo(u,h)&&(a[h]=t(a[h],u[h]))}return a},ao=Cl(sc),Xp=Cl(Ur),Ii=()=>({tag:"required",process:{}}),Pi=t=>({tag:"defaultedThunk",process:t}),ac=t=>Pi(se(t)),$o=()=>({tag:"option",process:{}}),qt=t=>({tag:"mergeWithThunk",process:t}),qp=t=>qt(se(t)),oh=(t,r)=>t.length>0?To.svalue(ao(r,Xp.apply(void 0,t))):To.svalue(r),Gm=t=>ul(To.serror,Bt)(t),Hu={consolidateObj:(t,r)=>{const a=To.partition(t);return a.errors.length>0?Gm(a.errors):oh(a.values,r)},consolidateArr:t=>{const r=To.partition(t);return r.errors.length>0?Gm(r.errors):To.svalue(r.values)}},nh=t=>Jt(t)&&yn(t).length>100?" removed due to size":JSON.stringify(t,null,2),Xv=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:se("... (only showing first ten failures)")}]):t;return Ie(r,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Iu=(t,r)=>To.serror([{path:t,getErrorInfo:r}]),Yp=(t,r,a)=>Iu(t,()=>'Could not find valid *required* value for "'+r+'" in '+nh(a)),Qp=(t,r)=>Iu(t,()=>'Choice schema did not contain choice key: "'+r+'"'),qv=(t,r,a)=>Iu(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+nh(r)),U1=(t,r)=>Iu(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),wl=(t,r)=>Iu(t,se(r)),zi=t=>{const r=(l,u)=>To.bindError(t(u),h=>wl(l,h)),a=se("val");return{extract:r,toString:a}},S=zi(To.svalue),T=(t,r,a,l)=>ot(r,a).fold(()=>Yp(t,a,r),l),H=(t,r,a,l)=>{const u=ot(t,r).getOrThunk(()=>a(t));return l(u)},Y=(t,r,a)=>a(ot(t,r)),ne=(t,r,a,l)=>{const u=ot(t,r).map(h=>h===!0?a(t):h);return l(u)},Ze=(t,r,a,l,u)=>{const h=x=>u.extract(r.concat([l]),x),v=x=>x.fold(()=>To.svalue(E.none()),C=>{const _=u.extract(r.concat([l]),C);return To.map(_,E.some)});switch(t.tag){case"required":return T(r,a,l,h);case"defaultedThunk":return H(a,l,t.process,h);case"option":return Y(a,l,v);case"defaultedOptionThunk":return ne(a,l,t.process,v);case"mergeWithThunk":return H(a,l,se({}),x=>{const C=ao(t.process(a),x);return h(C)})}},kt=(t,r,a)=>{const l={},u=[];for(const h of a)jm(h,(v,x,C,_)=>{const M=Ze(C,t,r,v,_);To.fold(M,A=>{u.push(...A)},A=>{l[x]=A})},(v,x)=>{l[v]=x(r)});return u.length>0?To.serror(u):To.svalue(l)},zt=t=>({extract:(r,a)=>t().extract(r,a),toString:()=>t().toString()}),jt=t=>yn(gl(t,bn)),bt=t=>{const r=it(t),a=Bn(t,(l,u)=>jm(u,h=>ao(l,{[h]:!0}),se(l)),{});return{extract:(l,u)=>{const h=gr(u)?[]:jt(u),v=qo(h,x=>!ra(a,x));return v.length===0?r.extract(l,u):U1(l,v)},toString:r.toString}},it=t=>({extract:(r,a)=>kt(r,a,t),toString:()=>`obj{
`+Ie(t,r=>jm(r,(a,l,u,h)=>a+" -> "+h.toString(),(a,l)=>"state("+a+")")).join(`
`)+"}"}),$n=t=>({extract:(r,a)=>{const l=Ie(a,(u,h)=>t.extract(r.concat(["["+h+"]"]),u));return Hu.consolidateArr(l)},toString:()=>"array("+t.toString()+")"}),rn=(t,r)=>{const a=r!==void 0?r:so;return{extract:(l,u)=>{const h=[];for(const v of t){const x=v.extract(l,u);if(x.stype===Er.Value)return{stype:Er.Value,svalue:a(x.svalue)};h.push(x)}return Hu.consolidateArr(h)},toString:()=>"oneOf("+Ie(t,l=>l.toString()).join(", ")+")"}},jc=(t,r)=>{const a=(l,u)=>$n(zi(t)).extract(l,u);return{extract:(l,u)=>{const h=yn(u),v=a(l,h);return To.bind(v,x=>{const C=Ie(x,_=>da(_,_,Ii(),r));return it(C).extract(l,u)})},toString:()=>"setOf("+r.toString()+")"}},br=(t,r)=>{const a=No(r);return{extract:(l,u)=>a().extract(l,u),toString:()=>a().toString()}},ic=ul($n,it),ua=se(S),pt=(t,r)=>zi(a=>{const l=typeof a;return t(a)?To.svalue(a):To.serror(`Expected type: ${r} but got: ${l}`)}),Sl=pt(Os,"number"),ss=pt(Pt,"string"),Pd=pt(gr,"boolean"),ai=pt(ft,"function"),Jp=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>Jp(t[r]));default:return!1}},Lx=zi(t=>Jp(t)?To.svalue(t):To.serror("Expected value to be acceptable for sending via postMessage")),Hx=(t,r,a,l)=>ot(a,l).fold(()=>qv(t,a,l),u=>u.extract(t.concat(["branch: "+l]),r)),Fi=(t,r)=>({extract:(a,l)=>ot(l,t).fold(()=>Qp(a,t),u=>Hx(a,l,r,u)),toString:()=>"chooseOn("+t+"). Possible values: "+yn(r)}),Ix=()=>$n(S),_a=t=>zi(r=>t(r).fold(To.serror,To.svalue)),Yv=(t,r)=>jc(a=>To.fromResult(t(a)),r),Qv=(t,r,a)=>{const l=r.extract([t],a);return To.mapError(l,u=>({input:a,errors:u}))},Ae=(t,r,a)=>To.toResult(Qv(t,r,a)),lc=t=>t.fold(r=>{throw new Error(ii(r))},so),Ea=(t,r,a)=>lc(Ae(t,r,a)),ii=t=>`Errors: 
`+Xv(t.errors).join(`
`)+`

Input object: `+nh(t.input),yr=(t,r)=>Fi(t,Yo(r,it)),W1=(t,r)=>br(t,r),Co=da,Ns=Zr,Ua=t=>_a(r=>zo(t,r)?Wt.value(r):Wt.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),xe=t=>Co(t,t,Ii(),ua()),$s=(t,r)=>Co(t,t,Ii(),r),hk=t=>$s(t,Sl),dn=t=>$s(t,ss),zd=(t,r)=>Co(t,t,Ii(),Ua(r)),Jv=t=>$s(t,Pd),kl=t=>$s(t,ai),ef=(t,r)=>Co(t,t,$o(),zi(a=>To.serror("The field: "+t+" is forbidden. "+r))),jn=(t,r)=>Co(t,t,Ii(),it(r)),$1=(t,r)=>Co(t,t,Ii(),ic(r)),li=(t,r)=>Co(t,t,Ii(),$n(r)),_o=t=>Co(t,t,$o(),ua()),Vi=(t,r)=>Co(t,t,$o(),r),Pu=t=>Vi(t,Sl),ys=t=>Vi(t,ss),eb=(t,r)=>Vi(t,Ua(r)),Km=t=>Vi(t,ai),Px=(t,r)=>Vi(t,$n(r)),Oa=(t,r)=>Vi(t,it(r)),zx=(t,r)=>Vi(t,bt(r)),ge=(t,r)=>Co(t,t,ac(r),ua()),js=(t,r,a)=>Co(t,t,ac(r),a),rh=(t,r)=>js(t,r,Sl),Ta=(t,r)=>js(t,r,ss),_l=(t,r,a)=>js(t,r,Ua(a)),Wr=(t,r)=>js(t,r,Pd),ar=(t,r)=>js(t,r,ai),sh=(t,r)=>js(t,r,Lx),cc=(t,r,a)=>js(t,r,$n(a)),ah=(t,r,a)=>js(t,r,it(a)),Dt=t=>{let r=t;return{get:()=>r,set:a=>{r=a}}},El={generate:t=>{if(!Ut(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],a={};return at(t,(l,u)=>{const h=yn(l);if(h.length!==1)throw new Error("one and only one name per case");const v=h[0],x=l[v];if(a[v]!==void 0)throw new Error("duplicate key detected:"+v);if(v==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ut(x))throw new Error("case arguments must be an array");r.push(v),a[v]=(...C)=>{const _=C.length;if(_!==x.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+x.length+" ("+x+"), got "+_);return{fold:(...M)=>{if(M.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+M.length);return M[u].apply(null,C)},match:M=>{const A=yn(M);if(r.length!==A.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+A.join(","));if(!ei(r,B=>zo(A,B)))throw new Error("Not all branches were specified when using match. Specified: "+A.join(", ")+`
Required: `+r.join(", "));return M[v].apply(null,C)},log:M=>{console.log(M,{constructors:r,constructor:v,params:C})}}}}),a}};El.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const tf=t=>{const r=[],a=[];return at(t,l=>{l.fold(u=>{r.push(u)},u=>{a.push(u)})}),{errors:r,values:a}},zu=(t,r)=>{const a={};return Xn(t,(l,u)=>{zo(r,u)||(a[u]=l)}),a},pk=(t,r)=>({[t]:r}),$r=t=>{const r={};return at(t,a=>{r[a.key]=a.value}),r},ih=(t,r)=>zu(t,r),jr=(t,r)=>pk(t,r),Xm=t=>$r(t),fk=(t,r)=>t.length===0?Wt.value(r):Wt.value(ao(r,Xp.apply(void 0,t))),Zi=t=>Wt.error(Bt(t)),lh=(t,r)=>{const a=tf(t);return a.errors.length>0?Zi(a.errors):fk(a.values,r)},Fd=t=>ft(t)?t:Ge,ci=(t,r,a)=>{let l=t.dom;const u=Fd(a);for(;l.parentNode;){l=l.parentNode;const h=Ke.fromDom(l),v=r(h);if(v.isSome())return v;if(u(h))break}return E.none()},ch=(t,r,a)=>{const l=r(t),u=Fd(a);return l.orThunk(()=>u(t)?E.none():ci(t,r,u))},tb=(t,r)=>Vo(t.element,r.event.target),j1={can:Be,abort:Ge,run:J},Fu=t=>{if(!ra(t,"can")&&!ra(t,"abort")&&!ra(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...j1,...t}},vk=(t,r)=>(...a)=>on(t,(l,u)=>l&&r(u).apply(void 0,a),!0),dh=(t,r)=>(...a)=>on(t,(l,u)=>l||r(u).apply(void 0,a),!1),uh=t=>ft(t)?{can:Be,abort:Ge,run:t}:t,Fx=t=>{const r=vk(t,l=>l.can),a=dh(t,l=>l.abort);return{can:r,abort:a,run:(...l)=>{at(t,u=>{u.run.apply(void 0,l)})}}},Or=se,Gc=Or("touchstart"),mh=Or("touchmove"),qm=Or("touchend"),Vx=Or("touchcancel"),Wa=Or("mousedown"),of=Or("mousemove"),G1=Or("mouseout"),ob=Or("mouseup"),$a=Or("mouseover"),as=Or("focusin"),nb=Or("focusout"),Ui=Or("keydown"),bk=Or("keyup"),Ym=Or("input"),Qm=Or("change"),Vu=Or("click"),Zx=Or("transitioncancel"),di=Or("transitionend"),Ux=Or("transitionstart"),Wx=Or("selectstart"),Ln=t=>se("alloy."+t),K1={tap:Ln("tap")},ui=Ln("focus"),Jm=Ln("blur.post"),rb=Ln("paste.post"),Zu=Ln("receive"),ma=Ln("execute"),nf=Ln("focus.item"),rf=K1.tap,yk=Ln("longpress"),sf=Ln("sandbox.close"),eg=Ln("typeahead.cancel"),Hn=Ln("system.init"),Kc=Ln("system.touchmove"),Uu=Ln("system.touchend"),Xc=Ln("system.scroll"),tg=Ln("system.resize"),dc=Ln("system.attached"),qc=Ln("system.detached"),og=Ln("system.dismissRequested"),X1=Ln("system.repositionRequested"),af=Ln("focusmanager.shifted"),gh=Ln("slotcontainer.visibility"),sb=Ln("system.external.element.scroll"),$x=Ln("change.tab"),jx=Ln("dismiss.tab"),ab=Ln("highlight"),hh=Ln("dehighlight"),Eo=(t,r)=>{lf(t,t.element,r,{})},St=(t,r,a)=>{lf(t,t.element,r,a)},Yc=t=>{Eo(t,ma())},ph=(t,r,a)=>{lf(t,r,a,{})},lf=(t,r,a,l)=>{const u={target:r,...l};t.getSystem().triggerEvent(a,r,u)},ng=(t,r,a,l)=>{const u={...l,target:r};t.getSystem().triggerEvent(a,r,u)},q1=(t,r,a,l)=>{t.getSystem().triggerEvent(a,r,l.event)},Jo=t=>Xm(t),cf=(t,r)=>({key:t,value:Fu({abort:r})}),Gx=(t,r)=>({key:t,value:Fu({can:r})}),df=t=>({key:t,value:Fu({run:(r,a)=>{a.event.prevent()}})}),Re=(t,r)=>({key:t,value:Fu({run:r})}),ib=(t,r,a)=>({key:t,value:Fu({run:(l,u)=>{r.apply(void 0,[l,u].concat(a))}})}),Kx=t=>r=>Re(t,r),uf=t=>r=>({key:t,value:Fu({run:(a,l)=>{tb(a,l)&&r(a,l)}})}),xk=(t,r)=>Re(t,(a,l)=>{a.getSystem().getByUid(r).each(u=>{q1(u,u.element,t,l)})}),rg=(t,r,a)=>{const l=r.partUids[a];return xk(t,l)},lb=(t,r)=>Re(t,(a,l)=>{const u=l.event,h=a.getSystem().getByDom(u.target).getOrThunk(()=>ch(u.target,v=>a.getSystem().getByDom(v).toOptional(),Ge).getOr(a));r(a,h,l)}),Wu=t=>Re(t,(r,a)=>{a.cut()}),Xx=t=>Re(t,(r,a)=>{a.stop()}),$u=(t,r)=>uf(t)(r),wn=uf(dc()),mi=uf(qc()),Y1=uf(Hn()),gi=Kx(ma()),Q1=(t,r)=>{const a=(r||document).createElement("div");return a.innerHTML=t,aa(Ke.fromDom(a))},J1=t=>t.dom.innerHTML,fh=(t,r)=>{const a=pr(t).dom,l=Ke.fromDom(a.createDocumentFragment()),u=Q1(r,a);Fm(l,u),Bu(t),_r(t,l)},Ck=t=>{const r=Ke.fromTag("div"),a=Ke.fromDom(t.dom.cloneNode(!0));return _r(r,a),J1(r)},Vd=(t,r)=>Ke.fromDom(t.dom.cloneNode(r)),wk=t=>Vd(t,!1),qx=t=>Vd(t,!0),Yx=t=>{if(Td(t))return"#shadow-root";{const r=wk(t);return Ck(r)}},Qc=t=>Yx(t),mf=(t,r,a)=>Vo(r,t.element)&&!Vo(r,a),Sk=Jo([Gx(ui(),(t,r)=>{const a=r.event,l=a.originator,u=a.target;return mf(t,l,u)?(console.warn(ui()+` did not get interpreted by the desired target. 
Originator: `+Qc(l)+`
Target: `+Qc(u)+`
Check the `+ui()+" event handlers"),!1):!0})]);var Qx=Object.freeze({__proto__:null,events:Sk});let vh=0;const gt=t=>{const r=new Date().getTime(),a=Math.floor(Math.random()*1e9);return vh++,t+"_"+a+vh+String(r)},is=se("alloy-id-"),Jx=se("data-alloy-id"),kk=is(),ju=Jx(),e0=(t,r)=>{const a=gt(kk+t);return cb(r,a),a},cb=(t,r)=>{Object.defineProperty(t.dom,ju,{value:r,writable:!0})},gf=t=>{const r=zn(t)?t.dom[ju]:null;return E.from(r)},bh=t=>gt(t),eC=so,t0=t=>{const r=u=>`The component must be in a context to execute: ${u}`+(t?`
`+Qc(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(r(u))},l=u=>()=>{console.warn(r(u))};return{debugInfo:se("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ge}},yh=t0(),hi=(t,r,a)=>{const l=a.toString(),u=l.indexOf(")")+1,h=l.indexOf("("),v=l.substring(h+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:Wi(v.slice(0,1).concat(v.slice(3)))}),t},Wi=t=>Ie(t,r=>wa(r,"/*")?r.substring(0,r.length-2):r),hf=(t,r)=>{const a=t.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),h=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:Wi(h)}),t},tC=(t,r)=>{const a=r.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),h=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Wi(h.slice(1))}),t},pf=gt("alloy-premade"),db=t=>(Object.defineProperty(t.element.dom,pf,{value:t.uid,writable:!0}),jr(pf,t)),sg=t=>bo(t.dom,pf),Jc=t=>ot(t,pf),ff=t=>tC((r,...a)=>t(r.getApis(),r,...a),t),Ol={init:()=>Da({readState:se("No State required")})},Da=t=>t,_k=(t,r)=>{const a=Ie(r,u=>Oa(u.name(),[xe("config"),ge("state",Ol)])),l=Ae("component.behaviours",it(a),t.behaviours).fold(u=>{throw new Error(ii(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},so);return{list:r,data:Yo(l,u=>{const h=u.map(v=>({config:v.config,state:v.state.init(v.config)}));return se(h)})}},Ek=t=>t.list,Ok=t=>t.data,xh=(t,r)=>{const a={};return Xn(t,(l,u)=>{Xn(l,(h,v)=>{const x=ot(a,v).getOr([]);a[v]=x.concat([r(u,h)])})}),a},$i=t=>({classes:Mn(t.classes)?[]:t.classes,attributes:Mn(t.attributes)?{}:t.attributes,styles:Mn(t.styles)?{}:t.styles}),ub=(t,r)=>({...t,attributes:{...t.attributes,...r.attributes},styles:{...t.styles,...r.styles},classes:t.classes.concat(r.classes)}),o0=(t,r,a,l)=>{const u={...r};at(a,M=>{u[M.name()]=M.exhibit(t,l)});const h=xh(u,(M,A)=>({name:M,modification:A})),v=M=>Bn(M,(A,B)=>({...B.modification,...A}),{}),x=Bn(h.classes,(M,A)=>A.modification.concat(M),[]),C=v(h.attributes),_=v(h.styles);return $i({classes:x,attributes:C,styles:_})},vf=(t,r,a,l)=>{try{const u=xu(a,(h,v)=>{const x=h[r],C=v[r],_=l.indexOf(x),M=l.indexOf(C);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(l,null,2));if(M===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));return _<M?-1:M<_?1:0});return Wt.value(u)}catch(u){return Wt.error([u])}},n0=(t,r)=>({handler:t,purpose:r}),mb=(t,r)=>({cHandler:t,purpose:r}),gb=(t,r)=>mb(io.apply(void 0,[t.handler].concat(r)),t.purpose),Ch=t=>t.cHandler,r0=(t,r)=>({name:t,handler:r}),oC=(t,r)=>{const a={};return at(t,l=>{a[l.name()]=l.handlers(r)}),a},s0=(t,r,a)=>{const l={...a,...oC(r,t)};return xh(l,r0)},hb=(t,r,a,l)=>{const u=s0(t,a,l);return fb(u,r)},Tk=t=>{const r=uh(t);return(a,l,...u)=>{const h=[a,l].concat(u);r.abort.apply(void 0,h)?l.stop():r.can.apply(void 0,h)&&r.run.apply(void 0,h)}},pb=(t,r)=>Wt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ie(r,a=>a.name),null,2)]),wh=(t,r,a)=>{const l=r[a];return l?vf("Event: "+a,"name",t,l).map(u=>{const h=Ie(u,v=>v.handler);return Fx(h)}):pb(a,t)},fb=(t,r)=>{const a=Si(t,(l,u)=>(l.length===1?Wt.value(l[0].handler):wh(l,r,u)).map(h=>{const v=Tk(h),x=l.length>1?qo(r[u],C=>xr(l,_=>_.name===C)).join(" > "):l[0].name;return jr(u,n0(v,x))}));return lh(a,{})},Tl="alloy.base.behaviour",nC=it([Co("dom","dom",Ii(),it([xe("tag"),ge("styles",{}),ge("classes",[]),ge("attributes",{}),_o("value"),_o("innerHtml")])),xe("components"),xe("uid"),ge("events",{}),ge("apis",{}),Co("eventOrder","eventOrder",qp({[ma()]:["disabling",Tl,"toggling","typeaheadevents"],[ui()]:[Tl,"focusing","keying"],[Hn()]:[Tl,"disabling","toggling","representing"],[Ym()]:[Tl,"representing","streaming","invalidating"],[qc()]:[Tl,"representing","item-events","tooltipping"],[Wa()]:["focusing",Tl,"item-type-events"],[Gc()]:["focusing",Tl,"item-type-events"],[$a()]:["item-type-events","tooltipping"],[Zu()]:["receiving","reflecting","tooltipping"]}),ua()),_o("domModification")]),Gu=t=>Ae("custom.definition",nC,t),ag=t=>({...t.dom,uid:t.uid,domChildren:Ie(t.components,r=>r.element)}),bf=t=>t.domModification.fold(()=>$i({}),$i),a0=t=>t.events,vb=(t,r)=>{const a=ut(t,r);return a===void 0||a===""?[]:a.split(" ")},yf=(t,r,a)=>{const l=vb(t,r).concat([a]);return W(t,r,l.join(" ")),!0},rC=(t,r,a)=>{const l=qo(vb(t,r),u=>u!==a);return l.length>0?W(t,r,l.join(" ")):vo(t,r),!1},uc=t=>t.dom.classList!==void 0,i0=t=>vb(t,"class"),bb=(t,r)=>yf(t,"class",r),yb=(t,r)=>rC(t,"class",r),Dk=(t,r)=>zo(i0(t),r)?yb(t,r):bb(t,r),Kt=(t,r)=>{uc(t)?t.dom.classList.add(r):bb(t,r)},sC=t=>{(uc(t)?t.dom.classList:i0(t)).length===0&&vo(t,"class")},Tn=(t,r)=>{uc(t)?t.dom.classList.remove(r):yb(t,r),sC(t)},xb=(t,r)=>{const a=uc(t)?t.dom.classList.toggle(r):Dk(t,r);return sC(t),a},ls=(t,r)=>uc(t)&&t.dom.classList.contains(r),er=(t,r)=>{at(r,a=>{Kt(t,a)})},xs=(t,r)=>{at(r,a=>{Tn(t,a)})},Tr=(t,r)=>{at(r,a=>{xb(t,a)})},Mk=(t,r)=>ei(r,a=>ls(t,a)),Ak=t=>{const r=t.dom.classList,a=new Array(r.length);for(let l=0;l<r.length;l++){const u=r.item(l);u!==null&&(a[l]=u)}return a},ed=t=>uc(t)?Ak(t):i0(t),cs=t=>t.dom.value,Zd=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},Cb=(t,r,a)=>vl(t,r).map(l=>{if(a.exists(u=>!Vo(u,l))){const u=a.map(Bo).getOr("span"),h=Ke.fromTag(u);return Ld(l,h),h}else return l}),Dl=(t,r,a)=>{a.fold(()=>_r(t,r),l=>{Vo(l,r)||(Ld(l,r),xl(l))})},Gs=(t,r,a)=>{const l=Ie(r,a),u=aa(t);return at(u.slice(l.length),xl),l},aC=(t,r,a,l)=>{const u=vl(t,r),h=l(a,u),v=Cb(t,r,u);return Dl(t,h.element,v),h},iC=(t,r,a)=>Gs(t,r,(l,u)=>aC(t,u,l,a)),Ku=(t,r)=>Gs(t,r,(a,l)=>{const u=vl(t,l);return Dl(t,a,u),a}),xf=(t,r)=>{const a=yn(t),l=yn(r),u=Et(l,a),h=ps(t,(v,x)=>!bo(r,x)||v!==r[x]).t;return{toRemove:u,toSet:h}},wb=(t,r)=>{const{class:a,style:l,...u}=zc(r),{toSet:h,toRemove:v}=xf(t.attributes,u),x=()=>{at(v,fe=>vo(r,fe)),ae(r,h)},C=bl(r),{toSet:_,toRemove:M}=xf(t.styles,C),A=()=>{at(M,fe=>xo(r,fe)),Rs(r,_)},B=ed(r),F=Et(B,t.classes),oe=Et(t.classes,B),ce=()=>{er(r,oe),xs(r,F)},De=fe=>{fh(r,fe)},Q=()=>{const fe=t.domChildren;Ku(r,fe)},ee=()=>{const fe=r,Ne=t.value.getOrUndefined();Ne!==cs(fe)&&Zd(fe,Ne??"")};return x(),ce(),A(),t.innerHtml.fold(Q,De),ee(),r},Sh=t=>{const r=Ke.fromTag(t.tag);ae(r,t.attributes),er(r,t.classes),Rs(r,t.styles),t.innerHtml.each(l=>fh(r,l));const a=t.domChildren;return Fm(r,a),t.value.each(l=>{Zd(r,l)}),r},Xu=(t,r)=>{try{const a=wb(t,r);return E.some(a)}catch{return E.none()}},Ud=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Cf=(t,r)=>{const a=u=>Bo(u)===t.tag&&!Ud(t)&&!sg(u),l=r.filter(a).bind(u=>Xu(t,u)).getOrThunk(()=>Sh(t));return cb(l,t.uid),l},kh=t=>{const r=ot(t,"behaviours").getOr({});return me(yn(r),a=>{const l=r[a];return bn(l)?[l.me]:[]})},_h=(t,r)=>_k(t,r),l0=t=>{const r=kh(t);return _h(t,r)},lC=(t,r,a)=>{const l=ag(t),u=bf(t),h={"alloy.base.modification":u},v=r.length>0?o0(a,h,r,l):u;return ub(l,v)},Rk=(t,r,a)=>{const l={"alloy.base.behaviour":a0(t)};return hb(a,t.eventOrder,r,l).getOrDie()},cC=(t,r)=>{const a=()=>fe,l=Dt(yh),u=lc(Gu(t)),h=l0(t),v=Ek(h),x=Ok(h),C=lC(u,v,x),_=Cf(C,r),M=Rk(u,v,x),A=Dt(u.components),B=Ne=>{l.set(Ne)},F=()=>{l.set(t0(a))},oe=()=>{const Ne=aa(_),be=me(Ne,Fe=>l.get().getByDom(Fe).fold(()=>[],En));A.set(be)},ce=Ne=>{const be=x;return(ft(be[Ne.name()])?be[Ne.name()]:()=>{throw new Error("Could not find "+Ne.name()+" in "+JSON.stringify(t,null,2))})()},De=Ne=>ft(x[Ne.name()]),Q=()=>u.apis,ee=Ne=>x[Ne]().map(be=>be.state.readState()).getOr("not enabled"),fe={uid:t.uid,getSystem:l.get,config:ce,hasConfigured:De,spec:t,readState:ee,getApis:Q,connect:B,disconnect:F,element:_,syncComponents:oe,components:A.get,events:M};return fe},Eh=(t,r)=>{const a=ot(t,"components").getOr([]);return r.fold(()=>Ie(a,Cs),l=>Ie(a,(u,h)=>qu(u,vl(l,h))))},dC=(t,r)=>{const{events:a,...l}=eC(t),u=Eh(l,r),h={...l,events:{...Qx,...a},components:u};return Wt.value(cC(h,r))},tr=t=>{const r=Ke.fromText(t);return uC({element:r})},uC=t=>{const r=Ea("external.component",bt([xe("element"),_o("uid")]),t),a=Dt(t0()),l=x=>{a.set(x)},u=()=>{a.set(t0(()=>v))},h=r.uid.getOrThunk(()=>bh("external"));cb(r.element,h);const v={uid:h,getSystem:a.get,config:E.none,hasConfigured:Ge,connect:l,disconnect:u,getApis:()=>({}),element:r.element,spec:t,readState:se("No state"),syncComponents:J,components:se([]),events:{}};return db(v)},mC=bh,gC=t=>bo(t,"uid"),qu=(t,r)=>Jc(t).getOrThunk(()=>{const a=gC(t)?t:{uid:mC(""),...t};return dC(a,r).getOrDie()}),Cs=t=>qu(t,E.none()),ji=db;var c0=(t,r,a,l,u)=>t(a,l)?E.some(a):ft(u)&&u(a)?E.none():r(a,l,u);const Yu=(t,r,a)=>{let l=t.dom;const u=ft(a)?a:Ge;for(;l.parentNode;){l=l.parentNode;const h=Ke.fromDom(l);if(r(h))return E.some(h);if(u(h))break}return E.none()},d0=(t,r,a)=>c0((l,u)=>u(l),Yu,t,r,a),Bk=(t,r)=>{const a=l=>r(Ke.fromDom(l));return It(t.dom.childNodes,a).map(Ke.fromDom)},Nk=(t,r)=>{const a=l=>{for(let u=0;u<l.childNodes.length;u++){const h=Ke.fromDom(l.childNodes[u]);if(r(h))return E.some(h);const v=a(l.childNodes[u]);if(v.isSome())return v}return E.none()};return a(t.dom)},Sb=(t,r,a)=>d0(t,r,a).isSome(),pi=(t,r,a)=>Yu(t,l=>wr(l,r),a),Wd=(t,r)=>Bk(t,a=>wr(a,r)),hn=(t,r)=>Gg(r,t),Ml=(t,r,a)=>c0((l,u)=>wr(l,u),pi,t,r,a),Oh="aria-controls",hC=t=>d0(t,r=>{if(!zn(r))return!1;const a=ut(r,"id");return a!==void 0&&a.indexOf(Oh)>-1}).bind(r=>{const a=ut(r,"id"),l=zr(r);return hn(l,`[${Oh}="${a}"]`)}),Th=()=>{const t=gt(Oh);return{id:t,link:r=>{W(r,Oh,t)},unlink:r=>{vo(r,Oh)}}},Dh=(t,r)=>hC(r).exists(a=>$d(t,a)),$d=(t,r)=>Sb(r,a=>Vo(a,t.element),Ge)||Dh(t,r),kb="unknown";var ig;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ig||(ig={}));const u0=Dt({}),Lk=(t,r)=>{const a=[],l=new Date().getTime();return{logEventCut:(u,h,v)=>{a.push({outcome:"cut",target:h,purpose:v})},logEventStopped:(u,h,v)=>{a.push({outcome:"stopped",target:h,purpose:v})},logNoParent:(u,h,v)=>{a.push({outcome:"no-parent",target:h,purpose:v})},logEventNoHandlers:(u,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(u,h,v)=>{a.push({outcome:"response",purpose:v,target:h})},write:()=>{const u=new Date().getTime();zo(["mousemove","mouseover","mouseout",Hn()],t)||console.log(t,{event:t,time:u-l,target:r.dom,sequence:Ie(a,h=>zo(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+Qc(h.target)+")":h.outcome)})}}},wf=(t,r,a)=>{switch(ot(u0.get(),t).orThunk(()=>{const l=yn(u0.get());return hr(l,u=>t.indexOf(u)>-1?E.some(u0.get()[u]):E.none())}).getOr(ig.NORMAL)){case ig.NORMAL:return a(pC());case ig.LOGGING:{const l=Lk(t,r),u=a(l);return l.write(),u}case ig.STOP:return!0}},fi=["alloy/data/Fields","alloy/debugging/Debugging"],Mh=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return It(r,a=>a.indexOf("alloy")>0&&!xr(fi,l=>a.indexOf(l)>-1)).getOr(kb)}else return kb},Hk={logEventCut:J,logEventStopped:J,logNoParent:J,logEventNoHandlers:J,logEventResponse:J,write:J},m0=(t,r,a)=>wf(t,r,a),pC=se(Hk),fC=se([xe("menu"),xe("selectedMenu")]),g0=se([xe("item"),xe("selectedItem")]);se(it(g0().concat(fC())));const Ik=se(it(g0())),vC=jn("initSize",[xe("numColumns"),xe("numRows")]),Pk=()=>$s("markers",Ik()),Qu=()=>jn("markers",[xe("backgroundMenu")].concat(fC()).concat(g0())),jd=t=>jn("markers",Ie(t,xe)),Gd=(t,r,a)=>(Mh(),Co(r,r,a,_a(l=>Wt.value((...u)=>l.apply(void 0,u))))),mo=t=>Gd("onHandler",t,ac(J)),Ma=t=>Gd("onKeyboardHandler",t,ac(E.none)),td=t=>Gd("onHandler",t,Ii()),od=t=>Gd("onKeyboardHandler",t,Ii()),en=(t,r)=>Ns(t,se(r)),h0=t=>Ns(t,so),Sf=se(vC),ws=(t,r,a,l,u,h,v,x=!1)=>({x:t,y:r,bubble:a,direction:l,placement:u,restriction:h,label:`${v}-${u}`,alwaysFit:x}),Ju=El.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),bC=(t,r,a,l,u,h,v,x,C)=>t.fold(r,a,l,u,h,v,x,C),Kd=(t,r,a,l)=>t.fold(r,r,l,l,r,l,a,a),ds=(t,r,a,l)=>t.fold(r,l,r,l,a,a,r,l),p0=Ju.southeast,Ce=Ju.southwest,Ah=Ju.northeast,_b=Ju.northwest,f0=Ju.south,Rh=Ju.north,Al=Ju.east,Eb=Ju.west,lg=(t,r,a,l)=>{const u=t+r;return u>l?a:u<a?l:u},Aa=(t,r,a)=>Math.min(Math.max(t,r),a),v0=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Dr=(t,r)=>ml(["left","right","top","bottom"],a=>ot(r,a).map(l=>v0(t,l))),yC=(t,r,a)=>{const l=(C,_)=>r[C].map(M=>{const A=C==="top"||C==="bottom",B=A?a.top:a.left,F=(C==="left"||C==="top"?Math.max:Math.min)(M,_)+B;return A?Aa(F,t.y,t.bottom):Aa(F,t.x,t.right)}).getOr(_),u=l("left",t.x),h=l("top",t.y),v=l("right",t.right),x=l("bottom",t.bottom);return Jn(u,h,v-u,x-h)},em="layout",Ks=t=>t.x,kf=(t,r)=>t.x+t.width/2-r.width/2,Ob=(t,r)=>t.x+t.width-r.width,Tb=(t,r)=>t.y-r.height,Db=t=>t.y+t.height,Mb=(t,r)=>t.y+t.height/2-r.height/2,b0=t=>t.x+t.width,zk=(t,r)=>t.x-r.width,us=(t,r,a)=>ws(Ks(t),Db(t),a.southeast(),p0(),"southeast",Dr(t,{left:1,top:3}),em),Ss=(t,r,a)=>ws(Ob(t,r),Db(t),a.southwest(),Ce(),"southwest",Dr(t,{right:0,top:3}),em),ks=(t,r,a)=>ws(Ks(t),Tb(t,r),a.northeast(),Ah(),"northeast",Dr(t,{left:1,bottom:2}),em),ga=(t,r,a)=>ws(Ob(t,r),Tb(t,r),a.northwest(),_b(),"northwest",Dr(t,{right:0,bottom:2}),em),Ls=(t,r,a)=>ws(kf(t,r),Tb(t,r),a.north(),Rh(),"north",Dr(t,{bottom:2}),em),Mr=(t,r,a)=>ws(kf(t,r),Db(t),a.south(),f0(),"south",Dr(t,{top:3}),em),Ab=(t,r,a)=>ws(b0(t),Mb(t,r),a.east(),Al(),"east",Dr(t,{left:0}),em),y0=(t,r,a)=>ws(zk(t,r),Mb(t,r),a.west(),Eb(),"west",Dr(t,{right:1}),em),xC=()=>[us,Ss,ks,ga,Mr,Ls,Ab,y0],CC=()=>[Ss,us,ga,ks,Mr,Ls,Ab,y0],Rb=()=>[ks,ga,us,Ss,Ls,Mr],Bh=()=>[ga,ks,Ss,us,Ls,Mr],Bb=()=>[us,Ss,ks,ga,Mr,Ls],_f=()=>[Ss,us,ga,ks,Mr,Ls],wC=(t,r)=>r.universal?t:qo(t,a=>zo(r.channels,a));var SC=Object.freeze({__proto__:null,events:t=>Jo([Re(Zu(),(r,a)=>{const l=t.channels,u=yn(l),h=a,v=wC(u,h);at(v,x=>{const C=l[x],_=C.schema,M=Ea("channel["+x+`] data
Receiver: `+Qc(r.element),_,h.data);C.onReceive(r,M)})})])}),Ra=[$s("channels",Yv(Wt.value,bt([td("onReceive"),ge("schema",ua())])))];const nd=(t,r,a)=>gi(l=>{a(l,t,r)}),Nb=(t,r,a)=>Y1((l,u)=>{a(l,t,r)}),Lb=(t,r,a,l,u,h)=>{const v=bt(t),x=Oa(r,[zx("config",t)]);return x0(v,x,r,a,l,u,h)},Hb=(t,r,a,l,u,h)=>{const v=t,x=Oa(r,[Vi("config",t)]);return x0(v,x,r,a,l,u,h)},kC=(t,r,a)=>hi((l,...u)=>{const h=[l].concat(u);return l.config({name:se(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},v=>{const x=Array.prototype.slice.call(h,1);return r.apply(void 0,[l,v.config,v.state].concat(x))})},a,r),Ib=t=>({key:t,value:void 0}),x0=(t,r,a,l,u,h,v)=>{const x=M=>ra(M,a)?M[a]():E.none(),C=Yo(u,(M,A)=>kC(a,M,A)),_={...Yo(h,(M,A)=>hf(M,A)),...C,revoke:io(Ib,a),config:M=>{const A=Ea(a+"-config",t,M);return{key:a,value:{config:A,me:_,configAsRaw:No(()=>Ea(a+"-config",t,M)),initialConfig:M,state:v}}},schema:se(r),exhibit:(M,A)=>Pa(x(M),ot(l,"exhibit"),(B,F)=>F(A,B.config,B.state)).getOrThunk(()=>$i({})),name:se(a),handlers:M=>x(M).map(A=>ot(l,"events").getOr(()=>({}))(A.config,A.state)).getOr({})};return _},We=t=>Xm(t),_C=bt([xe("fields"),xe("name"),ge("active",{}),ge("apis",{}),ge("state",Ol),ge("extra",{})]),Gr=t=>{const r=Ea("Creating behaviour: "+t.name,_C,t);return Lb(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Ef=bt([xe("branchKey"),xe("branches"),xe("name"),ge("active",{}),ge("apis",{}),ge("state",Ol),ge("extra",{})]),Of=t=>{const r=Ea("Creating behaviour: "+t.name,Ef,t);return Hb(yr(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},Fk=se(void 0),ja=Gr({fields:Ra,name:"receiving",active:SC});var EC=Object.freeze({__proto__:null,exhibit:(t,r)=>$i({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const tt=(t,r=!1)=>t.dom.focus({preventScroll:r}),Tf=t=>t.dom.blur(),Nh=t=>{const r=zr(t).dom;return t.dom===r.activeElement},rd=(t=Hd())=>E.from(t.dom.activeElement).map(Ke.fromDom),mc=t=>rd(zr(t)).filter(r=>t.dom.contains(r.dom)),Pb=(t,r)=>{const a=zr(r),l=rd(a).bind(h=>{const v=x=>Vo(h,x);return v(r)?E.some(r):Nk(r,v)}),u=t(r);return l.each(h=>{rd(a).filter(v=>Vo(v,h)).fold(()=>{tt(h)},J)}),u},Gi=(t,r,a,l,u)=>{const h=v=>v+"px";return{position:t,left:r.map(h),top:a.map(h),right:l.map(h),bottom:u.map(h)}},Vk=t=>({...t,position:E.some(t.position)}),OC=(t,r)=>{Zs(t,Vk(r))},C0=El.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),TC=(t,r,a,l,u,h)=>{const v=r.rect,x=v.x-a,C=v.y-l,_=v.width,M=v.height,A=u-(x+_),B=h-(C+M),F=E.some(x),oe=E.some(C),ce=E.some(A),De=E.some(B),Q=E.none();return bC(r.direction,()=>Gi(t,F,oe,Q,Q),()=>Gi(t,Q,oe,ce,Q),()=>Gi(t,F,Q,Q,De),()=>Gi(t,Q,Q,ce,De),()=>Gi(t,F,oe,Q,Q),()=>Gi(t,F,Q,Q,De),()=>Gi(t,F,oe,Q,Q),()=>Gi(t,Q,oe,ce,Q))},Hs=(t,r)=>t.fold(()=>{const a=r.rect;return Gi("absolute",E.some(a.x),E.some(a.y),E.none(),E.none())},(a,l,u,h)=>TC("absolute",r,a,l,u,h),(a,l,u,h)=>TC("fixed",r,a,l,u,h)),cg=(t,r)=>{const a=io(Zm,r),l=t.fold(a,a,()=>{const v=ca();return Zm(r).translate(-v.left,-v.top)}),u=si(r),h=ec(r);return Jn(l.left,l.top,u,h)},Zk=(t,r)=>r.fold(()=>t.fold(bs,bs,Jn),a=>t.fold(se(a),se(a),()=>{const l=DC(t,a.x,a.y);return Jn(l.left,l.top,a.width,a.height)})),DC=(t,r,a)=>{const l=gn(r,a),u=()=>{const h=ca();return l.translate(-h.left,-h.top)};return t.fold(se(l),se(l),u)},Uk=(t,r,a,l)=>t.fold(r,a,l);C0.none;const Wk=C0.relative,$k=C0.fixed,MC=(t,r)=>({anchorBox:t,origin:r}),AC=(t,r)=>MC(t,r),w0="data-alloy-placement",zb=(t,r)=>{W(t,w0,r)},tm=t=>Tt(t,w0),jk=t=>vo(t,w0),S0=El.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Gk=(t,r)=>{const{x:a,y:l,right:u,bottom:h}=r,{x:v,y:x,right:C,bottom:_,width:M,height:A}=t,B=v>=a&&v<=u,F=x>=l&&x<=h,oe=B&&F,ce=C<=u&&C>=a,De=_<=h&&_>=l,Q=ce&&De,ee=Math.min(M,v>=a?u-v:C-a),fe=Math.min(A,x>=l?h-x:_-l);return{originInBounds:oe,sizeInBounds:Q,visibleW:ee,visibleH:fe}},Kk=(t,r)=>{const{x:a,y:l,right:u,bottom:h}=r,{x:v,y:x,width:C,height:_}=t,M=Math.max(a,u-C),A=Math.max(l,h-_),B=Aa(v,a,M),F=Aa(x,l,A),oe=Math.min(B+C,u)-B,ce=Math.min(F+_,h)-F;return Jn(B,F,oe,ce)},k0=(t,r,a)=>{const l=se(r.bottom-a.y),u=se(a.bottom-r.y),h=Kd(t,u,u,l),v=se(r.right-a.x),x=se(a.right-r.x);return{maxWidth:ds(t,x,x,v),maxHeight:h}},Ar=(t,r,a,l)=>{const u=t.bubble,h=u.offset,v=yC(l,t.restriction,h),x=t.x+h.left,C=t.y+h.top,_=Jn(x,C,r,a),{originInBounds:M,sizeInBounds:A,visibleW:B,visibleH:F}=Gk(_,v),oe=M&&A,ce=oe?_:Kk(_,v),De=ce.width>0&&ce.height>0,{maxWidth:Q,maxHeight:ee}=k0(t.direction,ce,l),fe={rect:ce,maxHeight:ee,maxWidth:Q,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:C};return oe||t.alwaysFit?S0.fit(fe):S0.nofit(fe,B,F,De)},RC=(t,r,a,l,u,h)=>{const v=l.width,x=l.height,C=(_,M,A,B,F)=>{const oe=_(a,l,u,t,h),ce=Ar(oe,v,x,h);return ce.fold(se(ce),(De,Q,ee,fe)=>(F===fe?ee>B||Q>A:!F&&fe)?ce:S0.nofit(M,A,B,F))};return on(r,(_,M)=>{const A=io(C,M);return _.fold(se(_),A)},S0.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:p0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(so,so)},_0=t=>{const r=Dt(E.none()),a=()=>r.get().each(t);return{clear:()=>{a(),r.set(E.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{a(),r.set(E.some(l))}}},BC=()=>_0(t=>t.destroy()),dg=()=>_0(t=>t.unbind()),un=()=>{const t=_0(J);return{...t,on:r=>t.get().each(r)}},NC=Be,Xs=(t,r,a)=>Bd(t,r,NC,a),Fb=(t,r,a)=>Wc(t,r,NC,a),LC=vs,ug=["top","bottom","right","left"],Df="data-alloy-transition-timer",mg=(t,r)=>Mk(t,r.classes),HC=(t,r,a)=>a.exists(l=>{const u=t.mode;return u==="all"?!0:l[u]!==r[u]}),Xk=(t,r)=>{const a=l=>parseFloat(l).toFixed(3);return Cr(r,(l,u)=>{const h=t[u].map(a),v=l.map(a);return!ki(h,v)}).isSome()},Lh=t=>{const r=h=>{const v=Sr(t,h).split(/\s*,\s*/);return qo(v,za)},a=h=>{if(Pt(h)&&/^[\d.]+/.test(h)){const v=parseFloat(h);return wa(h,"ms")?v:v*1e3}else return 0},l=r("transition-delay"),u=r("transition-duration");return on(u,(h,v,x)=>{const C=a(l[x])+a(v);return Math.max(h,C)},0)},qk=(t,r)=>{const a=dg(),l=dg();let u;const h=_=>{var M;const A=(M=_.raw.pseudoElement)!==null&&M!==void 0?M:"";return Vo(_.target,t)&&sa(A)&&zo(ug,_.raw.propertyName)},v=_=>{if(An(_)||h(_)){a.clear(),l.clear();const M=_==null?void 0:_.raw.type;(An(M)||M===di())&&(clearTimeout(u),vo(t,Df),xs(t,r.classes))}},x=Xs(t,Ux(),_=>{h(_)&&(x.unbind(),a.set(Xs(t,di(),v)),l.set(Xs(t,Zx(),v)))}),C=Lh(t);requestAnimationFrame(()=>{u=setTimeout(v,C+17),W(t,Df,u)})},E0=(t,r)=>{er(t,r.classes),Tt(t,Df).each(a=>{clearTimeout(parseInt(a,10)),vo(t,Df)}),qk(t,r)},Vb=(t,r,a,l,u,h)=>{const v=HC(l,u,h);if(v||mg(t,l)){ve(t,"position",a.position);const x=cg(r,t),C=Hs(r,{...u,rect:x}),_=ml(ug,M=>C[M]);Xk(a,_)&&(Zs(t,_),v&&E0(t,l),Va(t))}else xs(t,l.classes)},Mf=t=>({width:si(t),height:ec(t)}),Yk=(t,r,a,l)=>{xo(r,"max-height"),xo(r,"max-width");const u=Mf(r);return RC(r,l.preference,t,u,a,l.bounds)},Qk=(t,r)=>{const a=r.classes;xs(t,a.off),er(t,a.on)},Jk=(t,r,a)=>{const l=a.maxHeightFunction;l(t,r.maxHeight)},e3=(t,r,a)=>{const l=a.maxWidthFunction;l(t,r.maxWidth)},t3=(t,r,a)=>{const l=Hs(a.origin,r);a.transition.each(u=>{Vb(t,a.origin,l,u,r,a.lastPlacement)}),OC(t,l)},Zb=(t,r)=>{zb(t,r.placement)},Ub=(t,r)=>{jv(t,Math.floor(r))},Wb=se((t,r)=>{Ub(t,r),Rs(t,{"overflow-x":"hidden","overflow-y":"auto"})}),gg=se((t,r)=>{Ub(t,r)}),$b=(t,r,a)=>t[r]===void 0?a:t[r],IC=(t,r,a,l,u,h,v,x)=>{const C=$b(v,"maxHeightFunction",Wb()),_=$b(v,"maxWidthFunction",J),M=t.anchorBox,A=t.origin,B={bounds:Zk(A,h),origin:A,preference:l,maxHeightFunction:C,maxWidthFunction:_,lastPlacement:u,transition:x};return O0(M,r,a,B)},O0=(t,r,a,l)=>{const u=Yk(t,r,a,l);return t3(r,u,l),Zb(r,u),Qk(r,u),Jk(r,u,l),e3(r,u,l),{layout:u.layout,placement:u.placement}},Hh=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],gc=(t,r,a,l=1)=>{const u=t*l,h=r*l,v=C=>ot(a,C).getOr([]),x=(C,_,M)=>{const A=Et(Hh,M);return{offset:gn(C,_),classesOn:me(M,v),classesOff:me(A,v)}};return{southeast:()=>x(-t,r,["top","alignLeft"]),southwest:()=>x(t,r,["top","alignRight"]),south:()=>x(-t/2,r,["top","alignCentre"]),northeast:()=>x(-t,-r,["bottom","alignLeft"]),northwest:()=>x(t,-r,["bottom","alignRight"]),north:()=>x(-t/2,-r,["bottom","alignCentre"]),east:()=>x(t,-r/2,["valignCentre","left"]),west:()=>x(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>x(u,h,["top","alignLeft","inset"]),insetNorthwest:()=>x(-u,h,["top","alignRight","inset"]),insetNorth:()=>x(-u/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>x(u,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>x(-u,-h,["bottom","alignRight","inset"]),insetSouth:()=>x(-u/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>x(-u,-h/2,["valignCentre","right","inset"]),insetWest:()=>x(u,-h/2,["valignCentre","left","inset"])}},Ih=()=>gc(0,0,{}),hg=so,jb=(t,r)=>a=>o3(a)==="rtl"?r:t,o3=t=>Sr(t,"direction")==="rtl"?"rtl":"ltr";var Xd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Xd||(Xd={}));const Gb="data-alloy-vertical-dir",PC=t=>Sb(t,r=>zn(r)&&ut(r,"data-alloy-vertical-dir")===Xd.BottomToTop),qd=()=>Oa("layouts",[xe("onLtr"),xe("onRtl"),_o("onBottomLtr"),_o("onBottomRtl")]),T0=(t,r,a,l,u,h,v)=>{const x=v.map(PC).getOr(!1),C=r.layouts.map(B=>B.onLtr(t)),_=r.layouts.map(B=>B.onRtl(t)),M=x?r.layouts.bind(B=>B.onBottomLtr.map(F=>F(t))).or(C).getOr(u):C.getOr(a),A=x?r.layouts.bind(B=>B.onBottomRtl.map(F=>F(t))).or(_).getOr(h):_.getOr(l);return jb(M,A)(t)},n3=(t,r,a)=>{const l=r.hotspot,u=cg(a,l.element),h=T0(t.element,r,Bb(),_f(),Rb(),Bh(),E.some(r.hotspot.element));return E.some(hg({anchorBox:u,bubble:r.bubble.getOr(Ih()),overrides:r.overrides,layouts:h}))};var r3=[xe("hotspot"),_o("bubble"),ge("overrides",{}),qd(),en("placement",n3)];const s3=(t,r,a)=>{const l=DC(a,r.x,r.y),u=Jn(l.left,l.top,r.width,r.height),h=T0(t.element,r,xC(),CC(),xC(),CC(),E.none());return E.some(hg({anchorBox:u,bubble:r.bubble,overrides:r.overrides,layouts:h}))};var a3=[xe("x"),xe("y"),ge("height",0),ge("width",0),ge("bubble",Ih()),ge("overrides",{}),qd(),en("placement",s3)];const zC=El.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),i3=t=>t.fold(so,(r,a,l)=>r.translate(-a,-l)),D0=t=>t.fold(so,so),FC=t=>on(t,(r,a)=>r.translate(a.left,a.top),gn(0,0)),M0=t=>{const r=Ie(t,i3);return FC(r)},Kb=t=>{const r=Ie(t,D0);return FC(r)},Xb=zC.screen,qb=zC.absolute,VC=(t,r,a)=>{const l=Pc(a.root).dom,u=h=>{const v=pr(h),x=pr(t.element);return Vo(v,x)};return E.from(l.frameElement).map(Ke.fromDom).filter(u).map(Fr)},A0=(t,r,a)=>{const l=pr(t.element),u=ca(l),h=VC(t,r,a).getOr(u);return qb(h,u.left,u.top)},R0=(t,r,a,l)=>{const u=Xb(gn(t,r));return E.some(Kv(u,a,l))},Yb=(t,r,a,l,u)=>t.map(h=>{const v=[r,h.point],x=Uk(l,()=>Kb(v),()=>Kb(v),()=>M0(v)),C=rc(x.left,x.top,h.width,h.height),_=a.showAbove?Rb():Bb(),M=a.showAbove?Bh():_f(),A=T0(u,a,_,M,_,M,E.none());return hg({anchorBox:C,bubble:a.bubble.getOr(Ih()),overrides:a.overrides,layouts:A})}),ZC=(t,r,a)=>{const l=A0(t,a,r);return r.node.filter(fs).bind(u=>{const h=u.dom.getBoundingClientRect(),v=R0(h.left,h.top,h.width,h.height),x=r.node.getOr(t.element);return Yb(v,l,r,a,x)})};var l3=[xe("node"),xe("root"),_o("bubble"),qd(),ge("overrides",{}),ge("showAbove",!1),en("placement",ZC)];const UC="\uFEFF",Qb=" ",Jb={create:(t,r,a,l)=>({start:t,soffset:r,finish:a,foffset:l})},Af=El.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),c3=(t,r,a,l)=>t.fold(r,a,l),d3=t=>t.fold(so,so,so),ey=Af.before,ty=Af.on,u3=Af.after,m3={before:ey,on:ty,after:u3,cata:c3,getStart:d3},B0=El.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),g3=t=>B0.exact(t.start,t.soffset,t.finish,t.foffset),WC=t=>t.match({domRange:r=>Ke.fromDom(r.startContainer),relative:(r,a)=>m3.getStart(r),exact:(r,a,l,u)=>r}),ha=B0.domRange,Ph=B0.relative,h3=B0.exact,p3=t=>{const r=WC(t);return Pc(r)},oy=Jb.create,Rf={domRange:ha,relative:Ph,exact:h3,exactFromRange:g3,getWin:p3,range:oy},$C=(t,r)=>{r.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},ny=(t,r)=>{r.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Bf=(t,r,a)=>{const l=t.document.createRange();return $C(l,r),ny(l,a),l},ry=(t,r,a,l,u)=>{const h=t.document.createRange();return h.setStart(r.dom,a),h.setEnd(l.dom,u),h},sy=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Nf=t=>{const r=t.getClientRects(),a=r.length>0?r[0]:t.getBoundingClientRect();return a.width>0||a.height>0?E.some(a).map(sy):E.none()},jC=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?E.some(r).map(sy):E.none()},Lf=El.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),GC=(t,r,a)=>r(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset),KC=(t,r)=>r.match({domRange:a=>({ltr:se(a),rtl:E.none}),relative:(a,l)=>({ltr:No(()=>Bf(t,a,l)),rtl:No(()=>E.some(Bf(t,l,a)))}),exact:(a,l,u,h)=>({ltr:No(()=>ry(t,a,l,u,h)),rtl:No(()=>E.some(ry(t,u,h,a,l)))})}),Yd=(t,r)=>{const a=r.ltr();return a.collapsed?r.rtl().filter(l=>l.collapsed===!1).map(l=>Lf.rtl(Ke.fromDom(l.endContainer),l.endOffset,Ke.fromDom(l.startContainer),l.startOffset)).getOrThunk(()=>GC(t,Lf.ltr,a)):GC(t,Lf.ltr,a)},Hf=(t,r)=>{const a=KC(t,r);return Yd(t,a)},ay=(t,r)=>Hf(t,r).match({ltr:(a,l,u,h)=>{const v=t.document.createRange();return v.setStart(a.dom,l),v.setEnd(u.dom,h),v},rtl:(a,l,u,h)=>{const v=t.document.createRange();return v.setStart(u.dom,h),v.setEnd(a.dom,l),v}});Lf.ltr,Lf.rtl;const iy=(t,r,a)=>qo(km(t,a),r),_s=(t,r)=>uo(r,t),XC=(t,r,a,l)=>{const u=pr(t).dom.createRange();return u.setStart(t.dom,r),u.setEnd(a.dom,l),u},qC=(t,r,a,l)=>{const u=XC(t,r,a,l),h=Vo(t,a)&&r===l;return u.collapsed&&!h},f3=t=>E.from(t.getSelection()),If=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return E.some(Jb.create(Ke.fromDom(r.startContainer),r.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}else return E.none()},zh=t=>{if(t.anchorNode===null||t.focusNode===null)return If(t);{const r=Ke.fromDom(t.anchorNode),a=Ke.fromDom(t.focusNode);return qC(r,t.anchorOffset,a,t.focusOffset)?E.some(Jb.create(r,t.anchorOffset,a,t.focusOffset)):If(t)}},sd=t=>f3(t).filter(r=>r.rangeCount>0).bind(zh),Fh=(t,r)=>{const a=ay(t,r);return Nf(a)},ly=(t,r)=>{const a=ay(t,r);return jC(a)},YC=((t,r)=>{const a=u=>{if(!t(u))throw new Error("Can only get "+r+" value of a "+r+" node");return l(u).getOr("")},l=u=>t(u)?E.from(u.dom.nodeValue):E.none();return{get:a,getOption:l,set:(u,h)=>{if(!t(u))throw new Error("Can only set raw "+r+" value of a "+r+" node");u.dom.nodeValue=h}}})(rr,"text"),cy=t=>YC.get(t),pg=(t,r)=>({element:t,offset:r}),QC=(t,r)=>{const a=aa(t);if(a.length===0)return pg(t,r);if(r<a.length)return pg(a[r],0);{const l=a[a.length-1],u=rr(l)?cy(l).length:aa(l).length;return pg(l,u)}},JC=(t,r)=>rr(t)?pg(t,r):QC(t,r),N0=t=>t.foffset!==void 0,ew=(t,r)=>r.getSelection.getOrThunk(()=>()=>sd(t))().map(a=>{if(N0(a)){const l=JC(a.start,a.soffset),u=JC(a.finish,a.foffset);return Rf.range(l.element,l.offset,u.element,u.offset)}else return a}),Vh=(t,r,a)=>{const l=Pc(r.root).dom,u=A0(t,a,r),h=ew(l,r).bind(x=>{if(N0(x))return ly(l,Rf.exactFromRange(x)).orThunk(()=>{const C=Ke.fromText(UC);Ld(x.start,C);const _=Fh(l,Rf.exact(C,0,C,1));return xl(C),_}).bind(C=>R0(C.left,C.top,C.width,C.height));{const C=Yo(x,M=>M.dom.getBoundingClientRect()),_={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return R0(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),v=ew(l,r).bind(x=>N0(x)?zn(x.start)?E.some(x.start):Fs(x.start):E.some(x.firstCell)).getOr(t.element);return Yb(h,u,r,a,v)};var om=[_o("getSelection"),xe("root"),_o("bubble"),qd(),ge("overrides",{}),ge("showAbove",!1),en("placement",Vh)];const nm="link-layout",Qd=t=>t.x+t.width,dy=(t,r)=>t.x-r.width,ad=(t,r)=>t.y-r.height+t.height,hc=t=>t.y,L0=(t,r,a)=>ws(Qd(t),hc(t),a.southeast(),p0(),"southeast",Dr(t,{left:0,top:2}),nm),uy=(t,r,a)=>ws(dy(t,r),hc(t),a.southwest(),Ce(),"southwest",Dr(t,{right:1,top:2}),nm),Pf=(t,r,a)=>ws(Qd(t),ad(t,r),a.northeast(),Ah(),"northeast",Dr(t,{left:0,bottom:3}),nm),my=(t,r,a)=>ws(dy(t,r),ad(t,r),a.northwest(),_b(),"northwest",Dr(t,{right:1,bottom:3}),nm),Zh=()=>[L0,uy,Pf,my],pc=()=>[uy,L0,my,Pf],gy=(t,r,a)=>{const l=cg(a,r.item.element),u=T0(t.element,r,Zh(),pc(),Zh(),pc(),E.none());return E.some(hg({anchorBox:l,bubble:Ih(),overrides:r.overrides,layouts:u}))};var tw=[xe("item"),qd(),ge("overrides",{}),en("placement",gy)],zf=yr("type",{selection:om,node:l3,hotspot:r3,submenu:tw,makeshift:a3});const Uh=[li("classes",ss),_l("mode","all",["all","layout","placement"])],hy=[ge("useFixed",Ge),_o("getBounds")],py=[$s("anchor",zf),Oa("transition",Uh)],H0=()=>{const t=document.documentElement;return $k(0,0,t.clientWidth,t.clientHeight)},ms=t=>{const r=Fr(t.element),a=t.element.dom.getBoundingClientRect();return Wk(r.left,r.top,a.width,a.height)},v3=(t,r,a,l,u,h)=>{const v=AC(r.anchorBox,t);return IC(v,l.element,r.bubble,r.layouts,u,a,r.overrides,h)},id=(t,r,a,l,u)=>{const h=E.none();Wh(t,r,a,l,u,h)},Wh=(t,r,a,l,u,h)=>{const v=Ea("placement.info",it(py),u),x=v.anchor,C=l.element,_=a.get(l.uid);Pb(()=>{ve(C,"position","fixed");const M=Wo(C,"visibility");ve(C,"visibility","hidden");const A=r.useFixed()?H0():ms(t);x.placement(t,x,A).each(B=>{const F=h.orThunk(()=>r.getBounds.map(nr)),oe=v3(A,B,F,l,_,v.transition);a.set(l.uid,oe)}),M.fold(()=>{xo(C,"visibility")},B=>{ve(C,"visibility",B)}),Wo(C,"left").isNone()&&Wo(C,"top").isNone()&&Wo(C,"right").isNone()&&Wo(C,"bottom").isNone()&&Ms(Wo(C,"position"),"fixed")&&xo(C,"position")},C)};var $h=Object.freeze({__proto__:null,position:id,positionWithinBounds:Wh,getMode:(t,r,a)=>r.useFixed()?"fixed":"absolute",reset:(t,r,a,l)=>{const u=l.element;at(["position","left","right","top","bottom"],h=>xo(u,h)),jk(u),a.clear(l.uid)}}),fg=Object.freeze({__proto__:null,init:()=>{let t={};return Da({readState:()=>t,clear:r=>{bn(r)?delete t[r]:t={}},set:(r,a)=>{t[r]=a},get:r=>ot(t,r)})}});const Is=Gr({fields:hy,name:"positioning",active:EC,apis:$h,state:fg}),jh=t=>t.getSystem().isConnected(),Ff=t=>{Eo(t,qc());const r=t.components();at(r,Ff)},Jd=t=>{const r=t.components();at(r,Jd),Eo(t,dc())},I0=(t,r)=>{t.getSystem().addToWorld(r),fs(t.element)&&Jd(r)},P0=t=>{Ff(t),t.getSystem().removeFromWorld(t)},Vf=(t,r)=>{_r(t.element,r.element)},Ba=t=>{at(t.components(),r=>xl(r.element)),Bu(t.element),t.syncComponents()},b3=(t,r,a)=>{const l=t.components();Ba(t);const u=a(r),h=Et(l,u);at(h,v=>{Ff(v),t.getSystem().removeFromWorld(v)}),at(u,v=>{jh(v)?Vf(t,v):(t.getSystem().addToWorld(v),Vf(t,v),fs(t.element)&&Jd(v))}),t.syncComponents()},rm=(t,r,a)=>{const l=t.components(),u=me(r,x=>Jc(x).toArray());at(l,x=>{zo(u,x)||P0(x)});const h=a(r),v=Et(l,h);at(v,x=>{jh(x)&&P0(x)}),at(h,x=>{jh(x)||I0(t,x)}),t.syncComponents()},sm=(t,r)=>{z0(t,r,_r)},z0=(t,r,a)=>{t.getSystem().addToWorld(r),a(t.element,r.element),fs(t.element)&&Jd(r),t.syncComponents()},fy=t=>{Ff(t),xl(t.element),t.getSystem().removeFromWorld(t)},eu=t=>{const r=ns(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());fy(t),r.each(a=>{a.syncComponents()})},ow=t=>{const r=t.components();at(r,fy),Bu(t.element),t.syncComponents()},Ga=(t,r)=>{Zf(t,r,_r)},tu=(t,r)=>{Zf(t,r,$c)},Zf=(t,r,a)=>{a(t,r.element);const l=aa(r.element);at(l,u=>{r.getByDom(u).each(Jd)})},Gh=t=>{const r=aa(t.element);at(r,a=>{t.getByDom(a).each(Ff)}),xl(t.element)},qs=(t,r,a,l)=>{a.get().each(v=>{ow(t)});const u=r.getAttachPoint(t);sm(u,t);const h=t.getSystem().build(l);return sm(t,h),a.set(h),h},Ys=(t,r,a,l)=>{const u=qs(t,r,a,l);return r.onOpen(t,u),u},Qs=(t,r,a,l)=>a.get().map(()=>qs(t,r,a,l)),Rl=(t,r,a,l,u)=>{F0(t,r),Ys(t,r,a,l),u(),Uf(t,r)},Kh=(t,r,a)=>{a.get().each(l=>{ow(t),eu(t),r.onClose(t,l),a.clear()})},Ka=(t,r,a)=>a.isOpen(),am=(t,r,a,l)=>Ka(t,r,a)&&a.get().exists(u=>r.isPartOf(t,u,l)),y3=(t,r,a)=>a.get(),x3=(t,r,a,l)=>{Wo(t.element,r).fold(()=>{vo(t.element,a)},u=>{W(t.element,a,u)}),ve(t.element,r,l)},C3=(t,r,a)=>{Tt(t.element,a).fold(()=>xo(t.element,r),l=>ve(t.element,r,l))},F0=(t,r,a)=>{const l=r.getAttachPoint(t);ve(t.element,"position",Is.getMode(l)),x3(t,"visibility",r.cloakVisibilityAttr,"hidden")},vy=t=>xr(["top","left","right","bottom"],r=>Wo(t,r).isSome()),Uf=(t,r,a)=>{vy(t.element)||xo(t.element,"position"),C3(t,"visibility",r.cloakVisibilityAttr)};var nw=Object.freeze({__proto__:null,cloak:F0,decloak:Uf,open:Ys,openWhileCloaked:Rl,close:Kh,isOpen:Ka,isPartOf:am,getState:y3,setContent:Qs}),rw=Object.freeze({__proto__:null,events:(t,r)=>Jo([Re(sf(),(a,l)=>{Kh(a,t,r)})])}),by=[mo("onOpen"),mo("onClose"),xe("isPartOf"),xe("getAttachPoint"),ge("cloakVisibilityAttr","data-precloak-visibility")],w3=Object.freeze({__proto__:null,init:()=>{const t=un(),r=se("not-implemented");return Da({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const lo=Gr({fields:by,name:"sandboxing",active:rw,apis:nw,state:w3}),ld=se("dismiss.popups"),vg=se("reposition.popups"),Wf=se("mouse.released"),yy=bt([ge("isExtraPart",Ge),Oa("fireEventInstead",[ge("event",og())])]),V0=t=>{const r=Ea("Dismissal",yy,t);return{[ld()]:{schema:bt([xe("target")]),onReceive:(a,l)=>{lo.isOpen(a)&&(lo.isPartOf(a,l.target)||r.isExtraPart(a,l.target)||r.fireEventInstead.fold(()=>lo.close(a),u=>Eo(a,u.event)))}}}},Xh=bt([Oa("fireEventInstead",[ge("event",X1())]),kl("doReposition")]),$f=t=>{const r=Ea("Reposition",Xh,t);return{[vg()]:{onReceive:a=>{lo.isOpen(a)&&r.fireEventInstead.fold(()=>r.doReposition(a),l=>Eo(a,l.event))}}}},qh=(t,r,a)=>{r.store.manager.onLoad(t,r,a)},bg=(t,r,a)=>{r.store.manager.onUnload(t,r,a)};var S3=Object.freeze({__proto__:null,onLoad:qh,onUnload:bg,setValue:(t,r,a,l)=>{r.store.manager.setValue(t,r,a,l)},getValue:(t,r,a)=>r.store.manager.getValue(t,r,a),getState:(t,r,a)=>a}),Ki=Object.freeze({__proto__:null,events:(t,r)=>{const a=t.resetOnDom?[wn((l,u)=>{qh(l,t,r)}),mi((l,u)=>{bg(l,t,r)})]:[Nb(t,r,qh)];return Jo(a)}});const jf=()=>{const t=Dt(null),r=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return Da({set:t.set,get:t.get,isNotSet:a,clear:l,readState:r})},Yh=()=>Da({readState:J}),yg=()=>{const t=Dt({}),r=Dt({});return Da({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:a=>ot(t.get(),a).orThunk(()=>ot(r.get(),a)),update:a=>{const l=t.get(),u=r.get(),h={},v={};at(a,x=>{h[x.value]=x,ot(x,"meta").each(C=>{ot(C,"text").each(_=>{v[_]=x})})}),t.set({...l,...h}),r.set({...u,...v})},clear:()=>{t.set({}),r.set({})}})};var xy=Object.freeze({__proto__:null,memory:jf,dataset:yg,manual:Yh,init:t=>t.store.manager.state(t)});const sw=(t,r,a,l)=>{const u=r.store;a.update([l]),u.setValue(t,l),r.onSetValue(t,l)},k3=(t,r,a)=>{const l=r.store,u=l.getDataKey(t);return a.lookup(u).getOrThunk(()=>l.getFallbackEntry(u))},_3=(t,r,a)=>{r.store.initialValue.each(l=>{sw(t,r,a,l)})},E3=(t,r,a)=>{a.clear()};var aw=[_o("initialValue"),xe("getFallbackEntry"),xe("getDataKey"),xe("setValue"),en("manager",{setValue:sw,getValue:k3,onLoad:_3,onUnload:E3,state:yg})];const Qh=(t,r,a)=>r.store.getValue(t),cd=(t,r,a,l)=>{r.store.setValue(t,l),r.onSetValue(t,l)},O3=(t,r,a)=>{r.store.initialValue.each(l=>{r.store.setValue(t,l)})};var T3=[xe("getValue"),ge("setValue",J),_o("initialValue"),en("manager",{setValue:cd,getValue:Qh,onLoad:O3,onUnload:J,state:Ol.init})];const iw=(t,r,a,l)=>{a.set(l),r.onSetValue(t,l)},Cy=(t,r,a)=>a.get(),Jh=(t,r,a)=>{r.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},wy=(t,r,a)=>{a.clear()};var Z0=[_o("initialValue"),en("manager",{setValue:iw,getValue:Cy,onLoad:Jh,onUnload:wy,state:jf})],Sy=[js("store",{mode:"memory"},yr("mode",{memory:Z0,manual:T3,dataset:aw})),mo("onSetValue"),ge("resetOnDom",!1)];const nt=Gr({fields:Sy,name:"representing",active:Ki,apis:S3,extra:{setValueFrom:(t,r)=>{const a=nt.getValue(r);nt.setValue(t,a)}},state:xy}),In=(t,r)=>ah(t,{},Ie(r,a=>ef(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ns("dump",so)])),xg=t=>t.dump,Rr=(t,r)=>({...We(r),...t.dump}),Xi={field:In,augment:Rr,get:xg},ky="placeholder",ep=El.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),tp=t=>bo(t,"uiType"),Cg=(t,r,a,l)=>t.exists(u=>u!==a.owner)?ep.single(!0,se(a)):ot(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+yn(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),_y=(t,r,a,l)=>tp(a)&&a.uiType===ky?Cg(t,r,a,l):ep.single(!1,se(a)),Ey=(t,r,a,l)=>_y(t,r,a,l).fold((u,h)=>{const v=tp(a)?h(r,a.config,a.validated):h(r),x=ot(v,"components").getOr([]),C=me(x,_=>Ey(t,r,_,l));return[{...v,components:C}]},(u,h)=>{if(tp(a)){const v=h(r,a.config,a.validated);return a.validated.preprocess.getOr(so)(v)}else return h(r)}),D3=(t,r,a,l)=>me(a,u=>Ey(t,r,u,l)),Oy=(t,r)=>{let a=!1;const l=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,r},h=()=>r.fold((v,x)=>v,(v,x)=>v);return{name:se(t),required:h,used:l,replace:u}},im=(t,r,a,l)=>{const u=Yo(l,(v,x)=>Oy(x,v)),h=D3(t,r,a,u);return Xn(u,v=>{if(v.used()===!1&&v.required())throw new Error("Placeholder: "+v.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),h},U0=ep.single,Ty=ep.multiple,wg=se(ky),dd=El.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Sg=ge("factory",{sketch:so}),op=ge("schema",[]),np=xe("name"),Dy=Co("pname","pname",Pi(t=>"<alloy."+gt(t.name)+">"),ua()),ud=Ns("schema",()=>[_o("preprocess")]),rp=ge("defaults",se({})),W0=ge("overrides",se({})),qi=it([Sg,op,np,Dy,rp,W0]),dr=it([Sg,op,np,rp,W0]),M3=it([Sg,op,np,Dy,rp,W0]),My=it([Sg,ud,np,xe("unit"),Dy,rp,W0]),lw=t=>t.fold(E.some,E.none,E.some,E.some),fc=t=>{const r=a=>a.name;return t.fold(r,r,r,r)},Ay=t=>t.fold(so,so,so,so),ou=(t,r)=>a=>{const l=Ea("Converting part type",r,a);return t(l)},Kr=ou(dd.required,qi),Yi=ou(dd.external,dr),Qi=ou(dd.optional,M3),$0=ou(dd.group,My),j0=se("entirety");var cw=Object.freeze({__proto__:null,required:Kr,external:Yi,optional:Qi,group:$0,asNamedPart:lw,name:fc,asCommon:Ay,original:j0});const Ry=(t,r,a,l)=>ao(r.defaults(t,a,l),a,{uid:t.partUids[r.name]},r.overrides(t,a,l)),A3=(t,r,a)=>{const l={},u={};return at(a,h=>{h.fold(v=>{l[v.pname]=U0(!0,(x,C,_)=>v.factory.sketch(Ry(x,v,C,_)))},v=>{const x=r.parts[v.name];u[v.name]=se(v.factory.sketch(Ry(r,v,x[j0()]),x))},v=>{l[v.pname]=U0(!1,(x,C,_)=>v.factory.sketch(Ry(x,v,C,_)))},v=>{l[v.pname]=Ty(!0,(x,C,_)=>{const M=x[v.name];return Ie(M,A=>v.factory.sketch(ao(v.defaults(x,A,_),A,v.overrides(x,A))))})})}),{internals:se(l),externals:se(u)}},G0=(t,r)=>{const a={};return at(r,l=>{lw(l).each(u=>{const h=dw(t,u.pname);a[u.name]=v=>{const x=Ea("Part: "+u.name+" in "+t,it(u.schema),v);return{...h,config:v,validated:x}}})}),a},dw=(t,r)=>({uiType:wg(),owner:t,name:r}),K0=(t,r,a)=>({uiType:wg(),owner:t,name:r,config:a,validated:{}}),By=t=>me(t,r=>r.fold(E.none,E.some,E.none,E.none).map(a=>jn(a.name,a.schema.concat([h0(j0())]))).toArray()),Gf=t=>Ie(t,fc),X0=(t,r,a)=>A3(t,r,a),md=(t,r,a)=>im(E.some(t),r,r.components,a),Lo=(t,r,a)=>{const l=r.partUids[a];return t.getSystem().getByUid(l).toOptional()},lm=(t,r,a)=>Lo(t,r,a).getOrDie("Could not find part: "+a),uw=(t,r,a)=>{const l={},u=r.partUids,h=t.getSystem();return at(a,v=>{l[v]=se(h.getByUid(u[v]))}),l},mw=(t,r)=>{const a=t.getSystem();return Yo(r.partUids,(l,u)=>se(a.getByUid(l)))},gw=t=>yn(t.partUids),nu=(t,r,a)=>{const l={},u=r.partUids,h=t.getSystem();return at(a,v=>{l[v]=se(h.getByUid(u[v]).getOrDie())}),l},sp=(t,r)=>{const a=Gf(r);return Xm(Ie(a,l=>({key:l,value:t+"-"+l})))},ap=t=>Co("partUids","partUids",qt(r=>sp(r.uid,t)),ua());var R3=Object.freeze({__proto__:null,generate:G0,generateOne:K0,schemas:By,names:Gf,substitutes:X0,components:md,defaultUids:sp,defaultUidsSchema:ap,getAllParts:mw,getAllPartNames:gw,getPart:Lo,getPartOrDie:lm,getParts:uw,getPartsOrDie:nu});const Bl=(t,r)=>(t.length>0?[jn("parts",t)]:[]).concat([xe("uid"),ge("dom",{}),ge("components",[]),h0("originalSpec"),ge("debug.sketcher",{})]).concat(r),ru=(t,r,a,l,u)=>{const h=Bl(l,u);return Ea(t+" [SpecSchema]",bt(h.concat(r)),a)},Kf=(t,r,a,l)=>{const u=hw(l),h=ru(t,r,u,[],[]);return a(h,u)},cm=(t,r,a,l,u)=>{const h=hw(u),v=By(a),x=ap(a),C=ru(t,r,h,v,[x]),_=X0(t,C,a),M=md(t,C,_.internals());return l(C,M,h,_.externals())},B3=t=>bo(t,"uid"),hw=t=>B3(t)?t:{...t,uid:bh("uid")},N3=t=>t.uid!==void 0,L3=bt([xe("name"),xe("factory"),xe("configFields"),ge("apis",{}),ge("extraApis",{})]),H3=bt([xe("name"),xe("factory"),xe("configFields"),xe("partFields"),ge("apis",{}),ge("extraApis",{})]),vi=t=>{const r=Ea("Sketcher for "+t.name,L3,t),a=h=>Kf(r.name,r.configFields,r.factory,h),l=Yo(r.apis,ff),u=Yo(r.extraApis,(h,v)=>hf(h,v));return{name:r.name,configFields:r.configFields,sketch:a,...l,...u}},Js=t=>{const r=Ea("Sketcher for "+t.name,H3,t),a=v=>cm(r.name,r.configFields,r.partFields,r.factory,v),l=G0(r.name,r.partFields),u=Yo(r.apis,ff),h=Yo(r.extraApis,(v,x)=>hf(v,x));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:a,parts:l,...u,...h}},ip=t=>oi("input")(t)&&ut(t,"type")!=="radio"||oi("textarea")(t);var Ny=Object.freeze({__proto__:null,getCurrent:(t,r,a)=>r.find(t)});const I3=[xe("find")],go=Gr({fields:I3,name:"composing",apis:Ny}),pw=["input","button","textarea","select"],Ly=(t,r,a)=>{(r.disabled()?Iy:lp)(t,r)},q0=(t,r)=>r.useNative===!0&&zo(pw,Bo(t.element)),P3=t=>Zn(t.element,"disabled"),fw=t=>{W(t.element,"disabled","disabled")},vw=t=>{vo(t.element,"disabled")},Hy=t=>ut(t.element,"aria-disabled")==="true",z3=t=>{W(t.element,"aria-disabled","true")},F3=t=>{W(t.element,"aria-disabled","false")},Iy=(t,r,a)=>{r.disableClass.each(l=>{Kt(t.element,l)}),(q0(t,r)?fw:z3)(t),r.onDisabled(t)},lp=(t,r,a)=>{r.disableClass.each(l=>{Tn(t.element,l)}),(q0(t,r)?vw:F3)(t),r.onEnabled(t)},bw=(t,r)=>q0(t,r)?P3(t):Hy(t);var yw=Object.freeze({__proto__:null,enable:lp,disable:Iy,isDisabled:bw,onLoad:Ly,set:(t,r,a,l)=>{(l?Iy:lp)(t,r)}}),V3=Object.freeze({__proto__:null,exhibit:(t,r)=>$i({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>Jo([cf(ma(),(a,l)=>bw(a,t)),Nb(t,r,Ly)])}),ht=[ar("disabled",Ge),ge("useNative",!0),_o("disableClass"),mo("onDisabled"),mo("onEnabled")];const wt=Gr({fields:ht,name:"disabling",active:V3,apis:yw}),Py=(t,r,a,l)=>{const u=_s(t.element,"."+r.highlightClass);at(u,h=>{xr(l,v=>Vo(v.element,h))||(Tn(h,r.highlightClass),t.getSystem().getByDom(h).each(v=>{r.onDehighlight(t,v),Eo(v,hh())}))})},zy=(t,r,a)=>Py(t,r,a,[]),Xf=(t,r,a,l)=>{Q0(t,r,a,l)&&(Tn(l.element,r.highlightClass),r.onDehighlight(t,l),Eo(l,hh()))},kg=(t,r,a,l)=>{Py(t,r,a,[l]),Q0(t,r,a,l)||(Kt(l.element,r.highlightClass),r.onHighlight(t,l),Eo(l,ab()))},Z3=(t,r,a)=>{J0(t,r).each(l=>{kg(t,r,a,l)})},Y0=(t,r,a)=>{Cw(t,r).each(l=>{kg(t,r,a,l)})},xw=(t,r,a,l)=>{_g(t,r,a,l).fold(u=>{throw u},u=>{kg(t,r,a,u)})},U3=(t,r,a,l)=>{const u=kw(t,r);It(u,l).each(h=>{kg(t,r,a,h)})},Q0=(t,r,a,l)=>ls(l.element,r.highlightClass),Fy=(t,r,a)=>hn(t.element,"."+r.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),_g=(t,r,a,l)=>{const u=_s(t.element,"."+r.itemClass);return E.from(u[l]).fold(()=>Wt.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},J0=(t,r,a)=>hn(t.element,"."+r.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Cw=(t,r,a)=>{const l=_s(t.element,"."+r.itemClass);return(l.length>0?E.some(l[l.length-1]):E.none()).bind(u=>t.getSystem().getByDom(u).toOptional())},ww=(t,r,a,l)=>{const u=_s(t.element,"."+r.itemClass);return nn(u,h=>ls(h,r.highlightClass)).bind(h=>{const v=lg(h,l,0,u.length-1);return t.getSystem().getByDom(u[v]).toOptional()})},W3=(t,r,a)=>ww(t,r,a,-1),Sw=(t,r,a)=>ww(t,r,a,1),kw=(t,r,a)=>{const l=_s(t.element,"."+r.itemClass);return _i(Ie(l,u=>t.getSystem().getByDom(u).toOptional()))};var $3=Object.freeze({__proto__:null,dehighlightAll:zy,dehighlight:Xf,highlight:kg,highlightFirst:Z3,highlightLast:Y0,highlightAt:xw,highlightBy:U3,isHighlighted:Q0,getHighlighted:Fy,getFirst:J0,getLast:Cw,getPrevious:W3,getNext:Sw,getCandidates:kw}),j3=[xe("highlightClass"),xe("itemClass"),mo("onHighlight"),mo("onDehighlight")];const wo=Gr({fields:j3,name:"highlighting",apis:$3}),Vy=[8],su=[9],gd=[13],qf=[27],pa=[32],ev=[37],Ji=[38],Eg=[39],cp=[40],G3=(t,r,a)=>{const l=cr(t.slice(0,r)),u=cr(t.slice(r+1));return It(l.concat(u),a)},K3=(t,r,a)=>{const l=cr(t.slice(0,r));return It(l,a)},c=(t,r,a)=>{const l=t.slice(0,r),u=t.slice(r+1);return It(u.concat(l),a)},m=(t,r,a)=>{const l=t.slice(r+1);return It(l,a)},p=t=>r=>{const a=r.raw;return zo(t,a.which)},b=t=>r=>ei(t,a=>a(r)),w=t=>t.raw.shiftKey===!0,O=t=>t.raw.ctrlKey===!0,R=Oe(w),z=(t,r)=>({matches:t,classification:r}),q=(t,r)=>It(t,a=>a.matches(r)).map(a=>a.classification),ue=(t,r,a)=>{r.exists(l=>a.exists(u=>Vo(u,l)))||St(t,af(),{prevFocus:r,newFocus:a})},ke=()=>{const t=r=>mc(r.element);return{get:t,set:(r,a)=>{const l=t(r);r.getSystem().triggerFocus(a,r.element);const u=t(r);ue(r,l,u)}}},Te=()=>{const t=r=>wo.getHighlighted(r).map(a=>a.element);return{get:t,set:(r,a)=>{const l=t(r);r.getSystem().getByDom(a).fold(J,h=>{wo.highlight(r,h)});const u=t(r);ue(r,l,u)}}};var st;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(st||(st={}));const $e=(t,r,a,l,u)=>{const h=()=>t.concat([ge("focusManager",ke()),js("focusInside","onFocus",_a(C=>zo(["onFocus","onEnterOrSpace","onApi"],C)?Wt.value(C):Wt.error("Invalid value for focusInside"))),en("handler",x),en("state",r),en("sendFocusIn",u)]),v=(C,_,M,A,B)=>{const F=M(C,_,A,B);return q(F,_.event).bind(oe=>oe(C,_,A,B))},x={schema:h,processKey:v,toEvents:(C,_)=>{const M=C.focusInside!==st.OnFocusMode?E.none():u(C).map(F=>Re(ui(),(oe,ce)=>{F(oe,C,_),ce.stop()})),A=(F,oe)=>{const ce=p(pa.concat(gd))(oe.event);C.focusInside===st.OnEnterOrSpaceMode&&ce&&tb(F,oe)&&u(C).each(De=>{De(F,C,_),oe.stop()})},B=[Re(Ui(),(F,oe)=>{v(F,oe,a,C,_).fold(()=>{A(F,oe)},ce=>{oe.stop()})}),Re(bk(),(F,oe)=>{v(F,oe,l,C,_).each(ce=>{oe.stop()})})];return Jo(M.toArray().concat(B))}};return x},Xe=t=>{const r=[_o("onEscape"),_o("onEnter"),ge("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ge("firstTabstop",0),ge("useTabstopAt",Be),_o("visibilitySelector")].concat([t]),a=(Q,ee)=>{const fe=Q.visibilitySelector.bind(Ne=>Ml(ee,Ne)).getOr(ee);return Cn(fe)>0},l=(Q,ee)=>{const fe=_s(Q.element,ee.selector),Ne=qo(fe,be=>a(ee,be));return E.from(Ne[ee.firstTabstop])},u=(Q,ee)=>ee.focusManager.get(Q).bind(fe=>Ml(fe,ee.selector)),h=(Q,ee)=>a(Q,ee)&&Q.useTabstopAt(ee),v=(Q,ee,fe)=>{l(Q,ee).each(Ne=>{ee.focusManager.set(Q,Ne)})},x=(Q,ee,fe,Ne,be)=>be(ee,fe,Fe=>h(Ne,Fe)).fold(()=>Ne.cyclic?E.some(!0):E.none(),Fe=>(Ne.focusManager.set(Q,Fe),E.some(!0))),C=(Q,ee,fe,Ne)=>{const be=_s(Q.element,fe.selector);return u(Q,fe).bind(Fe=>nn(be,io(Vo,Fe)).bind(et=>x(Q,be,et,fe,Ne)))},_=(Q,ee,fe)=>{const Ne=fe.cyclic?G3:K3;return C(Q,ee,fe,Ne)},M=(Q,ee,fe)=>{const Ne=fe.cyclic?c:m;return C(Q,ee,fe,Ne)},A=Q=>Od(Q).bind(ku).exists(ee=>Vo(ee,Q)),B=(Q,ee,fe)=>u(Q,fe).filter(Ne=>!fe.useTabstopAt(Ne)).bind(Ne=>(A(Ne)?_:M)(Q,ee,fe)),F=(Q,ee,fe)=>fe.onEnter.bind(Ne=>Ne(Q,ee)),oe=(Q,ee,fe)=>fe.onEscape.bind(Ne=>Ne(Q,ee)),ce=se([z(b([w,p(su)]),_),z(p(su),M),z(b([R,p(gd)]),F)]),De=se([z(p(qf),oe),z(p(su),B)]);return $e(r,Ol.init,ce,De,()=>E.some(v))};var Nt=Xe(Ns("cyclic",Ge)),mt=Xe(Ns("cyclic",Be));const Gt=(t,r,a)=>(ph(t,a,ma()),E.some(!0)),Xt=(t,r,a)=>ip(a)&&p(pa)(r.event)?E.none():Gt(t,r,a),sn=(t,r)=>E.some(!0),fa=[ge("execute",Xt),ge("useSpace",!1),ge("useEnter",!0),ge("useControlEnter",!1),ge("useDown",!1)],Br=(t,r,a)=>a.execute(t,r,t.element),hd=(t,r,a,l)=>{const u=a.useSpace&&!ip(t.element)?pa:[],h=a.useEnter?gd:[],v=a.useDown?cp:[],x=u.concat(h).concat(v);return[z(p(x),Br)].concat(a.useControlEnter?[z(b([O,p(gd)]),Br)]:[])},vc=(t,r,a,l)=>a.useSpace&&!ip(t.element)?[z(p(pa),sn)]:[];var au=$e(fa,Ol.init,hd,vc,()=>E.none());const Ho=()=>{const t=un();return Da({readState:()=>t.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{t.set({numRows:r,numColumns:a})},getNumRows:()=>t.get().map(r=>r.numRows),getNumColumns:()=>t.get().map(r=>r.numColumns)})};var Nr=Object.freeze({__proto__:null,flatgrid:Ho,init:t=>t.state(t)});const Xr=t=>(r,a,l,u)=>{const h=t(r.element);return La(h,r,a,l,u)},Na=(t,r)=>{const a=jb(t,r);return Xr(a)},Nl=(t,r)=>{const a=jb(r,t);return Xr(a)},pd=t=>(r,a,l,u)=>La(t,r,a,l,u),La=(t,r,a,l,u)=>l.focusManager.get(r).bind(h=>t(r.element,h,l,u)).map(h=>(l.focusManager.set(r,h),!0)),tv=pd,dp=pd,Xa=pd,Ps=t=>t.offsetWidth<=0&&t.offsetHeight<=0,_w=t=>!Ps(t.dom),X3=(t,r)=>nn(t,r).map(a=>({index:a,candidates:t})),Zy=(t,r,a)=>{const l=v=>Vo(v,r),u=_s(t,a),h=qo(u,_w);return X3(h,l)},Ew=(t,r)=>nn(t,a=>Vo(r,a)),Ow=(t,r,a,l)=>{const u=Math.floor(r/a),h=r%a;return l(u,h).bind(v=>{const x=v.row*a+v.column;return x>=0&&x<t.length?E.some(t[x]):E.none()})},Yf=(t,r,a,l,u)=>Ow(t,r,l,(h,v)=>{const x=h===a-1?t.length-h*l:l,C=lg(v,u,0,x-1);return E.some({row:h,column:C})}),Uy=(t,r,a,l,u)=>Ow(t,r,l,(h,v)=>{const x=lg(h,u,0,a-1),C=x===a-1?t.length-x*l:l,_=Aa(v,0,C-1);return E.some({row:x,column:_})}),Qf=(t,r,a,l)=>Yf(t,r,a,l,1),u5=(t,r,a,l)=>Yf(t,r,a,l,-1),lL=(t,r,a,l)=>Uy(t,r,a,l,-1),q3=(t,r,a,l)=>Uy(t,r,a,l,1),m5=[xe("selector"),ge("execute",Xt),Ma("onEscape"),ge("captureTab",!1),Sf()],g5=(t,r,a)=>{hn(t.element,r.selector).each(l=>{r.focusManager.set(t,l)})},h5=(t,r)=>r.focusManager.get(t).bind(a=>Ml(a,r.selector)),cL=(t,r,a,l)=>h5(t,a).bind(u=>a.execute(t,r,u)),Tw=t=>(r,a,l,u)=>Zy(r,a,l.selector).bind(h=>t(h.candidates,h.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns))),p5=(t,r,a)=>a.captureTab?E.some(!0):E.none(),dL=(t,r,a)=>a.onEscape(t,r),f5=Tw(u5),ov=Tw(Qf),v5=Tw(lL),b5=Tw(q3),Y3=se([z(p(ev),Na(f5,ov)),z(p(Eg),Nl(f5,ov)),z(p(Ji),tv(v5)),z(p(cp),dp(b5)),z(b([w,p(su)]),p5),z(b([R,p(su)]),p5),z(p(pa.concat(gd)),cL)]),uL=se([z(p(qf),dL),z(p(pa),sn)]);var y5=$e(m5,Ho,Y3,uL,()=>E.some(g5));const x5=(t,r,a,l,u)=>{const h=x=>Bo(x)==="button"&&ut(x,"disabled")==="disabled",v=(x,C,_)=>u(x,C,l,0,_.length-1,_[C],M=>h(_[M])?v(x,M,_):E.from(_[M]));return Zy(t,a,r).bind(x=>{const C=x.index,_=x.candidates;return v(C,C,_)})},Q3=(t,r,a,l)=>x5(t,r,a,l,(u,h,v,x,C,_,M)=>{const A=Aa(h+v,x,C);return A===u?E.from(_):M(A)}),Wy=(t,r,a,l)=>x5(t,r,a,l,(u,h,v,x,C,_,M)=>{const A=lg(h,v,x,C);return A===u?E.none():M(A)}),mL=[xe("selector"),ge("getInitial",E.none),ge("execute",Xt),Ma("onEscape"),ge("executeOnMove",!1),ge("allowVertical",!0),ge("allowHorizontal",!0),ge("cycles",!0)],gL=(t,r)=>r.focusManager.get(t).bind(a=>Ml(a,r.selector)),J3=(t,r,a)=>gL(t,a).bind(l=>a.execute(t,r,l)),hL=(t,r,a)=>{r.getInitial(t).orThunk(()=>hn(t.element,r.selector)).each(l=>{r.focusManager.set(t,l)})},C5=(t,r,a)=>(a.cycles?Wy:Q3)(t,a.selector,r,-1),w5=(t,r,a)=>(a.cycles?Wy:Q3)(t,a.selector,r,1),Dw=t=>(r,a,l,u)=>t(r,a,l,u).bind(()=>l.executeOnMove?J3(r,a,l):E.some(!0)),e_=(t,r,a)=>a.onEscape(t,r),pL=(t,r,a,l)=>{const u=[...a.allowHorizontal?ev:[]].concat(a.allowVertical?Ji:[]),h=[...a.allowHorizontal?Eg:[]].concat(a.allowVertical?cp:[]);return[z(p(u),Dw(Na(C5,w5))),z(p(h),Dw(Nl(C5,w5))),z(p(gd),J3),z(p(pa),J3)]},S5=se([z(p(pa),sn),z(p(qf),e_)]);var fL=$e(mL,Ol.init,pL,S5,()=>E.some(hL));const Mw=(t,r,a)=>E.from(t[r]).bind(l=>E.from(l[a]).map(u=>({rowIndex:r,columnIndex:a,cell:u}))),Ll=(t,r,a,l)=>{const u=t[r].length,h=lg(a,l,0,u-1);return Mw(t,r,h)},k5=(t,r,a,l)=>{const u=lg(a,l,0,t.length-1),h=t[u].length,v=Aa(r,0,h-1);return Mw(t,u,v)},_5=(t,r,a,l)=>{const u=t[r].length,h=Aa(a+l,0,u-1);return Mw(t,r,h)},E5=(t,r,a,l)=>{const u=Aa(a+l,0,t.length-1),h=t[u].length,v=Aa(r,0,h-1);return Mw(t,u,v)},vL=(t,r,a)=>Ll(t,r,a,1),bL=(t,r,a)=>Ll(t,r,a,-1),nv=(t,r,a)=>k5(t,a,r,-1),t_=(t,r,a)=>k5(t,a,r,1),yL=(t,r,a)=>_5(t,r,a,-1),o_=(t,r,a)=>_5(t,r,a,1),Aw=(t,r,a)=>E5(t,a,r,-1),n_=(t,r,a)=>E5(t,a,r,1),xL=[jn("selectors",[xe("row"),xe("cell")]),ge("cycles",!0),ge("previousSelector",E.none),ge("execute",Xt)],CL=(t,r,a)=>{r.previousSelector(t).orThunk(()=>{const l=r.selectors;return hn(t.element,l.cell)}).each(l=>{r.focusManager.set(t,l)})},wL=(t,r,a)=>mc(t.element).bind(l=>a.execute(t,r,l)),SL=(t,r)=>Ie(t,a=>_s(a,r.selectors.cell)),Rw=(t,r)=>(a,l,u)=>{const h=u.cycles?t:r;return Ml(l,u.selectors.row).bind(v=>{const x=_s(v,u.selectors.cell);return Ew(x,l).bind(C=>{const _=_s(a,u.selectors.row);return Ew(_,v).bind(M=>{const A=SL(_,u);return h(A,M,C).map(B=>B.cell)})})})},O5=Rw(bL,yL),r_=Rw(vL,o_),s_=Rw(nv,Aw),kL=Rw(t_,n_),_L=se([z(p(ev),Na(O5,r_)),z(p(Eg),Nl(O5,r_)),z(p(Ji),tv(s_)),z(p(cp),dp(kL)),z(p(pa.concat(gd)),wL)]),EL=se([z(p(pa),sn)]);var OL=$e(xL,Ol.init,_L,EL,()=>E.some(CL));const Jf=[xe("selector"),ge("execute",Xt),ge("moveOnTab",!1)],a_=(t,r,a)=>a.focusManager.get(t).bind(l=>a.execute(t,r,l)),TL=(t,r,a)=>{hn(t.element,r.selector).each(l=>{r.focusManager.set(t,l)})},Bw=(t,r,a)=>Wy(t,a.selector,r,-1),T5=(t,r,a)=>Wy(t,a.selector,r,1),D5=(t,r,a,l)=>a.moveOnTab?Xa(Bw)(t,r,a,l):E.none(),M5=(t,r,a,l)=>a.moveOnTab?Xa(T5)(t,r,a,l):E.none(),A5=se([z(p(Ji),Xa(Bw)),z(p(cp),Xa(T5)),z(b([w,p(su)]),D5),z(b([R,p(su)]),M5),z(p(gd),a_),z(p(pa),a_)]),R5=se([z(p(pa),sn)]);var B5=$e(Jf,Ol.init,A5,R5,()=>E.some(TL));const DL=[Ma("onSpace"),Ma("onEnter"),Ma("onShiftEnter"),Ma("onLeft"),Ma("onRight"),Ma("onTab"),Ma("onShiftTab"),Ma("onUp"),Ma("onDown"),Ma("onEscape"),ge("stopSpaceKeyup",!1),_o("focusIn")],ML=(t,r,a)=>[z(p(pa),a.onSpace),z(b([R,p(gd)]),a.onEnter),z(b([w,p(gd)]),a.onShiftEnter),z(b([w,p(su)]),a.onShiftTab),z(b([R,p(su)]),a.onTab),z(p(Ji),a.onUp),z(p(cp),a.onDown),z(p(ev),a.onLeft),z(p(Eg),a.onRight),z(p(pa),a.onSpace)],AL=(t,r,a)=>[...a.stopSpaceKeyup?[z(p(pa),sn)]:[],z(p(qf),a.onEscape)];var i_=$e(DL,Ol.init,ML,AL,t=>t.focusIn);const RL=Nt.schema(),BL=mt.schema(),NL=fL.schema(),LL=y5.schema(),N5=OL.schema(),HL=au.schema(),IL=B5.schema(),PL=i_.schema();var L5=Object.freeze({__proto__:null,acyclic:RL,cyclic:BL,flow:NL,flatgrid:LL,matrix:N5,execution:HL,menu:IL,special:PL});const zL=t=>ra(t,"setGridSize"),_t=Of({branchKey:"mode",branches:L5,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,a)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,r,a)})},setGridSize:(t,r,a,l,u)=>{zL(a)?a.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:Nr}),l_=(t,r)=>{Pb(()=>{b3(t,r,()=>Ie(r,t.getSystem().build))},t.element)},H5=(t,r)=>{Pb(()=>{rm(t,r,()=>iC(t.element,r,t.getSystem().buildOrPatch))},t.element)},FL=(t,r,a,l)=>{P0(r);const u=aC(t.element,a,l,t.getSystem().buildOrPatch);I0(t,u),t.syncComponents()},rv=(t,r,a)=>{const l=t.getSystem().build(a);z0(t,l,r)},VL=(t,r,a,l)=>{eu(r),rv(t,(u,h)=>Ru(u,h,a),l)},I5=(t,r,a,l)=>(r.reuseDom?H5:l_)(t,l),qa=(t,r,a,l)=>{rv(t,_r,l)},ZL=(t,r,a,l)=>{rv(t,Vr,l)},P5=(t,r,a,l)=>{const u=$y(t);It(u,h=>Vo(l.element,h.element)).each(eu)},$y=(t,r)=>t.components(),z5=(t,r,a,l,u)=>{const h=$y(t);return E.from(h[l]).map(v=>(u.fold(()=>eu(v),x=>{(r.reuseDom?FL:VL)(t,v,l,x)}),v))};var F5=Object.freeze({__proto__:null,append:qa,prepend:ZL,remove:P5,replaceAt:z5,replaceBy:(t,r,a,l,u)=>{const h=$y(t);return nn(h,l).bind(v=>z5(t,r,a,v,u))},set:I5,contents:$y});const Zt=Gr({fields:[Wr("reuseDom",!0)],name:"replacing",apis:F5}),UL=(t,r)=>{const a=Jo(r);return Gr({fields:[xe("enabled")],name:t,active:{events:se(a)}})},Yt=(t,r)=>{const a=UL(t,r);return{key:t,value:{config:{},me:a,configAsRaw:se({}),initialConfig:{},state:Ol}}},V5=(t,r)=>{r.ignore||(tt(t.element),r.onFocus(t))};var WL=Object.freeze({__proto__:null,focus:V5,blur:(t,r)=>{r.ignore||Tf(t.element)},isFocused:t=>Nh(t.element)}),Z5=Object.freeze({__proto__:null,exhibit:(t,r)=>{const a=r.ignore?{}:{attributes:{tabindex:"-1"}};return $i(a)},events:t=>Jo([Re(ui(),(r,a)=>{V5(r,t),a.stop()})].concat(t.stopMousedown?[Re(Wa(),(r,a)=>{a.event.prevent()})]:[]))}),$L=[mo("onFocus"),ge("stopMousedown",!1),ge("ignore",!1)];const Lt=Gr({fields:$L,name:"focusing",active:Z5,apis:WL}),U5=t=>({init:()=>{const r=Dt(t);return{get:()=>r.get(),set:a=>r.set(a),clear:()=>r.set(t),readState:()=>r.get()}}}),W5=(t,r,a)=>{const l=r.aria;l.update(t,l,a.get())},$5=(t,r,a)=>{r.toggleClass.each(l=>{a.get()?Kt(t.element,l):Tn(t.element,l)})},jy=(t,r,a,l)=>{const u=a.get();a.set(l),$5(t,r,a),W5(t,r,a),u!==l&&r.onToggled(t,l)},j5=(t,r,a)=>{jy(t,r,a,!a.get())},jL=(t,r,a)=>{jy(t,r,a,!0)},GL=(t,r,a)=>{jy(t,r,a,!1)},G5=(t,r,a)=>a.get(),c_=(t,r,a)=>{jy(t,r,a,r.selected)};var up=Object.freeze({__proto__:null,onLoad:c_,toggle:j5,isOn:G5,on:jL,off:GL,set:jy}),K5=Object.freeze({__proto__:null,exhibit:()=>$i({}),events:(t,r)=>{const a=nd(t,r,j5),l=Nb(t,r,c_);return Jo(Bt([t.toggleOnExecute?[a]:[],[l]]))}});const X5=(t,r,a)=>{W(t.element,"aria-pressed",a),r.syncWithExpanded&&q5(t,r,a)},d_=(t,r,a)=>{W(t.element,"aria-selected",a)},KL=(t,r,a)=>{W(t.element,"aria-checked",a)},q5=(t,r,a)=>{W(t.element,"aria-expanded",a)};var XL=[ge("selected",!1),_o("toggleClass"),ge("toggleOnExecute",!0),mo("onToggled"),js("aria",{mode:"none"},yr("mode",{pressed:[ge("syncWithExpanded",!1),en("update",X5)],checked:[en("update",KL)],expanded:[en("update",q5)],selected:[en("update",d_)],none:[en("update",J)]}))];const oo=Gr({fields:XL,name:"toggling",active:K5,apis:up,state:U5(!1)}),u_=()=>{const t=(r,a)=>{a.stop(),Yc(r)};return[Re(Vu(),t),Re(rf(),t),Wu(Gc()),Wu(Wa())]},sv=t=>{const r=a=>gi((l,u)=>{a(l),u.stop()});return Jo(Bt([t.map(r).toArray(),u_()]))},Nw="alloy.item-hover",Y5="alloy.item-focus",Og="alloy.item-toggled",m_=t=>{(mc(t.element).isNone()||Lt.isFocused(t))&&(Lt.isFocused(t)||Lt.focus(t),St(t,Nw,{item:t}))},g_=t=>{St(t,Y5,{item:t})},qL=(t,r)=>{St(t,Og,{item:t,state:r})},Q5=se(Nw),Gy=se(Y5),Ky=se(Og),J5=t=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),eM=t=>({aria:{mode:"checked"},...gl(t,(r,a)=>a!=="exclusive"),onToggled:(r,a)=>{ft(t.onToggled)&&t.onToggled(r,a),qL(r,a)}}),mp=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:J5(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Xi.augment(t.itemBehaviours,[t.toggling.fold(oo.revoke,r=>oo.config(eM(r))),Lt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{g_(r)}}),_t.config({mode:"execution"}),nt.config({store:{mode:"memory",initialValue:t.data}}),Yt("item-type-events",[...u_(),Re($a(),m_),Re(nf(),Lt.focus)])]),components:t.components,eventOrder:t.eventOrder}),gp=[xe("data"),xe("components"),xe("dom"),ge("hasSubmenu",!1),_o("toggling"),Xi.field("itemBehaviours",[oo,Lt,_t,nt]),ge("ignoreFocus",!1),ge("domModification",{}),en("builder",mp),ge("eventOrder",{})],YL=t=>({dom:t.dom,components:t.components,events:Jo([Xx(nf())])}),QL=[xe("dom"),xe("components"),en("builder",YL)],Lw=se("item-widget"),iu=se([Kr({name:"widget",overrides:t=>({behaviours:We([nt.config({store:{mode:"manual",getValue:r=>t.data,setValue:J}})])})})]),h_=t=>{const r=X0(Lw(),t,iu()),a=md(Lw(),t,r.internals()),l=h=>Lo(h,t,"widget").map(v=>(_t.focusIn(v),v)),u=(h,v)=>ip(v.event.target)?E.none():(()=>(t.autofocus&&v.setSource(h.element),E.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Jo([gi((h,v)=>{l(h).each(x=>{v.stop()})}),Re($a(),m_),Re(nf(),(h,v)=>{t.autofocus?l(h):Lt.focus(h)})]),behaviours:Xi.augment(t.widgetBehaviours,[nt.config({store:{mode:"memory",initialValue:t.data}}),Lt.config({ignore:t.ignoreFocus,onFocus:h=>{g_(h)}}),_t.config({mode:"special",focusIn:t.autofocus?h=>{l(h)}:Fk(),onLeft:u,onRight:u,onEscape:(h,v)=>!Lt.isFocused(h)&&!t.autofocus?(Lt.focus(h),E.some(!0)):(t.autofocus&&v.setSource(h.element),E.none())})])}},JL=[xe("uid"),xe("data"),xe("components"),xe("dom"),ge("autofocus",!1),ge("ignoreFocus",!1),Xi.field("widgetBehaviours",[nt,Lt,_t]),ge("domModification",{}),ap(iu()),en("builder",h_)],tM=yr("type",{widget:JL,item:gp,separator:QL}),oM=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),nM=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),p_=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),rM=se([$0({factory:{sketch:t=>{const r=Ea("menu.spec item",tM,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>bo(r,"uid")?r:{...r,uid:bh("item")},overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),eH=se([xe("value"),xe("items"),xe("dom"),xe("components"),ge("eventOrder",{}),In("menuBehaviours",[wo,nt,go,_t]),js("movement",{mode:"menu",moveOnTab:!0},yr("mode",{grid:[Sf(),en("config",oM)],matrix:[en("config",nM),xe("rowSelector"),ge("previousSelector",E.none)],menu:[ge("moveOnTab",!0),en("config",p_)]})),Pk(),ge("fakeFocus",!1),ge("focusManager",ke()),mo("onHighlight"),mo("onDehighlight")]),sM=se("alloy.menu-focus"),tH=(t,r)=>{const a=_s(t.element,'[role="menuitemradio"][aria-checked="true"]');at(a,l=>{Vo(l,r.element)||t.getSystem().getByDom(l).each(u=>{oo.off(u)})})},Hw=(t,r,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Rr(t.menuBehaviours,[wo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),nt.config({store:{mode:"memory",initialValue:t.value}}),go.config({find:E.some}),_t.config(t.movement.config(t,t.movement))]),events:Jo([Re(Gy(),(u,h)=>{const v=h.event;u.getSystem().getByDom(v.target).each(x=>{wo.highlight(u,x),h.stop(),St(u,sM(),{menu:u,item:x})})}),Re(Q5(),(u,h)=>{const v=h.event.item;wo.highlight(u,v)}),Re(Ky(),(u,h)=>{const{item:v,state:x}=h.event;x&&ut(v.element,"role")==="menuitemradio"&&tH(u,v)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),Tg=Js({name:"Menu",configFields:eH(),partFields:rM(),factory:Hw}),f_=t=>Nc(t,(r,a)=>({k:r,v:a})),aM=(t,r,a,l)=>ot(a,l).bind(u=>ot(t,u).bind(h=>{const v=aM(t,r,a,h);return E.some([h].concat(v))})).getOr([]),oH=(t,r)=>{const a={};Xn(t,(v,x)=>{at(v,C=>{a[C]=x})});const l=r,u=f_(r),h=Yo(u,(v,x)=>[x].concat(aM(a,l,u,x)));return Yo(a,v=>ot(h,v).getOr([v]))},iM=()=>{const t=Dt({}),r=Dt({}),a=Dt({}),l=un(),u=Dt({}),h=()=>{t.set({}),r.set({}),a.set({}),l.clear()},v=()=>l.get().isNone(),x=(ee,fe)=>{r.set({...r.get(),[ee]:{type:"prepared",menu:fe}})},C=(ee,fe,Ne,be)=>{l.set(ee),t.set(Ne),r.set(fe),u.set(be);const Fe=oH(be,Ne);a.set(Fe)},_=ee=>Cr(t.get(),(fe,Ne)=>fe===ee),M=(ee,fe,Ne)=>ce(ee).bind(be=>_(ee).bind(Fe=>fe(Fe).map(et=>({triggeredMenu:be,triggeringItem:et,triggeringPath:Ne})))),A=(ee,fe)=>{const Ne=qo(Q(ee).toArray(),be=>ce(be).isSome());return ot(a.get(),ee).bind(be=>{const Fe=cr(Ne.concat(be)),et=me(Fe,(ct,eo)=>M(ct,fe,Fe.slice(0,eo+1)).fold(()=>Ms(l.get(),ct)?[]:[E.none()],K=>[E.some(K)]));return Uo(et)})},B=ee=>ot(t.get(),ee).map(fe=>{const Ne=ot(a.get(),ee).getOr([]);return[fe].concat(Ne)}),F=ee=>ot(a.get(),ee).bind(fe=>fe.length>1?E.some(fe.slice(1)):E.none()),oe=ee=>ot(a.get(),ee),ce=ee=>De(ee).bind(v_),De=ee=>ot(r.get(),ee),Q=ee=>ot(t.get(),ee);return{setMenuBuilt:x,setContents:C,expand:B,refresh:oe,collapse:F,lookupMenu:De,lookupItem:Q,otherMenus:ee=>{const fe=u.get();return Et(yn(fe),ee)},getPrimary:()=>l.get().bind(ce),getMenus:()=>r.get(),clear:h,isClear:v,getTriggeringPath:A}},v_=t=>t.type==="prepared"?E.some(t.menu):E.none(),b_={init:iM,extractPreparedMenu:v_},y_=gt("tiered-menu-item-highlight"),lM=gt("tiered-menu-item-dehighlight");var va;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(va||(va={}));const nH=(t,r)=>{const a=un(),l=(_e,Ue,Je)=>Yo(Je,(xt,no)=>{const Do=()=>Tg.sketch({...xt,value:no,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ko,fn)=>{St(ko,y_,{menuComp:ko,itemComp:fn})},onDehighlight:(ko,fn)=>{St(ko,lM,{menuComp:ko,itemComp:fn})},focusManager:t.fakeFocus?Te():ke()});return no===Ue?{type:"prepared",menu:_e.getSystem().build(Do())}:{type:"notbuilt",nbMenu:Do}}),u=b_.init(),h=_e=>{const Ue=l(_e,t.data.primary,t.data.menus),Je=C();return u.setContents(t.data.primary,Ue,t.data.expansions,Je),u.getPrimary()},v=_e=>nt.getValue(_e).value,x=(_e,Ue,Je)=>hr(Ue,xt=>{if(!xt.getSystem().isConnected())return E.none();const no=wo.getCandidates(xt);return It(no,Do=>v(Do)===Je)}),C=_e=>Yo(t.data.menus,(Ue,Je)=>me(Ue.items,xt=>xt.type==="separator"?[]:[xt.data.value])),_=wo.highlight,M=(_e,Ue)=>{_(_e,Ue),wo.getHighlighted(Ue).orThunk(()=>wo.getFirst(Ue)).each(Je=>{t.fakeFocus?wo.highlight(Ue,Je):ph(_e,Je.element,nf())})},A=(_e,Ue)=>_i(Ie(Ue,Je=>_e.lookupMenu(Je).bind(xt=>xt.type==="prepared"?E.some(xt.menu):E.none()))),B=(_e,Ue,Je)=>{const xt=A(Ue,Ue.otherMenus(Je));at(xt,no=>{xs(no.element,[t.markers.backgroundMenu]),t.stayInDom||Zt.remove(_e,no)})},F=_e=>a.get().getOrThunk(()=>{const Ue={},Je=_s(_e.element,`.${t.markers.item}`),xt=qo(Je,no=>ut(no,"aria-haspopup")==="true");return at(xt,no=>{_e.getSystem().getByDom(no).each(Do=>{const ko=v(Do);Ue[ko]=Do})}),a.set(Ue),Ue}),oe=(_e,Ue)=>{const Je=F(_e);Xn(Je,(xt,no)=>{const Do=zo(Ue,no);W(xt.element,"aria-expanded",Do)})},ce=(_e,Ue,Je)=>E.from(Je[0]).bind(xt=>Ue.lookupMenu(xt).bind(no=>{if(no.type==="notbuilt")return E.none();{const Do=no.menu,ko=A(Ue,Je.slice(1));return at(ko,fn=>{Kt(fn.element,t.markers.backgroundMenu)}),fs(Do.element)||Zt.append(_e,ji(Do)),xs(Do.element,[t.markers.backgroundMenu]),M(_e,Do),B(_e,Ue,Je),E.some(Do)}}));let De;(function(_e){_e[_e.HighlightSubmenu=0]="HighlightSubmenu",_e[_e.HighlightParent=1]="HighlightParent"})(De||(De={}));const Q=(_e,Ue,Je)=>{if(Je.type==="notbuilt"){const xt=_e.getSystem().build(Je.nbMenu());return u.setMenuBuilt(Ue,xt),xt}else return Je.menu},ee=(_e,Ue,Je=De.HighlightSubmenu)=>{if(Ue.hasConfigured(wt)&&wt.isDisabled(Ue))return E.some(Ue);{const xt=v(Ue);return u.expand(xt).bind(no=>(oe(_e,no),E.from(no[0]).bind(Do=>u.lookupMenu(Do).bind(ko=>{const fn=Q(_e,Do,ko);return fs(fn.element)||Zt.append(_e,ji(fn)),t.onOpenSubmenu(_e,Ue,fn,cr(no)),Je===De.HighlightSubmenu?(wo.highlightFirst(fn),ce(_e,u,no)):(wo.dehighlightAll(fn),E.some(Ue))}))))}},fe=(_e,Ue)=>{const Je=v(Ue);return u.collapse(Je).bind(xt=>(oe(_e,xt),ce(_e,u,xt).map(no=>(t.onCollapseMenu(_e,Ue,no),no))))},Ne=(_e,Ue)=>{const Je=v(Ue);return u.refresh(Je).bind(xt=>(oe(_e,xt),ce(_e,u,xt)))},be=(_e,Ue)=>ip(Ue.element)?E.none():ee(_e,Ue,De.HighlightSubmenu),Fe=(_e,Ue)=>ip(Ue.element)?E.none():fe(_e,Ue),et=(_e,Ue)=>fe(_e,Ue).orThunk(()=>t.onEscape(_e,Ue).map(()=>_e)),ct=_e=>(Ue,Je)=>Ml(Je.getSource(),`.${t.markers.item}`).bind(xt=>Ue.getSystem().getByDom(xt).toOptional().bind(no=>_e(Ue,no).map(Be))),eo=Jo([Re(sM(),(_e,Ue)=>{const Je=Ue.event.item;u.lookupItem(v(Je)).each(()=>{const xt=Ue.event.menu;wo.highlight(_e,xt);const no=v(Ue.event.item);u.refresh(no).each(Do=>B(_e,u,Do))})}),gi((_e,Ue)=>{const Je=Ue.event.target;_e.getSystem().getByDom(Je).each(xt=>{v(xt).indexOf("collapse-item")===0&&fe(_e,xt),ee(_e,xt,De.HighlightSubmenu).fold(()=>{t.onExecute(_e,xt)},J)})}),wn((_e,Ue)=>{h(_e).each(Je=>{Zt.append(_e,ji(Je)),t.onOpenMenu(_e,Je),t.highlightOnOpen===va.HighlightMenuAndItem?M(_e,Je):t.highlightOnOpen===va.HighlightJustMenu&&_(_e,Je)})}),Re(y_,(_e,Ue)=>{t.onHighlightItem(_e,Ue.event.menuComp,Ue.event.itemComp)}),Re(lM,(_e,Ue)=>{t.onDehighlightItem(_e,Ue.event.menuComp,Ue.event.itemComp)}),...t.navigateOnHover?[Re(Q5(),(_e,Ue)=>{const Je=Ue.event.item;Ne(_e,Je),ee(_e,Je,De.HighlightParent),t.onHover(_e,Je)})]:[]]),K=_e=>wo.getHighlighted(_e).bind(wo.getHighlighted),G=_e=>{K(_e).each(Ue=>{fe(_e,Ue)})},he=_e=>{u.getPrimary().each(Ue=>{M(_e,Ue)})},Ee=_e=>E.from(_e.components()[0]).filter(Ue=>ut(Ue.element,"role")==="menu"),dt={collapseMenu:G,highlightPrimary:he,repositionMenus:_e=>{u.getPrimary().bind(Ue=>K(_e).bind(Je=>{const xt=v(Je),no=hl(u.getMenus()),Do=_i(Ie(no,b_.extractPreparedMenu));return u.getTriggeringPath(xt,ko=>x(_e,Do,ko))}).map(Je=>({primary:Ue,triggeringPath:Je}))).fold(()=>{Ee(_e).each(Ue=>{t.onRepositionMenu(_e,Ue,[])})},({primary:Ue,triggeringPath:Je})=>{t.onRepositionMenu(_e,Ue,Je)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Rr(t.tmenuBehaviours,[_t.config({mode:"special",onRight:ct(be),onLeft:ct(Fe),onEscape:ct(et),focusIn:(_e,Ue)=>{u.getPrimary().each(Je=>{ph(_e,Je.element,nf())})}}),wo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),go.config({find:_e=>wo.getHighlighted(_e)}),Zt.config({})]),eventOrder:t.eventOrder,apis:dt,events:eo}},rH=se("collapse-item"),sH=(t,r,a)=>({primary:t,menus:r,expansions:a}),aH=(t,r)=>({primary:t,menus:jr(t,r),expansions:{}}),cM=t=>({value:gt(rH()),meta:{text:t}}),e1=vi({name:"TieredMenu",configFields:[od("onExecute"),od("onEscape"),td("onOpenMenu"),td("onOpenSubmenu"),mo("onRepositionMenu"),mo("onCollapseMenu"),ge("highlightOnOpen",va.HighlightMenuAndItem),jn("data",[xe("primary"),xe("menus"),xe("expansions")]),ge("fakeFocus",!1),mo("onHighlightItem"),mo("onDehighlightItem"),mo("onHover"),Qu(),xe("dom"),ge("navigateOnHover",!0),ge("stayInDom",!1),In("tmenuBehaviours",[_t,wo,go,Zt]),ge("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:nH,extraApis:{tieredData:sH,singleData:aH,collapseItem:cM}}),iH=(t,r,a,l,u)=>{const h=()=>t.lazySink(r),v=l.type==="horizontal"?{layouts:{onLtr:()=>Bb(),onRtl:()=>_f()}}:{},x=_=>_.length===2,C=_=>x(_)?v:{};return e1.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(lo.close(r),t.onEscape.map(_=>_(r)),E.some(!0)),onExecute:()=>E.some(!0),onOpenMenu:(_,M)=>{Is.positionWithinBounds(h().getOrDie(),M,a,u())},onOpenSubmenu:(_,M,A,B)=>{const F=h().getOrDie();Is.position(F,A,{anchor:{type:"submenu",item:M,...C(B)}})},onRepositionMenu:(_,M,A)=>{const B=h().getOrDie();Is.positionWithinBounds(B,M,a,u()),at(A,F=>{const oe=C(F.triggeringPath);Is.position(B,F.triggeredMenu,{anchor:{type:"submenu",item:F.triggeringItem,...oe}})})}})},dM=(t,r)=>{const a=(B,F)=>t.getRelated(B).exists(oe=>$d(oe,F)),l=(B,F)=>{lo.setContent(B,F)},u=(B,F,oe)=>{const ce=E.none;h(B,F,oe,ce)},h=(B,F,oe,ce)=>{const De=t.lazySink(B).getOrDie();lo.openWhileCloaked(B,F,()=>Is.positionWithinBounds(De,B,oe,ce())),nt.setValue(B,E.some({mode:"position",config:oe,getBounds:ce}))},v=(B,F,oe)=>{x(B,F,oe,E.none)},x=(B,F,oe,ce)=>{const De=iH(t,B,F,oe,ce);lo.open(B,De),nt.setValue(B,E.some({mode:"menu",menu:De}))},C=B=>{lo.isOpen(B)&&(nt.setValue(B,E.none()),lo.close(B))},_=B=>lo.getState(B),M=B=>{lo.isOpen(B)&&nt.getValue(B).each(F=>{switch(F.mode){case"menu":lo.getState(B).each(e1.repositionMenus);break;case"position":const oe=t.lazySink(B).getOrDie();Is.positionWithinBounds(oe,B,F.config,F.getBounds());break}})},A={setContent:l,showAt:u,showWithinBounds:h,showMenuAt:v,showMenuWithinBounds:x,hide:C,getContent:_,reposition:M,isOpen:lo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Rr(t.inlineBehaviours,[lo.config({isPartOf:(B,F,oe)=>$d(F,oe)||a(B,oe),getAttachPoint:B=>t.lazySink(B).getOrDie(),onOpen:B=>{t.onShow(B)},onClose:B=>{t.onHide(B)}}),nt.config({store:{mode:"memory",initialValue:E.none()}}),ja.config({channels:{...V0({isExtraPart:r.isExtraPart,...t.fireDismissalEventInstead.map(B=>({fireEventInstead:{event:B.event}})).getOr({})}),...$f({...t.fireRepositionEventInstead.map(B=>({fireEventInstead:{event:B.event}})).getOr({}),doReposition:M})}})]),eventOrder:t.eventOrder,apis:A}},pn=vi({name:"InlineView",configFields:[xe("lazySink"),mo("onShow"),mo("onHide"),Km("onEscape"),In("inlineBehaviours",[lo,nt,ja]),Oa("fireDismissalEventInstead",[ge("event",og())]),Oa("fireRepositionEventInstead",[ge("event",X1())]),ge("getRelated",E.none),ge("isExtraPart",Ge),ge("eventOrder",E.none)],factory:dM,apis:{showAt:(t,r,a,l)=>{t.showAt(r,a,l)},showWithinBounds:(t,r,a,l,u)=>{t.showWithinBounds(r,a,l,u)},showMenuAt:(t,r,a,l)=>{t.showMenuAt(r,a,l)},showMenuWithinBounds:(t,r,a,l,u)=>{t.showMenuWithinBounds(r,a,l,u)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,a)=>{t.setContent(r,a)},reposition:(t,r)=>{t.reposition(r)}}});var Iw=tinymce.util.Tools.resolve("tinymce.util.Delay");const Lr=vi({name:"Button",factory:t=>{const r=sv(t.action),a=t.dom.tag,l=h=>ot(t.dom,"attributes").bind(v=>ot(v,h)),u=()=>{if(a==="button"){const h=l("type").getOr("button"),v=l("role").map(x=>({role:x})).getOr({});return{type:h,...v}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:Xi.augment(t.buttonBehaviours,[Lt.config({}),_t.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[ge("uid",void 0),xe("dom"),ge("components",[]),Xi.field("buttonBehaviours",[Lt,_t]),_o("action"),_o("role"),ge("eventOrder",{})]}),x_=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return on(r,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},uM=t=>Array.prototype.slice.call(t.dom.classList,0),dm=t=>{const r=Ke.fromHtml(t),a=aa(r),l=x_(r),u=uM(r),h=a.length===0?{}:{innerHtml:J1(r)};return{tag:Bo(r),classes:u,attributes:l,...h}},Io=t=>{const r=N3(t)&&ra(t,"uid")?t.uid:bh("memento");return{get:a=>a.getSystem().getByUid(r).getOrDie(),getOpt:a=>a.getSystem().getByUid(r).toOptional(),asSpec:()=>({...t,uid:r})}};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:mM,setPrototypeOf:C_,isFrozen:lH,getPrototypeOf:gM,getOwnPropertyDescriptor:cH}=Object;let{freeze:el,seal:bc,create:Xy}=Object,{apply:qy,construct:Yy}=typeof Reflect<"u"&&Reflect;el||(el=function(t){return t}),bc||(bc=function(t){return t}),qy||(qy=function(t,r,a){return t.apply(r,a)}),Yy||(Yy=function(t,r){return new t(...r)});const Pw=Hl(Array.prototype.forEach),hM=Hl(Array.prototype.pop),Qy=Hl(Array.prototype.push),zw=Hl(String.prototype.toLowerCase),Fw=Hl(String.prototype.toString),w_=Hl(String.prototype.match),Jy=Hl(String.prototype.replace),dH=Hl(String.prototype.indexOf),uH=Hl(String.prototype.trim),lu=Hl(Object.prototype.hasOwnProperty),tl=Hl(RegExp.prototype.test),e2=mH(TypeError);function Hl(t){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return qy(t,r,l)}}function mH(t){return function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return Yy(t,a)}}function an(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zw;C_&&C_(t,null);let l=r.length;for(;l--;){let u=r[l];if(typeof u=="string"){const h=a(u);h!==u&&(lH(r)||(r[l]=h),u=h)}t[u]=!0}return t}function gH(t){for(let r=0;r<t.length;r++)lu(t,r)||(t[r]=null);return t}function t1(t){const r=Xy(null);for(const[a,l]of mM(t))lu(t,a)&&(Array.isArray(l)?r[a]=gH(l):l&&typeof l=="object"&&l.constructor===Object?r[a]=t1(l):r[a]=l);return r}function t2(t,r){for(;t!==null;){const l=cH(t,r);if(l){if(l.get)return Hl(l.get);if(typeof l.value=="function")return Hl(l.value)}t=gM(t)}function a(){return null}return a}const hp=el(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S_=el(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k_=el(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o1=el(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vw=el(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hH=el(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Dg=el(["#text"]),pM=el(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),__=el(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Il=el(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),o2=el(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fM=bc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vM=bc(/<%[\w\W]*|[\w\W]*%>/gm),pH=bc(/\${[\w\W]*}/gm),E_=bc(/^data-[\-\w.\u00B7-\uFFFF]/),fH=bc(/^aria-[\-\w]+$/),bM=bc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vH=bc(/^(?:\w+script|data):/i),Zw=bc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Uw=bc(/^html$/i),yM=bc(/^[a-z][.\w]*(-[.\w]+)+$/i);var O_=Object.freeze({__proto__:null,MUSTACHE_EXPR:fM,ERB_EXPR:vM,TMPLIT_EXPR:pH,DATA_ATTR:E_,ARIA_ATTR:fH,IS_ALLOWED_URI:bM,IS_SCRIPT_OR_DATA:vH,ATTR_WHITESPACE:Zw,DOCTYPE_NAME:Uw,CUSTOM_ELEMENT:yM});const av={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},bH=function(){return typeof window>"u"?null:window},yH=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const l="data-tt-policy-suffix";r&&r.hasAttribute(l)&&(a=r.getAttribute(l));const u="dompurify"+(a?"#"+a:"");try{return t.createPolicy(u,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function T_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bH();const r=de=>T_(de);if(r.version="3.1.7",r.removed=[],!t||!t.document||t.document.nodeType!==av.document)return r.isSupported=!1,r;let{document:a}=t;const l=a,u=l.currentScript,{DocumentFragment:h,HTMLTemplateElement:v,Node:x,Element:C,NodeFilter:_,NamedNodeMap:M=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:A,DOMParser:B,trustedTypes:F}=t,oe=C.prototype,ce=t2(oe,"cloneNode"),De=t2(oe,"remove"),Q=t2(oe,"nextSibling"),ee=t2(oe,"childNodes"),fe=t2(oe,"parentNode");if(typeof v=="function"){const de=a.createElement("template");de.content&&de.content.ownerDocument&&(a=de.content.ownerDocument)}let Ne,be="";const{implementation:Fe,createNodeIterator:et,createDocumentFragment:ct,getElementsByTagName:eo}=a,{importNode:K}=l;let G={};r.isSupported=typeof mM=="function"&&typeof fe=="function"&&Fe&&Fe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:he,ERB_EXPR:Ee,TMPLIT_EXPR:dt,DATA_ATTR:_e,ARIA_ATTR:Ue,IS_SCRIPT_OR_DATA:Je,ATTR_WHITESPACE:xt,CUSTOM_ELEMENT:no}=O_;let{IS_ALLOWED_URI:Do}=O_,ko=null;const fn=an({},[...hp,...S_,...k_,...Vw,...Dg]);let vn=null;const Ac=an({},[...pM,...__,...Il,...o2]);let Kn=Object.seal(Xy(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Rc=null,yu=null,$l=!0,zp=!0,Mx=!1,Ax=!0,jg=!1,l5=!0,le=!1,$t=!1,Mt=!1,Sn=!1,oa=!1,Qr=!1,xm=!0,Bc=!1;const Cm="user-content-";let xa=!0,Rx=!1,N1={},$v=null;const T$=an({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let D$=null;const M$=an({},["audio","video","img","source","image","track"]);let v$=null;const A$=an({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sL="http://www.w3.org/1998/Math/MathML",aL="http://www.w3.org/2000/svg",L1="http://www.w3.org/1999/xhtml";let mk=L1,b$=!1,y$=null;const aj=an({},[sL,aL,L1],Fw);let c5=null;const ij=["application/xhtml+xml","text/html"],lj="text/html";let wi=null,gk=null;const cj=a.createElement("form"),R$=function(de){return de instanceof RegExp||de instanceof Function},x$=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gk&&gk===de)){if((!de||typeof de!="object")&&(de={}),de=t1(de),c5=ij.indexOf(de.PARSER_MEDIA_TYPE)===-1?lj:de.PARSER_MEDIA_TYPE,wi=c5==="application/xhtml+xml"?Fw:zw,ko=lu(de,"ALLOWED_TAGS")?an({},de.ALLOWED_TAGS,wi):fn,vn=lu(de,"ALLOWED_ATTR")?an({},de.ALLOWED_ATTR,wi):Ac,y$=lu(de,"ALLOWED_NAMESPACES")?an({},de.ALLOWED_NAMESPACES,Fw):aj,v$=lu(de,"ADD_URI_SAFE_ATTR")?an(t1(A$),de.ADD_URI_SAFE_ATTR,wi):A$,D$=lu(de,"ADD_DATA_URI_TAGS")?an(t1(M$),de.ADD_DATA_URI_TAGS,wi):M$,$v=lu(de,"FORBID_CONTENTS")?an({},de.FORBID_CONTENTS,wi):T$,Rc=lu(de,"FORBID_TAGS")?an({},de.FORBID_TAGS,wi):{},yu=lu(de,"FORBID_ATTR")?an({},de.FORBID_ATTR,wi):{},N1=lu(de,"USE_PROFILES")?de.USE_PROFILES:!1,$l=de.ALLOW_ARIA_ATTR!==!1,zp=de.ALLOW_DATA_ATTR!==!1,Mx=de.ALLOW_UNKNOWN_PROTOCOLS||!1,Ax=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,jg=de.SAFE_FOR_TEMPLATES||!1,l5=de.SAFE_FOR_XML!==!1,le=de.WHOLE_DOCUMENT||!1,Sn=de.RETURN_DOM||!1,oa=de.RETURN_DOM_FRAGMENT||!1,Qr=de.RETURN_TRUSTED_TYPE||!1,Mt=de.FORCE_BODY||!1,xm=de.SANITIZE_DOM!==!1,Bc=de.SANITIZE_NAMED_PROPS||!1,xa=de.KEEP_CONTENT!==!1,Rx=de.IN_PLACE||!1,Do=de.ALLOWED_URI_REGEXP||bM,mk=de.NAMESPACE||L1,Kn=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&R$(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Kn.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&R$(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Kn.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Kn.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jg&&(zp=!1),oa&&(Sn=!0),N1&&(ko=an({},Dg),vn=[],N1.html===!0&&(an(ko,hp),an(vn,pM)),N1.svg===!0&&(an(ko,S_),an(vn,__),an(vn,o2)),N1.svgFilters===!0&&(an(ko,k_),an(vn,__),an(vn,o2)),N1.mathMl===!0&&(an(ko,Vw),an(vn,Il),an(vn,o2))),de.ADD_TAGS&&(ko===fn&&(ko=t1(ko)),an(ko,de.ADD_TAGS,wi)),de.ADD_ATTR&&(vn===Ac&&(vn=t1(vn)),an(vn,de.ADD_ATTR,wi)),de.ADD_URI_SAFE_ATTR&&an(v$,de.ADD_URI_SAFE_ATTR,wi),de.FORBID_CONTENTS&&($v===T$&&($v=t1($v)),an($v,de.FORBID_CONTENTS,wi)),xa&&(ko["#text"]=!0),le&&an(ko,["html","head","body"]),ko.table&&(an(ko,["tbody"]),delete Rc.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw e2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw e2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ne=de.TRUSTED_TYPES_POLICY,be=Ne.createHTML("")}else Ne===void 0&&(Ne=yH(F,u)),Ne!==null&&typeof be=="string"&&(be=Ne.createHTML(""));el&&el(de),gk=de}},B$=an({},["mi","mo","mn","ms","mtext"]),N$=an({},["annotation-xml"]),dj=an({},["title","style","font","a","script"]),L$=an({},[...S_,...k_,...o1]),H$=an({},[...Vw,...hH]),uj=function(de){let Qt=fe(de);(!Qt||!Qt.tagName)&&(Qt={namespaceURI:mk,tagName:"template"});const Ht=zw(de.tagName),mr=zw(Qt.tagName);return y$[de.namespaceURI]?de.namespaceURI===aL?Qt.namespaceURI===L1?Ht==="svg":Qt.namespaceURI===sL?Ht==="svg"&&(mr==="annotation-xml"||B$[mr]):!!L$[Ht]:de.namespaceURI===sL?Qt.namespaceURI===L1?Ht==="math":Qt.namespaceURI===aL?Ht==="math"&&N$[mr]:!!H$[Ht]:de.namespaceURI===L1?Qt.namespaceURI===aL&&!N$[mr]||Qt.namespaceURI===sL&&!B$[mr]?!1:!H$[Ht]&&(dj[Ht]||!L$[Ht]):!!(c5==="application/xhtml+xml"&&y$[de.namespaceURI]):!1},Bx=function(de){Qy(r.removed,{element:de});try{fe(de).removeChild(de)}catch{De(de)}},d5=function(de,Qt){try{Qy(r.removed,{attribute:Qt.getAttributeNode(de),from:Qt})}catch{Qy(r.removed,{attribute:null,from:Qt})}if(Qt.removeAttribute(de),de==="is"&&!vn[de])if(Sn||oa)try{Bx(Qt)}catch{}else try{Qt.setAttribute(de,"")}catch{}},I$=function(de){let Qt=null,Ht=null;if(Mt)de="<remove></remove>"+de;else{const Ca=w_(de,/^[\r\n\t ]+/);Ht=Ca&&Ca[0]}c5==="application/xhtml+xml"&&mk===L1&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const mr=Ne?Ne.createHTML(de):de;if(mk===L1)try{Qt=new B().parseFromString(mr,c5)}catch{}if(!Qt||!Qt.documentElement){Qt=Fe.createDocument(mk,"template",null);try{Qt.documentElement.innerHTML=b$?be:mr}catch{}}const cl=Qt.body||Qt.documentElement;return de&&Ht&&cl.insertBefore(a.createTextNode(Ht),cl.childNodes[0]||null),mk===L1?eo.call(Qt,le?"html":"body")[0]:le?Qt.documentElement:cl},P$=function(de){return et.call(de.ownerDocument||de,de,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT|_.SHOW_PROCESSING_INSTRUCTION|_.SHOW_CDATA_SECTION,null)},z$=function(de){return de instanceof A&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof M)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},F$=function(de){return typeof x=="function"&&de instanceof x},H1=function(de,Qt,Ht){G[de]&&Pw(G[de],mr=>{mr.call(r,Qt,Ht,gk)})},V$=function(de){let Qt=null;if(H1("beforeSanitizeElements",de,null),z$(de))return Bx(de),!0;const Ht=wi(de.nodeName);if(H1("uponSanitizeElement",de,{tagName:Ht,allowedTags:ko}),de.hasChildNodes()&&!F$(de.firstElementChild)&&tl(/<[/\w]/g,de.innerHTML)&&tl(/<[/\w]/g,de.textContent)||de.nodeType===av.progressingInstruction||l5&&de.nodeType===av.comment&&tl(/<[/\w]/g,de.data))return Bx(de),!0;if(!ko[Ht]||Rc[Ht]){if(!Rc[Ht]&&U$(Ht)&&(Kn.tagNameCheck instanceof RegExp&&tl(Kn.tagNameCheck,Ht)||Kn.tagNameCheck instanceof Function&&Kn.tagNameCheck(Ht)))return!1;if(xa&&!$v[Ht]){const mr=fe(de)||de.parentNode,cl=ee(de)||de.childNodes;if(cl&&mr){const Ca=cl.length;for(let I1=Ca-1;I1>=0;--I1){const wm=ce(cl[I1],!0);wm.__removalCount=(de.__removalCount||0)+1,mr.insertBefore(wm,Q(de))}}}return Bx(de),!0}return de instanceof C&&!uj(de)||(Ht==="noscript"||Ht==="noembed"||Ht==="noframes")&&tl(/<\/no(script|embed|frames)/i,de.innerHTML)?(Bx(de),!0):(jg&&de.nodeType===av.text&&(Qt=de.textContent,Pw([he,Ee,dt],mr=>{Qt=Jy(Qt,mr," ")}),de.textContent!==Qt&&(Qy(r.removed,{element:de.cloneNode()}),de.textContent=Qt)),H1("afterSanitizeElements",de,null),!1)},Z$=function(de,Qt,Ht){if(xm&&(Qt==="id"||Qt==="name")&&(Ht in a||Ht in cj))return!1;if(!(zp&&!yu[Qt]&&tl(_e,Qt))&&!($l&&tl(Ue,Qt))){if(!vn[Qt]||yu[Qt]){if(!(U$(de)&&(Kn.tagNameCheck instanceof RegExp&&tl(Kn.tagNameCheck,de)||Kn.tagNameCheck instanceof Function&&Kn.tagNameCheck(de))&&(Kn.attributeNameCheck instanceof RegExp&&tl(Kn.attributeNameCheck,Qt)||Kn.attributeNameCheck instanceof Function&&Kn.attributeNameCheck(Qt))||Qt==="is"&&Kn.allowCustomizedBuiltInElements&&(Kn.tagNameCheck instanceof RegExp&&tl(Kn.tagNameCheck,Ht)||Kn.tagNameCheck instanceof Function&&Kn.tagNameCheck(Ht))))return!1}else if(!v$[Qt]&&!tl(Do,Jy(Ht,xt,""))&&!((Qt==="src"||Qt==="xlink:href"||Qt==="href")&&de!=="script"&&dH(Ht,"data:")===0&&D$[de])&&!(Mx&&!tl(Je,Jy(Ht,xt,"")))&&Ht)return!1}return!0},U$=function(de){return de!=="annotation-xml"&&w_(de,no)},W$=function(de){H1("beforeSanitizeAttributes",de,null);const{attributes:Qt}=de;if(!Qt)return;const Ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vn};let mr=Qt.length;for(;mr--;){const cl=Qt[mr],{name:Ca,namespaceURI:I1,value:wm}=cl,Fp=wi(Ca);let dl=Ca==="value"?wm:uH(wm);const gj=dl;if(Ht.attrName=Fp,Ht.attrValue=dl,Ht.keepAttr=!0,Ht.forceKeepAttr=void 0,H1("uponSanitizeAttribute",de,Ht),dl=Ht.attrValue,Ht.forceKeepAttr)continue;if(!Ht.keepAttr){d5(Ca,de);continue}if(!Ax&&tl(/\/>/i,dl)){d5(Ca,de);continue}jg&&Pw([he,Ee,dt],hj=>{dl=Jy(dl,hj," ")});const $$=wi(de.nodeName);if(!Z$($$,Fp,dl)){d5(Ca,de);continue}if(Bc&&(Fp==="id"||Fp==="name")&&(d5(Ca,de),dl=Cm+dl),l5&&tl(/((--!?|])>)|<\/(style|title)/i,dl)){d5(Ca,de);continue}if(Ne&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!I1)switch(F.getAttributeType($$,Fp)){case"TrustedHTML":{dl=Ne.createHTML(dl);break}case"TrustedScriptURL":{dl=Ne.createScriptURL(dl);break}}if(dl!==gj)try{I1?de.setAttributeNS(I1,Ca,dl):de.setAttribute(Ca,dl),z$(de)?Bx(de):hM(r.removed)}catch{}}H1("afterSanitizeAttributes",de,null)},mj=function de(Qt){let Ht=null;const mr=P$(Qt);for(H1("beforeSanitizeShadowDOM",Qt,null);Ht=mr.nextNode();)H1("uponSanitizeShadowNode",Ht,null),!V$(Ht)&&(Ht.content instanceof h&&de(Ht.content),W$(Ht));H1("afterSanitizeShadowDOM",Qt,null)};return r.sanitize=function(de){let Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=null,mr=null,cl=null,Ca=null;if(b$=!de,b$&&(de="<!-->"),typeof de!="string"&&!F$(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw e2("dirty is not a string, aborting")}else throw e2("toString is not a function");if(!r.isSupported)return de;if($t||x$(Qt),r.removed=[],typeof de=="string"&&(Rx=!1),Rx){if(de.nodeName){const Fp=wi(de.nodeName);if(!ko[Fp]||Rc[Fp])throw e2("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof x)Ht=I$("<!---->"),mr=Ht.ownerDocument.importNode(de,!0),mr.nodeType===av.element&&mr.nodeName==="BODY"||mr.nodeName==="HTML"?Ht=mr:Ht.appendChild(mr);else{if(!Sn&&!jg&&!le&&de.indexOf("<")===-1)return Ne&&Qr?Ne.createHTML(de):de;if(Ht=I$(de),!Ht)return Sn?null:Qr?be:""}Ht&&Mt&&Bx(Ht.firstChild);const I1=P$(Rx?de:Ht);for(;cl=I1.nextNode();)V$(cl)||(cl.content instanceof h&&mj(cl.content),W$(cl));if(Rx)return de;if(Sn){if(oa)for(Ca=ct.call(Ht.ownerDocument);Ht.firstChild;)Ca.appendChild(Ht.firstChild);else Ca=Ht;return(vn.shadowroot||vn.shadowrootmode)&&(Ca=K.call(l,Ca,!0)),Ca}let wm=le?Ht.outerHTML:Ht.innerHTML;return le&&ko["!doctype"]&&Ht.ownerDocument&&Ht.ownerDocument.doctype&&Ht.ownerDocument.doctype.name&&tl(Uw,Ht.ownerDocument.doctype.name)&&(wm="<!DOCTYPE "+Ht.ownerDocument.doctype.name+`>
`+wm),jg&&Pw([he,Ee,dt],Fp=>{wm=Jy(wm,Fp," ")}),Ne&&Qr?Ne.createHTML(wm):wm},r.setConfig=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x$(de),$t=!0},r.clearConfig=function(){gk=null,$t=!1},r.isValidAttribute=function(de,Qt,Ht){gk||x$({});const mr=wi(de),cl=wi(Qt);return Z$(mr,cl,Ht)},r.addHook=function(de,Qt){typeof Qt=="function"&&(G[de]=G[de]||[],Qy(G[de],Qt))},r.removeHook=function(de){if(G[de])return hM(G[de])},r.removeHooks=function(de){G[de]&&(G[de]=[])},r.removeAllHooks=function(){G={}},r}var xH=T_();const Ww=t=>xH().sanitize(t);var ol=tinymce.util.Tools.resolve("tinymce.util.I18n");const CH={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},xM="temporary-placeholder",D_=t=>()=>ot(t,xM).getOr("!not found!"),n2=(t,r)=>{const a=t.toLowerCase();if(ol.isRtl()){const l=es(a,"-rtl");return bo(r,l)?l:a}else return a},CM=(t,r)=>ot(r,n2(t,r)),iv=(t,r)=>{const a=r();return CM(t,a).getOrThunk(D_(a))},$w=(t,r,a)=>{const l=r();return CM(t,l).or(a).getOrThunk(D_(l))},wM=t=>ol.isRtl()?bo(CH,t):!1,jw=()=>Yt("add-focusable",[wn(t=>{Wd(t.element,"svg").each(r=>W(r,"focusable","false"))})]),SM=(t,r,a,l)=>{var u,h;const v=wM(r)?["tox-icon--flip"]:[],x=ot(a,n2(r,a)).or(l).getOrThunk(D_(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(v),innerHtml:x},behaviours:We([...(h=t.behaviours)!==null&&h!==void 0?h:[],jw()])}},fd=(t,r,a,l=E.none())=>SM(r,t,a(),l),wH=(t,r,a)=>{const l=a(),u=It(t,h=>bo(l,n2(h,l)));return SM(r,u.getOr(xM),l,E.none())},SH={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},r2=vi({name:"Notification",factory:t=>{const r=Io({dom:dm(`<p>${Ww(t.translationProvider(t.text))}</p>`),behaviours:We([Zt.config({})])}),a=A=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${A}%`}}}),l=A=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${A}%`}}),u=Io({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:We([Zt.config({})])}),h={updateProgress:(A,B)=>{A.getSystem().isConnected()&&u.getOpt(A).each(F=>{Zt.set(F,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(B)]},l(B)])})},updateText:(A,B)=>{if(A.getSystem().isConnected()){const F=r.get(A);Zt.set(F,[tr(B)])}}},v=Bt([t.icon.toArray(),t.level.toArray(),t.level.bind(A=>E.from(SH[A])).toArray()]),x=Io(Lr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[fd("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:A=>{t.onAction(A)}})),C=wH(v,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),_={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:We([Zt.config({})])},M=[C,_];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(A=>["tox-notification","tox-notification--in",`tox-notification--${A}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:We([Lt.config({}),Yt("notification-events",[Re(as(),A=>{x.getOpt(A).each(Lt.focus)})])]),components:M.concat(t.progress?[u.asSpec()]:[]).concat(t.closeButton?[x.asSpec()]:[]),apis:h}},configFields:[_o("level"),xe("progress"),_o("icon"),xe("onAction"),xe("text"),xe("iconProvider"),xe("translationProvider"),Wr("closeButton",!0)],apis:{updateProgress:(t,r,a)=>{t.updateProgress(r,a)},updateText:(t,r,a)=>{t.updateText(r,a)}}});var kM=(t,r,a)=>{const l=r.backstage.shared,u=()=>{const h=Nn(Ke.fromDom(t.getContentAreaContainer())),v=bs(),x=Aa(v.x,h.x,h.right),C=Aa(v.y,h.y,h.bottom),_=Math.max(h.right,v.right),M=Math.max(h.bottom,v.bottom);return E.some(Jn(x,C,_-x,M-C))};return{open:(h,v)=>{const x=()=>{v(),pn.hide(_)},C=Cs(r2.sketch({text:h.text,level:zo(["success","error","warning","warn","info"],h.type)?h.type:void 0,progress:h.progressBar===!0,icon:h.icon,closeButton:h.closeButton,onAction:x,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),_=Cs(pn.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(_),Os(h.timeout)&&h.timeout>0&&Iw.setEditorTimeout(t,()=>{x()},h.timeout);const M={close:x,reposition:()=>{const A=ji(C),B={maxHeightFunction:gg()},F=t.notificationManager.getNotifications();if(F[0]===M){const oe={...l.anchors.banner(),overrides:B};pn.showWithinBounds(_,A,{anchor:oe},u)}else Le(F,M).each(oe=>{const ce=F[oe-1].getEl(),De={type:"node",root:fr(),node:E.some(Ke.fromDom(ce)),overrides:B,layouts:{onRtl:()=>[Mr],onLtr:()=>[Mr]}};pn.showWithinBounds(_,A,{anchor:De},u)})},text:A=>{r2.updateText(C,A)},settings:h,getEl:()=>C.element.dom,progressBar:{value:A=>{r2.updateProgress(C,A)}}};return M},close:h=>{h.close()},getArgs:h=>h.settings}},n1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M_=tinymce.util.Tools.resolve("tinymce.EditorManager"),lv=tinymce.util.Tools.resolve("tinymce.Env"),Pl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Pl||(Pl={}));var s2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(s2||(s2={}));const tn=t=>r=>r.options.get(t),a2=t=>r=>E.from(t(r)),A_=t=>{const r=lv.deviceType.isPhone(),a=lv.deviceType.isTablet()||r,l=t.options.register,u=v=>Pt(v)||v===!1,h=v=>Pt(v)||Os(v);l("skin",{processor:v=>Pt(v)||v===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:h,default:n1.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:v=>Pt(v)||gr(v),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:v=>gr(v)||Pt(v)||Ut(v)?{value:v,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Xo(9,v=>{l("toolbar"+(v+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:s2.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:v=>v==="both"||gr(v),default:!lv.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},_M=tn("readonly"),R_=tn("height"),i2=tn("width"),Gw=a2(tn("min_width")),Kw=a2(tn("min_height")),Xw=a2(tn("max_width")),l2=a2(tn("max_height")),EM=a2(tn("style_formats")),OM=tn("style_formats_merge"),TM=tn("style_formats_autohide"),DM=tn("content_langs"),MM=tn("removed_menuitems"),r1=tn("toolbar_mode"),qw=tn("toolbar_groups"),B_=tn("toolbar_location"),Yw=tn("fixed_toolbar_container"),kH=tn("fixed_toolbar_container_target"),AM=tn("toolbar_persist"),RM=tn("toolbar_sticky_offset"),BM=tn("menubar"),Qw=tn("toolbar"),NM=tn("file_picker_callback"),N_=tn("file_picker_validator_handler"),LM=tn("font_size_input_default_unit"),HM=tn("file_picker_types"),Jw=tn("typeahead_urls"),pp=tn("anchor_top"),IM=tn("anchor_bottom"),PM=tn("draggable_modal"),eS=tn("statusbar"),L_=tn("elementpath"),H_=tn("branding"),zM=tn("resize"),I_=tn("paste_as_text"),FM=tn("sidebar_show"),P_=tn("promotion"),z_=tn("help_accessibility"),tS=tn("default_font_stack"),F_=t=>t.options.get("skin")===!1,c2=t=>t.options.get("menubar")!==!1,oS=t=>{const r=t.options.get("skin_url");if(F_(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const a=t.options.get("skin");return M_.baseURL+"/skins/ui/"+a}},fp=t=>E.from(t.options.get("skin_url")),VM=t=>t.options.get("line_height_formats").split(" "),nS=t=>{const r=Qw(t),a=Pt(r),l=Ut(r)&&r.length>0;return!s1(t)&&(l||a||r===!0)},d2=t=>{const r=Xo(9,l=>t.options.get("toolbar"+(l+1))),a=qo(r,Pt);return At(a.length>0,a)},s1=t=>d2(t).fold(()=>{const r=Qw(t);return _n(r,Pt)&&r.length>0},Be),V_=t=>B_(t)===s2.bottom,rS=t=>{var r;if(!t.inline)return E.none();const a=(r=Yw(t))!==null&&r!==void 0?r:"";if(a.length>0)return hn(fr(),a);const l=kH(t);return bn(l)?E.some(Ke.fromDom(l)):E.none()},cv=t=>t.inline&&rS(t).isSome(),Z_=t=>rS(t).getOrThunk(()=>Vn(zr(Ke.fromDom(t.getElement())))),u2=t=>t.inline&&!c2(t)&&!nS(t)&&!s1(t),m2=t=>(t.options.get("toolbar_sticky")||t.inline)&&!cv(t)&&!u2(t),vp=t=>!cv(t)&&t.options.get("ui_mode")==="split",ZM=t=>{const r=t.options.get("menu");return Yo(r,a=>({...a,items:a.items}))};var _H=Object.freeze({__proto__:null,get ToolbarMode(){return Pl},get ToolbarLocation(){return s2},register:A_,getSkinUrl:oS,getSkinUrlOption:fp,isReadOnly:_M,isSkinDisabled:F_,getHeightOption:R_,getWidthOption:i2,getMinWidthOption:Gw,getMinHeightOption:Kw,getMaxWidthOption:Xw,getMaxHeightOption:l2,getUserStyleFormats:EM,shouldMergeStyleFormats:OM,shouldAutoHideStyleFormats:TM,getLineHeightFormats:VM,getContentLanguages:DM,getRemovedMenuItems:MM,isMenubarEnabled:c2,isMultipleToolbars:s1,isToolbarEnabled:nS,isToolbarPersist:AM,getMultipleToolbarsOption:d2,getUiContainer:Z_,useFixedContainer:cv,isSplitUiMode:vp,getToolbarMode:r1,isDraggableModal:PM,isDistractionFree:u2,isStickyToolbar:m2,getStickyToolbarOffset:RM,getToolbarLocation:B_,isToolbarLocationBottom:V_,getToolbarGroups:qw,getMenus:ZM,getMenubar:BM,getToolbar:Qw,getFilePickerCallback:NM,getFilePickerTypes:HM,useTypeaheadUrls:Jw,getAnchorTop:pp,getAnchorBottom:IM,getFilePickerValidatorHandler:N_,getFontSizeInputDefaultUnit:LM,useStatusBar:eS,useElementPath:L_,promotionEnabled:P_,useBranding:H_,getResize:zM,getPasteAsText:I_,getSidebarShow:FM,useHelpAccessibility:z_,getDefaultFontStack:tS});const UM="[data-mce-autocompleter]",WM=t=>Ml(t,UM),EH=t=>hn(t,UM),OH={setup:(t,r)=>{const a=(u,h)=>{St(u,Ui(),{raw:h})},l=()=>t.getMenu().bind(wo.getHighlighted);r.on("keydown",u=>{const h=u.which;t.isActive()&&(t.isMenuOpen()?h===13?(l().each(Yc),u.preventDefault()):h===40?(l().fold(()=>{t.getMenu().each(wo.highlightFirst)},v=>{a(v,u)}),u.preventDefault(),u.stopImmediatePropagation()):(h===37||h===38||h===39)&&l().each(v=>{a(v,u),u.preventDefault(),u.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),r.on("NodeChange",u=>{t.isActive()&&!t.isProcessingAction()&&WM(Ke.fromDom(u.element)).isNone()&&t.cancelIfNecessary()})}};var U_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(U_||(U_={}));var cu=U_;const W_="tox-menu-nav__js",sS="tox-collection__item",g2="tox-swatch",TH={normal:W_,color:g2},$M="tox-collection__item--enabled",DH="tox-collection__group-heading",$_="tox-collection__item-icon",j_="tox-collection__item-label",MH="tox-collection__item-accessory",jM="tox-collection__item-caret",AH="tox-collection__item-checkmark",h2="tox-collection__item--active",GM="tox-collection__item-container",G_="tox-collection__item-container--column",KM="tox-collection__item-container--row",RH="tox-collection__item-container--align-right",BH="tox-collection__item-container--align-left",NH="tox-collection__item-container--valign-top",LH="tox-collection__item-container--valign-middle",HH="tox-collection__item-container--valign-bottom",XM=t=>ot(TH,t).getOr(W_),IH=t=>t==="color"?"tox-swatches":"tox-menu",K_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:IH(t),tieredMenu:"tox-tiered-menu"}),a1=t=>{const r=K_(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:XM(t)}},PH=(t,r,a)=>{const l=K_(a);return{tag:"div",classes:Bt([[l.menu,`tox-menu-${r}-column`],t?[l.hasIcons]:[]])}},zH=[Tg.parts.items({})],aS=(t,r,a)=>{const l=K_(a);return{dom:{tag:"div",classes:Bt([[l.tieredMenu]])},markers:a1(a)}},p2=se([_o("data"),ge("inputAttributes",{}),ge("inputStyles",{}),ge("tag","input"),ge("inputClasses",[]),mo("onSetValue"),ge("styles",{}),ge("eventOrder",{}),In("inputBehaviours",[nt,Lt]),ge("selectOnFocus",!0)]),qM=t=>We([Lt.config({onFocus:t.selectOnFocus?r=>{const a=r.element,l=cs(a);a.dom.setSelectionRange(0,l.length)}:J})]),X_=t=>({...qM(t),...Rr(t.inputBehaviours,[nt.config({store:{mode:"manual",...t.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>cs(r.element),setValue:(r,a)=>{cs(r.element)!==a&&Zd(r.element,a)}},onSetValue:t.onSetValue})])}),YM=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),FH=(t,r)=>({uid:t.uid,dom:YM(t),components:[],behaviours:X_(t),eventOrder:t.eventOrder}),i1=vi({name:"Input",configFields:p2(),factory:FH}),q_=gt("refetch-trigger-event"),QM=gt("redirect-menu-item-interaction"),iS="tox-menu__searcher",dv=t=>hn(t.element,`.${iS}`).bind(r=>t.getSystem().getByDom(r).toOptional()),Y_=dv,Q_=(t,r)=>{nt.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},f2=t=>{const r=nt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:a,selectionEnd:l}},JM=(t,r)=>{Tt(r.element,"id").each(a=>W(t.element,"aria-activedescendant",a))},um=t=>{const r=(u,h)=>(h.cut(),E.none()),a=(u,h)=>{const v={interactionEvent:h.event,eventType:h.event.raw.type};return St(u,QM,v),E.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[sS]},components:[i1.sketch({inputClasses:[iS,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:We([Yt(l,[Re(Ym(),u=>{Eo(u,q_)}),Re(Ui(),(u,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),_t.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,_t.name()]}})]}},uv="tox-collection--results__js",eA=t=>{var r;return t.dom?{...t,dom:{...t.dom,attributes:{...(r=t.dom.attributes)!==null&&r!==void 0?r:{},id:gt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},J_=(t,r)=>a=>{const l=lr(a,r);return Ie(l,u=>({dom:t,components:u}))},VH=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Tg.parts.items({preprocess:t!=="auto"?J_({tag:"div",classes:["tox-swatches__row"]},t):so})]}]}),ZH=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Tg.parts.items({preprocess:J_({tag:"div",classes:["tox-collection__group"]},t)})]}),mv=(t,r)=>{const a=[];let l=[];return at(t,(u,h)=>{r(u,h)?(l.length>0&&a.push(l),l=[],(bo(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)}),l.length>0&&a.push(l),Ie(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},eE=(t,r,a)=>Tg.parts.items({preprocess:l=>{const u=Ie(l,a);return t!=="auto"&&t>1?J_({tag:"div",classes:["tox-collection__group"]},t)(u):mv(u,(h,v)=>r[v].type==="separator")}}),tE=(t,r,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[eE(t,r,so)]}),oE=(t,r,a=!0)=>{const l=gt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",uv].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[eE(t,r,eA)]}},UH=(t,r,a)=>{const l=gt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[um({i18n:ol.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],uv],attributes:{id:l}},components:[eE(t,r,eA)]}]}},nE=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Tg.parts.items({preprocess:a=>mv(a,(l,u)=>t[u].type==="separator")})]}),gv=t=>xr(t,r=>"icon"in r&&r.icon!==void 0),Mg=t=>(console.error(ii(t)),console.log(t),E.none()),tA=(t,r,a,l,u)=>{const h=nE(a);return{value:t,dom:h.dom,components:h.components,items:a}},lS=(t,r,a,l,u)=>{const h=()=>u.menuType!=="searchable"?tE(l,a):u.searchMode.searchMode==="search-with-field"?UH(l,a,u.searchMode):oE(l,a);if(u.menuType==="color"){const v=VH(l);return{value:t,dom:v.dom,components:v.components,items:a}}else if(u.menuType==="normal"&&l==="auto"){const v=tE(l,a);return{value:t,dom:v.dom,components:v.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const v=h();return{value:t,dom:v.dom,components:v.components,items:a}}else if(u.menuType==="listpreview"&&l!=="auto"){const v=ZH(l);return{value:t,dom:v.dom,components:v.components,items:a}}else return{value:t,dom:PH(r,l,u.menuType),components:zH,items:a}},ur=dn("type"),rE=dn("name"),sE=dn("label"),Ag=dn("text"),oA=dn("title"),nA=dn("icon"),hv=dn("value"),rA=kl("fetch"),WH=kl("getSubmenuItems"),l1=kl("onAction"),v2=kl("onItemAction"),bp=ar("onSetup",()=>J),$H=ys("name"),yp=ys("text"),zl=ys("icon"),cS=ys("tooltip"),aE=ys("label"),sA=ys("shortcut"),aA=Km("select"),b2=Wr("active",!1),iA=Wr("borderless",!1),vd=Wr("enabled",!0),dS=Wr("primary",!1),iE=t=>ge("columns",t),y2=ge("meta",{}),x2=ar("onAction",J),xp=t=>Ta("type",t),uS=t=>Co("name","name",Pi(()=>gt(`${t}-name`)),ss),lA=t=>Co("value","value",Pi(()=>gt(`${t}-value`)),ua()),cA=it([ur,yp]),lE=t=>Ae("separatormenuitem",cA,t),jH=it([xp("autocompleteitem"),b2,vd,y2,hv,yp,zl]),dA=t=>Ae("Autocompleter.Separator",cA,t),uA=t=>Ae("Autocompleter.Item",jH,t),mm=[vd,cS,zl,yp,bp],GH=it([ur,l1].concat(mm)),mS=t=>Ae("toolbarbutton",GH,t),pv=[b2].concat(mm),KH=it(pv.concat([ur,l1])),cE=t=>Ae("ToggleButton",KH,t),dE=[ar("predicate",Ge),_l("scope","node",["node","editor"]),_l("position","selection",["node","selection","line"])],mA=mm.concat([xp("contextformbutton"),dS,l1,Ns("original",so)]),uE=pv.concat([xp("contextformbutton"),dS,l1,Ns("original",so)]),gA=mm.concat([xp("contextformbutton")]),XH=pv.concat([xp("contextformtogglebutton")]),hA=yr("type",{contextformbutton:mA,contextformtogglebutton:uE}),pA=it([xp("contextform"),ar("initValue",se("")),aE,li("commands",hA),Vi("launch",yr("type",{contextformbutton:gA,contextformtogglebutton:XH}))].concat(dE)),fA=t=>Ae("ContextForm",pA,t),vA=it([xp("contexttoolbar"),dn("items")].concat(dE)),qH=t=>Ae("ContextToolbar",vA,t),bA=[ur,dn("src"),ys("alt"),cc("classes",[],ss)],YH=it(bA),QH=[ur,Ag,$H,cc("classes",["tox-collection__item-label"],ss)],JH=it(QH),yA=zt(()=>Fi("type",{cardimage:YH,cardtext:JH,cardcontainer:xA})),xA=it([ur,Ta("direction","horizontal"),Ta("align","left"),Ta("valign","middle"),li("items",yA)]),gm=[vd,yp,sA,lA("menuitem"),y2],CA=it([ur,aE,li("items",yA),bp,x2].concat(gm)),eI=t=>Ae("cardmenuitem",CA,t),tI=it([ur,b2,zl].concat(gm)),oI=t=>Ae("choicemenuitem",tI,t),wA=[ur,dn("fancytype"),x2],nI=[ge("initData",{})].concat(wA),gS=[Km("select"),ah("initData",{},[Wr("allowCustomColors",!0),Ta("storageKey","default"),Px("colors",ua())])].concat(wA),rI=yr("fancytype",{inserttable:nI,colorswatch:gS}),SA=t=>Ae("fancymenuitem",rI,t),sI=it([ur,bp,x2,zl].concat(gm)),kA=t=>Ae("menuitem",sI,t),_A=it([ur,WH,bp,zl].concat(gm)),aI=t=>Ae("nestedmenuitem",_A,t),EA=it([ur,zl,b2,bp,l1].concat(gm)),OA=t=>Ae("togglemenuitem",EA,t),hS=(t,r,a)=>{const l=_s(t.element,"."+a);if(l.length>0){const u=nn(l,h=>{const v=h.dom.getBoundingClientRect().top,x=l[0].dom.getBoundingClientRect().top;return Math.abs(v-x)>r}).getOr(l.length);return E.some({numColumns:u,numRows:Math.ceil(l.length/u)})}else return E.none()},mE=(t,r)=>We([Yt(t,r)]),C2={namedEvents:mE,unnamedEvents:t=>mE(gt("unnamed-events"),t)},TA=gt("tooltip.exclusive"),w2=gt("tooltip.show"),S2=gt("tooltip.hide"),gE=(t,r,a)=>{t.getSystem().broadcastOn([TA],{})};var DA=Object.freeze({__proto__:null,hideAllExclusive:gE,setComponents:(t,r,a,l)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&Zt.set(u,l)})}}),iI=Object.freeze({__proto__:null,events:(t,r)=>{const a=u=>{r.getTooltip().each(h=>{eu(h),t.onHide(u,h),r.clearTooltip()}),r.clearTimer()},l=u=>{if(!r.isShowing()){gE(u);const h=t.lazySink(u).getOrDie(),v=u.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Jo(t.mode==="normal"?[Re($a(),x=>{Eo(u,w2)}),Re(G1(),x=>{Eo(u,S2)})]:[]),behaviours:We([Zt.config({})])});r.setTooltip(v),sm(h,v),t.onShow(u,v),Is.position(h,v,{anchor:t.anchor(u)})}};return Jo(Bt([[Re(w2,u=>{r.resetTimer(()=>{l(u)},t.delay)}),Re(S2,u=>{r.resetTimer(()=>{a(u)},t.delay)}),Re(Zu(),(u,h)=>{const v=h;v.universal||zo(v.channels,TA)&&a(u)}),mi(u=>{a(u)})],t.mode==="normal"?[Re(as(),u=>{Eo(u,w2)}),Re(Jm(),u=>{Eo(u,S2)}),Re($a(),u=>{Eo(u,w2)}),Re(G1(),u=>{Eo(u,S2)})]:[Re(ab(),(u,h)=>{Eo(u,w2)}),Re(hh(),u=>{Eo(u,S2)})]]))}}),lI=[xe("lazySink"),xe("tooltipDom"),ge("exclusive",!0),ge("tooltipComponents",[]),ge("delay",300),_l("mode","normal",["normal","follow-highlight"]),ge("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:se([Mr,Ls,us,ks,Ss,ga]),onRtl:se([Mr,Ls,us,ks,Ss,ga])}})),mo("onHide"),mo("onShow")],cI=Object.freeze({__proto__:null,init:()=>{const t=un(),r=un(),a=()=>{t.on(clearTimeout)},l=(h,v)=>{a(),t.set(setTimeout(h,v))},u=se("not-implemented");return Da({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:a,resetTimer:l,readState:u})}});const MA=Gr({fields:lI,name:"tooltipping",active:iI,state:cI,apis:DA}),dI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),hE="silver.readonly",uI=it([Jv("readonly")]),pS=(t,r)=>{const a=t.mainUi.outerContainer.element,l=[t.mainUi.mothership,...t.uiMotherships];r&&at(l,u=>{u.broadcastOn([ld()],{target:a})}),at(l,u=>{u.broadcastOn([hE],{readonly:r})})},fS=(t,r)=>{t.on("init",()=>{t.mode.isReadOnly()&&pS(r,!0)}),t.on("SwitchMode",()=>pS(r,t.mode.isReadOnly())),_M(t)&&t.mode.set("readonly")},Hr=()=>ja.config({channels:{[hE]:{schema:uI,onReceive:(t,r)=>{wt.set(t,r.readonly)}}}}),bd={item:t=>wt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>wt.config({disabled:t}),splitButton:t=>wt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>wt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},vS=(t,r)=>{const a=t.getApi(r);return l=>{l(a)}},Rg=(t,r)=>wn(a=>{vS(t,a)(l=>{const u=t.onSetup(l);ft(u)&&r.set(u)})}),Cp=(t,r)=>mi(a=>vS(t,a)(r.get())),mI=(t,r)=>gi((a,l)=>{vS(t,a)(t.onAction),!t.triggersSubmenu&&r===cu.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Eo(a,sf()),l.stop())}),AA={[ma()]:["disabling","alloy.base.behaviour","toggling","item-events"]},c1=_i,d1=(t,r,a,l)=>{const u=Dt(J);return{type:"item",dom:r.dom,components:c1(r.optComponents),data:t.data,eventOrder:AA,hasSubmenu:t.triggersSubmenu,itemBehaviours:We([Yt("item-events",[mI(t,a),Rg(t,u),Cp(t,u)]),bd.item(()=>!t.enabled||l.isDisabled()),Hr(),Zt.config({})].concat(t.itemBehaviours))}},fv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),RA=t=>{const r=lv.os.isMacOS()||lv.os.isiOS(),a=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},l=t.split("+"),u=Ie(l,h=>{const v=h.toLowerCase().trim();return bo(a,v)?a[v]:h});return r?u.join(""):u.join("+")},pE=(t,r,a=[$_])=>fd(t,{tag:"div",classes:a},r),BA=t=>({dom:{tag:"div",classes:[j_]},components:[tr(ol.translate(t))]}),bS=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),gI=(t,r)=>({dom:{tag:"div",classes:[j_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[tr(ol.translate(r))]}]}),hI=t=>({dom:{tag:"div",classes:[MH]},components:[tr(RA(t))]}),fE=t=>pE("checkmark",t,[AH]),NA=t=>pE("chevron-right",t,[jM]),pI=t=>pE("chevron-down",t,[jM]),fI=(t,r)=>{const a=t.direction==="vertical"?G_:KM,l=t.align==="left"?BH:RH;return{dom:{tag:"div",classes:[GM,a,l,(()=>{switch(t.valign){case"top":return NH;case"middle":return LH;case"bottom":return HH}})()]},components:r}},vI=(t,r,a)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:a.getOr("")}}}),nl=(t,r,a)=>{const l="custom",u="remove",h=t.ariaLabel,v=t.value,x=t.iconContent.map(C=>$w(C,r.icons,a));return{dom:(()=>{const C=g2,_=x.getOr(""),M={tag:"div",attributes:h.map(A=>({title:r.translate(A)})).getOr({}),classes:[C]};return v===l?{...M,tag:"button",classes:[...M.classes,"tox-swatches__picker-btn"],innerHtml:_}:v===u?{...M,classes:[...M.classes,"tox-swatch--remove"],innerHtml:_}:bn(v)?{...M,attributes:{...M.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:_}:M})(),optComponents:[]}},yc=t=>{const r=t.map(a=>({attributes:{title:ol.translate(a),id:gt("menu-item")}})).getOr({});return{tag:"div",classes:[W_,sS],...r}},LA=(t,r,a,l)=>{const u={tag:"div",classes:[$_]},h=A=>fd(A,u,r.icons,l),v=()=>E.some({dom:u}),x=a?t.iconContent.map(h).orThunk(v):E.none(),C=t.checkMark,_=E.from(t.meta).fold(()=>BA,A=>bo(A,"style")?io(gI,A.style):BA),M=t.htmlContent.fold(()=>t.textContent.map(_),A=>E.some(bS(A,[j_])));return{dom:yc(t.ariaLabel),optComponents:[x,M,t.shortcutContent.map(hI),C,t.caret]}},u1=(t,r,a,l=E.none())=>t.presets==="color"?nl(t,r,l):LA(t,r,a,l),yS=(t,r)=>ot(t,"tooltipWorker").map(a=>[MA.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:gg}}),mode:"follow-highlight",onShow:(l,u)=>{a(h=>{MA.setComponents(l,[uC({element:Ke.fromDom(h)})])})}})]).getOr([]),xS=t=>n1.DOM.encode(t),vE=(t,r)=>{const a=ol.translate(t),l=xS(a);if(r.length>0){const u=new RegExp(dI(r),"gi");return l.replace(u,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return l},k2=(t,r,a,l,u,h,v,x=!0)=>{const C=u1({presets:l,textContent:E.none(),htmlContent:a?t.text.map(_=>vE(_,r)):E.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:E.none(),checkMark:E.none(),caret:E.none(),value:t.value},v.providers,x,t.icon);return d1({data:fv(t),enabled:t.enabled,getApi:se({}),onAction:_=>u(t.value,t.meta),onSetup:se(J),triggersSubmenu:!1,itemBehaviours:yS(t.meta,v)},C,h,v.providers)},_2=(t,r)=>Ie(t,a=>{switch(a.type){case"cardcontainer":return fI(a,_2(a.items,r));case"cardimage":return vI(a.src,a.classes,a.alt);case"cardtext":const l=a.name.exists(u=>zo(r.cardText.highlightOn,u))?E.from(r.cardText.matchText).getOr(""):"";return bS(vE(a.text,l),a.classes)}}),bE=(t,r,a,l)=>{const u=v=>({isEnabled:()=>!wt.isDisabled(v),setEnabled:x=>{wt.set(v,!x),at(_s(v.element,"*"),C=>{v.getSystem().getByDom(C).each(_=>{_.hasConfigured(wt)&&wt.set(_,!x)})})}}),h={dom:yc(t.label),optComponents:[E.some({dom:{tag:"div",classes:[GM,KM]},components:_2(t.items,l)})]};return d1({data:fv({text:E.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:E.from(l.itemBehaviours).getOr([])},h,r,a.providers)},HA=(t,r,a,l,u,h,v,x=!0)=>{const C=M=>({setActive:A=>{oo.set(M,A)},isActive:()=>oo.isOn(M),isEnabled:()=>!wt.isDisabled(M),setEnabled:A=>wt.set(M,!A)}),_=u1({presets:a,textContent:r?t.text:E.none(),htmlContent:E.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:E.none(),checkMark:r?E.some(fE(v.icons)):E.none(),caret:E.none(),value:t.value},v,x);return ao(d1({data:fv(t),enabled:t.enabled,getApi:C,onAction:M=>l(t.value),onSetup:M=>(M.setActive(u),J),triggersSubmenu:!1,itemBehaviours:[]},_,h,v),{toggling:{toggleClass:$M,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},vv=G0(Lw(),iu()),IA=t=>({value:bv(t)}),PA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,bi=t=>PA.test(t)||yd.test(t),bv=t=>Ed(t,"#").toUpperCase(),xc=t=>bi(t)?E.some({value:bv(t)}):E.none(),bI=t=>({value:t.value.replace(PA,(r,a,l,u)=>a+a+l+l+u+u)}),ln=t=>{const r=bI(t),a=yd.exec(r.value);return a===null?["FFFFFF","FF","FF","FF"]:a},yE=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},du=t=>{const r=yE(t.red)+yE(t.green)+yE(t.blue);return IA(r)},yv=Math.min,xE=Math.max,xv=Math.round,CE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,yI=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,hm=(t,r,a,l)=>({red:t,green:r,blue:a,alpha:l}),wE=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},SE=t=>{let r,a,l;const u=(t.hue||0)%360;let h=t.saturation/100,v=t.value/100;if(h=xE(0,yv(h,1)),v=xE(0,yv(v,1)),h===0)return r=a=l=xv(255*v),hm(r,a,l,1);const x=u/60,C=v*h,_=C*(1-Math.abs(x%2-1)),M=v-C;switch(Math.floor(x)){case 0:r=C,a=_,l=0;break;case 1:r=_,a=C,l=0;break;case 2:r=0,a=C,l=_;break;case 3:r=0,a=_,l=C;break;case 4:r=_,a=0,l=C;break;case 5:r=C,a=0,l=_;break;default:r=a=l=0}return r=xv(255*(r+M)),a=xv(255*(a+M)),l=xv(255*(l+M)),hm(r,a,l,1)},Cv=t=>{const r=ln(t),a=parseInt(r[1],16),l=parseInt(r[2],16),u=parseInt(r[3],16);return hm(a,l,u,1)},CS=(t,r,a,l)=>{const u=parseInt(t,10),h=parseInt(r,10),v=parseInt(a,10),x=parseFloat(l);return hm(u,h,v,x)},wS=t=>{if(t==="transparent")return E.some(hm(0,0,0,0));const r=CE.exec(t);if(r!==null)return E.some(CS(r[1],r[2],r[3],"1"));const a=yI.exec(t);return a!==null?E.some(CS(a[1],a[2],a[3],a[4])):E.none()},E2=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,zA=hm(255,0,0,1),xI=t=>{t.dispatch("SkinLoaded")},CI=(t,r)=>{t.dispatch("SkinLoadError",r)},wI=t=>{t.dispatch("ResizeEditor")},kE=(t,r)=>{t.dispatch("ResizeContent",r)},FA=(t,r)=>{t.dispatch("ScrollContent",r)},VA=(t,r)=>{t.dispatch("TextColorChange",r)},SI=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},ZA=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),kI=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},UA=(t,r)=>{t.dispatch("StylesTextUpdate",r)},O2=(t,r)=>{t.dispatch("AlignTextUpdate",r)},_I=(t,r)=>{t.dispatch("FontSizeTextUpdate",r)},EI=(t,r)=>{t.dispatch("FontSizeInputTextUpdate",r)},WA=(t,r)=>{t.dispatch("BlocksTextUpdate",r)},$A=(t,r)=>{t.dispatch("FontFamilyTextUpdate",r)},T2=(t,r)=>()=>{t(),r()},Ha=t=>m1(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),OI=(t,r)=>a=>{const l=dg(),u=()=>{a.setActive(t.formatter.match(r));const h=t.formatter.formatChanged(r,a.setActive);l.set(h)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),l.clear()}},SS=(t,r)=>a=>{const l=Ha(t)(a),u=OI(t,r)(a);return()=>{l(),u()}},m1=(t,r,a)=>l=>{const u=()=>a(l),h=()=>{a(l),t.on(r,u)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(r,u)}},jA=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},rl=(t,r)=>()=>t.execCommand(r);var wp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const Cc={},TI=(t,r=10)=>{const a=wp.getItem(t),l=Pt(a)?JSON.parse(a):[],u=(x=>r-x.length<0?x.slice(0,r):x)(l),h=x=>{Le(u,x).each(v),u.unshift(x),u.length>r&&u.pop(),wp.setItem(t,JSON.stringify(u))},v=x=>{u.splice(x,1)};return{add:h,state:()=>u.slice(0)}},kS=t=>ot(Cc,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,a=wp.getItem(r);if(An(a)){const u=wp.getItem("tinymce-custom-colors");wp.setItem(r,bn(u)?u:"[]")}const l=TI(r,10);return Cc[t]=l,l}),GA=t=>Ie(kS(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),_E=(t,r)=>{kS(t).add(r)},D2=(t,r,a)=>({hue:t,saturation:r,value:a}),_S=t=>{let r=0,a=0,l=0;const u=t.red/255,h=t.green/255,v=t.blue/255,x=Math.min(u,Math.min(h,v)),C=Math.max(u,Math.max(h,v));if(x===C)return l=x,D2(0,0,l*100);const _=u===x?h-v:v===x?u-h:v-u;return r=u===x?3:v===x?1:5,r=60*(r-_/(C-x)),a=(C-x)/C,l=C,D2(Math.round(r),Math.round(a*100),Math.round(l*100))},KA=t=>_S(Cv(t)),EE=t=>du(SE(t)),DI=t=>xc(t).orThunk(()=>wS(t).map(du)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,u=l[0],h=l[1],v=l[2],x=l[3];return du(hm(u,h,v,x))}),OE="forecolor",TE="hilitecolor",MI=5,AI=t=>{const r=[];for(let a=0;a<t.length;a+=2)r.push({text:t[a+1],value:"#"+DI(t[a]).value,icon:"checkmark",type:"choiceitem"});return r},uu=t=>r=>r.options.get(t),ES="#000000",XA=t=>{const r=t.options.register,a=u=>_n(u,Pt)?{value:AI(u),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=u=>Os(u)&&u>0?{value:u,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_background",{processor:a}),r("color_map_foreground",{processor:a}),r("color_cols",{processor:l,default:DE(t)}),r("color_cols_foreground",{processor:l,default:qA(t,OE)}),r("color_cols_background",{processor:l,default:qA(t,TE)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:ES}),r("color_default_background",{processor:"string",default:ES})},OS=(t,r)=>r===OE&&t.options.isSet("color_map_foreground")?uu("color_map_foreground")(t):r===TE&&t.options.isSet("color_map_background")?uu("color_map_background")(t):uu("color_map")(t),DE=(t,r="default")=>Math.max(MI,Math.ceil(Math.sqrt(OS(t,r).length))),qA=(t,r)=>{const a=uu("color_cols")(t),l=DE(t,r);return a===DE(t)?l:a},g1=(t,r="default")=>Math.round((()=>r===OE?uu("color_cols_foreground")(t):r===TE?uu("color_cols_background")(t):uu("color_cols")(t))()),YA=uu("custom_colors"),QA=uu("color_default_foreground"),JA=uu("color_default_background"),eR="rgba(0, 0, 0, 0)",ME=t=>wS(t).exists(r=>r.alpha!==0),AE=t=>ch(t,r=>{if(zn(r)){const a=Sr(r,"background-color");return At(ME(a),a)}else return E.none()}).getOr(eR),TS=(t,r)=>{const a=Ke.fromDom(t.selection.getStart()),l=r==="hilitecolor"?AE(a):Sr(a,"color");return wS(l).map(u=>"#"+du(u).value)},tR=(t,r,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:a}),t.nodeChanged()})},RI=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},oR=t=>{t.addCommand("mceApplyTextcolor",(r,a)=>{tR(t,r,a)}),t.addCommand("mceRemoveTextcolor",r=>{RI(t,r)})},nR=t=>{const r="choiceitem",a={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},RE=(t,r,a,l)=>{a==="custom"?iR(t)(u=>{u.each(h=>{_E(r,h),t.execCommand("mceApplyTextcolor",r,h),l(h)})},TS(t,r).getOr(ES)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",r)):(l(a),t.execCommand("mceApplyTextcolor",r,a))},BE=(t,r,a)=>t.concat(GA(r).concat(nR(a))),NE=(t,r,a)=>l=>{l(BE(t,r,a))},DS=(t,r,a)=>{const l=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},LE=(t,r)=>{t.setTooltip(r)},rR=(t,r)=>a=>{const l=TS(t,r);return Ms(l,a.toUpperCase())},HE=(t,r,a)=>{if(sa(a))return r==="forecolor"?"Text color":"Background color";const l=r==="forecolor"?"Text color {0}":"Background color {0}",u=BE(OS(t,r),r,!1),h=It(u,v=>v.value===a).getOr({text:""}).text;return t.translate([l,t.translate(h)])},sR=(t,r,a,l)=>{t.ui.registry.addSplitButton(r,{tooltip:HE(t,a,l.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:rR(t,a),columns:g1(t,a),fetch:NE(OS(t,a),a,YA(t)),onAction:u=>{RE(t,a,l.get(),J)},onItemAction:(u,h)=>{RE(t,a,h,v=>{l.set(v),VA(t,{name:r,color:v})})},onSetup:u=>{DS(u,r,l.get());const h=v=>{v.name===r&&(DS(u,v.name,v.color),LE(u,HE(t,a,v.color)))};return t.on("TextColorChange",h),T2(Ha(t)(u),()=>{t.off("TextColorChange",h)})}})},aR=(t,r,a,l,u)=>{t.ui.registry.addNestedMenuItem(r,{text:l,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(LE(h,HE(t,a,u.get())),DS(h,r,u.get()),Ha(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:rR(t,a),initData:{storageKey:a},onAction:h=>{RE(t,a,h.value,v=>{u.set(v),VA(t,{name:r,color:v})})}}]})},iR=t=>(r,a)=>{let l=!1;const u=x=>{const C=x.getData().colorpicker;l?(r(E.from(C)),x.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},h=(x,C)=>{C.name==="hex-valid"&&(l=C.value)},v={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:v,onAction:h,onSubmit:u,onClose:J,onCancel:()=>{r(E.none())}})},BI=t=>{oR(t);const r=QA(t),a=JA(t),l=Dt(r),u=Dt(a);sR(t,"forecolor","forecolor",l),sR(t,"backcolor","hilitecolor",u),aR(t,"forecolor","forecolor","Text color",l),aR(t,"backcolor","hilitecolor","Background color",u)},IE=(t,r,a,l,u,h,v,x)=>{const C=gv(r),_=NI(r,a,l,u!=="color"?"normal":"color",h,v,x);return lS(t,C,_,l,{menuType:u})},NI=(t,r,a,l,u,h,v)=>_i(Ie(t,x=>x.type==="choiceitem"?oI(x).fold(Mg,C=>E.some(HA(C,a===1,l,r,h(C.value),u,v,gv(t)))):E.none())),MS=(t,r)=>{const a=a1(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>r==="color"?hn(l.element,"[aria-checked=true]"):E.none()}},LI=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${g2}`:`.${sS}`}},HI=(t,r)=>{const a=lR(t,r),l=r.colorinput.getColorCols(t.initData.storageKey),u="color",h={...IE(gt("menu-value"),a,v=>{t.onAction({value:v})},l,u,cu.CLOSE_ON_EXECUTE,t.select.getOr(Ge),r.shared.providers),markers:a1(u),movement:MS(l,u)};return{type:"widget",data:{value:gt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vv.widget(Tg.sketch(h))]}},lR=(t,r)=>{const a=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>BE(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(nR(a)))},cR=gt("cell-over"),dR=gt("cell-execute"),II=t=>(r,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,r]),PI=(t,r,a)=>{const l=v=>St(v,cR,{row:t,col:r}),u=v=>St(v,dR,{row:t,col:r}),h=(v,x)=>{x.stop(),u(v)};return Cs({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:We([Yt("insert-table-picker-cell",[Re($a(),Lt.focus),Re(ma(),u),Re(Vu(),h),Re(rf(),h)]),oo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Lt.config({onFocus:l})])})},zI=(t,r,a)=>{const l=[];for(let u=0;u<r;u++){const h=[];for(let v=0;v<a;v++){const x=t(u+1,v+1);h.push(PI(u,v,x))}l.push(h)}return l},AS=(t,r,a,l,u)=>{for(let h=0;h<l;h++)for(let v=0;v<u;v++)oo.set(t[h][v],h<=r&&v<=a)},uR=t=>me(t,r=>Ie(r,ji)),mR=(t,r)=>tr(`${r}x${t}`),FI={inserttable:(t,r)=>{const a=II(r),l=zI(a,10,10),u=mR(0,0),h=Io({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[u],behaviours:We([Zt.config({})])});return{type:"widget",data:{value:gt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vv.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:uR(l).concat(h.asSpec()),behaviours:We([Yt("insert-table-picker",[wn(v=>{Zt.set(h.get(v),[u])}),lb(cR,(v,x,C)=>{const{row:_,col:M}=C.event;AS(l,_,M,10,10),Zt.set(h.get(v),[mR(_+1,M+1)])}),lb(dR,(v,x,C)=>{const{row:_,col:M}=C.event;t.onAction({numRows:_+1,numColumns:M+1}),Eo(v,sf())})]),_t.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:HI},VI=(t,r)=>ot(FI,t.fancytype).map(a=>a(t,r)),ZI=(t,r,a,l=!0,u=!1)=>{const h=u?pI(a.icons):NA(a.icons),v=C=>({isEnabled:()=>!wt.isDisabled(C),setEnabled:_=>wt.set(C,!_),setIconFill:(_,M)=>{hn(C.element,`svg path[class="${_}"], rect[class="${_}"]`).each(A=>{W(A,"fill",M)})},setTooltip:_=>{const M=a.translate(_);ae(C.element,{"aria-label":M,title:M})}}),x=u1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,caret:E.some(h),checkMark:E.none(),shortcutContent:t.shortcut},a,l);return d1({data:fv(t),getApi:v,enabled:t.enabled,onAction:J,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},x,r,a)},UI=(t,r,a,l=!0)=>{const u=v=>({isEnabled:()=>!wt.isDisabled(v),setEnabled:x=>wt.set(v,!x)}),h=u1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,caret:E.none(),checkMark:E.none(),shortcutContent:t.shortcut},a,l);return d1({data:fv(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,r,a)},WI=t=>({type:"separator",dom:{tag:"div",classes:[sS,DH]},components:t.text.map(tr).toArray()}),PE=(t,r,a,l=!0)=>{const u=v=>({setActive:x=>{oo.set(v,x)},isActive:()=>oo.isOn(v),isEnabled:()=>!wt.isDisabled(v),setEnabled:x=>wt.set(v,!x)}),h=u1({iconContent:t.icon,textContent:t.text,htmlContent:E.none(),ariaLabel:t.text,checkMark:E.some(fE(a.icons)),caret:E.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return ao(d1({data:fv(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,r,a),{toggling:{toggleClass:$M,toggleOnExecute:!1,selected:t.active}})},gR=k2,zE=WI,$I=UI,FE=ZI,jI=PE,GI=VI,KI=bE;var XI=Object.freeze({__proto__:null,getCoupled:(t,r,a,l)=>a.getOrCreate(t,r,l),getExistingCoupled:(t,r,a,l)=>a.getExisting(t,r,l)}),qI=[$s("others",Yv(Wt.value,ua()))],YI=Object.freeze({__proto__:null,init:()=>{const t={},r=(h,v)=>{if(yn(h.others).length===0)throw new Error("Cannot find any known coupled components");return ot(t,v)},a=(h,v,x)=>r(v,x).getOrThunk(()=>{const C=ot(v.others,x).getOrDie("No information found for coupled component: "+x)(h),_=h.getSystem().build(C);return t[x]=_,_}),l=(h,v,x)=>r(v,x).orThunk(()=>(ot(v.others,x).getOrDie("No information found for coupled component: "+x),E.none())),u=se({});return Da({readState:u,getExisting:l,getOrCreate:a})}});const or=Gr({fields:qI,name:"coupling",apis:XI,state:YI}),VE=t=>{let r=E.none(),a=[];const l=_=>VE(M=>{u(A=>{M(_(A))})}),u=_=>{v()?C(_):a.push(_)},h=_=>{v()||(r=E.some(_),x(a),a=[])},v=()=>r.isSome(),x=_=>{at(_,C)},C=_=>{r.each(M=>{setTimeout(()=>{_(M)},0)})};return t(h),{get:u,map:l,isReady:v}},QI={nu:VE,pure:t=>VE(r=>{r(t)})},JI=t=>{setTimeout(()=>{throw t},0)},Bg=t=>{const r=a=>{t().then(a,JI)};return{map:a=>Bg(()=>t().then(a)),bind:a=>Bg(()=>t().then(l=>a(l).toPromise())),anonBind:a=>Bg(()=>t().then(()=>a.toPromise())),toLazy:()=>QI.nu(r),toCached:()=>{let a=null;return Bg(()=>(a===null&&(a=t()),a))},toPromise:t,get:r}},Es={nu:t=>Bg(()=>new Promise(t)),pure:t=>Bg(()=>Promise.resolve(t))},RS=se("sink"),ZE=se(Qi({name:RS(),overrides:se({dom:{tag:"div"},behaviours:We([Is.config({useFixed:Be})]),events:Jo([Wu(Ui()),Wu(Wa()),Wu(Vu())])})})),hR=(t,r)=>{const a=t.getHotspot(r).getOr(r),l="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:u}),h=>({type:l,hotspot:a,overrides:u,layouts:h}))},eP=(t,r,a)=>{const l=t.fetch;return l(a).map(r)},UE=(t,r,a,l,u,h,v)=>{const x=eP(t,r,l),C=pR(l,t);return x.map(_=>_.bind(M=>E.from(e1.sketch({...h.menu(),uid:bh(""),data:M,highlightOnOpen:v,onOpenMenu:(A,B)=>{const F=C().getOrDie();Is.position(F,B,{anchor:a}),lo.decloak(u)},onOpenSubmenu:(A,B,F)=>{const oe=C().getOrDie();Is.position(oe,F,{anchor:{type:"submenu",item:B}}),lo.decloak(u)},onRepositionMenu:(A,B,F)=>{const oe=C().getOrDie();Is.position(oe,B,{anchor:a}),at(F,ce=>{Is.position(oe,ce.triggeredMenu,{anchor:{type:"submenu",item:ce.triggeringItem}})})},onEscape:()=>(Lt.focus(l),lo.close(u),E.some(!0))}))))},wv=(t,r,a,l,u,h,v)=>{const x=hR(t,a);return UE(t,r,x,a,l,u,v).map(C=>(C.fold(()=>{lo.isOpen(l)&&lo.close(l)},_=>{lo.cloak(l),lo.open(l,_),h(l)}),l))},BS=(t,r,a,l,u,h,v)=>(lo.close(l),Es.pure(l)),NS=(t,r,a,l,u,h)=>{const v=or.getCoupled(a,"sandbox");return(lo.isOpen(v)?BS:wv)(t,r,a,v,l,u,h)},tP=(t,r,a)=>{const l=go.getCurrent(r).getOr(r),u=Un(t.element);a?ve(l.element,"min-width",u+"px"):Kg(l.element,u)},pR=(t,r)=>t.getSystem().getByUid(r.uid+"-"+RS()).map(a=>()=>Wt.value(a)).getOrThunk(()=>r.lazySink.fold(()=>()=>Wt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),fR=t=>{lo.getState(t).each(r=>{e1.repositionMenus(r)})},WE=(t,r,a)=>{const l=Th(),u=(x,C)=>{const _=hR(t,r);l.link(r.element),t.matchWidth&&tP(_.hotspot,C,t.useMinWidth),t.onOpen(_,x,C),a!==void 0&&a.onOpen!==void 0&&a.onOpen(x,C)},h=(x,C)=>{l.unlink(r.element),a!==void 0&&a.onClose!==void 0&&a.onClose(x,C)},v=pR(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:Xi.augment(t.sandboxBehaviours,[nt.config({store:{mode:"memory",initialValue:r}}),lo.config({onOpen:u,onClose:h,isPartOf:(x,C,_)=>$d(C,_)||$d(r,_),getAttachPoint:()=>v().getOrDie()}),go.config({find:x=>lo.getState(x).bind(C=>go.getCurrent(C))}),ja.config({channels:{...V0({isExtraPart:Ge}),...$f({doReposition:fR})}})])}},vR=t=>{const r=or.getCoupled(t,"sandbox");fR(r)},$E=()=>[ge("sandboxClasses",[]),Xi.field("sandboxBehaviours",[go,ja,lo,nt])],oP=se([xe("dom"),xe("fetch"),mo("onOpen"),Ma("onExecute"),ge("getHotspot",E.some),ge("getAnchorOverrides",se({})),qd(),In("dropdownBehaviours",[oo,or,_t,Lt]),xe("toggleClass"),ge("eventOrder",{}),_o("lazySink"),ge("matchWidth",!1),ge("useMinWidth",!1),_o("role")].concat($E())),nP=se([Yi({schema:[Qu(),ge("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),ZE()]),rP=(t,r,a,l)=>{const u=M=>ot(t.dom,"attributes").bind(A=>ot(A,M)),h=M=>{lo.getState(M).each(A=>{e1.highlightPrimary(A)})},v=(M,A,B)=>NS(t,so,M,l,A,B),x=M=>{v(M,h,va.HighlightMenuAndItem).get(J)},C={expand:M=>{oo.isOn(M)||v(M,J,va.HighlightNone).get(J)},open:M=>{oo.isOn(M)||v(M,J,va.HighlightMenuAndItem).get(J)},refetch:M=>or.getExistingCoupled(M,"sandbox").fold(()=>v(M,J,va.HighlightMenuAndItem).map(J),A=>wv(t,so,M,A,l,J,va.HighlightMenuAndItem).map(J)),isOpen:oo.isOn,close:M=>{oo.isOn(M)&&v(M,J,va.HighlightMenuAndItem).get(J)},repositionMenus:M=>{oo.isOn(M)&&vR(M)}},_=(M,A)=>(Yc(M),E.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.dropdownBehaviours,[oo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),or.config({others:{sandbox:M=>WE(t,M,{onOpen:()=>oo.on(M),onClose:()=>oo.off(M)})}}),_t.config({mode:"special",onSpace:_,onEnter:_,onDown:(M,A)=>{if(wc.isOpen(M)){const B=or.getCoupled(M,"sandbox");h(B)}else wc.open(M);return E.some(!0)},onEscape:(M,A)=>wc.isOpen(M)?(wc.close(M),E.some(!0)):E.none()}),Lt.config({})]),events:sv(E.some(x)),eventOrder:{...t.eventOrder,[ma()]:["disabling","toggling","alloy.base.behaviour"]},apis:C,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),M=>({role:M})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},wc=Js({name:"Dropdown",configFields:oP(),partFields:nP(),factory:rP,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),sP=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},aP=t=>{const r=nt.getValue(t),a=dv(t).map(f2);wc.refetch(r).get(()=>{const l=or.getCoupled(r,"sandbox");a.each(u=>dv(l).each(h=>Q_(h,u)))})},iP=(t,r)=>{bR(t).each(a=>{ng(t,a.element,r.event.eventType,r.event.interactionEvent)})},bR=t=>lo.getState(t).bind(wo.getHighlighted).bind(wo.getHighlighted),lP=t=>ls(t.element,uv)?E.some(t.element):hn(t.element,"."+uv),yR=(t,r,a)=>{Y_(t).each(l=>{JM(l,a),lP(r).each(u=>{Tt(u,"id").each(h=>W(l.element,"aria-controls",h))})}),W(a.element,"aria-selected","true")},pm=(t,r,a)=>{W(a.element,"aria-selected","false")},cP=t=>{Y_(t).each(r=>Lt.focus(r))},dP=t=>or.getExistingCoupled(t,"sandbox").bind(dv).map(f2).map(r=>r.fetchPattern).getOr("");var Sv;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Sv||(Sv={}));const Ir=(t,r,a,l,u)=>{const h=a.shared.providers,v=x=>u?{...x,shortcut:E.none(),icon:x.text.isSome()?E.none():x.icon}:x;switch(t.type){case"menuitem":return kA(t).fold(Mg,x=>E.some($I(v(x),r,h,l)));case"nestedmenuitem":return aI(t).fold(Mg,x=>E.some(FE(v(x),r,h,l,u)));case"togglemenuitem":return OA(t).fold(Mg,x=>E.some(jI(v(x),r,h,l)));case"separator":return lE(t).fold(Mg,x=>E.some(zE(x)));case"fancymenuitem":return SA(t).fold(Mg,x=>GI(x,a));default:return console.error("Unknown item in general menu",t),E.none()}},uP=(t,r,a,l,u,h,v)=>{const x=l===1,C=!x||gv(t);return _i(Ie(t,_=>{switch(_.type){case"separator":return dA(_).fold(Mg,M=>E.some(zE(M)));case"cardmenuitem":return eI(_).fold(Mg,M=>E.some(KI({...M,onAction:A=>{M.onAction(A),a(M.value,M.meta)}},u,h,{itemBehaviours:yS(M.meta,h),cardText:{matchText:r,highlightOn:v}})));case"autocompleteitem":default:return uA(_).fold(Mg,M=>E.some(gR(M,r,x,"normal",a,u,h,C)))}}))},xR=(t,r,a,l,u,h)=>{const v=gv(r),x=_i(Ie(r,_=>{const M=B=>u?!bo(B,"text"):v,A=B=>Ir(B,a,l,M(B),u);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?A({..._,enabled:!1}):A(_)})),C=sP(h);return(u?tA:lS)(t,v,x,1,C)},jE=t=>e1.singleData(t.value,t),mP=(t,r,a,l)=>{const u=MS(r,l),h=a1(l);return{data:jE({...t,movement:u,menuBehaviours:C2.unnamedEvents(r!=="auto"?[]:[wn((v,x)=>{hS(v,4,h.item).each(({numColumns:C,numRows:_})=>{_t.setGridSize(v,_,C)})})])}),menu:{markers:a1(l),fakeFocus:a===Sv.ContentFocus}}},gP=(t,r)=>WM(Ke.fromDom(r.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),hP={register:(t,r)=>{const a=gt("autocompleter"),l=Dt(!1),u=Dt(!1),h=Cs(pn.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:We([Yt("dismissAutocompleter",[Re(og(),()=>M()),Re(ab(),(De,Q)=>{Tt(Q.event.target,"id").each(ee=>W(Ke.fromDom(t.getBody()),"aria-activedescendant",ee))})])]),lazySink:r.getSink})),v=()=>pn.isOpen(h),x=u.get,C=()=>{if(v()){pn.hide(h),t.dom.remove(a,!1);const De=Ke.fromDom(t.getBody());Tt(De,"aria-owns").filter(Q=>Q===a).each(()=>{vo(De,"aria-owns"),vo(De,"aria-activedescendant")})}},_=()=>pn.getContent(h).bind(De=>On(De.components(),0)),M=()=>t.execCommand("mceAutocompleterClose"),A=De=>{const Q=hr(De,ee=>E.from(ee.columns)).getOr(1);return me(De,ee=>{const fe=ee.items;return uP(fe,ee.matchText,(Ne,be)=>{const Fe=t.selection.getRng();gP(t.dom,Fe).each(et=>{const ct={hide:()=>M(),reload:eo=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:eo})}};l.set(!0),ee.onAction(ct,et,Ne,be),l.set(!1)})},Q,cu.BUBBLE_TO_SANDBOX,r,ee.highlightOn)})},B=(De,Q)=>{EH(Ke.fromDom(t.getBody())).each(ee=>{const fe=hr(De,Ne=>E.from(Ne.columns)).getOr(1);pn.showMenuAt(h,{anchor:{type:"node",root:Ke.fromDom(t.getBody()),node:E.from(ee)}},mP(lS("autocompleter-value",!0,Q,fe,{menuType:"normal"}),fe,Sv.ContentFocus,"normal"))}),_().each(wo.highlightFirst)},F=De=>{const Q=A(De);Q.length>0?(B(De,Q),W(Ke.fromDom(t.getBody()),"aria-owns",a),t.inline||oe()):C()},oe=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const De=t.getDoc().documentElement,Q=t.selection.getNode(),ee=qx(h.element);Rs(ee,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Q.offsetTop}px`,left:`${Q.offsetLeft}px`}),t.dom.add(De,ee.dom),hn(ee,'[role="menu"]').each(fe=>{xo(fe,"position"),xo(fe,"max-height")})};t.on("AutocompleterStart",({lookupData:De})=>{u.set(!0),l.set(!1),F(De)}),t.on("AutocompleterUpdate",({lookupData:De})=>F(De)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),l.set(!1)});const ce={cancelIfNecessary:M,isMenuOpen:v,isActive:x,isProcessingAction:l.get,getMenu:_};OH.setup(ce,t)}},pP=["visible","hidden","clip"],CR=t=>ts(t).length>0&&!zo(pP,t),wR=t=>{if(Ti(t)){const r=Sr(t,"overflow-x"),a=Sr(t,"overflow-y");return CR(r)||CR(a)}else return!1},fP=t=>{const r=iy(t,wR),a=r.length===0?Tm(t).map(Dm).map(l=>iy(l,wR)).getOr([]):r;return Ts(a).map(l=>({element:l,others:a.slice(1)}))},h1=(t,r)=>vp(t)?fP(r):E.none(),kv=t=>{const r=[...Ie(t.others,Nn),bs()];return V1(Nn(t.element),r)},M2=(t,r,a)=>Ml(t,r,a).isSome(),SR=(t,r)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...l)=>{a=setTimeout(()=>{t.apply(null,l),a=null},r)}}},kR=5,vP=400,_R=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?E.none():E.some(r.touches[0])},bP=(t,r)=>{const a=Math.abs(t.clientX-r.x),l=Math.abs(t.clientY-r.y);return a>kR||l>kR},yP=t=>{const r=un(),a=Dt(!1),l=SR(C=>{t.triggerEvent(yk(),C),a.set(!0)},vP),u=C=>(_R(C).each(_=>{l.cancel();const M={x:_.clientX,y:_.clientY,target:C.target};l.schedule(C),a.set(!1),r.set(M)}),E.none()),h=C=>(l.cancel(),_R(C).each(_=>{r.on(M=>{bP(_,M)&&r.clear()})}),E.none()),v=C=>{l.cancel();const _=M=>Vo(M.target,C.target);return r.get().filter(_).map(M=>a.get()?(C.prevent(),!1):t.triggerEvent(rf(),C))},x=Xm([{key:Gc(),value:u},{key:mh(),value:h},{key:qm(),value:v}]);return{fireIfReady:(C,_)=>ot(x,_).bind(M=>M(C))}},xP=t=>t.raw.which===Vy[0]&&!zo(["input","textarea"],Bo(t.target))&&!M2(t.target,'[contenteditable="true"]'),CP=(t,r)=>{const a={stopBackspace:!0,...r},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=yP(a),h=Ie(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),B=>Xs(t,B,F=>{u.fireIfReady(F,B).each(oe=>{oe&&F.kill()}),a.triggerEvent(B,F)&&F.kill()})),v=un(),x=Xs(t,"paste",B=>{u.fireIfReady(B,"paste").each(F=>{F&&B.kill()}),a.triggerEvent("paste",B)&&B.kill(),v.set(setTimeout(()=>{a.triggerEvent(rb(),B)},0))}),C=Xs(t,"keydown",B=>{a.triggerEvent("keydown",B)?B.kill():a.stopBackspace&&xP(B)&&B.prevent()}),_=Xs(t,"focusin",B=>{a.triggerEvent("focusin",B)&&B.kill()}),M=un(),A=Xs(t,"focusout",B=>{a.triggerEvent("focusout",B)&&B.kill(),M.set(setTimeout(()=>{a.triggerEvent(Jm(),B)},0))});return{unbind:()=>{at(h,B=>{B.unbind()}),C.unbind(),_.unbind(),A.unbind(),x.unbind(),v.on(clearTimeout),M.on(clearTimeout)}}},ER=(t,r)=>{const a=ot(t,"target").getOr(r);return Dt(a)},wP=(t,r)=>{const a=Dt(!1),l=Dt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:r.set,getSource:r.get}},SP=t=>{const r=Dt(!1);return{stop:()=>{r.set(!0)},cut:J,isStopped:r.get,isCut:Ge,event:t,setSource:te("Cannot set source of a broadcasted event"),getSource:te("Cannot get source of a broadcasted event")}},A2=El.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),GE=(t,r,a,l,u,h)=>{const v=t(r,l),x=wP(a,u);return v.fold(()=>(h.logEventNoHandlers(r,l),A2.complete()),C=>{const _=C.descHandler;return Ch(_)(x),x.isStopped()?(h.logEventStopped(r,C.element,_.purpose),A2.stopped()):x.isCut()?(h.logEventCut(r,C.element,_.purpose),A2.complete()):ns(C.element).fold(()=>(h.logNoParent(r,C.element,_.purpose),A2.complete()),M=>(h.logEventResponse(r,C.element,_.purpose),A2.resume(M)))})},OR=(t,r,a,l,u,h)=>GE(t,r,a,l,u,h).fold(Be,v=>OR(t,r,a,v,u,h),Ge),kP=(t,r,a,l,u)=>{const h=ER(a,l);return GE(t,r,a,l,h,u)},_P=(t,r,a)=>{const l=SP(r);return at(t,u=>{const h=u.descHandler;Ch(h)(l)}),l.isStopped()},TR=(t,r,a,l)=>DR(t,r,a,a.target,l),DR=(t,r,a,l,u)=>{const h=ER(a,l);return OR(t,r,a,l,h,u)},EP=(t,r)=>({element:t,descHandler:r}),OP=(t,r)=>({id:t,descHandler:r}),MR=()=>{const t={},r=(l,u,h)=>{Xn(h,(v,x)=>{const C=t[x]!==void 0?t[x]:{};C[u]=gb(v,l),t[x]=C})},a=(l,u)=>gf(u).bind(h=>ot(l,h)).map(h=>EP(u,h));return{registerId:r,unregisterId:l=>{Xn(t,(u,h)=>{bo(u,l)&&delete u[l]})},filterByType:l=>ot(t,l).map(u=>Si(u,(h,v)=>OP(v,h))).getOr([]),find:(l,u,h)=>ot(t,u).bind(v=>ch(h,x=>a(v,x),l))}},TP=()=>{const t=MR(),r={},a=v=>{const x=v.element;return gf(x).getOrThunk(()=>e0("uid-",v.element))},l=(v,x)=>{const C=r[x];if(C===v)h(v);else throw new Error('The tagId "'+x+'" is already used by: '+Qc(C.element)+`
Cannot use it for: `+Qc(v.element)+`
The conflicting element is`+(fs(C.element)?" ":" not ")+"already in the DOM")},u=v=>{const x=a(v);ra(r,x)&&l(v,x);const C=[v];t.registerId(C,x,v.events),r[x]=v},h=v=>{gf(v.element).each(x=>{delete r[x],t.unregisterId(x)})};return{find:(v,x,C)=>t.find(v,x,C),filter:v=>t.filterByType(v),register:u,unregister:h,getById:v=>ot(r,v)}},mu=vi({name:"Container",factory:t=>{const{attributes:r,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...a},components:t.components,behaviours:xg(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ge("components",[]),In("containerBehaviours",[]),ge("events",{}),ge("domModification",{}),ge("eventOrder",{})]}),KE=t=>{const r=Q=>ns(t.element).fold(Be,ee=>Vo(Q,ee)),a=TP(),l=(Q,ee)=>a.find(r,Q,ee),u=CP(t.element,{triggerEvent:(Q,ee)=>m0(Q,ee.target,fe=>TR(l,Q,ee,fe))}),h={debugInfo:se("real"),triggerEvent:(Q,ee,fe)=>{m0(Q,ee,Ne=>DR(l,Q,fe,ee,Ne))},triggerFocus:(Q,ee)=>{gf(Q).fold(()=>{tt(Q)},fe=>{m0(ui(),Q,Ne=>(kP(l,ui(),{originator:ee,kill:J,prevent:J,target:Q},Q,Ne),!1))})},triggerEscape:(Q,ee)=>{h.triggerEvent("keydown",Q.element,ee.event)},getByUid:Q=>ce(Q),getByDom:Q=>De(Q),build:Cs,buildOrPatch:qu,addToGui:Q=>{C(Q)},removeFromGui:Q=>{_(Q)},addToWorld:Q=>{v(Q)},removeFromWorld:Q=>{x(Q)},broadcast:Q=>{B(Q)},broadcastOn:(Q,ee)=>{F(Q,ee)},broadcastEvent:(Q,ee)=>{oe(Q,ee)},isConnected:Be},v=Q=>{Q.connect(h),rr(Q.element)||(a.register(Q),at(Q.components(),v),h.triggerEvent(Hn(),Q.element,{target:Q.element}))},x=Q=>{rr(Q.element)||(at(Q.components(),x),a.unregister(Q)),Q.disconnect()},C=Q=>{sm(t,Q)},_=Q=>{eu(Q)},M=()=>{u.unbind(),xl(t.element)},A=Q=>{const ee=a.filter(Zu());at(ee,fe=>{const Ne=fe.descHandler;Ch(Ne)(Q)})},B=Q=>{A({universal:!0,data:Q})},F=(Q,ee)=>{A({universal:!1,channels:Q,data:ee})},oe=(Q,ee)=>{const fe=a.filter(Q);return _P(fe,ee)},ce=Q=>a.getById(Q).fold(()=>Wt.error(new Error('Could not find component with uid: "'+Q+'" in system.')),Wt.value),De=Q=>{const ee=gf(Q).getOr("not found");return ce(ee)};return v(t),{root:t,element:t.element,destroy:M,add:C,remove:_,getByUid:ce,getByDom:De,addToWorld:v,removeFromWorld:x,broadcast:B,broadcastOn:F,broadcastEvent:oe}},DP=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ie(t.items,r.interpreter)}),AR=se([ge("prefix","form-field"),In("fieldBehaviours",[go,nt])]),MP=se([Qi({schema:[xe("dom")],name:"label"}),Qi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[xe("text")],name:"aria-descriptor"}),Kr({factory:{sketch:t=>{const r=ih(t,["factory"]);return t.factory.sketch(r)}},schema:[xe("factory")],name:"field"})]),RR=(t,r,a,l)=>{const u=Rr(t.fieldBehaviours,[go.config({find:x=>Lo(x,t,"field")}),nt.config({store:{mode:"manual",getValue:x=>go.getCurrent(x).bind(nt.getValue),setValue:(x,C)=>{go.getCurrent(x).each(_=>{nt.setValue(_,C)})}}})]),h=Jo([wn((x,C)=>{const _=uw(x,t,["label","field","aria-descriptor"]);_.field().each(M=>{const A=gt(t.prefix);_.label().each(B=>{W(B.element,"for",A),W(M.element,"id",A)}),_["aria-descriptor"]().each(B=>{const F=gt(t.prefix);W(B.element,"id",F),W(M.element,"aria-describedby",F)})})})]),v={getField:x=>Lo(x,t,"field"),getLabel:x=>Lo(x,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:u,events:h,apis:v}},Po=Js({name:"FormField",configFields:AR(),partFields:MP(),factory:RR,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var BR=Object.freeze({__proto__:null,exhibit:(t,r)=>$i({attributes:Xm([{key:r.tabAttr,value:"true"}])})}),AP=[ge("tabAttr","data-alloy-tabstop")];const Pn=Gr({fields:AP,name:"tabstopping",active:BR});var RP=tinymce.util.Tools.resolve("tinymce.html.Entities");const R2=(t,r,a,l)=>{const u=NP(t,r,a,l);return Po.sketch(u)},BP=(t,r)=>R2(t,r,[],[]),NP=(t,r,a,l)=>({dom:NR(a),components:t.toArray().concat([r]),fieldBehaviours:We(l)}),LP=()=>NR([]),NR=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Sp=(t,r)=>Po.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tr(r.translate(t))]}),sl=gt("form-component-change"),B2=gt("form-close"),kp=gt("form-cancel"),gu=gt("form-action"),N2=gt("form-submit"),XE=gt("form-block"),qE=gt("form-unblock"),LR=gt("form-tabchange"),HR=gt("form-resize"),YE=(t,r,a)=>{const l=t.label.map(B=>Sp(B,r)),u=r.icons(),h=B=>{var F;return(F=u[B])!==null&&F!==void 0?F:B},v=B=>(F,oe)=>{Ml(oe.event.target,"[data-collection-item-value]").each(ce=>{B(F,oe,ce,ut(ce,"data-collection-item-value"))})},x=(B,F)=>{const oe=Ie(F,Q=>{const ee=ol.translate(Q.text),fe=t.columns===1?`<div class="tox-collection__item-label">${ee}</div>`:"",Ne=`<div class="tox-collection__item-icon">${h(Q.icon)}</div>`,be={_:" "," - ":" ","-":" "},Fe=ee.replace(/\_| \- |\-/g,et=>be[et]);return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${RP.encodeAllRaw(Q.value)}" title="${Fe}" aria-label="${Fe}">${Ne}${fe}</div>`}),ce=t.columns!=="auto"&&t.columns>1?lr(oe,t.columns):[oe],De=Ie(ce,Q=>`<div class="tox-collection__group">${Q.join("")}</div>`);fh(B.element,De.join(""))},C=v((B,F,oe,ce)=>{F.stop(),r.isDisabled()||St(B,gu,{name:t.name,value:ce})}),_=[Re($a(),v((B,F,oe)=>{tt(oe)})),Re(Vu(),C),Re(rf(),C),Re(as(),v((B,F,oe)=>{hn(B.element,"."+h2).each(ce=>{Tn(ce,h2)}),Kt(oe,h2)})),Re(nb(),v(B=>{hn(B.element,"."+h2).each(F=>{Tn(F,h2)})})),gi(v((B,F,oe,ce)=>{St(B,gu,{name:t.name,value:ce})}))],M=(B,F)=>Ie(_s(B.element,".tox-collection__item"),F),A=Po.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:so},behaviours:We([wt.config({disabled:r.isDisabled,onDisabled:B=>{M(B,F=>{Kt(F,"tox-collection__item--state-disabled"),W(F,"aria-disabled",!0)})},onEnabled:B=>{M(B,F=>{Tn(F,"tox-collection__item--state-disabled"),vo(F,"aria-disabled")})}}),Hr(),Zt.config({}),nt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,F)=>{x(B,F),t.columns==="auto"&&hS(B,5,"tox-collection__item").each(({numRows:oe,numColumns:ce})=>{_t.setGridSize(B,oe,ce)}),Eo(B,HR)}}),Pn.config({}),_t.config(LI(t.columns,"normal")),Yt("collection-events",_)]),eventOrder:{[ma()]:["disabling","alloy.base.behaviour","collection-events"]}});return R2(l,A,["tox-form__group--collection"],[])},HP=["input","textarea"],IR=t=>{const r=Bo(t);return zo(HP,r)},PR=(t,r)=>{const a=r.getRoot(t).getOr(t.element);Tn(a,r.invalidClass),r.notify.each(l=>{IR(t.element)&&W(t.element,"aria-invalid",!1),l.getContainer(t).each(u=>{fh(u,l.validHtml)}),l.onValid(t)})},QE=(t,r,a,l)=>{const u=r.getRoot(t).getOr(t.element);Kt(u,r.invalidClass),r.notify.each(h=>{IR(t.element)&&W(t.element,"aria-invalid",!0),h.getContainer(t).each(v=>{fh(v,l)}),h.onInvalid(t,l)})},JE=(t,r,a)=>r.validator.fold(()=>Es.pure(Wt.value(!0)),l=>l.validate(t)),eO=(t,r,a)=>(r.notify.each(l=>{l.onValidate(t)}),JE(t,r).map(l=>t.getSystem().isConnected()?l.fold(u=>(QE(t,r,a,u),Wt.error(u)),u=>(PR(t,r),Wt.value(u))):Wt.error("No longer in system")));var IP=Object.freeze({__proto__:null,markValid:PR,markInvalid:QE,query:JE,run:eO,isInvalid:(t,r)=>{const a=r.getRoot(t).getOr(t.element);return ls(a,r.invalidClass)}}),zR=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(a=>Jo([Re(a.onEvent,l=>{eO(l,t,r).get(so)})].concat(a.validateOnLoad?[wn(l=>{eO(l,t,r).get(J)})]:[]))).getOr({})}),PP=[xe("invalidClass"),ge("getRoot",E.none),Oa("notify",[ge("aria","alert"),ge("getContainer",E.none),ge("validHtml",""),mo("onValid"),mo("onInvalid"),mo("onValidate")]),Oa("validator",[xe("validate"),ge("onEvent","input"),ge("validateOnLoad",!0)])];const fm=Gr({fields:PP,name:"invalidating",active:zR,apis:IP,extra:{validation:t=>r=>{const a=nt.getValue(r);return Es.pure(t(a))}}});var zP=Object.freeze({__proto__:null,events:()=>Jo([cf(Wx(),Be)]),exhibit:()=>$i({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const L2=Gr({fields:[],name:"unselecting",active:zP}),FP=(t,r)=>wc.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:We([bd.button(r.providers.isDisabled),Hr(),L2.config({}),Pn.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:a=>Es.nu(l=>t.fetch(l)).map(l=>E.from(jE(ao(IE(gt("menu-value"),l,u=>{t.onItemAction(a,u)},t.columns,t.presets,cu.CLOSE_ON_EXECUTE,Ge,r.providers),{movement:MS(t.columns,t.presets)})))),parts:{menu:aS(!1,1,t.presets)}}),FR=gt("color-input-change"),H2=gt("color-swatch-change"),VR=gt("color-picker-cancel"),LS=(t,r,a,l)=>{const u=Po.parts.field({factory:i1,inputClasses:["tox-textfield"],data:l,onSetValue:_=>fm.run(_).get(J),inputBehaviours:We([wt.config({disabled:r.providers.isDisabled}),Hr(),Pn.config({}),fm.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>Fs(_.element),notify:{onValid:_=>{const M=nt.getValue(_);St(_,FR,{color:M})}},validator:{validateOnLoad:!1,validate:_=>{const M=nt.getValue(_);if(M.length===0)return Es.pure(Wt.value(!0));{const A=Ke.fromTag("span");ve(A,"background-color",M);const B=Wo(A,"background-color").fold(()=>Wt.error("blah"),F=>Wt.value(M));return Es.pure(B)}}}})]),selectOnFocus:!1}),h=t.label.map(_=>Sp(_,r.providers)),v=(_,M)=>{St(_,H2,{value:M})},x=(_,M)=>{C.getOpt(_).each(A=>{M==="custom"?a.colorPicker(B=>{B.fold(()=>Eo(A,VR),F=>{v(A,F),_E(t.storageKey,F)})},"#ffffff"):M==="remove"?v(A,""):v(A,M)})},C=Io(FP({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Ss,us,Mr],onLtr:()=>[us,Ss,Mr]},components:[],fetch:NE(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:x},r));return Po.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,C.asSpec()]}]),fieldBehaviours:We([Yt("form-field-events",[Re(FR,(_,M)=>{C.getOpt(_).each(A=>{ve(A.element,"background-color",M.event.color)}),St(_,sl,{name:t.name})}),Re(H2,(_,M)=>{Po.getField(_).each(A=>{nt.setValue(A,M.event.value),go.getCurrent(_).each(Lt.focus)})}),Re(VR,(_,M)=>{Po.getField(_).each(A=>{go.getCurrent(_).each(Lt.focus)})})])])})},VP=Qi({schema:[xe("dom")],name:"label"}),_p=t=>Qi({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),a=>({events:Jo([ib(Gc(),(l,u,h)=>a(l,h),[r]),ib(Wa(),(l,u,h)=>a(l,h),[r]),ib(of(),(l,u,h)=>{h.mouseIsDown.get()&&a(l,h)},[r])])}))}),ZP=_p("top-left"),UP=_p("top"),HS=_p("top-right"),_v=_p("right"),ZR=_p("bottom-right"),UR=_p("bottom"),WP=_p("bottom-left"),$P=_p("left"),jP=Kr({name:"thumb",defaults:se({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Jo([rg(Gc(),t,"spectrum"),rg(mh(),t,"spectrum"),rg(qm(),t,"spectrum"),rg(Wa(),t,"spectrum"),rg(of(),t,"spectrum"),rg(ob(),t,"spectrum")])})}),IS=t=>w(t.event),GP=Kr({schema:[Ns("mouseIsDown",()=>Dt(!1))],name:"spectrum",overrides:t=>{const r=t.model.manager,a=(l,u)=>r.getValueFromEvent(u).map(h=>r.setValueFrom(l,t,h));return{behaviours:We([_t.config({mode:"special",onLeft:(l,u)=>r.onLeft(l,t,IS(u)),onRight:(l,u)=>r.onRight(l,t,IS(u)),onUp:(l,u)=>r.onUp(l,t,IS(u)),onDown:(l,u)=>r.onDown(l,t,IS(u))}),Pn.config({}),Lt.config({})]),events:Jo([Re(Gc(),a),Re(mh(),a),Re(Wa(),a),Re(of(),(l,u)=>{t.mouseIsDown.get()&&a(l,u)})])}}});var KP=[VP,$P,_v,UP,UR,ZP,HS,WP,ZR,jP,GP];const I2=se("slider.change.value"),XP=t=>t.type.indexOf("touch")!==-1,tO=t=>{const r=t.event.raw;if(XP(r)){const a=r;return a.touches!==void 0&&a.touches.length===1?E.some(a.touches[0]).map(l=>gn(l.clientX,l.clientY)):E.none()}else{const a=r;return a.clientX!==void 0?E.some(a).map(l=>gn(l.clientX,l.clientY)):E.none()}},qP="top",YP="right",WR="bottom",Ev="left",Sc=t=>t.model.minX,p1=t=>t.model.minY,P2=t=>t.model.minX-1,z2=t=>t.model.minY-1,vm=t=>t.model.maxX,f1=t=>t.model.maxY,Ep=t=>t.model.maxX+1,Op=t=>t.model.maxY+1,$R=(t,r,a)=>r(t)-a(t),oO=t=>$R(t,vm,Sc),nO=t=>$R(t,f1,p1),jR=t=>oO(t)/2,GR=t=>nO(t)/2,Ov=(t,r)=>r?t.stepSize*t.speedMultiplier:t.stepSize,F2=t=>t.snapToGrid,KR=t=>t.snapStart,PS=t=>t.rounded,zS=(t,r)=>t[r+"-edge"]!==void 0,XR=t=>zS(t,Ev),qR=t=>zS(t,YP),rO=t=>zS(t,qP),YR=t=>zS(t,WR),Ng=t=>t.model.value.get(),Tp=(t,r)=>({x:t,y:r}),kc=(t,r)=>{St(t,I2(),{value:r})},QP=(t,r)=>{kc(t,Tp(P2(r),z2(r)))},JP=(t,r)=>{kc(t,z2(r))},ez=(t,r)=>{kc(t,Tp(jR(r),z2(r)))},tz=(t,r)=>{kc(t,Tp(Ep(r),z2(r)))},oz=(t,r)=>{kc(t,Ep(r))},QR=(t,r)=>{kc(t,Tp(Ep(r),GR(r)))},JR=(t,r)=>{kc(t,Tp(Ep(r),Op(r)))},nz=(t,r)=>{kc(t,Op(r))},rz=(t,r)=>{kc(t,Tp(jR(r),Op(r)))},sz=(t,r)=>{kc(t,Tp(P2(r),Op(r)))},az=(t,r)=>{kc(t,P2(r))},iz=(t,r)=>{kc(t,Tp(P2(r),GR(r)))},FS=(t,r,a,l)=>t<r?t:t>a?a:t===r?r-1:Math.max(r,t-l),Dp=(t,r,a,l)=>t>a?t:t<r?r:t===a?a+1:Math.min(a,t+l),e6=(t,r,a)=>Math.max(r,Math.min(a,t)),lz=(t,r,a,l,u)=>u.fold(()=>{const h=t-r,v=Math.round(h/l)*l;return e6(r+v,r-1,a+1)},h=>{const v=(t-h)%l,x=Math.round(v/l),C=Math.floor((t-h)/l),_=Math.floor((a-h)/l),M=Math.min(_,C+x),A=h+M*l;return Math.max(h,A)}),cz=(t,r,a)=>Math.min(a,Math.max(t,r))-r,V2=t=>{const{min:r,max:a,range:l,value:u,step:h,snap:v,snapStart:x,rounded:C,hasMinEdge:_,hasMaxEdge:M,minBound:A,maxBound:B,screenRange:F}=t,oe=_?r-1:r,ce=M?a+1:a;if(u<A)return oe;if(u>B)return ce;{const De=cz(u,A,B),Q=e6(De/F*l+r,oe,ce);return v&&Q>=r&&Q<=a?lz(Q,r,a,h,x):C?Math.round(Q):Q}},Fl=t=>{const{min:r,max:a,range:l,value:u,hasMinEdge:h,hasMaxEdge:v,maxBound:x,maxOffset:C,centerMinEdge:_,centerMaxEdge:M}=t;return u<r?h?0:_:u>a?v?x:M:(u-r)/l*C},Z2="top",sO="right",t6="bottom",aO="left",dz="width",uz="height",hu=t=>t.element.dom.getBoundingClientRect(),_c=(t,r)=>t[r],VS=t=>{const r=hu(t);return _c(r,aO)},o6=t=>{const r=hu(t);return _c(r,sO)},U2=t=>{const r=hu(t);return _c(r,Z2)},n6=t=>{const r=hu(t);return _c(r,t6)},iO=t=>{const r=hu(t);return _c(r,dz)},lO=t=>{const r=hu(t);return _c(r,uz)},cO=(t,r,a)=>(t+r)/2-a,r6=(t,r)=>{const a=hu(t),l=hu(r),u=_c(a,aO),h=_c(a,sO),v=_c(l,aO);return cO(u,h,v)},s6=(t,r)=>{const a=hu(t),l=hu(r),u=_c(a,Z2),h=_c(a,t6),v=_c(l,Z2);return cO(u,h,v)},ZS=(t,r)=>{St(t,I2(),{value:r})},dO=(t,r,a)=>{const l={min:Sc(r),max:vm(r),range:oO(r),value:a,step:Ov(r),snap:F2(r),snapStart:KR(r),rounded:PS(r),hasMinEdge:XR(r),hasMaxEdge:qR(r),minBound:VS(t),maxBound:o6(t),screenRange:iO(t)};return V2(l)},mz=(t,r,a)=>{const l=dO(t,r,a);return ZS(t,l),l},gz=(t,r)=>{const a=Sc(r);ZS(t,a)},uO=(t,r)=>{const a=vm(r);ZS(t,a)},hz=(t,r,a,l)=>{const u=(t>0?Dp:FS)(Ng(a),Sc(a),vm(a),Ov(a,l));return ZS(r,u),E.some(u)},mO=t=>(r,a,l)=>hz(t,r,a,l).map(Be),pz=t=>tO(t).map(r=>r.left),fz=(t,r,a,l,u)=>{const h=iO(t),v=l.bind(_=>E.some(r6(_,t))).getOr(0),x=u.bind(_=>E.some(r6(_,t))).getOr(h),C={min:Sc(r),max:vm(r),range:oO(r),value:a,hasMinEdge:XR(r),hasMaxEdge:qR(r),minBound:VS(t),minOffset:0,maxBound:o6(t),maxOffset:h,centerMinEdge:v,centerMaxEdge:x};return Fl(C)},gO=(t,r,a,l,u,h)=>{const v=fz(r,h,a,l,u);return VS(r)-VS(t)+v},vz=(t,r,a,l)=>{const u=Ng(a),h=gO(t,l.getSpectrum(t),u,l.getLeftEdge(t),l.getRightEdge(t),a),v=Un(r.element)/2;ve(r.element,"left",h-v+"px")},bz=mO(-1),yz=mO(1),xz=E.none,a6=E.none,i6={"top-left":E.none(),top:E.none(),"top-right":E.none(),right:E.some(oz),"bottom-right":E.none(),bottom:E.none(),"bottom-left":E.none(),left:E.some(az)};var Cz=Object.freeze({__proto__:null,setValueFrom:mz,setToMin:gz,setToMax:uO,findValueOfOffset:dO,getValueFromEvent:pz,findPositionOfValue:gO,setPositionFromValue:vz,onLeft:bz,onRight:yz,onUp:xz,onDown:a6,edgeActions:i6});const US=(t,r)=>{St(t,I2(),{value:r})},hO=(t,r,a)=>{const l={min:p1(r),max:f1(r),range:nO(r),value:a,step:Ov(r),snap:F2(r),snapStart:KR(r),rounded:PS(r),hasMinEdge:rO(r),hasMaxEdge:YR(r),minBound:U2(t),maxBound:n6(t),screenRange:lO(t)};return V2(l)},wz=(t,r,a)=>{const l=hO(t,r,a);return US(t,l),l},Sz=(t,r)=>{const a=p1(r);US(t,a)},kz=(t,r)=>{const a=f1(r);US(t,a)},l6=(t,r,a,l)=>{const u=(t>0?Dp:FS)(Ng(a),p1(a),f1(a),Ov(a,l));return US(r,u),E.some(u)},pO=t=>(r,a,l)=>l6(t,r,a,l).map(Be),c6=t=>tO(t).map(r=>r.top),fO=(t,r,a,l,u)=>{const h=lO(t),v=l.bind(_=>E.some(s6(_,t))).getOr(0),x=u.bind(_=>E.some(s6(_,t))).getOr(h),C={min:p1(r),max:f1(r),range:nO(r),value:a,hasMinEdge:rO(r),hasMaxEdge:YR(r),minBound:U2(t),minOffset:0,maxBound:n6(t),maxOffset:h,centerMinEdge:v,centerMaxEdge:x};return Fl(C)},vO=(t,r,a,l,u,h)=>{const v=fO(r,h,a,l,u);return U2(r)-U2(t)+v},d6=(t,r,a,l)=>{const u=Ng(a),h=vO(t,l.getSpectrum(t),u,l.getTopEdge(t),l.getBottomEdge(t),a),v=Cn(r.element)/2;ve(r.element,"top",h-v+"px")},_z=E.none,Ez=E.none,Oz=pO(-1),Tz=pO(1),bO={"top-left":E.none(),top:E.some(JP),"top-right":E.none(),right:E.none(),"bottom-right":E.none(),bottom:E.some(nz),"bottom-left":E.none(),left:E.none()};var Lg=Object.freeze({__proto__:null,setValueFrom:wz,setToMin:Sz,setToMax:kz,findValueOfOffset:hO,getValueFromEvent:c6,findPositionOfValue:vO,setPositionFromValue:d6,onLeft:_z,onRight:Ez,onUp:Oz,onDown:Tz,edgeActions:bO});const WS=(t,r)=>{St(t,I2(),{value:r})},Mp=(t,r)=>({x:t,y:r}),Dz=(t,r,a)=>{const l=dO(t,r,a.left),u=hO(t,r,a.top),h=Mp(l,u);return WS(t,h),h},yO=(t,r,a,l,u)=>{const h=t>0?Dp:FS,v=r?Ng(l).x:h(Ng(l).x,Sc(l),vm(l),Ov(l,u)),x=r?h(Ng(l).y,p1(l),f1(l),Ov(l,u)):Ng(l).y;return WS(a,Mp(v,x)),E.some(v)},$S=(t,r)=>(a,l,u)=>yO(t,r,a,l,u).map(Be),Mz=(t,r)=>{const a=Sc(r),l=p1(r);WS(t,Mp(a,l))},Az=(t,r)=>{const a=vm(r),l=f1(r);WS(t,Mp(a,l))},u6=t=>tO(t),Rz=(t,r,a,l)=>{const u=Ng(a),h=gO(t,l.getSpectrum(t),u.x,l.getLeftEdge(t),l.getRightEdge(t),a),v=vO(t,l.getSpectrum(t),u.y,l.getTopEdge(t),l.getBottomEdge(t),a),x=Un(r.element)/2,C=Cn(r.element)/2;ve(r.element,"left",h-x+"px"),ve(r.element,"top",v-C+"px")},xO=$S(-1,!1),CO=$S(1,!1),wO=$S(-1,!0),Bz=$S(1,!0),Ec={"top-left":E.some(QP),top:E.some(ez),"top-right":E.some(tz),right:E.some(QR),"bottom-right":E.some(JR),bottom:E.some(rz),"bottom-left":E.some(sz),left:E.some(iz)};var Nz=Object.freeze({__proto__:null,setValueFrom:Dz,setToMin:Mz,setToMax:Az,getValueFromEvent:u6,setPositionFromValue:Rz,onLeft:xO,onRight:CO,onUp:wO,onDown:Bz,edgeActions:Ec});const Lz=[ge("stepSize",1),ge("speedMultiplier",10),ge("onChange",J),ge("onChoose",J),ge("onInit",J),ge("onDragStart",J),ge("onDragEnd",J),ge("snapToGrid",!1),ge("rounded",!0),_o("snapStart"),$s("model",yr("mode",{x:[ge("minX",0),ge("maxX",100),Ns("value",t=>Dt(t.mode.minX)),xe("getInitialValue"),en("manager",Cz)],y:[ge("minY",0),ge("maxY",100),Ns("value",t=>Dt(t.mode.minY)),xe("getInitialValue"),en("manager",Lg)],xy:[ge("minX",0),ge("maxX",100),ge("minY",0),ge("maxY",100),Ns("value",t=>Dt({x:t.mode.minX,y:t.mode.minY})),xe("getInitialValue"),en("manager",Nz)]})),In("sliderBehaviours",[_t,nt]),Ns("mouseIsDown",()=>Dt(!1))],xd=Js({name:"Slider",configFields:Lz,partFields:KP,factory:(t,r,a,l)=>{const u=be=>lm(be,t,"thumb"),h=be=>lm(be,t,"spectrum"),v=be=>Lo(be,t,"left-edge"),x=be=>Lo(be,t,"right-edge"),C=be=>Lo(be,t,"top-edge"),_=be=>Lo(be,t,"bottom-edge"),M=t.model,A=M.manager,B=(be,Fe)=>{A.setPositionFromValue(be,Fe,t,{getLeftEdge:v,getRightEdge:x,getTopEdge:C,getBottomEdge:_,getSpectrum:h})},F=(be,Fe)=>{M.value.set(Fe);const et=u(be);B(be,et)},oe=(be,Fe)=>{F(be,Fe);const et=u(be);return t.onChange(be,et,Fe),E.some(!0)},ce=be=>{A.setToMin(be,t)},De=be=>{A.setToMax(be,t)},Q=be=>{const Fe=()=>{Lo(be,t,"thumb").each(ct=>{const eo=M.value.get();t.onChoose(be,ct,eo)})},et=t.mouseIsDown.get();t.mouseIsDown.set(!1),et&&Fe()},ee=(be,Fe)=>{Fe.stop(),t.mouseIsDown.set(!0),t.onDragStart(be,u(be))},fe=(be,Fe)=>{Fe.stop(),t.onDragEnd(be,u(be)),Q(be)},Ne=be=>{Lo(be,t,"spectrum").map(_t.focusIn)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.sliderBehaviours,[_t.config({mode:"special",focusIn:Ne}),nt.config({store:{mode:"manual",getValue:be=>M.value.get(),setValue:F}}),ja.config({channels:{[Wf()]:{onReceive:Q}}})]),events:Jo([Re(I2(),(be,Fe)=>{oe(be,Fe.event.value)}),wn((be,Fe)=>{const et=M.getInitialValue();M.value.set(et);const ct=u(be);B(be,ct);const eo=h(be);t.onInit(be,ct,eo,M.value.get())}),Re(Gc(),ee),Re(qm(),fe),Re(Wa(),(be,Fe)=>{Ne(be),ee(be,Fe)}),Re(ob(),fe)]),apis:{resetToMin:ce,resetToMax:De,setValue:F,refresh:B},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,a)=>{t.setValue(r,a)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),jS=gt("rgb-hex-update"),m6=gt("slider-update"),g6=gt("palette-update"),Hz=(t,r)=>{const a=xd.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=xd.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return xd.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:se(0)},components:[a,l],sliderBehaviours:We([Lt.config({})]),onChange:(u,h,v)=>{W(u.element,"aria-valuenow",Math.floor(360-v*3.6)),St(u,m6,{value:v})}})},h6="form",Iz=[In("formBehaviours",[nt])],p6=t=>"<alloy.field."+t+">",Pz=t=>{const r=(()=>{const h=[];return{field:(v,x)=>(h.push(v),K0(h6,p6(v),x)),record:se(h)}})(),a=t(r),l=r.record(),u=Ie(l,h=>Kr({name:h,pname:p6(h)}));return cm(h6,Iz,u,zz,a)},f6=(t,r)=>t.fold(()=>Wt.error(r),Wt.value),zz=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.formBehaviours,[nt.config({store:{mode:"manual",getValue:a=>{const l=mw(a,t);return Yo(l,(u,h)=>u().bind(v=>{const x=go.getCurrent(v);return f6(x,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+Qc(v.element)))}).map(nt.getValue))},setValue:(a,l)=>{Xn(l,(u,h)=>{Lo(a,t,h).each(v=>{go.getCurrent(v).each(x=>{nt.setValue(x,u)})})})}}})]),apis:{getField:(a,l)=>Lo(a,t,l).bind(go.getCurrent)}}),Tv={getField:ff((t,r,a)=>t.getField(r,a)),sketch:Pz},v6=gt("valid-input"),SO=gt("invalid-input"),GS=gt("validating-input"),kO="colorcustom.rgb.",_O=(t,r,a,l)=>{const u=(M,A)=>fm.config({invalidClass:r("invalid"),notify:{onValidate:B=>{St(B,GS,{type:M})},onValid:B=>{St(B,v6,{type:M,value:nt.getValue(B)})},onInvalid:B=>{St(B,SO,{type:M,value:nt.getValue(B)})}},validator:{validate:B=>{const F=nt.getValue(B),oe=A(F)?Wt.value(!0):Wt.error(t("aria.input.invalid"));return Es.pure(oe)},validateOnLoad:!1}}),h=(M,A,B,F,oe)=>{const ce=t(kO+"range"),De=Po.parts.label({dom:{tag:"label",attributes:{"aria-label":F}},components:[tr(B)]}),Q=Po.parts.field({data:oe,factory:i1,inputAttributes:{type:"text",...A==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:We([u(A,M),Pn.config({})]),onSetValue:be=>{fm.isInvalid(be)&&fm.run(be).get(J)}}),ee=[De,Q],fe=A!=="hex"?[Po.parts["aria-descriptor"]({text:ce})]:[],Ne=ee.concat(fe);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ne}},v=(M,A)=>{const B=du(A);return Tv.getField(M,"hex").each(F=>{Lt.isFocused(F)||nt.setValue(M,{hex:B.value})}),B},x=(M,A)=>{const B=A.red,F=A.green,oe=A.blue;nt.setValue(M,{red:B,green:F,blue:oe})},C=Io({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(M,A)=>{C.getOpt(M).each(B=>{ve(B.element,"background-color","#"+A.value)})};return vi({factory:()=>{const M={red:Dt(E.some(255)),green:Dt(E.some(255)),blue:Dt(E.some(255)),hex:Dt(E.some("ffffff"))},A=(K,G)=>{const he=Cv(G);x(K,he),ce(he)},B=K=>M[K].get(),F=(K,G)=>{M[K].set(G)},oe=()=>B("red").bind(K=>B("green").bind(G=>B("blue").map(he=>hm(K,G,he,1)))),ce=K=>{const G=K.red,he=K.green,Ee=K.blue;F("red",E.some(G)),F("green",E.some(he)),F("blue",E.some(Ee))},De=(K,G)=>{const he=G.event;he.type!=="hex"?F(he.type,E.none()):l(K)},Q=(K,G)=>{a(K);const he=IA(G);F("hex",E.some(he.value));const Ee=Cv(he);x(K,Ee),ce(Ee),St(K,jS,{hex:he}),_(K,he)},ee=(K,G,he)=>{const Ee=parseInt(he,10);F(G,E.some(Ee)),oe().each(dt=>{const _e=v(K,dt);St(K,jS,{hex:_e}),_(K,_e)})},fe=K=>K.type==="hex",Ne=(K,G)=>{const he=G.event;fe(he)?Q(K,he.value):ee(K,he.type,he.value)},be=K=>({label:t(kO+K+".label"),description:t(kO+K+".description")}),Fe=be("red"),et=be("green"),ct=be("blue"),eo=be("hex");return ao(Tv.sketch(K=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[K.field("red",Po.sketch(h(wE,"red",Fe.label,Fe.description,255))),K.field("green",Po.sketch(h(wE,"green",et.label,et.description,255))),K.field("blue",Po.sketch(h(wE,"blue",ct.label,ct.description,255))),K.field("hex",Po.sketch(h(bi,"hex",eo.label,eo.description,"ffffff"))),C.asSpec()],formBehaviours:We([fm.config({invalidClass:r("form-invalid")}),Yt("rgb-form-events",[Re(v6,Ne),Re(SO,De),Re(GS,De)])])})),{apis:{updateHex:(K,G)=>{nt.setValue(K,{hex:G.value}),A(K,G),_(K,G)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(M,A,B)=>{M.updateHex(A,B)}},extraApis:{}})},Dv=(t,r)=>{const a=xd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),l=xd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(x,C)=>{const{width:_,height:M}=x,A=x.getContext("2d");if(A===null)return;A.fillStyle=C,A.fillRect(0,0,_,M);const B=A.createLinearGradient(0,0,_,0);B.addColorStop(0,"rgba(255,255,255,1)"),B.addColorStop(1,"rgba(255,255,255,0)"),A.fillStyle=B,A.fillRect(0,0,_,M);const F=A.createLinearGradient(0,0,0,M);F.addColorStop(0,"rgba(0,0,0,0)"),F.addColorStop(1,"rgba(0,0,0,1)"),A.fillStyle=F,A.fillRect(0,0,_,M)},h=(x,C)=>{const _=x.components()[0].element.dom,M=D2(C,100,100),A=SE(M);u(_,E2(A))},v=(x,C)=>{const _=_S(Cv(C));xd.setValue(x,{x:_.saturation,y:100-_.value}),W(x.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",_.saturation,_.value]))};return vi({factory:x=>{const C=se({x:0,y:0}),_=(B,F,oe)=>{Os(oe)||W(B.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(oe.x),Math.floor(100-oe.y)])),St(B,g6,{value:oe})},M=(B,F,oe,ce)=>{u(oe.element.dom,E2(zA))},A=We([go.config({find:E.some}),Lt.config({})]);return xd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:C},rounded:!1,components:[a,l],onChange:_,onInit:M,sliderBehaviours:A})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(x,C,_)=>{h(C,_)},setThumb:(x,C,_)=>{v(C,_)}},extraApis:{}})},b6=(t,r)=>{const a=l=>{const u=_O(t,r,l.onValidHex,l.onInvalidHex),h=Dv(t,r),v=be=>(100-be)/100*360,x=be=>100-be/360*100,C={paletteRgba:Dt(zA),paletteHue:Dt(0)},_=Io(Hz(t,r)),M=Io(h.sketch({})),A=Io(u.sketch({})),B=(be,Fe,et)=>{M.getOpt(be).each(ct=>{h.setHue(ct,et)})},F=(be,Fe)=>{A.getOpt(be).each(et=>{u.updateHex(et,Fe)})},oe=(be,Fe,et)=>{_.getOpt(be).each(ct=>{xd.setValue(ct,x(et))})},ce=(be,Fe)=>{M.getOpt(be).each(et=>{h.setThumb(et,Fe)})},De=(be,Fe)=>{const et=Cv(be);C.paletteRgba.set(et),C.paletteHue.set(Fe)},Q=(be,Fe,et,ct)=>{De(Fe,et),at(ct,eo=>{eo(be,Fe,et)})},ee=()=>{const be=[F];return(Fe,et)=>{const ct=et.event.value,eo=C.paletteHue.get(),K=D2(eo,ct.x,100-ct.y),G=EE(K);Q(Fe,G,eo,be)}},fe=()=>{const be=[B,F];return(Fe,et)=>{const ct=v(et.event.value),eo=C.paletteRgba.get(),K=_S(eo),G=D2(ct,K.saturation,K.value),he=EE(G);Q(Fe,he,ct,be)}},Ne=()=>{const be=[B,oe,ce];return(Fe,et)=>{const ct=et.event.hex,eo=KA(ct);Q(Fe,ct,eo.hue,be)}};return{uid:l.uid,dom:l.dom,components:[M.asSpec(),_.asSpec(),A.asSpec()],behaviours:We([Yt("colour-picker-events",[Re(jS,Ne()),Re(g6,ee()),Re(m6,fe())]),go.config({find:be=>A.getOpt(be)}),_t.config({mode:"acyclic"})])}};return vi({name:"ColourPicker",configFields:[xe("dom"),ge("onValidHex",J),ge("onInvalidHex",J)],factory:a})},Oc={self:()=>go.config({find:E.some}),memento:t=>go.config({find:t.getOpt}),childAt:t=>go.config({find:r=>vl(r.element,t).bind(a=>r.getSystem().getByDom(a).toOptional())})},y6=it([ge("preprocess",so),ge("postprocess",so)]),Fz=(t,r)=>{const a=Ea("RepresentingConfigs.memento processors",y6,r);return nt.config({store:{mode:"manual",getValue:l=>{const u=t.get(l),h=nt.getValue(u);return a.postprocess(h)},setValue:(l,u)=>{const h=a.preprocess(u),v=t.get(l);nt.setValue(v,h)}}})},v1=(t,r,a)=>nt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:a}}),W2=(t,r,a)=>v1(t,l=>r(l.element),(l,u)=>a(l.element,u)),Vz=t=>W2(t,J1,fh),KS=t=>nt.config({store:{mode:"memory",initialValue:t}}),x6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},C6=t=>r=>Pt(r)?t.translate(x6[r]):t.translate(r),EO=(t,r,a)=>{const l=C=>"tox-"+C,u=b6(C6(r),l),h=C=>{St(C,gu,{name:"hex-valid",value:!0})},v=C=>{St(C,gu,{name:"hex-valid",value:!1})},x=Io(u.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:v}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:We([v1(a,C=>{const _=x.get(C);return go.getCurrent(_).bind(M=>nt.getValue(M).hex).map(M=>"#"+Ed(M,"#")).getOr("")},(C,_)=>{const M=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,A=E.from(M.exec(_)).bind(F=>On(F,1)),B=x.get(C);go.getCurrent(B).fold(()=>{console.log("Can not find form")},F=>{nt.setValue(F,{hex:A.getOr("")}),Tv.getField(F,"hex").each(oe=>{Eo(oe,Ym())})})}),Oc.self()])}};var w6=tinymce.util.Tools.resolve("tinymce.Resource");const Ya=t=>bo(t,"init"),S6=t=>{const r=un(),a=Io({dom:{tag:t.tag}}),l=un();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:We([Yt("custom-editor-events",[wn(u=>{a.getOpt(u).each(h=>{(Ya(t)?t.init(h.element.dom):w6.load(t.scriptId,t.scriptUrl).then(v=>v(h.element.dom,t.settings))).then(v=>{l.on(x=>{v.setValue(x)}),l.clear(),r.set(v)})})})]),v1(E.none(),()=>r.get().fold(()=>l.get().getOr(""),u=>u.getValue()),(u,h)=>{r.get().fold(()=>l.set(h),v=>v.setValue(h))}),Oc.self()]),components:[a.asSpec()]}};var Hg=tinymce.util.Tools.resolve("tinymce.util.Tools");const Zz=(t,r)=>{const a=Hg.explode(r.getOption("images_file_types")),l=u=>xr(a,h=>wa(u.name.toLowerCase(),`.${h.toLowerCase()}`));return qo(Ds(t),l)},k6=(t,r,a)=>{const l=(B,F)=>{F.stop()},u=B=>(F,oe)=>{at(B,ce=>{ce(F,oe)})},h=(B,F)=>{var oe;if(!wt.isDisabled(B)){const ce=F.event.raw;x(B,(oe=ce.dataTransfer)===null||oe===void 0?void 0:oe.files)}},v=(B,F)=>{const oe=F.event.raw.target;x(B,oe.files)},x=(B,F)=>{F&&(nt.setValue(B,Zz(F,r)),St(B,sl,{name:t.name}))},C=Io({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:We([Yt("input-file-events",[Wu(Vu()),Wu(rf())])])}),_=B=>({uid:B.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:We([KS(a.getOr([])),Oc.self(),wt.config({}),oo.config({toggleClass:"dragenter",toggleOnExecute:!1}),Yt("dropzone-events",[Re("dragenter",u([l,oo.toggle])),Re("dragleave",u([l,oo.toggle])),Re("dragover",l),Re("drop",u([l,h])),Re(Qm(),v)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[tr(r.translate("Drop an image here"))]},Lr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[tr(r.translate("Browse for an image")),C.asSpec()],action:F=>{C.get(F).element.dom.click()},buttonBehaviours:We([Pn.config({}),bd.button(r.isDisabled),Hr()])})]}]}),M=t.label.map(B=>Sp(B,r)),A=Po.parts.field({factory:{sketch:_}});return R2(M,A,["tox-form__group--stretched"],[])},Uz=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ie(t.items,r.interpreter)}),Wz=(t,r)=>{let a=null,l=null;return{cancel:()=>{Ao(a)||(clearTimeout(a),a=null,l=null)},throttle:(...u)=>{l=u,Ao(a)&&(a=setTimeout(()=>{const h=l;a=null,l=null,t.apply(null,h)},r))}}},$z=(t,r)=>{let a=null;return{cancel:()=>{Ao(a)||(clearTimeout(a),a=null)},throttle:(...l)=>{Ao(a)&&(a=setTimeout(()=>{a=null,t.apply(null,l)},r))}}},XS=(t,r)=>{let a=null;const l=()=>{Ao(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...u)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,u)},r)}}},Cd=gt("alloy-fake-before-tabstop"),$2=gt("alloy-fake-after-tabstop"),OO=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:We([Lt.config({ignore:!0}),Pn.config({})])}),j2=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[OO([Cd]),r,OO([$2])],behaviours:We([Oc.childAt(1)])}),qS=(t,r)=>{St(t,Ui(),{raw:{which:9,shiftKey:r}})},jz=(t,r)=>{const a=r.element;ls(a,Cd)?qS(t,!0):ls(a,$2)&&qS(t,!1)},G2=t=>M2(t,["."+Cd,"."+$2].join(","),Ge),YS=gt("update-dialog"),_6=gt("update-title"),E6=gt("update-body"),O6=gt("update-footer"),T6=gt("body-send-message"),K2=gt("dialog-focus-shifted"),TO=Bs().browser,Vl=TO.isSafari(),QS=TO.isFirefox(),D6=Vl||QS,Gz=TO.isChromium(),M6=({scrollTop:t,scrollHeight:r,clientHeight:a})=>Math.ceil(t)+a>=r,DO=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),MO=(t,r)=>{const a=t.body;return E.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!Gz&&!Vl||bn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},X2=(t,r,a)=>{const l=t.dom;E.from(l.contentDocument).fold(a,u=>{let h=0;const v=MO(u,r).map(C=>(h=C.scrollTop,C)).forall(M6),x=()=>{const C=l.contentWindow;bn(C)&&(v?DO(C,"bottom"):!v&&D6&&h!==0&&DO(C,h))};Vl&&l.addEventListener("load",x,{once:!0}),u.open(),u.write(r),u.close(),Vl||x()})},q2=At(D6,Vl?500:200).map(t=>Wz(X2,t)),Y2=(t,r)=>{const a=Dt(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,u)=>{if(a.get()!==u){const h=l.element,v=()=>W(h,"srcdoc",u);r?q2.fold(se(X2),x=>x.throttle)(h,u,v):v()}a.set(u)}}},A6=(t,r,a)=>{const l="tox-dialog__iframe",u=t.transparent?[]:[`${l}--opaque`],h=t.border?["tox-navobj-bordered"]:[],v={...t.label.map(A=>({title:A})).getOr({}),...a.map(A=>({srcdoc:A})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},x=Y2(a,t.streamContent),C=t.label.map(A=>Sp(A,r)),_=A=>j2(E.from(h),{uid:A.uid,dom:{tag:"iframe",attributes:v,classes:[l,...u]},behaviours:We([Pn.config({}),Lt.config({}),v1(a,x.getValue,x.setValue),ja.config({channels:{[K2]:{onReceive:(B,F)=>{F.newFocus.each(oe=>{Fs(B.element).each(ce=>{(Vo(B.element,oe)?Kt:Tn)(ce,"tox-navobj-bordered-focus")})})}}}})])}),M=Po.parts.field({factory:{sketch:_}});return R2(C,M,["tox-form__group--stretched"],[])},R6=t=>new Promise((r,a)=>{const l=()=>{h(),r(t)},u=[Xs(t,"load",l),Xs(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>at(u,v=>v.unbind());t.dom.complete&&l()}),B6=(t,r,a,l,u)=>{const h=a*u,v=l*u,x=Math.max(0,t/2-h/2),C=Math.max(0,r/2-v/2);return{left:x.toString()+"px",top:C.toString()+"px",width:h.toString()+"px",height:v.toString()+"px"}},N6=(t,r,a)=>{const l=Un(t),u=Cn(t);return Math.min(l/r,u/a,1)},Kz=(t,r)=>{const a=Dt(r.getOr({url:""})),l=Io({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(C=>({src:C.url})).getOr({})}}),u=Io({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),h=(C,_)=>{const M={url:_.url};_.zoom.each(B=>M.zoom=B),_.cachedWidth.each(B=>M.cachedWidth=B),_.cachedHeight.each(B=>M.cachedHeight=B),a.set(M);const A=()=>{const{cachedWidth:B,cachedHeight:F,zoom:oe}=M;if(!Mn(B)&&!Mn(F)){if(Mn(oe)){const De=N6(C.element,B,F);M.zoom=De}const ce=B6(Un(C.element),Cn(C.element),B,F,M.zoom);u.getOpt(C).each(De=>{Rs(De.element,ce)})}};l.getOpt(C).each(B=>{const F=B.element;_.url!==ut(F,"src")&&(W(F,"src",_.url),Tn(C.element,"tox-imagepreview__loaded")),A(),R6(F).then(oe=>{C.getSystem().isConnected()&&(Kt(C.element,"tox-imagepreview__loaded"),M.cachedWidth=oe.dom.naturalWidth,M.cachedHeight=oe.dom.naturalHeight,A())})})},v={};t.height.each(C=>v.height=C);const x=r.map(C=>({url:C.url,zoom:E.from(C.zoom),cachedWidth:E.from(C.cachedWidth),cachedHeight:E.from(C.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:v,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:We([Oc.self(),v1(x,()=>a.get(),h)])}},Xz=(t,r)=>{const a="tox-label",l=t.align==="center"?[`${a}--center`]:[],u=t.align==="end"?[`${a}--end`]:[],h={dom:{tag:"label",classes:[a,...l,...u]},components:[tr(r.providers.translate(t.label))]},v=Ie(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h,...v],behaviours:We([Oc.self(),Zt.config({}),Vz(E.none()),_t.config({mode:"acyclic"})])}},L6=gt("toolbar.button.execute"),qz=t=>gi((r,a)=>{vS(t,r)(l=>{St(r,L6,{buttonApi:l}),t.onAction(l)})}),b1=gt("common-button-display-events"),AO={[ma()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[dc()]:["toolbar-button-events",b1],[Wa()]:["focusing","alloy.base.behaviour",b1]},JS=t=>ve(t.element,"width",Sr(t.element,"width")),H6=(t,r,a)=>fd(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},r),e4=(t,r)=>H6(t,r,[]),Ap=(t,r)=>H6(t,r,[Zt.config({})]),RO=(t,r,a)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[tr(a.translate(t))],behaviours:We([Zt.config({})])}),Qa=gt("update-menu-text"),y1=gt("update-menu-icon"),t4=(t,r,a)=>{const l=Dt(J),u=t.text.map(A=>Io(RO(A,r,a.providers))),h=t.icon.map(A=>Io(Ap(A,a.providers.icons))),v=(A,B)=>{const F=nt.getValue(A);return Lt.focus(F),St(F,"keydown",{raw:B.event.raw}),wc.close(F),E.some(!0)},x=t.role.fold(()=>({}),A=>({role:A})),C=t.tooltip.fold(()=>({}),A=>{const B=a.providers.translate(A);return{title:B,"aria-label":B}}),_=fd("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},a.providers.icons),M=gt("common-button-display-events");return Io(wc.sketch({...t.uid?{uid:t.uid}:{},...x,dom:{tag:"button",classes:[r,`${r}--select`].concat(Ie(t.classes,A=>`${r}--${A}`)),attributes:{...C}},components:c1([h.map(A=>A.asSpec()),u.map(A=>A.asSpec()),E.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(A,B,F)=>{t.searchable&&cP(F)},dropdownBehaviours:We([...t.dropdownBehaviours,bd.button(()=>t.disabled||a.providers.isDisabled()),Hr(),L2.config({}),Zt.config({}),Yt("dropdown-events",[Rg(t,l),Cp(t,l)]),Yt(M,[wn((A,B)=>JS(A))]),Yt("menubutton-update-display-text",[Re(Qa,(A,B)=>{u.bind(F=>F.getOpt(A)).each(F=>{Zt.set(F,[tr(a.providers.translate(B.event.text))])})}),Re(y1,(A,B)=>{h.bind(F=>F.getOpt(A)).each(F=>{Zt.set(F,[Ap(B.event.icon,a.providers.icons)])})})])]),eventOrder:ao(AO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[dc()]:["toolbar-button-events","dropdown-events",M]}),sandboxBehaviours:We([_t.config({mode:"special",onLeft:v,onRight:v}),Yt("dropdown-sandbox-events",[Re(q_,(A,B)=>{aP(A),B.stop()}),Re(QM,(A,B)=>{iP(A,B),B.stop()})])]),lazySink:a.getSink,toggleClass:`${r}--active`,parts:{menu:{...aS(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:yR,onCollapseMenu:(A,B,F)=>{wo.getHighlighted(F).each(oe=>{yR(A,F,oe)})},onDehighlightItem:pm}},getAnchorOverrides:()=>({maxHeightFunction:(A,B)=>{Wb()(A,B-10)}}),fetch:A=>Es.nu(io(t.fetch,A))})).asSpec()},Yz=t=>Pt(t),I6=t=>t.type==="separator",Qz=t=>bo(t,"getSubmenuItems"),Jz={type:"separator"},P6=(t,r)=>{const a=on(t,(l,u)=>Yz(u)?u===""?l:u==="|"?l.length>0&&!I6(l[l.length-1])?l.concat([Jz]):l:bo(r,u.toLowerCase())?l.concat([r[u.toLowerCase()]]):l:l.concat([u]),[]);return a.length>0&&I6(a[a.length-1])&&a.pop(),a},eF=(t,r)=>{const a=t.getSubmenuItems(),l=o4(a,r),u=ao(l.menus,{[t.value]:l.items}),h=ao(l.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:h}},z6=t=>{const r=ot(t,"value").getOrThunk(()=>gt("generated-menu-item"));return ao({value:r},t)},o4=(t,r)=>{const a=P6(Pt(t)?t.split(" "):t,r);return Bn(a,(l,u)=>{if(Qz(u)){const h=z6(u),v=eF(h,r);return{menus:ao(l.menus,v.menus),items:[v.item,...l.items],expansions:ao(l.expansions,v.expansions)}}else return{...l,items:[u,...l.items]}},{menus:{},expansions:{},items:[]})},Ig=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),F6=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),x1=(t,r,a,l)=>{const u=gt("primary-menu"),h=o4(t,a.shared.providers.menuItems());if(h.items.length===0)return E.none();const v=Ig(l),x=xR(u,h.items,r,a,l.isHorizontalMenu,v),C=F6(l),_=Yo(h.menus,(A,B)=>xR(B,A,r,a,!1,C)),M=ao(_,jr(u,x));return E.from(e1.tieredData(u,M,h.expansions))},n4=t=>!bo(t,"items"),r4="data-value",BO=(t,r,a,l)=>Ie(a,u=>n4(u)?{type:"togglemenuitem",text:u.text,value:u.value,active:u.value===l,onAction:()=>{nt.setValue(t,u.value),St(t,sl,{name:r}),Lt.focus(t)}}:{type:"nestedmenuitem",text:u.text,getSubmenuItems:()=>BO(t,r,u.items,l)}),Mv=(t,r)=>hr(t,a=>n4(a)?At(a.value===r,a):Mv(a.items,r)),V6=(t,r,a)=>{const l=r.shared.providers,u=a.bind(C=>Mv(t.items,C)).orThunk(()=>Ts(t.items).filter(n4)),h=t.label.map(C=>Sp(C,l)),v=Po.parts.field({dom:{},factory:{sketch:C=>t4({uid:C.uid,text:u.map(_=>_.text),icon:E.none(),tooltip:t.label,role:E.none(),fetch:(_,M)=>{const A=BO(_,t.name,t.items,nt.getValue(_));M(x1(A,cu.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:E.none()}))},onSetup:se(J),getApi:se({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Pn.config({}),v1(u.map(_=>_.value),_=>ut(_.element,r4),(_,M)=>{Mv(t.items,M).each(A=>{W(_.element,r4,A.value),St(_,Qa,{text:A.text})})})]},"tox-listbox",r.shared)}}),x={dom:{tag:"div",classes:["tox-listboxfield"]},components:[v]};return Po.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Bt([h.toArray(),[x]]),fieldBehaviours:We([wt.config({disabled:se(!t.enabled),onDisabled:C=>{Po.getField(C).each(wt.disable)},onEnabled:C=>{Po.getField(C).each(wt.enable)}})])})},Z6=(t,r)=>({dom:{tag:"div",classes:t.classes},components:Ie(t.items,r.shared.interpreter)}),tF=(t,r)=>{const a=Ie(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),l=t.data.map(u=>jr("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Rr(t.selectBehaviours,[Lt.config({}),nt.config({store:{mode:"manual",getValue:u=>cs(u.element),setValue:(u,h)=>{const v=Ts(t.options);It(t.options,x=>x.value===h).isSome()?Zd(u.element,h):u.element.dom.selectedIndex===-1&&h===""&&v.each(x=>Zd(u.element,x.value))},...l}})])}},oF=vi({name:"HtmlSelect",configFields:[xe("options"),In("selectBehaviours",[Lt,nt]),ge("selectClasses",[]),ge("selectAttributes",{}),_o("data")],factory:tF}),nF=(t,r,a)=>{const l=Ie(t.items,C=>({text:r.translate(C.text),value:C.value})),u=t.label.map(C=>Sp(C,r)),h=Po.parts.field({dom:{},...a.map(C=>({data:C})).getOr({}),selectAttributes:{size:t.size},options:l,factory:oF,selectBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled()}),Pn.config({}),Yt("selectbox-change",[Re(Qm(),(C,_)=>{St(C,sl,{name:t.name})})])])}),v=t.size>1?E.none():E.some(fd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),x={dom:{tag:"div",classes:["tox-selectfield"]},components:Bt([[h],v.toArray()])};return Po.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Bt([u.toArray(),[x]]),fieldBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:C=>{Po.getField(C).each(wt.disable)},onEnabled:C=>{Po.getField(C).each(wt.enable)}}),Hr()])})},rF=se([ge("field1Name","field1"),ge("field2Name","field2"),td("onLockedChange"),jd(["lockClass"]),ge("locked",!1),Xi.field("coupledFieldBehaviours",[go,nt])]),sF=(t,r,a)=>Lo(t,r,a).bind(go.getCurrent),NO=(t,r)=>Kr({factory:Po,name:t,overrides:a=>({fieldBehaviours:We([Yt("coupled-input-behaviour",[Re(Ym(),l=>{sF(l,a,r).each(u=>{Lo(l,a,"lock").each(h=>{oo.isOn(h)&&a.onLockedChange(l,u,h)})})})])])})}),U6=se([NO("field1","field2"),NO("field2","field1"),Kr({factory:Lr,schema:[xe("dom")],name:"lock",overrides:t=>({buttonBehaviours:We([oo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),aF=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Xi.augment(t.coupledFieldBehaviours,[go.config({find:E.some}),nt.config({store:{mode:"manual",getValue:u=>{const h=nu(u,t,["field1","field2"]);return{[t.field1Name]:nt.getValue(h.field1()),[t.field2Name]:nt.getValue(h.field2())}},setValue:(u,h)=>{const v=nu(u,t,["field1","field2"]);ra(h,t.field1Name)&&nt.setValue(v.field1(),h[t.field1Name]),ra(h,t.field2Name)&&nt.setValue(v.field2(),h[t.field2Name])}}})]),apis:{getField1:u=>Lo(u,t,"field1"),getField2:u=>Lo(u,t,"field2"),getLock:u=>Lo(u,t,"lock")}}),Zl=Js({name:"FormCoupledInputs",configFields:rF(),partFields:U6(),factory:aF,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),iF=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in r?r[u]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},Av=t=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(r!==null){const a=parseFloat(r[1]),l=r[2];return Wt.value({value:a,unit:l})}else return Wt.error(t)},W6=(t,r)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>bo(a,u);return t.unit===r?E.some(t.value):l(t.unit)&&l(r)?a[t.unit]===a[r]?E.some(t.value):E.some(t.value/a[t.unit]*a[r]):E.none()},LO=t=>E.none(),$6=(t,r)=>a=>W6(a,r).map(l=>({value:l*t,unit:r})),j6=(t,r)=>{const a=Av(t).toOptional(),l=Av(r).toOptional();return Pa(a,l,(u,h)=>W6(u,h.unit).map(v=>h.value/v).map(v=>$6(v,h.unit)).getOr(LO)).getOr(LO)},lF=(t,r)=>{let a=LO;const l=gt("ratio-event"),u=A=>fd(A,{tag:"span",classes:["tox-icon","tox-lock-icon__"+A]},r.icons),h=Zl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[u("lock"),u("unlock")],buttonBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled()}),Hr(),Pn.config({})])}),v=A=>({dom:{tag:"div",classes:["tox-form__group"]},components:A}),x=A=>Po.parts.field({factory:i1,inputClasses:["tox-textfield"],inputBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled()}),Hr(),Pn.config({}),Yt("size-input-events",[Re(as(),(B,F)=>{St(B,l,{isField1:A})}),Re(Qm(),(B,F)=>{St(B,sl,{name:t.name})})])]),selectOnFocus:!1}),C=A=>({dom:{tag:"label",classes:["tox-label"]},components:[tr(r.translate(A))]}),_=Zl.parts.field1(v([Po.parts.label(C("Width")),x(!0)])),M=Zl.parts.field2(v([Po.parts.label(C("Height")),x(!1)]));return Zl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,M,v([C(Qb),h])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(A,B,F)=>{Av(nt.getValue(A)).each(oe=>{a(oe).each(ce=>{nt.setValue(B,iF(ce))})})},coupledFieldBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:A=>{Zl.getField1(A).bind(Po.getField).each(wt.disable),Zl.getField2(A).bind(Po.getField).each(wt.disable),Zl.getLock(A).each(wt.disable)},onEnabled:A=>{Zl.getField1(A).bind(Po.getField).each(wt.enable),Zl.getField2(A).bind(Po.getField).each(wt.enable),Zl.getLock(A).each(wt.enable)}}),Hr(),Yt("size-input-events2",[Re(l,(A,B)=>{const F=B.event.isField1,oe=F?Zl.getField1(A):Zl.getField2(A),ce=F?Zl.getField2(A):Zl.getField1(A),De=oe.map(nt.getValue).getOr(""),Q=ce.map(nt.getValue).getOr("");a=j6(De,Q)})])])})},cF=(t,r,a)=>{const l=xd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tr(r.translate(t.label))]}),u=xd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=xd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return xd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:se(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,u,h],sliderBehaviours:We([Oc.self(),Lt.config({})]),onChoose:(v,x,C)=>{St(v,sl,{name:t.name,value:C})}})},HO=(t,r)=>{const a=x=>({dom:{tag:"th",innerHtml:r.translate(x)}}),l=x=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ie(x,a)}]}),u=x=>({dom:{tag:"td",innerHtml:r.translate(x)}}),h=x=>({dom:{tag:"tr"},components:Ie(x,u)}),v=x=>({dom:{tag:"tbody"},components:Ie(x,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),v(t.cells)],behaviours:We([Pn.config({}),Lt.config({})])}},G6=(t,r)=>{const a=t.label.map(B=>Sp(B,r)),l=[wt.config({disabled:()=>t.disabled||r.isDisabled()}),Hr(),_t.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:B=>(Eo(B,N2),E.some(!0))}),Yt("textfield-change",[Re(Ym(),(B,F)=>{St(B,sl,{name:t.name})}),Re(rb(),(B,F)=>{St(B,sl,{name:t.name})})]),Pn.config({})],u=t.validation.map(B=>fm.config({getRoot:F=>Fs(F.element),invalidClass:"tox-invalid",validator:{validate:F=>{const oe=nt.getValue(F),ce=B.validator(oe);return Es.pure(ce===!0?Wt.value(oe):Wt.error(ce))},validateOnLoad:B.validateOnLoad}})).toArray(),h=t.placeholder.fold(se({}),B=>({placeholder:r.translate(B)})),v=t.inputMode.fold(se({}),B=>({inputmode:B})),x={...h,...v},C=Po.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(B=>({data:B})).getOr({}),inputAttributes:x,inputClasses:[t.classname],inputBehaviours:We(Bt([l,u])),selectOnFocus:!1,factory:i1}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[C]}:C,M=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),A=[wt.config({disabled:()=>t.disabled||r.isDisabled(),onDisabled:B=>{Po.getField(B).each(wt.disable)},onEnabled:B=>{Po.getField(B).each(wt.enable)}}),Hr()];return R2(a,_,M,A)},K6=(t,r,a)=>G6({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:E.none(),maximized:t.maximized,data:a},r),dF=(t,r,a)=>G6({name:t.name,multiline:!0,label:t.label,inputMode:E.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:E.none(),maximized:t.maximized,data:a},r),Q2=(t,r)=>r.getAnimationRoot.fold(()=>t.element,a=>a(t)),Pg=t=>t.dimension.property,Rp=(t,r)=>t.dimension.getDimension(r),J2=(t,r)=>{const a=Q2(t,r);xs(a,[r.shrinkingClass,r.growingClass])},IO=(t,r)=>{Tn(t.element,r.openClass),Kt(t.element,r.closedClass),ve(t.element,Pg(r),"0px"),Va(t.element)},PO=(t,r)=>{Tn(t.element,r.closedClass),Kt(t.element,r.openClass),xo(t.element,Pg(r))},X6=(t,r,a,l)=>{a.setCollapsed(),ve(t.element,Pg(r),Rp(r,t.element)),J2(t,r),IO(t,r),r.onStartShrink(t),r.onShrunk(t)},uF=(t,r,a,l)=>{const u=l.getOrThunk(()=>Rp(r,t.element));a.setCollapsed(),ve(t.element,Pg(r),u),Va(t.element);const h=Q2(t,r);Tn(h,r.growingClass),Kt(h,r.shrinkingClass),IO(t,r),r.onStartShrink(t)},zO=(t,r,a)=>{const l=Rp(r,t.element);(l==="0px"?X6:uF)(t,r,a,E.some(l))},q6=(t,r,a)=>{const l=Q2(t,r),u=ls(l,r.shrinkingClass),h=Rp(r,t.element);PO(t,r);const v=Rp(r,t.element);(u?()=>{ve(t.element,Pg(r),h),Va(t.element)}:()=>{IO(t,r)})(),Tn(l,r.shrinkingClass),Kt(l,r.growingClass),PO(t,r),ve(t.element,Pg(r),v),a.setExpanded(),r.onStartGrow(t)},Y6=(t,r,a)=>{if(a.isExpanded()){xo(t.element,Pg(r));const l=Rp(r,t.element);ve(t.element,Pg(r),l)}},mF=(t,r,a)=>{a.isExpanded()||q6(t,r,a)},gF=(t,r,a)=>{a.isExpanded()&&zO(t,r,a)},hF=(t,r,a)=>{a.isExpanded()&&X6(t,r,a)},pF=(t,r,a)=>a.isExpanded(),fF=(t,r,a)=>a.isCollapsed(),Q6=(t,r,a)=>{const l=Q2(t,r);return ls(l,r.growingClass)===!0},J6=(t,r,a)=>{const l=Q2(t,r);return ls(l,r.shrinkingClass)===!0};var vF=Object.freeze({__proto__:null,refresh:Y6,grow:mF,shrink:gF,immediateShrink:hF,hasGrown:pF,hasShrunk:fF,isGrowing:Q6,isShrinking:J6,isTransitioning:(t,r,a)=>Q6(t,r)||J6(t,r),toggleGrow:(t,r,a)=>{(a.isExpanded()?zO:q6)(t,r,a)},disableTransitions:J2,immediateGrow:(t,r,a)=>{a.isExpanded()||(PO(t,r),ve(t.element,Pg(r),Rp(r,t.element)),J2(t,r),a.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),bF=Object.freeze({__proto__:null,exhibit:(t,r,a)=>{const l=r.expanded;return $i(l?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:jr(r.dimension.property,"0px")})},events:(t,r)=>Jo([$u(di(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(J2(a,t),r.isExpanded()&&xo(a.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),FO=[xe("closedClass"),xe("openClass"),xe("shrinkingClass"),xe("growingClass"),_o("getAnimationRoot"),mo("onShrunk"),mo("onStartShrink"),mo("onGrown"),mo("onStartGrow"),ge("expanded",!1),$s("dimension",yr("property",{width:[en("property","width"),en("getDimension",t=>Un(t)+"px")],height:[en("property","height"),en("getDimension",t=>Cn(t)+"px")]}))],yF=Object.freeze({__proto__:null,init:t=>{const r=Dt(t.expanded),a=()=>"expanded: "+r.get();return Da({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:io(r.set,!1),setExpanded:io(r.set,!0),readState:a})}});const al=Gr({fields:FO,name:"sliding",active:bF,apis:vF,state:yF}),eB=t=>({isEnabled:()=>!wt.isDisabled(t),setEnabled:r=>wt.set(t,!r),setActive:r=>{const a=t.element;r?(Kt(a,"tox-tbtn--enabled"),W(a,"aria-pressed",!0)):(Tn(a,"tox-tbtn--enabled"),vo(a,"aria-pressed"))},isActive:()=>ls(t.element,"tox-tbtn--enabled"),setText:r=>{St(t,Qa,{text:r})},setIcon:r=>St(t,y1,{icon:r})}),zg=(t,r,a,l,u=!0)=>t4({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,v)=>{const x={pattern:t.search.isSome()?dP(h):""};t.fetch(C=>{v(x1(C,cu.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},x,eB(h))},onSetup:t.onSetup,getApi:eB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...u?[Pn.config({})]:[]]},r,a.shared),VO=(t,r,a)=>{const l=h=>v=>{const x=!v.isActive();v.setActive(x),h.storage.set(x),a.shared.getSink().each(C=>{r().getOpt(C).each(_=>{tt(_.element),St(_,gu,{name:h.name,value:h.storage.get()})})})},u=h=>v=>{v.setActive(h.storage.get())};return h=>{h(Ie(t,v=>{const x=v.text.fold(()=>({}),C=>({text:C}));return{type:v.type,active:!1,...x,onAction:l(v),onSetup:u(v)}}))}},tB=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[tr(t)]}),oB=gt("leaf-label-event-id"),ex=({leaf:t,onLeafAction:r,visible:a,treeId:l,selectedId:u,backstage:h})=>{const v=t.menu.map(C=>zg(C,"tox-mbtn",h,E.none(),a)),x=[tB(t.title)];return v.each(C=>x.push(C)),Lr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:x,role:"treeitem",action:C=>{r(t.id),C.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Ui()]:[oB,"keying"]},buttonBehaviours:We([...a?[Pn.config({})]:[],oo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ja.config({channels:{[`update-active-item-${l}`]:{onReceive:(C,_)=>{(_.value===t.id?oo.on:oo.off)(C)}}}}),Yt(oB,[wn((C,_)=>{u.each(M=>{(M===t.id?oo.on:oo.off)(C)})}),Re(Ui(),(C,_)=>{const M=_.event.raw.code==="ArrowLeft",A=_.event.raw.code==="ArrowRight";M?(pi(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(F=>{Wd(B,".tox-tree--directory__label").each(oe=>{F.getSystem().getByDom(oe).each(Lt.focus)})})}),_.stop()):A&&_.stop()})])])})},xF=(t,r,a)=>fd(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},r),ZO=(t,r)=>xF(t,r,[]),UO=gt("directory-label-event-id"),CF=({directory:t,visible:r,noChildren:a,backstage:l})=>{const u=t.menu.map(x=>zg(x,"tox-mbtn",l,E.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[ZO("chevron-right",l.shared.providers.icons)]},tB(t.title)];u.each(x=>{h.push(x)});const v=x=>{pi(x.element,".tox-tree--directory").each(C=>{x.getSystem().getByDom(C).each(_=>{const M=!oo.isOn(_);oo.toggle(_),St(x,"expand-tree-node",{expanded:M,node:t.id})})})};return Lr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:h,action:v,eventOrder:{[Ui()]:[UO,"keying"]},buttonBehaviours:We([...r?[Pn.config({})]:[],Yt(UO,[Re(Ui(),(x,C)=>{const _=C.event.raw.code==="ArrowRight",M=C.event.raw.code==="ArrowLeft";_&&a&&C.stop(),(_||M)&&pi(x.element,".tox-tree--directory").each(A=>{x.getSystem().getByDom(A).each(B=>{!oo.isOn(B)&&_||oo.isOn(B)&&M?(v(x),C.stop()):M&&!oo.isOn(B)&&(pi(B.element,".tox-tree--directory").each(F=>{Wd(F,".tox-tree--directory__label").each(oe=>{B.getSystem().getByDom(oe).each(Lt.focus)})}),C.stop())})})})])])})},wF=({children:t,onLeafAction:r,visible:a,treeId:l,expandedIds:u,selectedId:h,backstage:v})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(x=>x.type==="leaf"?ex({leaf:x,selectedId:h,onLeafAction:r,visible:a,treeId:l,backstage:v}):s4({directory:x,expandedIds:u,selectedId:h,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:v})),behaviours:We([al.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Zt.config({})])}),nB=gt("directory-event-id"),s4=({directory:t,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:u,expandedIds:h,selectedId:v})=>{const{children:x}=t,C=Dt(h),_=A=>x.map(B=>B.type==="leaf"?ex({leaf:B,selectedId:v,onLeafAction:r,visible:A,treeId:l,backstage:u}):s4({directory:B,expandedIds:C.get(),selectedId:v,onLeafAction:r,labelTabstopping:A,treeId:l,backstage:u})),M=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[CF({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),wF({children:x,expandedIds:h,selectedId:v,onLeafAction:r,visible:M,treeId:l,backstage:u})],behaviours:We([Yt(nB,[wn((A,B)=>{oo.set(A,M)}),Re("expand-tree-node",(A,B)=>{const{expanded:F,node:oe}=B.event;C.set(F?[...C.get(),oe]:C.get().filter(ce=>ce!==oe))})]),oo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(A,B)=>{const F=A.components()[1],oe=_(B);B?al.grow(F):al.shrink(F),Zt.set(F,oe)}})])}},SF=gt("tree-event-id"),rB=(t,r)=>{const a=t.onLeafAction.getOr(J),l=t.onToggleExpand.getOr(J),u=t.defaultExpandedIds,h=Dt(u),v=Dt(t.defaultSelectedId),x=gt("tree-id"),C=(_,M)=>t.items.map(A=>A.type==="leaf"?ex({leaf:A,selectedId:_,onLeafAction:a,visible:!0,treeId:x,backstage:r}):s4({directory:A,selectedId:_,onLeafAction:a,expandedIds:M,labelTabstopping:!0,treeId:x,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:C(v.get(),h.get()),behaviours:We([_t.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Yt(SF,[Re("expand-tree-node",(_,M)=>{const{expanded:A,node:B}=M.event;h.set(A?[...h.get(),B]:h.get().filter(F=>F!==B)),l(h.get(),{expanded:A,node:B})})]),ja.config({channels:{[`update-active-item-${x}`]:{onReceive:(_,M)=>{v.set(E.some(M.value)),Zt.set(_,C(E.some(M.value),h.get()))}}}}),Zt.config({})])}};var sB=Object.freeze({__proto__:null,events:(t,r)=>{const a=t.stream.streams.setup(t,r);return Jo([Re(t.event,a),mi(()=>r.cancel())].concat(t.cancelEvent.map(l=>[Re(l,()=>r.cancel())]).getOr([])))}});const aB=t=>{const r=Dt(null);return Da({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:a=>{r.set(a)},cancel:()=>{const a=r.get();a!==null&&a.cancel()}})};var iB=Object.freeze({__proto__:null,throttle:aB,init:t=>t.stream.streams.state(t)});const lB=(t,r)=>{const a=t.stream,l=XS(t.onStream,a.delay);return r.setTimer(l),(u,h)=>{l.throttle(u,h),a.stopEvent&&h.stop()}};var cB=[$s("stream",yr("mode",{throttle:[xe("delay"),ge("stopEvent",!0),en("streams",{setup:lB,state:aB})]})),ge("event","input"),_o("cancelEvent"),td("onStream")];const WO=Gr({fields:cB,name:"streaming",active:sB,state:iB}),a4=(t,r,a)=>{const l=nt.getValue(a);nt.setValue(r,l),$O(r)},dB=(t,r)=>{const a=t.element,l=cs(a),u=a.dom;ut(a,"type")!=="number"&&r(u,l)},$O=t=>{dB(t,(r,a)=>r.setSelectionRange(a.length,a.length))},kF=(t,r)=>{dB(t,(a,l)=>a.setSelectionRange(r,l.length))},uB=(t,r,a)=>{if(t.selectsOver){const l=nt.getValue(r),u=t.getDisplayText(l),h=nt.getValue(a);return t.getDisplayText(h).indexOf(u)===0?E.some(()=>{a4(t,r,a),kF(r,u.length)}):E.none()}else return E.none()},jO=se("alloy.typeahead.itemexecute"),_F=(t,r,a,l)=>{const u=(A,B,F)=>{t.previewing.set(!1);const oe=or.getCoupled(A,"sandbox");if(lo.isOpen(oe))go.getCurrent(oe).each(ce=>{wo.getHighlighted(ce).fold(()=>{F(ce)},()=>{q1(oe,ce.element,"keydown",B)})});else{const ce=De=>{go.getCurrent(De).each(F)};wv(t,v(A),A,oe,l,ce,va.HighlightMenuAndItem).get(J)}},h=qM(t),v=A=>B=>B.map(F=>{const oe=hl(F.menus),ce=me(oe,De=>qo(De.items,Q=>Q.type==="item"));return nt.getState(A).update(Ie(ce,De=>De.data)),F}),x=A=>go.getCurrent(A),C="typeaheadevents",_=[Lt.config({}),nt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:A=>cs(A.element),getFallbackEntry:A=>({value:A,meta:{}}),setValue:(A,B)=>{Zd(A.element,t.model.getDisplayText(B))},...t.initialData.map(A=>jr("initialValue",A)).getOr({})}}),WO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(A,B)=>{const F=or.getCoupled(A,"sandbox");if(Lt.isFocused(A)&&cs(A.element).length>=t.minChars){const oe=x(F).bind(De=>wo.getHighlighted(De).map(nt.getValue));t.previewing.set(!0);const ce=De=>{x(F).each(Q=>{oe.fold(()=>{t.model.selectsOver&&wo.highlightFirst(Q)},ee=>{wo.highlightBy(Q,fe=>nt.getValue(fe).value===ee.value),wo.getHighlighted(Q).orThunk(()=>(wo.highlightFirst(Q),E.none()))})})};wv(t,v(A),A,F,l,ce,va.HighlightJustMenu).get(J)}},cancelEvent:eg()}),_t.config({mode:"special",onDown:(A,B)=>(u(A,B,wo.highlightFirst),E.some(!0)),onEscape:A=>{const B=or.getCoupled(A,"sandbox");return lo.isOpen(B)?(lo.close(B),E.some(!0)):E.none()},onUp:(A,B)=>(u(A,B,wo.highlightLast),E.some(!0)),onEnter:A=>{const B=or.getCoupled(A,"sandbox"),F=lo.isOpen(B);if(F&&!t.previewing.get())return x(B).bind(oe=>wo.getHighlighted(oe)).map(oe=>(St(A,jO(),{item:oe}),!0));{const oe=nt.getValue(A);return Eo(A,eg()),t.onExecute(B,A,oe),F&&lo.close(B),E.some(!0)}}}),oo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),or.config({others:{sandbox:A=>WE(t,A,{onOpen:()=>oo.on(A),onClose:()=>{t.lazyTypeaheadComp.get().each(B=>vo(B.element,"aria-activedescendant")),oo.off(A)}})}}),Yt(C,[wn(A=>{t.lazyTypeaheadComp.set(E.some(A))}),mi(A=>{t.lazyTypeaheadComp.set(E.none())}),gi(A=>{const B=J;NS(t,v(A),A,l,B,va.HighlightMenuAndItem).get(J)}),Re(jO(),(A,B)=>{const F=or.getCoupled(A,"sandbox");a4(t.model,A,B.event.item),Eo(A,eg()),t.onItemExecute(A,F,B.event.item,nt.getValue(A)),lo.close(F),$O(A)})].concat(t.dismissOnBlur?[Re(Jm(),A=>{const B=or.getCoupled(A,"sandbox");mc(B.element).isNone()&&lo.close(B)})]:[]))],M={[qc()]:[nt.name(),WO.name(),C],...t.eventOrder};return{uid:t.uid,dom:YM(ao(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Rr(t.typeaheadBehaviours,_)},eventOrder:M}},GO=se([_o("lazySink"),xe("fetch"),ge("minChars",5),ge("responseTime",1e3),mo("onOpen"),ge("getHotspot",E.some),ge("getAnchorOverrides",se({})),ge("layouts",E.none()),ge("eventOrder",{}),ah("model",{},[ge("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ge("selectsOver",!0),ge("populateFromBrowse",!0)]),mo("onSetValue"),Ma("onExecute"),mo("onItemExecute"),ge("inputClasses",[]),ge("inputAttributes",{}),ge("inputStyles",{}),ge("matchWidth",!0),ge("useMinWidth",!1),ge("dismissOnBlur",!0),jd(["openClass"]),_o("initialData"),In("typeaheadBehaviours",[Lt,nt,WO,_t,oo,or]),Ns("lazyTypeaheadComp",()=>Dt(E.none)),Ns("previewing",()=>Dt(!0))].concat(p2()).concat($E())),EF=se([Yi({schema:[Qu()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{uB(t.model,u,l).fold(()=>{t.model.selectsOver?(wo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&a4(t.model,u,l),Tt(l.element,"id").each(h=>W(u.element,"aria-activedescendant",h))})},onExecute:(r,a)=>t.lazyTypeaheadComp.get().map(l=>(St(l,jO(),{item:a}),!0)),onHover:(r,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&a4(t.model,l,a)})}})})]),OF=Js({name:"Typeahead",configFields:GO(),partFields:EF(),factory:_F}),wd=t=>({...t,toCached:()=>wd(t.toCached()),bindFuture:r=>wd(t.bind(a=>a.fold(l=>Es.pure(Wt.error(l)),l=>r(l)))),bindResult:r=>wd(t.map(a=>a.bind(r))),mapResult:r=>wd(t.map(a=>a.map(r))),mapError:r=>wd(t.map(a=>a.mapError(r))),foldResult:(r,a)=>t.map(l=>l.fold(r,a)),withTimeout:(r,a)=>wd(Es.nu(l=>{let u=!1;const h=setTimeout(()=>{u=!0,l(Wt.error(a()))},r);t.get(v=>{u||(clearTimeout(h),l(v))})}))}),KO=t=>wd(Es.nu(t)),mB=t=>wd(Es.pure(Wt.value(t))),gB={nu:KO,wrap:wd,pure:mB,value:mB,error:t=>wd(Es.pure(Wt.error(t))),fromResult:t=>wd(Es.pure(t)),fromFuture:t=>wd(t.map(Wt.value)),fromPromise:t=>KO(r=>{t.then(a=>{r(Wt.value(a))},a=>{r(Wt.error(a))})})},i4=(t,r,a=[],l,u,h)=>{const v=r.fold(()=>({}),_=>({action:_})),x={buttonBehaviours:We([bd.button(()=>!t.enabled||h.isDisabled()),Hr(),Pn.config({}),Yt("button press",[df("click"),df("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},C=ao(x,{dom:l});return ao(C,{components:u})},hB=(t,r,a,l=[])=>{const u=t.tooltip.map(C=>({"aria-label":a.translate(C),title:a.translate(C)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:u},v=t.icon.map(C=>e4(C,a.icons)),x=c1([v]);return i4(t,r,l,h,x,a)},XO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},pB=(t,r,a,l=[],u=[])=>{const h=a.translate(t.text),v=t.icon.map(M=>e4(M,a.icons)),x=[v.getOrThunk(()=>tr(h))],C=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),_={tag:"button",classes:[...XO(C),...v.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{title:h}};return i4(t,r,l,_,x,a)},fB=(t,r,a,l=[],u=[])=>{const h=pB(t,E.some(r),a,l,u);return Lr.sketch(h)},vB=(t,r)=>a=>{r==="custom"?St(a,gu,{name:t,value:{}}):r==="submit"?Eo(a,N2):r==="cancel"?Eo(a,kp):console.error("Unknown button type: ",r)},TF=(t,r)=>r==="menu",bB=(t,r)=>r==="custom"||r==="cancel"||r==="submit",DF=(t,r)=>r==="togglebutton",MF=(t,r)=>{var a,l;const u=t.icon.map(Q=>Ap(Q,r.icons)).map(Io),h=Q=>{St(Q,gu,{name:t.name,value:{setIcon:ee=>{u.map(fe=>fe.getOpt(Q).each(Ne=>{Zt.set(Ne,[Ap(ee,r.icons)])}))}}})},v=t.buttonType.getOr(t.primary?"primary":"secondary"),x={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:v==="primary",tooltip:E.from(t.tooltip),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1},C=x.tooltip.map(Q=>({"aria-label":r.translate(Q),title:r.translate(Q)})).getOr({}),_=XO(v??"secondary"),M=t.icon.isSome()&&t.text.isSome(),A={tag:"button",classes:[..._.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...M?["tox-button--icon-and-text"]:[]],attributes:C},B=[],F=r.translate(t.text.getOr("")),oe=tr(F),ce=[...c1([u.map(Q=>Q.asSpec())]),...t.text.isSome()?[oe]:[]],De=i4(x,E.some(h),B,A,ce,r);return Lr.sketch(De)},tx=(t,r,a)=>{if(TF(t,r)){const l=()=>v,u=t,h={...t,type:"menubutton",search:E.none(),onSetup:x=>(x.setEnabled(t.enabled),J),fetch:VO(u.items,l,a)},v=Io(zg(h,"tox-tbtn",a,E.none()));return v.asSpec()}else if(bB(t,r)){const l=vB(t.name,r),u={...t,borderless:!1};return fB(u,l,a.shared.providers,[])}else{if(DF(t,r))return MF(t,a.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")}},AF=(t,r)=>{const a=vB(t.name,"custom");return BP(E.none(),Po.parts.field({factory:Lr,...pB(t,E.some(a),r,[KS(""),Oc.self()])}))},RF={type:"separator"},BF=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:J}),l4=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:J}),NF=t=>Ie(t,BF),LF=(t,r)=>qo(r,a=>a.type===t),yB=(t,r)=>NF(LF(t,r)),xB=t=>yB("header",t.targets),CB=t=>yB("anchor",t.targets),wB=t=>E.from(t.anchorTop).map(r=>l4("<top>",r)).toArray(),c4=t=>E.from(t.anchorBottom).map(r=>l4("<bottom>",r)).toArray(),HF=t=>Ie(t,r=>l4(r,r)),IF=t=>on(t,(r,a)=>r.length===0||a.length===0?r.concat(a):r.concat(RF,a),[]),qO=(t,r)=>{const a=t.toLowerCase();return qo(r,l=>{var u;const h=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,v=(u=l.value)!==null&&u!==void 0?u:"";return Pr(h.toLowerCase(),a)||Pr(v.toLowerCase(),a)})},PF=(t,r,a)=>{var l,u;const h=nt.getValue(r),v=(u=(l=h==null?void 0:h.meta)===null||l===void 0?void 0:l.text)!==null&&u!==void 0?u:h.value;return a.getLinkInformation().fold(()=>[],x=>{const C=qO(v,HF(a.getHistory(t)));return t==="file"?IF([C,qO(v,xB(x)),qO(v,Bt([wB(x),CB(x),c4(x)]))]):C})},YO=gt("aria-invalid"),zF=(t,r,a,l)=>{const u=r.shared.providers,h=Q=>{const ee=nt.getValue(Q);a.addToHistory(ee.value,t.filetype)},v={...l.map(Q=>({initialData:Q})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":YO,type:"url"},minChars:0,responseTime:0,fetch:Q=>{const ee=PF(t.filetype,Q,a),fe=x1(ee,cu.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:E.none()});return Es.pure(fe)},getHotspot:Q=>F.getOpt(Q),onSetValue:(Q,ee)=>{Q.hasConfigured(fm)&&fm.run(Q).get(J)},typeaheadBehaviours:We([...a.getValidationHandler().map(Q=>fm.config({getRoot:ee=>Fs(ee.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ee,fe)=>{_.getOpt(ee).each(Ne=>{W(Ne.element,"title",u.translate(fe))})}},validator:{validate:ee=>{const fe=nt.getValue(ee);return gB.nu(Ne=>{Q({type:t.filetype,url:fe.value},be=>{if(be.status==="invalid"){const Fe=Wt.error(be.message);Ne(Fe)}else{const Fe=Wt.value(be.message);Ne(Fe)}})})},validateOnLoad:!1}})).toArray(),wt.config({disabled:()=>!t.enabled||u.isDisabled()}),Pn.config({}),Yt("urlinput-events",[Re(Ym(),Q=>{const ee=cs(Q.element),fe=ee.trim();fe!==ee&&Zd(Q.element,fe),t.filetype==="file"&&St(Q,sl,{name:t.name})}),Re(Qm(),Q=>{St(Q,sl,{name:t.name}),h(Q)}),Re(rb(),Q=>{St(Q,sl,{name:t.name}),h(Q)})])]),eventOrder:{[Ym()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Q=>Q.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:aS(!1,1,"normal")},onExecute:(Q,ee,fe)=>{St(ee,N2,{})},onItemExecute:(Q,ee,fe,Ne)=>{h(Q),St(Q,sl,{name:t.name})}},x=Po.parts.field({...v,factory:OF}),C=t.label.map(Q=>Sp(Q,u)),_=Io(((Q,ee,fe=Q,Ne=Q)=>fd(fe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Q],attributes:{title:u.translate(Ne),"aria-live":"polite",...ee.fold(()=>({}),be=>({id:be}))}},u.icons))("invalid",E.some(YO),"warning")),M=Io({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),A=a.getUrlPicker(t.filetype),B=gt("browser.url.event"),F=Io({dom:{tag:"div",classes:["tox-control-wrap"]},components:[x,M.asSpec()],behaviours:We([wt.config({disabled:()=>!t.enabled||u.isDisabled()})])}),oe=Io(fB({name:t.name,icon:E.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:E.none(),borderless:!0},Q=>Eo(Q,B),u,[],["tox-browse-url"])),ce=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Bt([[F.asSpec()],A.map(()=>oe.asSpec()).toArray()])}),De=Q=>{go.getCurrent(Q).each(ee=>{const fe=nt.getValue(ee),Ne={fieldname:t.name,...fe};A.each(be=>{be(Ne).get(Fe=>{nt.setValue(ee,Fe),St(Q,sl,{name:t.name})})})})};return Po.sketch({dom:LP(),components:C.toArray().concat([ce()]),fieldBehaviours:We([wt.config({disabled:()=>!t.enabled||u.isDisabled(),onDisabled:Q=>{Po.getField(Q).each(wt.disable),oe.getOpt(Q).each(wt.disable)},onEnabled:Q=>{Po.getField(Q).each(wt.enable),oe.getOpt(Q).each(wt.enable)}}),Hr(),Yt("url-input-events",[Re(B,De)])])})},FF=(t,r)=>{const a=iv(t.icon,r.icons);return mu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Lr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:r.translate(t.iconTooltip)}},action:l=>St(l,gu,{name:"alert-banner",value:t.url}),buttonBehaviours:We([jw()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},VF=(t,r)=>{t.dom.checked=r},SB=t=>t.dom.checked,kB=(t,r,a)=>{const l=C=>(C.element.dom.click(),E.some(!0)),u=Po.parts.field({factory:{sketch:so},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:We([Oc.self(),wt.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:C=>{Fs(C.element).each(_=>Kt(_,"tox-checkbox--disabled"))},onEnabled:C=>{Fs(C.element).each(_=>Tn(_,"tox-checkbox--disabled"))}}),Pn.config({}),Lt.config({}),W2(a,SB,VF),_t.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),Yt("checkbox-events",[Re(Qm(),(C,_)=>{St(C,sl,{name:t.name})})])])}),h=Po.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[tr(r.translate(t.label))],behaviours:We([L2.config({})])}),v=C=>fd(C==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+C]},r.icons),x=Io({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[v("checked"),v("unchecked")]});return Po.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,x.asSpec(),h],fieldBehaviours:We([wt.config({disabled:()=>!t.enabled||r.isDisabled()}),Hr()])})},ZF=t=>t.presets==="presentation"?mu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):mu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:We([Pn.config({}),Lt.config({})])}),qr=t=>(r,a,l,u)=>ot(a,"name").fold(()=>t(a,u,E.none()),h=>r.field(h,t(a,u,ot(l,h)))),_B=t=>(r,a,l,u)=>{const h=ao(a,{source:"dynamic"});return qr(t)(r,h,l,u)},UF={bar:qr((t,r)=>DP(t,r.shared)),collection:qr((t,r,a)=>YE(t,r.shared.providers,a)),alertbanner:qr((t,r)=>FF(t,r.shared.providers)),input:qr((t,r,a)=>K6(t,r.shared.providers,a)),textarea:qr((t,r,a)=>dF(t,r.shared.providers,a)),label:qr((t,r)=>Xz(t,r.shared)),iframe:_B((t,r,a)=>A6(t,r.shared.providers,a)),button:qr((t,r)=>AF(t,r.shared.providers)),checkbox:qr((t,r,a)=>kB(t,r.shared.providers,a)),colorinput:qr((t,r,a)=>LS(t,r.shared,r.colorinput,a)),colorpicker:qr((t,r,a)=>EO(t,r.shared.providers,a)),dropzone:qr((t,r,a)=>k6(t,r.shared.providers,a)),grid:qr((t,r)=>Uz(t,r.shared)),listbox:qr((t,r,a)=>V6(t,r,a)),selectbox:qr((t,r,a)=>nF(t,r.shared.providers,a)),sizeinput:qr((t,r)=>lF(t,r.shared.providers)),slider:qr((t,r,a)=>cF(t,r.shared.providers,a)),urlinput:qr((t,r,a)=>zF(t,r,r.urlinput,a)),customeditor:qr(S6),htmlpanel:qr(ZF),imagepreview:qr((t,r,a)=>Kz(t,a)),table:qr((t,r)=>HO(t,r.shared.providers)),tree:qr((t,r)=>rB(t,r)),panel:qr((t,r)=>Z6(t,r))},WF={field:(t,r)=>r,record:se([])},Ft=(t,r,a,l)=>{const u=ao(l,{shared:{interpreter:h=>C1(t,h,a,u)}});return C1(t,r,a,u)},C1=(t,r,a,l)=>ot(UF,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),u=>u(t,r,a,l)),QO=(t,r,a)=>C1(WF,t,r,a),Fg="layout-inset",d4=t=>t.x,JO=(t,r)=>t.x+t.width/2-r.width/2,u4=(t,r)=>t.x+t.width-r.width,w1=t=>t.y,eT=(t,r)=>t.y+t.height-r.height,tT=(t,r)=>t.y+t.height/2-r.height/2,m4=(t,r,a)=>ws(u4(t,r),eT(t,r),a.insetSouthwest(),_b(),"southwest",Dr(t,{right:0,bottom:3}),Fg),g4=(t,r,a)=>ws(d4(t),eT(t,r),a.insetSoutheast(),Ah(),"southeast",Dr(t,{left:1,bottom:3}),Fg),ox=(t,r,a)=>ws(u4(t,r),w1(t),a.insetNorthwest(),Ce(),"northwest",Dr(t,{right:0,top:2}),Fg),Rv=(t,r,a)=>ws(d4(t),w1(t),a.insetNortheast(),p0(),"northeast",Dr(t,{left:1,top:2}),Fg),Ul=(t,r,a)=>ws(JO(t,r),w1(t),a.insetNorth(),f0(),"north",Dr(t,{top:2}),Fg),Bv=(t,r,a)=>ws(JO(t,r),eT(t,r),a.insetSouth(),Rh(),"south",Dr(t,{bottom:3}),Fg),EB=(t,r,a)=>ws(u4(t,r),tT(t,r),a.insetEast(),Eb(),"east",Dr(t,{right:0}),Fg),OB=(t,r,a)=>ws(d4(t),tT(t,r),a.insetWest(),Al(),"west",Dr(t,{left:1}),Fg),$F=t=>{switch(t){case"north":return Ul;case"northeast":return Rv;case"northwest":return ox;case"south":return Bv;case"southeast":return g4;case"southwest":return m4;case"east":return EB;case"west":return OB}},TB=(t,r,a,l,u)=>tm(l).map($F).getOr(Ul)(t,r,a,l,u),jF=t=>{switch(t){case"north":return Bv;case"northeast":return g4;case"northwest":return m4;case"south":return Ul;case"southeast":return Rv;case"southwest":return ox;case"east":return OB;case"west":return EB}},DB=(t,r,a,l,u)=>tm(l).map(jF).getOr(Ul)(t,r,a,l,u),nx={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},GF=(t,r,a)=>{const l={maxHeightFunction:gg()},u=()=>({type:"node",root:Vn(zr(t())),node:E.from(t()),bubble:gc(12,12,nx),layouts:{onRtl:()=>[Rv],onLtr:()=>[ox]},overrides:l}),h=()=>({type:"hotspot",hotspot:r(),bubble:gc(-12,12,nx),layouts:{onRtl:()=>[us,Ss,Mr],onLtr:()=>[Ss,us,Mr]},overrides:l});return()=>a()?u():h()},KF=(t,r,a,l)=>{const u={maxHeightFunction:gg()},h=()=>({type:"node",root:Vn(zr(r())),node:E.from(r()),bubble:gc(12,12,nx),layouts:{onRtl:()=>[Ul],onLtr:()=>[Ul]},overrides:u}),v=()=>t?{type:"node",root:Vn(zr(r())),node:E.from(r()),bubble:gc(0,-ec(r()),nx),layouts:{onRtl:()=>[Ls],onLtr:()=>[Ls]},overrides:u}:{type:"hotspot",hotspot:a(),bubble:gc(0,0,nx),layouts:{onRtl:()=>[Ls],onLtr:()=>[Ls]},overrides:u};return()=>l()?h():v()},XF=(t,r,a)=>{const l=()=>({type:"node",root:Vn(zr(t())),node:E.from(t()),layouts:{onRtl:()=>[Ul],onLtr:()=>[Ul]}}),u=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Mr],onLtr:()=>[Mr]}});return()=>a()?l():u()},qF=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const u=l[0],h=l[l.length-1],v={firstCell:Ke.fromDom(u),lastCell:Ke.fromDom(h)};return E.some(v)}return E.some(Rf.range(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}}),YF=t=>r=>({type:"node",root:t(),node:r}),QF=(t,r,a,l)=>{const u=cv(t),h=()=>Ke.fromDom(t.getBody()),v=()=>Ke.fromDom(t.getContentAreaContainer()),x=()=>u||!l();return{inlineDialog:GF(v,r,x),inlineBottomDialog:KF(t.inline,v,a,x),banner:XF(v,r,x),cursor:qF(t,h),node:YF(h)}},JF=t=>(r,a)=>{iR(t)(r,a)},e9=t=>()=>YA(t),t9=t=>r=>OS(t,r),o9=t=>r=>g1(t,r),MB=t=>({colorPicker:JF(t),hasCustomColors:e9(t),getColors:t9(t),getColorCols:o9(t)}),n9=t=>()=>PM(t),r9=t=>({isDraggableModal:n9(t)}),s9=t=>{const r=Dt(V_(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},AB=t=>ra(t,"items"),RB=t=>ra(t,"format"),BB=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],a9=t=>bo(t,"items"),i9=t=>bo(t,"block"),NB=t=>bo(t,"inline"),l9=t=>bo(t,"selector"),oT=t=>on(t,(r,a)=>{if(a9(a)){const l=oT(a.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:a.title,items:l.formats}])}}else if(NB(a)||i9(a)||l9(a)){const l=`custom-${Pt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:a}]),formats:r.formats.concat([{title:a.title,format:l,icon:a.icon}])}}else return{...r,formats:r.formats.concat(a)}},{customFormats:[],formats:[]}),LB=(t,r)=>{const a=oT(r),l=u=>{at(u,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},h4=t=>EM(t).map(r=>{const a=LB(t,r);return OM(t)?BB.concat(a):a}).getOr(BB),c9=t=>{const r=yn(t);return r.length===1&&zo(r,"title")},nT=(t,r,a)=>({...t,type:"formatter",isSelected:r(t.format),getStylePreview:a(t.format)}),rT=(t,r,a,l)=>{const u=C=>nT(C,a,l),h=C=>{const _=x(C.items);return{...C,type:"submenu",getStyleItems:se(_)}},v=C=>{const _=Pt(C.name)?C.name:gt(C.title),M=`custom-${_}`,A={...C,type:"formatter",format:M,isSelected:a(M),getStylePreview:l(M)};return t.formatter.register(_,A),A},x=C=>Ie(C,_=>AB(_)?h(_):RB(_)?u(_):c9(_)?{..._,type:"separator"}:v(_));return x(r)},d9=t=>{const r=v=>()=>t.formatter.match(v),a=v=>()=>{const x=t.formatter.get(v);return x!==void 0?E.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):E.none()},l=Dt([]),u=Dt([]),h=Dt(!1);return t.on("PreInit",v=>{const x=h4(t),C=rT(t,x,r,a);l.set(C)}),t.on("addStyleModifications",v=>{const x=rT(t,v.items,r,a);u.set(x),h.set(v.replace)}),{getData:()=>{const v=h.get()?[]:l.get(),x=u.get();return v.concat(x)}}},HB=t=>bn(t)&&t.nodeType===1,u9=Hg.trim,IB=t=>r=>!!(HB(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),pu=IB("true"),p4=IB("false"),rx=(t,r,a,l,u)=>({type:t,title:r,url:a,level:l,attach:u}),m9=t=>{let r=t;for(;r=r.parentNode;){const a=r.contentEditable;if(a&&a!=="inherit")return pu(r)}return!1},sT=(t,r)=>Ie(_s(Ke.fromDom(r),t),a=>a.dom),PB=t=>t.innerText||t.textContent,aT=t=>t.id?t.id:gt("h"),zB=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,iT=t=>zB(t)&&lT(t),FB=t=>t&&/^(H[1-6])$/.test(t.nodeName),lT=t=>m9(t)&&!p4(t),VB=t=>FB(t)&&lT(t),cT=t=>FB(t)?parseInt(t.nodeName.substr(1),10):0,g9=t=>{var r;const a=aT(t),l=()=>{t.id=a};return rx("header",(r=PB(t))!==null&&r!==void 0?r:"","#"+a,cT(t),l)},h9=t=>{const r=t.id||t.name,a=PB(t);return rx("anchor",a||"#"+r,"#"+r,0,J)},ZB=t=>Ie(qo(t,VB),g9),p9=t=>Ie(qo(t,iT),h9),f9=t=>sT("h1,h2,h3,h4,h5,h6,a:not([href])",t),UB=t=>u9(t.title).length>0,WB={find:t=>{const r=f9(t);return qo(ZB(r).concat(p9(r)),UB)}},f4="tinymce-url-history",$B=5,jB=t=>Pt(t)&&/^https?/.test(t),v9=t=>Ut(t)&&t.length<=$B&&ei(t,jB),dT=t=>Jt(t)&&Cr(t,r=>!v9(r)).isNone(),Sd=()=>{const t=wp.getItem(f4);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+f4+" was not valid JSON",a),{};throw a}return dT(r)?r:(console.log("Local storage "+f4+" was not valid format",r),{})},uT=t=>{if(!dT(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));wp.setItem(f4,JSON.stringify(t))},b9=t=>{const r=Sd();return ot(r,t).getOr([])},y9=(t,r)=>{if(!jB(t))return;const a=Sd(),l=ot(a,r).getOr([]),u=qo(l,h=>h!==t);a[r]=[t].concat(u).slice(0,$B),uT(a)},GB=t=>!!t,x9=t=>Yo(Hg.makeMap(t,/[, ]/),GB),mT=t=>E.from(NM(t)),KB=t=>{const r=E.from(HM(t)).filter(GB).map(x9);return mT(t).fold(Ge,a=>r.fold(Be,l=>yn(l).length>0?l:!1))},XB=(t,r)=>{const a=KB(t);return gr(a)?a?mT(t):E.none():a[r]?mT(t):E.none()},ea=(t,r)=>XB(t,r).map(a=>l=>Es.nu(u=>{const h=(x,C)=>{if(!Pt(x))throw new Error("Expected value to be string");if(C!==void 0&&!Jt(C))throw new Error("Expected meta to be a object");u({value:x,meta:C})},v={filetype:r,fieldname:l.fieldname,...E.from(l.meta).getOr({})};a.call(t,h,l.value,v)})),v4=t=>E.from(t).filter(Pt).getOrUndefined(),C9=t=>Jw(t)?E.some({targets:WB.find(t.getBody()),anchorTop:v4(pp(t)),anchorBottom:v4(IM(t))}):E.none(),b4=t=>E.from(N_(t)),w9=t=>({getHistory:b9,addToHistory:y9,getLinkInformation:()=>C9(t),getValidationHandler:()=>b4(t),getUrlPicker:r=>ea(t,r)}),S9=(t,r,a,l)=>{const u=Dt(!1),h=s9(r),v={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:ol.translate,isDisabled:()=>r.mode.isReadOnly()||!r.ui.isEnabled(),getOption:r.options.get},x=w9(r),C=d9(r),_=MB(r),M=r9(r),A=()=>u.get(),B=De=>u.set(De),F={shared:{providers:v,anchors:QF(r,a,l,h.isPositionedAtTop),header:h},urlinput:x,styles:C,colorinput:_,dialog:M,isContextMenuOpen:A,setContextMenuState:B},oe={...F,shared:{...F.shared,interpreter:De=>QO(De,{},oe),getSink:t.popup}},ce={...F,shared:{...F.shared,interpreter:De=>QO(De,{},ce),getSink:t.dialog}};return{popup:oe,dialog:ce}},k9=(t,r,a)=>{const l=(Fe,et)=>{at([r,...a],ct=>{ct.broadcastEvent(Fe,et)})},u=(Fe,et)=>{at([r,...a],ct=>{ct.broadcastOn([Fe],et)})},h=Fe=>u(ld(),{target:Fe.target}),v=Hd(),x=Xs(v,"touchstart",h),C=Xs(v,"touchmove",Fe=>l(Kc(),Fe)),_=Xs(v,"touchend",Fe=>l(Uu(),Fe)),M=Xs(v,"mousedown",h),A=Xs(v,"mouseup",Fe=>{Fe.raw.button===0&&u(Wf(),{target:Fe.target})}),B=Fe=>u(ld(),{target:Ke.fromDom(Fe.target)}),F=Fe=>{Fe.button===0&&u(Wf(),{target:Ke.fromDom(Fe.target)})},oe=()=>{at(t.editorManager.get(),Fe=>{t!==Fe&&Fe.dispatch("DismissPopups",{relatedTarget:t})})},ce=Fe=>l(Xc(),LC(Fe)),De=Fe=>{u(vg(),{}),l(tg(),LC(Fe))},Q=zr(Ke.fromDom(t.getElement())),ee=Fb(Q,"scroll",Fe=>{requestAnimationFrame(()=>{if(t.getContainer()!=null){const ct=h1(t,r.element).map(eo=>[eo.element,...eo.others]).getOr([]);xr(ct,eo=>Vo(eo,Fe.target))&&(t.dispatch("ElementScroll",{target:Fe.target.dom}),l(sb(),Fe))}})}),fe=()=>u(vg(),{}),Ne=Fe=>{Fe.state&&u(ld(),{target:Ke.fromDom(t.getContainer())})},be=Fe=>{u(ld(),{target:Ke.fromDom(Fe.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",B),t.on("tap",B),t.on("mouseup",F),t.on("mousedown",oe),t.on("ScrollWindow",ce),t.on("ResizeWindow",De),t.on("ResizeEditor",fe),t.on("AfterProgressState",Ne),t.on("DismissPopups",be)}),t.on("remove",()=>{t.off("click",B),t.off("tap",B),t.off("mouseup",F),t.off("mousedown",oe),t.off("ScrollWindow",ce),t.off("ResizeWindow",De),t.off("ResizeEditor",fe),t.off("AfterProgressState",Ne),t.off("DismissPopups",be),M.unbind(),x.unbind(),C.unbind(),_.unbind(),A.unbind(),ee.unbind()}),t.on("detach",()=>{at([r,...a],Gh),at([r,...a],Fe=>Fe.destroy())})},gs=R3,bm=cw,_9=se([ge("shell",!1),xe("makeItem"),ge("setupItem",J),Xi.field("listBehaviours",[Zt])]),E9=Qi({name:"items",overrides:()=>({behaviours:We([Zt.config({})])})}),O9=se([E9]),qB=se("CustomList"),y4=(t,r,a,l)=>{const u=(x,C)=>{v(x).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const M=Zt.contents(_),A=C.length,B=A-M.length,F=B>0?Xo(B,()=>t.makeItem()):[],oe=M.slice(A);at(oe,De=>Zt.remove(_,De)),at(F,De=>Zt.append(_,De));const ce=Zt.contents(_);at(ce,(De,Q)=>{t.setupItem(x,De,C[Q],Q)})})},h=t.shell?{behaviours:[Zt.config({})],components:[]}:{behaviours:[],components:r},v=x=>t.shell?E.some(x):Lo(x,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Rr(t.listBehaviours,h.behaviours),apis:{setItems:u}}},YB=Js({name:qB(),configFields:_9(),partFields:O9(),factory:y4,apis:{setItems:(t,r,a)=>{t.setItems(r,a)}}}),S1=se([xe("dom"),ge("shell",!0),In("toolbarBehaviours",[Zt])]),T9=se([Qi({name:"groups",overrides:()=>({behaviours:We([Zt.config({})])})})]),QB=(t,r,a,l)=>{const u=(x,C)=>{h(x).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Zt.set(_,C)})},h=x=>t.shell?E.some(x):Lo(x,t,"groups"),v=t.shell?{behaviours:[Zt.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:v.components,behaviours:Rr(t.toolbarBehaviours,v.behaviours),apis:{setGroups:u,refresh:J},domModification:{attributes:{role:"group"}}}},fu=Js({name:"Toolbar",configFields:S1(),partFields:T9(),factory:QB,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)}}}),D9=J,JB=Ge,e8=se([]);var M9=Object.freeze({__proto__:null,setup:D9,isDocked:JB,getBehaviours:e8});const gT=t=>(Ms(Wo(t,"position"),"fixed")?E.none():Mi(t)).orThunk(()=>{const r=Ke.fromTag("span");return ns(t).bind(a=>{_r(a,r);const l=Mi(r);return xl(r),l})}),hT=t=>gT(t).map(Fr).getOrThunk(()=>gn(0,0)),pT=(t,r)=>{const a=t.element;Kt(a,r.transitionClass),Tn(a,r.fadeOutClass),Kt(a,r.fadeInClass),r.onShow(t)},A9=(t,r)=>{const a=t.element;Kt(a,r.transitionClass),Tn(a,r.fadeInClass),Kt(a,r.fadeOutClass),r.onHide(t)},R9=(t,r)=>t.y<r.bottom&&t.bottom>r.y,fT=(t,r)=>t.y>=r.y,t8=(t,r)=>t.bottom<=r.bottom,vT=(t,r,a)=>({location:"top",leftX:r,topY:a.bounds.y-t.y}),bT=(t,r,a)=>({location:"bottom",leftX:r,bottomY:t.bottom-a.bounds.bottom}),yT=t=>t.box.x-t.win.x,xT=(t,r,a)=>{const l=r.win,u=r.box,h=yT(r);return hr(t,v=>{switch(v){case"bottom":return t8(u,a.bounds)?E.none():E.some(bT(l,h,a));case"top":return fT(u,a.bounds)?E.none():E.some(vT(l,h,a));default:return E.none()}}).getOr({location:"no-dock"})},o8=(t,r,a)=>ei(t,l=>{switch(l){case"bottom":return t8(r,a.bounds);case"top":return fT(r,a.bounds)}}),B9=(t,r)=>{const a=r.optScrollEnv.fold(se(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return gn(t.bounds.x,a)},N9=(t,r)=>{const a=r.optScrollEnv.fold(se(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return gn(t.x,a)},CT=(t,r,a)=>a.getInitialPos().map(l=>{const u=B9(l,r);return{box:Jn(u.left,u.top,Un(t),Cn(t)),location:l.location}}),n8=(t,r,a,l,u)=>{const h=N9(r,a),v=Jn(h.left,h.top,r.width,r.height);l.setInitialPos({style:bl(t),position:Sr(t,"position")||"static",bounds:v,location:u.location})},r8=(t,r,a,l,u)=>{l.getInitialPos().fold(()=>n8(t,r,a,l,u),()=>J)},s8=(t,r,a)=>a.getInitialPos().bind(l=>{var u;switch(a.clearInitialPos(),l.position){case"static":return E.some({morph:"static"});case"absolute":const h=gT(t).getOr(fr()),v=Nn(h),x=(u=h.dom.scrollTop)!==null&&u!==void 0?u:0;return E.some({morph:"absolute",positionCss:Gi("absolute",ot(l.style,"left").map(C=>r.x-v.x),ot(l.style,"top").map(C=>r.y-v.y+x),ot(l.style,"right").map(C=>v.right-r.right),ot(l.style,"bottom").map(C=>v.bottom-r.bottom))});default:return E.none()}}),x4=(t,r,a)=>CT(t,r,a).filter(({box:l})=>o8(a.getModes(),l,r)).bind(({box:l})=>s8(t,l,a)),wT=t=>{switch(t.location){case"top":return E.some({morph:"fixed",positionCss:Gi("fixed",E.some(t.leftX),E.some(t.topY),E.none(),E.none())});case"bottom":return E.some({morph:"fixed",positionCss:Gi("fixed",E.some(t.leftX),E.none(),E.none(),E.some(t.bottomY))});default:return E.none()}},C4=(t,r,a)=>{const l=Nn(t),u=bs(),h=xT(a.getModes(),{win:u,box:l},r);return h.location==="top"||h.location==="bottom"?(n8(t,l,r,a,h),wT(h)):E.none()},L9=(t,r,a)=>x4(t,r,a).orThunk(()=>r.optScrollEnv.bind(l=>CT(t,r,a)).bind(({box:l,location:u})=>{const h=bs(),v=yT({win:h,box:l}),x=u==="top"?vT(h,v,r):bT(h,v,r);return wT(x)})),ST=(t,r,a)=>{const l=t.element;return Ms(Wo(l,"position"),"fixed")?L9(l,r,a):C4(l,r,a)},sx=(t,r,a)=>{const l=t.element;return CT(l,r,a).bind(({box:u})=>s8(l,u,a))},a8=(t,r,a,l)=>{const u=Nn(t),h=bs(),v=yT({win:h,box:u}),x=l(h,v,r);return x.location==="bottom"||x.location==="top"?(r8(t,u,r,a,x),wT(x)):E.none()},i8=(t,r,a)=>{a.setDocked(!1),at(["left","right","top","bottom","position"],l=>xo(t.element,l)),r.onUndocked(t)},w4=(t,r,a,l)=>{const u=l.position==="fixed";a.setDocked(u),OC(t.element,l),(u?r.onDocked:r.onUndocked)(t)},kT=(t,r,a,l,u=!1)=>{r.contextual.each(h=>{h.lazyContext(t).each(v=>{const x=R9(v,l.bounds);x!==a.isVisible()&&(a.setVisible(x),u&&!x?(er(t.element,[h.fadeOutClass]),h.onHide(t)):(x?pT:A9)(t,h))})})},_T=(t,r,a,l,u)=>{kT(t,r,a,l,!0),w4(t,r,a,u.positionCss)},H9=(t,r,a,l,u)=>{switch(u.morph){case"static":return i8(t,r,a);case"absolute":return w4(t,r,a,u.positionCss);case"fixed":return _T(t,r,a,l,u)}},ET=(t,r,a)=>{const l=r.lazyViewport(t);kT(t,r,a,l),ST(t,l,a).each(u=>{H9(t,r,a,l,u)})},S4=(t,r,a)=>{const l=t.element;a.setDocked(!1);const u=r.lazyViewport(t);sx(t,u,a).each(h=>{switch(h.morph){case"static":{i8(t,r,a);break}case"absolute":{w4(t,r,a,h.positionCss);break}}}),a.setVisible(!0),r.contextual.each(h=>{xs(l,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),k4(t,r,a)},k4=(t,r,a)=>{t.getSystem().isConnected()&&ET(t,r,a)},l8=(t,r,a)=>{a.isDocked()&&S4(t,r,a)},k1=t=>(r,a,l)=>{const u=a.lazyViewport(r);a8(r.element,u,l,t).each(h=>{_T(r,a,l,u,h)})},c8=k1(vT),I9=k1(bT);var d8=Object.freeze({__proto__:null,refresh:k4,reset:l8,isDocked:(t,r,a)=>a.isDocked(),getModes:(t,r,a)=>a.getModes(),setModes:(t,r,a,l)=>a.setModes(l),forceDockToTop:c8,forceDockToBottom:I9}),OT=Object.freeze({__proto__:null,events:(t,r)=>Jo([$u(di(),(a,l)=>{t.contextual.each(u=>{ls(a.element,u.transitionClass)&&(xs(a.element,[u.transitionClass,u.fadeInClass]),(r.isVisible()?u.onShown:u.onHidden)(a)),l.stop()})}),Re(Xc(),(a,l)=>{k4(a,t,r)}),Re(sb(),(a,l)=>{k4(a,t,r)}),Re(tg(),(a,l)=>{l8(a,t,r)})])}),TT=[Oa("contextual",[dn("fadeInClass"),dn("fadeOutClass"),dn("transitionClass"),kl("lazyContext"),mo("onShow"),mo("onShown"),mo("onHide"),mo("onHidden")]),ar("lazyViewport",()=>({bounds:bs(),optScrollEnv:E.none()})),cc("modes",["top","bottom"],ss),mo("onDocked"),mo("onUndocked")],P9=Object.freeze({__proto__:null,init:t=>{const r=Dt(!1),a=Dt(!0),l=un(),u=Dt(t.modes),h=()=>`docked:  ${r.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return Da({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:h})}});const ir=Gr({fields:TT,name:"docking",active:OT,apis:d8,state:P9}),DT=se(gt("toolbar-height-change")),kd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},u8="tox-tinymce--toolbar-sticky-on",m8="tox-tinymce--toolbar-sticky-off",z9=(t,r)=>{const a=pr(r),l=Pc(r).dom.innerHeight,u=ca(a),h=Ke.fromDom(t.elm),v=rs(h),x=Cn(h),C=v.y,_=C+x,M=Fr(r),A=Cn(r),B=M.top,F=B+A,oe=Math.abs(B-u.top)<2,ce=Math.abs(F-(u.top+l))<2;if(oe&&C<F)Vm(u.left,C-A,a);else if(ce&&_>B){const De=C-l+x+A;Vm(u.left,De,a)}},_4=(t,r)=>zo(ir.getModes(t),r),MT=t=>{const r=l=>ec(l)+(parseInt(Sr(l,"margin-top"),10)||0)+(parseInt(Sr(l,"margin-bottom"),10)||0),a=t.element;Fs(a).each(l=>{const u="padding-"+ir.getModes(t)[0];if(ir.isDocked(t)){const h=Un(l);ve(a,"width",h+"px"),ve(l,u,r(a)+"px")}else xo(a,"width"),xo(l,u)})},g8=(t,r)=>{r?(Tn(t,kd.fadeOutClass),er(t,[kd.transitionClass,kd.fadeInClass])):(Tn(t,kd.fadeInClass),er(t,[kd.fadeOutClass,kd.transitionClass]))},h8=(t,r)=>{const a=Ke.fromDom(t.getContainer());r?(Kt(a,u8),Tn(a,m8)):(Kt(a,m8),Tn(a,u8))},p8=(t,r)=>{const a=pr(r);rd(a).filter(l=>!Vo(r,l)).filter(l=>Vo(l,Ke.fromDom(a.dom.body))||Di(t,l)).each(()=>tt(r))},F9=(t,r)=>mc(t).orThunk(()=>r().toOptional().bind(a=>mc(a.element))),ax=(t,r,a)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(ir.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(MT)}),t.on("SkinLoaded",()=>{a().each(l=>{ir.isDocked(l)?ir.reset(l):ir.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(ir.reset)})),t.on("AfterScrollIntoView",l=>{a().each(u=>{ir.refresh(u);const h=u.element;_w(h)&&z9(l,h)})}),t.on("PostRender",()=>{h8(t,!1)})},V9=t=>t().map(ir.isDocked).getOr(!1),Z9=()=>[ja.config({channels:{[DT()]:{onReceive:MT}}})],E4=(t,r)=>{const a=un(),l=r.getSink,u=x=>{l().each(C=>x(C.element))},h=x=>{t.inline||MT(x),h8(t,ir.isDocked(x)),x.getSystem().broadcastOn([vg()],{}),l().each(C=>C.getSystem().broadcastOn([vg()],{}))},v=t.inline?[]:Z9();return[Lt.config({}),ir.config({contextual:{lazyContext:x=>{const C=ec(x.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return E.from(_).map(M=>{const A=Nn(Ke.fromDom(M));return h1(t,x.element).fold(()=>{const B=A.height-C,F=A.y+(_4(x,"top")?0:C);return Jn(A.x,F,A.width,B)},B=>{const F=eh(A,kv(B)),oe=_4(x,"top")?F.y:F.y+C;return Jn(F.x,oe,F.width,F.height-C)})})},onShow:()=>{u(x=>g8(x,!0))},onShown:x=>{u(C=>xs(C,[kd.transitionClass,kd.fadeInClass])),a.get().each(C=>{p8(x.element,C),a.clear()})},onHide:x=>{F9(x.element,l).fold(a.clear,a.set),u(C=>g8(C,!1))},onHidden:()=>{u(x=>xs(x,[kd.transitionClass]))},...kd},lazyViewport:x=>h1(t,x.element).fold(()=>{const C=bs(),_=RM(t),M=C.y+(_4(x,"top")?_:0),A=C.height-(_4(x,"bottom")?_:0);return{bounds:Jn(C.x,M,C.width,A),optScrollEnv:E.none()}},C=>({bounds:kv(C),optScrollEnv:E.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:Fr(C.element).top})})),modes:[r.header.getDockingMode()],onDocked:h,onUndocked:h}),...v]};var f8=Object.freeze({__proto__:null,setup:ax,isDocked:V9,getBehaviours:E4});const U9=t=>{const r=t.editor,a=t.sticky?E4:e8;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:We(a(r,t.sharedBackstage))}},W9=it([ur,$s("items",rn([ic([rE,li("items",ss)]),ss]))].concat(mm)),$9=t=>Ae("GroupToolbarButton",W9,t),j9=[ys("text"),ys("tooltip"),ys("icon"),js("search",!1,rn([Pd,it([ys("placeholder")])],t=>gr(t)?t?E.some({placeholder:E.none()}):E.none():E.some(t))),kl("fetch"),ar("onSetup",()=>J)],v8=it([ur,...j9]),b8=t=>Ae("menubutton",v8,t),G9=it([ur,cS,zl,yp,aA,rA,bp,_l("presets","normal",["normal","color","listpreview"]),iE(1),l1,v2]),K9=t=>Ae("SplitButton",G9,t);var AT=vi({factory:(t,r)=>{const a=(u,h)=>{const v=Ie(h,x=>{const C={type:"menubutton",text:x.text,fetch:M=>{M(x.getItems())}},_=b8(C).mapError(M=>ii(M)).getOrDie();return zg(_,"tox-mbtn",r.backstage,E.some("menuitem"))});Zt.set(u,v)},l={focus:_t.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:We([Zt.config({}),Yt("menubar-events",[wn(u=>{t.onSetup(u)}),Re($a(),(u,h)=>{hn(u.element,".tox-mbtn--active").each(v=>{Ml(h.event.target,".tox-mbtn").each(x=>{Vo(v,x)||u.getSystem().getByDom(v).each(C=>{u.getSystem().getByDom(x).each(_=>{wc.expand(_),wc.close(C),Lt.focus(_)})})})})}),Re(af(),(u,h)=>{h.event.prevFocus.bind(v=>u.getSystem().getByDom(v).toOptional()).each(v=>{h.event.newFocus.bind(x=>u.getSystem().getByDom(x).toOptional()).each(x=>{wc.isOpen(v)&&(wc.expand(x),wc.close(v))})})})]),_t.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),E.some(!0))}),Pn.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[xe("dom"),xe("uid"),xe("onEscape"),xe("backstage"),ge("onSetup",J)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,a)=>{t.setMenus(r,a)}}});const X9="⚡️Upgrade",y8="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",x8=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:y8,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:X9}}]}),ix="container",C8=[In("slotBehaviours",[])],w8=t=>"<alloy.field."+t+">",q9=t=>{const r=(()=>{const h=[];return{slot:(v,x)=>(h.push(v),K0(ix,w8(v),x)),record:se(h)}})(),a=t(r),l=r.record(),u=Ie(l,h=>Kr({name:h,pname:w8(h)}));return cm(ix,C8,u,Y9,a)},Y9=(t,r)=>{const a=ce=>gw(t),l=(ce,De)=>Lo(ce,t,De),u=(ce,De)=>(Q,ee)=>Lo(Q,t,ee).map(fe=>ce(fe,ee)).getOr(De),h=ce=>(De,Q)=>{at(Q,ee=>ce(De,ee))},v=(ce,De)=>ut(ce.element,"aria-hidden")!=="true",x=(ce,De)=>{if(!v(ce)){const Q=ce.element;xo(Q,"display"),vo(Q,"aria-hidden"),St(ce,gh(),{name:De,visible:!0})}},C=(ce,De)=>{if(v(ce)){const Q=ce.element;ve(Q,"display","none"),W(Q,"aria-hidden","true"),St(ce,gh(),{name:De,visible:!1})}},_=u(v,!1),M=u(C),A=h(M),B=ce=>A(ce,a()),F=u(x),oe={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:M,hideAllSlots:B,showSlot:F};return{uid:t.uid,dom:t.dom,components:r,behaviours:xg(t.slotBehaviours),apis:oe}},ba={...Yo({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,a)=>t.getSlot(r,a),isShowing:(t,r,a)=>t.isShowing(r,a),hideSlot:(t,r,a)=>t.hideSlot(r,a),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,a)=>t.showSlot(r,a)},t=>ff(t)),sketch:q9},Q9=it([zl,cS,ar("onShow",J),ar("onHide",J),bp]),J9=t=>Ae("sidebar",Q9,t),eV=t=>{const{sidebars:r}=t.ui.registry.getAll();at(yn(r),a=>{const l=r[a],u=()=>Ms(E.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(u())},onSetup:h=>{h.setActive(u());const v=()=>h.setActive(u());return t.on("ToggleSidebar",v),()=>{t.off("ToggleSidebar",v)}}})})},S8=t=>({element:()=>t.element.dom}),k8=(t,r)=>{const a=Ie(yn(r),l=>{const u=r[l],h=lc(J9(u));return{name:l,getApi:S8,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return Ie(a,l=>{const u=Dt(J);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:C2.unnamedEvents([Rg(l,u),Cp(l,u),Re(gh(),(h,v)=>{const x=v.event;It(a,C=>C.name===x.name).each(C=>{(x.visible?C.onShow:C.onHide)(C.getApi(h))})})])})})},tV=t=>ba.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:k8(r,t),slotBehaviours:C2.unnamedEvents([wn(a=>ba.hideAllSlots(a))])})),_8=(t,r,a)=>{go.getCurrent(t).each(l=>{Zt.set(l,[tV(r)]);const u=a==null?void 0:a.toLowerCase();Pt(u)&&bo(r,u)&&go.getCurrent(l).each(h=>{ba.showSlot(h,u),al.immediateGrow(l),xo(l.element,"width"),O4(t.element,"region")})})},O4=(t,r)=>{W(t,"role",r)},oV=(t,r)=>{go.getCurrent(t).each(a=>{go.getCurrent(a).each(l=>{al.hasGrown(a)?ba.isShowing(l,r)?(al.shrink(a),O4(t.element,"presentation")):(ba.hideAllSlots(l),ba.showSlot(l,r),O4(t.element,"region")):(ba.hideAllSlots(l),ba.showSlot(l,r),al.grow(a),O4(t.element,"region"))})})},nV=t=>go.getCurrent(t).bind(r=>al.isGrowing(r)||al.hasGrown(r)?go.getCurrent(r).bind(a=>It(ba.getSlotNames(a),l=>ba.isShowing(a,l))):E.none()),Vg=gt("FixSizeEvent"),T4=gt("AutoSizeEvent"),lx=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:We([Pn.config({}),Lt.config({}),al.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{go.getCurrent(r).each(ba.hideAllSlots),Eo(r,T4)},onGrown:r=>{Eo(r,T4)},onStartGrow:r=>{St(r,Vg,{width:Wo(r.element,"width").getOr("")})},onStartShrink:r=>{St(r,Vg,{width:Un(r.element)+"px"})}}),Zt.config({}),go.config({find:r=>{const a=Zt.contents(r);return Ts(a)}})])}],behaviours:We([Oc.childAt(0),Yt("sidebar-sliding-events",[Re(Vg,(r,a)=>{ve(r.element,"width",a.event.width)}),Re(T4,(r,a)=>{xo(r.element,"width")})])])});var D4=Object.freeze({__proto__:null,block:(t,r,a,l)=>{W(t.element,"aria-busy",!0);const u=r.getRoot(t).getOr(t),h=We([_t.config({mode:"special",onTab:()=>E.some(!0),onShiftTab:()=>E.some(!0)}),Lt.config({})]),v=l(u,h),x=u.getSystem().build(v);Zt.append(u,ji(x)),x.hasConfigured(_t)&&r.focus&&_t.focusIn(x),a.isBlocked()||r.onBlock(t),a.blockWith(()=>Zt.remove(u,x))},unblock:(t,r,a)=>{vo(t.element,"aria-busy"),a.isBlocked()&&r.onUnblock(t),a.clear()},isBlocked:(t,r,a)=>a.isBlocked()}),E8=[ar("getRoot",E.none),Wr("focus",!0),mo("onBlock"),mo("onUnblock")],O8=Object.freeze({__proto__:null,init:()=>{const t=BC(),r=a=>{t.set({destroy:a})};return Da({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const _d=Gr({fields:E8,name:"blocking",apis:D4,state:O8}),rV=t=>(r,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:dm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),T8=t=>go.getCurrent(t).each(r=>tt(r.element,!0)),sV=(t,r)=>{const a="tabindex",l=`data-mce-${a}`;E.from(t.iframeElement).map(Ke.fromDom).each(u=>{r?(Tt(u,a).each(h=>W(u,l,h)),W(u,a,-1)):(vo(u,a),Tt(u,l).each(h=>{W(u,a,h),vo(u,l)}))})},aV=(t,r,a,l)=>{const u=r.element;if(sV(t,a),a)_d.block(r,rV(l)),xo(u,"display"),vo(u,"aria-hidden"),t.hasFocus()&&T8(r);else{const h=go.getCurrent(r).exists(v=>Nh(v.element));_d.unblock(r),ve(u,"display","none"),W(u,"aria-hidden","true"),h&&t.focus()}},iV=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:We([Zt.config({}),_d.config({focus:!1}),go.config({find:r=>Ts(r.components())})]),components:[]}),Nv=t=>t.type==="focusin",cx=t=>Nv(t)?(t.composed?Ts(t.composedPath()):E.from(t.target)).map(Ke.fromDom).filter(zn).exists(r=>ls(r,"mce-pastebin")):!1,RT=(t,r,a)=>{const l=Dt(!1),u=un(),h=x=>{l.get()&&!cx(x)&&(x.preventDefault(),T8(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",x=>{x.command.toLowerCase()==="mcefocus"&&x.value!==!0&&h(x)})});const v=x=>{x!==l.get()&&(l.set(x),aV(t,r(),x,a.providers),SI(t,x))};t.on("ProgressState",x=>{if(u.on(clearTimeout),Os(x.time)){const C=Iw.setEditorTimeout(t,()=>v(x.state),x.time);u.set(C)}else v(x.state),u.clear()})},lV=(t,r)=>on(t,(a,l)=>r(l,a.len).fold(se(a),u=>({len:u.finish,list:a.list.concat([u])})),{len:0,list:[]}).list,BT=(t,r,a)=>({within:t,extra:r,withinWidth:a}),M4=(t,r,a)=>{const l=lV(t,(x,C)=>{const _=a(x);return E.some({element:x,start:C,finish:C+_,width:_})}),u=qo(l,x=>x.finish<=r),h=Bn(u,(x,C)=>x+C.width,0),v=l.slice(u.length);return{within:u,extra:v,withinWidth:h}},A4=t=>Ie(t,r=>r.element),dx=(t,r,a)=>{const l=A4(t.concat(r));return BT(l,[],a)},D8=(t,r,a,l)=>{const u=A4(t).concat([a]);return BT(u,A4(r),l)},cV=(t,r,a)=>BT(A4(t),[],a),dV=(t,r,a)=>{const l=M4(r,t,a);return l.extra.length===0?E.some(l):E.none()},uV=(t,r,a,l)=>{const u=dV(t,r,a).getOrThunk(()=>M4(r,t-a(l),a)),h=u.within,v=u.extra,x=u.withinWidth;return v.length===1&&v[0].width<=a(l)?dx(h,v,x):v.length>=1?D8(h,v,l,x):cV(h,v,x)},M8=(t,r)=>{const a=Ie(r,l=>ji(l));fu.setGroups(t,a)},mV=t=>hr(t,r=>mc(r.element).bind(a=>r.getSystem().getByDom(a).toOptional())),A8=(t,r,a)=>{const l=r.builtGroups.get();if(l.length===0)return;const u=lm(t,r,"primary"),h=or.getCoupled(t,"overflowGroup");ve(u.element,"visibility","hidden");const v=l.concat([h]),x=mV(v);a([]),M8(u,v);const C=Un(u.element),_=uV(C,r.builtGroups.get(),M=>Un(M.element),h);_.extra.length===0?(Zt.remove(u,h),a([])):(M8(u,_.within),a(_.extra)),xo(u.element,"visibility"),Va(u.element),x.each(Lt.focus)},NT=se([In("splitToolbarBehaviours",[or]),Ns("builtGroups",()=>Dt([]))]),R8=se([jd(["overflowToggledClass"]),Km("getOverflowBounds"),xe("lazySink"),Ns("overflowGroups",()=>Dt([])),mo("onOpened"),mo("onClosed")].concat(NT())),LT=se([Kr({factory:fu,schema:S1(),name:"primary"}),Yi({schema:S1(),name:"overflow"}),Yi({name:"overflow-button"}),Yi({name:"overflow-group"})]),HT=se((t,r)=>{Sa(t,Math.floor(r))}),R4=se([jd(["toggledClass"]),xe("lazySink"),kl("fetch"),Km("getBounds"),Oa("fireDismissalEventInstead",[ge("event",og())]),qd(),mo("onToggled")]),B4=se([Yi({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:We([oo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Yi({factory:fu,schema:S1(),name:"toolbar",overrides:t=>({toolbarBehaviours:We([_t.config({mode:"cyclic",onEscape:r=>(Lo(r,t,"button").each(Lt.focus),E.none())})])})})]),ux=un(),gV=(t,r)=>{ux.set(!0),IT(t,r),ux.clear()},IT=(t,r)=>{const a=or.getCoupled(t,"toolbarSandbox");lo.isOpen(a)?lo.close(a):lo.open(a,r.toolbar())},PT=(t,r,a,l)=>{const u=a.getBounds.map(v=>v()),h=a.lazySink(t).getOrDie();Is.positionWithinBounds(h,r,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:HT()}}},u)},B8=(t,r,a,l,u)=>{fu.setGroups(r,u),PT(t,r,a,l),oo.on(t)},zT=(t,r,a)=>{const l=Th(),u=(v,x)=>{const C=ux.get().getOr(!1);a.fetch().get(_=>{B8(t,x,a,r.layouts,_),l.link(t.element),C||_t.focusIn(x)})},h=()=>{oo.off(t),ux.get().getOr(!1)||Lt.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:We([_t.config({mode:"special",onEscape:v=>(lo.close(v),E.some(!0))}),lo.config({onOpen:u,onClose:h,isPartOf:(v,x,C)=>$d(x,C)||$d(t,C),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ja.config({channels:{...V0({isExtraPart:Ge,...a.fireDismissalEventInstead.map(v=>({fireEventInstead:{event:v.event}})).getOr({})}),...$f({doReposition:()=>{lo.getState(or.getCoupled(t,"toolbarSandbox")).each(v=>{PT(t,v,a,r.layouts)})}})}})])}},ym=Js({name:"FloatingToolbarButton",factory:(t,r,a,l)=>({...Lr.sketch({...l.button(),action:u=>{IT(u,l)},buttonBehaviours:Xi.augment({dump:l.button().buttonBehaviours},[or.config({others:{toolbarSandbox:u=>zT(u,a,t)}})])}),apis:{setGroups:(u,h)=>{lo.getState(or.getCoupled(u,"toolbarSandbox")).each(v=>{B8(u,v,t,a.layouts,h)})},reposition:u=>{lo.getState(or.getCoupled(u,"toolbarSandbox")).each(h=>{PT(u,h,t,a.layouts)})},toggle:u=>{IT(u,l)},toggleWithoutFocusing:u=>{gV(u,l)},getToolbar:u=>lo.getState(or.getCoupled(u,"toolbarSandbox")),isOpen:u=>lo.isOpen(or.getCoupled(u,"toolbarSandbox"))}}),configFields:R4(),partFields:B4(),apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),hV=se([xe("items"),jd(["itemSelector"]),In("tgroupBehaviours",[_t])]),FT=se([$0({name:"items",unit:"item"})]),pV=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.tgroupBehaviours,[_t.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),N4=Js({name:"ToolbarGroup",configFields:hV(),partFields:FT(),factory:pV}),N8=t=>Ie(t,r=>ji(r)),L8=(t,r,a)=>{A8(t,a,l=>{a.overflowGroups.set(l),r.getOpt(t).each(u=>{ym.setGroups(u,N8(l))})})},fV=(t,r,a,l)=>{const u=Io(ym.sketch({fetch:()=>Es.nu(h=>{h(N8(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Ss,us],onRtl:()=>[us,Ss],onBottomLtr:()=>[ga,ks],onBottomRtl:()=>[ks,ga]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(h,v)=>t[v?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.splitToolbarBehaviours,[or.config({others:{overflowGroup:()=>N4.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(h,v)=>{t.builtGroups.set(Ie(v,h.getSystem().build)),L8(h,u,t)},refresh:h=>L8(h,u,t),toggle:h=>{u.getOpt(h).each(v=>{ym.toggle(v)})},toggleWithoutFocusing:h=>{u.getOpt(h).each(ym.toggleWithoutFocusing)},isOpen:h=>u.getOpt(h).map(ym.isOpen).getOr(!1),reposition:h=>{u.getOpt(h).each(v=>{ym.reposition(v)})},getOverflow:h=>u.getOpt(h).bind(ym.getToolbar)},domModification:{attributes:{role:"group"}}}},VT=Js({name:"SplitFloatingToolbar",configFields:R8(),partFields:LT(),factory:fV,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),vV=se([jd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),mo("onOpened"),mo("onClosed")].concat(NT())),H8=se([Kr({factory:fu,schema:S1(),name:"primary"}),Kr({factory:fu,schema:S1(),name:"overflow",overrides:t=>({toolbarBehaviours:We([al.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{Lo(r,t,"overflow-button").each(a=>{oo.off(a),Lt.focus(a)}),t.onClosed(r)},onGrown:r=>{_t.focusIn(r),t.onOpened(r)},onStartGrow:r=>{Lo(r,t,"overflow-button").each(oo.on)}}),_t.config({mode:"acyclic",onEscape:r=>(Lo(r,t,"overflow-button").each(Lt.focus),E.some(!0))})])})}),Yi({name:"overflow-button",overrides:t=>({buttonBehaviours:We([oo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Yi({name:"overflow-group"})]),bV=(t,r)=>Lo(t,r,"overflow").map(al.hasGrown).getOr(!1),I8=(t,r)=>{Lo(t,r,"overflow-button").bind(()=>Lo(t,r,"overflow")).each(a=>{ZT(t,r),al.toggleGrow(a)})},ZT=(t,r)=>{Lo(t,r,"overflow").each(a=>{A8(t,r,l=>{const u=Ie(l,h=>ji(h));fu.setGroups(a,u)}),Lo(t,r,"overflow-button").each(l=>{al.hasGrown(a)&&oo.on(l)}),al.refresh(a)})},yV=(t,r,a,l)=>{const u="alloy.toolbar.toggle",h=(v,x)=>{const C=Ie(x,v.getSystem().build);t.builtGroups.set(C)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Rr(t.splitToolbarBehaviours,[or.config({others:{overflowGroup:v=>N4.sketch({...l["overflow-group"](),items:[Lr.sketch({...l["overflow-button"](),action:x=>{Eo(v,u)}})]})}}),Yt("toolbar-toggle-events",[Re(u,v=>{I8(v,t)})])]),apis:{setGroups:(v,x)=>{h(v,x),ZT(v,t)},refresh:v=>ZT(v,t),toggle:v=>I8(v,t),isOpen:v=>bV(v,t)},domModification:{attributes:{role:"group"}}}},UT=Js({name:"SplitSlidingToolbar",configFields:vV(),partFields:H8(),factory:yV,apis:{setGroups:(t,r,a)=>{t.setGroups(r,a)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),WT=t=>{const r=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...r},components:[N4.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:We([Pn.config({}),Lt.config({})])}},L4=t=>N4.sketch(WT(t)),P8=(t,r)=>{const a=wn(l=>{const u=Ie(t.initGroups,L4);fu.setGroups(l,u)});return We([bd.toolbarButton(t.providers.isDisabled),Hr(),_t.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Yt("toolbar-events",[a])])},z8=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":WT({title:E.none(),items:[]}),"overflow-button":hB({name:"more",icon:E.some("more-drawer"),enabled:!0,tooltip:E.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:E.none(),borderless:!1},E.none(),t.providers)},splitToolbarBehaviours:P8(t,r)}},F8=t=>{const r=z8(t),a=4,l=VT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return VT.sketch({...r,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,h=rs(u),v=Fn(u),x=rs(v),C=Math.max(v.dom.scrollHeight,x.height);return Jn(h.x+a,x.y,h.width-a*2,C)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},V8=t=>{const r=UT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=UT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=z8(t);return UT.sketch({...l,components:[r,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([DT()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([DT()],{type:"closed"}),t.onToggled(u,!1)}})},H4=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return fu.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Pl.scrolling?["tox-toolbar--scrolling"]:[])},components:[fu.parts.groups({})],toolbarBehaviours:P8(t,r)})},Z8=[yp,zl,ys("tooltip"),_l("buttonType","secondary",["primary","secondary"]),Wr("borderless",!1),kl("onAction")],Wl=[...Z8,Ag,zd("type",["button"])],xV=[...Z8,Wr("active",!1),zd("type",["togglebutton"])],$T={button:Wl,togglebutton:xV},U8=[zd("type",["group"]),cc("buttons",[],yr("type",$T))],CV=yr("type",{...$T,group:U8}),mx=it([cc("buttons",[],CV),kl("onShow"),kl("onHide")]),wV=t=>Ae("view",mx,t),I4=(t,r)=>{var a,l;const u=t.type==="togglebutton",h=t.icon.map(ee=>Ap(ee,r.icons)).map(Io),v=(()=>ee=>{const fe=Fe=>{h.map(et=>et.getOpt(ee).each(ct=>{Zt.set(ct,[Ap(Fe,r.icons)])}))},Ne=Fe=>{const et=ee.element;Fe?(Kt(et,"tox-button--enabled"),W(et,"aria-pressed",!0)):(Tn(et,"tox-button--enabled"),vo(et,"aria-pressed"))},be=()=>ls(ee.element,"tox-button--enabled");if(u)return t.onAction({setIcon:fe,setActive:Ne,isActive:be});if(t.type==="button")return t.onAction({setIcon:fe})})(),x={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:E.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=XO((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),_=u?t.text.map(r.translate):E.some(r.translate(t.text)),M=_.map(tr),A=x.tooltip.or(_).map(ee=>({"aria-label":r.translate(ee),title:r.translate(ee)})).getOr({}),B=h.map(ee=>ee.asSpec()),F=c1([B,M]),oe=t.icon.isSome()&&M.isSome(),ce={tag:"button",classes:C.concat(...t.icon.isSome()&&!oe?["tox-button--icon"]:[]).concat(...oe?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:A},De=[],Q=i4(x,E.some(v),De,ce,F,r);return Lr.sketch(Q)},W8=(t,r)=>I4(t,r),P4=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ie(t.buttons,a=>W8(a,r))}),$8=Bs().deviceType,SV=$8.isPhone(),Tc=$8.isTablet(),kV=t=>{let r=!1;const a=Ie(t.buttons,l=>l.type==="group"?(r=!0,P4(l,t.providers)):W8(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...SV||Tc?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:We([Lt.config({}),_t.config({mode:"flow",selector:"button, .tox-button",focusInside:st.OnEnterOrSpaceMode})]),components:r?a:[mu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),mu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},z4=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),j8=(t,r,a,l)=>{const u={getPane:h=>gs.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,apis:u}};var _1=Js({name:"silver.View",configFields:[xe("viewConfig")],partFields:[Qi({factory:{sketch:kV},schema:[xe("buttons"),xe("providers")],name:"header"}),Qi({factory:{sketch:z4},schema:[],name:"pane"})],factory:j8,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const _V=(t,r,a)=>Si(r,(l,u)=>{const h=lc(wV(l));return t.slot(u,_1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[_1.parts.header({buttons:h.buttons,providers:a})]:[],_1.parts.pane({})]}))}),G8=(t,r)=>ba.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:_V(a,t,r),slotBehaviours:C2.unnamedEvents([wn(l=>ba.hideAllSlots(l))])})),K8=t=>It(ba.getSlotNames(t),r=>ba.isShowing(t,r)),EV=t=>{const r=t.element;ve(r,"display","none"),W(r,"aria-hidden","true")},OV=t=>{const r=t.element;xo(r,"display"),vo(r,"aria-hidden")},TV=t=>({getContainer:se(t)}),X8=(t,r,a)=>{ba.getSlot(t,r).each(l=>{_1.getPane(l).each(u=>{a(l)(TV(u.element.dom))})})},DV=(t,r)=>X8(t,r,_1.getOnShow),MV=(t,r)=>X8(t,r,_1.getOnHide);var gx=vi({factory:(t,r)=>{const a={setViews:(l,u)=>{Zt.set(l,[G8(u,r.backstage.shared.providers)])},whichView:l=>go.getCurrent(l).bind(K8),toggleView:(l,u,h,v)=>go.getCurrent(l).exists(x=>{const C=K8(x),_=C.exists(A=>v===A),M=ba.getSlot(x,v).isSome();return M&&(ba.hideAllSlots(x),_?(EV(l),u()):(h(),OV(l),ba.showSlot(x,v),DV(x,v)),C.each(A=>MV(x,A))),M})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:We([Zt.config({}),go.config({find:l=>{const u=Zt.contents(l);return Ts(u)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[xe("backstage")],apis:{setViews:(t,r,a)=>t.setViews(r,a),toggleView:(t,r,a,l,u)=>t.toggleView(r,a,l,u),whichView:(t,r)=>t.whichView(r)}});const q8=(t,r,a)=>{let l=!1;const u={getSocket:h=>gs.getPart(h,t,"socket"),setSidebar:(h,v,x)=>{gs.getPart(h,t,"sidebar").each(C=>_8(C,v,x))},toggleSidebar:(h,v)=>{gs.getPart(h,t,"sidebar").each(x=>oV(x,v))},whichSidebar:h=>gs.getPart(h,t,"sidebar").bind(nV).getOrNull(),getHeader:h=>gs.getPart(h,t,"header"),getToolbar:h=>gs.getPart(h,t,"toolbar"),setToolbar:(h,v)=>{gs.getPart(h,t,"toolbar").each(x=>{const C=Ie(v,L4);x.getApis().setGroups(x,C)})},setToolbars:(h,v)=>{gs.getPart(h,t,"multiple-toolbar").each(x=>{const C=Ie(v,_=>Ie(_,L4));YB.setItems(x,C)})},refreshToolbar:h=>{gs.getPart(h,t,"toolbar").each(v=>v.getApis().refresh(v))},toggleToolbarDrawer:h=>{gs.getPart(h,t,"toolbar").each(v=>{Go(v.getApis().toggle,x=>x(v))})},toggleToolbarDrawerWithoutFocusing:h=>{gs.getPart(h,t,"toolbar").each(v=>{Go(v.getApis().toggleWithoutFocusing,x=>x(v))})},isToolbarDrawerToggled:h=>gs.getPart(h,t,"toolbar").bind(v=>E.from(v.getApis().isOpen).map(x=>x(v))).getOr(!1),getThrobber:h=>gs.getPart(h,t,"throbber"),focusToolbar:h=>{gs.getPart(h,t,"toolbar").orThunk(()=>gs.getPart(h,t,"multiple-toolbar")).each(v=>{_t.focusIn(v)})},setMenubar:(h,v)=>{gs.getPart(h,t,"menubar").each(x=>{AT.setMenus(x,v)})},focusMenubar:h=>{gs.getPart(h,t,"menubar").each(v=>{AT.focus(v)})},setViews:(h,v)=>{gs.getPart(h,t,"viewWrapper").each(x=>{gx.setViews(x,v)})},toggleView:(h,v)=>gs.getPart(h,t,"viewWrapper").exists(x=>gx.toggleView(x,()=>u.showMainView(h),()=>u.hideMainView(h),v)),whichView:h=>gs.getPart(h,t,"viewWrapper").bind(gx.whichView).getOrNull(),hideMainView:h=>{l=u.isToolbarDrawerToggled(h),l&&u.toggleToolbarDrawer(h),gs.getPart(h,t,"editorContainer").each(v=>{const x=v.element;ve(x,"display","none"),W(x,"aria-hidden","true")})},showMainView:h=>{l&&u.toggleToolbarDrawer(h),gs.getPart(h,t,"editorContainer").each(v=>{const x=v.element;xo(x,"display"),vo(x,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:u,behaviours:t.behaviours}},Y8=bm.optional({factory:AT,name:"menubar",schema:[xe("backstage")]}),AV=t=>t.type===Pl.sliding?V8:t.type===Pl.floating?F8:H4,RV=bm.optional({factory:{sketch:t=>YB.sketch({uid:t.uid,dom:t.dom,listBehaviours:We([_t.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>H4({type:t.type,uid:gt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),E.some(!0))}),setupItem:(r,a,l,u)=>{fu.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[xe("dom"),xe("onEscape")]}),Q8=bm.optional({factory:{sketch:t=>{const r=AV(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),E.some(!0)),onToggled:(l,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(a)}},name:"toolbar",schema:[xe("dom"),xe("onEscape"),xe("getSink")]}),J8=bm.optional({factory:{sketch:U9},name:"header",schema:[xe("dom")]}),e7=bm.optional({factory:{sketch:x8},name:"promotion",schema:[xe("dom")]}),BV=bm.optional({name:"socket",schema:[xe("dom")]}),NV=bm.optional({factory:{sketch:lx},name:"sidebar",schema:[xe("dom")]}),LV=bm.optional({factory:{sketch:iV},name:"throbber",schema:[xe("dom")]}),t7=bm.optional({factory:gx,name:"viewWrapper",schema:[xe("backstage")]}),HV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),IV=bm.optional({factory:{sketch:HV},name:"editorContainer",schema:[]});var cn=Js({name:"OuterContainer",factory:q8,configFields:[xe("dom"),xe("behaviours")],partFields:[J8,Y8,Q8,RV,BV,NV,e7,LV,t7,IV],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,a,l)=>{t.setSidebar(r,a,l)},toggleSidebar:(t,r,a)=>{t.toggleSidebar(r,a)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,a)=>{t.setToolbar(r,a)},setToolbars:(t,r,a)=>{t.setToolbars(r,a)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,a)=>{t.setMenubar(r,a)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,a)=>{t.setViews(r,a)},toggleView:(t,r,a)=>t.toggleView(r,a),whichView:(t,r)=>t.whichView(r)}});const PV="file edit view insert format tools table help",o7={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},zV=(t,r,a)=>{const l=MM(a).split(/[ ,]/);return{text:t.title,getItems:()=>me(t.items,u=>{const h=u.toLowerCase();return h.trim().length===0?[]:xr(l,v=>v===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:r.menuItems[h]?[r.menuItems[h]]:[]})}},jT=t=>t.split(" "),n7=(t,r)=>{const a={...o7,...r.menus},l=yn(r.menus).length>0,u=r.menubar===void 0||r.menubar===!0?jT(PV):jT(r.menubar===!1?"":r.menubar),h=qo(u,x=>{const C=bo(o7,x);return l?C||ot(r.menus,x).exists(_=>bo(_,"items")):C}),v=Ie(h,x=>{const C=a[x];return zV({title:C.title,items:jT(C.items)},r,t)});return qo(v,x=>{const C=_=>Pt(_)||_.type!=="separator";return x.getItems().length>0&&xr(x.getItems(),C)})},FV=t=>{const r=()=>{t._skinLoaded=!0,xI(t)};return()=>{t.initialized?r():t.on("init",r)}},VV=(t,r)=>()=>CI(t,{message:r}),GT=(t,r,a)=>(t.on("remove",()=>a.unload(r)),a.load(r)),KT=(t,r,a,l)=>(t.on("remove",()=>l.unloadRawCss(r)),l.loadRawCss(r,a)),ZV=async(t,r)=>{const a="ui/"+fp(t).getOr("default")+"/skin.css",l=tinymce.Resource.get(a);if(Pt(l))return Promise.resolve(KT(t,a,l,t.ui.styleSheetLoader));{const u=r+"/skin.min.css";return GT(t,u,t.ui.styleSheetLoader)}},XT=async(t,r)=>{if(Jl(Ke.fromDom(t.getElement()))){const a="ui/"+fp(t).getOr("default")+"/skin.shadowdom.css",l=tinymce.Resource.get(a);if(Pt(l))return KT(t,a,l,n1.DOM.styleSheetLoader),Promise.resolve();{const u=r+"/skin.shadowdom.min.css";return GT(t,u,n1.DOM.styleSheetLoader)}}},UV=async(t,r)=>{fp(r).fold(()=>{const l=oS(r);l&&r.contentCSS.push(l+(t?"/content.inline":"/content")+".min.css")},l=>{const u="ui/"+l+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(u);if(Pt(h))KT(r,u,h,r.ui.styleSheetLoader);else{const v=oS(r);v&&r.contentCSS.push(v+(t?"/content.inline":"/content")+".min.css")}});const a=oS(r);if(!F_(r)&&Pt(a))return Promise.all([ZV(r,a),XT(r,a)]).then()},hx=(t,r)=>UV(t,r).then(FV(r),VV(r,"Skin could not be loaded")),WV=io(hx,!1),r7=io(hx,!0),Lv=(t,r,a)=>t.translate([r,t.translate(a)]),$V=(t,r)=>{const a=(h,v,x,C)=>{const _=t.shared.providers.translate(h.title);if(h.type==="separator")return E.some({type:"separator",text:_});if(h.type==="submenu"){const M=me(h.getStyleItems(),A=>l(A,v,C));return v===0&&M.length<=0?E.none():E.some({type:"nestedmenuitem",text:_,enabled:M.length>0,getSubmenuItems:()=>me(h.getStyleItems(),A=>l(A,v,C))})}else return E.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(C),enabled:!x,onAction:r.onAction(h),...h.getStylePreview().fold(()=>({}),M=>({meta:{style:M}}))})},l=(h,v,x)=>{const C=h.type==="formatter"&&r.isInvalid(h);return v===0?C?[]:a(h,v,!1,x).toArray():a(h,v,C,x).toArray()},u=h=>{const v=r.getCurrentValue(),x=r.shouldHide?0:1;return me(h,C=>l(C,x,v))};return{validateItems:u,getFetch:(h,v)=>(x,C)=>{const _=v(),M=u(_),A=x1(M,cu.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:E.none()});C(A)}}},Hv=(t,r,a)=>{const l=a.dataset,u=l.type==="basic"?()=>Ie(l.data,h=>nT(h,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:$V(r,a),getStyleItems:u}},px=(t,r,a,l,u)=>{const{items:h,getStyleItems:v}=Hv(t,r,a),x=_=>({getComponent:se(_),setTooltip:M=>{const A=r.shared.providers.translate(M);ae(_.element,{"aria-label":A,title:A})}}),C=_=>{const M=A=>_.setTooltip(Lv(t,l,A.value));return t.on(u,M),T2(m1(t,"NodeChange",A=>{const B=A.getComponent();a.updateText(B),wt.set(A.getComponent(),!t.selection.isEditable())})(_),()=>t.off(u,M))};return t4({text:a.icon.isSome()?E.none():a.text,icon:a.icon,tooltip:E.from(a.tooltip),role:E.none(),fetch:h.getFetch(r,v),onSetup:C,getApi:x,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},qT=t=>Ie(t,r=>{let a=r,l=r;const u=r.split("=");return u.length>1&&(a=u[0],l=u[1]),{title:a,format:l}}),jV=t=>({type:"basic",data:t});var Zg;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Zg||(Zg={}));const s7=(t,r)=>r===Zg.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),F4=(t,r,a)=>{const l=t.options.get(r);return{type:"basic",data:qT(s7(l,a))}},YT="Align",a7="Alignment {0}",QT="left",Bp=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],JT=t=>{const r=()=>It(Bp,x=>t.formatter.match(x.format)),a=x=>()=>t.formatter.match(x),l=x=>E.none,u=x=>{const C=r().fold(se(QT),_=>_.title.toLowerCase());St(x,y1,{icon:`align-${C}`}),O2(t,{value:C})},h=jV(Bp),v=x=>()=>It(Bp,C=>C.format===x.format).each(C=>t.execCommand(C.command));return{tooltip:Lv(t,a7,QT),text:E.none(),icon:E.some("align-left"),isSelectedFor:a,getCurrentValue:E.none,getPreviewFor:l,onAction:v,updateText:u,dataset:h,shouldHide:!1,isInvalid:x=>!t.formatter.canApply(x.format)}},GV=(t,r)=>px(t,r,JT(t),a7,"AlignTextUpdate"),KV=(t,r)=>{const a=Hv(t,r,JT(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate(YT),onSetup:Ha(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},i7=(t,r)=>{const a=r(),l=Ie(a,u=>u.format);return E.from(t.formatter.closest(l)).bind(u=>It(a,h=>h.format===u)).orThunk(()=>At(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},eD="Blocks",l7="Block {0}",tD="Paragraph",oD=t=>{const r=h=>()=>t.formatter.match(h),a=h=>()=>{const v=t.formatter.get(h);return v?E.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):E.none()},l=h=>{const v=i7(t,()=>u.data).fold(se(tD),x=>x.title);St(h,Qa,{text:v}),WA(t,{value:v})},u=F4(t,"block_formats",Zg.SemiColon);return{tooltip:Lv(t,l7,tD),text:E.some(tD),icon:E.none(),isSelectedFor:r,getCurrentValue:E.none,getPreviewFor:a,onAction:jA(t),updateText:l,dataset:u,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},c7=(t,r)=>px(t,r,oD(t),l7,"BlocksTextUpdate"),V4=(t,r)=>{const a=Hv(t,r,oD(t));t.ui.registry.addNestedMenuItem("blocks",{text:eD,onSetup:Ha(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},nD="Fonts",d7="Font {0}",rD="System Font",u7=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],m7=t=>{const r=t.split(/\s*,\s*/);return Ie(r,a=>a.replace(/^['"]+|['"]+$/g,""))},g7=(t,r)=>r.length>0&&ei(r,a=>t.indexOf(a.toLowerCase())>-1),XV=(t,r)=>{if(t.indexOf("-apple-system")===0||r.length>0){const a=m7(t.toLowerCase());return g7(a,u7)||g7(a,r)}else return!1},sD=t=>{const r=()=>{const C=F=>F?m7(F)[0]:"",_=t.queryCommandValue("FontName"),M=x.data,A=_?_.toLowerCase():"",B=tS(t);return{matchOpt:It(M,F=>{const oe=F.format;return oe.toLowerCase()===A||C(oe).toLowerCase()===C(A).toLowerCase()}).orThunk(()=>At(XV(A,B),{title:rD,format:A})),font:_}},a=C=>_=>_.exists(M=>M.format===C),l=()=>{const{matchOpt:C}=r();return C},u=C=>()=>E.some({tag:"div",styles:C.indexOf("dings")===-1?{"font-family":C}:{}}),h=C=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,C.format)})},v=C=>{const{matchOpt:_,font:M}=r(),A=_.fold(se(M),B=>B.title);St(C,Qa,{text:A}),$A(t,{value:A})},x=F4(t,"font_family_formats",Zg.SemiColon);return{tooltip:Lv(t,d7,rD),text:E.some(rD),icon:E.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:u,onAction:h,updateText:v,dataset:x,shouldHide:!1,isInvalid:Ge}},qV=(t,r)=>px(t,r,sD(t),d7,"FontFamilyTextUpdate"),YV=(t,r)=>{const a=Hv(t,r,sD(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate(nD),onSetup:Ha(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},aD={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},QV=(()=>{const t="[0-9]+",r="[eE]"+("[+-]?"+t),a="\\.",l=h=>`(?:${h})?`,u=`[+-]?(?:${["Infinity",t+a+l(t)+l(r),a+t+l(r),t+l(r)].join("|")})`;return new RegExp(`^(${u})(.*)$`)})(),JV=(t,r)=>xr(r,a=>xr(aD[a],l=>t===l)),fx=(t,r)=>E.from(QV.exec(t)).bind(a=>{const l=Number(a[1]),u=a[2];return JV(u,r)?E.some({value:l,unit:u}):E.none()}),eZ=(t,r)=>fx(t,r).map(({value:a,unit:l})=>a+l),iD={tab:se(9),escape:se(27),enter:se(13),backspace:se(8),delete:se(46),left:se(37),up:se(38),right:se(39),down:se(40),space:se(32),home:se(36),end:se(35),pageUp:se(33),pageDown:se(34)},tZ=(t,r,a)=>{let l=E.none();const u=ee=>ee.map(fe=>nt.getValue(fe)).getOr(""),h=m1(t,"NodeChange SwitchMode",ee=>{const fe=ee.getComponent();l=E.some(fe),a.updateInputValue(fe),wt.set(fe,!t.selection.isEditable())}),v=ee=>({getComponent:se(ee)}),x=Dt(J),C=gt("custom-number-input-events"),_=(ee,fe,Ne)=>{const be=u(l),Fe=a.getNewValue(be,ee),et=be.length-`${Fe}`.length,ct=l.map(K=>K.element.dom.selectionStart-et),eo=l.map(K=>K.element.dom.selectionEnd-et);a.onAction(Fe,Ne),l.each(K=>{nt.setValue(K,Fe),fe&&(ct.each(G=>K.element.dom.selectionStart=G),eo.each(G=>K.element.dom.selectionEnd=G))})},M=(ee,fe)=>_((Ne,be)=>Ne-be,ee,fe),A=(ee,fe)=>_((Ne,be)=>Ne+be,ee,fe),B=ee=>Fs(ee.element).fold(E.none,fe=>(tt(fe),E.some(!0))),F=ee=>Nh(ee.element)?(ku(ee.element).each(fe=>tt(fe)),E.some(!0)):E.none(),oe=(ee,fe,Ne,be)=>{const Fe=Dt(J),et=r.shared.providers.translate(Ne),ct=gt("altExecuting"),eo=m1(t,"NodeChange SwitchMode",G=>{wt.set(G.getComponent(),!t.selection.isEditable())}),K=G=>{wt.isDisabled(G)||ee(!0)};return Lr.sketch({dom:{tag:"button",attributes:{title:et,"aria-label":et},classes:be.concat(fe)},components:[e4(fe,r.shared.providers.icons)],buttonBehaviours:We([wt.config({}),Yt(ct,[Rg({onSetup:eo,getApi:v},Fe),Cp({getApi:v},Fe),Re(Ui(),(G,he)=>{(he.event.raw.keyCode===iD.space()||he.event.raw.keyCode===iD.enter())&&(wt.isDisabled(G)||ee(!1))}),Re(Vu(),K),Re(qm(),K)])]),eventOrder:{[Ui()]:[ct,"keying"],[Vu()]:[ct,"alloy.base.behaviour"],[qm()]:[ct,"alloy.base.behaviour"]}})},ce=Io(oe(ee=>M(!1,ee),"minus","Decrease font size",[])),De=Io(oe(ee=>A(!1,ee),"plus","Increase font size",[])),Q=Io({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[i1.sketch({inputBehaviours:We([wt.config({}),Yt(C,[Rg({onSetup:h,getApi:v},x),Cp({getApi:v},x)]),Yt("input-update-display-text",[Re(Qa,(ee,fe)=>{nt.setValue(ee,fe.event.text)}),Re(nb(),ee=>{a.onAction(nt.getValue(ee))}),Re(Qm(),ee=>{a.onAction(nt.getValue(ee))})]),_t.config({mode:"special",onEnter:ee=>(_(so,!0,!0),E.some(!0)),onEscape:B,onUp:ee=>(A(!0,!1),E.some(!0)),onDown:ee=>(M(!0,!1),E.some(!0)),onLeft:(ee,fe)=>(fe.cut(),E.none()),onRight:(ee,fe)=>(fe.cut(),E.none())})])})],behaviours:We([Lt.config({}),_t.config({mode:"special",onEnter:F,onSpace:F,onEscape:B}),Yt("input-wrapper-events",[Re($a(),ee=>{at([ce,De],fe=>{const Ne=Ke.fromDom(fe.get(ee).element.dom);Nh(Ne)&&Tf(Ne)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[ce.asSpec(),Q.asSpec(),De.asSpec()],behaviours:We([Lt.config({}),_t.config({mode:"flow",focusInside:st.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ee=>Nh(ee.element)?E.none():(tt(ee.element),E.some(!0))})])}},h7="Font sizes",p7="Font size {0}",f7="12pt",oZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},v7={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},nZ=(t,r)=>{const a=Math.pow(10,r);return Math.round(t*a)/a},rZ=(t,r)=>/[0-9.]+px$/.test(t)?nZ(parseInt(t,10)*72/96,r||0)+"pt":ot(v7,t).getOr(t),sZ=t=>ot(oZ,t).getOr(""),Z4=t=>{const r=()=>{let C=E.none();const _=x.data,M=t.queryCommandValue("FontSize");if(M)for(let A=3;C.isNone()&&A>=0;A--){const B=rZ(M,A),F=sZ(B);C=It(_,oe=>oe.format===M||oe.format===B||oe.format===F)}return{matchOpt:C,size:M}},a=C=>_=>_.exists(M=>M.format===C),l=()=>{const{matchOpt:C}=r();return C},u=se(E.none),h=C=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,C.format)})},v=C=>{const{matchOpt:_,size:M}=r(),A=_.fold(se(M),B=>B.title);St(C,Qa,{text:A}),_I(t,{value:A})},x=F4(t,"font_size_formats",Zg.Space);return{tooltip:Lv(t,p7,f7),text:E.some(f7),icon:E.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:l,onAction:h,updateText:v,dataset:x,shouldHide:!1,isInvalid:Ge}},lD=(t,r)=>px(t,r,Z4(t),p7,"FontSizeTextUpdate"),aZ=t=>{var r;const a={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:a},iZ=16,lZ=t=>t>=0,cZ=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:a=>St(a,Qa,{text:r()}),onAction:(a,l)=>t.execCommand("FontSize",!1,a,{skip_focus:!l}),getNewValue:(a,l)=>{fx(a,["unsupportedLength","empty"]);const u=r(),h=fx(a,["unsupportedLength","empty"]).or(fx(u,["unsupportedLength","empty"])),v=h.map(A=>A.value).getOr(iZ),x=LM(t),C=h.map(A=>A.unit).filter(A=>A!=="").getOr(x),_=l(v,aZ(C).step),M=`${lZ(_)?_:v}${C}`;return M!==u&&EI(t,{value:M}),M}}},dZ=(t,r)=>tZ(t,r,cZ(t)),uZ=(t,r)=>{const a=Hv(t,r,Z4(t));t.ui.registry.addNestedMenuItem("fontsize",{text:h7,onSetup:Ha(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},mZ="Formats",b7="Format {0}",y7=(t,r)=>{const a="Paragraph",l=v=>()=>t.formatter.match(v),u=v=>()=>{const x=t.formatter.get(v);return x!==void 0?E.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):E.none()},h=v=>{const x=M=>AB(M)?me(M.items,x):RB(M)?[{title:M.title,format:M.format}]:[],C=me(h4(t),x),_=i7(t,se(C)).fold(se(a),M=>M.title);St(v,Qa,{text:_}),UA(t,{value:_})};return{tooltip:Lv(t,b7,a),text:E.some(a),icon:E.none(),isSelectedFor:l,getCurrentValue:E.none,getPreviewFor:u,onAction:jA(t),updateText:h,shouldHide:TM(t),isInvalid:v=>!t.formatter.canApply(v.format),dataset:r}},x7=(t,r)=>{const a={type:"advanced",...r.styles};return px(t,r,y7(t,a),b7,"StylesTextUpdate")},U4=(t,r)=>{const a={type:"advanced",...r.styles},l=Hv(t,r,y7(t,a));t.ui.registry.addNestedMenuItem("styles",{text:mZ,onSetup:Ha(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},cD=se([xe("toggleClass"),xe("fetch"),td("onExecute"),ge("getHotspot",E.some),ge("getAnchorOverrides",se({})),qd(),td("onItemExecute"),_o("lazySink"),xe("dom"),mo("onOpen"),In("splitDropdownBehaviours",[or,_t,Lt]),ge("matchWidth",!1),ge("useMinWidth",!1),ge("eventOrder",{}),_o("role")].concat($E())),C7=Kr({factory:Lr,schema:[xe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:We([Lt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(Yc)},buttonBehaviours:We([oo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Np=Kr({factory:Lr,schema:[xe("dom")],name:"button",defaults:()=>({buttonBehaviours:We([Lt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,r)})}})}),w7=se([C7,Np,Qi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[xe("text")],name:"aria-descriptor"}),Yi({schema:[Qu()],name:"menu",defaults:t=>({onExecute:(r,a)=>{r.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,r,a)})}})}),ZE()]),gZ=(t,r,a,l)=>{const u=M=>{go.getCurrent(M).each(A=>{wo.highlightFirst(A),_t.focusIn(A)})},h=M=>{NS(t,so,M,l,u,va.HighlightMenuAndItem).get(J)},v=M=>(h(M),E.some(!0)),x=M=>{const A=lm(M,t,"button");return Yc(A),E.some(!0)},C={...Jo([wn((M,A)=>{Lo(M,t,"aria-descriptor").each(B=>{const F=gt("aria");W(B.element,"id",F),W(M.element,"aria-describedby",F)})})]),...sv(E.some(h))},_={repositionMenus:M=>{oo.isOn(M)&&vR(M)}};return{uid:t.uid,dom:t.dom,components:r,apis:_,eventOrder:{...t.eventOrder,[ma()]:["disabling","toggling","alloy.base.behaviour"]},events:C,behaviours:Rr(t.splitDropdownBehaviours,[or.config({others:{sandbox:M=>{const A=lm(M,t,"arrow");return WE(t,M,{onOpen:()=>{oo.on(A),oo.on(M)},onClose:()=>{oo.off(A),oo.off(M)}})}}}),_t.config({mode:"special",onSpace:x,onEnter:x,onDown:v}),Lt.config({}),oo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},W4=Js({name:"SplitDropdown",configFields:cD(),partFields:w7(),factory:gZ,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),S7=t=>({isEnabled:()=>!wt.isDisabled(t),setEnabled:r=>wt.set(t,!r),setText:r=>St(t,Qa,{text:r}),setIcon:r=>St(t,y1,{icon:r})}),hZ=t=>({setActive:r=>{oo.set(t,r)},isActive:()=>oo.isOn(t),isEnabled:()=>!wt.isDisabled(t),setEnabled:r=>wt.set(t,!r),setText:r=>St(t,Qa,{text:r}),setIcon:r=>St(t,y1,{icon:r})}),k7=(t,r)=>t.map(a=>({"aria-label":r.translate(a),title:r.translate(a)})).getOr({}),_7=gt("focus-button"),dD=(t,r,a,l,u)=>{const h=r.map(x=>Io(RO(x,"tox-tbtn",u))),v=t.map(x=>Io(Ap(x,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:k7(a,u)},components:c1([v.map(x=>x.asSpec()),h.map(x=>x.asSpec())]),eventOrder:{[Wa()]:["focusing","alloy.base.behaviour",b1],[dc()]:[b1,"toolbar-group-button-events"]},buttonBehaviours:We([bd.toolbarButton(u.isDisabled),Hr(),Yt(b1,[wn((x,C)=>JS(x)),Re(Qa,(x,C)=>{h.bind(_=>_.getOpt(x)).each(_=>{Zt.set(_,[tr(u.translate(C.event.text))])})}),Re(y1,(x,C)=>{v.bind(_=>_.getOpt(x)).each(_=>{Zt.set(_,[Ap(C.event.icon,u.icons)])})}),Re(Wa(),(x,C)=>{C.event.prevent(),Eo(x,_7)})])].concat(l.getOr([])))}},E7=(t,r,a,l)=>{const u=r.shared,h=Dt(J),v={toolbarButtonBehaviours:[],getApi:S7,onSetup:t.onSetup},x=[Yt("toolbar-group-button-events",[Rg(v,h),Cp(v,h)])];return ym.sketch({lazySink:u.getSink,fetch:()=>Es.nu(C=>{C(Ie(a(t.items),L4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:dD(t.icon,t.text,t.tooltip,E.some(x),u.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},O7=(t,r,a)=>{var l;const u=Dt(J),h=dD(t.icon,t.text,t.tooltip,E.none(),a);return Lr.sketch({dom:h.dom,components:h.components,eventOrder:AO,buttonBehaviours:{...We([Yt("toolbar-button-events",[qz({onAction:t.onAction,getApi:r.getApi}),Rg(r,u),Cp(r,u)]),bd.toolbarButton(()=>!t.enabled||a.isDisabled()),Hr()].concat(r.toolbarButtonBehaviours)),[b1]:(l=h.buttonBehaviours)===null||l===void 0?void 0:l[b1]}})},pZ=(t,r)=>$4(t,r,[]),$4=(t,r,a)=>O7(t,{toolbarButtonBehaviours:a.length>0?[Yt("toolbarButtonWith",a)]:[],getApi:S7,onSetup:t.onSetup},r),fZ=(t,r)=>T7(t,r,[]),T7=(t,r,a)=>O7(t,{toolbarButtonBehaviours:[Zt.config({}),oo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Yt("toolbarToggleButtonWith",a)]:[]),getApi:hZ,onSetup:t.onSetup},r),vZ=(t,r,a)=>l=>Es.nu(u=>r.fetch(u)).map(u=>E.from(jE(ao(IE(gt("menu-value"),u,h=>{r.onItemAction(t(l),h)},r.columns,r.presets,cu.CLOSE_ON_EXECUTE,r.select.getOr(Ge),a),{movement:MS(r.columns,r.presets),menuBehaviours:C2.unnamedEvents(r.columns!=="auto"?[]:[wn((h,v)=>{hS(h,4,XM(r.presets)).each(({numRows:x,numColumns:C})=>{_t.setGridSize(h,x,C)})})])})))),bZ=(t,r)=>{const a=h=>({isEnabled:()=>!wt.isDisabled(h),setEnabled:v=>wt.set(h,!v),setIconFill:(v,x)=>{hn(h.element,`svg path[class="${v}"], rect[class="${v}"]`).each(C=>{W(C,"fill",x)})},setActive:v=>{W(h.element,"aria-pressed",v),hn(h.element,"span").each(x=>{h.getSystem().getByDom(x).each(C=>oo.set(C,v))})},isActive:()=>hn(h.element,"span").exists(v=>h.getSystem().getByDom(v).exists(oo.isOn)),setText:v=>hn(h.element,"span").each(x=>h.getSystem().getByDom(x).each(C=>St(C,Qa,{text:v}))),setIcon:v=>hn(h.element,"span").each(x=>h.getSystem().getByDom(x).each(C=>St(C,y1,{icon:v}))),setTooltip:v=>{const x=r.providers.translate(v);ae(h.element,{"aria-label":x,title:x})}}),l=Dt(J),u={getApi:a,onSetup:t.onSetup};return W4.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...k7(t.tooltip,r.providers)}},onExecute:h=>{const v=a(h);v.isEnabled()&&t.onAction(v)},onItemExecute:(h,v,x)=>{},splitDropdownBehaviours:We([bd.splitButton(r.providers.isDisabled),Hr(),Yt("split-dropdown-events",[wn((h,v)=>JS(h)),Re(_7,Lt.focus),Rg(u,l),Cp(u,l)]),L2.config({})]),eventOrder:{[dc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:vZ(a,t,r.providers),parts:{menu:aS(!1,t.columns,t.presets)},components:[W4.parts.button(dD(t.icon,t.text,E.none(),E.some([oo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),W4.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:iv("chevron-down",r.providers.icons)},buttonBehaviours:We([bd.splitButton(r.providers.isDisabled),Hr(),jw()])}),W4.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},yZ=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],vx=(t,r)=>(a,l,u)=>{const h=t(a).mapError(v=>ii(v)).getOrDie();return r(h,l,u)},D7={button:vx(mS,(t,r)=>pZ(t,r.shared.providers)),togglebutton:vx(cE,(t,r)=>fZ(t,r.shared.providers)),menubutton:vx(b8,(t,r)=>zg(t,"tox-tbtn",r,E.none(),!1)),splitbutton:vx(K9,(t,r)=>bZ(t,r.shared)),grouptoolbarbutton:vx($9,(t,r,a)=>{const l=a.ui.registry.getAll().buttons,u=v=>bx(a,{buttons:l,toolbar:v,allowToolbarGroups:!1},r,E.none()),h={[Gb]:r.shared.header.isPositionedAtTop()?Xd.TopToBottom:Xd.BottomToTop};switch(r1(a)){case Pl.floating:return E7(t,r,u,h);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},M7=(t,r,a)=>ot(D7,t.type).fold(()=>(console.error("skipping button defined by",t),E.none()),l=>E.some(l(t,r,a))),uD={styles:x7,fontsize:lD,fontsizeinput:dZ,fontfamily:qV,blocks:c7,align:GV},xZ=t=>{const r=Ie(yZ,a=>{const l=qo(a.items,u=>bo(t,u)||bo(uD,u));return{name:a.name,items:l}});return qo(r,a=>a.items.length>0)},A7=t=>{const r=t.split("|");return Ie(r,a=>({items:a.trim().split(" ")}))},CZ=t=>_n(t,r=>bo(r,"name")&&bo(r,"items")),wZ=t=>{const r=t.toolbar,a=t.buttons;return r===!1?[]:r===void 0||r===!0?xZ(a):Pt(r)?A7(r):CZ(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},SZ=(t,r,a,l,u,h)=>ot(r,a.toLowerCase()).orThunk(()=>h.bind(v=>hr(v,x=>ot(r,x+a.toLowerCase())))).fold(()=>ot(uD,a.toLowerCase()).map(v=>v(t,u)),v=>v.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),E.none()):M7(v,u,t)),bx=(t,r,a,l)=>{const u=wZ(r),h=Ie(u,v=>{const x=me(v.items,C=>C.trim().length===0?[]:SZ(t,r.buttons,C,r.allowToolbarGroups,a,l).toArray());return{title:E.from(t.translate(v.name)),items:x}});return qo(h,v=>v.items.length>0)},R7=(t,r,a,l)=>{const u=r.mainUi.outerContainer,h=a.toolbar,v=a.buttons;if(_n(h,Pt)){const x=h.map(C=>{const _={toolbar:C,buttons:v,allowToolbarGroups:a.allowToolbarGroups};return bx(t,_,l,E.none())});cn.setToolbars(u,x)}else cn.setToolbar(u,bx(t,a,l,E.none()))},mD=Bs(),kZ=mD.os.isiOS()&&mD.os.version.major<=12,_Z=(t,r)=>{const{uiMotherships:a}=r,l=t.dom;let u=t.getWin();const h=t.getDoc().documentElement,v=Dt(gn(u.innerWidth,u.innerHeight)),x=Dt(gn(h.offsetWidth,h.offsetHeight)),C=()=>{const B=v.get();(B.left!==u.innerWidth||B.top!==u.innerHeight)&&(v.set(gn(u.innerWidth,u.innerHeight)),kE(t))},_=()=>{const B=t.getDoc().documentElement,F=x.get();(F.left!==B.offsetWidth||F.top!==B.offsetHeight)&&(x.set(gn(B.offsetWidth,B.offsetHeight)),kE(t))},M=B=>{FA(t,B)};l.bind(u,"resize",C),l.bind(u,"scroll",M);const A=Fb(Ke.fromDom(t.getBody()),"load",_);t.on("hide",()=>{at(a,B=>{ve(B.element,"display","none")})}),t.on("show",()=>{at(a,B=>{xo(B.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{A.unbind(),l.unbind(u,"resize",C),l.unbind(u,"scroll",M),u=null})},EZ=(t,r,a)=>{vp(t)&&tu(a.mainUi.mothership.element,a.popupUi.mothership),Ga(r,a.dialogUi.mothership)};var OZ=Object.freeze({__proto__:null,render:(t,r,a,l,u)=>{const{mainUi:h,uiMotherships:v}=r,x=Dt(0),C=h.outerContainer;WV(t);const _=Ke.fromDom(u.targetNode),M=Vn(zr(_));tu(_,h.mothership),EZ(t,M,r),t.on("SkinLoaded",()=>{cn.setSidebar(C,a.sidebar,FM(t)),R7(t,r,a,l),x.set(t.getWin().innerWidth),cn.setMenubar(C,n7(t,a)),cn.setViews(C,a.views),_Z(t,r)});const A=cn.getSocket(C).getOrDie("Could not find expected socket element");if(kZ){Rs(A.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ce=$z(()=>{t.dispatch("ScrollContent")},20),De=Xs(A.element,"scroll",ce.throttle);t.on("remove",De.unbind)}fS(t,r),t.addCommand("ToggleSidebar",(ce,De)=>{cn.toggleSidebar(C,De),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ce;return(ce=cn.whichSidebar(C))!==null&&ce!==void 0?ce:""}),t.addCommand("ToggleView",(ce,De)=>{if(cn.toggleView(C,De)){const Q=C.element;h.mothership.broadcastOn([ld()],{target:Q}),at(v,ee=>{ee.broadcastOn([ld()],{target:Q})}),Ao(cn.whichView(C))&&(t.focus(),t.nodeChanged(),cn.refreshToolbar(C))}}),t.addQueryValueHandler("ToggleView",()=>{var ce;return(ce=cn.whichView(C))!==null&&ce!==void 0?ce:""});const B=r1(t),F=()=>{cn.refreshToolbar(r.mainUi.outerContainer)};(B===Pl.sliding||B===Pl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ce=t.getWin().innerWidth;ce!==x.get()&&(F(),x.set(ce))});const oe={setEnabled:ce=>{pS(r,!ce)},isEnabled:()=>!wt.isDisabled(C)};return{iframeContainer:A.element.dom,editorContainer:C.element.dom,api:oe}}});const gD=t=>/^[0-9\.]+(|px)$/i.test(""+t)?E.some(parseInt(""+t,10)):E.none(),hD=t=>Os(t)?t+"px":t,j4=(t,r,a)=>{const l=r.filter(h=>t<h),u=a.filter(h=>t>h);return l.or(u).getOr(t)},B7=t=>{const r=R_(t),a=Kw(t),l=l2(t);return gD(r).map(u=>j4(u,a,l))},TZ=t=>B7(t).getOr(R_(t)),N7=t=>{const r=i2(t),a=Gw(t),l=Xw(t);return gD(r).map(u=>j4(u,a,l))},DZ=t=>N7(t).getOr(i2(t)),{ToolbarLocation:pD,ToolbarMode:L7}=_H,MZ=40,AZ=(t,r,a,l,u)=>{const{mainUi:h,uiMotherships:v}=a,x=n1.DOM,C=cv(t),_=m2(t),M=Xw(t).or(N7(t)),A=l.shared.header,B=A.isPositionedAtTop,F=r1(t),oe=F===L7.sliding||F===L7.floating,ce=Dt(!1),De=()=>ce.get()&&!t.removed,Q=G=>oe?G.fold(se(0),he=>he.components().length>1?Cn(he.components()[1].element):0):0,ee=G=>{switch(B_(t)){case pD.auto:const he=cn.getToolbar(h.outerContainer),Ee=Q(he),dt=Cn(G.element)-Ee,_e=Nn(r);if(_e.y>dt)return"top";{const Ue=Fn(r),Je=Math.max(Ue.dom.scrollHeight,Cn(Ue));return _e.bottom<Je-dt||bs().bottom<_e.bottom-dt?"bottom":"top"}case pD.bottom:return"bottom";case pD.top:default:return"top"}},fe=G=>{u.on(he=>{ir.setModes(he,[G]),A.setDockingMode(G);const Ee=B()?Xd.TopToBottom:Xd.BottomToTop;W(he.element,Gb,Ee)})},Ne=()=>{u.on(G=>{const he=M.getOrThunk(()=>{const Ee=gD(Sr(fr(),"margin-left")).getOr(0);return Un(fr())-Fr(r).left+Ee});ve(G.element,"max-width",he+"px")})},be=G=>{u.on(he=>{const Ee=cn.getToolbar(h.outerContainer),dt=Q(Ee),_e=Nn(r),{top:Ue,left:Je}=Fe(t,h.outerContainer.element).fold(()=>({top:B()?Math.max(_e.y-Cn(he.element)+dt,0):_e.bottom,left:_e.x}),Do=>{var ko;const fn=Nn(Do),vn=(ko=Do.dom.scrollTop)!==null&&ko!==void 0?ko:0,Ac=Vo(Do,fr()),Kn=Ac?Math.max(_e.y-Cn(he.element)+dt,0):_e.y-fn.y+vn-Cn(he.element)+dt;return{top:B()?Kn:_e.bottom,left:Ac?_e.x:_e.x-fn.x}}),xt={position:"absolute",left:Math.round(Je)+"px",top:Math.round(Ue)+"px"},no=G.map(Do=>{const ko=ca(),fn=150,vn=window.innerWidth-(Je-ko.left);return{width:Math.max(Math.min(Do,vn),fn)+"px"}}).getOr({});Rs(h.outerContainer.element,{...xt,...no})})},Fe=(G,he)=>vp(G)?gT(he):E.none(),et=()=>{at(v,G=>{G.broadcastOn([vg()],{})})},ct=()=>{if(C)return E.none();if(Fr(h.outerContainer.element).left+si(h.outerContainer.element)>=window.innerWidth-MZ||Wo(h.outerContainer.element,"width").isSome()){ve(h.outerContainer.element,"position","absolute"),ve(h.outerContainer.element,"left","0px"),xo(h.outerContainer.element,"width");const G=si(h.outerContainer.element);return E.some(G)}else return E.none()},eo=G=>{if(!De())return;C||Ne();const he=C?E.none():ct();oe&&cn.refreshToolbar(h.outerContainer),C||be(he),_&&u.on(G),et()},K=()=>C||!_||!De()?!1:u.get().exists(G=>{const he=A.getDockingMode(),Ee=ee(G);return Ee!==he?(fe(Ee),!0):!1});return{isVisible:De,isPositionedAtTop:B,show:()=>{ce.set(!0),ve(h.outerContainer.element,"display","flex"),x.addClass(t.getBody(),"mce-edit-focus"),at(v,G=>{xo(G.element,"display")}),K(),vp(t)?eo(G=>ir.isDocked(G)?ir.reset(G):ir.refresh(G)):eo(ir.refresh)},hide:()=>{ce.set(!1),ve(h.outerContainer.element,"display","none"),x.removeClass(t.getBody(),"mce-edit-focus"),at(v,G=>{ve(G.element,"display","none")})},update:eo,updateMode:()=>{K()&&eo(ir.reset)},repositionPopups:et}},fD=(t,r)=>{const a=Nn(t);return{pos:r?a.y:a.bottom,bounds:a}},RZ=(t,r,a,l)=>{const u=Dt(fD(r,a.isPositionedAtTop())),h=_=>{const{pos:M,bounds:A}=fD(r,a.isPositionedAtTop()),{pos:B,bounds:F}=u.get(),oe=A.height!==F.height||A.width!==F.width;u.set({pos:M,bounds:A}),oe&&kE(t,_),a.isVisible()&&(B!==M?a.update(ir.reset):oe&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(ir.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>h(_))});let v=0;const x=XS(()=>a.update(ir.refresh),33);t.on("ScrollWindow",()=>{const _=ca().left;_!==v&&(v=_,x.throttle()),a.updateMode()}),vp(t)&&t.on("ElementScroll",_=>{a.update(ir.refresh)});const C=dg();C.set(Fb(Ke.fromDom(t.getBody()),"load",_=>h(_.raw))),t.on("remove",()=>{C.clear()})};var BZ=Object.freeze({__proto__:null,render:(t,r,a,l,u)=>{const{mainUi:h}=r,v=un(),x=Ke.fromDom(u.targetNode),C=AZ(t,x,r,l,v),_=AM(t);r7(t);const M=()=>{if(v.isSet()){C.show();return}v.set(cn.getHeader(h.outerContainer).getOrDie());const B=Z_(t);vp(t)?(tu(x,h.mothership),tu(x,r.popupUi.mothership)):Ga(B,h.mothership),Ga(B,r.dialogUi.mothership),R7(t,r,a,l),cn.setMenubar(h.outerContainer,n7(t,a)),C.show(),RZ(t,x,C,_),t.nodeChanged()};t.on("show",M),t.on("hide",C.hide),_||(t.on("focus",M),t.on("blur",C.hide)),t.on("init",()=>{(t.hasFocus()||_)&&M()}),fS(t,r);const A={show:M,hide:C.hide,setEnabled:B=>{pS(r,!B)},isEnabled:()=>!wt.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:A}}});const H7=()=>{const t=un(),r=un(),a=un();return{dialogUi:t,popupUi:r,mainUi:a,getUiMotherships:()=>{const l=t.get().map(h=>h.mothership),u=r.get().map(h=>h.mothership);return l.fold(()=>u.toArray(),h=>u.fold(()=>[h],v=>Vo(h.element,v.element)?[h]:[h,v]))},lazyGetInOuterOrDie:(l,u)=>()=>a.get().bind(h=>u(h.outerContainer)).getOrDie(`Could not find ${l} element in OuterContainer`)}},NZ="contexttoolbar-show",vD="contexttoolbar-hide",I7=t=>({hide:()=>Eo(t,sf()),getValue:()=>nt.getValue(t)}),P7=(t,r)=>Re(L6,(a,l)=>{const u=t.get(a),h=I7(u);r.onAction(h,l.event.buttonApi)}),LZ=(t,r,a)=>{const{primary:l,...u}=r.original,h=lc(mS({...u,type:"button",onAction:J}));return $4(h,a,[P7(t,r)])},HZ=(t,r,a)=>{const{primary:l,...u}=r.original,h=lc(cE({...u,type:"togglebutton",onAction:J}));return T7(h,a,[P7(t,r)])},Iv=t=>t.type==="contextformtogglebutton",IZ=(t,r,a)=>Iv(r)?HZ(t,r,a):LZ(t,r,a),PZ=(t,r,a)=>{const l=Ie(r,u=>Io(IZ(t,u,a)));return{asSpecs:()=>Ie(l,u=>u.asSpec()),findPrimary:u=>hr(r,(h,v)=>h.primary?E.from(l[v]).bind(x=>x.getOpt(u)).filter(Oe(wt.isDisabled)):E.none())}},z7=(t,r)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),l=Io(i1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:We([_t.config({mode:"special",onEnter:h=>u.findPrimary(h).map(v=>(Yc(v),!0)),onLeft:(h,v)=>(v.cut(),E.none()),onRight:(h,v)=>(v.cut(),E.none())})])})),u=PZ(l,t.commands,r);return[{title:E.none(),items:[l.asSpec()]},{title:E.none(),items:u.asSpecs()}]},zZ={renderContextForm:(t,r,a)=>H4({type:t,uid:gt("context-toolbar"),initGroups:z7(r,a),onEscape:E.none,cyclicKeying:!0,providers:a}),buildInitGroups:z7},F7=(t,r,a)=>r.bottom-t.y>=a&&t.bottom-r.y>=a,FZ=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const a=_u(Ke.fromDom(t.startContainer),t.startOffset).element;return(rr(a)?ns(a):E.some(a)).filter(zn).map(l=>l.dom.getBoundingClientRect()).getOr(r)}else return r},bD=t=>{const r=t.selection.getRng(),a=FZ(r);if(t.inline){const l=ca();return Jn(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=rs(Ke.fromDom(t.getBody()));return Jn(l.x+a.left,l.y+a.top,a.width,a.height)}},VZ=(t,r)=>r.filter(a=>fs(a)&&Ti(a)).map(rs).getOrThunk(()=>bD(t)),yD=(t,r,a)=>{const l=Math.max(t.x+a,r.x),u=Math.min(t.right-a,r.right);return{x:l,width:u-l}},ZZ=(t,r,a,l,u,h)=>{const v=Ke.fromDom(t.getContainer()),x=hn(v,".tox-editor-header").getOr(v),C=Nn(x),_=C.y>=r.bottom,M=l&&!_;if(t.inline&&M)return{y:Math.max(C.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!M)return{y:a.y,bottom:Math.min(C.y-h,a.bottom)};const A=u==="line"?Nn(v):r;return M?{y:Math.max(C.bottom+h,a.y),bottom:Math.min(A.bottom-h,a.bottom)}:{y:Math.max(A.y+h,a.y),bottom:Math.min(C.y-h,a.bottom)}},V7=(t,r,a,l=0)=>{const u=Ni(window),h=Nn(Ke.fromDom(t.getContentAreaContainer())),v=c2(t)||nS(t)||s1(t),{x,width:C}=yD(h,u,l);if(t.inline&&!v)return Jn(x,u.y,C,u.height);{const _=r.header.isPositionedAtTop(),{y:M,bottom:A}=ZZ(t,h,u,_,a,l);return Jn(x,M,C,A-M)}},yx=12,xD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Z7={maxHeightFunction:gg(),maxWidthFunction:HT()},UZ=(t,r)=>{const a=t.selection.getRng(),l=_u(Ke.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Vo(l.element,r)},WZ=(t,r,a)=>{const l=Wo(t,"position");ve(t,"position",r);const u=a(t);return l.each(h=>ve(t,"position",h)),u},U7=t=>t==="node",$Z=(t,r,a,l,u)=>{const h=bD(t),v=l.lastElement().exists(x=>Vo(a,x));if(UZ(t,a))return v?TB:Ul;if(v)return WZ(r,l.getMode(),()=>F7(h,Nn(r),-20)&&!l.isReposition()?DB:TB);{const x=l.getMode()==="fixed"?u.y+ca().top:u.y,C=Cn(r)+yx;return x+C<=h.y?Ul:Bv}},jZ=(t,r,a,l)=>{const u=v=>(x,C,_,M,A)=>{const B=$Z(t,M,v,a,A),F={...x,y:A.y,height:A.height};return{...B(F,C,_,M,A),alwaysFit:!0}},h=v=>U7(l)?[u(v)]:[];return r?{onLtr:v=>[Mr,us,Ss,ks,ga,Ls].concat(h(v)),onRtl:v=>[Mr,Ss,us,ga,ks,Ls].concat(h(v))}:{onLtr:v=>[Ls,Mr,ks,us,ga,Ss].concat(h(v)),onRtl:v=>[Ls,Mr,ga,Ss,ks,us].concat(h(v))}},W7=(t,r,a,l)=>r==="line"?{bubble:gc(yx,0,xD),layouts:{onLtr:()=>[Ab],onRtl:()=>[y0]},overrides:Z7}:{bubble:gc(0,yx,xD,1/yx),layouts:jZ(t,a,l,r),overrides:Z7},CD=(t,r)=>{const a=qo(r,h=>h.predicate(t.dom)),{pass:l,fail:u}=hs(a,h=>h.type==="contexttoolbar");return{contextToolbars:l,contextForms:u}},GZ=t=>{if(t.length<=1)return t;{const r=h=>xr(t,v=>v.position===h),a=h=>qo(t,v=>v.position===h),l=r("selection"),u=r("node");if(l||u)if(u&&l){const h=a("node"),v=Ie(a("selection"),x=>({...x,position:"node"}));return h.concat(v)}else return a(l?"selection":"node");else return a("line")}},KZ=t=>{if(t.length<=1)return t;{const r=a=>It(t,l=>l.position===a);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(a=>a.position).fold(()=>[],a=>qo(t,l=>l.position===a))}},XZ=(t,r,a)=>{const l=CD(t,r);if(l.contextForms.length>0)return E.some({elem:t,toolbars:[l.contextForms[0]]});{const u=CD(t,a);if(u.contextForms.length>0)return E.some({elem:t,toolbars:[u.contextForms[0]]});if(l.contextToolbars.length>0||u.contextToolbars.length>0){const h=GZ(l.contextToolbars.concat(u.contextToolbars));return E.some({elem:t,toolbars:h})}else return E.none()}},G4=(t,r,a)=>t(r)?E.none():ci(r,l=>{if(zn(l)){const{contextToolbars:u,contextForms:h}=CD(l,a.inNodeScope),v=h.length>0?h:KZ(u);return v.length>0?E.some({elem:l,toolbars:v}):E.none()}else return E.none()},t),qZ=(t,r)=>{const a=Ke.fromDom(r.getBody()),l=v=>Vo(v,a),u=v=>!l(v)&&!Di(a,v),h=Ke.fromDom(r.selection.getNode());return u(h)?E.none():XZ(h,t.inNodeScope,t.inEditorScope).orThunk(()=>G4(l,h,t))},K4=(t,r)=>{const a={},l=[],u=[],h={},v={},x=(M,A)=>{const B=lc(fA(A));a[M]=B,B.launch.map(F=>{h["form:"+M]={...A.launch,type:F.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(B)}}}),B.scope==="editor"?u.push(B):l.push(B),v[M]=B},C=(M,A)=>{qH(A).each(B=>{A.scope==="editor"?u.push(B):l.push(B),v[M]=B})},_=yn(t);return at(_,M=>{const A=t[M];A.type==="contextform"?x(M,A):A.type==="contexttoolbar"&&C(M,A)}),{forms:a,inNodeScope:l,inEditorScope:u,lookupTable:v,formNavigators:h}},xx=gt("forward-slide"),wD=gt("backward-slide"),SD=gt("change-slide-event"),kD="tox-pop--resizing",YZ=t=>{const r=Dt([]);return pn.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{r.set([]),pn.getContent(a).each(l=>{xo(l.element,"visibility")}),Tn(a.element,kD),xo(a.element,"width")},inlineBehaviours:We([Yt("context-toolbar-events",[$u(di(),(a,l)=>{l.event.raw.propertyName==="width"&&(Tn(a.element,kD),xo(a.element,"width"))}),Re(SD,(a,l)=>{const u=a.element;xo(u,"width");const h=Un(u);pn.setContent(a,l.event.contents),Kt(u,kD);const v=Un(u);ve(u,"width",h+"px"),pn.getContent(a).each(x=>{l.event.focus.bind(C=>(tt(C),mc(u))).orThunk(()=>(_t.focusIn(x),rd(zr(u))))}),setTimeout(()=>{ve(a.element,"width",v+"px")},0)}),Re(xx,(a,l)=>{pn.getContent(a).each(u=>{r.set(r.get().concat([{bar:u,focus:rd(zr(a.element))}]))}),St(a,SD,{contents:l.event.forwardContents,focus:E.none()})}),Re(wD,(a,l)=>{jl(r.get()).each(u=>{r.set(r.get().slice(0,r.get().length-1)),St(a,SD,{contents:ji(u.bar),focus:u.focus})})})]),_t.config({mode:"special",onEscape:a=>jl(r.get()).fold(()=>t.onEscape(),l=>(Eo(a,wD),E.some(!0)))})]),lazySink:()=>Wt.value(t.sink)})},_D="tox-pop--transition",QZ=(t,r,a,l)=>{const u=l.backstage,h=u.shared,v=Bs().deviceType.isTouch,x=un(),C=un(),_=un(),M=Cs(YZ({sink:a,onEscape:()=>(t.focus(),E.some(!0))})),A=()=>{const K=_.get().getOr("node"),G=U7(K)?1:0;return V7(t,h,K,G)},B=()=>!t.removed&&!(v()&&u.isContextMenuOpen()),F=K=>Ms(Pa(K,x.get(),Vo),!0),oe=()=>{if(B()){const K=A(),G=Ms(_.get(),"node")?VZ(t,x.get()):bD(t);return K.height<=0||!F7(G,K,.01)}else return!0},ce=()=>{x.clear(),C.clear(),_.clear(),pn.hide(M)},De=()=>{if(pn.isOpen(M)){const K=M.element;xo(K,"display"),oe()?ve(K,"display","none"):(C.set(0),pn.reposition(M))}},Q=K=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[K],behaviours:We([_t.config({mode:"acyclic"}),Yt("pop-dialog-wrap-events",[wn(G=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>_t.focusIn(G))}),mi(G=>{t.shortcuts.remove("ctrl+F9")})])])}),ee=No(()=>K4(r,K=>{const G=be([K]);St(M,xx,{forwardContents:Q(G)})})),fe=(K,G)=>bx(t,{buttons:K,toolbar:G.items,allowToolbarGroups:!1},l.backstage,E.some(["form:"])),Ne=(K,G)=>zZ.buildInitGroups(K,G),be=K=>{const{buttons:G}=t.ui.registry.getAll(),he=ee(),Ee={...G,...he.formNavigators},dt=r1(t)===Pl.scrolling?Pl.scrolling:Pl.default,_e=Bt(Ie(K,Ue=>Ue.type==="contexttoolbar"?fe(Ee,Ue):Ne(Ue,h.providers)));return H4({type:dt,uid:gt("context-toolbar"),initGroups:_e,onEscape:E.none,cyclicKeying:!0,providers:h.providers})},Fe=(K,G)=>{const he=K==="node"?h.anchors.node(G):h.anchors.cursor(),Ee=W7(t,K,v(),{lastElement:x.get,isReposition:()=>Ms(C.get(),0),getMode:()=>Is.getMode(a)});return ao(he,Ee)},et=(K,G)=>{if(eo.cancel(),!B())return;const he=be(K),Ee=K[0].position,dt=Fe(Ee,G);_.set(Ee),C.set(1);const _e=M.element;xo(_e,"display"),F(G)||(Tn(_e,_D),Is.reset(a,M)),pn.showWithinBounds(M,Q(he),{anchor:dt,transition:{classes:[_D],mode:"placement"}},()=>E.some(A())),G.fold(x.clear,x.set),oe()&&ve(_e,"display","none")};let ct=!1;const eo=XS(()=>{if(!(!t.hasFocus()||t.removed||ct))if(ls(M.element,_D))eo.throttle();else{const K=ee();qZ(K,t).fold(ce,G=>{et(G.toolbars,E.some(G.elem))})}},17);t.on("init",()=>{t.on("remove",ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",De),t.on("click keyup focus SetContent",eo.throttle),t.on(vD,ce),t.on(NZ,K=>{const G=ee();ot(G.lookupTable,K.toolbarKey).each(he=>{et([he],At(K.target!==t,K.target)),pn.getContent(M).each(_t.focusIn)})}),t.on("focusout",K=>{Iw.setEditorTimeout(t,()=>{mc(a.element).isNone()&&mc(M.element).isNone()&&ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ce()}),t.on("AfterProgressState",K=>{K.state?ce():t.hasFocus()&&eo.throttle()}),t.on("dragstart",()=>{ct=!0}),t.on("dragend drop",()=>{ct=!1}),t.on("NodeChange",K=>{mc(M.element).fold(eo.throttle,J)})})},X4=t=>{at([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:rl(t,r.cmd),onSetup:SS(t,r.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ha(t),onAction:rl(t,"JustifyNone")})},ED=(t,r)=>{const a=()=>{const l=r.getOptions(t),u=r.getCurrent(t).map(r.hash),h=un();return Ie(l,v=>({type:"togglemenuitem",text:r.display(v),onSetup:x=>{const C=M=>{M&&(h.on(A=>A.setActive(!1)),h.set(x)),x.setActive(M)};C(Ms(u,r.hash(v)));const _=r.watcher(t,v,C);return()=>{h.clear(),_()}},onAction:()=>r.setCurrent(t,v)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(a()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:a,onSetup:r.onMenuSetup})},$7=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:VM,hash:r=>eZ(r,["fixed","relative","empty"]).getOr(r),display:so,watcher:(r,a,l)=>r.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:r=>E.from(r.queryCommandValue("LineHeight")),setCurrent:(r,a)=>r.execCommand("LineHeight",!1,a),onToolbarSetup:Ha(t),onMenuSetup:Ha(t)}),j7=t=>E.from(DM(t)).map(r=>({name:"language",text:"Language",icon:"language",getOptions:se(r),hash:a=>Mn(a.customCode)?a.code:`${a.code}/${a.customCode}`,display:a=>a.title,watcher:(a,l,u)=>{var h;return a.formatter.formatChanged("lang",u,!1,{value:l.code,customValue:(h=l.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:a=>{const l=Ke.fromDom(a.selection.getNode());return ch(l,u=>E.some(u).filter(zn).bind(h=>Tt(h,"lang").map(v=>{const x=Tt(h,"data-mce-lang").getOrUndefined();return{code:v,customCode:x,title:""}})))},setCurrent:(a,l)=>a.execCommand("Lang",!1,l),onToolbarSetup:a=>{const l=dg();return a.setActive(t.formatter.match("lang",{},void 0,!0)),l.set(t.formatter.formatChanged("lang",a.setActive,!0)),T2(l.clear,Ha(t)(a))},onMenuSetup:Ha(t)})),G7=t=>{ED(t,$7(t)),j7(t).each(r=>ED(t,r))},JZ=(t,r)=>{KV(t,r),YV(t,r),U4(t,r),V4(t,r),uZ(t,r)},K7=t=>m1(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),eU=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:K7(t),onAction:rl(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ha(t),onAction:rl(t,"indent")})},tU=t=>{eU(t)},X7=(t,r)=>a=>{a.setActive(r.get());const l=u=>{r.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",l),T2(()=>t.off("PastePlainTextToggle",l),Ha(t)(a))},oU=t=>{const r=Dt(I_(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:X7(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:X7(t,r)})},OD=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},Cx=t=>{Hg.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,a)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:SS(t,r.name),onAction:OD(t,r.name)})});for(let r=1;r<=6;r++){const a="h"+r;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+r,onSetup:SS(t,a),onAction:OD(t,a)})}},nU=t=>{Hg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:rl(t,r.action)})}),Hg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Ha(t),onAction:rl(t,r.action)})})},rU=t=>{Hg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:rl(t,r.action),onSetup:SS(t,r.name)})})},sU=t=>{Cx(t),nU(t),rU(t)},q7=t=>{Hg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:rl(t,r.action)})}),Hg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:Ha(t),onAction:rl(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ha(t),onAction:OD(t,"code")})},aU=t=>{sU(t),q7(t)},wx=(t,r)=>m1(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),iU=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:wx(t,"hasUndo"),onAction:rl(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:wx(t,"hasRedo"),onAction:rl(t,"redo")})},lU=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:wx(t,"hasUndo"),onAction:rl(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:wx(t,"hasRedo"),onAction:rl(t,"redo")})},cU=t=>{iU(t),lU(t)},dU=t=>m1(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),uU=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:dU(t),onAction:rl(t,"mceToggleVisualAid")})},Sx=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:rl(t,"mceToggleVisualAid")})},Y7=t=>{Sx(t),uU(t)},mU=(t,r)=>{X4(t),aU(t),JZ(t,r),cU(t),BI(t),Y7(t),tU(t),G7(t),oU(t)},gU=t=>Pt(t)?t.split(/[ ,]/):t,TD=t=>r=>r.options.get(t),DD=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Pt(a)||_n(a,Pt)?{value:gU(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},MD=TD("contextmenu_never_use_native"),Q7=TD("contextmenu_avoid_overlap"),hU=t=>E1(t).length===0,E1=t=>{const r=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:qo(a,l=>bo(r,l))},Lp=(t,r)=>({type:"makeshift",x:t,y:r}),AD=(t,r,a)=>Lp(t.x+r,t.y+a),RD=t=>t.type==="longpress"||t.type.indexOf("touch")===0,J7=t=>{if(RD(t)){const r=t.touches[0];return Lp(r.pageX,r.pageY)}else return Lp(t.pageX,t.pageY)},pU=t=>{if(RD(t)){const r=t.touches[0];return Lp(r.clientX,r.clientY)}else return Lp(t.clientX,t.clientY)},eN=(t,r)=>{const a=n1.DOM.getPos(t);return AD(r,a.x,a.y)},fU=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?J7(r):eN(t.getContentAreaContainer(),pU(r)):tN(t),tN=t=>({type:"selection",root:Ke.fromDom(t.selection.getNode())}),vU=t=>({type:"node",node:E.some(Ke.fromDom(t.selection.getNode())),root:Ke.fromDom(t.getBody())}),oN=(t,r,a)=>{switch(a){case"node":return vU(t);case"point":return fU(t,r);case"selection":return tN(t)}},bU=(t,r,a,l,u,h)=>{const v=a(),x=oN(t,r,h);x1(v,cu.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:E.none()}).map(C=>{r.preventDefault(),pn.showMenuAt(u,{anchor:x},{menu:{markers:a1("normal")},data:C})})},nN={onLtr:()=>[Mr,us,Ss,ks,ga,Ls,Ul,Bv,Rv,g4,ox,m4],onRtl:()=>[Mr,Ss,us,ga,ks,Ls,Ul,Bv,ox,m4,Rv,g4]},q4=12,rN={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sN=(t,r)=>{const a=t.selection;if(a.isCollapsed()||r.touches.length<1)return!1;{const l=r.touches[0],u=a.getRng();return Fh(t.getWin(),Rf.domRange(u)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},BD=t=>{const r=t.selection.getRng(),a=()=>{Iw.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),h()};t.once("touchend",a);const l=v=>{v.preventDefault(),v.stopImmediatePropagation()};t.on("mousedown",l,!0);const u=()=>h();t.once("longpresscancel",u);const h=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",l)}},yU=(t,r,a)=>{const l=oN(t,r,a);return{bubble:gc(0,a==="point"?q4:0,rN),layouts:nN,overrides:{maxWidthFunction:HT(),maxHeightFunction:gg()},...l}},aN=(t,r,a,l,u,h,v)=>{const x=yU(t,r,h);x1(a,cu.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:E.none()}).map(C=>{r.preventDefault();const _=v?va.HighlightMenuAndItem:va.HighlightNone;pn.showMenuWithinBounds(u,{anchor:x},{menu:{markers:a1("normal"),highlightOnOpen:_},data:C,type:"horizontal"},()=>E.some(V7(t,l.shared,h==="node"?"node":"selection"))),t.dispatch(vD)})},xU=(t,r,a,l,u,h)=>{const v=Bs(),x=v.os.isiOS(),C=v.os.isMacOS(),_=v.os.isAndroid(),M=v.deviceType.isTouch(),A=()=>!(_||x||C&&M),B=()=>{const F=a();aN(t,r,F,l,u,h,A())};if((C||x)&&h!=="node"){const F=()=>{BD(t),B()};sN(t,r)?F():(t.once("selectionchange",F),t.once("touchend",()=>t.off("selectionchange",F)))}else B()},iN=t=>Pt(t)?t==="|":t.type==="separator",Pv={type:"separator"},ND=t=>{const r=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Pt(t))return t;switch(t.type){case"separator":return Pv;case"submenu":return{type:"nestedmenuitem",...r(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Pt(l)?l:Ie(l,ND)}};default:const a=t;return{type:"menuitem",...r(a),onAction:qe(a.onAction)}}},lN=(t,r)=>{if(r.length===0)return t;const a=jl(t).filter(l=>!iN(l)).fold(()=>[],l=>[Pv]);return t.concat(a).concat(r).concat([Pv])},CU=(t,r,a)=>{const l=on(r,(u,h)=>ot(t,h.toLowerCase()).map(v=>{const x=v.update(a);if(Pt(x)&&za(ts(x)))return lN(u,x.split(" "));if(Ut(x)&&x.length>0){const C=Ie(x,ND);return lN(u,C)}else return u}).getOrThunk(()=>u.concat([h])),[]);return l.length>0&&iN(l[l.length-1])&&l.pop(),l},wU=(t,r)=>r.ctrlKey&&!MD(t),SU=t=>t.type==="longpress"||bo(t,"touches"),cN=(t,r)=>!SU(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),LD=(t,r)=>cN(t,r)?t.selection.getStart(!0):r.target,dN=(t,r)=>{const a=Q7(t),l=cN(t,r)?"selection":"point";if(za(a)){const u=LD(t,r);return M2(Ke.fromDom(u),a)?"node":l}else return l},kU=(t,r,a)=>{const l=Bs().deviceType.isTouch,u=Cs(pn.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:We([Yt("dismissContextMenu",[Re(og(),(x,C)=>{lo.close(x),t.focus()})])])})),h=()=>pn.hide(u),v=x=>{if(MD(t)&&x.preventDefault(),wU(t,x)||hU(t))return;const C=dN(t,x),_=()=>{const M=LD(t,x),A=t.ui.registry.getAll(),B=E1(t);return CU(A.contextMenus,B,M)};(l()?xU:bU)(t,x,_,a,u,C)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");t.on(x,h),t.on("longpress contextmenu",v)})},HD=El.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),kx=t=>r=>r.translate(-t.left,-t.top),Y4=t=>r=>r.translate(t.left,t.top),Ug=t=>(r,a)=>on(t,(l,u)=>u(l),gn(r,a)),Q4=(t,r,a)=>t.fold(Ug([Y4(a),kx(r)]),Ug([kx(r)]),Ug([])),zv=(t,r,a)=>t.fold(Ug([Y4(a)]),Ug([]),Ug([Y4(r)])),uN=(t,r,a)=>t.fold(Ug([]),Ug([kx(a)]),Ug([Y4(r),kx(a)])),ID=(t,r,a,l,u,h)=>{const v=zv(t,u,h),x=zv(r,u,h);return Math.abs(v.left-x.left)<=a&&Math.abs(v.top-x.top)<=l},_U=(t,r,a,l,u,h)=>{const v=zv(t,u,h),x=zv(r,u,h),C=Math.abs(v.left-x.left),_=Math.abs(v.top-x.top);return gn(C,_)},mN=(t,r,a)=>{const l=t.fold((u,h)=>({position:E.some("absolute"),left:E.some(u+"px"),top:E.some(h+"px")}),(u,h)=>({position:E.some("absolute"),left:E.some(u-a.left+"px"),top:E.some(h-a.top+"px")}),(u,h)=>({position:E.some("fixed"),left:E.some(u+"px"),top:E.some(h+"px")}));return{right:E.none(),bottom:E.none(),...l}},PD=(t,r,a)=>t.fold((l,u)=>_x(l+r,u+a),(l,u)=>Hp(l+r,u+a),(l,u)=>O1(l+r,u+a)),J4=(t,r,a,l)=>{const u=(h,v)=>(x,C)=>{const _=h(r,a,l);return v(x.getOr(_.left),C.getOr(_.top))};return t.fold(u(uN,_x),u(zv,Hp),u(Q4,O1))},_x=HD.offset,Hp=HD.absolute,O1=HD.fixed,gN=(t,r)=>{const a=ut(t,r);return Mn(a)?NaN:parseInt(a,10)},EU=(t,r)=>{const a=t.element,l=gN(a,r.leftAttr),u=gN(a,r.topAttr);return isNaN(l)||isNaN(u)?E.none():E.some(gn(l,u))},OU=(t,r,a)=>{const l=t.element;W(l,r.leftAttr,a.left+"px"),W(l,r.topAttr,a.top+"px")},zD=(t,r)=>{const a=t.element;vo(a,r.leftAttr),vo(a,r.topAttr)},TU=(t,r,a,l)=>EU(t,r).fold(()=>a,u=>O1(u.left+l.left,u.top+l.top)),hN=(t,r,a,l,u,h)=>{const v=TU(t,r,a,l),x=r.mustSnap?FD(t,r,v,u,h):MU(t,r,v,u,h),C=Q4(v,u,h);return OU(t,r,C),x.fold(()=>({coord:O1(C.left,C.top),extra:E.none()}),_=>({coord:_.output,extra:_.extra}))},DU=(t,r)=>{zD(t,r)},pN=(t,r,a,l)=>hr(t,u=>{const h=u.sensor;return ID(r,h,u.range.left,u.range.top,a,l)?E.some({output:J4(u.output,r,a,l),extra:u.extra}):E.none()}),FD=(t,r,a,l,u)=>{const h=r.getSnapPoints(t);return pN(h,a,l,u).orThunk(()=>on(h,(v,x)=>{const C=x.sensor,_=_U(a,C,x.range.left,x.range.top,l,u);return v.deltas.fold(()=>({deltas:E.some(_),snap:E.some(x)}),M=>{const A=(_.left+_.top)/2,B=(M.left+M.top)/2;return A<=B?{deltas:E.some(_),snap:E.some(x)}:v})},{deltas:E.none(),snap:E.none()}).snap.map(v=>({output:J4(v.output,a,l,u),extra:v.extra})))},MU=(t,r,a,l,u)=>{const h=r.getSnapPoints(t);return pN(h,a,l,u)},fN=(t,r,a)=>({coord:J4(t.output,t.output,r,a),extra:t.extra});var AU=Object.freeze({__proto__:null,snapTo:(t,r,a,l)=>{const u=r.getTarget(t.element);if(r.repositionTarget){const h=pr(t.element),v=ca(h),x=hT(u),C=fN(l,v,x),_=mN(C.coord,v,x);Zs(u,_)}}});const VD="data-initial-z-index",ZD=t=>{ns(t.element).filter(zn).each(r=>{Tt(r,VD).fold(()=>xo(r,"z-index"),a=>ve(r,"z-index",a)),vo(r,VD)})},RU=t=>{ns(t.element).filter(zn).each(r=>{Wo(r,"z-index").each(a=>{W(r,VD,a)}),ve(r,"z-index",Sr(t.element,"z-index"))})},vN=(t,r)=>{t.getSystem().addToGui(r),RU(r)},BU=t=>{ZD(t),t.getSystem().removeFromGui(t)},bN=(t,r,a)=>t.getSystem().build(mu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:a}));var NU=Oa("snaps",[xe("getSnapPoints"),mo("onSensor"),xe("leftAttr"),xe("topAttr"),ge("lazyViewport",bs),ge("mustSnap",!1)]);const ek=[ge("useFixed",Ge),xe("blockerClass"),ge("getTarget",so),ge("onDrag",J),ge("repositionTarget",!0),ge("onDrop",J),ar("getBounds",bs),NU],LU=t=>Gl(Wo(t,"left"),Wo(t,"top"),Wo(t,"position"),(r,a,l)=>(l==="fixed"?O1:_x)(parseInt(r,10),parseInt(a,10))).getOrThunk(()=>{const r=Fr(t);return Hp(r.left,r.top)}),HU=(t,r,a,l,u)=>{const h=u.bounds,v=zv(r,a,l),x=Aa(v.left,h.x,h.x+h.width-u.width),C=Aa(v.top,h.y,h.y+h.height-u.height),_=Hp(x,C);return r.fold(()=>{const M=uN(_,a,l);return _x(M.left,M.top)},se(_),()=>{const M=Q4(_,a,l);return O1(M.left,M.top)})},IU=(t,r,a,l,u,h,v)=>{const x=r.fold(()=>{const C=PD(a,h.left,h.top),_=Q4(C,l,u);return O1(_.left,_.top)},C=>{const _=hN(t,C,a,h,l,u);return _.extra.each(M=>{C.onSensor(t,M)}),_.coord});return HU(t,x,l,u,v)},PU=(t,r,a,l)=>{const u=r.getTarget(t.element);if(r.repositionTarget){const h=pr(t.element),v=ca(h),x=hT(u),C=LU(u),_=IU(t,r.snaps,C,v,x,l,a),M=mN(_,v,x);Zs(u,M)}r.onDrag(t,u,l)},yN=(t,r)=>({bounds:t.getBounds(),height:ec(r.element),width:si(r.element)}),UD=(t,r,a,l,u)=>{const h=a.update(l,u),v=a.getStartData().getOrThunk(()=>yN(r,t));h.each(x=>{PU(t,r,v,x)})},xN=(t,r,a,l)=>{r.each(BU),a.snaps.each(h=>{DU(t,h)});const u=a.getTarget(t.element);l.reset(),a.onDrop(t,u)},WD=t=>(r,a)=>{const l=u=>{a.setStartData(yN(r,u))};return Jo([Re(Xc(),u=>{a.getStartData().each(()=>l(u))}),...t(r,a,l)])},CN=t=>Jo([Re(Wa(),t.forceDrop),Re(ob(),t.drop),Re(of(),(r,a)=>{t.move(a.event)}),Re(G1(),t.delayDrop)]);var zU=Object.freeze({__proto__:null,getData:t=>E.from(gn(t.x,t.y)),getDelta:(t,r)=>gn(r.left-t.left,r.top-t.top)});const $D=(t,r,a)=>[Re(Wa(),(l,u)=>{if(u.event.raw.button!==0)return;u.stop();const h=()=>xN(l,E.some(C),t,r),v=SR(h,200),x={drop:h,delayDrop:v.schedule,forceDrop:h,move:_=>{v.cancel(),UD(l,t,r,zU,_)}},C=bN(l,t.blockerClass,CN(x));a(l),vN(l,C)})],FU=[...ek,en("dragger",{handlers:WD($D)})],VU=t=>Jo([Re(Gc(),t.forceDrop),Re(qm(),t.drop),Re(Vx(),t.drop),Re(mh(),(r,a)=>{t.move(a.event)})]),ZU=t=>{const r=t[0];return E.some(gn(r.clientX,r.clientY))};var Ip=Object.freeze({__proto__:null,getData:t=>{const r=t.raw.touches;return r.length===1?ZU(r):E.none()},getDelta:(t,r)=>gn(r.left-t.left,r.top-t.top)});const jD=(t,r,a)=>{const l=un(),u=h=>{xN(h,l.get(),t,r),l.clear()};return[Re(Gc(),(h,v)=>{v.stop();const x=()=>u(h),C={drop:x,delayDrop:J,forceDrop:x,move:M=>{UD(h,t,r,Ip,M)}},_=bN(h,t.blockerClass,VU(C));l.set(_),a(h),vN(h,_)}),Re(mh(),(h,v)=>{v.stop(),UD(h,t,r,Ip,v.event)}),Re(qm(),(h,v)=>{v.stop(),u(h)}),Re(Vx(),u)]},UU=[...ek,en("dragger",{handlers:WD(jD)})],WU=(t,r,a)=>[...$D(t,r,a),...jD(t,r,a)],$U=[...ek,en("dragger",{handlers:WD(WU)})];var jU=Object.freeze({__proto__:null,mouse:FU,touch:UU,mouseOrTouch:$U}),wN=Object.freeze({__proto__:null,init:()=>{let t=E.none(),r=E.none();const a=()=>{t=E.none(),r=E.none()},l=(C,_)=>{const M=t.map(A=>C.getDelta(A,_));return t=E.some(_),M},u=(C,_)=>C.getData(_).bind(M=>l(C,M)),h=C=>{r=E.some(C)},v=()=>r,x=se({});return Da({readState:x,reset:a,update:u,getStartData:v,setStartData:h})}});const T1=Of({branchKey:"mode",branches:jU,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:E.from(t.extra)})},state:wN,apis:AU}),GD=40,tk=GD/2,SN=(t,r,a,l,u,h)=>t.fold(()=>T1.snap({sensor:Hp(a-tk,l-tk),range:gn(u,h),output:Hp(E.some(a),E.some(l)),extra:{td:r}}),v=>{const x=a-tk,C=l-tk,_=GD,M=GD,A=v.element.dom.getBoundingClientRect();return T1.snap({sensor:Hp(x,C),range:gn(_,M),output:Hp(E.some(a-A.width/2),E.some(l-A.height/2)),extra:{td:r}})}),kN=(t,r,a)=>{const l=(u,h)=>u.exists(v=>Vo(v,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,h)=>{const v=h.td;l(r.get(),v)||(r.set(v),a(v))},mustSnap:!0}},_N=t=>Io(Lr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:We([T1.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),L2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),GU=(t,r)=>{const a=Dt([]),l=Dt([]),u=Dt(!1),h=un(),v=un(),x=et=>{const ct=rs(et);return SN(F.getOpt(r),et,ct.x,ct.y,ct.width,ct.height)},C=()=>Ie(a.get(),et=>x(et)),_=et=>{const ct=rs(et);return SN(oe.getOpt(r),et,ct.right,ct.bottom,ct.width,ct.height)},M=()=>Ie(l.get(),et=>_(et)),A=kN(C,h,et=>{v.get().each(ct=>{t.dispatch("TableSelectorChange",{start:et,finish:ct})})}),B=kN(M,v,et=>{h.get().each(ct=>{t.dispatch("TableSelectorChange",{start:ct,finish:et})})}),F=_N(A),oe=_N(B),ce=Cs(F.asSpec()),De=Cs(oe.asSpec()),Q=(et,ct,eo,K)=>{const G=ct.dom.getBoundingClientRect();xo(et.element,"display");const he=Pc(Ke.fromDom(t.getBody())).dom.innerHeight,Ee=eo(G),dt=K(G,he);(Ee||dt)&&ve(et.element,"display","none")},ee=(et,ct,eo,K)=>{const G=eo(ct);T1.snapTo(et,G),Q(et,ct,he=>he[K]<0,(he,Ee)=>he[K]>Ee)},fe=et=>ee(ce,et,x,"top"),Ne=()=>h.get().each(fe),be=et=>ee(De,et,_,"bottom"),Fe=()=>v.get().each(be);Bs().deviceType.isTouch()&&(t.on("TableSelectionChange",et=>{u.get()||(sm(r,ce),sm(r,De),u.set(!0)),h.set(et.start),v.set(et.finish),et.otherCells.each(ct=>{a.set(ct.upOrLeftCells),l.set(ct.downOrRightCells),fe(et.start),be(et.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ne(),Fe()}),t.on("TableSelectionClear",()=>{u.get()&&(eu(ce),eu(De),u.set(!1)),h.clear(),v.clear()}))};var KU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const XU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",qU=(t,r,a)=>{var l;const u=(l=r.delimiter)!==null&&l!==void 0?l:"›",h=(_,M,A)=>Lr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":A,"aria-level":A+1}},components:[tr(_)],action:B=>{t.focus(),t.selection.select(M),t.nodeChanged()},buttonBehaviours:We([bd.button(a.isDisabled),Hr()])}),v=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[tr(` ${u} `)]}),x=_=>on(_,(M,A,B)=>{const F=h(A.name,A.element,B);return B===0?M.concat([F]):M.concat([v(),F])},[]),C=_=>{const M=[];let A=_.length;for(;A-- >0;){const B=_[A];if(B.nodeType===1&&!XU(B)){const F=ZA(t,B);if(F.isDefaultPrevented()||M.push({name:F.name,element:B}),F.isPropagationStopped())break}}return M};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:We([_t.config({mode:"flow",selector:"div[role=button]"}),wt.config({disabled:a.isDisabled}),Hr(),Pn.config({}),Zt.config({}),Yt("elementPathEvents",[wn((_,M)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>_t.focusIn(_)),t.on("NodeChange",A=>{const B=C(A.parents),F=B.length>0?x(B):[];Zt.set(_,F)})})])]),components:[]}};var Wg;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Wg||(Wg={}));const EN=(t,r,a,l,u)=>{const h={height:j4(l+r.top,Kw(t),l2(t))};return a===Wg.Both&&(h.width=j4(u+r.left,Gw(t),Xw(t))),h},ON=(t,r,a)=>{const l=Ke.fromDom(t.getContainer()),u=EN(t,r,a,Cn(l),Un(l));Xn(u,(h,v)=>{Os(h)&&ve(l,v,hD(h))}),wI(t)},Ex=t=>{const r=zM(t);return r===!1?Wg.None:r==="both"?Wg.Both:Wg.Vertical},ok=(t,r,a,l)=>{const u=gn(a*20,l*20);return ON(t,u,r),E.some(!0)},YU=(t,r)=>{const a=Ex(t);if(a===Wg.None)return E.none();const l=a===Wg.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return E.some(fd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize"),"aria-label":r.translate(l)},behaviours:[T1.config({mode:"mouse",repositionTarget:!1,onDrag:(u,h,v)=>ON(t,v,a),blockerClass:"tox-blocker"}),_t.config({mode:"special",onLeft:()=>ok(t,a,-1,0),onRight:()=>ok(t,a,1,0),onUp:()=>ok(t,a,0,-1),onDown:()=>ok(t,a,0,1)}),Pn.config({}),Lt.config({})]},r.icons))},KD=(t,r)=>{const a=(l,u,h)=>Zt.set(l,[tr(r.translate(["{0} "+h,u[h]]))]);return Lr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:We([bd.button(r.isDisabled),Hr(),Pn.config({}),Zt.config({}),nt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Yt("wordcount-events",[gi(l=>{const u=nt.getValue(l),h=u.mode==="words"?"characters":"words";nt.setValue(l,{mode:h,count:u.count}),a(l,u.count,h)}),wn(l=>{t.on("wordCountUpdate",u=>{const{mode:h}=nt.getValue(l);nt.setValue(l,{mode:h,count:u.wordCount}),a(l,u.wordCount,h)})})])]),eventOrder:{[ma()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},QU=(t,r)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":ol.translate(["Powered by {0}","Tiny"])},innerHtml:KU.trim()},behaviours:We([Lt.config({})])}]}),l=()=>{const v=RA("Alt+0"),x="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[tr(ol.translate([x,v]))]}},u=()=>{const v=[];return t.hasPlugin("wordcount")&&v.push(KD(t,r)),H_(t)&&v.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:v}},h=()=>{const v=[],x=z_(t),C=L_(t),_=H_(t)||t.hasPlugin("wordcount"),M=()=>{const A="tox-statusbar__text-container--flex-start",B="tox-statusbar__text-container--flex-end",F="tox-statusbar__text-container--space-around";if(x){const oe="tox-statusbar__text-container-3-cols";return!_&&!C?[oe,F]:_&&!C?[oe,B]:[oe,A]}return[_&&!C?B:A]};return C&&v.push(qU(t,{},r)),x&&v.push(l()),_&&v.push(u()),v.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...M()]},components:v}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const v=h(),x=YU(t,r);return v.concat(x.toArray())})()}},TN=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),JU=(t,r)=>{const a=t.inline,l=a?BZ:OZ,u=m2(t)?f8:M9,h=H7(),v=un(),x=un(),C=un(),_=Bs().deviceType.isTouch()?["tox-platform-touch"]:[],M=V_(t),A=r1(t),B=Io({dom:{tag:"div",classes:["tox-anchorbar"]}}),F=Io({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),oe=()=>h.mainUi.get().map(Je=>Je.outerContainer).bind(cn.getHeader),ce=()=>Wt.fromOption(h.dialogUi.get().map(Je=>Je.sink),"UI has not been rendered"),De=()=>Wt.fromOption(h.popupUi.get().map(Je=>Je.sink),"(popup) UI has not been rendered"),Q=h.lazyGetInOuterOrDie("anchor bar",B.getOpt),ee=h.lazyGetInOuterOrDie("bottom anchor bar",F.getOpt),fe=h.lazyGetInOuterOrDie("toolbar",cn.getToolbar),Ne=h.lazyGetInOuterOrDie("throbber",cn.getThrobber),be=S9({popup:De,dialog:ce},t,Q,ee),Fe=()=>{const Je={attributes:{[Gb]:M?Xd.BottomToTop:Xd.TopToBottom}},xt=cn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:be.popup,onEscape:()=>{t.focus()}}),no=cn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:be.popup.shared.getSink,providers:be.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:zp=>{kI(t,zp)},type:A,lazyToolbar:fe,lazyHeader:()=>oe().getOrDie("Could not find header element"),...Je}),Do=cn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:be.popup.shared.providers,onEscape:()=>{t.focus()},type:A}),ko=s1(t),fn=nS(t),vn=c2(t),Ac=P_(t),Kn=et(),Rc=ko||fn||vn,yu=()=>ko?[Do]:fn?[no]:[],$l=Ac?[Kn,xt]:[xt];return cn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Rc?[]:["tox-editor-header--empty"]),...Je},components:Bt([vn?$l:[],yu(),cv(t)?[]:[B.asSpec()]]),sticky:m2(t),editor:t,sharedBackstage:be.popup.shared})},et=()=>cn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),ct=()=>{const Je=cn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),xt=cn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Je,xt]}},eo=()=>{const Je=Z_(t),xt=Vo(fr(),Je)&&Sr(Je,"display")==="grid",no={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(_),attributes:{...ol.isRtl()?{dir:"rtl"}:{}}},behaviours:We([Is.config({useFixed:()=>u.isDocked(oe)})])},Do={dom:{styles:{width:document.body.clientWidth+"px"}},events:Jo([Re(tg(),vn=>{ve(vn.element,"width",document.body.clientWidth+"px")})])},ko=Cs(ao(no,xt?Do:{})),fn=KE(ko);return x.set(fn),{sink:ko,mothership:fn}},K=()=>{const Je={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(_),attributes:{...ol.isRtl()?{dir:"rtl"}:{}}},behaviours:We([Is.config({useFixed:()=>u.isDocked(oe),getBounds:()=>r.getPopupSinkBounds()})])},xt=Cs(Je),no=KE(xt);return C.set(no),{sink:xt,mothership:no}},G=()=>{const Je=Fe(),xt=ct(),no=cn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:be.popup}),Do=cn.parts.viewWrapper({backstage:be.popup}),ko=eS(t)&&!a?E.some(QU(t,be.popup.shared.providers)):E.none(),fn=Bt([M?[]:[Je],a?[]:[xt],M?[Je]:[]]),vn=cn.parts.editorContainer({components:Bt([fn,a?[]:[F.asSpec(),...ko.toArray()]])}),Ac=u2(t),Kn={role:"application",...ol.isRtl()?{dir:"rtl"}:{},...Ac?{"aria-hidden":"true"}:{}},Rc=Cs(cn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(M?["tox-tinymce--toolbar-bottom"]:[]).concat(_),styles:{visibility:"hidden",...Ac?{opacity:"0",border:"0"}:{}},attributes:Kn},components:[vn,...a?[]:[Do],no],behaviours:We([Hr(),wt.config({disableClass:"tox-tinymce--disabled"}),_t.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),yu=KE(Rc);return v.set(yu),{mothership:yu,outerContainer:Rc}},he=Je=>{const xt=hD(TZ(t)),no=hD(DZ(t));return t.inline||(Mm("div","width",no)&&ve(Je.element,"width",no),Mm("div","height",xt)?ve(Je.element,"height",xt):ve(Je.element,"height","400px")),xt},Ee=Je=>{t.addShortcut("alt+F9","focus menubar",()=>{cn.focusMenubar(Je)}),t.addShortcut("alt+F10","focus toolbar",()=>{cn.focusToolbar(Je)}),t.addCommand("ToggleToolbarDrawer",(xt,no)=>{no!=null&&no.skipFocus?cn.toggleToolbarDrawerWithoutFocusing(Je):cn.toggleToolbarDrawer(Je)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>cn.isToolbarDrawerToggled(Je))},dt=Je=>{const{mainUi:xt,popupUi:no,uiMotherships:Do}=Je;Yo(qw(t),(Ax,jg)=>{t.ui.registry.addGroupToolbarButton(jg,Ax)});const{buttons:ko,menuItems:fn,contextToolbars:vn,sidebars:Ac,views:Kn}=t.ui.registry.getAll(),Rc=d2(t),yu={menuItems:fn,menus:ZM(t),menubar:BM(t),toolbar:Rc.getOrThunk(()=>Qw(t)),allowToolbarGroups:A===Pl.floating,buttons:ko,sidebar:Ac,views:Kn};Ee(xt.outerContainer),k9(t,xt.mothership,Do),u.setup(t,be.popup.shared,oe),mU(t,be.popup),kU(t,be.popup.shared.getSink,be.popup),eV(t),RT(t,Ne,be.popup.shared),QZ(t,vn,no.sink,{backstage:be.popup}),GU(t,no.sink);const $l=t.getElement(),zp=he(xt.outerContainer),Mx={targetNode:$l,height:zp};return l.render(t,Je,yu,be.popup,Mx)},_e=Je=>(C.set(Je.mothership),Je),Ue=()=>{const Je=G(),xt=eo(),no=vp(t)?K():_e(xt);h.dialogUi.set(xt),h.popupUi.set(no),h.mainUi.set(Je);const Do={popupUi:no,dialogUi:xt,mainUi:Je,uiMotherships:h.getUiMotherships()};return dt(Do)};return{popups:{backstage:be.popup,getMothership:()=>TN("popups",C)},dialogs:{backstage:be.dialog,getMothership:()=>TN("dialogs",x)},renderUI:Ue}},eW=(t,r)=>{const a=Tt(t,"id").fold(()=>{const l=gt("dialog-label");return W(r,"id",l),l},so);W(t,"aria-labelledby",a)},tW=se([xe("lazySink"),_o("dragBlockClass"),ar("getBounds",bs),ge("useTabstopAt",Be),ge("firstTabstop",0),ge("eventOrder",{}),In("modalBehaviours",[_t]),Ma("onExecute"),od("onEscape")]),XD={sketch:so},oW=se([Qi({name:"draghandle",overrides:(t,r)=>({behaviours:We([T1.config({mode:"mouse",getTarget:a=>pi(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Kr({schema:[xe("dom")],name:"title"}),Kr({factory:XD,schema:[xe("dom")],name:"close"}),Kr({factory:XD,schema:[xe("dom")],name:"body"}),Qi({factory:XD,schema:[xe("dom")],name:"footer"}),Yi({factory:{sketch:(t,r)=>({...t,dom:r.dom,components:r.components})},schema:[ge("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ge("components",[])],name:"blocker"})]),nW=(t,r,a,l)=>{const u=un(),h=F=>{u.set(F);const oe=t.lazySink(F).getOrDie(),ce=l.blocker(),De=oe.getSystem().build({...ce,components:ce.components.concat([ji(F)]),behaviours:We([Lt.config({}),Yt("dialog-blocker-events",[$u(as(),()=>{_d.isBlocked(F)?J():_t.focusIn(F)})])])});sm(oe,De),_t.focusIn(F)},v=F=>{u.clear(),ns(F.element).each(oe=>{F.getSystem().getByDom(oe).each(ce=>{eu(ce)})})},x=F=>lm(F,t,"body"),C=F=>Lo(F,t,"footer"),_=(F,oe)=>{_d.block(F,oe)},M=F=>{_d.unblock(F)},A=gt("modal-events"),B={...t.eventOrder,[dc()]:[A].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:r,apis:{show:h,hide:v,getBody:x,getFooter:C,setIdle:M,setBusy:_},eventOrder:B,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Rr(t.modalBehaviours,[Zt.config({}),_t.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),_d.config({getRoot:u.get}),Yt(A,[wn(F=>{eW(F.element,lm(F,t,"title").element)})])])}},Yr=Js({name:"ModalDialog",configFields:tW(),partFields:oW(),factory:nW,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,a)=>{t.setBusy(r,a)},setIdle:(t,r)=>{t.setIdle(r)}}}),rW=it([ur,rE].concat(gm)),sW=Pd,qD=[uS("button"),zl,_l("align","end",["start","end"]),dS,vd,eb("buttonType",["primary","secondary"])],DN=[...qD,Ag],YD=[zd("type",["submit","cancel","custom"]),...DN],aW=[zd("type",["menu"]),yp,cS,zl,li("items",rW),...qD],iW=[...qD,zd("type",["togglebutton"]),dn("tooltip"),zl,yp,Wr("active",!1)],lW=yr("type",{submit:YD,cancel:YD,custom:YD,menu:aW,togglebutton:iW}),nk=[ur,Ag,zd("level",["info","warn","error","success"]),nA,ge("url","")],cW=it(nk),dW=t=>[ur,t],uW=[ur,Ag,vd,uS("button"),zl,iA,eb("buttonType",["primary","secondary","toolbar"]),dS],mW=it(uW),Fv=[ur,rE],vu=Fv.concat([aE]),MN=Fv.concat([sE,vd]),gW=it(MN),hW=Pd,pW=vu.concat([iE("auto")]),fW=it(pW),vW=ic([hv,Ag,nA]),QD=vu.concat([Ta("storageKey","default")]),AN=it(QD),bW=ss,yW=it(vu),xW=ss,CW=Fv.concat([Ta("tag","textarea"),dn("scriptId"),dn("scriptUrl"),sh("settings",void 0)]),wW=Fv.concat([Ta("tag","textarea"),kl("init")]),SW=_a(t=>Ae("customeditor.old",bt(wW),t).orThunk(()=>Ae("customeditor.new",bt(CW),t))),kW=ss,_W=it(vu),EW=Ix(),OW=t=>[ur,hk("columns"),t],TW=[ur,dn("html"),_l("presets","presentation",["presentation","document"])],DW=it(TW),MW=vu.concat([Wr("border",!1),Wr("sandboxed",!0),Wr("streamContent",!1),Wr("transparent",!0)]),AW=it(MW),RW=ss,BW=it(Fv.concat([ys("height")])),NW=it([dn("url"),Pu("zoom"),Pu("cachedWidth"),Pu("cachedHeight")]),RN=vu.concat([ys("inputMode"),ys("placeholder"),Wr("maximized",!1),vd]),LW=it(RN),HW=ss,IW=t=>[ur,sE,t,_l("align","start",["start","center","end"])],PW=[Ag,hv],zW=[Ag,li("items",W1("items",()=>BN))],BN=rn([it(PW),it(zW)]),FW=vu.concat([li("items",BN),vd]),VW=it(FW),NN=ss,LN=vu.concat([$1("items",[Ag,hv]),rh("size",1),vd]),D1=it(LN),ZW=ss,JD=vu.concat([Wr("constrain",!0),vd]),rk=it(JD),HN=it([dn("width"),dn("height")]),UW=Fv.concat([sE,rh("min",0),rh("max",0)]),WW=it(UW),$W=Sl,jW=[ur,li("header",ss),li("cells",$n(ss))],M1=it(jW),IN=vu.concat([ys("placeholder"),Wr("maximized",!1),vd]),GW=it(IN),KW=ss,PN=[zd("type",["directory","leaf"]),oA,dn("id"),Vi("menu",v8)],zN=it(PN),XW=PN.concat([li("children",W1("children",()=>Fi("type",{directory:FN,leaf:zN})))]),FN=it(XW),qW=Fi("type",{directory:FN,leaf:zN}),YW=[ur,li("items",qW),Km("onLeafAction"),Km("onToggleExpand"),cc("defaultExpandedIds",[],ss),ys("defaultSelectedId")],e5=it(YW),Ox=vu.concat([_l("filetype","file",["image","media","file"]),vd,ys("picker_text")]),t5=it(Ox),sk=it([hv,y2]),$g=t=>Co("items","items",Ii(),$n(_a(r=>Ae(`Checking item of ${t}`,Vv,r).fold(a=>Wt.error(ii(a)),a=>Wt.value(a))))),Vv=zt(()=>Fi("type",{alertbanner:cW,bar:it(dW($g("bar"))),button:mW,checkbox:gW,colorinput:AN,colorpicker:yW,dropzone:_W,grid:it(OW($g("grid"))),iframe:AW,input:LW,listbox:VW,selectbox:D1,sizeinput:rk,slider:WW,textarea:GW,urlinput:t5,customeditor:SW,htmlpanel:DW,imagepreview:BW,collection:fW,label:it(IW($g("label"))),table:M1,tree:e5,panel:o5})),QW=[ur,ge("classes",[]),li("items",Vv)],o5=it(QW),VN=[uS("tab"),oA,li("items",Vv)],ZN=[ur,$1("tabs",VN)],JW=it(ZN),e$=DN,t$=lW,UN=it([dn("title"),$s("body",Fi("type",{panel:o5,tabpanel:JW})),Ta("size","normal"),cc("buttons",[],t$),ge("initialData",{}),ar("onAction",J),ar("onChange",J),ar("onSubmit",J),ar("onClose",J),ar("onCancel",J),ar("onTabChange",J)]),WN=t=>Ae("dialog",UN,t),n5=it([zd("type",["cancel","custom"]),...e$]),o$=it([dn("title"),dn("url"),Pu("height"),Pu("width"),Px("buttons",n5),ar("onAction",J),ar("onCancel",J),ar("onClose",J),ar("onMessage",J)]),n$=t=>Ae("dialog",o$,t),r5=t=>Jt(t)?[t].concat(me(hl(t),r5)):Ut(t)?me(t,r5):[],$N=t=>Pt(t.type)&&Pt(t.name),r$={checkbox:hW,colorinput:bW,colorpicker:xW,dropzone:EW,input:HW,iframe:RW,imagepreview:NW,selectbox:ZW,sizeinput:HN,slider:$W,listbox:NN,size:HN,textarea:KW,urlinput:sk,customeditor:kW,collection:vW,togglemenuitem:sW},s$=t=>E.from(r$[t.type]),a$=t=>qo(r5(t),$N),s5=t=>{const r=a$(t),a=me(r,l=>s$(l).fold(()=>[],u=>[$s(l.name,u)]));return it(a)},ak=t=>{var r;const a=lc(WN(t)),l=s5(t),u=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:a,dataValidator:l,initialData:u}},A1={open:(t,r)=>{const a=ak(r);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,r)=>{const a=lc(n$(r));return t(a)},redial:t=>ak(t)};var jN=Object.freeze({__proto__:null,events:(t,r)=>{const a=(l,u)=>{t.updateState.each(h=>{const v=h(l,u);r.set(v)}),t.renderComponents.each(h=>{const v=h(u,r.get());(t.reuseDom?H5:l_)(l,v)})};return Jo([Re(Zu(),(l,u)=>{const h=u;if(!h.universal){const v=t.channel;zo(h.channels,v)&&a(l,h.data)}}),wn((l,u)=>{t.initialData.each(h=>{a(l,h)})})])}}),i$=Object.freeze({__proto__:null,getState:(t,r,a)=>a}),l$=[xe("channel"),_o("renderComponents"),_o("updateState"),_o("initialData"),Wr("reuseDom",!0)],GN=Object.freeze({__proto__:null,init:()=>{const t=Dt(E.none()),r=()=>t.set(E.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const il=Gr({fields:l$,name:"reflecting",active:jN,apis:i$,state:GN}),KN=t=>{const r=[],a={};return Xn(t,(l,u)=>{l.fold(()=>{r.push(u)},h=>{a[u]=h})}),r.length>0?Wt.error(r):Wt.value(a)},R1=(t,r,a)=>{const l=Io(Tv.sketch(u=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ie(t.items,h=>Ft(u,h,r,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:We([_t.config({mode:"acyclic",useTabstopAt:Oe(G2)}),Oc.memento(l),Fz(l,{postprocess:u=>KN(u).fold(h=>(console.error(h),{}),so)}),Yt("dialog-body-panel",[Re(as(),(u,h)=>{u.getSystem().broadcastOn([K2],{newFocus:E.some(h.event.target)})})])])}},XN=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:sv(t.action),behaviours:Rr(t.tabButtonBehaviours,[Lt.config({}),_t.config({mode:"execution",useSpace:!0,useEnter:!0}),nt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),c$=vi({name:"TabButton",configFields:[ge("uid",void 0),xe("value"),Co("dom","dom",qt(()=>({attributes:{role:"tab",id:gt("aria"),"aria-selected":"false"}})),ua()),_o("action"),ge("domModification",{}),In("tabButtonBehaviours",[Lt,_t,nt]),xe("view")],factory:XN}),ik=se([xe("tabs"),xe("dom"),ge("clickToDismiss",!1),In("tabbarBehaviours",[wo,_t]),jd(["tabClass","selectedClass"])]),Zv=$0({factory:c$,name:"tabs",unit:"tab",overrides:t=>{const r=(l,u)=>{wo.dehighlight(l,u),St(l,jx(),{tabbar:l,button:u})},a=(l,u)=>{wo.highlight(l,u),St(l,$x(),{tabbar:l,button:u})};return{action:l=>{const u=l.getSystem().getByUid(t.uid).getOrDie(),h=wo.isHighlighted(u,l);(()=>h&&t.clickToDismiss?r:h?J:a)()(u,l)},domModification:{classes:[t.markers.tabClass]}}}}),lk=se([Zv]),qN=(t,r,a,l)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Rr(t.tabbarBehaviours,[wo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,h)=>{W(h.element,"aria-selected","true")},onDehighlight:(u,h)=>{W(h.element,"aria-selected","false")}}),_t.config({mode:"flow",getInitial:u=>wo.getHighlighted(u).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Tx=Js({name:"Tabbar",configFields:ik(),partFields:lk(),factory:qN}),yi=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:Rr(t.tabviewBehaviours,[Zt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),ck=vi({name:"Tabview",configFields:[In("tabviewBehaviours",[Zt])],factory:yi}),YN=se([ge("selectFirst",!0),mo("onChangeTab"),mo("onDismissTab"),ge("tabs",[]),In("tabSectionBehaviours",[])]),QN=Kr({factory:Tx,schema:[xe("dom"),jn("markers",[xe("tabClass"),xe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),d$=Kr({factory:ck,name:"tabview"}),u$=se([QN,d$]),Pp=(t,r,a,l)=>{const u=v=>{const x=nt.getValue(v);Lo(v,t,"tabview").each(C=>{It(t.tabs,_=>_.value===x).each(_=>{const M=_.view();Tt(v.element,"id").each(A=>{W(C.element,"aria-labelledby",A)}),Zt.set(C,M),t.onChangeTab(C,v,M)})})},h=(v,x)=>{Lo(v,t,"tabbar").each(C=>{x(C).each(Yc)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:xg(t.tabSectionBehaviours),events:Jo(Bt([t.selectFirst?[wn((v,x)=>{h(v,wo.getFirst)})]:[],[Re($x(),(v,x)=>{const C=x.event.button;u(C)}),Re(jx(),(v,x)=>{const C=x.event.button;t.onDismissTab(v,C)})]])),apis:{getViewItems:v=>Lo(v,t,"tabview").map(x=>Zt.contents(x)).getOr([]),showTab:(v,x)=>{h(v,C=>{const _=wo.getCandidates(C);return It(_,M=>nt.getValue(M)===x).filter(M=>!wo.isHighlighted(C,M))})}}}},Uv=Js({name:"TabSection",configFields:YN(),partFields:u$(),factory:Pp,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,a)=>{t.showTab(r,a)}}}),JN=(t,r,a)=>Ie(t,(l,u)=>{Zt.set(a,t[u].view());const h=r.dom.getBoundingClientRect();return Zt.set(a,[]),h.height}),Wv=t=>Ts(xu(t,(r,a)=>r>a?-1:r<a?1:0)),dk=(t,r,a)=>{const l=Fn(t).dom,u=pi(t,".tox-dialog-wrap").getOr(t),h=Sr(u,"position")==="fixed";let v;h?v=Math.max(l.clientHeight,window.innerHeight):v=Math.max(l.offsetHeight,l.scrollHeight);const x=Cn(r),C=r.dom.offsetLeft>=a.dom.offsetLeft+Un(a)?Math.max(Cn(a),x):x,_=parseInt(Sr(t,"margin-top"),10)||0,M=parseInt(Sr(t,"margin-bottom"),10)||0,A=Cn(t)+_+M-C;return v-A},eL=(t,r)=>{Ts(t).each(a=>Uv.showTab(r,a.value))},tL=(t,r)=>{ve(t,"height",r+"px"),ve(t,"flex-basis",r+"px")},uk=(t,r,a)=>{pi(t,'[role="dialog"]').each(l=>{hn(l,'[role="tablist"]').each(u=>{a.get().map(h=>(ve(r,"height","0"),ve(r,"flex-basis","0"),Math.min(h,dk(l,r,u)))).each(h=>{tL(r,h)})})})},a5=t=>hn(t,'[role="tabpanel"]'),m$=t=>{const r=un();return{extraEvents:[wn(a=>{const l=a.element;a5(l).each(u=>{ve(u,"visibility","hidden"),a.getSystem().getByDom(u).toOptional().each(h=>{const v=JN(t,u,h);Wv(v).fold(r.clear,r.set)}),uk(l,u,r),xo(u,"visibility"),eL(t,a),requestAnimationFrame(()=>{uk(l,u,r)})})}),Re(tg(),a=>{const l=a.element;a5(l).each(u=>{uk(l,u,r)})}),Re(HR,(a,l)=>{const u=a.element;a5(u).each(h=>{const v=rd(zr(h));ve(h,"visibility","hidden");const x=Wo(h,"height").map(_=>parseInt(_,10));xo(h,"height"),xo(h,"flex-basis");const C=h.dom.getBoundingClientRect().height;x.forall(_=>C>_)?(r.set(C),uk(u,h,r)):x.each(_=>{tL(h,_)}),xo(h,"visibility"),v.each(tt)})})],selectFirst:!1}},B1="send-data-to-section",oL="send-data-to-view",g$=(t,r,a)=>{const l=Dt({}),u=_=>{const M=nt.getValue(_),A=KN(M).getOr({}),B=l.get(),F=ao(B,A);l.set(F)},h=_=>{const M=l.get();nt.setValue(_,M)},v=Dt(null),x=Ie(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[tr(a.shared.providers.translate(_.title))],view:()=>[Tv.sketch(M=>({dom:{tag:"div",classes:["tox-form"]},components:Ie(_.items,A=>Ft(M,A,r,a)),formBehaviours:We([_t.config({mode:"acyclic",useTabstopAt:Oe(G2)}),Yt("TabView.form.events",[wn(h),mi(u)]),ja.config({channels:Xm([{key:B1,value:{onReceive:u}},{key:oL,value:{onReceive:h}}])})])}))]})),C=m$(x);return Uv.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,M,A)=>{const B=nt.getValue(M);St(_,LR,{name:B,oldName:v.get()}),v.set(B)},tabs:x,components:[Uv.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Tx.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:We([Pn.config({})])}),Uv.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:We([Yt("tabpanel",C.extraEvents),_t.config({mode:"acyclic"}),go.config({find:_=>Ts(Uv.getViewItems(_))}),v1(E.none(),_=>(_.getSystem().broadcastOn([B1],{}),l.get()),(_,M)=>{l.set(M),_.getSystem().broadcastOn([oL],{})})])})},nL=(t,r,a,l,u)=>{const h=C=>{const _=C.body;switch(_.type){case"tabpanel":return[g$(_,C.initialData,l)];default:return[R1(_,C.initialData,l)]}},v=(C,_)=>E.some({isTabPanel:()=>_.body.type==="tabpanel"}),x={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?x:{}}},components:[],behaviours:We([Oc.childAt(0),il.config({channel:`${E6}-${r}`,updateState:v,renderComponents:h,initialData:t})])}},h$=(t,r,a,l,u)=>nL(t,r,E.some(a),l,u),Dx=(t,r,a)=>{const l=nL(t,r,E.none(),a,!1);return Yr.parts.body(l)},p$=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[j2(E.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:We([Pn.config({}),Lt.config({})])})]}],behaviours:We([_t.config({mode:"acyclic",useTabstopAt:Oe(G2)})])};return Yr.parts.body(r)},f$=lv.deviceType.isTouch(),i5=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),rL=(t,r)=>Yr.parts.close(Lr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:We([Pn.config({})])})),e=()=>Yr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),o=(t,r)=>Yr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:dm(`<p>${Ww(r.translate(t))}</p>`)}]}]}),n=t=>Yr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),s=(t,r)=>[mu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),mu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],i=t=>{const r="tox-dialog",a=r+"-wrap",l=a+"__backdrop",u=r+"__disable-scroll";return Yr.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),E.some(!0)),useTabstopAt:h=>!G2(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:dm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:f$?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:We([Lt.config({}),Yt("dialog-events",t.dialogEvents.concat([$u(as(),(h,v)=>{_d.isBlocked(h)?J():_t.focusIn(h)}),Re(af(),(h,v)=>{h.getSystem().broadcastOn([K2],{newFocus:v.event.newFocus})})])),Yt("scroll-lock",[wn(()=>{Kt(fr(),u)}),mi(()=>{Tn(fr(),u)})]),...t.extraBehaviours]),eventOrder:{[ma()]:["dialog-events"],[dc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[qc()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},d=t=>Lr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:We([Pn.config({})]),components:[fd("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{Eo(r,kp)}}),g=(t,r,a,l)=>{const u=h=>[tr(l.translate(h.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:We([il.config({channel:`${_6}-${r}`,initialData:t,renderComponents:u})])}},f=()=>({dom:dm('<div class="tox-dialog__draghandle"></div>')}),y=(t,r,a,l)=>mu.sketch({dom:dm('<div class="tox-dialog__header"></div>'),components:[g(t,r,E.some(a),l),f(),d(l)],containerBehaviours:We([T1.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Ml(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),k=(t,r,a)=>{const l=Yr.parts.title(g(t,r,E.none(),a)),u=Yr.parts.draghandle(f()),h=Yr.parts.close(d(a)),v=[l].concat(t.draggable?[u]:[]).concat([h]);return mu.sketch({dom:dm('<div class="tox-dialog__header"></div>'),components:v})},D=(t,r,a)=>k({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},r,a.shared.providers),L=(t,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:dm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),P=(t,r,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const u=hn(t().element,".tox-dialog__header").map(h=>Cn(h));Yr.setBusy(t(),(h,v)=>L(l.message,v,r,u))},onUnblock:()=>{Yr.setIdle(t())}}),j="tox-dialog--fullscreen",$="tox-dialog--width-lg",Z="tox-dialog--width-md",U=t=>{switch(t){case"large":return E.some($);case"medium":return E.some(Z);default:return E.none()}},re=(t,r)=>{const a=Ke.fromDom(r.element.dom);ls(a,j)||(xs(a,[$,Z]),U(t).each(l=>Kt(a,l)))},ie=(t,r)=>{const a=Ke.fromDom(t.element.dom),l=ed(a),u=It(l,h=>h===$||h===Z).or(U(r));Tr(a,[j,...u.toArray()])},pe=(t,r,a)=>Cs(i({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[KS({}),...t.extraBehaviours],onEscape:l=>{Eo(l,kp)},dialogEvents:r,eventOrder:{[Zu()]:[il.name(),ja.name()],[dc()]:["scroll-lock",il.name(),"messages","dialog-events","alloy.base.behaviour"],[qc()]:["alloy.base.behaviour","dialog-events","messages",il.name(),"scroll-lock"]}})),Se=(t,r={})=>{const a=l=>{const u=Ie(l.items,h=>{const v=ot(r,h.name).getOr(Dt(!1));return{...h,storage:v}});return{...l,items:u}};return Ie(t,l=>l.type==="menu"?a(l):l)},je=t=>on(t,(r,a)=>a.type==="menu"?on(a.items,(l,u)=>(l[u.name]=u.storage,l),r):r,{}),Ye=(t,r)=>[lb(as(),jz),t(B2,(a,l,u,h)=>{rd(zr(h.element)).fold(J,Tf),r.onClose(),l.onClose()}),t(kp,(a,l,u,h)=>{l.onCancel(a),Eo(h,B2)}),Re(qE,(a,l)=>r.onUnblock()),Re(XE,(a,l)=>r.onBlock(l.event))],Ve=(t,r)=>{const a=(u,h)=>Re(u,(v,x)=>{l(v,(C,_)=>{h(t(),C,x.event,v)})}),l=(u,h)=>{il.getState(u).get().each(v=>{h(v,u)})};return[...Ye(a,r),a(gu,(u,h,v)=>{h.onAction(u,{name:v.name})})]},Me=(t,r,a)=>{const l=(h,v)=>Re(h,(x,C)=>{u(x,(_,M)=>{v(t(),_,C.event,x)})}),u=(h,v)=>{il.getState(h).get().each(x=>{v(x.internalDialog,h)})};return[...Ye(l,r),l(N2,(h,v)=>v.onSubmit(h)),l(sl,(h,v,x)=>{v.onChange(h,{name:x.name})}),l(gu,(h,v,x,C)=>{const _=()=>C.getSystem().isConnected()?_t.focusIn(C):void 0,M=F=>Zn(F,"disabled")||Tt(F,"aria-disabled").exists(oe=>oe==="true"),A=zr(C.element),B=rd(A);v.onAction(h,{name:x.name,value:x.value}),rd(A).fold(_,F=>{M(F)||B.exists(oe=>Di(F,oe)&&M(oe))?_():a().toOptional().filter(oe=>!Di(oe.element,F)).each(_)})}),l(LR,(h,v,x)=>{v.onTabChange(h,{newTabName:x.name,oldTabName:x.oldName})}),mi(h=>{const v=t();nt.setValue(h,v.getData())})]},we=(t,r)=>tx(t,t.type,r),ze=(t,r,a)=>It(r,l=>l.name===a).bind(l=>l.memento.getOpt(t)),lt=(t,r)=>{const a=r.map(x=>x.footerButtons).getOr([]),l=hs(a,x=>x.align==="start"),u=(x,C)=>mu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${x}`]},components:Ie(C,_=>_.memento.asSpec())}),h=u("start",l.pass),v=u("end",l.fail);return[h,v]},ye=(t,r,a)=>{const l=(u,h)=>{const v=Ie(h.buttons,C=>{const _=Io(we(C,a));return{name:C.name,align:C.align,memento:_}}),x=C=>ze(u,v,C);return E.some({lookupByName:x,footerButtons:v})};return{dom:dm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:We([il.config({channel:`${O6}-${r}`,initialData:t,updateState:l,renderComponents:lt})])}},rt=(t,r,a)=>ye(t,r,a),vt=(t,r,a)=>Yr.parts.footer(ye(t,r,a)),to=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const a=go.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Tv.getField(a,r).orThunk(()=>t.getFooter().bind(l=>il.getState(l).get()).bind(l=>l.lookupByName(r)))}else return E.none()},So=(t,r)=>{const a=t.getRoot();return il.getState(a).get().map(l=>lc(Ae("data",l.dataValidator,r))).getOr(r)},zs=(t,r,a)=>{const l=h=>{const v=t.getRoot();v.getSystem().isConnected()&&h(v)},u={getData:()=>{const h=t.getRoot(),v=h.getSystem().isConnected()?t.getFormWrapper():h,x=nt.getValue(v),C=Yo(a,_=>_.get());return{...x,...C}},setData:h=>{l(v=>{const x=u.getData(),C=ao(x,h),_=So(t,C),M=t.getFormWrapper();nt.setValue(M,_),Xn(a,(A,B)=>{bo(C,B)&&A.set(C[B])})})},setEnabled:(h,v)=>{to(t,h).each(v?wt.enable:wt.disable)},focus:h=>{to(t,h).each(Lt.focus)},block:h=>{if(!Pt(h))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(v=>{St(v,XE,{message:h})})},unblock:()=>{l(h=>{Eo(h,qE)})},showTab:h=>{l(v=>{const x=t.getBody();il.getState(x).get().exists(C=>C.isTabPanel())&&go.getCurrent(x).each(C=>{Uv.showTab(C,h)})})},redial:h=>{l(v=>{const x=t.getId(),C=r(h),_=Se(C.internalDialog.buttons,a);v.getSystem().broadcastOn([`${YS}-${x}`],C),v.getSystem().broadcastOn([`${_6}-${x}`],C.internalDialog),v.getSystem().broadcastOn([`${E6}-${x}`],C.internalDialog),v.getSystem().broadcastOn([`${O6}-${x}`],{...C.internalDialog,buttons:_}),u.setData(C.initialData)})},close:()=>{l(h=>{Eo(h,B2)})},toggleFullscreen:t.toggleFullscreen};return u},Ja=(t,r,a)=>{const l=gt("dialog"),u=t.internalDialog,h=D(u.title,l,a),v=Dt(u.size),x=U(v.get()).toArray(),C=(ee,fe)=>(v.set(fe.internalDialog.size),re(fe.internalDialog.size,ee),E.some(fe)),_=Dx({body:u.body,initialData:u.initialData},l,a),M=Se(u.buttons),A=je(M),B=At(M.length!==0,vt({buttons:M},l,a)),F=Me(()=>Q,P(()=>ce,a.shared.providers,r),a.shared.getSink),oe={id:l,header:h,body:_,footer:B,extraClasses:x,extraBehaviours:[il.config({channel:`${YS}-${l}`,updateState:C,initialData:t})],extraStyles:{}},ce=pe(oe,F,a),De=(()=>{const ee=()=>{const Ne=Yr.getBody(ce);return go.getCurrent(Ne).getOr(Ne)},fe=()=>{ie(ce,v.get())};return{getId:se(l),getRoot:se(ce),getBody:()=>Yr.getBody(ce),getFooter:()=>Yr.getFooter(ce),getFormWrapper:ee,toggleFullscreen:fe}})(),Q=zs(De,r.redial,A);return{dialog:ce,instanceApi:Q}},ta=(t,r,a,l=!1,u)=>{const h=gt("dialog"),v=gt("dialog-label"),x=gt("dialog-content"),C=t.internalDialog,_=Dt(C.size),M=U(_.get()).toArray(),A=(be,Fe)=>(_.set(Fe.internalDialog.size),re(Fe.internalDialog.size,be),u(),E.some(Fe)),B=Io(y({title:C.title,draggable:!0},h,v,a.shared.providers)),F=Io(h$({body:C.body,initialData:C.initialData},h,x,a,l)),oe=Se(C.buttons),ce=je(oe),De=At(oe.length!==0,Io(rt({buttons:oe},h,a))),Q=Me(()=>Ne,{onBlock:be=>{_d.block(ee,(Fe,et)=>{const ct=B.getOpt(ee).map(eo=>Cn(eo.element));return L(be.message,et,a.shared.providers,ct)})},onUnblock:()=>{_d.unblock(ee)},onClose:()=>r.closeWindow()},a.shared.getSink),ee=Cs({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...M],attributes:{role:"dialog","aria-labelledby":v}},eventOrder:{[Zu()]:[il.name(),ja.name()],[ma()]:["execute-on-form"],[dc()]:["reflecting","execute-on-form"]},behaviours:We([_t.config({mode:"cyclic",onEscape:be=>(Eo(be,B2),E.some(!0)),useTabstopAt:be=>!G2(be)&&(Bo(be)!=="button"||ut(be,"disabled")!=="disabled"),firstTabstop:1}),il.config({channel:`${YS}-${h}`,updateState:A,initialData:t}),Lt.config({}),Yt("execute-on-form",Q.concat([$u(as(),(be,Fe)=>{_t.focusIn(be)}),Re(af(),(be,Fe)=>{be.getSystem().broadcastOn([K2],{newFocus:Fe.event.newFocus})})])),_d.config({getRoot:()=>E.some(ee)}),Zt.config({}),KS({})]),components:[B.asSpec(),F.asSpec(),...De.map(be=>be.asSpec()).toArray()]}),fe=()=>{ie(ee,_.get())},Ne=zs({getId:se(h),getRoot:se(ee),getFooter:()=>De.map(be=>be.get(ee)),getBody:()=>F.get(ee),getFormWrapper:()=>{const be=F.get(ee);return go.getCurrent(be).getOr(be)},toggleFullscreen:fe},r.redial,ce);return{dialog:ee,instanceApi:Ne}};var xi=tinymce.util.Tools.resolve("tinymce.util.URI");const Fo=t=>{const r=a=>{t.getSystem().isConnected()&&a(t)};return{block:a=>{if(!Pt(a))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(l=>{St(l,XE,{message:a})})},unblock:()=>{r(a=>{Eo(a,qE)})},close:()=>{r(a=>{Eo(a,B2)})},sendMessage:a=>{r(l=>{l.getSystem().broadcastOn([T6],a)})}}},Dc=["insertContent","setContent","execCommand","close","block","unblock"],Gn=t=>Jt(t)&&Dc.indexOf(t.mceAction)!==-1,Rt=t=>!Gn(t)&&Jt(t)&&bo(t,"mceAction"),He=(t,r,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=gr(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":r.close();break;case"block":r.block(a.message);break;case"unblock":r.unblock();break}},yt=(t,r,a,l)=>{const u=gt("dialog"),h=D(t.title,u,l),v=p$(t),x=t.buttons.bind(ee=>ee.length===0?E.none():E.some(vt({buttons:ee},u,l))),C=Ve(()=>Q,P(()=>De,l.shared.providers,r)),_={...t.height.fold(()=>({}),ee=>({height:ee+"px","max-height":ee+"px"})),...t.width.fold(()=>({}),ee=>({width:ee+"px","max-width":ee+"px"}))},M=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],A=new xi(t.url,{base_uri:new xi(window.location.href)}),B=`${A.protocol}://${A.host}${A.port?":"+A.port:""}`,F=dg(),oe=(ee,fe)=>E.some(fe),ce=[il.config({channel:`${YS}-${u}`,updateState:oe,initialData:t}),Yt("messages",[wn(()=>{const ee=Xs(Ke.fromDom(window),"message",fe=>{if(A.isSameOrigin(new xi(fe.raw.origin))){const Ne=fe.raw.data;Gn(Ne)?He(a,Q,Ne):Rt(Ne)&&t.onMessage(Q,Ne)}});F.set(ee)}),mi(F.clear)]),ja.config({channels:{[T6]:{onReceive:(ee,fe)=>{hn(ee.element,"iframe").each(Ne=>{const be=Ne.dom.contentWindow;bn(be)&&be.postMessage(fe,B)})}}}})],De=pe({id:u,header:h,body:v,footer:x,extraClasses:M,extraBehaviours:ce,extraStyles:_},C,l),Q=Fo(De);return{dialog:De,instanceApi:Q}},Vt=t=>{const r=t.shared;return{open:(a,l)=>{const u=()=>{Yr.hide(C),l()},h=Io(tx({name:"close-alert",text:"OK",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"cancel",t)),v=e(),x=rL(u,r.providers),C=Cs(i({lazySink:()=>r.getSink(),header:i5(v,x),body:o(a,r.providers),footer:E.some(n(s([],[h.asSpec()]))),onEscape:u,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Re(kp,u)],eventOrder:{}}));Yr.show(C);const _=h.get(C);Lt.focus(_)}}},mn=t=>{const r=t.shared;return{open:(a,l)=>{const u=A=>{Yr.hide(_),l(A)},h=Io(tx({name:"yes",text:"Yes",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"submit",t)),v=tx({name:"no",text:"No",primary:!1,buttonType:E.some("secondary"),align:"end",enabled:!0,icon:E.none()},"cancel",t),x=e(),C=rL(()=>u(!1),r.providers),_=Cs(i({lazySink:()=>r.getSink(),header:i5(x,C),body:o(a,r.providers),footer:E.some(n(s([],[v,h.asSpec()]))),onEscape:()=>u(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Re(kp,()=>u(!1)),Re(N2,()=>u(!0))],eventOrder:{}}));Yr.show(_);const M=h.get(_);Lt.focus(M)}}},co=(t,r)=>lc(Ae("data",r,t)),ya=t=>M2(t,".tox-alert-dialog")||M2(t,".tox-confirm-dialog"),bu=(t,r,a)=>r&&a?[]:[ir.config({contextual:{lazyContext:()=>E.some(Nn(Ke.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>h1(t,l.element).map(u=>({bounds:kv(u),optScrollEnv:E.some({currentScrollTop:u.element.dom.scrollTop,scrollElmTop:Fr(u.element).top})})).getOrThunk(()=>({bounds:bs(),optScrollEnv:E.none()}))})],Mc=t=>{const r=t.editor,a=m2(r),l=Vt(t.backstages.dialog),u=mn(t.backstages.dialog),h=(A,B,F)=>{if(!Mn(B)){if(B.inline==="toolbar")return _(A,t.backstages.popup.shared.anchors.inlineDialog(),F,B);if(B.inline==="bottom")return M(A,t.backstages.popup.shared.anchors.inlineBottomDialog(),F,B);if(B.inline==="cursor")return _(A,t.backstages.popup.shared.anchors.cursor(),F,B)}return C(A,F)},v=(A,B)=>x(A,B),x=(A,B)=>{const F=oe=>{const ce=yt(oe,{closeWindow:()=>{Yr.hide(ce.dialog),B(ce.instanceApi)}},r,t.backstages.dialog);return Yr.show(ce.dialog),ce.instanceApi};return A1.openUrl(F,A)},C=(A,B)=>{const F=(oe,ce,De)=>{const Q=ce,ee=Ja({dataValidator:De,initialData:Q,internalDialog:oe},{redial:A1.redial,closeWindow:()=>{Yr.hide(ee.dialog),B(ee.instanceApi)}},t.backstages.dialog);return Yr.show(ee.dialog),ee.instanceApi.setData(Q),ee.instanceApi};return A1.open(F,A)},_=(A,B,F,oe)=>{const ce=(De,Q,ee)=>{const fe=co(Q,ee),Ne=un(),be=t.backstages.popup.shared.header.isPositionedAtTop(),Fe={dataValidator:ee,initialData:fe,internalDialog:De},et=()=>Ne.on(G=>{pn.reposition(G),(!a||!be)&&ir.refresh(G)}),ct=ta(Fe,{redial:A1.redial,closeWindow:()=>{Ne.on(pn.hide),r.off("ResizeEditor",et),Ne.clear(),F(ct.instanceApi)}},t.backstages.popup,oe.ariaAttrs,et),eo=Cs(pn.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:oe.persistent?{event:"doNotDismissYet"}:{},...be?{}:{fireRepositionEventInstead:{}},inlineBehaviours:We([Yt("window-manager-inline-events",[Re(og(),(G,he)=>{Eo(ct.dialog,kp)})]),...bu(r,a,be)]),isExtraPart:(G,he)=>ya(he)}));Ne.set(eo);const K=()=>{const G=r.inline?fr():Ke.fromDom(r.getContainer()),he=Nn(G);return E.some(he)};return pn.showWithinBounds(eo,ji(ct.dialog),{anchor:B},K),(!a||!be)&&(ir.refresh(eo),r.on("ResizeEditor",et)),ct.instanceApi.setData(fe),_t.focusIn(ct.dialog),ct.instanceApi};return A1.open(ce,A)},M=(A,B,F,oe)=>{const ce=(De,Q,ee)=>{const fe=co(Q,ee),Ne=un(),be=t.backstages.popup.shared.header.isPositionedAtTop(),Fe={dataValidator:ee,initialData:fe,internalDialog:De},et=()=>Ne.on(G=>{pn.reposition(G),ir.refresh(G)}),ct=ta(Fe,{redial:A1.redial,closeWindow:()=>{Ne.on(pn.hide),r.off("ResizeEditor ScrollWindow ElementScroll",et),Ne.clear(),F(ct.instanceApi)}},t.backstages.popup,oe.ariaAttrs,et),eo=Cs(pn.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:oe.persistent?{event:"doNotDismissYet"}:{},...be?{}:{fireRepositionEventInstead:{}},inlineBehaviours:We([Yt("window-manager-inline-events",[Re(og(),(G,he)=>{Eo(ct.dialog,kp)})]),ir.config({contextual:{lazyContext:()=>E.some(Nn(Ke.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:G=>h1(r,G.element).map(he=>({bounds:kv(he),optScrollEnv:E.some({currentScrollTop:he.element.dom.scrollTop,scrollElmTop:Fr(he.element).top})})).getOrThunk(()=>({bounds:bs(),optScrollEnv:E.none()}))})]),isExtraPart:(G,he)=>ya(he)}));Ne.set(eo);const K=()=>t.backstages.popup.shared.getSink().toOptional().bind(G=>{const he=h1(r,G.element),Ee=15,dt=he.map(Je=>kv(Je)).getOr(bs()),_e=Nn(Ke.fromDom(r.getContentAreaContainer())),Ue=eh(_e,dt);return E.some(Jn(Ue.x,Ue.y,Ue.width,Ue.height-Ee))});return pn.showWithinBounds(eo,ji(ct.dialog),{anchor:B},K),ir.refresh(eo),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",et),ct.instanceApi.setData(fe),_t.focusIn(ct.dialog),ct.instanceApi};return A1.open(ce,A)};return{open:h,openUrl:v,alert:(A,B)=>{l.open(A,B)},close:A=>{A.close()},confirm:(A,B)=>{u.open(A,B)}}},ll=t=>{A_(t),XA(t),DD(t)};var Ci=()=>{Um.add("silver",t=>{ll(t);let r=()=>bs();const{dialogs:a,popups:l,renderUI:u}=JU(t,{getPopupSinkBounds:()=>r()}),h=()=>{const C=u();return h1(t,l.getMothership().element).each(_=>{r=()=>kv(_)}),C};hP.register(t,l.backstage.shared);const v=Mc({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),x=()=>kM(t,{backstage:l.backstage},l.getMothership());return{renderUI:h,getWindowManagerImpl:se(v),getNotificationManagerImpl:x}})};Ci()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mo=(Ge,Be,E)=>{const ro=Be==="UL"?"InsertUnorderedList":"InsertOrderedList";Ge.execCommand(ro,!1,E===!1?null:{"list-style-type":E})},ho=Ge=>{Ge.addCommand("ApplyUnorderedListStyle",(Be,E)=>{Mo(Ge,"UL",E["list-style-type"])}),Ge.addCommand("ApplyOrderedListStyle",(Be,E)=>{Mo(Ge,"OL",E["list-style-type"])})},jo=Ge=>Be=>Be.options.get(Ge),Ro=Ge=>{const Be=Ge.options.register;Be("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Be("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},Zo=jo("advlist_number_styles"),kn=jo("advlist_bullet_styles"),Pt=Ge=>Ge==null,Jt=Ge=>!Pt(Ge);var na=tinymce.util.Tools.resolve("tinymce.util.Tools");class Ut{constructor(Be,E){this.tag=Be,this.value=E}static some(Be){return new Ut(!0,Be)}static none(){return Ut.singletonNone}fold(Be,E){return this.tag?E(this.value):Be()}isSome(){return this.tag}isNone(){return!this.tag}map(Be){return this.tag?Ut.some(Be(this.value)):Ut.none()}bind(Be){return this.tag?Be(this.value):Ut.none()}exists(Be){return this.tag&&Be(this.value)}forall(Be){return!this.tag||Be(this.value)}filter(Be){return!this.tag||Be(this.value)?this:Ut.none()}getOr(Be){return this.tag?this.value:Be}or(Be){return this.tag?this:Be}getOrThunk(Be){return this.tag?this.value:Be()}orThunk(Be){return this.tag?this:Be()}getOrDie(Be){if(this.tag)return this.value;throw new Error(Be??"Called getOrDie on None")}static from(Be){return Jt(Be)?Ut.some(Be):Ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Be){this.tag&&Be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ut.singletonNone=new Ut(!1);const Ao=(Ge,Be,E)=>{for(let ro=0,Pe=Ge.length;ro<Pe;ro++){const fo=Ge[ro];if(Be(fo,ro))return Ut.some(fo);if(E(fo,ro))break}return Ut.none()},gr=Ge=>/\btox\-/.test(Ge.className),Mn=(Ge,Be)=>Ge.dom.isChildOf(Be,Ge.getBody()),An=Ge=>Be=>Jt(Be)&&Ge.test(Be.nodeName),bn=An(/^(OL|UL|DL)$/),ft=An(/^(TH|TD)$/),Os=(Ge,Be,E)=>Ao(Be,ro=>bn(ro)&&!gr(ro),ft).exists(ro=>ro.nodeName===E&&Mn(Ge,ro)),_n=Ge=>{const Be=Ge.dom.getParent(Ge.selection.getNode(),"ol,ul"),E=Ge.dom.getStyle(Be,"listStyleType");return Ut.from(E)},J=(Ge,Be)=>Be!==null&&!Ge.dom.isEditable(Be),qe=(Ge,Be)=>{const E=Ge.dom.getParent(Be,"ol,ul,dl");return J(Ge,E)&&Ge.selection.isEditable()},ul=(Ge,Be)=>{const E=Ge.selection.getNode();return Be({parents:Ge.dom.getParents(E),element:E}),Ge.on("NodeChange",Be),()=>Ge.off("NodeChange",Be)},Oo=Ge=>Ge.replace(/\-/g," ").replace(/\b\w/g,Be=>Be.toUpperCase()),se=Ge=>Pt(Ge)||Ge==="default"?"":Ge,so=(Ge,Be)=>E=>{const ro=(Pe,fo)=>{const Ot=Pe.selection.getStart(!0);E.setActive(Os(Pe,fo,Be)),E.setEnabled(!qe(Pe,Ot)&&Pe.selection.isEditable())};return ul(Ge,Pe=>ro(Ge,Pe.parents))},Rn=(Ge,Be,E,ro,Pe,fo)=>{Ge.ui.registry.addSplitButton(Be,{tooltip:E,icon:Pe==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Ot=>{const Le=na.map(fo,zo=>{const xr=Pe==="OL"?"num":"bull",Xo=zo==="disc"||zo==="decimal"?"default":zo,lr=se(zo),Ie=Oo(zo);return{type:"choiceitem",value:lr,icon:"list-"+xr+"-"+Xo,text:Ie}});Ot(Le)},onAction:()=>Ge.execCommand(ro),onItemAction:(Ot,Le)=>{Mo(Ge,Pe,Le)},select:Ot=>_n(Ge).map(Le=>Ot===Le).getOr(!1),onSetup:so(Ge,Pe)})},io=(Ge,Be,E,ro,Pe,fo)=>{Ge.ui.registry.addToggleButton(Be,{active:!1,tooltip:E,icon:Pe==="OL"?"ordered-list":"unordered-list",onSetup:so(Ge,Pe),onAction:()=>Ge.queryCommandState(ro)||fo===""?Ge.execCommand(ro):Mo(Ge,Pe,fo)})},Oe=(Ge,Be,E,ro,Pe,fo)=>{fo.length>1?Rn(Ge,Be,E,ro,Pe,fo):io(Ge,Be,E,ro,Pe,se(fo[0]))},te=Ge=>{Oe(Ge,"numlist","Numbered list","InsertOrderedList","OL",Zo(Ge)),Oe(Ge,"bullist","Bullet list","InsertUnorderedList","UL",kn(Ge))};var nr=()=>{Ct.add("advlist",Ge=>{Ge.hasPlugin("lists")?(Ro(Ge),te(Ge),ho(Ge)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};nr()})();(function(){var Ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mo=(S,T,H)=>{var Y;return H(S,T.prototype)?!0:((Y=S.constructor)===null||Y===void 0?void 0:Y.name)===T.name},ho=S=>{const T=typeof S;return S===null?"null":T==="object"&&Array.isArray(S)?"array":T==="object"&&Mo(S,String,(H,Y)=>Y.isPrototypeOf(H))?"string":T},jo=S=>T=>ho(T)===S,Ro=S=>T=>typeof T===S,Zo=jo("string"),kn=jo("object"),Pt=jo("array"),Jt=Ro("boolean"),na=S=>S==null,Ut=S=>!na(S),Ao=Ro("function"),gr=Ro("number"),Mn=()=>{},An=(S,T)=>H=>S(T(H)),bn=S=>()=>S,ft=(S,T)=>S===T;function Os(S,...T){return(...H)=>{const Y=T.concat(H);return S.apply(null,Y)}}const _n=S=>T=>!S(T),J=bn(!1);class qe{constructor(T,H){this.tag=T,this.value=H}static some(T){return new qe(!0,T)}static none(){return qe.singletonNone}fold(T,H){return this.tag?H(this.value):T()}isSome(){return this.tag}isNone(){return!this.tag}map(T){return this.tag?qe.some(T(this.value)):qe.none()}bind(T){return this.tag?T(this.value):qe.none()}exists(T){return this.tag&&T(this.value)}forall(T){return!this.tag||T(this.value)}filter(T){return!this.tag||T(this.value)?this:qe.none()}getOr(T){return this.tag?this.value:T}or(T){return this.tag?this:T}getOrThunk(T){return this.tag?this.value:T()}orThunk(T){return this.tag?this:T()}getOrDie(T){if(this.tag)return this.value;throw new Error(T??"Called getOrDie on None")}static from(T){return Ut(T)?qe.some(T):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(T){this.tag&&T(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const ul=Array.prototype.slice,Oo=Array.prototype.indexOf,se=Array.prototype.push,so=(S,T)=>Oo.call(S,T),Rn=(S,T)=>so(S,T)>-1,io=(S,T)=>{for(let H=0,Y=S.length;H<Y;H++){const ne=S[H];if(T(ne,H))return!0}return!1},Oe=(S,T)=>{const H=S.length,Y=new Array(H);for(let ne=0;ne<H;ne++){const Ze=S[ne];Y[ne]=T(Ze,ne)}return Y},te=(S,T)=>{for(let H=0,Y=S.length;H<Y;H++){const ne=S[H];T(ne,H)}},nr=(S,T)=>{const H=[];for(let Y=0,ne=S.length;Y<ne;Y++){const Ze=S[Y];T(Ze,Y)&&H.push(Ze)}return H},Ge=(S,T)=>{if(S.length===0)return[];{let H=T(S[0]);const Y=[];let ne=[];for(let Ze=0,kt=S.length;Ze<kt;Ze++){const zt=S[Ze],jt=T(zt);jt!==H&&(Y.push(ne),ne=[]),H=jt,ne.push(zt)}return ne.length!==0&&Y.push(ne),Y}},Be=(S,T,H)=>(te(S,(Y,ne)=>{H=T(H,Y,ne)}),H),E=(S,T,H)=>{for(let Y=0,ne=S.length;Y<ne;Y++){const Ze=S[Y];if(T(Ze,Y))return qe.some(Ze);if(H(Ze,Y))break}return qe.none()},ro=(S,T)=>E(S,T,J),Pe=S=>{const T=[];for(let H=0,Y=S.length;H<Y;++H){if(!Pt(S[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+S);se.apply(T,S[H])}return T},fo=(S,T)=>Pe(Oe(S,T)),Ot=S=>{const T=ul.call(S,0);return T.reverse(),T},Le=(S,T)=>T>=0&&T<S.length?qe.some(S[T]):qe.none(),zo=S=>Le(S,0),xr=S=>Le(S,S.length-1),Xo=(S,T)=>{const H=[],Y=Ao(T)?ne=>io(H,Ze=>T(Ze,ne)):ne=>Rn(H,ne);for(let ne=0,Ze=S.length;ne<Ze;ne++){const kt=S[ne];Y(kt)||H.push(kt)}return H},lr=(S,T,H=ft)=>S.exists(Y=>H(Y,T)),Ie=(S,T,H=ft)=>at(S,T,H).getOr(S.isNone()&&T.isNone()),at=(S,T,H)=>S.isSome()&&T.isSome()?qe.some(H(S.getOrDie(),T.getOrDie())):qe.none(),I=8,hs=9,qo=11,Bn=1,on=3,Zp=(S,T)=>{const H=(T||document).createElement("div");if(H.innerHTML=S,!H.hasChildNodes()||H.childNodes.length>1){const Y="HTML does not have a single root node";throw console.error(Y,S),new Error(Y)}return Bt(H.childNodes[0])},It=(S,T)=>{const H=(T||document).createElement(S);return Bt(H)},nn=(S,T)=>{const H=(T||document).createTextNode(S);return Bt(H)},Bt=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},me={fromHtml:Zp,fromTag:It,fromText:nn,fromDom:Bt,fromPoint:(S,T,H)=>qe.from(S.dom.elementFromPoint(T,H)).map(Bt)},ei=(S,T)=>{const H=S.dom;if(H.nodeType!==Bn)return!1;{const Y=H;if(Y.matches!==void 0)return Y.matches(T);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(T);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(T);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(T);throw new Error("Browser lacks native selectors")}},cr=(S,T)=>S.dom===T.dom,Et=(S,T)=>{const H=S.dom,Y=T.dom;return H===Y?!1:H.contains(Y)},ml=ei,En=typeof window<"u"?window:Function("return this;")(),xu=(S,T)=>{let H=T??En;for(let Y=0;Y<S.length&&H!==void 0&&H!==null;++Y)H=H[S[Y]];return H},On=(S,T)=>{const H=S.split(".");return xu(H,T)},Ts=(S,T)=>On(S,T),jl=(S,T)=>{const H=Ts(S,T);if(H==null)throw new Error(S+" not available on this browser");return H},Ds=Object.getPrototypeOf,hr=S=>jl("HTMLElement",S),yn=S=>{const T=On("ownerDocument.defaultView",S);return kn(S)&&(hr(T).prototype.isPrototypeOf(S)||/^HTML\w*Element$/.test(Ds(S).constructor.name))},ti=S=>S.dom.nodeName.toLowerCase(),Xn=S=>S.dom.nodeType,Yo=S=>T=>Xn(T)===S,Nc=S=>Xn(S)===I||ti(S)==="#comment",xn=S=>Ia(S)&&yn(S.dom),Ia=Yo(Bn),ps=Yo(on),gl=Yo(hs),Si=Yo(qo),Cr=S=>T=>Ia(T)&&ti(T)===S,hl=S=>me.fromDom(S.dom.ownerDocument),ot=S=>gl(S)?S:hl(S),bo=S=>qe.from(S.dom.parentNode).map(me.fromDom),ra=S=>qe.from(S.dom.parentElement).map(me.fromDom),Ms=S=>qe.from(S.dom.nextSibling).map(me.fromDom),ki=S=>Oe(S.dom.childNodes,me.fromDom),_i=(S,T)=>{const H=S.dom.childNodes;return qe.from(H[T]).map(me.fromDom)},Uo=S=>_i(S,0),Pa=S=>_i(S,S.dom.childNodes.length-1),Gl=S=>Si(S)&&Ut(S.dom.host),Go=Ao(Element.prototype.attachShadow)&&Ao(Node.prototype.getRootNode)?S=>me.fromDom(S.dom.getRootNode()):ot,At=S=>{const T=Go(S);return Gl(T)?qe.some(T):qe.none()},Jr=S=>me.fromDom(S.dom.host),pl=S=>{const T=ps(S)?S.dom.parentNode:S.dom;if(T==null||T.ownerDocument===null)return!1;const H=T.ownerDocument;return At(me.fromDom(T)).fold(()=>H.body.contains(T),An(pl,Jr))};var Lc=(S,T,H,Y,ne)=>S(H,Y)?qe.some(H):Ao(ne)&&ne(H)?qe.none():T(H,Y,ne);const Ed=(S,T,H)=>{let Y=S.dom;const ne=Ao(H)?H:J;for(;Y.parentNode;){Y=Y.parentNode;const Ze=me.fromDom(Y);if(T(Ze))return qe.some(Ze);if(ne(Ze))break}return qe.none()},es=(S,T,H)=>Lc((Y,ne)=>ne(Y),Ed,S,T,H),Pr=(S,T,H)=>Ed(S,Y=>ei(Y,T),H),qn=(S,T,H)=>Lc((Y,ne)=>ei(Y,ne),Pr,S,T,H),wa=S=>qn(S,"[contenteditable]"),ts=(S,T=!1)=>pl(S)?S.dom.isContentEditable:wa(S).fold(bn(T),H=>za(H)==="true"),za=S=>S.dom.contentEditable,sa=(S,T)=>{bo(S).each(H=>{H.dom.insertBefore(T.dom,S.dom)})},Ko=(S,T)=>{Ms(S).fold(()=>{bo(S).each(H=>{os(H,T)})},H=>{sa(H,T)})},Ei=(S,T)=>{Uo(S).fold(()=>{os(S,T)},H=>{S.dom.insertBefore(T.dom,H.dom)})},os=(S,T)=>{S.dom.appendChild(T.dom)},Cu=(S,T)=>{te(T,H=>{sa(S,H)})},Oi=(S,T)=>{te(T,H=>{os(S,H)})},Ke=S=>{S.dom.textContent="",te(ki(S),T=>{Qe(T)})},Qe=S=>{const T=S.dom;T.parentNode!==null&&T.parentNode.removeChild(T)};var As=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Hc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),fl=tinymce.util.Tools.resolve("tinymce.util.VK");const Sm=S=>Oe(S,me.fromDom),Qo=Object.keys,Kl=(S,T)=>{const H=Qo(S);for(let Y=0,ne=H.length;Y<ne;Y++){const Ze=H[Y],kt=S[Ze];T(kt,Ze)}},Up=S=>(T,H)=>{S[H]=T},Ic=(S,T,H,Y)=>{Kl(S,(ne,Ze)=>{(T(ne,Ze)?H:Y)(ne,Ze)})},Xl=(S,T)=>{const H={};return Ic(S,T,Up(H),Mn),H},wu=(S,T,H)=>{if(Zo(H)||Jt(H)||gr(H))S.setAttribute(T,H+"");else throw console.error("Invalid call to Attribute.set. Key ",T,":: Value ",H,":: Element ",S),new Error("Attribute value was not simple")},Yn=(S,T)=>{const H=S.dom;Kl(T,(Y,ne)=>{wu(H,ne,Y)})},Bo=S=>Be(S.dom.attributes,(T,H)=>(T[H.name]=H.value,T),{}),Su=(S,T)=>me.fromDom(S.dom.cloneNode(T)),ql=S=>Su(S,!0),Ti=(S,T)=>{const H=me.fromTag(T),Y=Bo(S);return Yn(H,Y),H},zn=(S,T)=>{const H=Ti(S,T);Ko(S,H);const Y=ki(S);return Oi(H,Y),Qe(S),H};var rr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),sr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yl=S=>T=>Ut(T)&&T.nodeName.toLowerCase()===S,oi=S=>T=>Ut(T)&&S.test(T.nodeName),wr=S=>Ut(S)&&S.nodeType===3,ni=S=>Ut(S)&&S.nodeType===1,uo=oi(/^(OL|UL|DL)$/),Gg=oi(/^(OL|UL)$/),Vo=Yl("ol"),Di=oi(/^(LI|DT|DD)$/),pr=oi(/^(DT|DD)$/),Ql=oi(/^(TH|TD)$/),Fn=Yl("br"),Pc=S=>{var T;return((T=S.parentNode)===null||T===void 0?void 0:T.firstChild)===S},ns=(S,T)=>Ut(T)&&T.nodeName in S.schema.getTextBlockElements(),Od=(S,T)=>Ut(S)&&S.nodeName in T,Fs=(S,T)=>Ut(T)&&T.nodeName in S.schema.getVoidElements(),km=(S,T)=>Fn(T)?S.isBlock(T.nextSibling)&&!Fn(T.previousSibling):!1,Mi=(S,T,H)=>{const Y=S.isEmpty(T);return H&&S.select("span[data-mce-type=bookmark]",T).length>0?!1:Y},_m=(S,T)=>S.isChildOf(T,S.getRoot()),aa=S=>T=>T.options.get(S),vl=S=>{const T=S.options.register;T("lists_indent_on_tab",{processor:"boolean",default:!0})},ku=aa("lists_indent_on_tab"),Em=aa("forced_root_block"),_u=aa("forced_root_block_attrs"),Td=(S,T)=>{const H=S.dom,Y=S.schema.getBlockElements(),ne=H.createFragment(),Ze=Em(S),kt=_u(S);let zt,jt,bt=!1;for(jt=H.create(Ze,kt),Od(T.firstChild,Y)||ne.appendChild(jt);zt=T.firstChild;){const it=zt.nodeName;!bt&&(it!=="SPAN"||zt.getAttribute("data-mce-type")!=="bookmark")&&(bt=!0),Od(zt,Y)?(ne.appendChild(zt),jt=null):(jt||(jt=H.create(Ze,kt),ne.appendChild(jt)),jt.appendChild(zt))}return!bt&&jt&&jt.appendChild(H.create("br",{"data-mce-bogus":"1"})),ne},ri=rr.DOM,Om=(S,T,H)=>{const Y=bt=>{const it=bt.parentNode;it&&sr.each(ne,$n=>{it.insertBefore($n,H.parentNode)}),ri.remove(bt)},ne=ri.select('span[data-mce-type="bookmark"]',T),Ze=Td(S,H),kt=ri.createRng();kt.setStartAfter(H),kt.setEndAfter(T);const zt=kt.extractContents();for(let bt=zt.firstChild;bt;bt=bt.firstChild)if(bt.nodeName==="LI"&&S.dom.isEmpty(bt)){ri.remove(bt);break}S.dom.isEmpty(zt)||ri.insertAfter(zt,T),ri.insertAfter(Ze,T);const jt=H.parentElement;jt&&Mi(S.dom,jt)&&Y(jt),ri.remove(H),Mi(S.dom,T)&&ri.remove(T)},zr=Cr("dd"),Vn=Cr("dt"),Jl=(S,T)=>{zr(T)?zn(T,"dt"):Vn(T)&&ra(T).each(H=>Om(S,H.dom,T.dom))},Tm=S=>{Vn(S)&&zn(S,"dd")},Dm=(S,T,H)=>{T==="Indent"?te(H,Tm):te(H,Y=>Jl(S,Y))},Fa=(S,T)=>{if(wr(S))return{container:S,offset:T};const H=As.getNode(S,T);return wr(H)?{container:H,offset:T>=S.childNodes.length?H.data.length:0}:H.previousSibling&&wr(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&wr(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:S,offset:T}},Dd=S=>{const T=S.cloneRange(),H=Fa(S.startContainer,S.startOffset);T.setStart(H.container,H.offset);const Y=Fa(S.endContainer,S.endOffset);return T.setEnd(Y.container,Y.offset),T},fs=["OL","UL","DL"],fr=fs.join(","),N=(S,T)=>{const H=T||S.selection.getStart(!0);return S.dom.getParent(H,fr,ia(S,H))},V=(S,T)=>Ut(S)&&T.length===1&&T[0]===S,W=S=>nr(S.querySelectorAll(fr),uo),ae=S=>{const T=N(S),H=S.selection.getSelectedBlocks();return V(T,H)?W(T):nr(H,Y=>uo(Y)&&T!==Y)},ut=(S,T)=>{const H=sr.map(T,Y=>S.dom.getParent(Y,"li,dd,dt",ia(S,Y))||Y);return Xo(H)},Tt=S=>{const T=S.selection.getSelectedBlocks();return nr(ut(S,T),Di)},Zn=S=>nr(Tt(S),pr),vo=(S,T)=>{const H=S.dom.getParents(T,"TD,TH");return H.length>0?H[0]:S.getBody()},zc=(S,T)=>!uo(T)&&!Di(T)&&io(fs,H=>S.isValidChild(T.nodeName,H)),ia=(S,T)=>{const H=S.dom.getParents(T,S.dom.isBlock);return ro(H,Y=>zc(S.schema,Y)).getOr(S.getBody())},Vs=S=>bo(S).exists(T=>Di(T.dom)&&Uo(T).exists(H=>!uo(H.dom))&&Pa(T).exists(H=>!uo(H.dom))),ve=(S,T)=>{const H=S.dom.getParents(T,"ol,ul",ia(S,T));return xr(H)},Rs=S=>{const T=ve(S,S.selection.getStart()),H=nr(S.selection.getSelectedBlocks(),Gg);return T.toArray().concat(H)},Zs=S=>{const T=S.selection.getStart();return S.dom.getParents(T,"ol,ul",ia(S,T))},Sr=S=>{const T=Rs(S),H=Zs(S);return ro(H,Y=>Vs(me.fromDom(Y))).fold(()=>Qn(S,T),Y=>[Y])},Qn=(S,T)=>{const H=Oe(T,Y=>ve(S,Y).getOr(Y));return Xo(H)},Wo=S=>/\btox\-/.test(S.className),bl=(S,T)=>E(S,uo,Ql).exists(H=>H.nodeName===T&&!Wo(H)),Mm=(S,T)=>T!==null&&!S.dom.isEditable(T),xo=S=>{const T=N(S);return Mm(S,T)},Va=(S,T)=>{const H=S.dom.getParent(T,"ol,ul,dl");return Mm(S,H)},Md=(S,T)=>{const H=S.selection.getNode();return T({parents:S.dom.getParents(H),element:H}),S.on("NodeChange",T),()=>S.off("NodeChange",T)},vr=(S,T)=>{const H=(T||document).createDocumentFragment();return te(S,Y=>{H.appendChild(Y.dom)}),me.fromDom(H)},Cn=(S,T,H)=>S.dispatch("ListMutation",{action:T,element:H}),ec=(S=>T=>T.replace(S,""))(/^\s+|\s+$/g),jv=S=>S.length>0,Am=S=>!jv(S),gn=S=>S.style!==void 0&&Ao(S.style.getPropertyValue),la=(S,T,H)=>{if(!Zo(H))throw console.error("Invalid call to CSS.set. Property ",T,":: Value ",H,":: Element ",S),new Error("CSS value must be a string: "+H);gn(S)&&S.style.setProperty(T,H)},tc=(S,T,H)=>{const Y=S.dom;la(Y,T,H)},Fr=S=>ml(S,"OL,UL"),po=S=>ml(S,"LI"),Eu=S=>Uo(S).exists(Fr),Kg=S=>Pa(S).exists(Fr),Un=S=>"listAttributes"in S,si=S=>"isComment"in S,Sa=S=>"isFragment"in S,No=S=>S.depth>0,Rm=S=>S.isSelected,Ad=S=>{const T=ki(S),H=Kg(S)?T.slice(0,-1):T;return Oe(H,ql)},Bm=(S,T,H)=>bo(S).filter(Ia).map(Y=>({depth:T,dirty:!1,isSelected:H,content:Ad(S),itemAttributes:Bo(S),listAttributes:Bo(Y),listType:ti(Y),isInPreviousLi:!1})),Nm=(S,T)=>{os(S.item,T.list)},Dn=S=>{for(let T=1;T<S.length;T++)Nm(S[T-1],S[T])},Ai=(S,T)=>{at(xr(S),zo(T),Nm)},Wn=(S,T)=>{const H={list:me.fromTag(T,S),item:me.fromTag("li",S)};return os(H.list,H.item),H},Ri=(S,T,H)=>{const Y=[];for(let ne=0;ne<H;ne++)Y.push(Wn(S,Un(T)?T.listType:T.parentListType));return Y},Fc=(S,T)=>{for(let H=0;H<S.length-1;H++)tc(S[H].item,"list-style-type","none");xr(S).each(H=>{Un(T)&&(Yn(H.list,T.listAttributes),Yn(H.item,T.itemAttributes)),Oi(H.item,T.content)})},kr=(S,T)=>{ti(S.list)!==T.listType&&(S.list=zn(S.list,T.listType)),Yn(S.list,T.listAttributes)},Xg=(S,T,H)=>{const Y=me.fromTag("li",S);return Yn(Y,T),Oi(Y,H),Y},Vc=(S,T)=>{os(S.list,T),S.item=T},ka=(S,T,H)=>{const Y=T.slice(0,H.depth);return xr(Y).each(ne=>{if(Un(H)){const Ze=Xg(S,H.itemAttributes,H.content);Vc(ne,Ze),kr(ne,H)}else if(Sa(H))Oi(ne.item,H.content);else{const Ze=me.fromHtml(`<!--${H.content}-->`);os(ne.list,Ze)}}),Y},qg=(S,T,H)=>{const Y=Ri(S,H,H.depth-T.length);return Dn(Y),Fc(Y,H),Ai(T,Y),T.concat(Y)},Wp=(S,T)=>{let H=qe.none();const Y=Be(T,(ne,Ze,kt)=>si(Ze)?kt===0?(H=qe.some(Ze),ne):ka(S,ne,Ze):Ze.depth>ne.length?qg(S,ne,Ze):ka(S,ne,Ze),[]);return H.each(ne=>{const Ze=me.fromHtml(`<!--${ne.content}-->`);zo(Y).each(kt=>{Ei(kt.list,Ze)})}),zo(Y).map(ne=>ne.list)},Ou=(S,T)=>{switch(S){case"Indent":T.depth++;break;case"Outdent":T.depth--;break;case"Flatten":T.depth=0}T.dirty=!0},Yg=(S,T)=>{Un(S)&&Un(T)&&(S.listType=T.listType,S.listAttributes={...T.listAttributes})},Zc=S=>{S.listAttributes=Xl(S.listAttributes,(T,H)=>H!=="start")},Lm=(S,T)=>{const H=S[T].depth,Y=Ze=>Ze.depth===H&&!Ze.dirty,ne=Ze=>Ze.depth<H;return E(Ot(S.slice(0,T)),Y,ne).orThunk(()=>E(S.slice(T+1),Y,ne))},Us=S=>(te(S,(T,H)=>{Lm(S,H).fold(()=>{T.dirty&&Un(T)&&Zc(T)},Y=>Yg(T,Y))}),S),Uc=S=>{let T=S;return{get:()=>T,set:H=>{T=H}}},Hm=(S,T,H,Y)=>{var ne;if(Nc(Y))return[{depth:S+1,content:(ne=Y.dom.nodeValue)!==null&&ne!==void 0?ne:"",dirty:!1,isSelected:!1,isComment:!0}];T.each(zt=>{cr(zt.start,Y)&&H.set(!0)});const Ze=Bm(Y,S,H.get());T.each(zt=>{cr(zt.end,Y)&&H.set(!1)});const kt=Pa(Y).filter(Fr).map(zt=>Im(S,T,H,zt)).getOr([]);return Ze.toArray().concat(kt)},Tu=(S,T,H,Y)=>Uo(Y).filter(Fr).fold(()=>Hm(S,T,H,Y),ne=>{const Ze=Be(ki(Y),(kt,zt,jt)=>{if(jt===0)return kt;if(po(zt))return kt.concat(Hm(S,T,H,zt));{const bt={isFragment:!0,depth:S,content:[zt],isSelected:!1,dirty:!1,parentListType:ti(ne)};return kt.concat(bt)}},[]);return Im(S,T,H,ne).concat(Ze)}),Im=(S,T,H,Y)=>fo(ki(Y),ne=>{const Ze=Fr(ne)?Im:Tu,kt=S+1;return Ze(kt,T,H,ne)}),Pm=(S,T)=>{const H=Uc(!1),Y=0;return Oe(S,ne=>({sourceList:ne,entries:Im(Y,T,H,ne)}))},P1=(S,T)=>{const H=Us(T);return Oe(H,Y=>{const ne=si(Y)?vr([me.fromHtml(`<!--${Y.content}-->`)]):vr(Y.content);return me.fromDom(Td(S,ne.dom))})},Du=(S,T)=>{const H=Us(T);return Wp(S.contentDocument,H).toArray()},z1=(S,T)=>fo(Ge(T,No),H=>zo(H).exists(No)?Du(S,H):P1(S,H)),Mu=(S,T)=>{te(nr(S,Rm),H=>Ou(T,H))},X=S=>{const T=Oe(Tt(S),me.fromDom);return at(ro(T,_n(Eu)),ro(Ot(T),_n(Eu)),(H,Y)=>({start:H,end:Y}))},$p=(S,T,H)=>{const Y=Pm(T,X(S));te(Y,ne=>{Mu(ne.entries,H);const Ze=z1(S,ne.entries);te(Ze,kt=>{Cn(S,H==="Indent"?"IndentList":"OutdentList",kt.dom)}),Cu(ne.sourceList,Ze),Qe(ne.sourceList)})},Za=(S,T)=>{const H=Sm(Sr(S)),Y=Sm(Zn(S));let ne=!1;if(H.length||Y.length){const Ze=S.selection.getBookmark();$p(S,H,T),Dm(S,T,Y),S.selection.moveToBookmark(Ze),S.selection.setRng(Dd(S.selection.getRng())),S.nodeChanged(),ne=!0}return ne},Rd=(S,T)=>!xo(S)&&Za(S,T),Au=S=>Rd(S,"Indent"),Qg=S=>Rd(S,"Outdent"),yo=S=>Rd(S,"Flatten"),oc="\uFEFF",Jg=S=>S===oc,Bi=(S,T,H)=>Ed(S,T,H).isSome(),Bs=(S,T)=>Bi(S,Os(cr,T));var zm=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const vs=rr.DOM,yl=S=>{const T={},H=Y=>{let ne=S[Y?"startContainer":"endContainer"],Ze=S[Y?"startOffset":"endOffset"];if(ni(ne)){const kt=vs.create("span",{"data-mce-type":"bookmark"});ne.hasChildNodes()?(Ze=Math.min(Ze,ne.childNodes.length-1),Y?ne.insertBefore(kt,ne.childNodes[Ze]):vs.insertAfter(kt,ne.childNodes[Ze])):ne.appendChild(kt),ne=kt,Ze=0}T[Y?"startContainer":"endContainer"]=ne,T[Y?"startOffset":"endOffset"]=Ze};return H(!0),S.collapsed||H(),T},nc=S=>{const T=Y=>{const ne=zt=>{var jt;let bt=(jt=zt.parentNode)===null||jt===void 0?void 0:jt.firstChild,it=0;for(;bt;){if(bt===zt)return it;(!ni(bt)||bt.getAttribute("data-mce-type")!=="bookmark")&&it++,bt=bt.nextSibling}return-1};let Ze=S[Y?"startContainer":"endContainer"],kt=S[Y?"startOffset":"endOffset"];if(Ze){if(ni(Ze)&&Ze.parentNode){const zt=Ze;kt=ne(Ze),Ze=Ze.parentNode,vs.remove(zt),!Ze.hasChildNodes()&&vs.isBlock(Ze)&&Ze.appendChild(vs.create("br"))}S[Y?"startContainer":"endContainer"]=Ze,S[Y?"startOffset":"endOffset"]=kt}};T(!0),T();const H=vs.createRng();return H.setStart(S.startContainer,S.startOffset),S.endContainer&&H.setEnd(S.endContainer,S.endOffset),Dd(H)},Bd=S=>{switch(S){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Wc=(S,T,H)=>{const Y=H["list-style-type"]?H["list-style-type"]:null;S.setStyle(T,"list-style-type",Y)},Nd=(S,T)=>{sr.each(T,(H,Y)=>{S.setAttribute(Y,H)})},Ld=(S,T,H)=>{Nd(T,H["list-attributes"]),sr.each(S.select("li",T),Y=>{Nd(Y,H["list-item-attributes"])})},$c=(S,T,H)=>{Wc(S,T,H),Ld(S,T,H)},Vr=(S,T,H)=>{sr.each(H,Y=>S.setStyle(T,Y,""))},_r=(S,T)=>Ut(T)&&!Od(T,S.schema.getBlockElements()),Ru=(S,T,H,Y)=>{let ne=T[H?"startContainer":"endContainer"];const Ze=T[H?"startOffset":"endOffset"];ni(ne)&&(ne=ne.childNodes[Math.min(Ze,ne.childNodes.length-1)]||ne),!H&&Fn(ne.nextSibling)&&(ne=ne.nextSibling);const kt=jt=>{for(;!S.dom.isBlock(jt)&&jt.parentNode&&Y!==jt;)jt=jt.parentNode;return jt},zt=(jt,bt)=>{var it;const $n=new Hc(jt,kt(jt)),rn=bt?"next":"prev";let jc;for(;jc=$n[rn]();)if(!(Fs(S,jc)||Jg(jc.textContent)||((it=jc.textContent)===null||it===void 0?void 0:it.length)===0))return qe.some(jc);return qe.none()};if(H&&wr(ne))if(Jg(ne.textContent))ne=zt(ne,!1).getOr(ne);else for(ne.parentNode!==null&&_r(S,ne.parentNode)&&(ne=ne.parentNode);ne.previousSibling!==null&&(_r(S,ne.previousSibling)||wr(ne.previousSibling));)ne=ne.previousSibling;if(!H&&wr(ne))if(Jg(ne.textContent))ne=zt(ne,!0).getOr(ne);else for(ne.parentNode!==null&&_r(S,ne.parentNode)&&(ne=ne.parentNode);ne.nextSibling!==null&&(_r(S,ne.nextSibling)||wr(ne.nextSibling));)ne=ne.nextSibling;for(;ne.parentNode!==Y;){const jt=ne.parentNode;if(ns(S,ne)||/^(TD|TH)$/.test(jt.nodeName))return ne;ne=jt}return ne},Fm=(S,T,H)=>{const Y=[],ne=S.dom,Ze=Ru(S,T,!0,H),kt=Ru(S,T,!1,H);let zt;const jt=[];for(let bt=Ze;bt&&(jt.push(bt),bt!==kt);bt=bt.nextSibling);return sr.each(jt,bt=>{var it;if(ns(S,bt)){Y.push(bt),zt=null;return}if(ne.isBlock(bt)||Fn(bt)){Fn(bt)&&ne.remove(bt),zt=null;return}const $n=bt.nextSibling;if(zm.isBookmarkNode(bt)&&(uo($n)||ns(S,$n)||!$n&&bt.parentNode===H)){zt=null;return}zt||(zt=ne.create("p"),(it=bt.parentNode)===null||it===void 0||it.insertBefore(zt,bt),Y.push(zt)),zt.appendChild(bt)}),Y},Bu=(S,T,H)=>{const Y=S.getStyle(T,"list-style-type");let ne=H?H["list-style-type"]:"";return ne=ne===null?"":ne,Y===ne},xl=(S,T)=>{const H=S.selection.getStart(!0),Y=Ru(S,T,!0,S.getBody());return Bs(me.fromDom(Y),me.fromDom(T.commonAncestorContainer))?T.commonAncestorContainer:H},ca=(S,T,H)=>{const Y=S.selection.getRng();let ne="LI";const Ze=ia(S,xl(S,Y)),kt=S.dom;if(kt.getContentEditable(S.selection.getNode())==="false")return;T=T.toUpperCase(),T==="DL"&&(ne="DT");const zt=yl(Y),jt=nr(Fm(S,Y,Ze),S.dom.isEditable);sr.each(jt,bt=>{let it;const $n=bt.previousSibling,rn=bt.parentNode;Di(rn)||($n&&uo($n)&&$n.nodeName===T&&Bu(kt,$n,H)?(it=$n,bt=kt.rename(bt,ne),$n.appendChild(bt)):(it=kt.create(T),rn.insertBefore(it,bt),it.appendChild(bt),bt=kt.rename(bt,ne)),Vr(kt,bt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$c(kt,it,H),Hd(S.dom,it))}),S.selection.setRng(nc(zt))},Vm=(S,T)=>uo(S)&&S.nodeName===(T==null?void 0:T.nodeName),jp=(S,T,H)=>{const Y=S.getStyle(T,"list-style-type",!0),ne=S.getStyle(H,"list-style-type",!0);return Y===ne},Gp=(S,T)=>S.className===T.className,Ni=(S,T,H)=>Vm(T,H)&&jp(S,T,H)&&Gp(T,H),Hd=(S,T)=>{let H,Y=T.nextSibling;if(Ni(S,T,Y)){const ne=Y;for(;H=ne.firstChild;)T.appendChild(H);S.remove(ne)}if(Y=T.previousSibling,Ni(S,T,Y)){const ne=Y;for(;H=ne.lastChild;)T.insertBefore(H,T.firstChild);S.remove(ne)}},Kp=(S,T,H,Y)=>{if(T.nodeName!==H){const ne=S.dom.rename(T,H);$c(S.dom,ne,Y),Cn(S,Bd(H),ne)}else $c(S.dom,T,Y),Cn(S,Bd(H),T)},F1=(S,T,H,Y)=>{if(T.classList.forEach((ne,Ze,kt)=>{ne.startsWith("tox-")&&(kt.remove(ne),kt.length===0&&T.removeAttribute("class"))}),T.nodeName!==H){const ne=S.dom.rename(T,H);$c(S.dom,ne,Y),Cn(S,Bd(H),ne)}else $c(S.dom,T,Y),Cn(S,Bd(H),T)},Gv=(S,T,H,Y,ne)=>{const Ze=uo(T);if(Ze&&T.nodeName===Y&&!Zm(ne)&&!Wo(T))yo(S);else{ca(S,Y,ne);const kt=yl(S.selection.getRng()),zt=Ze?[T,...H]:H,jt=Ze&&Wo(T)?F1:Kp;sr.each(zt,bt=>{jt(S,bt,Y,ne)}),S.selection.setRng(nc(kt))}},Zm=S=>"list-style-type"in S,Kv=(S,T,H,Y)=>{if(T!==S.getBody())if(T)if(T.nodeName===H&&!Zm(Y)&&!Wo(T))yo(S);else{const ne=yl(S.selection.getRng());Wo(T)&&T.classList.forEach((kt,zt,jt)=>{kt.startsWith("tox-")&&(jt.remove(kt),jt.length===0&&T.removeAttribute("class"))}),$c(S.dom,T,Y);const Ze=S.dom.rename(T,H);Hd(S.dom,Ze),S.selection.setRng(nc(ne)),ca(S,H,Y),Cn(S,Bd(H),Ze)}else ca(S,H,Y),Cn(S,Bd(H),T)},rc=(S,T,H)=>{const Y=N(S);if(Va(S,Y))return;const ne=ae(S),Ze=kn(H)?H:{};ne.length>0?Gv(S,Y,ne,T,Ze):Kv(S,Y,T,Ze)},Jn=rr.DOM,Nn=(S,T)=>{const H=T.parentElement;if(H&&H.nodeName==="LI"&&H.firstChild===T){const Y=H.previousSibling;Y&&Y.nodeName==="LI"?(Y.appendChild(T),Mi(S,H)&&Jn.remove(H)):Jn.setStyle(H,"listStyleType","none")}if(uo(H)){const Y=H.previousSibling;Y&&Y.nodeName==="LI"&&Y.appendChild(T)}},rs=(S,T)=>{const H=sr.grep(S.select("ol,ul",T));sr.each(H,Y=>{Nn(S,Y)})},eh=(S,T,H,Y)=>{let ne=T.startContainer;const Ze=T.startOffset;if(wr(ne)&&(H?Ze<ne.data.length:Ze>0))return ne;const kt=S.schema.getNonEmptyElements();ni(ne)&&(ne=As.getNode(ne,Ze));const zt=new Hc(ne,Y);H&&km(S.dom,ne)&&zt.next();const jt=H?zt.next.bind(zt):zt.prev2.bind(zt);for(;ne=jt();)if(ne.nodeName==="LI"&&!ne.hasChildNodes()||kt[ne.nodeName]||wr(ne)&&ne.data.length>0)return ne;return null},V1=(S,T)=>{const H=T.childNodes;return H.length===1&&!uo(H[0])&&S.isBlock(H[0])},bs=S=>qe.from(S).map(me.fromDom).filter(xn).exists(T=>ts(T)&&!Rn(["details"],ti(T))),Um=(S,T)=>{V1(S,T)&&bs(T.firstChild)&&S.remove(T.firstChild,!0)},Id=(S,T,H)=>{let Y;const ne=V1(S,H)?H.firstChild:H;if(Um(S,T),!Mi(S,T,!0))for(;Y=T.firstChild;)ne.appendChild(Y)},Li=(S,T,H)=>{let Y;const ne=T.parentNode;if(!_m(S,T)||!_m(S,H))return;uo(H.lastChild)&&(Y=H.lastChild),ne===H.lastChild&&Fn(ne.previousSibling)&&S.remove(ne.previousSibling);const Ze=H.lastChild;Ze&&Fn(Ze)&&T.hasChildNodes()&&S.remove(Ze),Mi(S,H,!0)&&Ke(me.fromDom(H)),Id(S,T,H),Y&&H.appendChild(Y);const kt=Et(me.fromDom(H),me.fromDom(T))?S.getParents(T,uo,H):[];S.remove(T),te(kt,zt=>{Mi(S,zt)&&zt!==S.getRoot()&&S.remove(zt)})},Wt=(S,T,H)=>{Ke(me.fromDom(H)),Li(S.dom,T,H),S.selection.setCursorLocation(H,0)},Er=(S,T,H,Y)=>{const ne=S.dom;if(ne.isEmpty(Y))Wt(S,H,Y);else{const Ze=yl(T);Li(ne,H,Y),S.selection.setRng(nc(Ze))}},Wm=(S,T,H,Y)=>{const ne=yl(T);Li(S.dom,H,Y);const Ze=nc(ne);S.selection.setRng(Ze)},$m=(S,T)=>{const H=S.dom,Y=S.selection,ne=Y.getStart(),Ze=vo(S,ne),kt=H.getParent(Y.getStart(),"LI",Ze);if(kt){const zt=kt.parentElement;if(zt===S.getBody()&&Mi(H,zt))return!0;const jt=Dd(Y.getRng()),bt=H.getParent(eh(S,jt,T,Ze),"LI",Ze),it=bt&&(T?H.isChildOf(kt,bt):H.isChildOf(bt,kt));if(bt&&bt!==kt&&!it)return S.undoManager.transact(()=>{T?Er(S,jt,bt,kt):Pc(kt)?Qg(S):Wm(S,jt,kt,bt)}),!0;if(it&&!T&&bt!==kt)return S.undoManager.transact(()=>{if(jt.commonAncestorContainer.parentElement){const $n=yl(jt),rn=jt.commonAncestorContainer.parentElement;Id(H,jt.commonAncestorContainer.parentElement,bt),rn.remove();const jc=nc($n);S.selection.setRng(jc)}}),!0;if(!bt&&!T&&jt.startOffset===0&&jt.endOffset===0)return S.undoManager.transact(()=>{yo(S)}),!0}return!1},th=(S,T,H)=>{const Y=S.getParent(T.parentNode,S.isBlock,H);S.remove(T),Y&&S.isEmpty(Y)&&S.remove(Y)},Z1=(S,T)=>{const H=S.dom,Y=S.selection.getStart(),ne=vo(S,Y),Ze=H.getParent(Y,H.isBlock,ne);if(Ze&&H.isEmpty(Ze)){const kt=Dd(S.selection.getRng()),zt=H.getParent(eh(S,kt,T,ne),"LI",ne);if(zt){const jt=rn=>Rn(["td","th","caption"],ti(rn)),bt=rn=>rn.dom===ne,it=es(me.fromDom(zt),jt,bt),$n=es(me.fromDom(kt.startContainer),jt,bt);return Ie(it,$n,cr)?(S.undoManager.transact(()=>{const rn=zt.parentNode;th(H,Ze,ne),Hd(H,rn),S.selection.select(zt,!0),S.selection.collapse(T)}),!0):!1}}return!1},Nu=(S,T)=>$m(S,T)||Z1(S,T),Lu=S=>{const T=S.selection.getStart(),H=vo(S,T);return S.dom.getParent(T,"LI,DT,DD",H)||Tt(S).length>0},Hi=S=>Lu(S)?(S.undoManager.transact(()=>{S.execCommand("Delete"),rs(S.dom,S.getBody())}),!0):!1,Ws=(S,T)=>{const H=S.selection;return!Va(S,H.getNode())&&(H.isCollapsed()?Nu(S,T):Hi(S))},To=S=>{S.on("ExecCommand",T=>{const H=T.command.toLowerCase();(H==="delete"||H==="forwarddelete")&&Lu(S)&&rs(S.dom,S.getBody())}),S.on("keydown",T=>{T.keyCode===fl.BACKSPACE?Ws(S,!1)&&T.preventDefault():T.keyCode===fl.DELETE&&Ws(S,!0)&&T.preventDefault()})},da=S=>({backspaceDelete:T=>{Ws(S,T)}}),Zr=(S,T)=>{const H=N(S);H===null||Va(S,H)||S.undoManager.transact(()=>{kn(T.styles)&&S.dom.setStyles(H,T.styles),kn(T.attrs)&&Kl(T.attrs,(Y,ne)=>S.dom.setAttrib(H,ne,Y))})},jm=S=>{const T=Ot(ec(S).split("")),H=Oe(T,(Y,ne)=>{const Ze=Y.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,ne)*Ze});return Be(H,(Y,ne)=>Y+ne,0)},Ur=S=>{if(S--,S<0)return"";{const T=S%26,H=Math.floor(S/26),Y=Ur(H),ne=String.fromCharCode("A".charCodeAt(0)+T);return Y+ne}},sc=S=>/^[A-Z]+$/.test(S),Cl=S=>/^[a-z]+$/.test(S),ao=S=>/^[0-9]+$/.test(S),Xp=S=>ao(S)?2:sc(S)?0:Cl(S)?1:Am(S)?3:4,Ii=S=>{switch(Xp(S)){case 2:return qe.some({listStyleType:qe.none(),start:S});case 0:return qe.some({listStyleType:qe.some("upper-alpha"),start:jm(S).toString()});case 1:return qe.some({listStyleType:qe.some("lower-alpha"),start:jm(S).toString()});case 3:return qe.some({listStyleType:qe.none(),start:""});case 4:return qe.none()}},Pi=S=>{const T=parseInt(S.start,10);return lr(S.listStyleType,"upper-alpha")?Ur(T):lr(S.listStyleType,"lower-alpha")?Ur(T).toLowerCase():S.start},ac=S=>{const T=N(S);!Vo(T)||Va(S,T)||S.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Pi({start:S.dom.getAttrib(T,"start","1"),listStyleType:qe.from(S.dom.getStyle(T,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:H=>{const Y=H.getData();Ii(Y.start).each(ne=>{S.execCommand("mceListUpdate",!1,{attrs:{start:ne.start==="1"?"":ne.start},styles:{"list-style-type":ne.listStyleType.getOr("")}})}),H.close()}})},$o=(S,T)=>()=>{const H=N(S);return Ut(H)&&H.nodeName===T},qt=S=>{S.addCommand("mceListProps",()=>{ac(S)})},qp=S=>{S.on("BeforeExecCommand",T=>{const H=T.command.toLowerCase();H==="indent"?Au(S):H==="outdent"&&Qg(S)}),S.addCommand("InsertUnorderedList",(T,H)=>{rc(S,"UL",H)}),S.addCommand("InsertOrderedList",(T,H)=>{rc(S,"OL",H)}),S.addCommand("InsertDefinitionList",(T,H)=>{rc(S,"DL",H)}),S.addCommand("RemoveList",()=>{yo(S)}),qt(S),S.addCommand("mceListUpdate",(T,H)=>{kn(H)&&Zr(S,H)}),S.addQueryStateHandler("InsertUnorderedList",$o(S,"UL")),S.addQueryStateHandler("InsertOrderedList",$o(S,"OL")),S.addQueryStateHandler("InsertDefinitionList",$o(S,"DL"))};var oh=tinymce.util.Tools.resolve("tinymce.html.Node");const Gm=S=>S.type===3,Hu=S=>S.length===0,nh=S=>{const T=(ne,Ze)=>{const kt=oh.create("li");te(ne,zt=>kt.append(zt)),Ze?S.insert(kt,Ze,!0):S.append(kt)},H=(ne,Ze)=>Gm(Ze)?[...ne,Ze]:!Hu(ne)&&!Gm(Ze)?(T(ne,Ze),[]):ne,Y=Be(S.children(),H,[]);Hu(Y)||T(Y)},Xv=S=>{S.on("PreInit",()=>{const{parser:T}=S;T.addNodeFilter("ul,ol",H=>te(H,nh))})},Iu=S=>{S.on("keydown",T=>{T.keyCode!==fl.TAB||fl.metaKeyPressed(T)||S.undoManager.transact(()=>{(T.shiftKey?Qg(S):Au(S))&&T.preventDefault()})})},Yp=S=>{ku(S)&&Iu(S),To(S)},Qp=(S,T)=>H=>{const Y=ne=>{H.setActive(bl(ne.parents,T)),H.setEnabled(!Va(S,ne.element)&&S.selection.isEditable())};return H.setEnabled(S.selection.isEditable()),Md(S,Y)},qv=S=>{const T=H=>()=>S.execCommand(H);S.hasPlugin("advlist")||(S.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:T("InsertOrderedList"),onSetup:Qp(S,"OL")}),S.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:T("InsertUnorderedList"),onSetup:Qp(S,"UL")}))},U1=(S,T)=>H=>Md(S,Y=>H.setEnabled(bl(Y.parents,T)&&!Va(S,Y.element))),wl=S=>{const T={text:"List properties...",icon:"ordered-list",onAction:()=>S.execCommand("mceListProps"),onSetup:U1(S,"OL")};S.ui.registry.addMenuItem("listprops",T),S.ui.registry.addContextMenu("lists",{update:H=>{const Y=N(S,H);return Vo(Y)?["listprops"]:[]}})};var zi=()=>{Ct.add("lists",S=>(vl(S),Xv(S),S.hasPlugin("rtc",!0)?qt(S):(Yp(S),qp(S)),qv(S),wl(S),da(S)))};zi()})();(function(){var Ct=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mo=Object.getPrototypeOf,ho=(N,V,W)=>{var ae;return W(N,V.prototype)?!0:((ae=N.constructor)===null||ae===void 0?void 0:ae.name)===V.name},jo=N=>{const V=typeof N;return N===null?"null":V==="object"&&Array.isArray(N)?"array":V==="object"&&ho(N,String,(W,ae)=>ae.isPrototypeOf(W))?"string":V},Ro=N=>V=>jo(V)===N,Zo=N=>V=>typeof V===N,kn=N=>V=>N===V,Pt=(N,V)=>na(N)&&ho(N,V,(W,ae)=>Mo(W)===ae),Jt=Ro("string"),na=Ro("object"),Ut=N=>Pt(N,Object),Ao=Ro("array"),gr=kn(null),Mn=Zo("boolean"),An=N=>N==null,bn=N=>!An(N),ft=Zo("function"),Os=Zo("number"),_n=(N,V)=>{if(Ao(N)){for(let W=0,ae=N.length;W<ae;++W)if(!V(N[W]))return!1;return!0}return!1},J=()=>{};class qe{constructor(V,W){this.tag=V,this.value=W}static some(V){return new qe(!0,V)}static none(){return qe.singletonNone}fold(V,W){return this.tag?W(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?qe.some(V(this.value)):qe.none()}bind(V){return this.tag?V(this.value):qe.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:qe.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return bn(V)?qe.some(V):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const ul=Object.keys,Oo=Object.hasOwnProperty,se=(N,V)=>{const W=ul(N);for(let ae=0,ut=W.length;ae<ut;ae++){const Tt=W[ae],Zn=N[Tt];V(Zn,Tt)}},so=N=>(V,W)=>{N[W]=V},Rn=(N,V,W,ae)=>{se(N,(ut,Tt)=>{(V(ut,Tt)?W:ae)(ut,Tt)})},io=(N,V)=>{const W={};return Rn(N,V,so(W),J),W},Oe=(N,V)=>Oo.call(N,V),te=(N,V)=>Oe(N,V)&&N[V]!==void 0&&N[V]!==null,nr=Array.prototype.push,Ge=N=>{const V=[];for(let W=0,ae=N.length;W<ae;++W){if(!Ao(N[W]))throw new Error("Arr.flatten item "+W+" was not an array, input: "+N);nr.apply(V,N[W])}return V},Be=(N,V)=>V>=0&&V<N.length?qe.some(N[V]):qe.none(),E=N=>Be(N,0),ro=(N,V)=>{for(let W=0;W<N.length;W++){const ae=V(N[W],W);if(ae.isSome())return ae}return qe.none()};typeof window<"u"||Function("return this;")();const Pe=(N,V,W)=>{if(Jt(W)||Mn(W)||Os(W))N.setAttribute(V,W+"");else throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",W,":: Element ",N),new Error("Attribute value was not simple")},fo=(N,V,W)=>{Pe(N.dom,V,W)},Ot=(N,V)=>{N.dom.removeAttribute(V)},Le=(N,V)=>{const W=(V||document).createElement("div");if(W.innerHTML=N,!W.hasChildNodes()||W.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,N),new Error(ae)}return Xo(W.childNodes[0])},zo=(N,V)=>{const W=(V||document).createElement(N);return Xo(W)},xr=(N,V)=>{const W=(V||document).createTextNode(N);return Xo(W)},Xo=N=>{if(N==null)throw new Error("Node cannot be null or undefined");return{dom:N}},lr={fromHtml:Le,fromTag:zo,fromText:xr,fromDom:Xo,fromPoint:(N,V,W)=>qe.from(N.dom.elementFromPoint(V,W)).map(Xo)};var Ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),at=tinymce.util.Tools.resolve("tinymce.util.URI");const I=N=>N.length>0,hs=N=>V=>V.options.get(N),qo=N=>{const V=N.options.register;V("image_dimensions",{processor:"boolean",default:!0}),V("image_advtab",{processor:"boolean",default:!1}),V("image_uploadtab",{processor:"boolean",default:!0}),V("image_prepend_url",{processor:"string",default:""}),V("image_class_list",{processor:"object[]"}),V("image_description",{processor:"boolean",default:!0}),V("image_title",{processor:"boolean",default:!1}),V("image_caption",{processor:"boolean",default:!1}),V("image_list",{processor:W=>{const ae=W===!1||Jt(W)||_n(W,na)||ft(W);return ae?{value:W,valid:ae}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Bn=hs("image_dimensions"),on=hs("image_advtab"),Zp=hs("image_uploadtab"),It=hs("image_prepend_url"),nn=hs("image_class_list"),Bt=hs("image_description"),me=hs("image_title"),ei=hs("image_caption"),cr=hs("image_list"),Et=hs("a11y_advanced_options"),ml=hs("automatic_uploads"),En=N=>I(N.options.get("images_upload_url")),xu=N=>bn(N.options.get("images_upload_handler")),On=(N,V)=>Math.max(parseInt(N,10),parseInt(V,10)),Ts=N=>new Promise(V=>{const W=document.createElement("img"),ae=Tt=>{W.onload=W.onerror=null,W.parentNode&&W.parentNode.removeChild(W),V(Tt)};W.onload=()=>{const Tt=On(W.width,W.clientWidth),Zn=On(W.height,W.clientHeight),vo={width:Tt,height:Zn};ae(Promise.resolve(vo))},W.onerror=()=>{ae(Promise.reject(`Failed to get image dimensions for: ${N}`))};const ut=W.style;ut.visibility="hidden",ut.position="fixed",ut.bottom=ut.left="0px",ut.width=ut.height="auto",document.body.appendChild(W),W.src=N}),jl=N=>(N&&(N=N.replace(/px$/,"")),N),Ds=N=>(N.length>0&&/^[0-9]+$/.test(N)&&(N+="px"),N),hr=N=>{if(N.margin){const V=String(N.margin).split(" ");switch(V.length){case 1:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[0],N["margin-bottom"]=N["margin-bottom"]||V[0],N["margin-left"]=N["margin-left"]||V[0];break;case 2:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[0],N["margin-left"]=N["margin-left"]||V[1];break;case 3:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[2],N["margin-left"]=N["margin-left"]||V[1];break;case 4:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[2],N["margin-left"]=N["margin-left"]||V[3]}delete N.margin}return N},yn=(N,V)=>{const W=cr(N);Jt(W)?fetch(W).then(ae=>{ae.ok&&ae.json().then(V)}):ft(W)?W(V):V(W)},ti=(N,V,W)=>{const ae=()=>{W.onload=W.onerror=null,N.selection&&(N.selection.select(W),N.nodeChanged())};W.onload=()=>{!V.width&&!V.height&&Bn(N)&&N.dom.setAttribs(W,{width:String(W.clientWidth),height:String(W.clientHeight)}),ae()},W.onerror=ae},Xn=N=>new Promise((V,W)=>{const ae=new FileReader;ae.onload=()=>{V(ae.result)},ae.onerror=()=>{var ut;W((ut=ae.error)===null||ut===void 0?void 0:ut.message)},ae.readAsDataURL(N)}),Yo=N=>N.nodeName==="IMG"&&(N.hasAttribute("data-mce-object")||N.hasAttribute("data-mce-placeholder")),Nc=(N,V)=>{const W=N.options.get;return at.isDomSafe(V,"img",{allow_html_data_urls:W("allow_html_data_urls"),allow_script_urls:W("allow_script_urls"),allow_svg_data_urls:W("allow_svg_data_urls")})},xn=Ie.DOM,Ia=N=>N.style.marginLeft&&N.style.marginRight&&N.style.marginLeft===N.style.marginRight?jl(N.style.marginLeft):"",ps=N=>N.style.marginTop&&N.style.marginBottom&&N.style.marginTop===N.style.marginBottom?jl(N.style.marginTop):"",gl=N=>N.style.borderWidth?jl(N.style.borderWidth):"",Si=(N,V)=>{var W;return N.hasAttribute(V)&&(W=N.getAttribute(V))!==null&&W!==void 0?W:""},Cr=N=>N.parentNode!==null&&N.parentNode.nodeName==="FIGURE",hl=(N,V,W)=>{W===""||W===null?N.removeAttribute(V):N.setAttribute(V,W)},ot=N=>{const V=xn.create("figure",{class:"image"});xn.insertAfter(V,N),V.appendChild(N),V.appendChild(xn.create("figcaption",{contentEditable:"true"},"Caption")),V.contentEditable="false"},bo=N=>{const V=N.parentNode;bn(V)&&(xn.insertAfter(N,V),xn.remove(V))},ra=N=>{Cr(N)?bo(N):ot(N)},Ms=(N,V)=>{const W=N.getAttribute("style"),ae=V(W!==null?W:"");ae.length>0?(N.setAttribute("style",ae),N.setAttribute("data-mce-style",ae)):N.removeAttribute("style")},ki=(N,V)=>(W,ae,ut)=>{const Tt=W.style;Tt[ae]?(Tt[ae]=Ds(ut),Ms(W,V)):hl(W,ae,ut)},_i=(N,V)=>N.style[V]?jl(N.style[V]):Si(N,V),Uo=(N,V)=>{const W=Ds(V);N.style.marginLeft=W,N.style.marginRight=W},Pa=(N,V)=>{const W=Ds(V);N.style.marginTop=W,N.style.marginBottom=W},Gl=(N,V)=>{const W=Ds(V);N.style.borderWidth=W},Go=(N,V)=>{N.style.borderStyle=V},At=N=>{var V;return(V=N.style.borderStyle)!==null&&V!==void 0?V:""},Jr=N=>bn(N)&&N.nodeName==="FIGURE",pl=N=>N.nodeName==="IMG",Lc=N=>xn.getAttrib(N,"alt").length===0&&xn.getAttrib(N,"role")==="presentation",Ed=N=>Lc(N)?"":Si(N,"alt"),es=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Pr=(N,V)=>{var W;const ae=document.createElement("img");return hl(ae,"style",V.style),(Ia(ae)||V.hspace!=="")&&Uo(ae,V.hspace),(ps(ae)||V.vspace!=="")&&Pa(ae,V.vspace),(gl(ae)||V.border!=="")&&Gl(ae,V.border),(At(ae)||V.borderStyle!=="")&&Go(ae,V.borderStyle),N((W=ae.getAttribute("style"))!==null&&W!==void 0?W:"")},qn=(N,V)=>{const W=document.createElement("img");if(Ei(N,{...V,caption:!1},W),za(W,V.alt,V.isDecorative),V.caption){const ae=xn.create("figure",{class:"image"});return ae.appendChild(W),ae.appendChild(xn.create("figcaption",{contentEditable:"true"},"Caption")),ae.contentEditable="false",ae}else return W},wa=(N,V)=>({src:Si(V,"src"),alt:Ed(V),title:Si(V,"title"),width:_i(V,"width"),height:_i(V,"height"),class:Si(V,"class"),style:N(Si(V,"style")),caption:Cr(V),hspace:Ia(V),vspace:ps(V),border:gl(V),borderStyle:At(V),isDecorative:Lc(V)}),ts=(N,V,W,ae,ut)=>{W[ae]!==V[ae]&&ut(N,ae,String(W[ae]))},za=(N,V,W)=>{if(W){xn.setAttrib(N,"role","presentation");const ae=lr.fromDom(N);fo(ae,"alt","")}else{if(gr(V)){const ae=lr.fromDom(N);Ot(ae,"alt")}else{const ae=lr.fromDom(N);fo(ae,"alt",V)}xn.getAttrib(N,"role")==="presentation"&&xn.setAttrib(N,"role","")}},sa=(N,V,W)=>{(W.alt!==V.alt||W.isDecorative!==V.isDecorative)&&za(N,W.alt,W.isDecorative)},Ko=(N,V)=>(W,ae,ut)=>{N(W,ut),Ms(W,V)},Ei=(N,V,W)=>{const ae=wa(N,W);ts(W,ae,V,"caption",(ut,Tt,Zn)=>ra(ut)),ts(W,ae,V,"src",hl),ts(W,ae,V,"title",hl),ts(W,ae,V,"width",ki("width",N)),ts(W,ae,V,"height",ki("height",N)),ts(W,ae,V,"class",hl),ts(W,ae,V,"style",Ko((ut,Tt)=>hl(ut,"style",Tt),N)),ts(W,ae,V,"hspace",Ko(Uo,N)),ts(W,ae,V,"vspace",Ko(Pa,N)),ts(W,ae,V,"border",Ko(Gl,N)),ts(W,ae,V,"borderStyle",Ko(Go,N)),sa(W,ae,V)},os=(N,V)=>{const W=N.dom.styles.parse(V),ae=hr(W),ut=N.dom.styles.parse(N.dom.styles.serialize(ae));return N.dom.styles.serialize(ut)},Cu=N=>{const V=N.selection.getNode(),W=N.dom.getParent(V,"figure.image");return W?N.dom.select("img",W)[0]:V&&(V.nodeName!=="IMG"||Yo(V))?null:V},Oi=(N,V)=>{var W;const ae=N.dom,ut=io(N.schema.getTextBlockElements(),(Zn,vo)=>!N.schema.isValidChild(vo,"figure")),Tt=ae.getParent(V.parentNode,Zn=>te(ut,Zn.nodeName),N.getBody());return Tt&&(W=ae.split(Tt,V))!==null&&W!==void 0?W:V},Ke=N=>{const V=Cu(N);return V?wa(W=>os(N,W),V):es()},Qe=(N,V)=>{const W=qn(ut=>os(N,ut),V);N.dom.setAttrib(W,"data-mce-id","__mcenew"),N.focus(),N.selection.setContent(W.outerHTML);const ae=N.dom.select('*[data-mce-id="__mcenew"]')[0];if(N.dom.setAttrib(ae,"data-mce-id",null),Jr(ae)){const ut=Oi(N,ae);N.selection.select(ut)}else N.selection.select(ae)},As=(N,V)=>{N.dom.setAttrib(V,"src",V.getAttribute("src"))},Hc=(N,V)=>{if(V){const W=N.dom.is(V.parentNode,"figure.image")?V.parentNode:V;N.dom.remove(W),N.focus(),N.nodeChanged(),N.dom.isEmpty(N.getBody())&&(N.setContent(""),N.selection.setCursorLocation())}},fl=(N,V)=>{const W=Cu(N);if(W)if(Ei(ae=>os(N,ae),V,W),As(N,W),Jr(W.parentNode)){const ae=W.parentNode;Oi(N,ae),N.selection.select(W.parentNode)}else N.selection.select(W),ti(N,V,W)},Sm=(N,V)=>{const W=V.src;return{...V,src:Nc(N,W)?W:""}},Qo=(N,V)=>{const W=Cu(N);if(W){const ae={...wa(Tt=>os(N,Tt),W),...V},ut=Sm(N,ae);ae.src?fl(N,ut):Hc(N,W)}else V.src&&Qe(N,{...es(),...V})},Kl=(N=>(...V)=>{if(V.length===0)throw new Error("Can't merge zero objects");const W={};for(let ae=0;ae<V.length;ae++){const ut=V[ae];for(const Tt in ut)Oe(ut,Tt)&&(W[Tt]=N(W[Tt],ut[Tt]))}return W})((N,V)=>Ut(N)&&Ut(V)?Kl(N,V):V);var Up=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ic=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xl=N=>Jt(N.value)?N.value:"",wu=N=>Jt(N.text)?N.text:Jt(N.title)?N.title:"",Yn=(N,V)=>{const W=[];return Ic.each(N,ae=>{const ut=wu(ae);if(ae.menu!==void 0){const Tt=Yn(ae.menu,V);W.push({text:ut,items:Tt})}else{const Tt=V(ae);W.push({text:ut,value:Tt})}}),W},Bo=(N=Xl)=>V=>V?qe.from(V).map(W=>Yn(W,N)):qe.none(),Su=N=>Bo(Xl)(N),ql=N=>Oe(N,"items"),Ti=(N,V)=>ro(N,W=>ql(W)?Ti(W.items,V):W.value===V?qe.some(W):qe.none()),zn={sanitizer:Bo,sanitize:Su,findEntry:(N,V)=>N.bind(W=>Ti(W,V))},rr={makeTab:N=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},sr=N=>{const V=zn.sanitizer(Wo=>N.convertURL(Wo.value||Wo.url||"","src")),W=new Promise(Wo=>{yn(N,bl=>{Wo(V(bl).map(Mm=>Ge([[{text:"None",value:""}],Mm])))})}),ae=zn.sanitize(nn(N)),ut=on(N),Tt=Zp(N),Zn=En(N),vo=xu(N),zc=Ke(N),ia=Bt(N),Vs=me(N),ve=Bn(N),Rs=ei(N),Zs=Et(N),Sr=ml(N),Qn=qe.some(It(N)).filter(Wo=>Jt(Wo)&&Wo.length>0);return W.then(Wo=>({image:zc,imageList:Wo,classList:ae,hasAdvTab:ut,hasUploadTab:Tt,hasUploadUrl:Zn,hasUploadHandler:vo,hasDescription:ia,hasImageTitle:Vs,hasDimensions:ve,hasImageCaption:Rs,prependURL:Qn,hasAccessibilityOptions:Zs,automaticUploads:Sr}))},Yl=N=>{const V={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},W=N.imageList.map(Vs=>({name:"images",type:"listbox",label:"Image list",items:Vs})),ae={name:"alt",type:"input",label:"Alternative description",enabled:!(N.hasAccessibilityOptions&&N.image.isDecorative)},ut={name:"title",type:"input",label:"Image title"},Tt={name:"dimensions",type:"sizeinput"},Zn={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},vo=N.classList.map(Vs=>({name:"classes",type:"listbox",label:"Class",items:Vs})),zc={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},ia=Vs=>Vs?{type:"grid",columns:2}:{type:"panel"};return Ge([[V],W.toArray(),N.hasAccessibilityOptions&&N.hasDescription?[Zn]:[],N.hasDescription?[ae]:[],N.hasImageTitle?[ut]:[],N.hasDimensions?[Tt]:[],[{...ia(N.classList.isSome()&&N.hasImageCaption),items:Ge([vo.toArray(),N.hasImageCaption?[zc]:[]])}]])},oi={makeTab:N=>({title:"General",name:"general",items:Yl(N)}),makeItems:Yl},wr={makeTab:N=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ni=N=>({prevImage:zn.findEntry(N.imageList,N.image.src),prevAlt:N.image.alt,open:!0}),uo=N=>({src:{value:N.src,meta:{}},images:N.src,alt:N.alt,title:N.title,dimensions:{width:N.width,height:N.height},classes:N.class,caption:N.caption,style:N.style,vspace:N.vspace,border:N.border,hspace:N.hspace,borderstyle:N.borderStyle,fileinput:[],isDecorative:N.isDecorative}),Gg=(N,V)=>({src:N.src.value,alt:(N.alt===null||N.alt.length===0)&&V?null:N.alt,title:N.title,width:N.dimensions.width,height:N.dimensions.height,class:N.classes,style:N.style,caption:N.caption,hspace:N.hspace,vspace:N.vspace,border:N.border,borderStyle:N.borderstyle,isDecorative:N.isDecorative}),Vo=(N,V)=>/^(?:[a-zA-Z]+:)?\/\//.test(V)?qe.none():N.prependURL.bind(W=>V.substring(0,W.length)!==W?qe.some(W+V):qe.none()),Di=(N,V)=>{const W=V.getData();Vo(N,W.src.value).each(ae=>{V.setData({src:{value:ae,meta:W.src.meta}})})},pr=(N,V,W)=>{N.hasDescription&&Jt(W.alt)&&(V.alt=W.alt),N.hasAccessibilityOptions&&(V.isDecorative=W.isDecorative||V.isDecorative||!1),N.hasImageTitle&&Jt(W.title)&&(V.title=W.title),N.hasDimensions&&(Jt(W.width)&&(V.dimensions.width=W.width),Jt(W.height)&&(V.dimensions.height=W.height)),Jt(W.class)&&zn.findEntry(N.classList,W.class).each(ae=>{V.classes=ae.value}),N.hasImageCaption&&Mn(W.caption)&&(V.caption=W.caption),N.hasAdvTab&&(Jt(W.style)&&(V.style=W.style),Jt(W.vspace)&&(V.vspace=W.vspace),Jt(W.border)&&(V.border=W.border),Jt(W.hspace)&&(V.hspace=W.hspace),Jt(W.borderstyle)&&(V.borderstyle=W.borderstyle))},Ql=(N,V)=>{const W=V.getData(),ae=W.src.meta;if(ae!==void 0){const ut=Kl({},W);pr(N,ut,ae),V.setData(ut)}},Fn=(N,V,W,ae)=>{const ut=ae.getData(),Tt=ut.src.value,Zn=ut.src.meta||{};!Zn.width&&!Zn.height&&V.hasDimensions&&(I(Tt)?N.imageSize(Tt).then(vo=>{W.open&&ae.setData({dimensions:vo})}).catch(vo=>console.error(vo)):ae.setData({dimensions:{width:"",height:""}}))},Pc=(N,V,W)=>{const ae=W.getData(),ut=zn.findEntry(N.imageList,ae.src.value);V.prevImage=ut,W.setData({images:ut.map(Tt=>Tt.value).getOr("")})},ns=(N,V,W,ae)=>{Di(V,ae),Ql(V,ae),Fn(N,V,W,ae),Pc(V,W,ae)},Od=(N,V,W,ae)=>{const ut=ae.getData(),Tt=zn.findEntry(V.imageList,ut.images);Tt.each(Zn=>{ut.alt===""||W.prevImage.map(vo=>vo.text===ut.alt).getOr(!1)?Zn.value===""?ae.setData({src:Zn,alt:W.prevAlt}):ae.setData({src:Zn,alt:Zn.text}):ae.setData({src:Zn})}),W.prevImage=Tt,ns(N,V,W,ae)},Fs=(N,V,W,ae)=>{const ut=ae.getData();ae.block("Uploading image"),E(ut.fileinput).fold(()=>{ae.unblock()},Tt=>{const Zn=URL.createObjectURL(Tt),vo=()=>{ae.unblock(),URL.revokeObjectURL(Zn)},zc=ia=>{ae.setData({src:{value:ia,meta:{}}}),ae.showTab("general"),ns(N,V,W,ae)};Xn(Tt).then(ia=>{const Vs=N.createBlobCache(Tt,Zn,ia);V.automaticUploads?N.uploadImage(Vs).then(ve=>{zc(ve.url),vo()}).catch(ve=>{vo(),N.alertErr(ve)}):(N.addToBlobCache(Vs),zc(Vs.blobUri()),ae.unblock())})})},km=(N,V,W)=>(ae,ut)=>{ut.name==="src"?ns(N,V,W,ae):ut.name==="images"?Od(N,V,W,ae):ut.name==="alt"?W.prevAlt=ae.getData().alt:ut.name==="fileinput"?Fs(N,V,W,ae):ut.name==="isDecorative"&&ae.setEnabled("alt",!ae.getData().isDecorative)},Mi=N=>()=>{N.open=!1},_m=N=>N.hasAdvTab||N.hasUploadUrl||N.hasUploadHandler?{type:"tabpanel",tabs:Ge([[oi.makeTab(N)],N.hasAdvTab?[rr.makeTab(N)]:[],N.hasUploadTab&&(N.hasUploadUrl||N.hasUploadHandler)?[wr.makeTab(N)]:[]])}:{type:"panel",items:oi.makeItems(N)},aa=(N,V,W)=>ae=>{const ut=Kl(uo(V.image),ae.getData()),Tt={...ut,style:Pr(W.normalizeCss,Gg(ut,!1))};N.execCommand("mceUpdateImage",!1,Gg(Tt,V.hasAccessibilityOptions)),N.editorUpload.uploadImagesAuto(),ae.close()},vl=N=>V=>Nc(N,V)?Ts(N.documentBaseURI.toAbsolute(V)).then(W=>({width:String(W.width),height:String(W.height)})):Promise.resolve({width:"",height:""}),ku=N=>(V,W,ae)=>{var ut;return N.editorUpload.blobCache.create({blob:V,blobUri:W,name:(ut=V.name)===null||ut===void 0?void 0:ut.replace(/\.[^\.]+$/,""),filename:V.name,base64:ae.split(",")[1]})},Em=N=>V=>{N.editorUpload.blobCache.add(V)},_u=N=>V=>{N.windowManager.alert(V)},Td=N=>V=>os(N,V),ri=N=>V=>N.dom.parseStyle(V),Om=N=>(V,W)=>N.dom.serializeStyle(V,W),zr=N=>V=>Up(N).upload([V],!1).then(W=>{var ae;return W.length===0?Promise.reject("Failed to upload image"):W[0].status===!1?Promise.reject((ae=W[0].error)===null||ae===void 0?void 0:ae.message):W[0]}),Vn=N=>{const V={imageSize:vl(N),addToBlobCache:Em(N),createBlobCache:ku(N),alertErr:_u(N),normalizeCss:Td(N),parseStyle:ri(N),serializeStyle:Om(N),uploadImage:zr(N)};return{open:()=>{sr(N).then(W=>{const ae=ni(W);return{title:"Insert/Edit Image",size:"normal",body:_m(W),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:uo(W.image),onSubmit:aa(N,W,V),onChange:km(V,W,ae),onClose:Mi(ae)}}).then(N.windowManager.open)}}},Jl=N=>{N.addCommand("mceImage",Vn(N).open),N.addCommand("mceUpdateImage",(V,W)=>{N.undoManager.transact(()=>Qo(N,W))})},Tm=N=>{const V=N.attr("class");return bn(V)&&/\bimage\b/.test(V)},Dm=N=>V=>{let W=V.length;const ae=ut=>{ut.attr("contenteditable",N?"true":null)};for(;W--;){const ut=V[W];Tm(ut)&&(ut.attr("contenteditable",N?"false":null),Ic.each(ut.getAll("figcaption"),ae))}},Fa=N=>{N.on("PreInit",()=>{N.parser.addNodeFilter("figure",Dm(!0)),N.serializer.addNodeFilter("figure",Dm(!1))})},Dd=N=>V=>{const W=()=>{V.setEnabled(N.selection.isEditable())};return N.on("NodeChange",W),W(),()=>{N.off("NodeChange",W)}},fs=N=>{N.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Vn(N).open,onSetup:V=>{V.setActive(bn(Cu(N)));const W=N.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",V.setActive).unbind,ae=Dd(N)(V);return()=>{W(),ae()}}}),N.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Vn(N).open,onSetup:Dd(N)}),N.ui.registry.addContextMenu("image",{update:V=>N.selection.isEditable()&&(Jr(V)||pl(V)&&!Yo(V))?["image"]:[]})};var fr=()=>{Ct.add("image",N=>{qo(N),Fa(N),fs(N),Jl(N)})};fr()})();const Pj=tj({name:"Editor",__name:"index",props:{modelValue:{default:()=>""},placeholder:{default:()=>""},theme:{default:()=>"light"},language:{default:()=>"zh-Hans"},uploadProps:{default:()=>({})},editorProps:{default:()=>({})},height:{default:500}},emits:["update:modelValue"],setup(Ct,{emit:Mo}){const ho=Ct,jo=Mo,Ro=C$({get:()=>ho.modelValue,set:Ut=>{jo("update:modelValue",Ut)}}),Zo=O$(),kn=O$(null),Pt=C$(()=>ho.theme==="dark"),Jt=C$(()=>{var Ut;const Ao="//iots-cdnaccelerate.lshenergy.com/static/tinymce/6.7.2";let gr=["undo redo bold italic underline forecolor backcolor lineheight alignleft aligncenter alignright bullist numlist fontsize customImage"];return((Ut=ho.editorProps)==null?void 0:Ut.toolbar)===!1&&(gr=!1),{language_url:`${Ao}/langs/${ho.language}.js`,skin_url:`${Ao}/skins/ui/oxide${Pt.value?"-dark":""}`,content_css:`${Ao}/skins/content/${Pt.value?"dark":"default"}/content.min.css`,language:ho.language,placeholder:ho.placeholder,height:ho.height,menubar:!1,branding:!1,plugins:"image advlist lists",toolbar:gr,content_style:"body {font-size: 14px;}",font_size_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px",setup:Mn=>{kn.value=Mn,Mn.ui.registry.addToggleButton("customImage",{icon:"image",onAction:()=>{var An;(An=Zo.value)==null||An.$el.click()}})}}});function na(Ut){var Ao;Ut.url&&((Ao=E$==null?void 0:E$.activeEditor)==null||Ao.execCommand("mceInsertContent",!1,`<img src="${Ut.url}" />`))}return iL(()=>Pt.value,()=>{var Ut,Ao;(Ao=(Ut=kn.value)==null?void 0:Ut.destroy)==null||Ao.call(Ut)}),oj(()=>{E$.init({})}),nj(()=>{var Ut,Ao;(Ao=(Ut=kn.value)==null?void 0:Ut.destroy)==null||Ao.call(Ut)}),(Ut,Ao)=>{const gr=fj,Mn=Cj;return w$(),S$(xj,null,{default:K$(()=>[Pt.value?(w$(),S$(X$(ej),k$({key:0,modelValue:Ro.value,"onUpdate:modelValue":Ao[0]||(Ao[0]=An=>Ro.value=An),class:"editor"},Ut.editorProps,{init:Jt.value}),null,16,["modelValue","init"])):(w$(),S$(X$(ej),k$({key:1,modelValue:Ro.value,"onUpdate:modelValue":Ao[1]||(Ao[1]=An=>Ro.value=An),class:"editor"},Ut.editorProps,{init:Jt.value}),null,16,["modelValue","init"])),q$(Mn,k$({style:{display:"none"}},Ut.uploadProps,{onSuccess:na}),{"upload-button":K$(()=>[q$(gr,{ref_key:"myUpload",ref:Zo},null,512)]),_:1},16)]),_:1})}}}),$j=pj(Pj,[["__scopeId","data-v-9f8fa10a"]]);export{$j as default};
