import"./index-8b94984d.bfb624c9.js";import{U as v}from"./index-b4aba90d.fe4b65d5.js";import{M as x}from"./index.1f590bbc.js";import{U as B}from"./index.d7f3fee8.js";import{d as g,l as i,o as y,A as z,B as A,G as S,E as V}from"./framework.26c49a03.js";import"./index.0c0ebd2e.js";import"./render-function.2b06f18d.js";const h=g({name:"PicUpload",__name:"index",props:{modelValue:{default:()=>""},maxSize:{default:0}},emits:["update:modelValue"],setup(s,{emit:n}){const u=s,m=n,a=i({get:()=>u.modelValue,set:e=>{m("update:modelValue",e)}}),l=i(()=>a.value?Array.isArray(a.value)?a.value.map(e=>({uid:e,name:e,status:"done",url:e})):[{uid:a.value,name:a.value,status:"done",url:a.value}]:[]);function d(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB"}function p(e){return new Promise((o,r)=>{if(u.maxSize&&e.size>u.maxSize*1024){const t=d(u.maxSize*1024);x.error(`文件大小不能超过${t}`),r(!1)}o(!0)})}function c(e){return new Promise(o=>{const r=l.value.findIndex(t=>t.url===e.url);r>-1&&(l.value.splice(r,1),a.value=l.value.map(t=>t.url)),o(!0)})}function f(e){e.url&&(Array.isArray(a.value)?a.value.push(e.url):a.value=e.url)}return(e,o)=>{const r=B;return y(),z(v,null,{default:A(()=>[S(r,V({"list-type":"picture-card","image-preview":!0,"default-file-list":l.value,accept:"image/*","on-before-upload":p,"on-before-remove":c},e.$attrs,{onSuccess:f}),null,16,["default-file-list"])]),_:1})}}});export{h as default};
