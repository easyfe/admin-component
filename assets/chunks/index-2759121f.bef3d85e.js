import{a7 as ce,Z as ge,W as Oe,X as Le,a8 as ll,P as de,ap as al,ar as tl,$ as se,an as nl,aa as ol,ag as Se,aO as be,aP as il,aQ as Ce,aR as Ie,K as De,ae as ul,aS as rl,Q as cl,aT as sl,aU as Ee,aI as F,a3 as dl,a4 as vl}from"./index-2a85048f.68958226.js";import{e as pl}from"./index-16604dbe.fe07b194.js";import{d as J,R as ve,j as R,m as B,G as m,E as oe,ab as fl,ac as Fe,a4 as Te,w as ae,a1 as D,S as ze,D as le,o as te,A as ne,B as E,a5 as re,r as H,ag as yl,ax as hl}from"./framework.f10db147.js";const We=(e,{optionMap:a,leafOptionMap:l,leafOptionSet:y,leafOptionValueMap:s,totalLevel:i,checkStrictly:d,enabledLazyLoad:r,lazyLoadOptions:p,valueKey:S,fieldNames:o})=>{let f=0;const C=(k,v,g)=>{var A;const T=(A=v==null?void 0:v.path)!=null?A:[];return f=Math.max(f,g??1),k.map((V,N)=>{var K;const $=V[o.value],u={raw:V,value:$,label:(K=V[o.label])!=null?K:String($),disabled:!!V[o.disabled],selectionDisabled:!1,render:V[o.render],tagProps:V[o.tagProps],isLeaf:V[o.isLeaf],level:T.length,index:N,key:"",valueKey:String(ge($)?$[S.value]:$),parent:v,path:[],pathValue:[]},q=T.concat(u),x=[],G=q.map(P=>(x.push(P.value),P.valueKey)).join("-");return u.path=q,u.pathValue=x,u.key=G,V[o.children]?(u.isLeaf=!1,u.children=C(V[o.children],u,(g??1)+1)):r&&!u.isLeaf?(u.isLeaf=!1,p[G]&&(u.children=C(p[G],u,(g??1)+1))):u.isLeaf=!0,u.children&&!u.disabled&&(u.totalLeafOptions=u.children.reduce((P,O)=>ll(O.totalLeafOptions)?P+O.totalLeafOptions:O.disabled||O.selectionDisabled?P:P+(O.isLeaf?1:0),0),u.totalLeafOptions===0&&!d.value&&(u.selectionDisabled=!0)),a.set(u.key,u),(u.isLeaf||d.value)&&(y.add(u),l.set(u.key,u),s.has(u.valueKey)||s.set(u.valueKey,u.key)),u})},_=C(e);return i.value=f,_},Pe=(e,a)=>{var l,y;let s=!1,i=!1;if(e.isLeaf)a!=null&&a.has(e.key)&&(s=!0);else{const d=new RegExp(`^${e.key}(-|$)`),r=Array.from((l=a==null?void 0:a.keys())!=null?l:[]).reduce((p,S)=>d.test(S)?p+1:p,0);r>0&&r>=((y=e.totalLeafOptions)!=null?y:1)?s=!0:r>0&&(i=!0)}return{checked:s,indeterminate:i}},_e=e=>{const a=[];if(e.isLeaf)a.push(e.key);else if(e.children)for(const l of e.children)a.push(..._e(l));return a},Ve=e=>{const a=[];if(e.disabled||e.selectionDisabled)return a;if(e.isLeaf)a.push(e);else if(e.children)for(const l of e.children)a.push(...Ve(l));return a},qe=(e,{valueKey:a,leafOptionValueMap:l})=>{var y;if(ce(e))return e.map(i=>ge(i)?i[a]:i).join("-");const s=ge(e)?e[a]:e;return(y=l.get(String(s)))!=null?y:String(s)},Ge=(e,{multiple:a,pathMode:l})=>ce(e)?l&&!a&&e.length>0&&!ce(e[0])?[e]:e:Oe(e)||Le(e)||e===""?[]:[e],Ue=e=>e.path.map(a=>a.label).join(" / "),we=Symbol("ArcoCascader");var ke=J({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(e){const a=de("cascader-option"),l=ve(we,{}),y=R(!1),s={},i=o=>{var f;if(se(l.loadMore)&&!e.option.isLeaf){const{isLeaf:C,children:_,key:k}=e.option;!C&&!_&&(y.value=!0,new Promise(v=>{var g;(g=l.loadMore)==null||g.call(l,e.option.raw,v)}).then(v=>{var g;y.value=!1,v&&((g=l.addLazyLoadOptions)==null||g.call(l,v,k))}))}(f=l.setSelectedPath)==null||f.call(l,e.option.key)};e.option.disabled||(s.onMouseenter=[()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l,e.option.key)}],s.onMouseleave=()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l)},s.onClick=[],l.expandTrigger==="hover"?s.onMouseenter.push(o=>i()):s.onClick.push(o=>i()),e.option.isLeaf&&!e.multiple&&s.onClick.push(o=>{var f;i(),(f=l.onClickOption)==null||f.call(l,e.option)}));const d=B(()=>[a,{[`${a}-active`]:e.active,[`${a}-disabled`]:e.option.disabled}]),r=B(()=>{var o;return e.checkStrictly?{checked:(o=l.valueMap)==null?void 0:o.has(e.option.key),indeterminate:!1}:Pe(e.option,l.valueMap)}),p=()=>{var o,f,C;return e.pathLabel?(f=(o=l==null?void 0:l.formatLabel)==null?void 0:o.call(l,e.option.path.map(_=>_.raw)))!=null?f:Ue(e.option):(C=l.slots)!=null&&C.option?l.slots.option({data:e.option}):se(e.option.render)?e.option.render():e.option.label},S=()=>y.value?m(nl,null,null):!e.searchOption&&!e.option.isLeaf?m(ol,null,null):null;return()=>{var o;return m("li",oe({tabindex:"0",role:"menuitem","aria-disabled":e.option.disabled,"aria-haspopup":!e.option.isLeaf,"aria-expanded":!e.option.isLeaf&&e.active,title:e.option.label,class:d.value},s),[e.multiple&&m(al,{modelValue:r.value.checked,indeterminate:r.value.indeterminate,disabled:e.option.disabled||e.option.selectionDisabled,uninjectGroupContext:!0,onChange:(f,C)=>{var _;C.stopPropagation(),i(),(_=l.onClickOption)==null||_.call(l,e.option,!r.value.checked)},onClick:f=>f.stopPropagation()},null),e.checkStrictly&&!e.multiple&&m(tl,{modelValue:(o=l.valueMap)==null?void 0:o.has(e.option.key),disabled:e.option.disabled,uninjectGroupContext:!0,onChange:(f,C)=>{var _;C.stopPropagation(),i(),(_=l.onClickOption)==null||_.call(l,e.option,!0)},onClick:f=>f.stopPropagation()},null),m("div",{class:`${a}-label`},[p(),S()])])}}}),ml=J({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=de("cascader"),y=ve(Se,void 0),s=R(),i=R(!!e.virtualListProps),d=()=>{var r,p,S,o,f;return(f=(o=(r=a.empty)==null?void 0:r.call(a))!=null?o:(S=y==null?void 0:(p=y.slots).empty)==null?void 0:S.call(p,{component:"cascader"}))!=null?f:m(Ce,null,null)};return()=>{var r;return m("div",{class:`${l}-panel-column`,style:{zIndex:e.totalLevel-e.level}},[e.column.length===0?m(be,{class:`${l}-column-content`},{default:()=>[m("div",{class:`${l}-list-empty`},[d()])]}):i.value?m(il,oe({key:(r=e.column)==null?void 0:r.length},e.virtualListProps,{ref:s,data:e.column}),{item:({item:p})=>m(ke,{key:p.key,option:p,active:e.selectedPath.includes(p.key)||p.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null)}):m(be,{class:`${l}-column-content`},{default:()=>[m("ul",{role:"menu",class:[`${l}-list`,{[`${l}-list-multiple`]:!!(e!=null&&e.multiple),[`${l}-list-strictly`]:!!(e!=null&&e.checkStrictly)}]},[e.column.map(p=>m(ke,{key:p.key,option:p,active:e.selectedPath.includes(p.key)||p.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null))])]})])}}});function gl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}var He=J({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(e,{slots:a}){const l=de("cascader"),y=ve(Se,void 0),s=()=>{var d,r,p,S,o;return(o=(S=(d=a.empty)==null?void 0:d.call(a))!=null?S:(p=y==null?void 0:(r=y.slots).empty)==null?void 0:p.call(r,{component:"cascader"}))!=null?o:m(Ce,null,null)},i=()=>e.loading?m("div",{key:"panel-column-loading",class:[`${l}-panel-column`,`${l}-panel-column-loading`]},[m(Ie,null,null)]):e.displayColumns.length===0?m("div",{key:"panel-column-empty",class:`${l}-panel-column`},[m("div",{class:`${l}-list-empty`},[s()])]):e.displayColumns.map((d,r)=>m(ml,{key:`column-${r}`,column:d,level:r,selectedPath:e.selectedPath,activeKey:e.activeKey,totalLevel:e.totalLevel,multiple:e.multiple,checkStrictly:e.checkStrictly,virtualListProps:e.virtualListProps},null));return()=>{let d;return m(fl,{tag:"div",name:"cascader-slide",class:[`${l}-panel`,{[`${l}-dropdown-panel`]:e.dropdown}]},gl(d=i())?d:{default:()=>[d]})}}});function bl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}var kl=J({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(e,{slots:a}){const l=de("cascader"),y=ve(Se,void 0),s=()=>{var i,d,r,p,S;return e.loading?m(Ie,null,null):e.options.length===0?m("div",{class:`${l}-list-empty`},[(S=(p=(i=a.empty)==null?void 0:i.call(a))!=null?p:(r=y==null?void 0:(d=y.slots).empty)==null?void 0:r.call(d,{component:"cascader"}))!=null?S:m(Ce,null,null)]):m("ul",{role:"menu",class:[`${l}-list`,`${l}-search-list`,{[`${l}-list-multiple`]:e.multiple}]},[e.options.map(o=>m(ke,{key:o.key,class:`${l}-search-option`,option:o,active:o.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly,pathLabel:e.pathLabel,searchOption:!0},null))])};return()=>{let i;return m(be,{class:[`${l}-panel`,`${l}-search-panel`]},bl(i=s())?i:{default:()=>[i]})}}});const Qe=(e,{optionMap:a,filteredLeafOptions:l,showSearchPanel:y,expandChild:s})=>{const i=R(),d=B(()=>{if(i.value)return a.get(i.value)}),r=R([]),p=B(()=>{const k=[e.value];for(const v of r.value){const g=a.get(v);g!=null&&g.children&&k.push(g.children)}return k}),S=k=>{var v;const g=C(k);r.value=(v=g==null?void 0:g.path.map(A=>A.key))!=null?v:[]},o=k=>{i.value=k},f=B(()=>{var k;return y!=null&&y.value?l.value.filter(v=>!v.disabled):d.value&&d.value.parent?(k=d.value.parent.children)==null?void 0:k.filter(v=>!v.disabled):e.value.filter(v=>!v.disabled)}),C=k=>{let v=k?a.get(k):void 0;if(s.value)for(;v&&v.children&&v.children.length>0;)v=v.children[0];return v};return{activeKey:i,activeOption:d,selectedPath:r,displayColumns:p,setActiveKey:o,setSelectedPath:S,getNextActiveNode:k=>{var v,g,A,T,V,N,K;const $=(g=(v=f.value)==null?void 0:v.length)!=null?g:0;if(i.value){const u=(T=(A=f.value)==null?void 0:A.findIndex(q=>q.key===i.value))!=null?T:0;return k==="next"?(V=f.value)==null?void 0:V[($+u+1)%$]:(N=f.value)==null?void 0:N[($+u-1)%$]}return(K=f.value)==null?void 0:K[0]}}};var Ol=Object.defineProperty,Be=Object.getOwnPropertySymbols,Ll=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,Me=(e,a,l)=>a in e?Ol(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Ae=(e,a)=>{for(var l in a||(a={}))Ll.call(a,l)&&Me(e,l,a[l]);if(Be)for(var l of Be(a))Sl.call(a,l)&&Me(e,l,a[l]);return e};const Cl=J({name:"Cascader",components:{Trigger:ul,SelectView:rl,BaseCascaderPanel:He,CascaderSearchPanel:kl},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:e=>!!e.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object}},emits:{"update:modelValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,clear:()=>!0,search:e=>!0,popupVisibleChange:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:s,loadMore:i,formatLabel:d,modelValue:r,disabled:p,valueKey:S,expandTrigger:o,expandChild:f}=Te(e),C=R(e.defaultValue),_=R(e.defaultInputValue),k=R(e.defaultPopupVisible),{mergedDisabled:v,eventHandlers:g}=cl({disabled:p});ae(r,t=>{(Oe(t)||Le(t))&&(C.value=e.multiple?[]:void 0)});const A=R([]),T=R(1),V=D(new Map),N=D(new Map),K=D(new Map),$=D(new Set),u=D({}),q=(t,n)=>{u[n]=t},x={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},G=B(()=>Ae(Ae({},x),e.fieldNames));ae([y,u,G],([t,n,b])=>{V.clear(),N.clear(),K.clear(),$.clear(),A.value=We(t??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:u,optionMap:V,leafOptionSet:$,leafOptionMap:N,leafOptionValueMap:K,totalLevel:T,checkStrictly:s,valueKey:S,fieldNames:b})},{immediate:!0,deep:!0});const P=B(()=>{var t;const n=Ge((t=e.modelValue)!=null?t:C.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(n.map(b=>[qe(b,{valueKey:e.valueKey,leafOptionValueMap:K}),b]))}),O=B(()=>{var t;return(t=e.inputValue)!=null?t:_.value}),Q=B(()=>{var t;return(t=e.popupVisible)!=null?t:k.value}),ie=t=>{var n;return t==null?void 0:t.toLocaleLowerCase().includes((n=O.value)==null?void 0:n.toLocaleLowerCase())},z=B(()=>(e.checkStrictly?Array.from(V.values()):Array.from($)).filter(n=>{var b;return se(e.filterOption)?e.filterOption(O.value,n.raw):e.checkStrictly?ie(n.label):(b=n.path)==null?void 0:b.find(L=>ie(L.label))})),j=t=>{var n,b,L;const M=e.multiple?t:(n=t[0])!=null?n:"";t.length===0&&(X(),U()),C.value=M,a("update:modelValue",M),a("change",M),(L=(b=g.value)==null?void 0:b.onChange)==null||L.call(b)},Y=t=>{Q.value!==t&&(k.value=t,a("popupVisibleChange",t))},pe=t=>{if(e.multiple){const n=N.get(t);if(n)h(n,!1);else{const b=[];P.value.forEach((L,M)=>{M!==t&&b.push(L)}),j(b)}}},c=t=>{j([e.pathMode?t.pathValue:t.value]),Y(!1)},h=(t,n)=>{if(n){const b=e.checkStrictly?[t]:Ve(t);j([...P.value.values(),...b.filter(L=>!P.value.has(L.key)).map(L=>e.pathMode?L.pathValue:L.value)])}else{const b=e.checkStrictly?[t.key]:_e(t),L=[];P.value.forEach((M,Z)=>{b.includes(Z)||L.push(M)}),j(L)}ee("","optionChecked")},w=(t,n)=>{e.multiple?h(t,n??!0):c(t)},W=sl(t=>{a("search",t)},e.searchDelay),ee=(t,n)=>{t!==O.value&&(n==="manual"&&!Q.value&&(k.value=!0,a("popupVisibleChange",!0)),_.value=t,a("inputValueChange",t),e.allowSearch&&W(t))};ae(Q,t=>{if(t){if(P.value.size>0){const n=Array.from(P.value.keys()),b=n[n.length-1],L=N.get(b);L&&L.key!==$e.value&&(X(L.key),U(L.key))}}else P.value.size===0&&(X(),U()),ee("","optionListHide")});const fe=t=>{if(t.stopPropagation(),e.multiple){const n=[];P.value.forEach((b,L)=>{const M=N.get(L);M!=null&&M.disabled&&n.push(e.pathMode?M.pathValue:M.value)}),j(n)}else j([]);ee("","manual"),a("clear")},ue=B(()=>e.allowSearch&&O.value.length>0),Ye=t=>{a("focus",t)},Xe=t=>{a("blur",t)},{activeKey:$e,activeOption:I,selectedPath:Ze,displayColumns:Je,setActiveKey:U,setSelectedPath:X,getNextActiveNode:Ke}=Qe(A,{optionMap:V,filteredLeafOptions:z,showSearchPanel:ue,expandChild:f});ze(we,D({onClickOption:w,setActiveKey:U,setSelectedPath:X,loadMore:i,expandTrigger:o,addLazyLoadOptions:q,formatLabel:d,slots:l,valueMap:P}));const xe=Ee(new Map([[F.ENTER,t=>{if(Q.value){if(I.value){let n;e.checkStrictly||I.value.isLeaf?n=!P.value.has(I.value.key):n=!Pe(I.value,P.value).checked,X(I.value.key),w(I.value,n)}}else Y(!0)}],[F.ESC,t=>{Y(!1)}],[F.ARROW_DOWN,t=>{t.preventDefault();const n=Ke("next");U(n==null?void 0:n.key)}],[F.ARROW_UP,t=>{t.preventDefault();const n=Ke("preview");U(n==null?void 0:n.key)}],[F.ARROW_RIGHT,t=>{var n,b;ue.value||(t.preventDefault(),(n=I.value)!=null&&n.children&&(X(I.value.key),U((b=I.value.children[0])==null?void 0:b.key)))}],[F.ARROW_LEFT,t=>{var n;ue.value||(t.preventDefault(),(n=I.value)!=null&&n.parent&&(X(I.value.parent.key),U(I.value.parent.key)))}]])),el=B(()=>{const t=[];return P.value.forEach((n,b)=>{var L,M;const Z=N.get(b);if(Z)t.push({value:b,label:(M=(L=e.formatLabel)==null?void 0:L.call(e,Z.path.map(ye=>ye.raw)))!=null?M:Ue(Z),closable:!Z.disabled,tagProps:Z.tagProps});else if(e.fallback){const ye=se(e.fallback)?e.fallback(n):ce(n)?n.join(" / "):String(n);t.push({value:b,label:ye,closable:!0})}}),t});return{optionInfos:A,filteredLeafOptions:z,selectedPath:Ze,activeKey:$e,displayColumns:Je,computedInputValue:O,computedPopupVisible:Q,handleClear:fe,selectViewValue:el,handleInputValueChange:ee,showSearchPanel:ue,handlePopupVisibleChange:Y,handleFocus:Ye,handleBlur:Xe,handleRemove:pe,mergedDisabled:v,handleKeyDown:xe,totalLevel:T}}});function Pl(e,a,l,y,s,i){const d=le("select-view"),r=le("cascader-search-panel"),p=le("base-cascader-panel"),S=le("trigger");return te(),ne(S,oe(e.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":e.computedPopupVisible,position:"bl",disabled:e.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":e.showSearchPanel,"popup-container":e.popupContainer,"prevent-focus":!0,"click-to-close":!e.allowSearch,onPopupVisibleChange:e.handlePopupVisibleChange}),{content:E(()=>[e.showSearchPanel?(te(),ne(r,{key:0,options:e.filteredLeafOptions,"active-key":e.activeKey,multiple:e.multiple,"check-strictly":e.checkStrictly,loading:e.loading,"path-label":!e.searchOptionOnlyLabel},re({_:2},[e.$slots.empty?{name:"empty",fn:E(()=>[H(e.$slots,"empty")])}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(te(),ne(p,{key:1,"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,loading:e.loading,"virtual-list-props":e.virtualListProps,dropdown:""},re({_:2},[e.$slots.empty?{name:"empty",fn:E(()=>[H(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:E(()=>[m(d,oe({"model-value":e.selectViewValue,"input-value":e.computedInputValue,disabled:e.mergedDisabled,error:e.error,multiple:e.multiple,"allow-clear":e.allowClear,"allow-search":e.allowSearch,size:e.size,opened:e.computedPopupVisible,placeholder:e.placeholder,loading:e.loading,"max-tag-count":e.maxTagCount},e.$attrs,{onInputValueChange:e.handleInputValueChange,onClear:e.handleClear,onFocus:e.handleFocus,onBlur:e.handleBlur,onRemove:e.handleRemove,onKeydown:e.handleKeyDown}),re({_:2},[e.$slots.label?{name:"label",fn:E(o=>[H(e.$slots,"label",yl(hl(o)))])}:void 0,e.$slots.prefix?{name:"prefix",fn:E(()=>[H(e.$slots,"prefix")])}:void 0,e.$slots["arrow-icon"]?{name:"arrow-icon",fn:E(()=>[H(e.$slots,"arrow-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:E(()=>[H(e.$slots,"loading-icon")])}:void 0,e.$slots["search-icon"]?{name:"search-icon",fn:E(()=>[H(e.$slots,"search-icon")])}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var he=De(Cl,[["render",Pl]]),_l=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Vl=Object.prototype.hasOwnProperty,wl=Object.prototype.propertyIsEnumerable,Re=(e,a,l)=>a in e?_l(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,je=(e,a)=>{for(var l in a||(a={}))Vl.call(a,l)&&Re(e,l,a[l]);if(Ne)for(var l of Ne(a))wl.call(a,l)&&Re(e,l,a[l]);return e};const $l=J({name:"CascaderPanel",components:{BaseCascaderPanel:He},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:a,slots:l}){const{options:y,checkStrictly:s,loadMore:i,modelValue:d,valueKey:r,expandChild:p,expandTrigger:S}=Te(e),o=R(e.defaultValue);ae(d,c=>{(Oe(c)||Le(c))&&(o.value=e.multiple?[]:void 0)});const f=R([]),C=R(1),_=D(new Map),k=D(new Map),v=D(new Map),g=D(new Set),A=D({}),T=(c,h)=>{A[h]=c},V={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},N=B(()=>je(je({},V),e.fieldNames));ae([y,A,N],([c,h,w])=>{_.clear(),k.clear(),v.clear(),g.clear(),f.value=We(c??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:h,optionMap:_,leafOptionSet:g,leafOptionMap:k,leafOptionValueMap:v,totalLevel:C,checkStrictly:s,fieldNames:w,valueKey:r})},{immediate:!0});const K=B(()=>{var c;const h=Ge((c=e.modelValue)!=null?c:o.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(h.map(w=>[qe(w,{valueKey:e.valueKey,leafOptionValueMap:v}),w]))}),$=B(()=>e.checkStrictly?Array.from(_.values()):Array.from(g)),u=c=>{var h;const w=e.multiple?c:(h=c[0])!=null?h:"";c.length===0&&(j(),z()),o.value=w,a("update:modelValue",w),a("change",w)},q=c=>{u([e.pathMode?c.pathValue:c.value])},x=(c,h)=>{if(h){const w=e.checkStrictly?[c]:Ve(c);u([...K.value.values(),...w.filter(W=>!K.value.has(W.key)).map(W=>e.pathMode?W.pathValue:W.value)])}else{const w=e.checkStrictly?[c.key]:_e(c),W=[];K.value.forEach((ee,fe)=>{w.includes(fe)||W.push(ee)}),u(W)}},G=(c,h)=>{e.multiple?x(c,h??!0):q(c)},{activeKey:P,activeOption:O,selectedPath:Q,displayColumns:ie,setActiveKey:z,setSelectedPath:j,getNextActiveNode:Y}=Qe(f,{optionMap:_,filteredLeafOptions:$,expandChild:p});ze(we,D({onClickOption:G,setActiveKey:z,setSelectedPath:j,loadMore:i,addLazyLoadOptions:T,slots:l,valueMap:K,expandTrigger:S}));const pe=Ee(new Map([[F.ENTER,c=>{if(O.value){let h;e.checkStrictly||O.value.isLeaf?h=!K.value.has(O.value.key):h=!Pe(O.value,K.value).checked,j(O.value.key),G(O.value,h)}}],[F.ARROW_DOWN,c=>{c.preventDefault();const h=Y("next");z(h==null?void 0:h.key)}],[F.ARROW_UP,c=>{c.preventDefault();const h=Y("preview");z(h==null?void 0:h.key)}],[F.ARROW_RIGHT,c=>{var h,w;c.preventDefault(),(h=O.value)!=null&&h.children&&(j(O.value.key),z((w=O.value.children[0])==null?void 0:w.key))}],[F.ARROW_LEFT,c=>{var h;c.preventDefault(),(h=O.value)!=null&&h.parent&&(j(O.value.parent.key),z(O.value.parent.key))}]]));return{optionInfos:f,filteredLeafOptions:$,selectedPath:Q,activeKey:P,displayColumns:ie,handleKeyDown:pe,totalLevel:C}}});function Kl(e,a,l,y,s,i){const d=le("base-cascader-panel");return te(),ne(d,{"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,onKeydown:e.handleKeyDown},re({_:2},[e.$slots.empty?{name:"empty",fn:E(()=>[H(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var me=De($l,[["render",Kl]]);const Bl=Object.assign(he,{CascaderPanel:me,install:(e,a)=>{dl(e,a);const l=vl(a);e.component(l+he.name,he),e.component(l+me.name,me)}}),Rl=J({name:"Cascader",__name:"index",props:{labelKey:{default:"label"},valueKey:{default:"value"},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const l=e,y=B({get:()=>l.modelValue,set:s=>{a("update:modelValue",s)}});return(s,i)=>{const d=Bl;return te(),ne(pl,null,{default:E(()=>[m(d,oe({modelValue:y.value,"onUpdate:modelValue":i[0]||(i[0]=r=>y.value=r)},s.$attrs),null,16,["modelValue"])]),_:1})}}});export{Rl as default};
