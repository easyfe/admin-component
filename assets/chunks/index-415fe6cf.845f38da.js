import{af as xt,an as lt,aV as be,aW as Ut,L as Yt,a0 as Wt,W as de,$ as we,aH as Gt,a7 as Pe,J as Te,ap as qt,aX as Jt,O as Ve,aP as Qt,a3 as Nt,a4 as Kt,aY as Xt,aO as Zt,Z as Ge,aT as ea,ae as ta,aS as aa,aQ as na,aR as la,P as oa,ag as ra}from"./index-96a527ce.22694137.js";import{e as sa}from"./index-c1793516.a978750d.js";import{a as Me}from"./use-merge-state.2c662c0e.js";import{R as wt,d as ce,a4 as ae,af as Ke,j as O,U as ia,f as ua,m as k,a1 as ee,D as Q,o as E,c as J,C as I,z as De,F as Oe,L as qe,n as x,G as te,a5 as $t,B as le,r as U,A as F,ag as Re,E as _,a as da,t as ca,T as pa,l as Be,S as va,ac as fa,w as ot,H as ya,I as ha,ax as ga,i as ba}from"./framework.f10db147.js";import{R as Et}from"./render-function.9edc4e68.js";import{I as ma}from"./index.92469703.js";const Dt=Symbol("TreeInjectionKey");function ka(e){const t=[];function a(n){n&&n.forEach(l=>{t.push(l),a(l.children)})}return a(e),t}function Sa(e){const t=new Map;return e.forEach(a=>{t.set(a.key,a)}),t}function ze(e){return e.selectable&&!e.disabled}function rt(e){return!e.isLeaf&&e.children}function Ca(e){return xt(e.isLeaf)?e.isLeaf:!e.children}function He(e){return Set.prototype.add.bind(e)}function xe(e){return Set.prototype.delete.bind(e)}function Se(e){return e.disabled||e.disableCheckbox?!1:!!e.checkable}function Je(e){var t;const a=[];return(t=e.children)==null||t.forEach(n=>{Se(n)&&a.push(n.key,...Je(n))}),a}function Pt(e){var t;const{node:a,checkedKeySet:n,indeterminateKeySet:l}=e;let i=a.parent;for(;i;){if(Se(i)){const r=i.key,c=((t=i.children)==null?void 0:t.filter(Se))||[];let o=0;const u=c.length;c.some(({key:d})=>{if(n.has(d))o+=1;else if(l.has(d))return o+=.5,!0;return!1}),o&&o!==u?l.add(r):l.delete(r),o&&o===u?n.add(r):n.delete(r)}i=i.parent}}function Ue(e){const{node:t,checked:a,checkedKeys:n,indeterminateKeys:l,checkStrictly:i=!1}=e,{key:r}=t,c=new Set(n),o=new Set(l);if(a?c.add(r):c.delete(r),o.delete(r),!i){const u=Je(t);a?u.forEach(He(c)):u.forEach(xe(c)),u.forEach(xe(o)),Pt({node:t,checkedKeySet:c,indeterminateKeySet:o})}return[[...c],[...o]]}function Na(e){const{initCheckedKeys:t,key2TreeNode:a,checkStrictly:n,onlyCheckLeaf:l}=e,i=new Set,r=new Set,c=new Set;return n?t.forEach(He(i)):t.forEach(o=>{var u;const d=a.get(o);if(!d||r.has(o)||l&&((u=d.children)!=null&&u.length))return;const h=Je(d);h.forEach(He(r)),h.forEach(xe(c)),i.add(o),c.delete(o),Pt({node:d,checkedKeySet:i,indeterminateKeySet:c})}),[[...i,...r],[...c]]}function Ie(){return wt(Dt)||{}}var Ka=ce({name:"TreeNodeSwitcher",components:{IconLoading:lt,RenderFunction:Et},props:{prefixCls:String,loading:Boolean,showLine:Boolean,treeNodeData:{type:Object},icons:{type:Object},nodeStatus:{type:Object}},emits:["click"],setup(e,{slots:t,emit:a}){const{icons:n,nodeStatus:l,treeNodeData:i}=ae(e),r=Ie(),c=be(t,"switcher-icon"),o=be(t,"loading-icon");return{getSwitcherIcon:()=>{var u,d,h;const m=(d=(u=n==null?void 0:n.value)==null?void 0:u.switcherIcon)!=null?d:c.value;return m?m(l.value):(h=r.switcherIcon)==null?void 0:h.call(r,i.value,l.value)},getLoadingIcon:()=>{var u,d,h;const m=(d=(u=n==null?void 0:n.value)==null?void 0:u.loadingIcon)!=null?d:o.value;return m?m(l.value):(h=r.loadingIcon)==null?void 0:h.call(r,i.value,l.value)},onClick(u){a("click",u)}}},render(){var e,t,a;const{prefixCls:n,getSwitcherIcon:l,getLoadingIcon:i,onClick:r,nodeStatus:c={},loading:o,showLine:u}=this,{expanded:d,isLeaf:h}=c;if(o)return(e=i())!=null?e:Ke(lt);let m=null,C=!1;if(h)u&&(m=(a=l())!=null?a:Ke(ma));else{const D=u?Ke("span",{class:`${n}-${d?"minus":"plus"}-icon`}):Ke(Ut);m=(t=l())!=null?t:D,C=!u}if(!m)return null;const g=Ke("span",{class:`${n}-switcher-icon`,onClick:r},m);return C?Ke(Yt,{class:`${n}-icon-hover`},()=>g):g}}),wa=Object.defineProperty,$a=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,Da=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,it=(e,t,a)=>t in e?wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ye=(e,t)=>{for(var a in t||(t={}))Da.call(t,a)&&it(e,a,t[a]);if(st)for(var a of st(t))Pa.call(t,a)&&it(e,a,t[a]);return e},ut=(e,t)=>$a(e,Ea(t));const Ot=(()=>{let e=0;return()=>(e+=1,`__arco_tree${e}`)})();function Oa(e,t){return!!(de(e)?t:e)}function Ta(e,t){const a=Ye({},e);return t&&Object.keys(t).forEach(l=>{const i=t[l];i!==l&&(a[l]=e[i],delete a[i])}),a}function dt({subEnable:e,superEnable:t,isLeaf:a,treeNodeData:n,level:l}){return de(e)?we(t)?t(n,{isLeaf:a,level:l}):t??!1:e}function Va(e){var t,a;const{treeNodeData:n,parentNode:l,isTail:i=!0,treeProps:r}=e,{fieldNames:c}=r||{},o=Ta(n,c),u=r.loadMore?!!o.isLeaf:!((t=o.children)!=null&&t.length),d=l?l.level+1:0,h=ut(Ye({},Wt(o,["children"])),{key:(a=o.key)!=null?a:Ot(),selectable:dt({subEnable:o.selectable,superEnable:r==null?void 0:r.selectable,isLeaf:u,level:d,treeNodeData:n}),disabled:!!o.disabled,disableCheckbox:!!o.disableCheckbox,checkable:dt({subEnable:o.checkable,superEnable:r==null?void 0:r.checkable,isLeaf:u,level:d,treeNodeData:n}),isLeaf:u,isTail:i,blockNode:!!(r!=null&&r.blockNode),showLine:!!(r!=null&&r.showLine),level:d,lineless:l?[...l.lineless,l.isTail]:[],draggable:Oa(o.draggable,r==null?void 0:r.draggable)});return ut(Ye({},h),{treeNodeProps:h,treeNodeData:n,parent:l,parentKey:l==null?void 0:l.key,pathParentKeys:l?[...l.pathParentKeys,l.key]:[]})}function Ba(e,t){function a(n,l){if(!n)return;const{fieldNames:i}=t,r=[];return n.forEach((c,o)=>{const u=Va({treeNodeData:c,treeProps:t,parentNode:l,isTail:o===n.length-1});u.children=a(c[(i==null?void 0:i.children)||"children"],u),r.push(u)}),r}return a(e)}function Tt(){const e=ua(),t=()=>{var n;return(n=e==null?void 0:e.vnode.key)!=null?n:Ot()},a=O(t());return ia(()=>{a.value=t()}),a}function Ia(e){const{key:t,refTitle:a}=ae(e),n=Ie(),l=O(!1),i=O(!1),r=O(!1),c=O(0),o=Gt(u=>{if(!a.value)return;const d=a.value.getBoundingClientRect(),h=window.pageYOffset+d.top,{pageY:m}=u,C=d.height/4,g=m-h;c.value=g<C?-1:g<d.height-C?0:1,r.value=n.allowDrop?n.allowDrop(t.value,c.value):!0});return{isDragOver:l,isDragging:i,isAllowDrop:r,dropPosition:c,setDragStatus(u,d){switch(u){case"dragStart":i.value=!0,c.value=0,n.onDragStart&&n.onDragStart(t.value,d);break;case"dragEnd":i.value=!1,l.value=!1,c.value=0,o.cancel(),n.onDragEnd&&n.onDragEnd(t.value,d);break;case"dragOver":l.value=!0,o(d),n.onDragOver&&n.onDragOver(t.value,d);break;case"dragLeave":l.value=!1,c.value=0,o.cancel(),n.onDragLeave&&n.onDragLeave(t.value,d);break;case"drop":n.onDrop&&n.onDrop(t.value,c.value,d),l.value=!1,c.value=0,o.cancel();break}}}}function La(e){return Pe(e)?e:[e]}const Fa=ce({name:"BaseTreeNode",components:{NodeSwitcher:Ka,Checkbox:qt,RenderFunction:Et,IconDragDotVertical:Jt},props:{key:{type:[String,Number]},title:{type:String},selectable:{type:Boolean},disabled:{type:Boolean},disableCheckbox:{type:Boolean},checkable:{type:Boolean},draggable:{type:Boolean},isLeaf:{type:Boolean},icon:{type:Function},switcherIcon:{type:Function},loadingIcon:{type:Function},dragIcon:{type:Function},isTail:{type:Boolean},blockNode:{type:Boolean},showLine:{type:Boolean},level:{type:Number,default:0},lineless:{type:Array,default:()=>[]}},setup(e){const t=Tt(),a=Ve("tree-node"),n=Ie(),l=k(()=>{var p;return(p=n.key2TreeNode)==null?void 0:p.get(t.value)}),i=k(()=>l.value.treeNodeData),r=k(()=>l.value.children),c=k(()=>{var p;const S=(p=n.treeProps)==null?void 0:p.actionOnNodeClick;return S?La(S):[]}),{isLeaf:o,isTail:u,selectable:d,disabled:h,disableCheckbox:m,draggable:C}=ae(e),g=k(()=>{var p;return[`${a}`,{[`${a}-selected`]:z.value,[`${a}-is-leaf`]:o.value,[`${a}-is-tail`]:u.value,[`${a}-expanded`]:L.value,[`${a}-disabled-selectable`]:!d.value&&!((p=n.treeProps)!=null&&p.disableSelectActionOnly),[`${a}-disabled`]:h.value}]}),D=O(),{isDragOver:$,isDragging:T,isAllowDrop:j,dropPosition:Y,setDragStatus:K}=Ia(ee({key:t,refTitle:D})),V=k(()=>[`${a}-title`,{[`${a}-title-draggable`]:C.value,[`${a}-title-gap-top`]:$.value&&j.value&&Y.value<0,[`${a}-title-gap-bottom`]:$.value&&j.value&&Y.value>0,[`${a}-title-highlight`]:!T.value&&$.value&&j.value&&Y.value===0,[`${a}-title-dragging`]:T.value,[`${a}-title-block`]:l.value.blockNode}]),A=k(()=>{var p,S;return(S=(p=n.checkedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),W=k(()=>{var p,S;return(S=(p=n.indeterminateKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),z=k(()=>{var p,S;return(S=(p=n.selectedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),L=k(()=>{var p,S;return(S=(p=n.expandedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),oe=k(()=>{var p,S;return(S=(p=n.loadingKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),re=k(()=>n.dragIcon),pe=k(()=>n.nodeIcon);function G(p){var S,R;o.value||(!((S=r.value)!=null&&S.length)&&we(n.onLoadMore)?n.onLoadMore(t.value):(R=n==null?void 0:n.onExpand)==null||R.call(n,!L.value,t.value,p))}const M=ee({loading:oe,checked:A,selected:z,indeterminate:W,expanded:L,isLeaf:o}),q=k(()=>n.nodeTitle?()=>{var p;return(p=n.nodeTitle)==null?void 0:p.call(n,i.value,M)}:void 0),se=k(()=>n.nodeExtra?()=>{var p;return(p=n.nodeExtra)==null?void 0:p.call(n,i.value,M)}:void 0);return{nodekey:t,refTitle:D,prefixCls:a,classNames:g,titleClassNames:V,indeterminate:W,checked:A,expanded:L,selected:z,treeTitle:q,treeNodeData:i,loading:oe,treeDragIcon:re,treeNodeIcon:pe,extra:se,nodeStatus:M,onCheckboxChange(p,S){var R;m.value||h.value||(R=n.onCheck)==null||R.call(n,p,t.value,S)},onTitleClick(p){var S;c.value.includes("expand")&&G(p),!(!d.value||h.value)&&((S=n.onSelect)==null||S.call(n,t.value,p))},onSwitcherClick:G,onDragStart(p){var S;if(C.value){p.stopPropagation(),K("dragStart",p);try{(S=p.dataTransfer)==null||S.setData("text/plain","")}catch{}}},onDragEnd(p){C.value&&(p.stopPropagation(),K("dragEnd",p))},onDragOver(p){C&&(p.stopPropagation(),p.preventDefault(),K("dragOver",p))},onDragLeave(p){C.value&&(p.stopPropagation(),K("dragLeave",p))},onDrop(p){!C.value||!j.value||(p.stopPropagation(),p.preventDefault(),K("drop",p))}}}}),_a=["data-level","data-key"],ja=["draggable"];function Aa(e,t,a,n,l,i){const r=Q("NodeSwitcher"),c=Q("Checkbox"),o=Q("RenderFunction"),u=Q("IconDragDotVertical");return E(),J("div",{class:x(e.classNames),"data-level":e.level,"data-key":e.nodekey},[I(" 缩进 "),De("span",{class:x(`${e.prefixCls}-indent`)},[(E(!0),J(Oe,null,qe(e.level,d=>(E(),J("span",{key:d,class:x([`${e.prefixCls}-indent-block`,{[`${e.prefixCls}-indent-block-lineless`]:e.lineless[d-1]}])},null,2))),128))],2),I(" switcher "),De("span",{class:x([`${e.prefixCls}-switcher`,{[`${e.prefixCls}-switcher-expanded`]:e.expanded}])},[te(r,{"prefix-cls":e.prefixCls,loading:e.loading,"show-line":e.showLine,"tree-node-data":e.treeNodeData,icons:{switcherIcon:e.switcherIcon,loadingIcon:e.loadingIcon},"node-status":e.nodeStatus,onClick:e.onSwitcherClick},$t({_:2},[e.$slots["switcher-icon"]?{name:"switcher-icon",fn:le(()=>[I(" @slot 定制 switcher 图标，会覆盖 Tree 的配置 "),U(e.$slots,"switcher-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:le(()=>[I(" @slot 定制 loading 图标，会覆盖 Tree 的配置 "),U(e.$slots,"loading-icon")])}:void 0]),1032,["prefix-cls","loading","show-line","tree-node-data","icons","node-status","onClick"])],2),I(" checkbox "),e.checkable?(E(),F(c,{key:0,disabled:e.disableCheckbox||e.disabled,"model-value":e.checked,indeterminate:e.indeterminate,"uninject-group-context":"",onChange:e.onCheckboxChange},null,8,["disabled","model-value","indeterminate","onChange"])):I("v-if",!0),I(" 内容 "),De("span",{ref:"refTitle",class:x(e.titleClassNames),draggable:e.draggable,onDragstart:t[0]||(t[0]=(...d)=>e.onDragStart&&e.onDragStart(...d)),onDragend:t[1]||(t[1]=(...d)=>e.onDragEnd&&e.onDragEnd(...d)),onDragover:t[2]||(t[2]=(...d)=>e.onDragOver&&e.onDragOver(...d)),onDragleave:t[3]||(t[3]=(...d)=>e.onDragLeave&&e.onDragLeave(...d)),onDrop:t[4]||(t[4]=(...d)=>e.onDrop&&e.onDrop(...d)),onClick:t[5]||(t[5]=(...d)=>e.onTitleClick&&e.onTitleClick(...d))},[e.$slots.icon||e.icon||e.treeNodeIcon?(E(),J("span",{key:0,class:x([`${e.prefixCls}-icon`,`${e.prefixCls}-custom-icon`])},[I(" 节点图标 "),e.$slots.icon?U(e.$slots,"icon",Re(_({key:0},e.nodeStatus))):e.icon?(E(),F(o,_({key:1,"render-func":e.icon},e.nodeStatus),null,16,["render-func"])):e.treeNodeIcon?(E(),F(o,_({key:2,"render-func":e.treeNodeIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):I("v-if",!0)],2)):I("v-if",!0),De("span",{class:x(`${e.prefixCls}-title-text`)},[e.treeTitle?(E(),F(o,{key:0,"render-func":e.treeTitle},null,8,["render-func"])):(E(),J(Oe,{key:1},[I(" 标题，treeTitle 优先级高于节点的 title "),U(e.$slots,"title",{},()=>[da(ca(e.title),1)])],2112)),e.draggable?(E(),J("span",{key:2,class:x([`${e.prefixCls}-icon`,`${e.prefixCls}-drag-icon`])},[I(" 拖拽图标 "),e.$slots["drag-icon"]?U(e.$slots,"drag-icon",Re(_({key:0},e.nodeStatus))):e.dragIcon?(E(),F(o,_({key:1,"render-func":e.dragIcon},e.nodeStatus),null,16,["render-func"])):e.treeDragIcon?(E(),F(o,_({key:2,"render-func":e.treeDragIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):(E(),F(u,{key:3}))],2)):I("v-if",!0)],2)],42,ja),I(" 额外 "),e.extra?(E(),F(o,{key:1,"render-func":e.extra},null,8,["render-func"])):I("v-if",!0)],10,_a)}var We=Te(Fa,[["render",Aa]]);const Ma=ce({name:"ExpandTransition",props:{expanded:Boolean},emits:["end"],setup(e,{emit:t}){return{onBeforeEnter(a){a.style.height=e.expanded?"0":`${a.scrollHeight}px`},onEnter(a){a.style.height=e.expanded?`${a.scrollHeight}px`:"0"},onAfterEnter(a){a.style.height=e.expanded?"":"0",t("end")},onBeforeLeave(a){a.style.display="none"}}}});function Ra(e,t,a,n,l,i){return E(),F(pa,{onBeforeEnter:e.onBeforeEnter,onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave},{default:le(()=>[U(e.$slots,"default")]),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave"])}var za=Te(Ma,[["render",Ra]]);const Ha=ce({name:"TransitionNodeList",components:{ExpandTransition:za,BaseTreeNode:We},props:{nodeKey:{type:[String,Number],required:!0}},setup(e){const a=[`${Ve("tree")}-node-list`],n=Ie(),{nodeKey:l}=ae(e),i=k(()=>{var o,u;return(u=(o=n.expandedKeys)==null?void 0:o.includes)==null?void 0:u.call(o,l.value)}),r=k(()=>{var o;const u=new Set(n.expandedKeys||[]),d=(o=n.flattenTreeData)==null?void 0:o.filter(h=>{var m,C;return(m=h.pathParentKeys)!=null&&m.includes(l.value)?!n.filterTreeNode||((C=n.filterTreeNode)==null?void 0:C.call(n,h.treeNodeData)):!1});return d==null?void 0:d.filter(h=>{var m;if(i.value)return(m=h.pathParentKeys)==null?void 0:m.every(g=>u.has(g));const C=h.pathParentKeys.indexOf(l.value);return h.pathParentKeys.slice(C+1).every(g=>u.has(g))})}),c=k(()=>{var o,u;return((o=n.currentExpandKeys)==null?void 0:o.includes(l.value))&&((u=r.value)==null?void 0:u.length)});return{classNames:a,visibleNodeList:r,show:c,expanded:i,onTransitionEnd(){var o;(o=n.onExpandEnd)==null||o.call(n,l.value)}}}});function xa(e,t,a,n,l,i){const r=Q("BaseTreeNode"),c=Q("ExpandTransition");return E(),F(c,{expanded:e.expanded,onEnd:e.onTransitionEnd},{default:le(()=>[e.show?(E(),J("div",{key:0,class:x(e.classNames)},[(E(!0),J(Oe,null,qe(e.visibleNodeList,o=>(E(),F(r,_({key:o.key},o.treeNodeProps),null,16))),128))],2)):I("v-if",!0)]),_:1},8,["expanded","onEnd"])}var Ua=Te(Ha,[["render",xa]]),Ya=Object.defineProperty,ct=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,pt=(e,t,a)=>t in e?Ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,qa=(e,t)=>{for(var a in t||(t={}))Wa.call(t,a)&&pt(e,a,t[a]);if(ct)for(var a of ct(t))Ga.call(t,a)&&pt(e,a,t[a]);return e},Ja=ce({name:"TreeNode",inheritAttrs:!1,props:qa({},We.props),setup(e,{slots:t,attrs:a}){const n=Tt();return()=>te(Oe,null,[te(We,_(e,a,{key:n.value}),t),te(Ua,{key:n.value,nodeKey:n.value},null)])}});function Qa(e){const{defaultCheckedKeys:t,checkedKeys:a,key2TreeNode:n,checkStrictly:l,halfCheckedKeys:i,onlyCheckLeaf:r}=ae(e),c=O(!1),o=O([]),u=O([]),d=O(),h=O(),m=g=>Na({initCheckedKeys:g,key2TreeNode:n.value,checkStrictly:l.value,onlyCheckLeaf:r.value}),C=g=>{const D=m(g);[o.value,u.value]=D};return C(a.value||(t==null?void 0:t.value)||[]),Be(()=>{a.value?[d.value,h.value]=m(a.value):c.value&&(d.value=void 0,h.value=void 0,o.value=[],u.value=[]),c.value||(c.value=!0)}),{checkedKeys:k(()=>d.value||o.value),indeterminateKeys:k(()=>l.value&&i.value?i.value:h.value||u.value),setCheckedState(g,D,$=!1){return $?C(g):(o.value=g,u.value=D),[o.value,u.value]}}}function Vt(e){const{treeData:t,fieldNames:a,selectable:n,showLine:l,blockNode:i,checkable:r,loadMore:c,draggable:o}=ae(e),u=O([]);Be(()=>{var m,C;u.value=Ba(t.value||[],{selectable:(m=n==null?void 0:n.value)!=null?m:!1,showLine:!!(l!=null&&l.value),blockNode:!!(i!=null&&i.value),checkable:(C=r==null?void 0:r.value)!=null?C:!1,fieldNames:a==null?void 0:a.value,loadMore:!!(c!=null&&c.value),draggable:!!(o!=null&&o.value)})});const d=k(()=>ka(u.value)),h=k(()=>Sa(d.value));return{treeData:u,flattenTreeData:d,key2TreeNode:h}}const Xa=ce({name:"Tree",components:{VirtualList:Qt,TreeNode:Ja},props:{size:{type:String,default:"medium"},blockNode:{type:Boolean},defaultExpandAll:{type:Boolean,default:!0},multiple:{type:Boolean},checkable:{type:[Boolean,String,Function],default:!1},selectable:{type:[Boolean,Function],default:!0},checkStrictly:{type:Boolean},checkedStrategy:{type:String,default:"all"},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:Array},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},data:{type:Array,default:()=>[]},fieldNames:{type:Object},showLine:{type:Boolean},loadMore:{type:Function},draggable:{type:Boolean},allowDrop:{type:Function},filterTreeNode:{type:Function},searchValue:{type:String,default:""},virtualListProps:{type:Object},defaultExpandSelected:{type:Boolean},defaultExpandChecked:{type:Boolean},autoExpandParent:{type:Boolean,default:!0},halfCheckedKeys:{type:Array},onlyCheckLeaf:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},actionOnNodeClick:{type:String},disableSelectActionOnly:{type:Boolean,default:!1}},emits:{select:(e,t)=>!0,"update:selectedKeys":e=>!0,check:(e,t)=>!0,"update:checkedKeys":e=>!0,"update:halfCheckedKeys":e=>!0,expand:(e,t)=>!0,"update:expandedKeys":e=>!0,dragStart:(e,t)=>!0,dragEnd:(e,t)=>!0,dragOver:(e,t)=>!0,dragLeave:(e,t)=>!0,drop:e=>!0},setup(e,{emit:t,slots:a}){const{data:n,showLine:l,multiple:i,loadMore:r,checkStrictly:c,checkedKeys:o,defaultCheckedKeys:u,selectedKeys:d,defaultSelectedKeys:h,expandedKeys:m,defaultExpandedKeys:C,checkedStrategy:g,selectable:D,checkable:$,blockNode:T,fieldNames:j,size:Y,defaultExpandAll:K,filterTreeNode:V,draggable:A,allowDrop:W,defaultExpandSelected:z,defaultExpandChecked:L,autoExpandParent:oe,halfCheckedKeys:re,onlyCheckLeaf:pe,animation:G}=ae(e),M=Ve("tree"),q=k(()=>[`${M}`,{[`${M}-checkable`]:$.value,[`${M}-show-line`]:l.value},`${M}-size-${Y.value}`]),se=be(a,"switcher-icon"),p=be(a,"loading-icon"),S=be(a,"drag-icon"),R=be(a,"icon"),ne=be(a,"title"),Le=be(a,"extra"),{treeData:Fe,flattenTreeData:$e,key2TreeNode:P}=Vt(ee({treeData:n,selectable:D,showLine:l,blockNode:T,checkable:$,fieldNames:j,loadMore:r,draggable:A})),{checkedKeys:ve,indeterminateKeys:ie,setCheckedState:X}=Qa(ee({defaultCheckedKeys:u,checkedKeys:o,checkStrictly:c,key2TreeNode:P,halfCheckedKeys:re,onlyCheckLeaf:pe})),[fe,Ee]=Me((h==null?void 0:h.value)||[],ee({value:d})),Z=O([]),ye=O();function _e(){if(C!=null&&C.value){const s=new Set([]);return C.value.forEach(v=>{if(s.has(v))return;const f=P.value.get(v);f&&[...oe.value?f.pathParentKeys:[],v].forEach(y=>s.add(y))}),[...s]}if(K.value)return $e.value.filter(s=>s.children&&s.children.length).map(s=>s.key);if(z.value||L.value){const s=new Set([]),v=f=>{f.forEach(y=>{const b=P.value.get(y);b&&(b.pathParentKeys||[]).forEach(N=>s.add(N))})};return z.value&&v(fe.value),L.value&&v(ve.value),[...s]}return[]}const[me,he]=Me(_e(),ee({value:m})),ue=O([]),Ze=k(()=>{const s=new Set(me.value),v=new Set(ue.value);return $e.value.filter(f=>{var y;if(!(!V||!V.value||(V==null?void 0:V.value(f.treeNodeData))))return!1;const N=de(f.parentKey),ke=(y=f.pathParentKeys)==null?void 0:y.every(Ne=>s.has(Ne)&&!v.has(Ne));return N||ke})});function w(s,v=g.value){let f=[...s];return v==="parent"?f=s.filter(y=>{const b=P.value.get(y);return b&&!(!de(b.parentKey)&&s.includes(b.parentKey))}):v==="child"&&(f=s.filter(y=>{var b,N;return!((N=(b=P.value.get(y))==null?void 0:b.children)!=null&&N.length)})),f}function B(s){return s.map(v=>{var f;return((f=P.value.get(v))==null?void 0:f.treeNodeData)||void 0}).filter(Boolean)}function H(s){const{targetKey:v,targetChecked:f,newCheckedKeys:y,newIndeterminateKeys:b,event:N}=s,ke=v?P.value.get(v):void 0,Ne=w(y);t("update:checkedKeys",Ne),t("update:halfCheckedKeys",b),t("check",Ne,{checked:f,node:ke==null?void 0:ke.treeNodeData,checkedNodes:B(Ne),halfCheckedKeys:b,halfCheckedNodes:B(b),e:N})}function ge(s){const{targetKey:v,targetSelected:f,newSelectedKeys:y,event:b}=s,N=v?P.value.get(v):void 0;t("update:selectedKeys",y),t("select",y,{selected:f,node:N==null?void 0:N.treeNodeData,selectedNodes:B(y),e:b})}function Ce(s){const{targetKey:v,targetExpanded:f,newExpandedKeys:y,event:b}=s,N=v?P.value.get(v):void 0;t("expand",y,{expanded:f,node:N==null?void 0:N.treeNodeData,expandedNodes:B(y),e:b}),t("update:expandedKeys",y)}function Ft(s){const[v,f]=X(s,[],!0);H({newCheckedKeys:v,newIndeterminateKeys:f})}function _t(s){let v=s;!i.value&&s.length>1&&(v=[s[0]]),Ee(v),ge({newSelectedKeys:v})}function jt(s){ue.value=[],he(s),Ce({newExpandedKeys:s})}function At(s,v,f){if(!s.length)return;let y=[...ve.value],b=[...ie.value];s.forEach(N=>{const ke=P.value.get(N);ke&&([y,b]=Ue({node:ke,checked:v,checkedKeys:[...y],indeterminateKeys:[...b],checkStrictly:c.value}))}),X(y,b),H({targetKey:f,targetChecked:de(f)?void 0:v,newCheckedKeys:y,newIndeterminateKeys:b})}function Mt(s,v,f){if(!s.length)return;let y;if(i.value){const b=new Set(fe.value);s.forEach(N=>{v?b.add(N):b.delete(N)}),y=[...b]}else y=v?[s[0]]:[];Ee(y),ge({targetKey:f,targetSelected:de(f)?void 0:v,newSelectedKeys:y})}function Rt(s,v,f){const y=new Set(me.value);s.forEach(N=>{v?y.add(N):y.delete(N),at(N)});const b=[...y];he(b),Ce({targetKey:f,targetExpanded:de(f)?void 0:v,newExpandedKeys:b})}function et(s,v,f){const y=P.value.get(v);if(!y)return;const[b,N]=Ue({node:y,checked:s,checkedKeys:ve.value,indeterminateKeys:ie.value,checkStrictly:c.value});X(b,N),H({targetKey:v,targetChecked:s,newCheckedKeys:b,newIndeterminateKeys:N,event:f})}function zt(s,v){if(!P.value.get(s))return;let y,b;if(i.value){const N=new Set(fe.value);b=!N.has(s),b?N.add(s):N.delete(s),y=[...N]}else b=!0,y=[s];Ee(y),ge({targetKey:s,targetSelected:b,newSelectedKeys:y,event:v})}function tt(s,v,f){if(ue.value.includes(v)||!P.value.get(v))return;const b=new Set(me.value);s?b.add(v):b.delete(v);const N=[...b];he(N),G.value&&ue.value.push(v),Ce({targetKey:v,targetExpanded:s,newExpandedKeys:N,event:f})}function at(s){const v=ue.value.indexOf(s);ue.value.splice(v,1)}const Ht=k(()=>r!=null&&r.value?async s=>{if(!we(r.value))return;const v=P.value.get(s);if(!v)return;const{treeNodeData:f}=v;Z.value=[...new Set([...Z.value,s])];try{await r.value(f),Z.value=Z.value.filter(y=>y!==s),tt(!0,s),ve.value.includes(s)&&et(!0,s)}catch(y){Z.value=Z.value.filter(b=>b!==s),console.error("[tree]load data error: ",y)}}:void 0),nt=ee({treeProps:e,switcherIcon:se,loadingIcon:p,dragIcon:S,nodeIcon:R,nodeTitle:ne,nodeExtra:Le,treeData:Fe,flattenTreeData:$e,key2TreeNode:P,checkedKeys:ve,indeterminateKeys:ie,selectedKeys:fe,expandedKeys:me,loadingKeys:Z,currentExpandKeys:ue,onLoadMore:Ht,filterTreeNode:V,onCheck:et,onSelect:zt,onExpand:tt,onExpandEnd:at,allowDrop(s,v){const f=P.value.get(s);return f&&we(W.value)?!!W.value({dropNode:f.treeNodeData,dropPosition:v}):!0},onDragStart(s,v){const f=P.value.get(s);ye.value=f,f&&t("dragStart",v,f.treeNodeData)},onDragEnd(s,v){const f=P.value.get(s);ye.value=void 0,f&&t("dragEnd",v,f.treeNodeData)},onDragOver(s,v){const f=P.value.get(s);f&&t("dragOver",v,f.treeNodeData)},onDragLeave(s,v){const f=P.value.get(s);f&&t("dragLeave",v,f.treeNodeData)},onDrop(s,v,f){const y=P.value.get(s);ye.value&&y&&!(y.key===ye.value.key||y.pathParentKeys.includes(ye.value.key||""))&&t("drop",{e:f,dragNode:ye.value.treeNodeData,dropNode:y.treeNodeData,dropPosition:v})}});return va(Dt,nt),{classNames:q,visibleTreeNodeList:Ze,treeContext:nt,virtualListRef:O(),computedSelectedKeys:fe,computedExpandedKeys:me,computedCheckedKeys:ve,computedIndeterminateKeys:ie,getPublicCheckedKeys:w,getNodes:B,internalCheckNodes:At,internalSetCheckedKeys:Ft,internalSelectNodes:Mt,internalSetSelectedKeys:_t,internalExpandNodes:Rt,internalSetExpandedKeys:jt}},methods:{toggleCheck(e,t){const{key2TreeNode:a,onCheck:n,checkedKeys:l}=this.treeContext,i=!l.includes(e),r=a.get(e);r&&Se(r)&&n(i,e,t)},scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)},getSelectedNodes(){return this.getNodes(this.computedSelectedKeys)},getCheckedNodes(e={}){const{checkedStrategy:t,includeHalfChecked:a}=e,n=this.getPublicCheckedKeys(this.computedCheckedKeys,t);return[...this.getNodes(n),...a?this.getHalfCheckedNodes():[]]},getHalfCheckedNodes(){return this.getNodes(this.computedIndeterminateKeys)},getExpandedNodes(){return this.getNodes(this.computedExpandedKeys)},checkAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&Se(l)}):[];this.internalSetCheckedKeys(a)},checkNode(e,t=!0,a=!1){const{checkStrictly:n,treeContext:l}=this,{key2TreeNode:i}=l,r=Pe(e),c=(r?e:[e]).filter(o=>{const u=i.get(o);return u&&Se(u)&&(n||!a||Ca(u))});this.internalCheckNodes(c,t,r?void 0:e)},selectAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&ze(l)}):[];this.internalSetSelectedKeys(a)},selectNode(e,t=!0){const{key2TreeNode:a}=this.treeContext,n=Pe(e),l=(n?e:[e]).filter(i=>{const r=a.get(i);return r&&ze(r)});this.internalSelectNodes(l,t,n?void 0:e)},expandAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&rt(l)}):[];this.internalSetExpandedKeys(a)},expandNode(e,t=!0){const{key2TreeNode:a}=this.treeContext,n=Pe(e),l=(n?e:[e]).filter(i=>{const r=a.get(i);return r&&rt(r)});this.internalExpandNodes(l,t,n?void 0:e)}}});function Za(e,t,a,n,l,i){const r=Q("TreeNode"),c=Q("VirtualList");return E(),J("div",{class:x(e.classNames)},[e.virtualListProps?(E(),F(c,_({key:0,ref:"virtualListRef"},e.virtualListProps,{data:e.visibleTreeNodeList}),{item:le(({item:o})=>[te(r,_({key:`${e.searchValue}-${o.key}`},o.treeNodeProps),null,16)]),_:1},16,["data"])):(E(!0),J(Oe,{key:1},qe(e.visibleTreeNodeList,o=>(E(),F(r,_({key:o.key},o.treeNodeProps),null,16))),128))],2)}var je=Te(Xa,[["render",Za]]);const vt=Object.assign(je,{install:(e,t)=>{Nt(e,t);const a=Kt(t);e.component(a+je.name,je)}});var en=Object.defineProperty,tn=Object.defineProperties,an=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,yt=(e,t,a)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,on=(e,t)=>{for(var a in t||(t={}))nn.call(t,a)&&yt(e,a,t[a]);if(ft)for(var a of ft(t))ln.call(t,a)&&yt(e,a,t[a]);return e},rn=(e,t)=>tn(e,an(t));function sn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!fa(e)}var un=ce({name:"TreeSelectPanel",components:{Tree:vt},props:{treeProps:{type:Object,default:()=>({})},selectedKeys:{type:Array},showCheckable:{type:Boolean},treeSlots:{type:Object,default:()=>({})},scrollbar:{type:[Boolean,Object],default:!0}},emits:["change"],setup(e,{emit:t}){const{showCheckable:a,selectedKeys:n,treeProps:l,scrollbar:i}=ae(e),{displayScrollbar:r,scrollbarProps:c}=Xt(i),o=Ve("tree-select"),u=O(),d=k(()=>rn(on({},l.value),{disableSelectActionOnly:!0,checkedKeys:a.value?n.value:[],selectedKeys:a.value?[]:n.value})),h=(g,D)=>{var $,T;a.value?(T=($=u.value)==null?void 0:$.toggleCheck)==null||T.call($,g[0],D):t("change",g)},m=g=>{t("change",g)},C=()=>te(vt,_({ref:u},d.value,{onSelect:h,onCheck:m}),e.treeSlots);return()=>{if(r.value){let g;return te(Zt,_({class:`${o}-tree-wrapper`},c.value),sn(g=C())?g:{default:()=>[g]})}return te("div",{class:`${o}-tree-wrapper`},[C()])}}}),dn=Object.defineProperty,cn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,gt=(e,t,a)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,bt=(e,t)=>{for(var a in t||(t={}))vn.call(t,a)&&gt(e,a,t[a]);if(ht)for(var a of ht(t))fn.call(t,a)&&gt(e,a,t[a]);return e},yn=(e,t)=>cn(e,pn(t));function Qe(e){return Ge(e)}function Bt(e){return e!=null&&e!==""}function Xe(e){return Qe(e)?e.value:e}function hn(e){return Qe(e)?e.label:void 0}function mt(e){const t=Xe(e);return Bt(t)}function kt(e){return e.map(Xe).filter(Bt)}function gn(e){var t;const{defaultValue:a,modelValue:n,key2TreeNode:l,multiple:i,treeCheckable:r,fallbackOption:c,fieldNames:o}=ae(e);function u(K){const V=(Pe(K)?K:[K]).filter(mt);return i!=null&&i.value||r!=null&&r.value?V:V.slice(0,1)}function d(K,V){const A=[],W=K?K.filter(mt):[];if(W.length){const z=new Map;V==null||V.forEach(L=>{z.set(L.value,L)}),W.forEach(L=>{var oe,re,pe,G,M;const q=Xe(L),se=z.get(q),p=l.value.get(q);let S=null;const R=((oe=o==null?void 0:o.value)==null?void 0:oe.title)||"title";if(!p){const ne=we(c==null?void 0:c.value)?c==null?void 0:c.value(q):c==null?void 0:c.value;if(ne===!1)return;Ge(ne)&&(S=ne)}A.push(yn(bt(bt({},Qe(L)?L:{}),se||{}),{value:q,label:(M=(G=(pe=(re=hn(L))!=null?re:p==null?void 0:p.title)!=null?pe:se==null?void 0:se.label)!=null?G:S==null?void 0:S[R])!=null?M:q}))})}return A}const h=O(),m=O();Be(()=>{var K;const V=(n==null?void 0:n.value)!==void 0,A=u((K=n==null?void 0:n.value)!=null?K:[]),W=kt(A);m.value=V?d(W,d(A)):void 0,h.value=V?W:void 0});const C=u((t=a==null?void 0:a.value)!=null?t:[]),g=kt(C),D=d(g,d(C)),$=O(g||[]),T=O(D);ot($,()=>{T.value=d($.value,D)}),ot([h,m],([K,V])=>{$.value=K||[],T.value=V||[]});const j=k(()=>{var K;return(K=h.value)!=null?K:$.value}),Y=k(()=>{var K;return(K=m.value)!=null?K:T.value});return{selectedKeys:j,selectedValue:Y,setLocalSelectedKeys(K){$.value=K},localSelectedKeys:$,localSelectedValue:T}}function bn(e){const{searchValue:t,flattenTreeData:a,filterMethod:n,disableFilter:l,fieldNames:i}=ae(e),r=k(()=>{var g;return((g=i.value)==null?void 0:g.key)||"key"}),c=(g,D)=>{const $=D[r.value];return!de($)&&String($).indexOf(g)>-1},o=k(()=>(n==null?void 0:n.value)||c),u=O(),d=k(()=>!!t.value),h=k(()=>!(l!=null&&l.value)&&d.value&&u.value&&u.value.size===0),m=k(()=>l!=null&&l.value?void 0:g=>{var D,$;if(!d.value)return!0;const T=g[r.value];return($=(D=u.value)==null?void 0:D.has(T||""))!=null?$:!1}),C=ea((g,D)=>{const $=g.filter(j=>o.value(D,j.treeNodeData)),T=new Set;$.forEach(j=>{T.add(j.key),j.pathParentKeys.forEach(Y=>{T.add(Y)})}),u.value=T},100);return Be(()=>{l!=null&&l.value?u.value=void 0:C(a.value,t.value)}),{isEmptyFilterResult:h,filterTreeNode:m}}function mn(e,t){const a=`${t}-slot-`;return Object.keys(e).reduce((l,i)=>{if(i.startsWith(a)){const r=i.slice(a.length);r&&(l[r]=e[i])}return l},{})}var kn=Object.defineProperty,Sn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Ct=(e,t,a)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,It=(e,t)=>{for(var a in t||(t={}))Nn.call(t,a)&&Ct(e,a,t[a]);if(St)for(var a of St(t))Kn.call(t,a)&&Ct(e,a,t[a]);return e},Lt=(e,t)=>Sn(e,Cn(t));const wn=ce({name:"TreeSelect",components:{Trigger:ta,SelectView:aa,Panel:un,Empty:na,Spin:la},inheritAttrs:!1,props:{disabled:{type:Boolean},loading:{type:Boolean},error:{type:Boolean},size:{type:String},border:{type:Boolean,default:!0},allowSearch:{type:[Boolean,Object],default:e=>!!e.multiple},allowClear:{type:Boolean},placeholder:{type:String},maxTagCount:{type:Number},multiple:{type:Boolean},defaultValue:{type:[String,Number,Array,Object]},modelValue:{type:[String,Number,Array,Object]},fieldNames:{type:Object},data:{type:Array,default:()=>[]},labelInValue:{type:Boolean},treeCheckable:{type:Boolean},treeCheckStrictly:{type:Boolean},treeCheckedStrategy:{type:String,default:"all"},treeProps:{type:Object},triggerProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},dropdownStyle:{type:Object},dropdownClassName:{type:[String,Array]},filterTreeNode:{type:Function},loadMore:{type:Function},disableFilter:{type:Boolean},popupContainer:{type:[String,Object]},fallbackOption:{type:[Boolean,Function],default:!0},selectable:{type:[Boolean,String,Function],default:!0},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1}},emits:{change:e=>!0,"update:modelValue":e=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0,search:e=>!0,clear:()=>!0},setup(e,{emit:t,slots:a}){var n,l,i;const{defaultValue:r,modelValue:c,multiple:o,popupVisible:u,defaultPopupVisible:d,treeCheckable:h,treeCheckStrictly:m,data:C,fieldNames:g,disabled:D,labelInValue:$,filterTreeNode:T,disableFilter:j,dropdownStyle:Y,treeProps:K,fallbackOption:V,selectable:A,dropdownClassName:W}=ae(e),{mergedDisabled:z,eventHandlers:L}=oa({disabled:D}),oe=Ve("tree-select"),re=wt(ra,void 0),pe=(i=(l=re==null?void 0:(n=re.slots).empty)==null?void 0:l.call(n,{component:"tree-select"}))==null?void 0:i[0],G=k(()=>o.value||h.value),M=(w,B)=>{var H;return A.value==="leaf"?B.isLeaf:we(A.value)?A.value(w,B):(H=A.value)!=null?H:!1},q=k(()=>h.value?M:!1),se=k(()=>Ge(e.allowSearch)&&!!e.allowSearch.retainInputValue),{flattenTreeData:p,key2TreeNode:S}=Vt(ee({treeData:C,fieldNames:g,selectable:M,checkable:q})),{selectedKeys:R,selectedValue:ne,setLocalSelectedKeys:Le,localSelectedKeys:Fe,localSelectedValue:$e}=gn(ee({defaultValue:r,modelValue:c,key2TreeNode:S,multiple:o,treeCheckable:h,treeCheckStrictly:m,fallbackOption:V,fieldNames:g}));function P(w){return h.value?Se(w):ze(w)}const ve=k(()=>de(ne.value)?[]:G.value&&!z.value?ne.value.map(w=>{const B=S.value.get(w.value);return Lt(It({},w),{closable:!B||P(B)})}):ne.value),ie=w=>{Le(w),ba(()=>{var B,H;const ge=($.value?$e.value:Fe.value)||[],Ce=G.value?ge:ge[0];t("update:modelValue",Ce),t("change",Ce),(H=(B=L.value)==null?void 0:B.onChange)==null||H.call(B)})},X=O(""),[fe,Ee]=Me(d.value,ee({value:u})),Z=w=>{w!==fe.value&&(Ee(w),t("popup-visible-change",w),t("update:popupVisible",w)),w||he.value&&he.value.blur&&he.value.blur()},{isEmptyFilterResult:ye,filterTreeNode:_e}=bn(ee({searchValue:X,flattenTreeData:p,filterMethod:T,disableFilter:j,fieldNames:g})),me=k(()=>!p.value.length||ye.value),he=O(),ue=k(()=>{var w;return[(Y==null?void 0:Y.value)||{},(w=K==null?void 0:K.value)!=null&&w.virtualListProps?{"max-height":"unset"}:{}]});return{refSelectView:he,prefixCls:oe,TreeSelectEmpty:pe,selectedValue:ne,selectedKeys:R,mergedDisabled:z,searchValue:X,panelVisible:fe,isEmpty:me,computedFilterTreeNode:_e,isMultiple:G,selectViewValue:ve,computedDropdownStyle:ue,onSearchValueChange(w){w!==X.value&&(Z(!0),X.value=w,t("search",w))},onSelectChange(w){ie(w),X.value="",G.value||Z(!1)},onVisibleChange:Z,onInnerClear(){ie([]),t("clear")},pickSubCompSlots:mn,isSelectable:M,isCheckable:q,onBlur:()=>{!se.value&&X.value&&(X.value="")},onItemRemove(w){if(z.value)return;const B=S.value.get(w);if(h.value&&B){if(P(B)){const[H]=Ue({node:B,checked:!1,checkedKeys:R.value,indeterminateKeys:[],checkStrictly:m.value});ie(H)}}else{const H=R.value.filter(ge=>ge!==w);ie(H)}}}}});function $n(e,t,a,n,l,i){const r=Q("SelectView"),c=Q("Spin"),o=Q("Panel"),u=Q("Trigger");return E(),F(u,_({class:`${e.prefixCls}-trigger`,"auto-fit-popup-min-width":"",trigger:"click",position:"bl","popup-offset":4,"animation-name":"slide-dynamic-origin","prevent-focus":!0},e.triggerProps,{disabled:e.mergedDisabled,"popup-visible":e.panelVisible,"popup-container":e.popupContainer,"click-to-close":!e.allowSearch,"auto-fit-transform-origin":"",onPopupVisibleChange:e.onVisibleChange}),{content:le(()=>[De("div",{class:x([`${e.prefixCls}-popup`,{[`${e.prefixCls}-has-header`]:!!e.$slots.header,[`${e.prefixCls}-has-footer`]:!!e.$slots.footer},e.dropdownClassName]),style:ya(e.computedDropdownStyle)},[e.$slots.header&&(!e.isEmpty||e.showHeaderOnEmpty)?(E(),J("div",{key:0,class:x(`${e.prefixCls}-header`)},[U(e.$slots,"header")],2)):I("v-if",!0),e.loading?U(e.$slots,"loader",{key:1},()=>[te(c)]):e.isEmpty?U(e.$slots,"empty",{key:2},()=>[(E(),F(ha(e.TreeSelectEmpty?e.TreeSelectEmpty:"Empty")))]):(E(),F(o,{key:3,"selected-keys":e.selectedKeys,"show-checkable":e.treeCheckable,scrollbar:e.scrollbar,"tree-props":Lt(It({actionOnNodeClick:e.selectable==="leaf"?"expand":void 0,blockNode:!0},e.treeProps),{data:e.data,checkStrictly:e.treeCheckStrictly,checkedStrategy:e.treeCheckedStrategy,fieldNames:e.fieldNames,multiple:e.multiple,loadMore:e.loadMore,filterTreeNode:e.computedFilterTreeNode,size:e.size,checkable:e.isCheckable,selectable:e.isSelectable,searchValue:e.searchValue}),"tree-slots":e.pickSubCompSlots(e.$slots,"tree"),onChange:e.onSelectChange},null,8,["selected-keys","show-checkable","scrollbar","tree-props","tree-slots","onChange"])),e.$slots.footer&&(!e.isEmpty||e.showFooterOnEmpty)?(E(),J("div",{key:4,class:x(`${e.prefixCls}-footer`)},[U(e.$slots,"footer")],2)):I("v-if",!0)],6)]),default:le(()=>[U(e.$slots,"trigger",{},()=>[te(r,_({ref:"refSelectView","model-value":e.selectViewValue,"input-value":e.searchValue,"allow-search":!!e.allowSearch,"allow-clear":e.allowClear,loading:e.loading,size:e.size,"max-tag-count":e.maxTagCount,disabled:e.mergedDisabled,opened:e.panelVisible,error:e.error,bordered:e.border,placeholder:e.placeholder,multiple:e.isMultiple},e.$attrs,{onInputValueChange:e.onSearchValueChange,onClear:e.onInnerClear,onRemove:e.onItemRemove,onBlur:e.onBlur}),$t({_:2},[e.$slots.prefix?{name:"prefix",fn:le(()=>[U(e.$slots,"prefix")])}:void 0,e.$slots.label?{name:"label",fn:le(d=>[U(e.$slots,"label",Re(ga(d)))])}:void 0]),1040,["model-value","input-value","allow-search","allow-clear","loading","size","max-tag-count","disabled","opened","error","bordered","placeholder","multiple","onInputValueChange","onClear","onRemove","onBlur"])])]),_:3},16,["class","disabled","popup-visible","popup-container","click-to-close","onPopupVisibleChange"])}var Ae=Te(wn,[["render",$n]]);const En=Object.assign(Ae,{install:(e,t)=>{Nt(e,t);const a=Kt(t);e.component(a+Ae.name,Ae)}}),In=ce({name:"Select",__name:"index",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=k({get:()=>a.modelValue,set:l=>{t("update:modelValue",l)}});return(l,i)=>{const r=En;return E(),F(sa,null,{default:le(()=>[te(r,_({modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c)},l.$attrs),null,16,["modelValue"])]),_:1})}}});export{In as default};
