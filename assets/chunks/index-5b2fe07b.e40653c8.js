import{_ as Se,J as ze,L as Ve,N as $e,O as Be,Q as Le,W as Ie,X as Oe,Y as $,Z as Re,$ as te,a0 as xe,a1 as Ne,a2 as Pe,a3 as Te,a4 as Ee}from"./index-fb59d3e2.129620ef.js";import{U as He}from"./index-8fa1e870.fe5e36ce.js";import{d as ue,k as f,w as F,f as Ae,D as M,o as y,c as B,n as j,H as ke,t as D,C as W,G as L,B as _,z as Fe,E as G,r as Me,a3 as je,m,h as le,A as De}from"./framework.b419ffca.js";const We=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],Ue=e=>{const t={};return We.forEach(o=>{t[o]=e.getPropertyValue(o)}),t};var _e=Object.defineProperty,oe=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,ne=(e,t,o)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,re=(e,t)=>{for(var o in t||(t={}))Ge.call(t,o)&&ne(e,o,t[o]);if(oe)for(var o of oe(t))Je.call(t,o)&&ne(e,o,t[o]);return e};const Qe=ue({name:"Textarea",components:{ResizeObserver:ze,IconHover:Ve,IconClose:$e},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function},textareaAttrs:{type:Object}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:o}){const{disabled:w,error:g,modelValue:c}=je(e),v=Be("textarea"),{mergedDisabled:p,mergedError:h,eventHandlers:n}=Le({disabled:w,error:g}),s=f(),J=f(),b=f(),Q=f(),I=f(e.defaultValue),d=m(()=>{var a;return(a=c.value)!=null?a:I.value}),[se,ie]=Pe(s);F(c,a=>{(Ie(a)||Oe(a))&&(I.value="")});const S=m(()=>$(e.maxLength)&&!!e.maxLength.errorOnly),i=m(()=>$(e.maxLength)?e.maxLength.length:e.maxLength),z=a=>{var l;return Ne(e.wordLength)?e.wordLength(a):(l=a.length)!=null?l:0},X=m(()=>z(d.value)),Y=m(()=>h.value||!!(i.value&&S.value&&X.value>i.value)),C=f(!1),O=f(!1),de=m(()=>e.allowClear&&!p.value&&d.value),R=f(!1),Z=f(""),x=()=>{se(),le(()=>{s.value&&d.value!==s.value.value&&(s.value.value=d.value,ie())})},V=(a,l=!0)=>{var r,u;i.value&&!S.value&&z(a)>i.value&&(a=(u=(r=e.wordSlice)==null?void 0:r.call(e,a,i.value))!=null?u:a.slice(0,i.value)),I.value=a,l&&t("update:modelValue",a),x()};let N=d.value;const q=(a,l)=>{var r,u;a!==N&&(N=a,t("change",a,l),(u=(r=n.value)==null?void 0:r.onChange)==null||u.call(r,l))},ve=a=>{var l,r;O.value=!0,N=d.value,t("focus",a),(r=(l=n.value)==null?void 0:l.onFocus)==null||r.call(l,a)},fe=a=>{var l,r;O.value=!1,t("blur",a),(r=(l=n.value)==null?void 0:l.onBlur)==null||r.call(l,a),q(d.value,a)},me=a=>{var l,r;const{value:u}=a.target;if(a.type==="compositionend"){if(R.value=!1,Z.value="",i.value&&!S.value&&d.value.length>=i.value&&z(u)>i.value){x();return}t("input",u,a),V(u),(r=(l=n.value)==null?void 0:l.onInput)==null||r.call(l,a)}else R.value=!0},ce=a=>{var l,r;const{value:u}=a.target;if(R.value)Z.value=u;else{if(i.value&&!S.value&&d.value.length>=i.value&&z(u)>i.value&&a.inputType==="insertText"){x();return}t("input",u,a),V(u),(r=(l=n.value)==null?void 0:l.onInput)==null||r.call(l,a)}},pe=a=>{V(""),q("",a),t("clear",a)};F(c,a=>{a!==d.value&&V(a??"",!1)});const ge=a=>Re(o,te),K=a=>xe(o,te),he=K(),Ce=m(()=>{const a=re(re({},he),e.textareaAttrs);return Y.value&&(a["aria-invalid"]=!0),a}),ye=m(()=>[`${v}-wrapper`,{[`${v}-focus`]:O.value,[`${v}-disabled`]:p.value,[`${v}-error`]:Y.value,[`${v}-scroll`]:C.value}]);let ee;const P=f(0),T=f(0),E=m(()=>!$(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*P.value+T.value),H=m(()=>!$(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*P.value+T.value),A=()=>{const a=Ue(ee);P.value=Number.parseInt(a["line-height"]||0,10),T.value=Number.parseInt(a["border-width"]||0,10)*2+Number.parseInt(a["padding-top"]||0,10)+Number.parseInt(a["padding-bottom"]||0,10),Q.value=a,le(()=>{var l;const r=(l=b.value)==null?void 0:l.offsetHeight;let u=r??0,ae="hidden";E.value&&u<E.value&&(u=E.value),H.value&&u>H.value&&(u=H.value,ae="auto"),J.value={height:`${u}px`,resize:"none",overflow:ae}})};Ae(()=>{s.value&&(ee=window.getComputedStyle(s.value),e.autoSize&&A()),k()});const we=()=>{e.autoSize&&b.value&&A(),k()},be=a=>{s.value&&a.target!==s.value&&(a.preventDefault(),s.value.focus())},k=()=>{s.value&&(s.value.scrollHeight>s.value.offsetHeight?C.value||(C.value=!0):C.value&&(C.value=!1))};return F(d,()=>{e.autoSize&&b.value&&A(),k()}),{prefixCls:v,wrapperCls:ye,textareaRef:s,textareaStyle:J,mirrorRef:b,mirrorStyle:Q,computedValue:d,showClearBtn:de,valueLength:X,computedMaxLength:i,mergedDisabled:p,mergeTextareaAttrs:Ce,getWrapperAttrs:ge,getTextareaAttrs:K,handleInput:ce,handleFocus:ve,handleBlur:fe,handleComposition:me,handleClear:pe,handleResize:we,handleMousedown:be}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),Xe=["disabled","value","placeholder"];function Ye(e,t,o,w,g,c){const v=M("resize-observer"),p=M("icon-close"),h=M("icon-hover");return y(),B("div",G(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...n)=>e.handleMousedown&&e.handleMousedown(...n))}),[e.autoSize?(y(),B("div",{key:0,ref:"mirrorRef",class:j(`${e.prefixCls}-mirror`),style:ke(e.mirrorStyle)},D(`${e.computedValue}
`),7)):W("v-if",!0),L(v,{onResize:e.handleResize},{default:_(()=>[Fe("textarea",G({ref:"textareaRef"},e.mergeTextareaAttrs,{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...n)=>e.handleInput&&e.handleInput(...n)),onFocus:t[1]||(t[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:t[2]||(t[2]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onCompositionstart:t[3]||(t[3]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionupdate:t[4]||(t[4]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionend:t[5]||(t[5]=(...n)=>e.handleComposition&&e.handleComposition(...n))}),null,16,Xe)]),_:1},8,["onResize"]),Me(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(y(),B("div",{key:1,class:j(`${e.prefixCls}-word-limit`)},D(e.valueLength)+"/"+D(e.computedMaxLength),3)):W("v-if",!0),e.showClearBtn?(y(),B("div",{key:2,class:j(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...n)=>e.handleClear&&e.handleClear(...n))},[L(h,null,{default:_(()=>[L(p)]),_:1})],2)):W("v-if",!0)],16)}var U=Se(Qe,[["render",Ye]]);const Ze=Object.assign(U,{install:(e,t)=>{Te(e,t);const o=Ee(t);e.component(o+U.name,U)}}),aa=ue({name:"Textarea",__name:"index",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,w=t,g=m({get:()=>o.modelValue,set:c=>{w("update:modelValue",c)}});return(c,v)=>{const p=Ze;return y(),De(He,null,{default:_(()=>[L(p,G({modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=h=>g.value=h)},c.$attrs),null,16,["modelValue"])]),_:1})}}});export{aa as default};
