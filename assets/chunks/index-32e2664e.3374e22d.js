import{a8 as A,Z as P,aa as S,L as Re,ai as Te,X as Fe,W as He,ae as Ee,af as ze,a5 as Ae,a6 as Ne}from"./index-af7a4902.16c51cd5.js";import{e as _e}from"./index-b9c14449.e738648d.js";import{g as le,P as Y,k,D as Me,j as Le,I as Ue,u as Ge,l as We,e as q,c as te,f as re,d as J,a as Xe,h as Ze}from"./input-range.1d84a51b.js";import{a4 as ee,m as g,w as B,d as ae,j as me,G as ne,a1 as z,D as se,o as N,A as _,B as O,z as qe,n as Je,I as ue,E as x,a5 as ie,r as K,i as Ke}from"./framework.f10db147.js";function Qe(e){const{modelValue:n,defaultValue:o,format:i,isRange:r}=ee(e);function c(){return r.value?[]:void 0}function f(d){if(!P(d))return r.value?S(d)?d:[d,void 0]:d}const u=g(()=>{const d=f(n.value);return le(d,i.value)}),p=g(()=>{const d=f(o.value);return le(d,i.value)}),[I,D]=A(P(u.value)?P(p.value)?c():p.value:u.value);B(u,()=>{P(u.value)&&D(c())});const b=g(()=>u.value||I.value),[R,T]=A(b.value);B([b],()=>{T(b.value)});const[M,w]=A();return B([R],()=>{w(void 0)}),{computedValue:b,panelValue:R,inputValue:M,setValue:D,setPanelValue:T,setInputValue:w}}var Ye=Object.defineProperty,xe=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,de=(e,n,o)=>n in e?Ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,oa=(e,n)=>{for(var o in n||(n={}))aa.call(n,o)&&de(e,o,n[o]);if(pe)for(var o of pe(n))na.call(n,o)&&de(e,o,n[o]);return e},la=(e,n)=>xe(e,ea(n)),ta=ae({name:"TimePickerRangePanel",components:{Panel:Y},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:n}){const{value:o,displayIndex:i}=ee(e),r=me(i.value);B(i,()=>{r.value=i.value});const c=g(()=>o!=null&&o.value?o.value[r.value]:void 0);function f(p){const I=P(o)||P(o==null?void 0:o.value)?[]:[...o.value];I[r.value]=p,n("select",I)}function u(){if(k(o==null?void 0:o.value))n("confirm",o==null?void 0:o.value);else{const p=(r.value+1)%2;r.value=p,n("display-index-change",p),n("update:displayIndex",p)}}return{displayValue:c,onSelect:f,onConfirm:u}},render(){const e=la(oa({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return ne(Y,e,this.$slots)}}),ra=Object.defineProperty,ce=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,fe=(e,n,o)=>n in e?ra(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ve=(e,n)=>{for(var o in n||(n={}))sa.call(n,o)&&fe(e,o,n[o]);if(ce)for(var o of ce(n))ua.call(n,o)&&fe(e,o,n[o]);return e};const ia=ae({name:"TimePicker",components:{Trigger:Te,DateInput:Me,DateRangeInput:Le,Panel:Y,RangePanel:ta,IconClockCircle:Ue},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:String},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,n)=>!0,"update:modelValue":e=>!0,select:(e,n)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:n}){const{type:o,format:i,use12Hours:r,modelValue:c,defaultValue:f,popupVisible:u,defaultPopupVisible:p,disabled:I,placeholder:D,disableConfirm:b,disabledHours:R,disabledMinutes:T,disabledSeconds:M}=ee(e),{mergedDisabled:w,eventHandlers:d}=Fe({disabled:I}),C=g(()=>o.value==="time-range"),ge=He("timepicker"),F=me(),{format:v,use12Hours:be}=Ge(z({format:i,use12Hours:r})),{computedValue:L,panelValue:V,inputValue:U,setValue:Ve,setPanelValue:G,setInputValue:H}=Qe(z({modelValue:c,defaultValue:f,isRange:C,format:v})),[$,ye]=Ee(p.value,z({value:u})),j=a=>{a!==$.value&&(ye(a),n("popup-visible-change",a),n("update:popupVisible",a))},{t:oe}=ze(),[y,W]=A(0),Pe=g(()=>{const a=D==null?void 0:D.value;return C.value?P(a)?oe("datePicker.rangePlaceholder.time"):S(a)?a:[a,a]:P(a)?oe("datePicker.placeholder.time"):a}),X=We(z({disabledHours:R,disabledMinutes:T,disabledSeconds:M}));function Ce(a){var l,t;if(Ze(a,L.value)){const m=q(a,v.value),s=te(a);n("update:modelValue",m),n("change",m,s),(t=(l=d.value)==null?void 0:l.onChange)==null||t.call(l)}}function h(a,l){if(X(a))return;let t=a;if(S(a)){const m=J();t=a.map(s=>(s&&(s=s.year(m.year()),s=s.month(m.month()),s=s.date(m.date())),s)),k(t)&&(t=Xe(t)),(t==null?void 0:t.length)===0&&(t=void 0)}Ce(t),Ve(t),l!==$.value&&j(l)}function Z(a,l){G(a),l!==$.value&&j(l)}function E(a){F.value&&F.value.focus&&F.value.focus(a)}function he(a){w.value||(j(a),a&&Ke(()=>{E(y.value)}))}function Ie(a){const l=q(a,v.value),t=te(a);n("select",l,t),b.value&&(!C.value||k(a))?h(a,!0):(Z(a,!0),H(void 0))}function Se(a){h(a,!1)}function Oe(){h(V.value||L.value,!1)}function De(){if(k(V.value))h(V.value,!1);else{const a=(y.value+1)%2;W(a),E(a)}}function we(a){j(!0);const l=a.target.value;if(H(l),!re(l,v.value))return;const t=J(l,v.value);X(t)||(b.value?h(t,!0):Z(t,!0))}function $e(a){j(!0);const l=a.target.value,t=S(U.value)?[...U.value]:S(V.value)&&q(V.value,v.value)||[];if(t[y.value]=l,H(t),!re(l,v.value))return;const m=J(l,v.value);if(X(m))return;const s=S(V.value)?[...V.value]:[];s[y.value]=m,b.value&&k(s)?h(s,!0):Z(s,!0)}function je(a){a.stopPropagation(),G(void 0),h(void 0,C.value)}B($,(a,l)=>{a!==l&&G(L.value),a||H(void 0)});const ke=g(()=>C.value?{focusedIndex:y.value,onFocusedIndexChange:a=>{W(a)},onChange:$e,onPressEnter:De}:{onChange:we,onPressEnter:Oe}),Be=g(()=>C.value?{displayIndex:y.value,onDisplayIndexChange:a=>{W(a),E(a)}}:{});return{refInput:F,isRange:C,prefixCls:ge,panelVisible:$,focusedInputIndex:y,computedPlaceholder:Pe,panelValue:V,inputValue:U,computedFormat:v,computedUse12Hours:be,inputProps:ke,panelProps:Be,mergedDisabled:w,onPanelVisibleChange:he,onInputClear:je,onPanelSelect:Ie,onPanelConfirm:Se,onPanelClick:()=>{E(y.value)}}}});function pa(e,n,o,i,r,c){const f=se("IconClockCircle"),u=se("Trigger");return N(),_(u,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer,onPopupVisibleChange:e.onPanelVisibleChange},{content:O(()=>[qe("div",{class:Je(`${e.prefixCls}-container`),onClick:n[0]||(n[0]=(...p)=>e.onPanelClick&&e.onPanelClick(...p))},[(N(),_(ue(e.isRange?"RangePanel":"Panel"),x(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),ie({_:2},[e.$slots.extra?{name:"extra-footer",fn:O(()=>[K(e.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:O(()=>[(N(),_(ue(e.isRange?"DateRangeInput":"DateInput"),x(ve(ve({},e.$attrs),e.inputProps),{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),ie({"suffix-icon":O(()=>[K(e.$slots,"suffix-icon",{},()=>[ne(f)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:O(()=>[K(e.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","editable","allow-clear","placeholder","onClear"]))]),_:3},8,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var Q=Re(ia,[["render",pa]]);const da=Object.assign(Q,{install:(e,n)=>{Ae(e,n);const o=Ne(n);e.component(o+Q.name,Q)}}),ga=ae({name:"Time",__name:"index",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,i=g({get:()=>o.modelValue,set:r=>{n("update:modelValue",r)}});return(r,c)=>{const f=da;return N(),_(_e,null,{default:O(()=>[ne(f,x({modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=u=>i.value=u)},r.$attrs),null,16,["modelValue"])]),_:1})}}});export{ga as default};
