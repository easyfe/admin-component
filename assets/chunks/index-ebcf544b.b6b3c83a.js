import{a8 as z,W as P,aa as S,K as Re,ai as Te,Q as Fe,P as He,ae as Ee,af as Ae,a3 as ze,a4 as Ne}from"./index-a0dda9fd.df1da76d.js";import{U as Me}from"./index-22ff086a.80c7d6b4.js";import{g as te,P as ee,k as j,D as Ue,j as _e,I as Le,u as Ge,l as Ke,e as J,c as re,f as se,d as X,a as Qe,h as We}from"./input-range.c6f3b84a.js";import{a3 as ae,l as g,w as B,d as ne,i as me,G as oe,a0 as A,D as ue,o as N,A as M,B as O,z as qe,n as Je,I as ie,E as U,a4 as pe,r as Y,h as Xe}from"./framework.3c8e636d.js";function Ye(e){const{modelValue:n,defaultValue:o,format:p,isRange:s}=ae(e);function d(){return s.value?[]:void 0}function c(f){if(!P(f))return s.value?S(f)?f:[f,void 0]:f}const i=g(()=>{const f=c(n.value);return te(f,p.value)}),u=g(()=>{const f=c(o.value);return te(f,p.value)}),[I,D]=z(P(i.value)?P(u.value)?d():u.value:i.value);B(i,()=>{P(i.value)&&D(d())});const b=g(()=>i.value||I.value),[R,T]=z(b.value);B([b],()=>{T(b.value)});const[_,w]=z();return B([R],()=>{w(void 0)}),{computedValue:b,panelValue:R,inputValue:_,setValue:D,setPanelValue:T,setInputValue:w}}var Ze=Object.defineProperty,xe=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,ce=(e,n,o)=>n in e?Ze(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,oa=(e,n)=>{for(var o in n||(n={}))aa.call(n,o)&&ce(e,o,n[o]);if(de)for(var o of de(n))na.call(n,o)&&ce(e,o,n[o]);return e},la=(e,n)=>xe(e,ea(n)),ta=ne({name:"TimePickerRangePanel",components:{Panel:ee},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:n}){const{value:o,displayIndex:p}=ae(e),s=me(p.value);B(p,()=>{s.value=p.value});const d=g(()=>o!=null&&o.value?o.value[s.value]:void 0);function c(u){const I=P(o)||P(o==null?void 0:o.value)?[]:[...o.value];I[s.value]=u,n("select",I)}function i(){if(j(o==null?void 0:o.value))n("confirm",o==null?void 0:o.value);else{const u=(s.value+1)%2;s.value=u,n("display-index-change",u),n("update:displayIndex",u)}}return{displayValue:d,onSelect:c,onConfirm:i}},render(){const e=la(oa({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return oe(ee,e,this.$slots)}}),ra=Object.defineProperty,fe=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,ve=(e,n,o)=>n in e?ra(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Z=(e,n)=>{for(var o in n||(n={}))sa.call(n,o)&&ve(e,o,n[o]);if(fe)for(var o of fe(n))ua.call(n,o)&&ve(e,o,n[o]);return e};const ia=ne({name:"TimePicker",components:{Trigger:Te,DateInput:Ue,DateRangeInput:_e,Panel:ee,RangePanel:ta,IconClockCircle:Le},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:[String,Array]},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,n)=>!0,"update:modelValue":e=>!0,select:(e,n)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:n}){const{type:o,format:p,use12Hours:s,modelValue:d,defaultValue:c,popupVisible:i,defaultPopupVisible:u,disabled:I,placeholder:D,disableConfirm:b,disabledHours:R,disabledMinutes:T,disabledSeconds:_}=ae(e),{mergedDisabled:w,eventHandlers:f}=Fe({disabled:I}),C=g(()=>o.value==="time-range"),ge=He("timepicker"),F=me(),{format:v,use12Hours:be}=Ge(A({format:p,use12Hours:s})),{computedValue:L,panelValue:V,inputValue:G,setValue:Ve,setPanelValue:K,setInputValue:H}=Ye(A({modelValue:d,defaultValue:c,isRange:C,format:v})),[$,ye]=Ee(u.value,A({value:i})),k=a=>{a!==$.value&&(ye(a),n("popup-visible-change",a),n("update:popupVisible",a))},{t:le}=Ae(),[y,Q]=z(0),Pe=g(()=>{const a=D==null?void 0:D.value;return C.value?P(a)?le("datePicker.rangePlaceholder.time"):S(a)?a:[a,a]:P(a)?le("datePicker.placeholder.time"):a}),W=Ke(A({disabledHours:R,disabledMinutes:T,disabledSeconds:_}));function Ce(a){var l,t;if(We(a,L.value)){const m=J(a,v.value),r=re(a);n("update:modelValue",m),n("change",m,r),(t=(l=f.value)==null?void 0:l.onChange)==null||t.call(l)}}function h(a,l){if(W(a))return;let t=a;if(S(a)){const m=X();t=a.map(r=>(r&&(r=r.year(m.year()),r=r.month(m.month()),r=r.date(m.date())),r)),j(t)&&(t=Qe(t)),(t==null?void 0:t.length)===0&&(t=void 0)}Ce(t),Ve(t),l!==$.value&&k(l)}function q(a,l){K(a),l!==$.value&&k(l)}function E(a){F.value&&F.value.focus&&F.value.focus(a)}function he(a){w.value||(k(a),a&&Xe(()=>{E(y.value)}))}function Ie(a){const l=J(a,v.value),t=re(a);n("select",l,t),b.value&&(!C.value||j(a))?h(a,!0):(q(a,!0),H(void 0))}function Se(a){h(a,!1)}function Oe(){h(V.value||L.value,!1)}function De(){if(j(V.value))h(V.value,!1);else{const a=(y.value+1)%2;Q(a),E(a)}}function we(a){k(!0);const l=a.target.value;if(H(l),!se(l,v.value))return;const t=X(l,v.value);W(t)||(b.value?h(t,!0):q(t,!0))}function $e(a){k(!0);const l=a.target.value,t=S(G.value)?[...G.value]:S(V.value)&&J(V.value,v.value)||[];if(t[y.value]=l,H(t),!se(l,v.value))return;const m=X(l,v.value);if(W(m))return;const r=S(V.value)?[...V.value]:[];r[y.value]=m,b.value&&j(r)?h(r,!0):q(r,!0)}function ke(a){a.stopPropagation(),K(void 0),h(void 0,C.value)}B($,(a,l)=>{a!==l&&K(L.value),a||H(void 0)});const je=g(()=>C.value?{focusedIndex:y.value,onFocusedIndexChange:a=>{Q(a)},onChange:$e,onPressEnter:De}:{onChange:we,onPressEnter:Oe}),Be=g(()=>C.value?{displayIndex:y.value,onDisplayIndexChange:a=>{Q(a),E(a)}}:{});return{refInput:F,isRange:C,prefixCls:ge,panelVisible:$,focusedInputIndex:y,computedPlaceholder:Pe,panelValue:V,inputValue:G,computedFormat:v,computedUse12Hours:be,inputProps:je,panelProps:Be,mergedDisabled:w,onPanelVisibleChange:he,onInputClear:ke,onPanelSelect:Ie,onPanelConfirm:Se,onPanelClick:()=>{E(y.value)}}}});function pa(e,n,o,p,s,d){const c=ue("IconClockCircle"),i=ue("Trigger");return N(),M(i,U({trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer},Z({},e.triggerProps),{onPopupVisibleChange:e.onPanelVisibleChange}),{content:O(()=>[qe("div",{class:Je(`${e.prefixCls}-container`),onClick:n[0]||(n[0]=(...u)=>e.onPanelClick&&e.onPanelClick(...u))},[(N(),M(ie(e.isRange?"RangePanel":"Panel"),U(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),pe({_:2},[e.$slots.extra?{name:"extra-footer",fn:O(()=>[Y(e.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:O(()=>[(N(),M(ie(e.isRange?"DateRangeInput":"DateInput"),U(Z(Z({},e.$attrs),e.inputProps),{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,readonly:e.readonly,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),pe({"suffix-icon":O(()=>[Y(e.$slots,"suffix-icon",{},()=>[oe(c)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:O(()=>[Y(e.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","readonly","editable","allow-clear","placeholder","onClear"]))]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var x=Re(ia,[["render",pa]]);const da=Object.assign(x,{install:(e,n)=>{ze(e,n);const o=Ne(n);e.component(o+x.name,x)}}),ga=ne({name:"Time",__name:"index",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,p=n,s=g({get:()=>o.modelValue,set:d=>{p("update:modelValue",d)}});return(d,c)=>{const i=da;return N(),M(Me,null,{default:O(()=>[oe(i,U({modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u)},d.$attrs),null,16,["modelValue"])]),_:1})}}});export{ga as default};
