import{d as w,h as U,U as H,y as A,D as c,o as i,c as y,n as h,r as C,A as f,C as _,z as N,G as m,B as F,a1 as T,a2 as V,a3 as z,a4 as O,j as D}from"./framework.f5b7da40.js";import{_ as G,I as J,A as K,C as Q,E as X,H as Y,J as Z,K as q,L as P,N as R,O as b,P as W,Q as x,V as ee,X as se,Z as oe}from"./index-26f37704.e07d1ef6.js";const ne=w({name:"Message",components:{AIconHover:J,IconInfoCircleFill:K,IconCheckCircleFill:Q,IconExclamationCircleFill:X,IconCloseCircleFill:Y,IconClose:Z,IconLoading:q},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:s}){const o=P("message");let r=0;const l=()=>{s("close")},n=()=>{e.duration>0&&(r=window.setTimeout(l,e.duration))},t=()=>{r&&(window.clearTimeout(r),r=0)};return U(()=>{n()}),H(()=>{e.resetOnUpdate&&(t(),n())}),A(()=>{t()}),{handleMouseEnter:()=>{e.resetOnHover&&t()},handleMouseLeave:()=>{e.resetOnHover&&n()},prefixCls:o,handleClose:l}}});function te(e,s,o,r,l,n){const t=c("icon-info-circle-fill"),a=c("icon-check-circle-fill"),u=c("icon-exclamation-circle-fill"),S=c("icon-close-circle-fill"),j=c("icon-loading"),B=c("icon-close"),L=c("a-icon-hover");return i(),y("li",{role:"alert",class:h([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:s[1]||(s[1]=(...p)=>e.handleMouseEnter&&e.handleMouseEnter(...p)),onMouseleave:s[2]||(s[2]=(...p)=>e.handleMouseLeave&&e.handleMouseLeave(...p))},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(i(),y("span",{key:0,class:h(`${e.prefixCls}-icon`)},[C(e.$slots,"icon",{},()=>[e.type==="info"?(i(),f(t,{key:0})):e.type==="success"?(i(),f(a,{key:1})):e.type==="warning"?(i(),f(u,{key:2})):e.type==="error"?(i(),f(S,{key:3})):e.type==="loading"?(i(),f(j,{key:4})):_("v-if",!0)])],2)):_("v-if",!0),N("span",{class:h(`${e.prefixCls}-content`)},[C(e.$slots,"default")],2),e.closable?(i(),y("span",{key:1,class:h(`${e.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...p)=>e.handleClose&&e.handleClose(...p))},[m(L,null,{default:F(()=>[m(B)]),_:1})],2)):_("v-if",!0)],34)}var ae=G(ne,[["render",te]]);function le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!V(e)}var re=w({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,s){const o=P("message-list"),{zIndex:r}=R("message",{runOnMounted:!0});return()=>{let l;return m(T,{class:[o,`${o}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:r.value},onAfterLeave:()=>s.emit("afterClose")},le(l=e.messages.map(n=>{const t={default:b(n.content),icon:b(n.icon)};return m(ae,{key:n.id,type:n.type,duration:n.duration,closable:n.closable,resetOnUpdate:n.resetOnUpdate,resetOnHover:n.resetOnHover,onClose:()=>s.emit("close",n.id)},t)}))?l:{default:()=>[l]})}}}),ie=Object.defineProperty,ce=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,I=(e,s,o)=>s in e?ie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,v=(e,s)=>{for(var o in s||(s={}))de.call(s,o)&&I(e,o,s[o]);if(M)for(var o of M(s))pe.call(s,o)&&I(e,o,s[o]);return e},k=(e,s)=>ce(e,ue(s));class fe{constructor(s,o){this.messageCount=0,this.add=n=>{var t;this.messageCount++;const a=(t=n.id)!=null?t:`__arco_message_${this.messageCount}`;if(this.messageIds.has(a))return this.update(a,n);const u=z(v({id:a},n));return this.messages.value.push(u),this.messageIds.add(a),{close:()=>this.remove(a)}},this.update=(n,t)=>{for(let a=0;a<this.messages.value.length;a++)if(this.messages.value[a].id===n){const u=!x(t.duration);Object.assign(this.messages.value[a],k(v({},t),{id:n,resetOnUpdate:u}));break}return{close:()=>this.remove(n)}},this.remove=n=>{for(let t=0;t<this.messages.value.length;t++){const a=this.messages.value[t];if(a.id===n){ee(a.onClose)&&a.onClose(n),this.messages.value.splice(t,1),this.messageIds.delete(n);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(O(null,this.container),document.body.removeChild(this.container),this.container=null,d[this.position]=void 0)};const{position:r="top"}=s;this.container=se("message"),this.messageIds=new Set,this.messages=D([]),this.position=r;const l=m(re,{messages:this.messages.value,position:r,onClose:this.remove,onAfterClose:this.destroy});(o??$._context)&&(l.appContext=o??$._context),O(l,this.container),document.body.appendChild(this.container)}}const d={},E=[...oe,"loading","normal"],g=E.reduce((e,s)=>(e[s]=(o,r)=>{W(o)&&(o={content:o});const l=v({type:s},o),{position:n="top"}=l;return d[n]||(d[n]=new fe(l,r)),d[n].add(l)},e),{});g.clear=e=>{var s;e?(s=d[e])==null||s.clear():Object.values(d).forEach(o=>o==null?void 0:o.clear())};const $=k(v({},g),{install:e=>{const s={clear:g.clear};for(const o of E)s[o]=(r,l=e._context)=>g[o](r,l);e.config.globalProperties.$message=s},_context:null});export{$ as M};
