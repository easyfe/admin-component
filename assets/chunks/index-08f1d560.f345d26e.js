import{a8 as E,Z as C,aa as S,N as Be,ai as Re,X as $e,W as Te,ae as Fe,af as He,a5 as je,a6 as we}from"./index-cb78ba23.fb262486.js";import{J as Ae}from"./index-1aa7bce8.46e16019.js";import{g as oe,P as _,k as T,D as Oe,j as ze,I as Ee,u as Ne,l as Me,e as K,c as te,f as se,d as Q,a as Ue,h as Le}from"./input-range.ff7cacca.js";import{a3 as ee,l as g,w as F,d as ae,i as de,G as ne,a0 as z,D as ue,o as N,A as M,B as D,z as Ge,n as Je,I as ie,E as U,a4 as re,r as Y,h as We}from"./framework.f715ecba.js";function Xe(e){const{modelValue:n,defaultValue:t,format:d,isRange:u}=ee(e);function p(){return u.value?[]:void 0}function c(f){if(!C(f))return u.value?S(f)?f:[f,void 0]:f}const r=g(()=>{const f=c(n.value);return oe(f,d.value)}),i=g(()=>{const f=c(t.value);return oe(f,d.value)}),[I,k]=E(C(r.value)?C(i.value)?p():i.value:r.value);F(r,()=>{C(r.value)&&k(p())});const V=g(()=>r.value||I.value),[H,j]=E(V.value);F([V],()=>{j(V.value)});const[L,B]=E();return F([H],()=>{B(void 0)}),{computedValue:V,panelValue:H,inputValue:L,setValue:k,setPanelValue:j,setInputValue:B}}var Ze=ae({name:"TimePickerRangePanel",components:{Panel:_},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:n}){const{value:t,displayIndex:d}=ee(e),u=de(d.value);F(d,()=>{u.value=d.value});const p=g(()=>t!=null&&t.value?t.value[u.value]:void 0);function c(i){const I=C(t)||C(t==null?void 0:t.value)?[]:[...t.value];I[u.value]=i,n("select",I)}function r(){if(T(t==null?void 0:t.value))n("confirm",t==null?void 0:t.value);else{const i=(u.value+1)%2;u.value=i,n("display-index-change",i),n("update:displayIndex",i)}}return{displayValue:p,onSelect:c,onConfirm:r}},render(){const e={...this.$attrs,isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm};return ne(_,e,this.$slots)}});const qe=ae({name:"TimePicker",components:{Trigger:Re,DateInput:Oe,DateRangeInput:ze,Panel:_,RangePanel:Ze,IconClockCircle:Ee},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:[String,Array]},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,n)=>!0,"update:modelValue":e=>!0,select:(e,n)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:n}){const{type:t,format:d,use12Hours:u,modelValue:p,defaultValue:c,popupVisible:r,defaultPopupVisible:i,disabled:I,placeholder:k,disableConfirm:V,disabledHours:H,disabledMinutes:j,disabledSeconds:L}=ee(e),{mergedDisabled:B,eventHandlers:f}=$e({disabled:I}),h=g(()=>t.value==="time-range"),pe=Te("timepicker"),w=de(),{format:v,use12Hours:ce}=Ne(z({format:d,use12Hours:u})),{computedValue:G,panelValue:b,inputValue:J,setValue:fe,setPanelValue:W,setInputValue:A}=Xe(z({modelValue:p,defaultValue:c,isRange:h,format:v})),[R,ve]=Fe(i.value,z({value:r})),$=a=>{a!==R.value&&(ve(a),n("popup-visible-change",a),n("update:popupVisible",a))},{t:le}=He(),[y,X]=E(0),me=g(()=>{const a=k==null?void 0:k.value;return h.value?C(a)?le("datePicker.rangePlaceholder.time"):S(a)?a:[a,a]:C(a)?le("datePicker.placeholder.time"):a}),Z=Me(z({disabledHours:H,disabledMinutes:j,disabledSeconds:L}));function ge(a){var l,o;if(Le(a,G.value)){const m=K(a,v.value),s=te(a);n("update:modelValue",m),n("change",m,s),(o=(l=f.value)==null?void 0:l.onChange)==null||o.call(l)}}function P(a,l){if(Z(a))return;let o=a;if(S(a)){const m=Q();o=a.map(s=>(s&&(s=s.year(m.year()),s=s.month(m.month()),s=s.date(m.date())),s)),T(o)&&(o=Ue(o)),(o==null?void 0:o.length)===0&&(o=void 0)}ge(o),fe(o),l!==R.value&&$(l)}function q(a,l){W(a),l!==R.value&&$(l)}function O(a){w.value&&w.value.focus&&w.value.focus(a)}function Ve(a){B.value||($(a),a&&We(()=>{O(y.value)}))}function be(a){const l=K(a,v.value),o=te(a);n("select",l,o),V.value&&(!h.value||T(a))?P(a,!0):(q(a,!0),A(void 0))}function ye(a){P(a,!1)}function Ce(){P(b.value||G.value,!1)}function he(){if(T(b.value))P(b.value,!1);else{const a=(y.value+1)%2;X(a),O(a)}}function Pe(a){$(!0);const l=a.target.value;if(A(l),!se(l,v.value))return;const o=Q(l,v.value);Z(o)||(V.value?P(o,!0):q(o,!0))}function Ie(a){$(!0);const l=a.target.value,o=S(J.value)?[...J.value]:S(b.value)&&K(b.value,v.value)||[];if(o[y.value]=l,A(o),!se(l,v.value))return;const m=Q(l,v.value);if(Z(m))return;const s=S(b.value)?[...b.value]:[];s[y.value]=m,V.value&&T(s)?P(s,!0):q(s,!0)}function Se(a){a.stopPropagation(),W(void 0),P(void 0,h.value)}F(R,(a,l)=>{a!==l&&W(G.value),a||A(void 0)});const De=g(()=>h.value?{focusedIndex:y.value,onFocusedIndexChange:a=>{X(a)},onChange:Ie,onPressEnter:he}:{onChange:Pe,onPressEnter:Ce}),ke=g(()=>h.value?{displayIndex:y.value,onDisplayIndexChange:a=>{X(a),O(a)}}:{});return{refInput:w,isRange:h,prefixCls:pe,panelVisible:R,focusedInputIndex:y,computedPlaceholder:me,panelValue:b,inputValue:J,computedFormat:v,computedUse12Hours:ce,inputProps:De,panelProps:ke,mergedDisabled:B,onPanelVisibleChange:Ve,onInputClear:Se,onPanelSelect:be,onPanelConfirm:ye,onPanelClick:()=>{O(y.value)}}}});function Ke(e,n,t,d,u,p){const c=ue("IconClockCircle"),r=ue("Trigger");return N(),M(r,U({trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer},{...e.triggerProps},{onPopupVisibleChange:e.onPanelVisibleChange}),{content:D(()=>[Ge("div",{class:Je(`${e.prefixCls}-container`),onClick:n[0]||(n[0]=(...i)=>e.onPanelClick&&e.onPanelClick(...i))},[(N(),M(ie(e.isRange?"RangePanel":"Panel"),U(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),re({_:2},[e.$slots.extra?{name:"extra-footer",fn:D(()=>[Y(e.$slots,"extra")]),key:"0"}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:D(()=>[(N(),M(ie(e.isRange?"DateRangeInput":"DateInput"),U({...e.$attrs,...e.inputProps},{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,readonly:e.readonly,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),re({"suffix-icon":D(()=>[Y(e.$slots,"suffix-icon",{},()=>[ne(c)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:D(()=>[Y(e.$slots,"prefix")]),key:"0"}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","readonly","editable","allow-clear","placeholder","onClear"]))]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var x=Be(qe,[["render",Ke]]);const Qe=Object.assign(x,{install:(e,n)=>{je(e,n);const t=we(n);e.component(t+x.name,x)}}),aa=ae({name:"Time",__name:"index",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(e,{emit:n}){const t=e,d=n,u=g({get:()=>t.modelValue,set:p=>{d("update:modelValue",p)}});return(p,c)=>{const r=Qe;return N(),M(Ae,null,{default:D(()=>[ne(r,U({modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=i=>u.value=i)},p.$attrs),null,16,["modelValue"])]),_:1})}}});export{aa as default};
