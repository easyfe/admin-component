import{aa as de,a0 as be,Z as Ce,$ as Se,ab as Je,W as pe,at as Qe,av as xe,a1 as ve,ar as el,ad as ll,ak as Oe,aT as ke,aU as al,aV as Ve,aW as Me,N as Ae,ai as tl,aX as nl,X as ol,aY as il,aZ as Ne,aN as E,a5 as ul,a6 as rl}from"./index-b15bee20.0964eacc.js";import{J as cl}from"./index-82f5a13b.8b0b0b00.js";import{d as ee,O as fe,i as A,l as K,G as b,E as ie,aa as sl,ab as De,a3 as Re,w as le,a0 as j,Q as je,D as te,o as ne,A as oe,B as I,a4 as se,r as Z,au as dl,av as vl}from"./framework.26c49a03.js";const Ie=(e,{optionMap:t,leafOptionMap:l,leafOptionSet:y,leafOptionValueMap:p,totalLevel:i,checkStrictly:c,enabledLazyLoad:s,lazyLoadOptions:d,valueKey:C,fieldNames:o})=>{let f=0;const O=(L,v,m)=>{var N;const W=(N=v==null?void 0:v.path)!=null?N:[];return f=Math.max(f,m??1),L.map((P,q)=>{var _;const S=P[o.value],u={raw:P,value:S,label:(_=P[o.label])!=null?_:String(S),disabled:!!P[o.disabled],selectionDisabled:!1,render:P[o.render],tagProps:P[o.tagProps],isLeaf:P[o.isLeaf],level:W.length,index:q,key:"",valueKey:String(be(S)?S[C.value]:S),parent:v,path:[],pathValue:[]},F=W.concat(u),U=[],H=F.map(T=>(U.push(T.value),T.valueKey)).join("-");return u.path=F,u.pathValue=U,u.key=H,P[o.children]?(u.isLeaf=!1,u.children=O(P[o.children],u,(m??1)+1)):s&&!u.isLeaf?(u.isLeaf=!1,d[H]&&(u.children=O(d[H],u,(m??1)+1))):u.isLeaf=!0,u.children&&!u.disabled&&(u.totalLeafOptions=u.children.reduce((T,V)=>Je(V.totalLeafOptions)?T+V.totalLeafOptions:V.disabled||V.selectionDisabled?T:T+(V.isLeaf?1:0),0),u.totalLeafOptions===0&&!c.value&&(u.selectionDisabled=!0)),t.set(u.key,u),(u.isLeaf||c.value)&&(y.add(u),l.set(u.key,u),p.has(u.valueKey)||p.set(u.valueKey,u.key)),u})},w=O(e);return i.value=f,w},we=(e,t)=>{var l,y;let p=!1,i=!1;if(e.isLeaf)t!=null&&t.has(e.key)&&(p=!0);else{const c=new RegExp(`^${e.key}(-|$)`),s=Array.from((l=t==null?void 0:t.keys())!=null?l:[]).reduce((d,C)=>c.test(C)?d+1:d,0);s>0&&s>=((y=e.totalLeafOptions)!=null?y:1)?p=!0:s>0&&(i=!0)}return{checked:p,indeterminate:i}},Pe=e=>{const t=[];if(e.isLeaf)t.push(e.key);else if(e.children)for(const l of e.children)t.push(...Pe(l));return t},_e=e=>{const t=[];if(e.disabled||e.selectionDisabled)return t;if(e.isLeaf)t.push(e);else if(e.children)for(const l of e.children)t.push(..._e(l));return t},Ee=(e,{valueKey:t,leafOptionValueMap:l})=>{var y;if(de(e))return e.map(i=>be(i)?i[t]:i).join("-");const p=be(e)?e[t]:e;return(y=l.get(String(p)))!=null?y:String(p)},Fe=(e,{multiple:t,pathMode:l})=>de(e)?l&&!t&&e.length>0&&!de(e[0])?[e]:e:Ce(e)||Se(e)||e===""?[]:[e],Te=e=>e.path.map(t=>t.label).join(" / "),$e=Symbol("ArcoCascader");var Le=ee({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(e){const t=pe("cascader-option"),l=fe($e,{}),y=A(!1),p={},i=o=>{var f;if(ve(l.loadMore)&&!e.option.isLeaf){const{isLeaf:O,children:w,key:L}=e.option;!O&&!w&&(y.value=!0,new Promise(v=>{var m;(m=l.loadMore)==null||m.call(l,e.option.raw,v)}).then(v=>{var m;y.value=!1,v&&((m=l.addLazyLoadOptions)==null||m.call(l,v,L))}))}(f=l.setSelectedPath)==null||f.call(l,e.option.key)};e.option.disabled||(p.onMouseenter=[()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l,e.option.key)}],p.onMouseleave=()=>{var o;return(o=l.setActiveKey)==null?void 0:o.call(l)},p.onClick=[],l.expandTrigger==="hover"?p.onMouseenter.push(o=>i()):p.onClick.push(o=>i()),e.option.isLeaf&&!e.multiple&&p.onClick.push(o=>{var f;i(),(f=l.onClickOption)==null||f.call(l,e.option)}));const c=K(()=>[t,{[`${t}-active`]:e.active,[`${t}-disabled`]:e.option.disabled}]),s=K(()=>{var o;return e.checkStrictly?{checked:(o=l.valueMap)==null?void 0:o.has(e.option.key),indeterminate:!1}:we(e.option,l.valueMap)}),d=()=>{var o,f,O;return e.pathLabel?(f=(o=l==null?void 0:l.formatLabel)==null?void 0:o.call(l,e.option.path.map(w=>w.raw)))!=null?f:Te(e.option):(O=l.slots)!=null&&O.option?l.slots.option({data:e.option}):ve(e.option.render)?e.option.render():e.option.label},C=()=>y.value?b(el,null,null):!e.searchOption&&!e.option.isLeaf?b(ll,null,null):null;return()=>{var o;return b("li",ie({tabindex:"0",role:"menuitem","aria-disabled":e.option.disabled,"aria-haspopup":!e.option.isLeaf,"aria-expanded":!e.option.isLeaf&&e.active,title:e.option.label,class:c.value},p),[e.multiple&&b(Qe,{modelValue:s.value.checked,indeterminate:s.value.indeterminate,disabled:e.option.disabled||e.option.selectionDisabled,uninjectGroupContext:!0,onChange:(f,O)=>{var w;O.stopPropagation(),i(),(w=l.onClickOption)==null||w.call(l,e.option,!s.value.checked)},onClick:f=>f.stopPropagation()},null),e.checkStrictly&&!e.multiple&&b(xe,{modelValue:(o=l.valueMap)==null?void 0:o.has(e.option.key),disabled:e.option.disabled,uninjectGroupContext:!0,onChange:(f,O)=>{var w;O.stopPropagation(),i(),(w=l.onClickOption)==null||w.call(l,e.option,!0)},onClick:f=>f.stopPropagation()},null),b("div",{class:`${t}-label`},[d(),C()])])}}}),pl=ee({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(e,{slots:t}){const l=pe("cascader"),y=fe(Oe,void 0),p=A(),i=A(!!e.virtualListProps),c=()=>{var s,d,C,o,f;return(f=(o=(s=t.empty)==null?void 0:s.call(t))!=null?o:(C=y==null?void 0:(d=y.slots).empty)==null?void 0:C.call(d,{component:"cascader"}))!=null?f:b(Ve,null,null)};return()=>{var s;return b("div",{class:`${l}-panel-column`,style:{zIndex:e.totalLevel-e.level}},[e.column.length===0?b(ke,{class:`${l}-column-content`},{default:()=>[b("div",{class:`${l}-list-empty`},[c()])]}):i.value?b(al,ie({key:(s=e.column)==null?void 0:s.length},e.virtualListProps,{ref:p,data:e.column}),{item:({item:d})=>b(Le,{key:d.key,option:d,active:e.selectedPath.includes(d.key)||d.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null)}):b(ke,{class:`${l}-column-content`},{default:()=>[b("ul",{role:"menu",class:[`${l}-list`,{[`${l}-list-multiple`]:!!(e!=null&&e.multiple),[`${l}-list-strictly`]:!!(e!=null&&e.checkStrictly)}]},[e.column.map(d=>b(Le,{key:d.key,option:d,active:e.selectedPath.includes(d.key)||d.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null))])]})])}}});function fl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!De(e)}var ze=ee({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(e,{slots:t}){const l=pe("cascader"),y=fe(Oe,void 0),p=()=>{var c,s,d,C,o;return(o=(C=(c=t.empty)==null?void 0:c.call(t))!=null?C:(d=y==null?void 0:(s=y.slots).empty)==null?void 0:d.call(s,{component:"cascader"}))!=null?o:b(Ve,null,null)},i=()=>e.loading?b("div",{key:"panel-column-loading",class:[`${l}-panel-column`,`${l}-panel-column-loading`]},[b(Me,null,null)]):e.displayColumns.length===0?b("div",{key:"panel-column-empty",class:`${l}-panel-column`},[b("div",{class:`${l}-list-empty`},[p()])]):e.displayColumns.map((c,s)=>b(pl,{key:`column-${s}`,column:c,level:s,selectedPath:e.selectedPath,activeKey:e.activeKey,totalLevel:e.totalLevel,multiple:e.multiple,checkStrictly:e.checkStrictly,virtualListProps:e.virtualListProps},{empty:t.empty}));return()=>{let c;return b(sl,{tag:"div",name:"cascader-slide",class:[`${l}-panel`,{[`${l}-dropdown-panel`]:e.dropdown}]},fl(c=i())?c:{default:()=>[c]})}}});function yl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!De(e)}var hl=ee({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(e,{slots:t}){const l=pe("cascader"),y=fe(Oe,void 0),p=()=>{var i,c,s,d,C;return e.loading?b(Me,null,null):e.options.length===0?b("div",{class:`${l}-list-empty`},[(C=(d=(i=t.empty)==null?void 0:i.call(t))!=null?d:(s=y==null?void 0:(c=y.slots).empty)==null?void 0:s.call(c,{component:"cascader"}))!=null?C:b(Ve,null,null)]):b("ul",{role:"menu",class:[`${l}-list`,`${l}-search-list`,{[`${l}-list-multiple`]:e.multiple}]},[e.options.map(o=>b(Le,{key:o.key,class:`${l}-search-option`,option:o,active:o.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly,pathLabel:e.pathLabel,searchOption:!0},null))])};return()=>{let i;return b(ke,{class:[`${l}-panel`,`${l}-search-panel`]},yl(i=p())?i:{default:()=>[i]})}}});const We=(e,{optionMap:t,filteredLeafOptions:l,showSearchPanel:y,expandChild:p})=>{const i=A(),c=K(()=>{if(i.value)return t.get(i.value)}),s=A([]),d=K(()=>{const L=[e.value];for(const v of s.value){const m=t.get(v);m!=null&&m.children&&L.push(m.children)}return L}),C=L=>{var v;const m=O(L);s.value=(v=m==null?void 0:m.path.map(N=>N.key))!=null?v:[]},o=L=>{i.value=L},f=K(()=>{var L;return y!=null&&y.value?l.value.filter(v=>!v.disabled):c.value&&c.value.parent?(L=c.value.parent.children)==null?void 0:L.filter(v=>!v.disabled):e.value.filter(v=>!v.disabled)}),O=L=>{let v=L?t.get(L):void 0;if(p.value)for(;v&&v.children&&v.children.length>0;)v=v.children[0];return v};return{activeKey:i,activeOption:c,selectedPath:s,displayColumns:d,setActiveKey:o,setSelectedPath:C,getNextActiveNode:L=>{var v,m,N,W,P,q,_;const S=(m=(v=f.value)==null?void 0:v.length)!=null?m:0;if(i.value){const u=(W=(N=f.value)==null?void 0:N.findIndex(F=>F.key===i.value))!=null?W:0;return L==="next"?(P=f.value)==null?void 0:P[(S+u+1)%S]:(q=f.value)==null?void 0:q[(S+u-1)%S]}return(_=f.value)==null?void 0:_[0]}}},ml=ee({name:"Cascader",components:{Trigger:tl,SelectView:nl,BaseCascaderPanel:ze,CascaderSearchPanel:hl},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:e=>!!e.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,clear:()=>!0,search:e=>!0,popupVisibleChange:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:l}){const{options:y,checkStrictly:p,loadMore:i,formatLabel:c,modelValue:s,disabled:d,valueKey:C,expandTrigger:o,expandChild:f,pathMode:O,multiple:w}=Re(e),L=A(e.defaultValue),v=A(e.defaultInputValue),m=A(e.defaultPopupVisible),{mergedDisabled:N,eventHandlers:W}=ol({disabled:d});le(s,a=>{(Ce(a)||Se(a))&&(L.value=e.multiple?[]:void 0)});const P=A([]),q=A(1),_=j(new Map),S=j(new Map),u=j(new Map),F=j(new Set),U=j({}),H=(a,n)=>{U[n]=a},T={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},V=K(()=>({...T,...e.fieldNames}));le([y,U,V],([a,n,g])=>{_.clear(),S.clear(),u.clear(),F.clear(),P.value=Ie(a??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:U,optionMap:_,leafOptionSet:F,leafOptionMap:S,leafOptionValueMap:u,totalLevel:q,checkStrictly:p,valueKey:C,fieldNames:g})},{immediate:!0,deep:!0});const B=K(()=>{var a;const n=Fe((a=e.modelValue)!=null?a:L.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(n.map(g=>[Ee(g,{valueKey:e.valueKey,leafOptionValueMap:u}),g]))}),J=K(()=>{var a;return(a=e.inputValue)!=null?a:v.value}),D=K(()=>{var a;return(a=e.popupVisible)!=null?a:m.value}),Y=a=>{var n;return a==null?void 0:a.toLocaleLowerCase().includes((n=J.value)==null?void 0:n.toLocaleLowerCase())},ae=K(()=>(e.checkStrictly?Array.from(_.values()):Array.from(F)).filter(n=>{var g;return ve(e.filterOption)?e.filterOption(J.value,n.raw):e.checkStrictly?Y(n.label):(g=n.path)==null?void 0:g.find(k=>Y(k.label))})),G=a=>{var n,g,k;const M=e.multiple?a:(n=a[0])!=null?n:"";a.length===0&&(Q(),X()),L.value=M,t("update:modelValue",M),t("change",M),(k=(g=W.value)==null?void 0:g.onChange)==null||k.call(g)};le([w,O],()=>{const a=[];B.value.forEach((n,g)=>{const k=S.get(g);k&&a.push(O.value?k.pathValue:k.value)}),G(a)});const r=a=>{D.value!==a&&(m.value=a,t("popupVisibleChange",a))},h=a=>{if(e.multiple){const n=S.get(a);if(n)z(n,!1);else{const g=[];B.value.forEach((k,M)=>{M!==a&&g.push(k)}),G(g)}}},$=a=>{G([e.pathMode?a.pathValue:a.value]),r(!1)},z=(a,n)=>{if(n){const g=e.checkStrictly?[a]:_e(a);G([...B.value.values(),...g.filter(k=>!B.value.has(k.key)).map(k=>e.pathMode?k.pathValue:k.value)])}else{const g=e.checkStrictly?[a.key]:Pe(a),k=[];B.value.forEach((M,x)=>{g.includes(x)||k.push(M)}),G(k)}re("","optionChecked")},ue=(a,n)=>{e.multiple?z(a,n??!0):$(a)},ye=il(a=>{t("search",a)},e.searchDelay),re=(a,n)=>{a!==J.value&&(n==="manual"&&!D.value&&(m.value=!0,t("popupVisibleChange",!0)),v.value=a,t("inputValueChange",a),e.allowSearch&&ye(a))};le(D,a=>{if(a){if(B.value.size>0){const n=Array.from(B.value.keys()),g=n[n.length-1],k=S.get(g);k&&k.key!==Ke.value&&(Q(k.key),X(k.key))}}else B.value.size===0&&(Q(),X()),re("","optionListHide")});const qe=a=>{if(a.stopPropagation(),e.multiple){const n=[];B.value.forEach((g,k)=>{const M=S.get(k);M!=null&&M.disabled&&n.push(e.pathMode?M.pathValue:M.value)}),G(n)}else G([]);re("","manual"),t("clear")},ce=K(()=>e.allowSearch&&J.value.length>0),Ge=a=>{t("focus",a)},Ue=a=>{t("blur",a)},{activeKey:Ke,activeOption:R,selectedPath:He,displayColumns:Ye,setActiveKey:X,setSelectedPath:Q,getNextActiveNode:Be}=We(P,{optionMap:_,filteredLeafOptions:ae,showSearchPanel:ce,expandChild:f});je($e,j({onClickOption:ue,setActiveKey:X,setSelectedPath:Q,loadMore:i,expandTrigger:o,addLazyLoadOptions:H,formatLabel:c,slots:l,valueMap:B}));const Xe=Ne(new Map([[E.ENTER,a=>{if(D.value){if(R.value){let n;e.checkStrictly||R.value.isLeaf?n=!B.value.has(R.value.key):n=!we(R.value,B.value).checked,Q(R.value.key),ue(R.value,n)}}else r(!0)}],[E.ESC,a=>{r(!1)}],[E.ARROW_DOWN,a=>{a.preventDefault();const n=Be("next");X(n==null?void 0:n.key)}],[E.ARROW_UP,a=>{a.preventDefault();const n=Be("preview");X(n==null?void 0:n.key)}],[E.ARROW_RIGHT,a=>{var n,g;ce.value||(a.preventDefault(),(n=R.value)!=null&&n.children&&(Q(R.value.key),X((g=R.value.children[0])==null?void 0:g.key)))}],[E.ARROW_LEFT,a=>{var n;ce.value||(a.preventDefault(),(n=R.value)!=null&&n.parent&&(Q(R.value.parent.key),X(R.value.parent.key)))}]])),Ze=K(()=>{const a=[];return B.value.forEach((n,g)=>{var k,M;const x=S.get(g);if(x)a.push({value:g,label:(M=(k=e.formatLabel)==null?void 0:k.call(e,x.path.map(he=>he.raw)))!=null?M:Te(x),closable:!x.disabled,tagProps:x.tagProps});else if(e.fallback){const he=ve(e.fallback)?e.fallback(n):de(n)?n.join(" / "):String(n);a.push({value:g,label:he,closable:!0})}}),a});return{optionInfos:P,filteredLeafOptions:ae,selectedPath:He,activeKey:Ke,displayColumns:Ye,computedInputValue:J,computedPopupVisible:D,handleClear:qe,selectViewValue:Ze,handleInputValueChange:re,showSearchPanel:ce,handlePopupVisibleChange:r,handleFocus:Ge,handleBlur:Ue,handleRemove:h,mergedDisabled:N,handleKeyDown:Xe,totalLevel:q}}});function gl(e,t,l,y,p,i){const c=te("select-view"),s=te("cascader-search-panel"),d=te("base-cascader-panel"),C=te("trigger");return ne(),oe(C,ie(e.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":e.computedPopupVisible,position:"bl",disabled:e.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":e.showSearchPanel,"popup-container":e.popupContainer,"prevent-focus":!0,"click-to-close":!e.allowSearch,onPopupVisibleChange:e.handlePopupVisibleChange}),{content:I(()=>[e.showSearchPanel?(ne(),oe(s,{key:0,options:e.filteredLeafOptions,"active-key":e.activeKey,multiple:e.multiple,"check-strictly":e.checkStrictly,loading:e.loading,"path-label":!e.searchOptionOnlyLabel},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[Z(e.$slots,"empty")]),key:"0"}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(ne(),oe(d,{key:1,"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,loading:e.loading,"virtual-list-props":e.virtualListProps,dropdown:""},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[Z(e.$slots,"empty")]),key:"0"}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:I(()=>[b(c,ie({"model-value":e.selectViewValue,"input-value":e.computedInputValue,disabled:e.mergedDisabled,error:e.error,multiple:e.multiple,"allow-clear":e.allowClear,"allow-search":e.allowSearch,size:e.size,opened:e.computedPopupVisible,placeholder:e.placeholder,loading:e.loading,"max-tag-count":e.maxTagCount,"tag-nowrap":e.tagNowrap},e.$attrs,{onInputValueChange:e.handleInputValueChange,onClear:e.handleClear,onFocus:e.handleFocus,onBlur:e.handleBlur,onRemove:e.handleRemove,onKeydown:e.handleKeyDown}),se({_:2},[e.$slots.label?{name:"label",fn:I(o=>[Z(e.$slots,"label",dl(vl(o)))]),key:"0"}:void 0,e.$slots.prefix?{name:"prefix",fn:I(()=>[Z(e.$slots,"prefix")]),key:"1"}:void 0,e.$slots["arrow-icon"]?{name:"arrow-icon",fn:I(()=>[Z(e.$slots,"arrow-icon")]),key:"2"}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:I(()=>[Z(e.$slots,"loading-icon")]),key:"3"}:void 0,e.$slots["search-icon"]?{name:"search-icon",fn:I(()=>[Z(e.$slots,"search-icon")]),key:"4"}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","tag-nowrap","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var me=Ae(ml,[["render",gl]]);const bl=ee({name:"CascaderPanel",components:{BaseCascaderPanel:ze},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:t,slots:l}){const{options:y,checkStrictly:p,loadMore:i,modelValue:c,valueKey:s,expandChild:d,expandTrigger:C}=Re(e),o=A(e.defaultValue);le(c,r=>{(Ce(r)||Se(r))&&(o.value=e.multiple?[]:void 0)});const f=A([]),O=A(1),w=j(new Map),L=j(new Map),v=j(new Map),m=j(new Set),N=j({}),W=(r,h)=>{N[h]=r},P={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},q=K(()=>({...P,...e.fieldNames}));le([y,N,q],([r,h,$])=>{w.clear(),L.clear(),v.clear(),m.clear(),f.value=Ie(r??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:h,optionMap:w,leafOptionSet:m,leafOptionMap:L,leafOptionValueMap:v,totalLevel:O,checkStrictly:p,fieldNames:$,valueKey:s})},{immediate:!0});const _=K(()=>{var r;const h=Fe((r=e.modelValue)!=null?r:o.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(h.map($=>[Ee($,{valueKey:e.valueKey,leafOptionValueMap:v}),$]))}),S=K(()=>e.checkStrictly?Array.from(w.values()):Array.from(m)),u=r=>{var h;const $=e.multiple?r:(h=r[0])!=null?h:"";r.length===0&&(Y(),D()),o.value=$,t("update:modelValue",$),t("change",$)},F=r=>{u([e.pathMode?r.pathValue:r.value])},U=(r,h)=>{if(h){const $=e.checkStrictly?[r]:_e(r);u([..._.value.values(),...$.filter(z=>!_.value.has(z.key)).map(z=>e.pathMode?z.pathValue:z.value)])}else{const $=e.checkStrictly?[r.key]:Pe(r),z=[];_.value.forEach((ue,ye)=>{$.includes(ye)||z.push(ue)}),u(z)}},H=(r,h)=>{e.multiple?U(r,h??!0):F(r)},{activeKey:T,activeOption:V,selectedPath:B,displayColumns:J,setActiveKey:D,setSelectedPath:Y,getNextActiveNode:ae}=We(f,{optionMap:w,filteredLeafOptions:S,expandChild:d});je($e,j({onClickOption:H,setActiveKey:D,setSelectedPath:Y,loadMore:i,addLazyLoadOptions:W,slots:l,valueMap:_,expandTrigger:C}));const G=Ne(new Map([[E.ENTER,r=>{if(V.value){let h;e.checkStrictly||V.value.isLeaf?h=!_.value.has(V.value.key):h=!we(V.value,_.value).checked,Y(V.value.key),H(V.value,h)}}],[E.ARROW_DOWN,r=>{r.preventDefault();const h=ae("next");D(h==null?void 0:h.key)}],[E.ARROW_UP,r=>{r.preventDefault();const h=ae("preview");D(h==null?void 0:h.key)}],[E.ARROW_RIGHT,r=>{var h,$;r.preventDefault(),(h=V.value)!=null&&h.children&&(Y(V.value.key),D(($=V.value.children[0])==null?void 0:$.key))}],[E.ARROW_LEFT,r=>{var h;r.preventDefault(),(h=V.value)!=null&&h.parent&&(Y(V.value.parent.key),D(V.value.parent.key))}]]));return{optionInfos:f,filteredLeafOptions:S,selectedPath:B,activeKey:T,displayColumns:J,handleKeyDown:G,totalLevel:O}}});function kl(e,t,l,y,p,i){const c=te("base-cascader-panel");return ne(),oe(c,{"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,onKeydown:e.handleKeyDown},se({_:2},[e.$slots.empty?{name:"empty",fn:I(()=>[Z(e.$slots,"empty")]),key:"0"}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var ge=Ae(bl,[["render",kl]]);const Ll=Object.assign(me,{CascaderPanel:ge,install:(e,t)=>{ul(e,t);const l=rl(t);e.component(l+me.name,me),e.component(l+ge.name,ge)}}),Vl=ee({name:"Cascader",__name:"index",props:{labelKey:{default:"label"},valueKey:{default:"value"},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,y=t,p=K({get:()=>l.modelValue,set:i=>{y("update:modelValue",i)}});return(i,c)=>{const s=Ll;return ne(),oe(cl,null,{default:I(()=>[b(s,ie({modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=d=>p.value=d)},i.$attrs),null,16,["modelValue"])]),_:1})}}});export{Vl as default};
