import{a8 as z,X as P,aa as S,_ as Re,ai as Te,O as Fe,N as He,ae as Ee,af as Ne,a5 as ze,a6 as Ae}from"./index-b8b97d5a.d38831c5.js";import{U as _e}from"./index-83d13f90.043adcac.js";import{g as le,P as Z,k,D as Me,j as Ue,I as Le,u as Ge,l as Xe,e as K,c as te,f as re,d as Q,a as qe,h as Je}from"./input-range.f5a6e220.js";import{a4 as ee,m as g,w as B,d as ae,j as me,G as ne,a1 as N,D as se,o as A,A as _,B as O,z as Ke,n as Qe,I as ue,E as x,a5 as ie,r as W,i as We}from"./framework.f10db147.js";function Ye(e){const{modelValue:n,defaultValue:o,format:i,isRange:r}=ee(e);function c(){return r.value?[]:void 0}function f(d){if(!P(d))return r.value?S(d)?d:[d,void 0]:d}const u=g(()=>{const d=f(n.value);return le(d,i.value)}),p=g(()=>{const d=f(o.value);return le(d,i.value)}),[I,D]=z(P(u.value)?P(p.value)?c():p.value:u.value);B(u,()=>{P(u.value)&&D(c())});const b=g(()=>u.value||I.value),[R,T]=z(b.value);B([b],()=>{T(b.value)});const[M,w]=z();return B([R],()=>{w(void 0)}),{computedValue:b,panelValue:R,inputValue:M,setValue:D,setPanelValue:T,setInputValue:w}}var Ze=Object.defineProperty,xe=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,de=(e,n,o)=>n in e?Ze(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,oa=(e,n)=>{for(var o in n||(n={}))aa.call(n,o)&&de(e,o,n[o]);if(pe)for(var o of pe(n))na.call(n,o)&&de(e,o,n[o]);return e},la=(e,n)=>xe(e,ea(n)),ta=ae({name:"TimePickerRangePanel",components:{Panel:Z},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:n}){const{value:o,displayIndex:i}=ee(e),r=me(i.value);B(i,()=>{r.value=i.value});const c=g(()=>o!=null&&o.value?o.value[r.value]:void 0);function f(p){const I=P(o)||P(o==null?void 0:o.value)?[]:[...o.value];I[r.value]=p,n("select",I)}function u(){if(k(o==null?void 0:o.value))n("confirm",o==null?void 0:o.value);else{const p=(r.value+1)%2;r.value=p,n("display-index-change",p),n("update:displayIndex",p)}}return{displayValue:c,onSelect:f,onConfirm:u}},render(){const e=la(oa({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return ne(Z,e,this.$slots)}}),ra=Object.defineProperty,ce=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,fe=(e,n,o)=>n in e?ra(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ve=(e,n)=>{for(var o in n||(n={}))sa.call(n,o)&&fe(e,o,n[o]);if(ce)for(var o of ce(n))ua.call(n,o)&&fe(e,o,n[o]);return e};const ia=ae({name:"TimePicker",components:{Trigger:Te,DateInput:Me,DateRangeInput:Ue,Panel:Z,RangePanel:ta,IconClockCircle:Le},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:String},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,n)=>!0,"update:modelValue":e=>!0,select:(e,n)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:n}){const{type:o,format:i,use12Hours:r,modelValue:c,defaultValue:f,popupVisible:u,defaultPopupVisible:p,disabled:I,placeholder:D,disableConfirm:b,disabledHours:R,disabledMinutes:T,disabledSeconds:M}=ee(e),{mergedDisabled:w,eventHandlers:d}=Fe({disabled:I}),C=g(()=>o.value==="time-range"),ge=He("timepicker"),F=me(),{format:v,use12Hours:be}=Ge(N({format:i,use12Hours:r})),{computedValue:U,panelValue:V,inputValue:L,setValue:Ve,setPanelValue:G,setInputValue:H}=Ye(N({modelValue:c,defaultValue:f,isRange:C,format:v})),[$,ye]=Ee(p.value,N({value:u})),j=a=>{a!==$.value&&(ye(a),n("popup-visible-change",a),n("update:popupVisible",a))},{t:oe}=Ne(),[y,X]=z(0),Pe=g(()=>{const a=D==null?void 0:D.value;return C.value?P(a)?oe("datePicker.rangePlaceholder.time"):S(a)?a:[a,a]:P(a)?oe("datePicker.placeholder.time"):a}),q=Xe(N({disabledHours:R,disabledMinutes:T,disabledSeconds:M}));function Ce(a){var l,t;if(Je(a,U.value)){const m=K(a,v.value),s=te(a);n("update:modelValue",m),n("change",m,s),(t=(l=d.value)==null?void 0:l.onChange)==null||t.call(l)}}function h(a,l){if(q(a))return;let t=a;if(S(a)){const m=Q();t=a.map(s=>(s&&(s=s.year(m.year()),s=s.month(m.month()),s=s.date(m.date())),s)),k(t)&&(t=qe(t)),(t==null?void 0:t.length)===0&&(t=void 0)}Ce(t),Ve(t),l!==$.value&&j(l)}function J(a,l){G(a),l!==$.value&&j(l)}function E(a){F.value&&F.value.focus&&F.value.focus(a)}function he(a){w.value||(j(a),a&&We(()=>{E(y.value)}))}function Ie(a){const l=K(a,v.value),t=te(a);n("select",l,t),b.value&&(!C.value||k(a))?h(a,!0):(J(a,!0),H(void 0))}function Se(a){h(a,!1)}function Oe(){h(V.value||U.value,!1)}function De(){if(k(V.value))h(V.value,!1);else{const a=(y.value+1)%2;X(a),E(a)}}function we(a){j(!0);const l=a.target.value;if(H(l),!re(l,v.value))return;const t=Q(l,v.value);q(t)||(b.value?h(t,!0):J(t,!0))}function $e(a){j(!0);const l=a.target.value,t=S(L.value)?[...L.value]:S(V.value)&&K(V.value,v.value)||[];if(t[y.value]=l,H(t),!re(l,v.value))return;const m=Q(l,v.value);if(q(m))return;const s=S(V.value)?[...V.value]:[];s[y.value]=m,b.value&&k(s)?h(s,!0):J(s,!0)}function je(a){a.stopPropagation(),G(void 0),h(void 0,C.value)}B($,(a,l)=>{a!==l&&G(U.value),a||H(void 0)});const ke=g(()=>C.value?{focusedIndex:y.value,onFocusedIndexChange:a=>{X(a)},onChange:$e,onPressEnter:De}:{onChange:we,onPressEnter:Oe}),Be=g(()=>C.value?{displayIndex:y.value,onDisplayIndexChange:a=>{X(a),E(a)}}:{});return{refInput:F,isRange:C,prefixCls:ge,panelVisible:$,focusedInputIndex:y,computedPlaceholder:Pe,panelValue:V,inputValue:L,computedFormat:v,computedUse12Hours:be,inputProps:ke,panelProps:Be,mergedDisabled:w,onPanelVisibleChange:he,onInputClear:je,onPanelSelect:Ie,onPanelConfirm:Se,onPanelClick:()=>{E(y.value)}}}});function pa(e,n,o,i,r,c){const f=se("IconClockCircle"),u=se("Trigger");return A(),_(u,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer,onPopupVisibleChange:e.onPanelVisibleChange},{content:O(()=>[Ke("div",{class:Qe(`${e.prefixCls}-container`),onClick:n[0]||(n[0]=(...p)=>e.onPanelClick&&e.onPanelClick(...p))},[(A(),_(ue(e.isRange?"RangePanel":"Panel"),x(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),ie({_:2},[e.$slots.extra?{name:"extra-footer",fn:O(()=>[W(e.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:O(()=>[(A(),_(ue(e.isRange?"DateRangeInput":"DateInput"),x(ve(ve({},e.$attrs),e.inputProps),{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),ie({"suffix-icon":O(()=>[W(e.$slots,"suffix-icon",{},()=>[ne(f)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:O(()=>[W(e.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","editable","allow-clear","placeholder","onClear"]))]),_:3},8,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var Y=Re(ia,[["render",pa]]);const da=Object.assign(Y,{install:(e,n)=>{ze(e,n);const o=Ae(n);e.component(o+Y.name,Y)}}),ga=ae({name:"Time",__name:"index",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,i=g({get:()=>o.modelValue,set:r=>{n("update:modelValue",r)}});return(r,c)=>{const f=da;return A(),_(_e,null,{default:O(()=>[ne(f,x({modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=u=>i.value=u)},r.$attrs),null,16,["modelValue"])]),_:1})}}});export{ga as default};
