import{aj as xt,ar as st,a_ as he,a$ as Ut,L as Yt,Z as Wt,W as pe,a1 as $e,aM as Gt,a9 as Oe,_ as Ve,at as Qt,b0 as qt,O as Be,aU as Xt,ae as xe,a3 as $t,a4 as Et,aT as Zt,b1 as Jt,Y as Ze,aY as ea,ai as ta,aX as aa,aV as na,aW as la,Q as oa,ak as ra}from"./index-fb59d3e2.129620ef.js";import{U as sa}from"./index-8fa1e870.fe5e36ce.js";import{O as Dt,d as ve,$ as we,a3 as te,k as O,R as ua,j as ia,D as q,o as E,c as Q,C as B,z as Pe,F as Te,L as Je,n as H,G as ee,a4 as Pt,B as le,r as x,A as _,au as Ue,E as F,a as da,t as ca,m,a0 as J,T as pa,l as _e,Q as va,ab as fa,w as ut,H as ya,I as ha,av as ga,h as ba}from"./framework.b419ffca.js";import{R as Ot}from"./render-function.17f57477.js";import{I as ma}from"./index.111d6006.js";const Tt=Symbol("TreeInjectionKey");function ka(e){const t=[];function a(n){n&&n.forEach(l=>{t.push(l),a(l.children)})}return a(e),t}function Sa(e){const t=new Map;return e.forEach(a=>{t.set(a.key,a)}),t}function Ye(e){return e.selectable&&!e.disabled}function it(e){return!e.isLeaf&&e.children}function Ca(e){return xt(e.isLeaf)?e.isLeaf:!e.children}function We(e){return Set.prototype.add.bind(e)}function Ge(e){return Set.prototype.delete.bind(e)}function Se(e){return e.disabled||e.disableCheckbox?!1:!!e.checkable}function et(e){var t;const a=[];return(t=e.children)==null||t.forEach(n=>{Se(n)&&a.push(n.key,...et(n))}),a}function Vt(e){var t;const{node:a,checkedKeySet:n,indeterminateKeySet:l}=e;let s=a.parent;for(;s;){if(Se(s)){const r=s.key,c=((t=s.children)==null?void 0:t.filter(Se))||[];let o=0;const i=c.length;c.some(({key:d})=>{if(n.has(d))o+=1;else if(l.has(d))return o+=.5,!0;return!1}),o&&o!==i?l.add(r):l.delete(r),o&&o===i?n.add(r):n.delete(r)}s=s.parent}}function Qe(e){const{node:t,checked:a,checkedKeys:n,indeterminateKeys:l,checkStrictly:s=!1}=e,{key:r}=t,c=new Set(n),o=new Set(l);if(a?c.add(r):c.delete(r),o.delete(r),!s){const i=et(t);a?i.forEach(We(c)):i.forEach(Ge(c)),i.forEach(Ge(o)),Vt({node:t,checkedKeySet:c,indeterminateKeySet:o})}return[[...c],[...o]]}function Na(e){const{initCheckedKeys:t,key2TreeNode:a,checkStrictly:n,onlyCheckLeaf:l}=e,s=new Set,r=new Set,c=new Set;return n?t.forEach(We(s)):t.forEach(o=>{var i;const d=a.get(o);if(!d||r.has(o)||l&&((i=d.children)!=null&&i.length))return;const h=et(d);h.forEach(We(r)),h.forEach(Ge(c)),s.add(o),c.delete(o),Vt({node:d,checkedKeySet:s,indeterminateKeySet:c})}),[[...s,...r],[...c]]}function Fe(){return Dt(Tt)||{}}var Ka=ve({name:"TreeNodeSwitcher",components:{IconLoading:st,RenderFunction:Ot},props:{prefixCls:String,loading:Boolean,showLine:Boolean,treeNodeData:{type:Object},icons:{type:Object},nodeStatus:{type:Object}},emits:["click"],setup(e,{slots:t,emit:a}){const{icons:n,nodeStatus:l,treeNodeData:s}=te(e),r=Fe(),c=he(t,"switcher-icon"),o=he(t,"loading-icon");return{getSwitcherIcon:()=>{var i,d,h;const k=(d=(i=n==null?void 0:n.value)==null?void 0:i.switcherIcon)!=null?d:c.value;return k?k(l.value):(h=r.switcherIcon)==null?void 0:h.call(r,s.value,l.value)},getLoadingIcon:()=>{var i,d,h;const k=(d=(i=n==null?void 0:n.value)==null?void 0:i.loadingIcon)!=null?d:o.value;return k?k(l.value):(h=r.loadingIcon)==null?void 0:h.call(r,s.value,l.value)},onClick(i){a("click",i)}}},render(){var e,t,a;const{prefixCls:n,getSwitcherIcon:l,getLoadingIcon:s,onClick:r,nodeStatus:c={},loading:o,showLine:i}=this,{expanded:d,isLeaf:h}=c;if(o)return(e=s())!=null?e:we(st);let k=null,N=!1;if(h)i&&(k=(a=l())!=null?a:we(ma));else{const D=i?we("span",{class:`${n}-${d?"minus":"plus"}-icon`}):we(Ut);k=(t=l())!=null?t:D,N=!i}if(!k)return null;const g=we("span",{class:`${n}-switcher-icon`,onClick:r},k);return N?we(Yt,{class:`${n}-icon-hover`},()=>g):g}}),wa=Object.defineProperty,$a=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,Da=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,ct=(e,t,a)=>t in e?wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,qe=(e,t)=>{for(var a in t||(t={}))Da.call(t,a)&&ct(e,a,t[a]);if(dt)for(var a of dt(t))Pa.call(t,a)&&ct(e,a,t[a]);return e},pt=(e,t)=>$a(e,Ea(t));const Bt=(()=>{let e=0;return()=>(e+=1,`__arco_tree${e}`)})();function Oa(e,t){return!!(pe(e)?t:e)}function Ta(e,t){const a=qe({},e);return t&&Object.keys(t).forEach(l=>{const s=t[l];s!==l&&(a[l]=e[s],delete a[s])}),a}function vt({subEnable:e,superEnable:t,isLeaf:a,treeNodeData:n,level:l}){return pe(e)?$e(t)?t(n,{isLeaf:a,level:l}):t??!1:e}function Va(e){var t,a;const{treeNodeData:n,parentNode:l,isTail:s=!0,treeProps:r}=e,{fieldNames:c}=r||{},o=Ta(n,c),i=r.loadMore?!!o.isLeaf:!((t=o.children)!=null&&t.length),d=l?l.level+1:0,h=pt(qe({},Wt(o,["children"])),{key:(a=o.key)!=null?a:Bt(),selectable:vt({subEnable:o.selectable,superEnable:r==null?void 0:r.selectable,isLeaf:i,level:d,treeNodeData:n}),disabled:!!o.disabled,disableCheckbox:!!o.disableCheckbox,checkable:vt({subEnable:o.checkable,superEnable:r==null?void 0:r.checkable,isLeaf:i,level:d,treeNodeData:n}),isLeaf:i,isTail:s,blockNode:!!(r!=null&&r.blockNode),showLine:!!(r!=null&&r.showLine),level:d,lineless:l?[...l.lineless,l.isTail]:[],draggable:Oa(o.draggable,r==null?void 0:r.draggable)});return pt(qe({},h),{treeNodeProps:h,treeNodeData:n,parent:l,parentKey:l==null?void 0:l.key,pathParentKeys:l?[...l.pathParentKeys,l.key]:[]})}function Ba(e,t){function a(n,l){if(!n)return;const{fieldNames:s}=t,r=[];return n.forEach((c,o)=>{const i=Va({treeNodeData:c,treeProps:t,parentNode:l,isTail:o===n.length-1});i.children=a(c[(s==null?void 0:s.children)||"children"],i),r.push(i)}),r}return a(e)}function It(){const e=ia(),t=()=>{var n;return(n=e==null?void 0:e.vnode.key)!=null?n:Bt()},a=O(t());return ua(()=>{a.value=t()}),a}function Ia(e){const{key:t,refTitle:a}=te(e),n=Fe(),l=O(!1),s=O(!1),r=O(!1),c=O(0),o=Gt(i=>{if(!a.value)return;const d=a.value.getBoundingClientRect(),h=window.pageYOffset+d.top,{pageY:k}=i,N=d.height/4,g=k-h;c.value=g<N?-1:g<d.height-N?0:1,r.value=n.allowDrop?n.allowDrop(t.value,c.value):!0});return{isDragOver:l,isDragging:s,isAllowDrop:r,dropPosition:c,setDragStatus(i,d){switch(i){case"dragStart":s.value=!0,c.value=0,n.onDragStart&&n.onDragStart(t.value,d);break;case"dragEnd":s.value=!1,l.value=!1,c.value=0,o.cancel(),n.onDragEnd&&n.onDragEnd(t.value,d);break;case"dragOver":l.value=!0,o(d),n.onDragOver&&n.onDragOver(t.value,d);break;case"dragLeave":l.value=!1,c.value=0,o.cancel(),n.onDragLeave&&n.onDragLeave(t.value,d);break;case"drop":n.onDrop&&n.onDrop(t.value,c.value,d),l.value=!1,c.value=0,o.cancel();break}}}}function La(e){return Oe(e)?e:[e]}const _a=ve({name:"BaseTreeNode",components:{NodeSwitcher:Ka,Checkbox:Qt,RenderFunction:Ot,IconDragDotVertical:qt},props:{title:{type:String},selectable:{type:Boolean},disabled:{type:Boolean},disableCheckbox:{type:Boolean},checkable:{type:Boolean},draggable:{type:Boolean},isLeaf:{type:Boolean},icon:{type:Function},switcherIcon:{type:Function},loadingIcon:{type:Function},dragIcon:{type:Function},isTail:{type:Boolean},blockNode:{type:Boolean},showLine:{type:Boolean},level:{type:Number,default:0},lineless:{type:Array,default:()=>[]}},setup(e){const t=It(),a=Be("tree-node"),n=Fe(),l=m(()=>{var p;return(p=n.key2TreeNode)==null?void 0:p.get(t.value)}),s=m(()=>l.value.treeNodeData),r=m(()=>l.value.children),c=m(()=>{var p;const S=(p=n.treeProps)==null?void 0:p.actionOnNodeClick;return S?La(S):[]}),{isLeaf:o,isTail:i,selectable:d,disabled:h,disableCheckbox:k,draggable:N}=te(e),g=m(()=>{var p;return[`${a}`,{[`${a}-selected`]:z.value,[`${a}-is-leaf`]:o.value,[`${a}-is-tail`]:i.value,[`${a}-expanded`]:I.value,[`${a}-disabled-selectable`]:!d.value&&!((p=n.treeProps)!=null&&p.disableSelectActionOnly),[`${a}-disabled`]:h.value}]}),D=O(),{isDragOver:$,isDragging:T,isAllowDrop:j,dropPosition:U,setDragStatus:w}=Ia(J({key:t,refTitle:D})),V=m(()=>[`${a}-title`,{[`${a}-title-draggable`]:N.value,[`${a}-title-gap-top`]:$.value&&j.value&&U.value<0,[`${a}-title-gap-bottom`]:$.value&&j.value&&U.value>0,[`${a}-title-highlight`]:!T.value&&$.value&&j.value&&U.value===0,[`${a}-title-dragging`]:T.value,[`${a}-title-block`]:l.value.blockNode}]),A=m(()=>{var p,S;return(S=(p=n.checkedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),Y=m(()=>{var p,S;return(S=(p=n.indeterminateKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),z=m(()=>{var p,S;return(S=(p=n.selectedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),I=m(()=>{var p,S;return(S=(p=n.expandedKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),oe=m(()=>{var p,S;return(S=(p=n.loadingKeys)==null?void 0:p.includes)==null?void 0:S.call(p,t.value)}),re=m(()=>n.dragIcon),fe=m(()=>n.nodeIcon);function W(p){var S,R;o.value||(!((S=r.value)!=null&&S.length)&&$e(n.onLoadMore)?n.onLoadMore(t.value):(R=n==null?void 0:n.onExpand)==null||R.call(n,!I.value,t.value,p))}const M=J({loading:oe,checked:A,selected:z,indeterminate:Y,expanded:I,isLeaf:o}),G=m(()=>n.nodeTitle?()=>{var p;return(p=n.nodeTitle)==null?void 0:p.call(n,s.value,M)}:void 0),ae=m(()=>n.nodeExtra?()=>{var p;return(p=n.nodeExtra)==null?void 0:p.call(n,s.value,M)}:void 0);return{nodekey:t,refTitle:D,prefixCls:a,classNames:g,titleClassNames:V,indeterminate:Y,checked:A,expanded:I,selected:z,treeTitle:G,treeNodeData:s,loading:oe,treeDragIcon:re,treeNodeIcon:fe,extra:ae,nodeStatus:M,onCheckboxChange(p,S){var R;k.value||h.value||(R=n.onCheck)==null||R.call(n,p,t.value,S)},onTitleClick(p){var S;c.value.includes("expand")&&W(p),!(!d.value||h.value)&&((S=n.onSelect)==null||S.call(n,t.value,p))},onSwitcherClick:W,onDragStart(p){var S;if(N.value){p.stopPropagation(),w("dragStart",p);try{(S=p.dataTransfer)==null||S.setData("text/plain","")}catch{}}},onDragEnd(p){N.value&&(p.stopPropagation(),w("dragEnd",p))},onDragOver(p){N&&(p.stopPropagation(),p.preventDefault(),w("dragOver",p))},onDragLeave(p){N.value&&(p.stopPropagation(),w("dragLeave",p))},onDrop(p){!N.value||!j.value||(p.stopPropagation(),p.preventDefault(),w("drop",p))}}}}),Fa=["data-level","data-key"],ja=["draggable"];function Aa(e,t,a,n,l,s){const r=q("NodeSwitcher"),c=q("Checkbox"),o=q("RenderFunction"),i=q("IconDragDotVertical");return E(),Q("div",{class:H(e.classNames),"data-level":e.level,"data-key":e.nodekey},[B(" 缩进 "),Pe("span",{class:H(`${e.prefixCls}-indent`)},[(E(!0),Q(Te,null,Je(e.level,d=>(E(),Q("span",{key:d,class:H([`${e.prefixCls}-indent-block`,{[`${e.prefixCls}-indent-block-lineless`]:e.lineless[d-1]}])},null,2))),128))],2),B(" switcher "),Pe("span",{class:H([`${e.prefixCls}-switcher`,{[`${e.prefixCls}-switcher-expanded`]:e.expanded}])},[ee(r,{"prefix-cls":e.prefixCls,loading:e.loading,"show-line":e.showLine,"tree-node-data":e.treeNodeData,icons:{switcherIcon:e.switcherIcon,loadingIcon:e.loadingIcon},"node-status":e.nodeStatus,onClick:e.onSwitcherClick},Pt({_:2},[e.$slots["switcher-icon"]?{name:"switcher-icon",fn:le(()=>[B(" @slot 定制 switcher 图标，会覆盖 Tree 的配置 "),x(e.$slots,"switcher-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:le(()=>[B(" @slot 定制 loading 图标，会覆盖 Tree 的配置 "),x(e.$slots,"loading-icon")])}:void 0]),1032,["prefix-cls","loading","show-line","tree-node-data","icons","node-status","onClick"])],2),B(" checkbox "),e.checkable?(E(),_(c,{key:0,disabled:e.disableCheckbox||e.disabled,"model-value":e.checked,indeterminate:e.indeterminate,"uninject-group-context":"",onChange:e.onCheckboxChange},null,8,["disabled","model-value","indeterminate","onChange"])):B("v-if",!0),B(" 内容 "),Pe("span",{ref:"refTitle",class:H(e.titleClassNames),draggable:e.draggable,onDragstart:t[0]||(t[0]=(...d)=>e.onDragStart&&e.onDragStart(...d)),onDragend:t[1]||(t[1]=(...d)=>e.onDragEnd&&e.onDragEnd(...d)),onDragover:t[2]||(t[2]=(...d)=>e.onDragOver&&e.onDragOver(...d)),onDragleave:t[3]||(t[3]=(...d)=>e.onDragLeave&&e.onDragLeave(...d)),onDrop:t[4]||(t[4]=(...d)=>e.onDrop&&e.onDrop(...d)),onClick:t[5]||(t[5]=(...d)=>e.onTitleClick&&e.onTitleClick(...d))},[e.$slots.icon||e.icon||e.treeNodeIcon?(E(),Q("span",{key:0,class:H([`${e.prefixCls}-icon`,`${e.prefixCls}-custom-icon`])},[B(" 节点图标 "),e.$slots.icon?x(e.$slots,"icon",Ue(F({key:0},e.nodeStatus))):e.icon?(E(),_(o,F({key:1,"render-func":e.icon},e.nodeStatus),null,16,["render-func"])):e.treeNodeIcon?(E(),_(o,F({key:2,"render-func":e.treeNodeIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):B("v-if",!0)],2)):B("v-if",!0),Pe("span",{class:H(`${e.prefixCls}-title-text`)},[e.treeTitle?(E(),_(o,{key:0,"render-func":e.treeTitle},null,8,["render-func"])):(E(),Q(Te,{key:1},[B(" 标题，treeTitle 优先级高于节点的 title "),x(e.$slots,"title",{title:e.title},()=>[da(ca(e.title),1)])],2112)),e.draggable?(E(),Q("span",{key:2,class:H([`${e.prefixCls}-icon`,`${e.prefixCls}-drag-icon`])},[B(" 拖拽图标 "),e.$slots["drag-icon"]?x(e.$slots,"drag-icon",Ue(F({key:0},e.nodeStatus))):e.dragIcon?(E(),_(o,F({key:1,"render-func":e.dragIcon},e.nodeStatus),null,16,["render-func"])):e.treeDragIcon?(E(),_(o,F({key:2,"render-func":e.treeDragIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):(E(),_(i,{key:3}))],2)):B("v-if",!0)],2)],42,ja),B(" 额外 "),e.extra?(E(),_(o,{key:1,"render-func":e.extra},null,8,["render-func"])):B("v-if",!0)],10,Fa)}var Xe=Ve(_a,[["render",Aa]]);const Ma=ve({name:"ExpandTransition",props:{expanded:Boolean},emits:["end"],setup(e,{emit:t}){return{onEnter(a){const n=`${a.scrollHeight}px`;a.style.height=e.expanded?"0":n,a.offsetHeight,a.style.height=e.expanded?n:"0"},onAfterEnter(a){a.style.height=e.expanded?"":"0",t("end")},onBeforeLeave(a){a.style.display="none"}}}});function Ra(e,t,a,n,l,s){return E(),_(pa,{onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave},{default:le(()=>[x(e.$slots,"default")]),_:3},8,["onEnter","onAfterEnter","onBeforeLeave"])}var za=Ve(Ma,[["render",Ra]]);const Ha=ve({name:"TransitionNodeList",components:{ExpandTransition:za,BaseTreeNode:Xe},props:{nodeKey:{type:[String,Number],required:!0}},setup(e){const a=[`${Be("tree")}-node-list`],n=Fe(),{nodeKey:l}=te(e),s=m(()=>{var o,i;return(i=(o=n.expandedKeys)==null?void 0:o.includes)==null?void 0:i.call(o,l.value)}),r=m(()=>{var o;const i=new Set(n.expandedKeys||[]),d=(o=n.flattenTreeData)==null?void 0:o.filter(h=>{var k,N;return(k=h.pathParentKeys)!=null&&k.includes(l.value)?!n.filterTreeNode||((N=n.filterTreeNode)==null?void 0:N.call(n,h.treeNodeData)):!1});return d==null?void 0:d.filter(h=>{var k;if(s.value)return(k=h.pathParentKeys)==null?void 0:k.every(g=>i.has(g));const N=h.pathParentKeys.indexOf(l.value);return h.pathParentKeys.slice(N+1).every(g=>i.has(g))})}),c=m(()=>{var o,i;return((o=n.currentExpandKeys)==null?void 0:o.includes(l.value))&&((i=r.value)==null?void 0:i.length)});return{classNames:a,visibleNodeList:r,show:c,expanded:s,onTransitionEnd(){var o;(o=n.onExpandEnd)==null||o.call(n,l.value)}}}});function xa(e,t,a,n,l,s){const r=q("BaseTreeNode"),c=q("ExpandTransition");return E(),_(c,{expanded:e.expanded,onEnd:e.onTransitionEnd},{default:le(()=>[e.show?(E(),Q("div",{key:0,class:H(e.classNames)},[(E(!0),Q(Te,null,Je(e.visibleNodeList,o=>(E(),_(r,F({key:o.key},o.treeNodeProps),null,16))),128))],2)):B("v-if",!0)]),_:1},8,["expanded","onEnd"])}var Ua=Ve(Ha,[["render",xa]]),Ya=Object.defineProperty,ft=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,yt=(e,t,a)=>t in e?Ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Qa=(e,t)=>{for(var a in t||(t={}))Wa.call(t,a)&&yt(e,a,t[a]);if(ft)for(var a of ft(t))Ga.call(t,a)&&yt(e,a,t[a]);return e},qa=ve({name:"TreeNode",inheritAttrs:!1,props:Qa({},Xe.props),setup(e,{slots:t,attrs:a}){const n=It();return()=>ee(Te,null,[ee(Xe,F(e,a,{key:n.value}),t),ee(Ua,{key:n.value,nodeKey:n.value},null)])}});function Xa(e){const{defaultCheckedKeys:t,checkedKeys:a,key2TreeNode:n,checkStrictly:l,halfCheckedKeys:s,onlyCheckLeaf:r}=te(e),c=O(!1),o=O([]),i=O([]),d=O(),h=O(),k=g=>Na({initCheckedKeys:g,key2TreeNode:n.value,checkStrictly:l.value,onlyCheckLeaf:r.value}),N=g=>{const D=k(g);[o.value,i.value]=D};return N(a.value||(t==null?void 0:t.value)||[]),_e(()=>{a.value?[d.value,h.value]=k(a.value):c.value&&(d.value=void 0,h.value=void 0,o.value=[],i.value=[]),c.value||(c.value=!0)}),{checkedKeys:m(()=>d.value||o.value),indeterminateKeys:m(()=>l.value&&s.value?s.value:h.value||i.value),setCheckedState(g,D,$=!1){return $?N(g):(o.value=g,i.value=D),[o.value,i.value]}}}function Lt(e){const{treeData:t,fieldNames:a,selectable:n,showLine:l,blockNode:s,checkable:r,loadMore:c,draggable:o}=te(e),i=O([]);_e(()=>{var k,N;i.value=Ba(t.value||[],{selectable:(k=n==null?void 0:n.value)!=null?k:!1,showLine:!!(l!=null&&l.value),blockNode:!!(s!=null&&s.value),checkable:(N=r==null?void 0:r.value)!=null?N:!1,fieldNames:a==null?void 0:a.value,loadMore:!!(c!=null&&c.value),draggable:!!(o!=null&&o.value)})});const d=m(()=>ka(i.value)),h=m(()=>Sa(d.value));return{treeData:i,flattenTreeData:d,key2TreeNode:h}}const Za=ve({name:"Tree",components:{VirtualList:Xt,TreeNode:qa},props:{size:{type:String,default:"medium"},blockNode:{type:Boolean},defaultExpandAll:{type:Boolean,default:!0},multiple:{type:Boolean},checkable:{type:[Boolean,String,Function],default:!1},selectable:{type:[Boolean,Function],default:!0},checkStrictly:{type:Boolean},checkedStrategy:{type:String,default:"all"},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:Array},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},data:{type:Array,default:()=>[]},fieldNames:{type:Object},showLine:{type:Boolean},loadMore:{type:Function},draggable:{type:Boolean},allowDrop:{type:Function},filterTreeNode:{type:Function},searchValue:{type:String,default:""},virtualListProps:{type:Object},defaultExpandSelected:{type:Boolean},defaultExpandChecked:{type:Boolean},autoExpandParent:{type:Boolean,default:!0},halfCheckedKeys:{type:Array},onlyCheckLeaf:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},actionOnNodeClick:{type:String},disableSelectActionOnly:{type:Boolean,default:!1}},emits:{select:(e,t)=>!0,"update:selectedKeys":e=>!0,check:(e,t)=>!0,"update:checkedKeys":e=>!0,"update:halfCheckedKeys":e=>!0,expand:(e,t)=>!0,"update:expandedKeys":e=>!0,dragStart:(e,t)=>!0,dragEnd:(e,t)=>!0,dragOver:(e,t)=>!0,dragLeave:(e,t)=>!0,drop:e=>!0},setup(e,{emit:t,slots:a}){const{data:n,showLine:l,multiple:s,loadMore:r,checkStrictly:c,checkedKeys:o,defaultCheckedKeys:i,selectedKeys:d,defaultSelectedKeys:h,expandedKeys:k,defaultExpandedKeys:N,checkedStrategy:g,selectable:D,checkable:$,blockNode:T,fieldNames:j,size:U,defaultExpandAll:w,filterTreeNode:V,draggable:A,allowDrop:Y,defaultExpandSelected:z,defaultExpandChecked:I,autoExpandParent:oe,halfCheckedKeys:re,onlyCheckLeaf:fe,animation:W}=te(e),M=Be("tree"),G=m(()=>[`${M}`,{[`${M}-checkable`]:$.value,[`${M}-show-line`]:l.value},`${M}-size-${U.value}`]),ae=he(a,"switcher-icon"),p=he(a,"loading-icon"),S=he(a,"drag-icon"),R=he(a,"icon"),ne=he(a,"title"),je=he(a,"extra"),{treeData:Ae,flattenTreeData:Ee,key2TreeNode:P}=Lt(J({treeData:n,selectable:D,showLine:l,blockNode:T,checkable:$,fieldNames:j,loadMore:r,draggable:A})),{checkedKeys:ye,indeterminateKeys:se,setCheckedState:Ce}=Xa(J({defaultCheckedKeys:i,checkedKeys:o,checkStrictly:c,key2TreeNode:P,halfCheckedKeys:re,onlyCheckLeaf:fe})),[X,ge]=xe((h==null?void 0:h.value)||[],J({value:d})),ue=O([]),ie=O();function Me(){if(N!=null&&N.value){const u=new Set([]);return N.value.forEach(v=>{if(u.has(v))return;const f=P.value.get(v);f&&[...oe.value?f.pathParentKeys:[],v].forEach(y=>u.add(y))}),[...u]}if(w.value)return Ee.value.filter(u=>u.children&&u.children.length).map(u=>u.key);if(z.value||I.value){const u=new Set([]),v=f=>{f.forEach(y=>{const b=P.value.get(y);b&&(b.pathParentKeys||[]).forEach(K=>u.add(K))})};return z.value&&v(X.value),I.value&&v(ye.value),[...u]}return[]}const[de,De]=xe(Me(),J({value:k})),ce=O([]),Re=m(()=>{const u=new Set(de.value),v=new Set(ce.value);return Ee.value.filter(f=>{var y;if(!(!V||!V.value||(V==null?void 0:V.value(f.treeNodeData))))return!1;const K=pe(f.parentKey),ke=(y=f.pathParentKeys)==null?void 0:y.every(Ke=>u.has(Ke)&&!v.has(Ke));return K||ke})});function be(u,v=g.value){let f=[...u];return v==="parent"?f=u.filter(y=>{const b=P.value.get(y);return b&&!(!pe(b.parentKey)&&u.includes(b.parentKey))}):v==="child"&&(f=u.filter(y=>{var b,K;return!((K=(b=P.value.get(y))==null?void 0:b.children)!=null&&K.length)})),f}function me(u){return u.map(v=>{var f;return((f=P.value.get(v))==null?void 0:f.treeNodeData)||void 0}).filter(Boolean)}function Ie(u){const{targetKey:v,targetChecked:f,newCheckedKeys:y,newIndeterminateKeys:b,event:K}=u,ke=v?P.value.get(v):void 0,Ke=be(y);t("update:checkedKeys",Ke),t("update:halfCheckedKeys",b),t("check",Ke,{checked:f,node:ke==null?void 0:ke.treeNodeData,checkedNodes:me(Ke),halfCheckedKeys:b,halfCheckedNodes:me(b),e:K})}function C(u){const{targetKey:v,targetSelected:f,newSelectedKeys:y,event:b}=u,K=v?P.value.get(v):void 0;t("update:selectedKeys",y),t("select",y,{selected:f,node:K==null?void 0:K.treeNodeData,selectedNodes:me(y),e:b})}function L(u){const{targetKey:v,targetExpanded:f,newExpandedKeys:y,event:b}=u,K=v?P.value.get(v):void 0;t("expand",y,{expanded:f,node:K==null?void 0:K.treeNodeData,expandedNodes:me(y),e:b}),t("update:expandedKeys",y)}function Z(u){const[v,f]=Ce(u,[],!0);Ie({newCheckedKeys:v,newIndeterminateKeys:f})}function Ne(u){let v=u;!s.value&&u.length>1&&(v=[u[0]]),ge(v),C({newSelectedKeys:v})}function Le(u){ce.value=[],De(u),L({newExpandedKeys:u})}function At(u,v,f){if(!u.length)return;let y=[...ye.value],b=[...se.value];u.forEach(K=>{const ke=P.value.get(K);ke&&([y,b]=Qe({node:ke,checked:v,checkedKeys:[...y],indeterminateKeys:[...b],checkStrictly:c.value}))}),Ce(y,b),Ie({targetKey:f,targetChecked:pe(f)?void 0:v,newCheckedKeys:y,newIndeterminateKeys:b})}function Mt(u,v,f){if(!u.length)return;let y;if(s.value){const b=new Set(X.value);u.forEach(K=>{v?b.add(K):b.delete(K)}),y=[...b]}else y=v?[u[0]]:[];ge(y),C({targetKey:f,targetSelected:pe(f)?void 0:v,newSelectedKeys:y})}function Rt(u,v,f){const y=new Set(de.value);u.forEach(K=>{v?y.add(K):y.delete(K),ot(K)});const b=[...y];De(b),L({targetKey:f,targetExpanded:pe(f)?void 0:v,newExpandedKeys:b})}function nt(u,v,f){const y=P.value.get(v);if(!y)return;const[b,K]=Qe({node:y,checked:u,checkedKeys:ye.value,indeterminateKeys:se.value,checkStrictly:c.value});Ce(b,K),Ie({targetKey:v,targetChecked:u,newCheckedKeys:b,newIndeterminateKeys:K,event:f})}function zt(u,v){if(!P.value.get(u))return;let y,b;if(s.value){const K=new Set(X.value);b=!K.has(u),b?K.add(u):K.delete(u),y=[...K]}else b=!0,y=[u];ge(y),C({targetKey:u,targetSelected:b,newSelectedKeys:y,event:v})}function lt(u,v,f){if(ce.value.includes(v)||!P.value.get(v))return;const b=new Set(de.value);u?b.add(v):b.delete(v);const K=[...b];De(K),W.value&&ce.value.push(v),L({targetKey:v,targetExpanded:u,newExpandedKeys:K,event:f})}function ot(u){const v=ce.value.indexOf(u);ce.value.splice(v,1)}const Ht=m(()=>r!=null&&r.value?async u=>{if(!$e(r.value))return;const v=P.value.get(u);if(!v)return;const{treeNodeData:f}=v;ue.value=[...new Set([...ue.value,u])];try{await r.value(f),ue.value=ue.value.filter(y=>y!==u),lt(!0,u),ye.value.includes(u)&&nt(!0,u)}catch(y){ue.value=ue.value.filter(b=>b!==u),console.error("[tree]load data error: ",y)}}:void 0),rt=J({treeProps:e,switcherIcon:ae,loadingIcon:p,dragIcon:S,nodeIcon:R,nodeTitle:ne,nodeExtra:je,treeData:Ae,flattenTreeData:Ee,key2TreeNode:P,checkedKeys:ye,indeterminateKeys:se,selectedKeys:X,expandedKeys:de,loadingKeys:ue,currentExpandKeys:ce,onLoadMore:Ht,filterTreeNode:V,onCheck:nt,onSelect:zt,onExpand:lt,onExpandEnd:ot,allowDrop(u,v){const f=P.value.get(u);return f&&$e(Y.value)?!!Y.value({dropNode:f.treeNodeData,dropPosition:v}):!0},onDragStart(u,v){const f=P.value.get(u);ie.value=f,f&&t("dragStart",v,f.treeNodeData)},onDragEnd(u,v){const f=P.value.get(u);ie.value=void 0,f&&t("dragEnd",v,f.treeNodeData)},onDragOver(u,v){const f=P.value.get(u);f&&t("dragOver",v,f.treeNodeData)},onDragLeave(u,v){const f=P.value.get(u);f&&t("dragLeave",v,f.treeNodeData)},onDrop(u,v,f){const y=P.value.get(u);ie.value&&y&&!(y.key===ie.value.key||y.pathParentKeys.includes(ie.value.key||""))&&t("drop",{e:f,dragNode:ie.value.treeNodeData,dropNode:y.treeNodeData,dropPosition:v})}});return va(Tt,rt),{classNames:G,visibleTreeNodeList:Re,treeContext:rt,virtualListRef:O(),computedSelectedKeys:X,computedExpandedKeys:de,computedCheckedKeys:ye,computedIndeterminateKeys:se,getPublicCheckedKeys:be,getNodes:me,internalCheckNodes:At,internalSetCheckedKeys:Z,internalSelectNodes:Mt,internalSetSelectedKeys:Ne,internalExpandNodes:Rt,internalSetExpandedKeys:Le}},methods:{toggleCheck(e,t){const{key2TreeNode:a,onCheck:n,checkedKeys:l}=this.treeContext,s=!l.includes(e),r=a.get(e);r&&Se(r)&&n(s,e,t)},scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)},getSelectedNodes(){return this.getNodes(this.computedSelectedKeys)},getCheckedNodes(e={}){const{checkedStrategy:t,includeHalfChecked:a}=e,n=this.getPublicCheckedKeys(this.computedCheckedKeys,t);return[...this.getNodes(n),...a?this.getHalfCheckedNodes():[]]},getHalfCheckedNodes(){return this.getNodes(this.computedIndeterminateKeys)},getExpandedNodes(){return this.getNodes(this.computedExpandedKeys)},checkAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&Se(l)}):[];this.internalSetCheckedKeys(a)},checkNode(e,t=!0,a=!1){const{checkStrictly:n,treeContext:l}=this,{key2TreeNode:s}=l,r=Oe(e),c=(r?e:[e]).filter(o=>{const i=s.get(o);return i&&Se(i)&&(n||!a||Ca(i))});this.internalCheckNodes(c,t,r?void 0:e)},selectAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&Ye(l)}):[];this.internalSetSelectedKeys(a)},selectNode(e,t=!0){const{key2TreeNode:a}=this.treeContext,n=Oe(e),l=(n?e:[e]).filter(s=>{const r=a.get(s);return r&&Ye(r)});this.internalSelectNodes(l,t,n?void 0:e)},expandAll(e=!0){const{key2TreeNode:t}=this.treeContext,a=e?[...t.keys()].filter(n=>{const l=t.get(n);return l&&it(l)}):[];this.internalSetExpandedKeys(a)},expandNode(e,t=!0){const{key2TreeNode:a}=this.treeContext,n=Oe(e),l=(n?e:[e]).filter(s=>{const r=a.get(s);return r&&it(r)});this.internalExpandNodes(l,t,n?void 0:e)}}});function Ja(e,t,a,n,l,s){const r=q("TreeNode"),c=q("VirtualList");return E(),Q("div",{class:H(e.classNames)},[e.virtualListProps?(E(),_(c,F({key:0,ref:"virtualListRef"},e.virtualListProps,{data:e.visibleTreeNodeList}),{item:le(({item:o})=>[ee(r,F({key:`${e.searchValue}-${o.key}`},o.treeNodeProps),null,16)]),_:1},16,["data"])):(E(!0),Q(Te,{key:1},Je(e.visibleTreeNodeList,o=>(E(),_(r,F({key:o.key},o.treeNodeProps),null,16))),128))],2)}var ze=Ve(Za,[["render",Ja]]);const ht=Object.assign(ze,{install:(e,t)=>{$t(e,t);const a=Et(t);e.component(a+ze.name,ze)}});var en=Object.defineProperty,tn=Object.defineProperties,an=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,bt=(e,t,a)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,on=(e,t)=>{for(var a in t||(t={}))nn.call(t,a)&&bt(e,a,t[a]);if(gt)for(var a of gt(t))ln.call(t,a)&&bt(e,a,t[a]);return e},rn=(e,t)=>tn(e,an(t));function sn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!fa(e)}var un=ve({name:"TreeSelectPanel",components:{Tree:ht},props:{treeProps:{type:Object,default:()=>({})},selectedKeys:{type:Array},showCheckable:{type:Boolean},treeSlots:{type:Object,default:()=>({})},scrollbar:{type:[Boolean,Object],default:!0}},emits:["change"],setup(e,{emit:t}){const{showCheckable:a,selectedKeys:n,treeProps:l,scrollbar:s}=te(e),{displayScrollbar:r,scrollbarProps:c}=Jt(s),o=Be("tree-select"),i=O(),d=m(()=>rn(on({},l.value),{disableSelectActionOnly:!0,checkedKeys:a.value?n.value:[],selectedKeys:a.value?[]:n.value})),h=(g,D)=>{var $,T;a.value?(T=($=i.value)==null?void 0:$.toggleCheck)==null||T.call($,g[0],D):t("change",g)},k=g=>{t("change",g)},N=()=>ee(ht,F({ref:i},d.value,{onSelect:h,onCheck:k}),e.treeSlots);return()=>{if(r.value){let g;return ee(Zt,F({class:`${o}-tree-wrapper`},c.value),sn(g=N())?g:{default:()=>[g]})}return ee("div",{class:`${o}-tree-wrapper`},[N()])}}}),dn=Object.defineProperty,cn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,kt=(e,t,a)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,St=(e,t)=>{for(var a in t||(t={}))vn.call(t,a)&&kt(e,a,t[a]);if(mt)for(var a of mt(t))fn.call(t,a)&&kt(e,a,t[a]);return e},yn=(e,t)=>cn(e,pn(t));function tt(e){return Ze(e)}function _t(e){return e!=null&&e!==""}function at(e){return tt(e)?e.value:e}function hn(e){return tt(e)?e.label:void 0}function Ct(e){const t=at(e);return _t(t)}function Nt(e){return e.map(at).filter(_t)}function gn(e){var t;const{defaultValue:a,modelValue:n,key2TreeNode:l,multiple:s,treeCheckable:r,fallbackOption:c,fieldNames:o}=te(e);function i(w){const V=(Oe(w)?w:[w]).filter(Ct);return s!=null&&s.value||r!=null&&r.value?V:V.slice(0,1)}function d(w,V){const A=[],Y=w?w.filter(Ct):[];if(Y.length){const z=new Map;V==null||V.forEach(I=>{z.set(I.value,I)}),Y.forEach(I=>{var oe,re,fe,W,M;const G=at(I),ae=z.get(G),p=l.value.get(G);let S=null;const R=((oe=o==null?void 0:o.value)==null?void 0:oe.title)||"title";if(!p){const ne=$e(c==null?void 0:c.value)?c==null?void 0:c.value(G):c==null?void 0:c.value;if(ne===!1)return;Ze(ne)&&(S=ne)}A.push(yn(St(St({},tt(I)?I:{}),ae||{}),{value:G,label:(M=(W=(fe=(re=hn(I))!=null?re:p==null?void 0:p.title)!=null?fe:ae==null?void 0:ae.label)!=null?W:S==null?void 0:S[R])!=null?M:G}))})}return A}const h=O(),k=O();_e(()=>{var w;const V=(n==null?void 0:n.value)!==void 0,A=i((w=n==null?void 0:n.value)!=null?w:[]),Y=Nt(A);k.value=V?d(Y,d(A)):void 0,h.value=V?Y:void 0});const N=i((t=a==null?void 0:a.value)!=null?t:[]),g=Nt(N),D=d(g,d(N)),$=O(g||[]),T=O(D);ut($,()=>{T.value=d($.value,D)}),ut([h,k],([w,V])=>{$.value=w||[],T.value=V||[]});const j=m(()=>{var w;return(w=h.value)!=null?w:$.value}),U=m(()=>{var w;return(w=k.value)!=null?w:T.value});return{selectedKeys:j,selectedValue:U,setLocalSelectedKeys(w){$.value=w},localSelectedKeys:$,localSelectedValue:T}}function bn(e){const{searchValue:t,flattenTreeData:a,filterMethod:n,disableFilter:l,fieldNames:s}=te(e),r=m(()=>{var g;return((g=s.value)==null?void 0:g.key)||"key"}),c=(g,D)=>{const $=D[r.value];return!pe($)&&String($).indexOf(g)>-1},o=m(()=>(n==null?void 0:n.value)||c),i=O(),d=m(()=>!!t.value),h=m(()=>!(l!=null&&l.value)&&d.value&&i.value&&i.value.size===0),k=m(()=>l!=null&&l.value?void 0:g=>{var D,$;if(!d.value)return!0;const T=g[r.value];return($=(D=i.value)==null?void 0:D.has(T||""))!=null?$:!1}),N=ea((g,D)=>{const $=g.filter(j=>o.value(D,j.treeNodeData)),T=new Set;$.forEach(j=>{T.add(j.key),j.pathParentKeys.forEach(U=>{T.add(U)})}),i.value=T},100);return _e(()=>{l!=null&&l.value?i.value=void 0:N(a.value,t.value)}),{isEmptyFilterResult:h,filterTreeNode:k}}function mn(e,t){const a=`${t}-slot-`;return Object.keys(e).reduce((l,s)=>{if(s.startsWith(a)){const r=s.slice(a.length);r&&(l[r]=e[s])}return l},{})}var kn=Object.defineProperty,Sn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,Kt=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,wt=(e,t,a)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ft=(e,t)=>{for(var a in t||(t={}))Nn.call(t,a)&&wt(e,a,t[a]);if(Kt)for(var a of Kt(t))Kn.call(t,a)&&wt(e,a,t[a]);return e},jt=(e,t)=>Sn(e,Cn(t));const wn=ve({name:"TreeSelect",components:{Trigger:ta,SelectView:aa,Panel:un,Empty:na,Spin:la},inheritAttrs:!1,props:{disabled:{type:Boolean},loading:{type:Boolean},error:{type:Boolean},size:{type:String},border:{type:Boolean,default:!0},allowSearch:{type:[Boolean,Object],default:e=>!!e.multiple},allowClear:{type:Boolean},placeholder:{type:String},maxTagCount:{type:Number},multiple:{type:Boolean},defaultValue:{type:[String,Number,Array,Object]},modelValue:{type:[String,Number,Array,Object]},fieldNames:{type:Object},data:{type:Array,default:()=>[]},labelInValue:{type:Boolean},treeCheckable:{type:Boolean},treeCheckStrictly:{type:Boolean},treeCheckedStrategy:{type:String,default:"all"},treeProps:{type:Object},triggerProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},dropdownStyle:{type:Object},dropdownClassName:{type:[String,Array]},filterTreeNode:{type:Function},loadMore:{type:Function},disableFilter:{type:Boolean},popupContainer:{type:[String,Object]},fallbackOption:{type:[Boolean,Function],default:!0},selectable:{type:[Boolean,String,Function],default:!0},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1},inputValue:{type:String},defaultInputValue:{type:String,default:""}},emits:{change:e=>!0,"update:modelValue":e=>!0,"update:inputValue":e=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0,search:e=>!0,clear:()=>!0,inputValueChange:e=>!0},setup(e,{emit:t,slots:a}){var n,l,s;const{defaultValue:r,modelValue:c,multiple:o,popupVisible:i,defaultPopupVisible:d,treeCheckable:h,treeCheckStrictly:k,data:N,fieldNames:g,disabled:D,labelInValue:$,filterTreeNode:T,disableFilter:j,dropdownStyle:U,treeProps:w,fallbackOption:V,selectable:A,dropdownClassName:Y}=te(e),{mergedDisabled:z,eventHandlers:I}=oa({disabled:D}),oe=Be("tree-select"),re=Dt(ra,void 0),fe=(s=(l=re==null?void 0:(n=re.slots).empty)==null?void 0:l.call(n,{component:"tree-select"}))==null?void 0:s[0],W=m(()=>o.value||h.value),M=(C,L)=>{var Z;return A.value==="leaf"?L.isLeaf:$e(A.value)?A.value(C,L):(Z=A.value)!=null?Z:!1},G=m(()=>h.value?M:!1),ae=m(()=>Ze(e.allowSearch)&&!!e.allowSearch.retainInputValue),{flattenTreeData:p,key2TreeNode:S}=Lt(J({treeData:N,fieldNames:g,selectable:M,checkable:G})),{selectedKeys:R,selectedValue:ne,setLocalSelectedKeys:je,localSelectedKeys:Ae,localSelectedValue:Ee}=gn(J({defaultValue:r,modelValue:c,key2TreeNode:S,multiple:o,treeCheckable:h,treeCheckStrictly:k,fallbackOption:V,fieldNames:g}));function P(C){return h.value?Se(C):Ye(C)}const ye=m(()=>pe(ne.value)?[]:W.value&&!z.value?ne.value.map(C=>{const L=S.value.get(C.value);return jt(Ft({},C),{closable:!L||P(L)})}):ne.value),se=C=>{je(C),ba(()=>{var L,Z;const Ne=($.value?Ee.value:Ae.value)||[],Le=W.value?Ne:Ne[0];t("update:modelValue",Le),t("change",Le),(Z=(L=I.value)==null?void 0:L.onChange)==null||Z.call(L)})},Ce=O(e.defaultInputValue),X=m(()=>{var C;return(C=e.inputValue)!=null?C:Ce.value}),ge=C=>{Ce.value=C,t("update:inputValue",C),t("inputValueChange",C)},ue=C=>{C!==X.value&&(de(!0),ge(C),e.allowSearch&&t("search",C))},[ie,Me]=xe(d.value,J({value:i})),de=C=>{C!==ie.value&&(Me(C),t("popup-visible-change",C),t("update:popupVisible",C)),C||be.value&&be.value.blur&&be.value.blur()},{isEmptyFilterResult:De,filterTreeNode:ce}=bn(J({searchValue:X,flattenTreeData:p,filterMethod:T,disableFilter:j,fieldNames:g})),Re=m(()=>!p.value.length||De.value),be=O(),me=m(()=>{var C;return[(U==null?void 0:U.value)||{},(C=w==null?void 0:w.value)!=null&&C.virtualListProps?{"max-height":"unset"}:{}]});return{refSelectView:be,prefixCls:oe,TreeSelectEmpty:fe,selectedValue:ne,selectedKeys:R,mergedDisabled:z,searchValue:X,panelVisible:ie,isEmpty:Re,computedFilterTreeNode:ce,isMultiple:W,selectViewValue:ye,computedDropdownStyle:me,onSearchValueChange:ue,onSelectChange(C){se(C),!ae.value&&X.value&&ge(""),W.value||de(!1)},onVisibleChange:de,onInnerClear(){se([]),t("clear")},pickSubCompSlots:mn,isSelectable:M,isCheckable:G,onBlur:()=>{!ae.value&&X.value&&ge("")},onItemRemove(C){if(z.value)return;const L=S.value.get(C);if(h.value&&L){if(P(L)){const[Z]=Qe({node:L,checked:!1,checkedKeys:R.value,indeterminateKeys:[],checkStrictly:k.value});se(Z)}}else{const Z=R.value.filter(Ne=>Ne!==C);se(Z)}}}}});function $n(e,t,a,n,l,s){const r=q("SelectView"),c=q("Spin"),o=q("Panel"),i=q("Trigger");return E(),_(i,F({class:`${e.prefixCls}-trigger`,"auto-fit-popup-min-width":"",trigger:"click",position:"bl","popup-offset":4,"animation-name":"slide-dynamic-origin","prevent-focus":!0},e.triggerProps,{disabled:e.mergedDisabled,"popup-visible":e.panelVisible,"popup-container":e.popupContainer,"click-to-close":!e.allowSearch,"auto-fit-transform-origin":"",onPopupVisibleChange:e.onVisibleChange}),{content:le(()=>[Pe("div",{class:H([`${e.prefixCls}-popup`,{[`${e.prefixCls}-has-header`]:!!e.$slots.header,[`${e.prefixCls}-has-footer`]:!!e.$slots.footer},e.dropdownClassName]),style:ya(e.computedDropdownStyle)},[e.$slots.header&&(!e.isEmpty||e.showHeaderOnEmpty)?(E(),Q("div",{key:0,class:H(`${e.prefixCls}-header`)},[x(e.$slots,"header")],2)):B("v-if",!0),e.loading?x(e.$slots,"loader",{key:1},()=>[ee(c)]):e.isEmpty?x(e.$slots,"empty",{key:2},()=>[(E(),_(ha(e.TreeSelectEmpty?e.TreeSelectEmpty:"Empty")))]):(E(),_(o,{key:3,"selected-keys":e.selectedKeys,"show-checkable":e.treeCheckable,scrollbar:e.scrollbar,"tree-props":jt(Ft({actionOnNodeClick:e.selectable==="leaf"?"expand":void 0,blockNode:!0},e.treeProps),{data:e.data,checkStrictly:e.treeCheckStrictly,checkedStrategy:e.treeCheckedStrategy,fieldNames:e.fieldNames,multiple:e.multiple,loadMore:e.loadMore,filterTreeNode:e.computedFilterTreeNode,size:e.size,checkable:e.isCheckable,selectable:e.isSelectable,searchValue:e.searchValue}),"tree-slots":e.pickSubCompSlots(e.$slots,"tree"),onChange:e.onSelectChange},null,8,["selected-keys","show-checkable","scrollbar","tree-props","tree-slots","onChange"])),e.$slots.footer&&(!e.isEmpty||e.showFooterOnEmpty)?(E(),Q("div",{key:4,class:H(`${e.prefixCls}-footer`)},[x(e.$slots,"footer")],2)):B("v-if",!0)],6)]),default:le(()=>[x(e.$slots,"trigger",{},()=>[ee(r,F({ref:"refSelectView","model-value":e.selectViewValue,"input-value":e.searchValue,"allow-search":!!e.allowSearch,"allow-clear":e.allowClear,loading:e.loading,size:e.size,"max-tag-count":e.maxTagCount,disabled:e.mergedDisabled,opened:e.panelVisible,error:e.error,bordered:e.border,placeholder:e.placeholder,multiple:e.isMultiple},e.$attrs,{onInputValueChange:e.onSearchValueChange,onClear:e.onInnerClear,onRemove:e.onItemRemove,onBlur:e.onBlur}),Pt({_:2},[e.$slots.prefix?{name:"prefix",fn:le(()=>[x(e.$slots,"prefix")])}:void 0,e.$slots.label?{name:"label",fn:le(d=>[x(e.$slots,"label",Ue(ga(d)))])}:void 0]),1040,["model-value","input-value","allow-search","allow-clear","loading","size","max-tag-count","disabled","opened","error","bordered","placeholder","multiple","onInputValueChange","onClear","onRemove","onBlur"])])]),_:3},16,["class","disabled","popup-visible","popup-container","click-to-close","onPopupVisibleChange"])}var He=Ve(wn,[["render",$n]]);const En=Object.assign(He,{install:(e,t)=>{$t(e,t);const a=Et(t);e.component(a+He.name,He)}}),Bn=ve({name:"Select",__name:"index",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,l=m({get:()=>a.modelValue,set:s=>{n("update:modelValue",s)}});return(s,r)=>{const c=En;return E(),_(sa,null,{default:le(()=>[ee(c,F({modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=o=>l.value=o)},s.$attrs),null,16,["modelValue"])]),_:1})}}});export{Bn as default};
